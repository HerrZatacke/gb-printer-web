/*! License information can be found in 5367/iap.js.l.txt */
"use strict";(self.webpackChunkgb_printer_web=self.webpackChunkgb_printer_web||[]).push([[42],{47387:function(t,e,r){r(84944),r(33792),r(21249),r(43290),r(47042),r(83112),r(83710),r(41539),r(39714),r(69600),r(89554),r(54747),r(57327),r(91038),r(78783),r(88674),r(82526),r(41817),r(32165),r(66992),r(33948),r(72443),r(39341),r(73706),r(10408),r(69070),r(78011),r(30489),r(68309),r(68304);var n=r(55140),o=r(13629),i=r(30661),a=r(75500);function u(t){return u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},u(t)}function c(){c=function(){return t};var t={},e=Object.prototype,r=e.hasOwnProperty,n="function"==typeof Symbol?Symbol:{},o=n.iterator||"@@iterator",i=n.asyncIterator||"@@asyncIterator",a=n.toStringTag||"@@toStringTag";function l(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{l({},"")}catch(t){l=function(t,e,r){return t[e]=r}}function f(t,e,r,n){var o=e&&e.prototype instanceof p?e:p,i=Object.create(o.prototype),a=new L(n||[]);return i._invoke=function(t,e,r){var n="suspendedStart";return function(o,i){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===o)throw i;return j()}for(r.method=o,r.arg=i;;){var a=r.delegate;if(a){var u=O(a,r);if(u){if(u===h)continue;return u}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var c=s(t,e,r);if("normal"===c.type){if(n=r.done?"completed":"suspendedYield",c.arg===h)continue;return{value:c.arg,done:r.done}}"throw"===c.type&&(n="completed",r.method="throw",r.arg=c.arg)}}}(t,r,a),i}function s(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}t.wrap=f;var h={};function p(){}function y(){}function d(){}var v={};l(v,o,(function(){return this}));var m=Object.getPrototypeOf,g=m&&m(m(A([])));g&&g!==e&&r.call(g,o)&&(v=g);var b=d.prototype=p.prototype=Object.create(v);function w(t){["next","throw","return"].forEach((function(e){l(t,e,(function(t){return this._invoke(e,t)}))}))}function E(t,e){function n(o,i,a,c){var l=s(t[o],t,i);if("throw"!==l.type){var f=l.arg,h=f.value;return h&&"object"==u(h)&&r.call(h,"__await")?e.resolve(h.__await).then((function(t){n("next",t,a,c)}),(function(t){n("throw",t,a,c)})):e.resolve(h).then((function(t){f.value=t,a(f)}),(function(t){return n("throw",t,a,c)}))}c(l.arg)}var o;this._invoke=function(t,r){function i(){return new e((function(e,o){n(t,r,e,o)}))}return o=o?o.then(i,i):i()}}function O(t,e){var r=t.iterator[e.method];if(void 0===r){if(e.delegate=null,"throw"===e.method){if(t.iterator.return&&(e.method="return",e.arg=void 0,O(t,e),"throw"===e.method))return h;e.method="throw",e.arg=new TypeError("The iterator does not provide a 'throw' method")}return h}var n=s(r,t.iterator,e.arg);if("throw"===n.type)return e.method="throw",e.arg=n.arg,e.delegate=null,h;var o=n.arg;return o?o.done?(e[t.resultName]=o.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=void 0),e.delegate=null,h):o:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,h)}function S(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function x(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function L(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(S,this),this.reset(!0)}function A(t){if(t){var e=t[o];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var n=-1,i=function e(){for(;++n<t.length;)if(r.call(t,n))return e.value=t[n],e.done=!1,e;return e.value=void 0,e.done=!0,e};return i.next=i}}return{next:j}}function j(){return{value:void 0,done:!0}}return y.prototype=d,l(b,"constructor",d),l(d,"constructor",y),y.displayName=l(d,a,"GeneratorFunction"),t.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===y||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,d):(t.__proto__=d,l(t,a,"GeneratorFunction")),t.prototype=Object.create(b),t},t.awrap=function(t){return{__await:t}},w(E.prototype),l(E.prototype,i,(function(){return this})),t.AsyncIterator=E,t.async=function(e,r,n,o,i){void 0===i&&(i=Promise);var a=new E(f(e,r,n,o),i);return t.isGeneratorFunction(r)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},w(b),l(b,a,"Generator"),l(b,o,(function(){return this})),l(b,"toString",(function(){return"[object Generator]"})),t.keys=function(t){var e=[];for(var r in t)e.push(r);return e.reverse(),function r(){for(;e.length;){var n=e.pop();if(n in t)return r.value=n,r.done=!1,r}return r.done=!0,r}},t.values=A,L.prototype={constructor:L,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(x),!t)for(var e in this)"t"===e.charAt(0)&&r.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function n(r,n){return a.type="throw",a.arg=t,e.next=r,n&&(e.method="next",e.arg=void 0),!!n}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],a=i.completion;if("root"===i.tryLoc)return n("end");if(i.tryLoc<=this.prev){var u=r.call(i,"catchLoc"),c=r.call(i,"finallyLoc");if(u&&c){if(this.prev<i.catchLoc)return n(i.catchLoc,!0);if(this.prev<i.finallyLoc)return n(i.finallyLoc)}else if(u){if(this.prev<i.catchLoc)return n(i.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return n(i.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,h):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),h},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),x(r),h}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;x(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,r){return this.delegate={iterator:A(t),resultName:e,nextLoc:r},"next"===this.method&&(this.arg=void 0),h}},t}function l(t,e,r,n,o,i,a){try{var u=t[i](a),c=u.value}catch(t){return void r(t)}u.done?e(c):Promise.resolve(c).then(n,o)}var f=function(t){return function(e){var r=e%20,n=Math.floor(e/20),o=8*r,i=8*n;return new Array(8).fill(null).map((function(e,r){return t.slice(o+160*(i+r)).slice(0,8)})).flat(1)}},s=[0,256,1,257],h=function(t){for(var e=[],r=0;r<8;r+=1){for(var n=0,o=0;o<8;o+=1){n+=s[t[8*r+o]]<<7-o}e.push((n>>8).toString(16).padStart(2,"0"),(255&n).toString(16).padStart(2,"0"))}return e.join(" ").toUpperCase()};e.Z=function(t){return function(e){var r=e.bitmapQueue,u=e.dither,s=e.contrastBaseValues;r.forEach(function(){var e,r=(e=c().mark((function e(r){var l,p,y,d,v,m,g,b,w,E,O,S,x,L;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return l=r.imageData,p=r.height,y=r.fileName,d=r.lastModified,v=(0,n._)(l,s,u,[{r:0,g:0,b:0},{r:1,g:0,b:0},{r:2,g:0,b:0},{r:3,g:0,b:0}]),m=v.data,g=Array.from(m).filter((function(t,e){return!(e%4)})),b=20*Math.ceil(p/8),w=f(g),E=new Array(b).fill(null).map((function(t,e){return w(e)})).map(h),e.next=8,(0,i.aj)(E);case 8:return O=e.sent,S=O.dataHash,e.next=12,(0,a.jm)(E);case 12:x=e.sent,L=x.dataHash,t({type:o.d3,payload:{fileName:y,imageHash:S,frameHash:L,tiles:E,lastModified:d,tempId:Math.random().toString(16).split(".").pop()}});case 15:case"end":return e.stop()}}),e)})),function(){var t=this,r=arguments;return new Promise((function(n,o){var i=e.apply(t,r);function a(t){l(i,n,o,a,u,"next",t)}function u(t){l(i,n,o,a,u,"throw",t)}a(void 0)}))});return function(t){return r.apply(this,arguments)}}())}}},15177:function(t,e,r){r.d(e,{T6:function(){return s},Z6:function(){return a},d$:function(){return y},fb:function(){return f},jU:function(){return l},k3:function(){return i},oU:function(){return h},q1:function(){return p},vc:function(){return o},z3:function(){return u}});r(47042);var n=r(24022),o="YYYY-MM-DD HH:mm:ss:SSS",i="YYYY-MM-DD",a="HH:mm",u="YYYYMMDD-HHmmss",c=[0,85,170,255],l='{"command":"INIT"}',f='{"command":"DATA", "compressed":0, "more":1}',s='{"command":"DATA","compressed":0,"more":0}',h='{"command":"PRNT","sheets":1,"margin_upper":1,"margin_lower":3,"pallet":228,"density":64 }',p={r:c.slice(),g:c.slice(),b:c.slice(),n:c.slice(),blend:n._I.MULTIPLY},y={shortName:"-",name:"Missing Palette",palette:["#aaaaaa","#999999","#888888","#777777"]}},64162:function(t,e,r){r.r(e),r.d(e,{default:function(){return jc}});r(19601),r(66992),r(41539),r(88674),r(78783),r(33948),r(92222);var n=r(67294),o=r(40213),i=r(73935),a=r(97779),u=function(t,e){return void 0!==t?t:e},c=r(13629),l=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"cybl",e=arguments.length>1?arguments[1]:void 0;switch(e.type){case c.K0:return e.payload;case c.D5:return u(e.payload.activePalette,t);case c.Or:return e.payload.newSelectedPalette||t;default:return t}};r(57327),r(79753),r(82526),r(41817),r(32165),r(91038),r(47042),r(68309),r(74916);function f(t){return function(t){if(Array.isArray(t))return s(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||function(t,e){if(!t)return;if("string"==typeof t)return s(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);"Object"===r&&t.constructor&&(r=t.constructor.name);if("Map"===r||"Set"===r)return Array.from(t);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return s(t,e)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function s(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}var h=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],e=arguments.length>1?arguments[1]:void 0;switch(e.type){case c.Vo:return[].concat(f(t),[e.payload]);case c.LC:return[];case c.d3:return t.filter((function(t){return t.fileName!==e.payload.fileName}));default:return t}};r(83710);function p(t){return function(t){if(Array.isArray(t))return y(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||function(t,e){if(!t)return;if("string"==typeof t)return y(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);"Object"===r&&t.constructor&&(r=t.constructor.name);if("Map"===r||"Set"===r)return Array.from(t);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return y(t,e)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function y(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}var d=null,v=function(){if(null===d)try{d=window.navigator.canShare({files:[new File([new Blob(p("test"))],"test.txt",{type:"text/plain",lastModified:new Date})]})}catch(t){d=!1}return d};function m(t){return function(t){if(Array.isArray(t))return g(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||function(t,e){if(!t)return;if("string"==typeof t)return g(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);"Object"===r&&t.constructor&&(r=t.constructor.name);if("Map"===r||"Set"===r)return Array.from(t);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return g(t,e)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function g(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}var b=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],e=arguments.length>1?arguments[1]:void 0;switch(e.type){case c.jH:return[e.payload].concat(m(t));case c.GU:case c.Dt:case c.S1:case c.md:case c.BS:case c.Or:case c.Gp:return t.filter((function(t,e){return e}));default:return t}},w=function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];switch((arguments.length>1?arguments[1]:void 0).type){case c.xo:return!0;case c.es:return!1;default:return t}};r(69070),r(47941),r(38880),r(89554),r(54747),r(49337),r(33321);function E(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function O(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?E(Object(r),!0).forEach((function(e){S(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):E(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function S(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}var x=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=arguments.length>1?arguments[1]:void 0;switch(e.type){case c.Hn:return{use:t.use};case c.wb:return O(O({},t),e.payload);default:return t}},L=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,e=arguments.length>1?arguments[1]:void 0;switch(e.type){case c.u7:return{hash:e.payload};case c.v6:return e.payload;case c.DS:case c.m9:case c.sV:case c.hT:case c.D5:return null;default:return t}},A=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,e=arguments.length>1?arguments[1]:void 0;switch(e.type){case c.kr:return e.payload;case c.D5:case c.po:case c.wA:return null;default:return t}},j=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=arguments.length>1?arguments[1]:void 0;switch(e.type){case c.iF:return e.payload;case c.iM:case c.$e:return{};default:return t}},F=function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0],e=arguments.length>1?arguments[1]:void 0;switch(e.type){case c.SK:return e.payload;case c.D5:return u(e.payload.enableDebug,t);default:return t}},_=r(31852);function P(t){return function(t){if(Array.isArray(t))return T(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||function(t,e){if(!t)return;if("string"==typeof t)return T(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);"Object"===r&&t.constructor&&(r=t.constructor.name);if("Map"===r||"Set"===r)return Array.from(t);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return T(t,e)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function T(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}var D=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:["png"],e=arguments.length>1?arguments[1]:void 0;switch(e.type){case c.Fw:return e.payload.checked?(0,_.Z)([].concat(P(t),[e.payload.fileType])):t.filter((function(t){return t!==e.payload.fileType}));case c.D5:return u(e.payload.exportFileTypes,t);default:return t}};function I(t){return function(t){if(Array.isArray(t))return k(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||function(t,e){if(!t)return;if("string"==typeof t)return k(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);"Object"===r&&t.constructor&&(r=t.constructor.name);if("Map"===r||"Set"===r)return Array.from(t);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return k(t,e)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function k(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}var N=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[1],e=arguments.length>1?arguments[1]:void 0;switch(e.type){case c.WB:return e.payload.checked?window.navigator.msSaveBlob?[e.payload.factor]:[].concat(I(t),[e.payload.factor]):t.filter((function(t){return t!==e.payload.factor}));case c.D5:return u(e.payload.exportScaleFactors,t);default:return t}},G=(r(26699),r(32023),r(48766)),R=[G.Dh,G.TZ,G.z2,G.ee,G.Vn],C=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],e=arguments.length>1?arguments[1]:void 0;switch(e.type){case c.OD:return e.payload;case c.ou:return t.filter((function(t){return R.includes(t)||e.payload.includes(t)}));default:return t}},M=function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];switch((arguments.length>1?arguments[1]:void 0).type){case c.y9:return!0;case c.j6:case c.OD:return!1;default:return t}},B=function(){var t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],e=arguments.length>1?arguments[1]:void 0;switch(e.type){case c.mW:return e.payload;case c.D5:return u(e.payload.forceMagicCheck,t);default:return t}},U=r(81451);function V(t){return function(t){if(Array.isArray(t))return H(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||function(t,e){if(!t)return;if("string"==typeof t)return H(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);"Object"===r&&t.constructor&&(r=t.constructor.name);if("Map"===r||"Set"===r)return Array.from(t);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return H(t,e)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function H(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}var Z=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],e=arguments.length>1?arguments[1]:void 0;switch(e.type){case c.uy:return(0,U.Z)("id")([e.payload].concat(V(t)));case c.D5:return(0,U.Z)("id")([].concat(V(e.payload.frameGroupNames),V(t)));default:return t}};function Y(t){return function(t){if(Array.isArray(t))return $(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||function(t,e){if(!t)return;if("string"==typeof t)return $(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);"Object"===r&&t.constructor&&(r=t.constructor.name);if("Map"===r||"Set"===r)return Array.from(t);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return $(t,e)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function $(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}var z=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],e=arguments.length>1?arguments[1]:void 0;switch(e.type){case c.jJ:return[].concat(Y(t),[e.payload]);case c.KD:case c.GU:return t.filter((function(t){return t.tempId!==e.payload.tempId}));default:return t}};r(2707);function J(t){return function(t){if(Array.isArray(t))return W(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||function(t,e){if(!t)return;if("string"==typeof t)return W(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);"Object"===r&&t.constructor&&(r=t.constructor.name);if("Map"===r||"Set"===r)return Array.from(t);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return W(t,e)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function W(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}var X=function(t,e){return t.id<e.id?-1:t.id>e.id?1:0},K=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],e=arguments.length>1?arguments[1]:void 0;switch(e.type){case c.GU:return(0,U.Z)("id")([e.payload].concat(J(t))).sort(X);case c.BS:return t.filter((function(t){return t.id!==e.payload}));case c.wA:return[].concat(J(t.filter((function(t){return t.id!==e.payload.updateId}))),[e.payload.data]).sort(X);case c.D5:return(0,U.Z)("id")(e.payload.frames).sort(X);default:return t}},q=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;switch((arguments.length>1?arguments[1]:void 0).type){case c.Jf:return 1;case c.jN:return 2;default:return t}},Q=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"1x",e=arguments.length>1?arguments[1]:void 0;switch(e.type){case c.O:return e.payload;case c.D5:return u(e.payload.galleryView,t);default:return t}};function tt(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function et(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?tt(Object(r),!0).forEach((function(e){rt(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):tt(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function rt(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}var nt=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=arguments.length>1?arguments[1]:void 0;return e.type===c.Ik?et(et({},t),e.payload):t},ot=function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0],e=arguments.length>1?arguments[1]:void 0;switch(e.type){case c.wK:return e.payload;case c.D5:return u(e.payload.handleExportFrame,t);default:return t}},it=function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0],e=arguments.length>1?arguments[1]:void 0;switch(e.type){case c.Mx:return e.payload;case c.D5:return u(e.payload.hideDates,t);default:return t}};r(21249),r(69826);function at(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function ut(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?at(Object(r),!0).forEach((function(e){ct(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):at(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function ct(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function lt(t){return function(t){if(Array.isArray(t))return ft(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||function(t,e){if(!t)return;if("string"==typeof t)return ft(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);"Object"===r&&t.constructor&&(r=t.constructor.name);if("Map"===r||"Set"===r)return Array.from(t);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return ft(t,e)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ft(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}var st=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],e=arguments.length>1?arguments[1]:void 0;switch(e.type){case c.Dt:return(0,U.Z)("hash")([].concat(lt(t),lt(e.payload)));case c.S1:return lt(t.filter((function(t){return t.hash!==e.payload})));case c.md:return lt(t.filter((function(t){var r=t.hash;return!e.payload.includes(r)})));case c.m9:return t.map((function(t){return t.hash===e.payload.hash?ut(ut({},t),e.payload):t}));case c.sV:return t.map((function(t){return t.hash===e.payload.oldHash?e.payload.image:t}));case c.d4:return t.map((function(t){return t.hash===e.payload.hash?ut(ut({},t),{},{tags:(0,_.Z)(e.payload.isFavourite?[G.oJ].concat(lt(t.tags)):t.tags.filter((function(t){return t!==G.oJ})))}):t}));case c.hT:return t.map((function(t){return e.payload.find((function(e){return e.hash===t.hash}))||t}));case c.D5:return(0,U.Z)("hash")(e.payload.images);default:return t}},ht=function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0],e=arguments.length>1?arguments[1]:void 0;switch(e.type){case c.nN:return e.payload;case c.D5:return u(e.payload.importDeleted,t);default:return t}};function pt(t){return function(t){if(Array.isArray(t))return yt(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||function(t,e){if(!t)return;if("string"==typeof t)return yt(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);"Object"===r&&t.constructor&&(r=t.constructor.name);if("Map"===r||"Set"===r)return Array.from(t);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return yt(t,e)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function yt(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}var dt=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],e=arguments.length>1?arguments[1]:void 0;switch(e.type){case c.d3:return[].concat(pt(t),[e.payload]);case c.hZ:return[].concat(pt(t),pt(e.payload));case c.Rb:case c.Dt:return[];case c.cR:case c.GU:return t.filter((function(t){return t.tempId!==e.payload.tempId}));default:return t}};function vt(t){return function(t){if(Array.isArray(t))return mt(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||function(t,e){if(!t)return;if("string"==typeof t)return mt(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);"Object"===r&&t.constructor&&(r=t.constructor.name);if("Map"===r||"Set"===r)return Array.from(t);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return mt(t,e)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function mt(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}var gt=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],e=arguments.length>1?arguments[1]:void 0;switch(e.type){case c.iq:case c.S1:return vt(t.filter((function(t){return t!==e.payload})));case c.Rv:return[].concat(vt(t),[e.payload]);case c.y0:return e.payload;case c.md:return[];case c.D5:return u(e.payload.imageSelection,t);default:return t}},bt=function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0],e=arguments.length>1?arguments[1]:void 0;switch(e.type){case c.Pk:return e.payload;case c.D5:return u(e.payload.importLastSeen,t);default:return t}},wt=function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0],e=arguments.length>1?arguments[1]:void 0;switch(e.type){case c.qr:return e.payload;case c.D5:return u(e.payload.importPad,t);default:return t}},Et=function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0],e=arguments.length>1?arguments[1]:void 0;return e.type===c.Yx?e.payload:t},Ot=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,e=arguments.length>1?arguments[1]:void 0;switch(e.type){case c.Rv:case c.iq:return e.payload;case c.S1:case c.md:case c.O:return null;default:return t}},St=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,e=arguments.length>1?arguments[1]:void 0;return e.type===c.vR?e.payload:t},xt=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,e=arguments.length>1?arguments[1]:void 0;switch(e.type){case c.R4:return e.payload;case c.D5:return u(e.payload.pageSize,t);default:return t}};function Lt(t){return function(t){if(Array.isArray(t))return At(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||function(t,e){if(!t)return;if("string"==typeof t)return At(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);"Object"===r&&t.constructor&&(r=t.constructor.name);if("Map"===r||"Set"===r)return Array.from(t);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return At(t,e)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function At(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}var jt=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],e=arguments.length>1?arguments[1]:void 0;switch(e.type){case c.Or:return Lt(t.filter((function(t){return t.shortName!==e.payload.shortName})));case c.$e:return(0,U.Z)("shortName")([].concat(Lt(t.map((function(t){return t.shortName!==e.payload.shortName?t:e.payload}))),[e.payload]));case c.D5:return(0,U.Z)("shortName").apply(void 0,[e.payload.palettes].concat(Lt(t)));default:return t}},Ft=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"asc";return function(r){var n="desc"===e?-1:1;return r.sort((function(e,r){return e[t]>r[t]?n:e[t]<r[t]?-n:0}))}};function _t(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function Pt(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?_t(Object(r),!0).forEach((function(e){Tt(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):_t(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function Tt(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function Dt(t){return function(t){if(Array.isArray(t))return It(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||function(t,e){if(!t)return;if("string"==typeof t)return It(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);"Object"===r&&t.constructor&&(r=t.constructor.name);if("Map"===r||"Set"===r)return Array.from(t);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return It(t,e)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function It(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}var kt=(0,U.Z)("url"),Nt=Ft("url"),Gt=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],e=arguments.length>1?arguments[1]:void 0;switch(e.type){case c.gH:return Nt(kt(Dt(t.filter((function(t){return t.url!==e.payload})))));case c.gk:return Nt(kt([{url:e.payload}].concat(Dt(t))));case c.rc:return Nt(kt(t.map((function(t){return t.url!==e.payload.url?t:Pt(Pt({},t),e.payload)}))));case c.PA:return Nt(kt(t.map((function(t){if(t.url!==e.payload.url)return t;var r=Pt(Pt({},t.config||{}),e.payload.config||{});return Pt(Pt({},t),{},{config:r})}))));default:return t}},Rt=r(27484),Ct=r.n(Rt),Mt=r(31712),Bt=r(25108),Ut=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:navigator.language,e=arguments.length>1?arguments[1]:void 0;if(e.type===c.Qs)try{return(0,Mt.Z)(Ct()(),e.payload),e.payload}catch(e){return Bt.error(e),t}return t},Vt=function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];switch((arguments.length>1?arguments[1]:void 0).type){case c.ug:case c.od:return!0;case c.Dt:case c.or:case c.fX:case c.Jx:case c.Rb:return!1;default:return t}},Ht=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=arguments.length>1?arguments[1]:void 0;switch(e.type){case c.fX:return e.payload;case c.Jx:case c.od:return{};default:return t}},Zt=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],e=arguments.length>1?arguments[1]:void 0;switch(e.type){case c.or:return e.payload;case c.od:return[];default:return t}},Yt=r(15168),$t=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",e=arguments.length>1?arguments[1]:void 0;switch(e.type){case c.YE:return(0,Yt.Z)(e.payload,"http");case c.D5:return u(e.payload.printerUrl,t);default:return t}},zt=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",e=arguments.length>1?arguments[1]:void 0;switch(e.type){case c.WN:return e.payload;case c.D5:return u(e.payload.printerParams,t);default:return t}};function Jt(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function Wt(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?Jt(Object(r),!0).forEach((function(e){Xt(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):Jt(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function Xt(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}var Kt=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{gif:0,printer:0},e=arguments.length>1?arguments[1]:void 0;switch(e.type){case c.B4:return Wt(Wt({},t),{},{gif:.01});case c.DK:return Wt(Wt({},t),{},{gif:e.payload});case c.fc:return Wt(Wt({},t),{},{plugin:e.payload});case c.pQ:return Wt(Wt({},t),{},{printer:e.payload});case c.Dt:case c.Rb:case c.Gp:return Wt(Wt({},t),{},{printer:0});default:return t}};function qt(t){return function(t){if(Array.isArray(t))return Qt(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||function(t,e){if(!t)return;if("string"==typeof t)return Qt(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);"Object"===r&&t.constructor&&(r=t.constructor.name);if("Map"===r||"Set"===r)return Array.from(t);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Qt(t,e)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Qt(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function te(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function ee(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?te(Object(r),!0).forEach((function(e){re(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):te(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function re(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}var ne=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{git:[],dropbox:[]},e=arguments.length>1?arguments[1]:void 0;switch(e.type){case c.b9:return ee(ee({},t),{},{git:[e.payload].concat(qt(t.git))});case c.ON:return ee(ee({},t),{},{dropbox:[e.payload].concat(qt(t.dropbox))});case c.Ki:return ee(ee({},t),{},re({},e.payload.storageType,[{timestamp:(new Date).getTime()/1e3,message:"."}].concat(qt(t[e.payload.storageType]))));case c.bM:case c.d0:return{git:[],dropbox:[]};default:return t}};function oe(t){return function(t){if(Array.isArray(t))return ie(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||function(t,e){if(!t)return;if("string"==typeof t)return ie(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);"Object"===r&&t.constructor&&(r=t.constructor.name);if("Map"===r||"Set"===r)return Array.from(t);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return ie(t,e)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ie(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}var ae=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],e=arguments.length>1?arguments[1]:void 0;switch(e.type){case c.Dt:var r=e.payload.map((function(t){var e=t.hash;return t.hashes?null:{hash:e,timestamp:Ct()().unix()}})).filter(Boolean);return[].concat(oe(t.filter((function(t){var e=t.hash;return!r.includes(e)}))),oe(r));case c.D5:var n,o;return null!==(n=e.payload)&&void 0!==n&&null!==(o=n.imageSelection)&&void 0!==o&&o.length?[].concat(oe(t.filter((function(t){var r=t.hash;return!e.payload.imageSelection.includes(r)}))),oe(e.payload.imageSelection.map((function(t){return{hash:t,timestamp:Ct()().unix()}})))):t;default:return t}};function ue(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function ce(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?ue(Object(r),!0).forEach((function(e){le(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):ue(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function le(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}var fe=function(){var t,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,r=arguments.length>1?arguments[1]:void 0;switch(r.type){case c.Sd:var n=ce(ce({},e),r.payload);return n.r||n.g||n.b||n.n?n:null;case c.Dt:return null!==(t=r.payload[0])&&void 0!==t&&t.hashes?null:e;case c.S1:case c.md:return null;case c.D5:return u(r.payload.rgbnImages,e);default:return e}},se=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"int",e=arguments.length>1?arguments[1]:void 0;switch(e.type){case c.LR:return e.payload;case c.D5:return u(e.payload.savFrameTypes,t);default:return t}},he=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",e=arguments.length>1?arguments[1]:void 0;switch(e.type){case c.bD:return e.payload;case c.D5:return u(e.payload.sortBy,t);default:return t}},pe=function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];switch((arguments.length>1?arguments[1]:void 0).type){case c.XB:return!0;case c.qJ:case c.bD:return!1;default:return t}},ye=function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];switch((arguments.length>1?arguments[1]:void 0).type){case c.eP:return!0;case c.Ki:case c.bM:return!1;default:return t}};function de(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function ve(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?de(Object(r),!0).forEach((function(e){me(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):de(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function me(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}var ge=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=arguments.length>1?arguments[1]:void 0;switch(e.type){case c.oI:return ve(ve({},t),{},{dropbox:e.payload});case c.yK:return ve(ve({},t),{},{dropbox:e.payload.state.lastUpdateUTC,local:e.payload.state.lastUpdateUTC});case c.Ki:return ve({},t);case c.m9:case c.sV:case c.hT:case c.S1:case c.$e:case c.Or:case c.Dt:case c.GU:case c.BS:return ve(ve({},t),{},{local:Math.floor((new Date).getTime()/1e3)});default:return t}},be=function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];switch((arguments.length>1?arguments[1]:void 0).type){case c.sS:return!0;case c.eP:case c.Ki:case c.DU:return!1;default:return t}},we=function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0],e=arguments.length>1?arguments[1]:void 0;return e.type===c.rR?e.payload:t},Ee=function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0],e=arguments.length>1?arguments[1]:void 0;return e.type===c.Dr?e.payload:t};function Oe(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function Se(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?Oe(Object(r),!0).forEach((function(e){xe(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):Oe(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function xe(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}var Le=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{frames:0,images:0,show:!1},e=arguments.length>1?arguments[1]:void 0;switch(e.type){case c.l3:return Se(Se({},t),{},{show:e.payload});case c.nD:return Se(Se({},t),{},{frames:e.payload});case c.Dw:return Se(Se({},t),{},{images:e.payload});default:return t}};function Ae(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function je(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?Ae(Object(r),!0).forEach((function(e){Fe(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):Ae(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function Fe(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}var _e={imageSelection:[]},Pe=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:_e,e=arguments.length>1?arguments[1]:void 0;switch(e.type){case c.xG:return je(je({},t),e.payload);case c.B4:case c.Xb:return je(je({},t),{},{imageSelection:[]});case c.D5:return u(e.payload.videoParams,t);default:return t}},Te=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{height:window.innerHeight,width:window.innerWidth},e=arguments.length>1?arguments[1]:void 0;return e.type===c.rU?e.payload:t},De=(0,a.UY)({activePalette:l,bitmapQueue:h,canShare:v,confirm:b,dragover:w,dropboxStorage:x,editImage:L,editFrame:A,editPalette:j,enableDebug:F,exportFileTypes:D,exportScaleFactors:N,filtersActiveTags:C,filtersVisible:M,forceMagicCheck:B,frameGroupNames:Z,frameQueue:z,frames:K,framesMessage:q,galleryView:Q,gitStorage:nt,handleExportFrame:ot,hideDates:it,images:st,imageSelection:gt,importDeleted:ht,importQueue:dt,importLastSeen:bt,importPad:wt,isFullscreen:Et,lastSelectedImage:Ot,progressLog:ne,lightboxImage:St,pageSize:xt,palettes:jt,plugins:Gt,preferredLocale:Ut,printerBusy:Vt,printerData:Ht,printerFunctions:Zt,printerUrl:$t,printerParams:zt,progress:Kt,recentImports:ae,rgbnImages:fe,savFrameTypes:se,sortBy:he,sortOptionsVisible:pe,syncBusy:ye,syncLastUpdate:ge,syncSelect:be,useSerials:we,showSerials:Ee,trashCount:Le,videoParams:Pe,windowDimensions:Te}),Ie=r(23860),ke=function(t){return function(e){return function(r){e(r);var n=t.getState(),o={};Ie.C.forEach((function(t){var e=t.key;if(t.saveLocally)if("palettes"===e)o[e]=n.palettes.filter((function(t){return!t.isPredefined}));else o[e]=n[e]})),localStorage.setItem("gbp-web-state",JSON.stringify(o))}}},Ne=(r(34553),r(39575),r(82472),r(92990),r(18927),r(33105),r(35035),r(74345),r(7174),r(32846),r(44731),r(77209),r(96319),r(58867),r(37789),r(33739),r(29368),r(14483),r(12056),r(3462),r(30678),r(27462),r(33824),r(55021),r(12974),r(15016),r(25009)),Ge=r.n(Ne),Re=r(11494),Ce=r(93162),Me=r(30236),Be=r.n(Me),Ue=r(28014),Ve=r(39506),He=r(17036),Ze=r(97768),Ye=r(84040),$e=r(22604);function ze(t){return function(t){if(Array.isArray(t))return Qe(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||qe(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Je(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function We(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?Je(Object(r),!0).forEach((function(e){Xe(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):Je(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function Xe(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function Ke(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null==r)return;var n,o,i=[],a=!0,u=!1;try{for(r=r.call(t);!(a=(n=r.next()).done)&&(i.push(n.value),!e||i.length!==e);a=!0);}catch(t){u=!0,o=t}finally{try{a||null==r.return||r.return()}finally{if(u)throw o}}return i}(t,e)||qe(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function qe(t,e){if(t){if("string"==typeof t)return Qe(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?Qe(t,e):void 0}}function Qe(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}var tr=function(t){return function(e){return function(r){if(r.type===c.B4){var n=t.getState(),o=n.videoParams,i=o.scaleFactor,a=o.frameRate,u=o.imageSelection,l=o.yoyo,f=o.reverse,s=o.frame,h=o.lockFrame,p=o.invertPalette,y=o.palette,d=o.exportFrameMode;Promise.all(u.map((function(t){return n.images.find((function(e){return e.hash===t}))})).filter(Boolean).map((function(t){return We(We({},t),{},{frame:s||t.frame,palette:t.hashes?t.palette:y||t.palette})})).map((function(t){return(0,Ue.Z)(n)(t).then((function(e){var r=(0,Ve.Z)(n,t),o=!!t.hashes,a=o?new He.Z:new Ze.Z,u=h||t.lockFrame||!1,c=p||t.invertPalette||!1,l=t.rotation||0;o?a.update({tiles:e,palette:r,lockFrame:u}):a.update({tiles:e,palette:r.palette,lockFrame:u,invertPalette:c});var f=a.getScaledCanvas(i,d),s=document.createElement("canvas");return(0,$e.Z)(f,s,l),s}))}))).then((function(e){var r=[],n=new(Ge())(1,1/0),o=new Re.g(r,e[0].width,e[0].height,{loop:65535}),u=ze(e);if(l){var h=ze(e).reverse();h.shift(),h.pop(),u.push.apply(u,ze(h))}f&&u.reverse();var p=function(t,e,r,n,o){return function(i,a){return r.add((function(){return new Promise((function(r,u){for(var l=i.getContext("2d").getImageData(0,0,i.width,i.height).data,f=[],s=Be()(l,4).map((function(t){var e=Ke(t,3),r=(e[0]<<16)+(e[1]<<8)+e[2],n=f.findIndex((function(t){return t===r}));return-1===n&&(n=f.length,f.push(r)),n}));f.length<256;)f.push(0);try{t({type:c.DK,payload:(a+1)/o}),window.requestAnimationFrame((function(){e.addFrame(0,0,i.width,i.height,s,{delay:Math.round(100/n),palette:f}),r()}))}catch(t){u(t)}}))}))}}(t.dispatch,o,n,a,u.length);Promise.all(u.map(p)).then((function(){var e,n=(0,Ye.Z)({useCurrentDate:!0,exportScaleFactor:i,frameRate:a,altTitle:"animated",frameName:s,paletteShort:y}),u=o.end();try{e=new File([new Uint8Array(r.slice(0,u)).buffer],"".concat(n,".gif"),{type:"image/gif"})}catch(t){e=new Blob([new Uint8Array(r.slice(0,u)).buffer])}(0,Ce.saveAs)(e,"".concat(n,".gif")),t.dispatch({type:c.DK,payload:0})}))})).catch((function(e){t.dispatch({type:c.pn,payload:e.message})}))}e(r)}}},er=(r(84944),r(33792),r(15306),r(83112),r(39714),r(81477)),rr=r(20170),nr=r(49965);function or(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function ir(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?or(Object(r),!0).forEach((function(e){ar(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):or(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function ar(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function ur(t){return ur="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},ur(t)}var cr=["lockFrame","frame","palette","invertPalette","title","tags","created","rotation"],lr=function(t){return(0,_.Z)(t.map((function(t){return t.tags})).flat())},fr=function(t){return function(e){return function(r){if(r.type===c.fd){var n=t.getState(),o=(0,er.Z)(n),i=n.lastSelectedImage,a=n.pageSize,u=o.findIndex((function(t){return t.hash===r.payload})),l=o.findIndex((function(t){return t.hash===i}));-1===l&&(l=r.page*a);var f=Math.min(l,u),s=Math.max(l,u);t.dispatch({type:c.y0,payload:o.slice(f,s+1).map((function(t){return t.hash}))})}if(r.type===c.hT){var h=t.getState(),p=(0,nr.$b)(h),y=h.editImage,d=h.images,v=r.payload,m=v.image,g=v.batch,b=v.tagChanges;if(g&&y.batch&&y.batch.length){var w=y.batch.map((function(t){return d.find((function(e){return e.hash===t}))})).map(nr.Np).sort(p).map(nr.fD).map((function(t,e){if(!t)return!1;var r={},n=t.tags;return cr.forEach((function(o){switch(o){case"title":if(!g.title)break;r.title=m.title.replace(/%(n+)/gi,(function(t,r){return(e+1).toString(10).padStart(r.length,"0")}));break;case"created":if(!g.created)break;r.created=m.created;break;case"palette":if(!g.palette)break;ur(t.palette)===ur(m.palette)&&(r.palette=m.palette);break;case"invertPalette":if(!g.invertPalette)break;r.invertPalette=m.invertPalette;break;case"frame":if(!g.frame)break;r.frame=m.frame;break;case"lockFrame":if(!g.lockFrame)break;r.lockFrame=m.lockFrame;break;case"tags":n=(0,rr.Z)(ir(ir({},b),{},{initial:t.tags}));break;case"rotation":if(!g.rotation)break;r.rotation=m.rotation}})),ir(ir(ir({},t),r),{},{tags:n})})).filter(Boolean);Object.assign(r,{payload:w})}}if(r.type!==c.ax)e(r);else{var E=t.getState(),O=E.images,S=E.imageSelection,x=E.pageSize,L=O.filter((function(t){var e=t.hash;return S.includes(e)}));if(S.length)switch(r.payload){case"delete":t.dispatch({type:c.jH,payload:{message:"Delete ".concat(S.length," images?"),confirm:function(){t.dispatch({type:c.md,payload:S})},deny:function(){t.dispatch({type:c.Gp})}}});break;case"animate":t.dispatch({type:c.xG,payload:{imageSelection:S}});break;case"download":t.dispatch({type:c.Zo,payload:S});break;case"edit":t.dispatch({type:c.v6,payload:{hash:L[0].hash,tags:lr(L),batch:L.map((function(t){return t.hash}))}})}switch(r.payload){case"checkall":t.dispatch({type:c.y0,payload:(0,er.Z)(E).slice(r.page*x,(r.page+1)*x||void 0).map((function(t){return t.hash}))});break;case"uncheckall":t.dispatch({type:c.y0,payload:[]})}}}}},sr=(r(72443),r(39341),r(73706),r(10408),r(78011),r(30489),r(68304),r(27918));function hr(t){return hr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},hr(t)}function pr(){pr=function(){return t};var t={},e=Object.prototype,r=e.hasOwnProperty,n="function"==typeof Symbol?Symbol:{},o=n.iterator||"@@iterator",i=n.asyncIterator||"@@asyncIterator",a=n.toStringTag||"@@toStringTag";function u(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{u({},"")}catch(t){u=function(t,e,r){return t[e]=r}}function c(t,e,r,n){var o=e&&e.prototype instanceof s?e:s,i=Object.create(o.prototype),a=new S(n||[]);return i._invoke=function(t,e,r){var n="suspendedStart";return function(o,i){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===o)throw i;return L()}for(r.method=o,r.arg=i;;){var a=r.delegate;if(a){var u=w(a,r);if(u){if(u===f)continue;return u}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var c=l(t,e,r);if("normal"===c.type){if(n=r.done?"completed":"suspendedYield",c.arg===f)continue;return{value:c.arg,done:r.done}}"throw"===c.type&&(n="completed",r.method="throw",r.arg=c.arg)}}}(t,r,a),i}function l(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}t.wrap=c;var f={};function s(){}function h(){}function p(){}var y={};u(y,o,(function(){return this}));var d=Object.getPrototypeOf,v=d&&d(d(x([])));v&&v!==e&&r.call(v,o)&&(y=v);var m=p.prototype=s.prototype=Object.create(y);function g(t){["next","throw","return"].forEach((function(e){u(t,e,(function(t){return this._invoke(e,t)}))}))}function b(t,e){function n(o,i,a,u){var c=l(t[o],t,i);if("throw"!==c.type){var f=c.arg,s=f.value;return s&&"object"==hr(s)&&r.call(s,"__await")?e.resolve(s.__await).then((function(t){n("next",t,a,u)}),(function(t){n("throw",t,a,u)})):e.resolve(s).then((function(t){f.value=t,a(f)}),(function(t){return n("throw",t,a,u)}))}u(c.arg)}var o;this._invoke=function(t,r){function i(){return new e((function(e,o){n(t,r,e,o)}))}return o=o?o.then(i,i):i()}}function w(t,e){var r=t.iterator[e.method];if(void 0===r){if(e.delegate=null,"throw"===e.method){if(t.iterator.return&&(e.method="return",e.arg=void 0,w(t,e),"throw"===e.method))return f;e.method="throw",e.arg=new TypeError("The iterator does not provide a 'throw' method")}return f}var n=l(r,t.iterator,e.arg);if("throw"===n.type)return e.method="throw",e.arg=n.arg,e.delegate=null,f;var o=n.arg;return o?o.done?(e[t.resultName]=o.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=void 0),e.delegate=null,f):o:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,f)}function E(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function O(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function S(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(E,this),this.reset(!0)}function x(t){if(t){var e=t[o];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var n=-1,i=function e(){for(;++n<t.length;)if(r.call(t,n))return e.value=t[n],e.done=!1,e;return e.value=void 0,e.done=!0,e};return i.next=i}}return{next:L}}function L(){return{value:void 0,done:!0}}return h.prototype=p,u(m,"constructor",p),u(p,"constructor",h),h.displayName=u(p,a,"GeneratorFunction"),t.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===h||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,p):(t.__proto__=p,u(t,a,"GeneratorFunction")),t.prototype=Object.create(m),t},t.awrap=function(t){return{__await:t}},g(b.prototype),u(b.prototype,i,(function(){return this})),t.AsyncIterator=b,t.async=function(e,r,n,o,i){void 0===i&&(i=Promise);var a=new b(c(e,r,n,o),i);return t.isGeneratorFunction(r)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},g(m),u(m,a,"Generator"),u(m,o,(function(){return this})),u(m,"toString",(function(){return"[object Generator]"})),t.keys=function(t){var e=[];for(var r in t)e.push(r);return e.reverse(),function r(){for(;e.length;){var n=e.pop();if(n in t)return r.value=n,r.done=!1,r}return r.done=!0,r}},t.values=x,S.prototype={constructor:S,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(O),!t)for(var e in this)"t"===e.charAt(0)&&r.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function n(r,n){return a.type="throw",a.arg=t,e.next=r,n&&(e.method="next",e.arg=void 0),!!n}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],a=i.completion;if("root"===i.tryLoc)return n("end");if(i.tryLoc<=this.prev){var u=r.call(i,"catchLoc"),c=r.call(i,"finallyLoc");if(u&&c){if(this.prev<i.catchLoc)return n(i.catchLoc,!0);if(this.prev<i.finallyLoc)return n(i.finallyLoc)}else if(u){if(this.prev<i.catchLoc)return n(i.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return n(i.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,f):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),f},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),O(r),f}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;O(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,r){return this.delegate={iterator:x(t),resultName:e,nextLoc:r},"next"===this.method&&(this.arg=void 0),f}},t}function yr(t,e,r,n,o,i,a){try{var u=t[i](a),c=u.value}catch(t){return void r(t)}u.done?e(c):Promise.resolve(c).then(n,o)}function dr(t){return function(){var e=this,r=arguments;return new Promise((function(n,o){var i=t.apply(e,r);function a(t){yr(i,n,o,a,u,"next",t)}function u(t){yr(i,n,o,a,u,"throw",t)}a(void 0)}))}}var vr=function(t){return dr(pr().mark((function e(){return pr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.t0=t,e.t1=c.nD,e.next=4,(0,sr.c6)(t.getState().frames);case 4:e.t2=e.sent.length,e.t3={type:e.t1,payload:e.t2},e.t0.dispatch.call(e.t0,e.t3);case 7:case"end":return e.stop()}}),e)})))(),function(e){return function(r){switch(e(r),r.type){case c.BS:case c.GU:case c.D5:case c.A8:dr(pr().mark((function e(){return pr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.t0=t,e.t1=c.nD,e.next=4,(0,sr.c6)(t.getState().frames);case 4:e.t2=e.sent.length,e.t3={type:e.t1,payload:e.t2},e.t0.dispatch.call(e.t0,e.t3);case 7:case"end":return e.stop()}}),e)})))()}}}};function mr(t){return mr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},mr(t)}function gr(){gr=function(){return t};var t={},e=Object.prototype,r=e.hasOwnProperty,n="function"==typeof Symbol?Symbol:{},o=n.iterator||"@@iterator",i=n.asyncIterator||"@@asyncIterator",a=n.toStringTag||"@@toStringTag";function u(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{u({},"")}catch(t){u=function(t,e,r){return t[e]=r}}function c(t,e,r,n){var o=e&&e.prototype instanceof s?e:s,i=Object.create(o.prototype),a=new S(n||[]);return i._invoke=function(t,e,r){var n="suspendedStart";return function(o,i){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===o)throw i;return L()}for(r.method=o,r.arg=i;;){var a=r.delegate;if(a){var u=w(a,r);if(u){if(u===f)continue;return u}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var c=l(t,e,r);if("normal"===c.type){if(n=r.done?"completed":"suspendedYield",c.arg===f)continue;return{value:c.arg,done:r.done}}"throw"===c.type&&(n="completed",r.method="throw",r.arg=c.arg)}}}(t,r,a),i}function l(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}t.wrap=c;var f={};function s(){}function h(){}function p(){}var y={};u(y,o,(function(){return this}));var d=Object.getPrototypeOf,v=d&&d(d(x([])));v&&v!==e&&r.call(v,o)&&(y=v);var m=p.prototype=s.prototype=Object.create(y);function g(t){["next","throw","return"].forEach((function(e){u(t,e,(function(t){return this._invoke(e,t)}))}))}function b(t,e){function n(o,i,a,u){var c=l(t[o],t,i);if("throw"!==c.type){var f=c.arg,s=f.value;return s&&"object"==mr(s)&&r.call(s,"__await")?e.resolve(s.__await).then((function(t){n("next",t,a,u)}),(function(t){n("throw",t,a,u)})):e.resolve(s).then((function(t){f.value=t,a(f)}),(function(t){return n("throw",t,a,u)}))}u(c.arg)}var o;this._invoke=function(t,r){function i(){return new e((function(e,o){n(t,r,e,o)}))}return o=o?o.then(i,i):i()}}function w(t,e){var r=t.iterator[e.method];if(void 0===r){if(e.delegate=null,"throw"===e.method){if(t.iterator.return&&(e.method="return",e.arg=void 0,w(t,e),"throw"===e.method))return f;e.method="throw",e.arg=new TypeError("The iterator does not provide a 'throw' method")}return f}var n=l(r,t.iterator,e.arg);if("throw"===n.type)return e.method="throw",e.arg=n.arg,e.delegate=null,f;var o=n.arg;return o?o.done?(e[t.resultName]=o.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=void 0),e.delegate=null,f):o:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,f)}function E(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function O(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function S(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(E,this),this.reset(!0)}function x(t){if(t){var e=t[o];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var n=-1,i=function e(){for(;++n<t.length;)if(r.call(t,n))return e.value=t[n],e.done=!1,e;return e.value=void 0,e.done=!0,e};return i.next=i}}return{next:L}}function L(){return{value:void 0,done:!0}}return h.prototype=p,u(m,"constructor",p),u(p,"constructor",h),h.displayName=u(p,a,"GeneratorFunction"),t.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===h||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,p):(t.__proto__=p,u(t,a,"GeneratorFunction")),t.prototype=Object.create(m),t},t.awrap=function(t){return{__await:t}},g(b.prototype),u(b.prototype,i,(function(){return this})),t.AsyncIterator=b,t.async=function(e,r,n,o,i){void 0===i&&(i=Promise);var a=new b(c(e,r,n,o),i);return t.isGeneratorFunction(r)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},g(m),u(m,a,"Generator"),u(m,o,(function(){return this})),u(m,"toString",(function(){return"[object Generator]"})),t.keys=function(t){var e=[];for(var r in t)e.push(r);return e.reverse(),function r(){for(;e.length;){var n=e.pop();if(n in t)return r.value=n,r.done=!1,r}return r.done=!0,r}},t.values=x,S.prototype={constructor:S,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(O),!t)for(var e in this)"t"===e.charAt(0)&&r.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function n(r,n){return a.type="throw",a.arg=t,e.next=r,n&&(e.method="next",e.arg=void 0),!!n}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],a=i.completion;if("root"===i.tryLoc)return n("end");if(i.tryLoc<=this.prev){var u=r.call(i,"catchLoc"),c=r.call(i,"finallyLoc");if(u&&c){if(this.prev<i.catchLoc)return n(i.catchLoc,!0);if(this.prev<i.finallyLoc)return n(i.finallyLoc)}else if(u){if(this.prev<i.catchLoc)return n(i.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return n(i.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,f):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),f},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),O(r),f}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;O(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,r){return this.delegate={iterator:x(t),resultName:e,nextLoc:r},"next"===this.method&&(this.arg=void 0),f}},t}function br(t,e,r,n,o,i,a){try{var u=t[i](a),c=u.value}catch(t){return void r(t)}u.done?e(c):Promise.resolve(c).then(n,o)}function wr(t){return function(){var e=this,r=arguments;return new Promise((function(n,o){var i=t.apply(e,r);function a(t){br(i,n,o,a,u,"next",t)}function u(t){br(i,n,o,a,u,"throw",t)}a(void 0)}))}}var Er=function(t){return wr(gr().mark((function e(){return gr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.t0=t,e.t1=c.Dw,e.next=4,(0,sr.op)(t.getState().images);case 4:e.t2=e.sent.length,e.t3={type:e.t1,payload:e.t2},e.t0.dispatch.call(e.t0,e.t3);case 7:case"end":return e.stop()}}),e)})))(),function(e){return function(r){switch(e(r),r.type){case c.S1:case c.md:case c.Dt:case c.D5:case c.sV:case c.A8:wr(gr().mark((function e(){return gr().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.t0=t,e.t1=c.Dw,e.next=4,(0,sr.op)(t.getState().images);case 4:e.t2=e.sent.length,e.t3={type:e.t1,payload:e.t2},e.t0.dispatch.call(e.t0,e.t3);case 7:case"end":return e.stop()}}),e)})))()}}}},Or=function(t){var e,n=t.getState().dropboxStorage;return n.use&&Promise.all([r.e(986),r.e(991)]).then(r.bind(r,41238)).then((function(r){var n=r.default;e=n(t)})),function(o){return function(i){o(i),t.getState().dropboxStorage.use&&(i.type===c.eh||i.type===c.wb||i.type===c.eP&&("dropbox"===i.payload.storageType||"dropboximages"===i.payload.storageType)||n.use&&i.type===c.UF)&&(e?e(i):Promise.all([r.e(986),r.e(991)]).then(r.bind(r,41238)).then((function(r){var n=r.default;(e=e||n(t))(i)})))}}},Sr=(r(32564),r(23157),r(27852),r(69600),r(36965)),xr=r(30661),Lr=r(75500);function Ar(t){return Ar="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Ar(t)}function jr(){jr=function(){return t};var t={},e=Object.prototype,r=e.hasOwnProperty,n="function"==typeof Symbol?Symbol:{},o=n.iterator||"@@iterator",i=n.asyncIterator||"@@asyncIterator",a=n.toStringTag||"@@toStringTag";function u(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{u({},"")}catch(t){u=function(t,e,r){return t[e]=r}}function c(t,e,r,n){var o=e&&e.prototype instanceof s?e:s,i=Object.create(o.prototype),a=new S(n||[]);return i._invoke=function(t,e,r){var n="suspendedStart";return function(o,i){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===o)throw i;return L()}for(r.method=o,r.arg=i;;){var a=r.delegate;if(a){var u=w(a,r);if(u){if(u===f)continue;return u}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var c=l(t,e,r);if("normal"===c.type){if(n=r.done?"completed":"suspendedYield",c.arg===f)continue;return{value:c.arg,done:r.done}}"throw"===c.type&&(n="completed",r.method="throw",r.arg=c.arg)}}}(t,r,a),i}function l(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}t.wrap=c;var f={};function s(){}function h(){}function p(){}var y={};u(y,o,(function(){return this}));var d=Object.getPrototypeOf,v=d&&d(d(x([])));v&&v!==e&&r.call(v,o)&&(y=v);var m=p.prototype=s.prototype=Object.create(y);function g(t){["next","throw","return"].forEach((function(e){u(t,e,(function(t){return this._invoke(e,t)}))}))}function b(t,e){function n(o,i,a,u){var c=l(t[o],t,i);if("throw"!==c.type){var f=c.arg,s=f.value;return s&&"object"==Ar(s)&&r.call(s,"__await")?e.resolve(s.__await).then((function(t){n("next",t,a,u)}),(function(t){n("throw",t,a,u)})):e.resolve(s).then((function(t){f.value=t,a(f)}),(function(t){return n("throw",t,a,u)}))}u(c.arg)}var o;this._invoke=function(t,r){function i(){return new e((function(e,o){n(t,r,e,o)}))}return o=o?o.then(i,i):i()}}function w(t,e){var r=t.iterator[e.method];if(void 0===r){if(e.delegate=null,"throw"===e.method){if(t.iterator.return&&(e.method="return",e.arg=void 0,w(t,e),"throw"===e.method))return f;e.method="throw",e.arg=new TypeError("The iterator does not provide a 'throw' method")}return f}var n=l(r,t.iterator,e.arg);if("throw"===n.type)return e.method="throw",e.arg=n.arg,e.delegate=null,f;var o=n.arg;return o?o.done?(e[t.resultName]=o.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=void 0),e.delegate=null,f):o:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,f)}function E(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function O(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function S(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(E,this),this.reset(!0)}function x(t){if(t){var e=t[o];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var n=-1,i=function e(){for(;++n<t.length;)if(r.call(t,n))return e.value=t[n],e.done=!1,e;return e.value=void 0,e.done=!0,e};return i.next=i}}return{next:L}}function L(){return{value:void 0,done:!0}}return h.prototype=p,u(m,"constructor",p),u(p,"constructor",h),h.displayName=u(p,a,"GeneratorFunction"),t.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===h||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,p):(t.__proto__=p,u(t,a,"GeneratorFunction")),t.prototype=Object.create(m),t},t.awrap=function(t){return{__await:t}},g(b.prototype),u(b.prototype,i,(function(){return this})),t.AsyncIterator=b,t.async=function(e,r,n,o,i){void 0===i&&(i=Promise);var a=new b(c(e,r,n,o),i);return t.isGeneratorFunction(r)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},g(m),u(m,a,"Generator"),u(m,o,(function(){return this})),u(m,"toString",(function(){return"[object Generator]"})),t.keys=function(t){var e=[];for(var r in t)e.push(r);return e.reverse(),function r(){for(;e.length;){var n=e.pop();if(n in t)return r.value=n,r.done=!1,r}return r.done=!0,r}},t.values=x,S.prototype={constructor:S,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(O),!t)for(var e in this)"t"===e.charAt(0)&&r.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function n(r,n){return a.type="throw",a.arg=t,e.next=r,n&&(e.method="next",e.arg=void 0),!!n}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],a=i.completion;if("root"===i.tryLoc)return n("end");if(i.tryLoc<=this.prev){var u=r.call(i,"catchLoc"),c=r.call(i,"finallyLoc");if(u&&c){if(this.prev<i.catchLoc)return n(i.catchLoc,!0);if(this.prev<i.finallyLoc)return n(i.finallyLoc)}else if(u){if(this.prev<i.catchLoc)return n(i.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return n(i.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,f):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),f},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),O(r),f}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;O(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,r){return this.delegate={iterator:x(t),resultName:e,nextLoc:r},"next"===this.method&&(this.arg=void 0),f}},t}function Fr(t,e,r,n,o,i,a){try{var u=t[i](a),c=u.value}catch(t){return void r(t)}u.done?e(c):Promise.resolve(c).then(n,o)}var _r=function(t){var e=t.dispatch;return function(){var t,r=(t=jr().mark((function t(r){var n,o,i,a,u,l,f,s,h;return jr().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,(0,Sr.Z)(r,"arrayBuffer");case 2:if(n=t.sent,71===(p=n)[0]&&66===p[1]&&45===p[2]&&66===p[3]&&73===p[4]&&78===p[5]&&48===p[6]&&49===p[7]){t.next=5;break}throw new Error('Not a valid .bin file - is it missing the "GB-BIN01" header?');case 5:for(o=[],i=[],a=8;a<n.length;a+=1)u=n[a],i.push(u.toString(16).padStart(2,"0").toUpperCase()),16===i.length&&(o.push(i.join(" ")),i=[]);if(i.length){for(;i.length<16;)i.push("FF");o.push(i.join(" "))}return t.next=12,(0,xr.aj)(o);case 12:return l=t.sent,f=l.dataHash,t.next=16,(0,Lr.jm)(o);case 16:return s=t.sent,h=s.dataHash,e({type:c.d3,payload:{fileName:r.name,imageHash:f,frameHash:h,tiles:o,lastModified:r.lastModified||null,tempId:Math.random().toString(16).split(".").pop()}}),t.abrupt("return",!0);case 20:case"end":return t.stop()}var p}),t)})),function(){var e=this,r=arguments;return new Promise((function(n,o){var i=t.apply(e,r);function a(t){Fr(i,n,o,a,u,"next",t)}function u(t){Fr(i,n,o,a,u,"throw",t)}a(void 0)}))});return function(t){return r.apply(this,arguments)}}()},Pr=r(88791),Tr=(r(5212),r(43290),r(2738)),Dr=function(t,e,r){var n;if(!e)return null;var o=function(t){return r.find((function(e){return e.id===t}))},i=(t+1).toString(10).padStart(2,"0"),a=o("".concat(e).concat(i));if(null!=a&&a.hash)return a.hash;if("jp"===e){var u=o("int".concat(i));if(null!=u&&u.hash)return u.hash}var c=o("".concat(e,"01"));if(null!=c&&c.hash)return c.hash;if("jp"!==e){var l=o("int".concat(i));if(null!=l&&l.hash)return l.hash}return(null===(n=o("int01"))||void 0===n?void 0:n.hash)||null},Ir=(r(73210),{86:"A",87:"B",88:"C",89:"D",90:"E",91:"F",92:"G",93:"H",94:"I",95:"J",96:"K",97:"L",98:"M",99:"N",100:"O",101:"P",102:"Q",103:"R",104:"S",105:"T",106:"U",107:"V",108:"W",109:"X",110:"Y",111:"Z",112:"_",113:"'",114:",",115:".",116:"Á",117:"Â",118:"À",119:"Ä",120:"É",121:"Ê",122:"È",123:"Ë",124:"Í",125:"Ï",126:"Ó",127:"Ö",128:"Ú",129:"Ü",130:"Ñ",131:"-",132:"&",133:"!",134:"?",135:" ",136:"a",137:"b",138:"c",139:"d",140:"e",141:"f",142:"g",143:"h",144:"i",145:"j",146:"k",147:"l",148:"m",149:"n",150:"o",151:"p",152:"q",153:"r",154:"s",155:"t",156:"u",157:"v",158:"w",159:"x",160:"y",161:"z",162:"•",163:"~",164:"📱",165:" ",166:"á",167:"â",168:"à",169:"ä",170:"é",171:"ê",172:"è",173:"ë",174:"í",175:"ï",176:"ó",177:"ö",178:"ú",179:"ü",180:"ñ",181:"ḉ",182:"ß",183:"😄",184:"😟",185:"😅",186:"0",187:"1",188:"2",189:"3",190:"4",191:"5",192:"6",193:"7",194:"8",195:"9",196:"/",197:":",198:"~",199:'"',200:"@"}),kr={1:"あ",2:"い",3:"う",4:"え",5:"お",6:"か",7:"き",8:"く",9:"け",10:"こ",11:"さ",12:"し",13:"す",14:"せ",15:"そ",16:"た",17:"ち",18:"つ",19:"て",20:"と",21:"な",22:"に",23:"ぬ",24:"ね",25:"の",26:"は",27:"ひ",28:"ふ",29:"へ",30:"ほ",31:"ま",32:"み",33:"む",34:"め",35:"も",36:"や",37:"ゆ",38:"よ",39:"、",40:"。",41:"ら",42:"り",43:"る",44:"れ",45:"ろ",46:"わ",47:"を",48:"ん",49:"〜",50:"♥",51:"が",52:"ぎ",53:"ぐ",54:"げ",55:"ご",56:"ざ",57:"じ",58:"ず",59:"ぜ",60:"ぞ",61:"だ",62:"ぢ",63:"づ",64:"で",65:"ど",66:"ば",67:"び",68:"ぶ",69:"べ",70:"ぼ",71:"ぱ",72:"ぴ",73:"ぷ",74:"ぺ",75:"ぽ",76:"っ",77:"ゃ",78:"ゅ",79:"ょ",80:"・",81:"ぁ",82:"ぃ",83:"ぅ",84:"ぇ",85:"ぉ",86:"ア",87:"イ",88:"ウ",89:"エ",90:"オ",91:"カ",92:"キ",93:"ク",94:"ケ",95:"コ",96:"サ",97:"シ",98:"ス",99:"セ",100:"ソ",101:"タ",102:"チ",103:"ツ",104:"テ",105:"ト",106:"ナ",107:"ニ",108:"ヌ",109:"ネ",110:"ノ",111:"ハ",112:"ヒ",113:"フ",114:"ヘ",115:"ホ",116:"マ",117:"ミ",118:"ム",119:"メ",120:"モ",121:"ヤ",122:"ユ",123:"ヨ",124:"!",125:"?",126:"ラ",127:"リ",128:"ル",129:"レ",130:"ロ",131:"ワ",132:"ヲ",133:"ン",134:"ヴ",135:" ",136:"ガ",137:"ギ",138:"グ",139:"ゲ",140:"ゴ",141:"ザ",142:"ジ",143:"ズ",144:"ゼ",145:"ゾ",146:"ダ",147:"ヂ",148:"ヅ",149:"デ",150:"ド",151:"バ",152:"ビ",153:"ブ",154:"ベ",155:"ボ",156:"パ",157:"ピ",158:"プ",159:"ペ",160:"ポ",161:"ッ",162:"ャ",163:"ュ",164:"ョ",165:"ー",166:"ァ",167:"ィ",168:"ゥ",169:"ェ",170:"ォ",171:"A",172:"B",173:"C",174:"D",175:"E",176:"F",177:"G",178:"H",179:"I",180:"J",181:"K",182:"L",183:"M",184:"N",185:"O",186:"P",187:"Q",188:"R",189:"S",190:"T",191:"U",192:"V",193:"W",194:"X",195:"Y",196:"Z",197:"_",198:"'",199:",",200:".",201:"a",202:"b",203:"c",204:"d",205:"e",206:"f",207:"g",208:"h",209:"i",210:"j",211:"k",212:"l",213:"m",214:"n",215:"o",216:"p",217:"q",218:"r",219:"s",220:"t",221:"u",222:"v",223:"w",224:"x",225:"y",226:"z",227:"📱",228:"😅",229:"😄",230:"_",231:"0",232:"1",233:"2",234:"3",235:"4",236:"5",237:"6",238:"7",239:"8",240:"9",241:"/",242:":",243:"~",244:'"',245:"@"},Nr="00123456789?????",Gr=(r(56977),2),Rr=0,Cr=0,Mr=1,Br=2,Ur=3,Vr=4,Hr=16,Zr=5,Yr=17,$r=6,zr=18,Jr=7,Wr=19,Xr=8,Kr=20,qr=21,Qr=9,tn=22,en=23,rn=10,nn=24,on=11,an=25,un=12,cn=26,ln=13,fn=27,sn=28,hn=14,pn=29,yn=15,dn=30,vn=31,mn=0,gn=32,bn=64,wn=96,En=128,On=0,Sn=0,xn=16,Ln=32,An=48,jn=64,Fn=80,_n=96,Pn=112,Tn=8,Dn=0,In=0,kn=1,Nn=2,Gn=3,Rn=4,Cn=5,Mn=6,Bn=7,Un=0,Vn=128,Hn=64,Zn=31,Yn=30,$n=29,zn=28,Jn=27,Wn=26,Xn=25,Kn=24,qn=23,Qn=22,to=21,eo=20,ro=19,no=18,oo=17,io=16,ao=15,uo=14,co=13,lo=12,fo=11,so=10,ho=9,po=8,yo=7,vo=6,mo=5,go=4,bo=3,wo=2,Eo=1,Oo=0,So=32,xo=33,Lo=34,Ao=35,jo=36,Fo=37,_o=38,Po=39,To=40,Do=41,Io=42,ko=43,No=44,Go=45,Ro=46,Co=47,Mo=48,Bo=49,Uo=50,Vo=51,Ho=52,Zo=53,Yo=54,$o=55,zo=56,Jo=57,Wo=58,Xo=59,Ko=60,qo=61,Qo=62,ti=63,ei=0,ri=1,ni=0,oi=16,ii={thumbnailByteCapture:0,thumbnailByteEdgegains:16,thumbnailByteExposureHigh:32,thumbnailByteExposureLow:48,thumbnailByteEdmovolt:198,thumbnailByteVoutzero:214,thumbnailByteDitherset:230,thumbnailByteContrast:246},ai={thumbnailByteCapture:200,thumbnailByteEdgegains:201,thumbnailByteExposureHigh:203,thumbnailByteExposureLow:202,thumbnailByteEdmovolt:204,thumbnailByteVoutzero:205,thumbnailByteDitherset:200,thumbnailByteContrast:200},ui=function(t,e){var r=.016*t+4.096*e;return"".concat(r<10?r.toFixed(1):Math.floor(r),"ms")},ci=function(t){switch(t){case Gr:return"positive";case Rr:return"negative";default:return"unknown"}},li=function(t){switch(t){case En:return"on";case On:return"off";default:return"unknown"}},fi=function(t){switch(t){case mn:return"none";case gn:return"horizontal";case bn:return"vertical";case wn:return"2d";default:return"unknown"}},si=function(t){switch(t){case Cr:return"14.0";case Mr:return"15.5";case Br:return"17.0";case Ur:return"18.5";case Vr:return"20.0";case Hr:return"20.0 (d)";case Zr:return"21.5";case Yr:return"21.5 (d)";case $r:return"23.0";case zr:return"23.0 (d)";case Jr:return"24.5";case Wr:return"24.5 (d)";case Xr:return"26.0";case Kr:return"26.0 (d)";case qr:return"27.5";case Qr:return"29.0";case tn:return"29.0 (d)";case en:return"30.5";case rn:return"32.0";case nn:return"32.0 (d)";case on:return"35.0";case an:return"35.0 (d)";case un:return"38.0";case cn:return"38.0 (d)";case ln:return"41.0";case fn:return"41.0 (d)";case sn:return"44.0";case hn:return"45.5";case pn:return"47.0";case yn:return"51.5";case dn:return"51.5 (d)";case vn:return"57.5";default:return"unknown"}},hi=function(t){switch(t){case Sn:return"50%";case xn:return"75%";case Ln:return"100%";case An:return"125%";case jn:return"200%";case Fn:return"300%";case _n:return"400%";case Pn:return"500%";default:return"unknown"}},pi=function(t){switch(t){case Tn:return"on";case Dn:return"off";default:return"unknown"}},yi=function(t){switch(t){case In:return"0.0V";case kn:return"0.5V";case Nn:return"1.0V";case Gn:return"1.5V";case Rn:return"2.0V";case Cn:return"2.5V";case Mn:return"3.0V";case Bn:return"3.5V";default:return"unknown"}},di=function(t){switch(t){case Un:return"none";case Vn:return"positive";case Hn:return"negative";default:return"unknown"}},vi=function(t){switch(t){case Zn:return"-0.992mV";case Yn:return"-0.960mV";case $n:return"-0.928mV";case zn:return"-0.896mV";case Jn:return"-0.864mV";case Wn:return"-0.832mV";case Xn:return"-0.800mV";case Kn:return"-0.768mV";case qn:return"-0.736mV";case Qn:return"-0.704mV";case to:return"-0.672mV";case eo:return"-0.640mV";case ro:return"-0.608mV";case no:return"-0.576mV";case oo:return"-0.544mV";case io:return"-0.512mV";case ao:return"-0.480mV";case uo:return"-0.448mV";case co:return"-0.416mV";case lo:return"-0.384mV";case fo:return"-0.352mV";case so:return"-0.320mV";case ho:return"-0.288mV";case po:return"-0.256mV";case yo:return"-0.224mV";case vo:return"-0.192mV";case mo:return"-0.160mV";case go:return"-0.128mV";case bo:return"-0.096mV";case wo:return"-0.064mV";case Eo:return"-0.032mV";case Oo:return"-0.000mV";case So:return" 0.000mV";case xo:return"0.032mV";case Lo:return"0.064mV";case Ao:return"0.096mV";case jo:return"0.128mV";case Fo:return"0.160mV";case _o:return"0.192mV";case Po:return"0.224mV";case To:return"0.256mV";case Do:return"0.288mV";case Io:return"0.320mV";case ko:return"0.352mV";case No:return"0.384mV";case Go:return"0.416mV";case Ro:return"0.448mV";case Co:return"0.480mV";case Mo:return"0.512mV";case Bo:return"0.544mV";case Uo:return"0.576mV";case Vo:return"0.608mV";case Ho:return"0.640mV";case Zo:return"0.672mV";case Yo:return"0.704mV";case $o:return"0.736mV";case zo:return"0.768mV";case Jo:return"0.800mV";case Wo:return"0.832mV";case Xo:return"0.864mV";case Ko:return"0.896mV";case qo:return"0.928mV";case Qo:return"0.960mV";case ti:return"0.992mV";default:return"unknown"}},mi=function(t){var e,r;switch(1&t){case ei:e="High";break;case ri:e="Low";break;default:e="unknown"}switch(2&t){case ni:r="On";break;case oi:r="Off";break;default:r="unknown"}return"".concat(e,"/").concat(r)};function gi(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function bi(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?gi(Object(r),!0).forEach((function(e){wi(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):gi(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function wi(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function Ei(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null==r)return;var n,o,i=[],a=!0,u=!1;try{for(r=r.call(t);!(a=(n=r.next()).done)&&(i.push(n.value),!e||i.length!==e);a=!0);}catch(t){u=!0,o=t}finally{try{a||null==r.return||r.return()}finally{if(u)throw o}}return i}(t,e)||Si(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Oi(t){return function(t){if(Array.isArray(t))return xi(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||Si(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Si(t,e){if(t){if("string"==typeof t)return xi(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?xi(t,e):void 0}}function xi(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}var Li=function(t,e){var r=e?kr:Ir;return Oi(t).map((function(t){return r[t]||" "})).join("").trim()},Ai=function(t){switch(28&t){case 4:return"A";case 8:return"B";case 12:return"0";case 16:return"AB";default:return"-"}},ji=function(t){if(!t)return"--";var e=Nr[15&t];return"".concat(Nr[t>>4]).concat(e)},Fi=function(t,e){var r=Ei(Oi(t).map(ji),4),n=r[0],o=r[1],i=r[2],a=r[3],u=function(t,e){return"--"===t&&"--"!==e?"00".concat(e):"--"!==t&&"--"===e?"".concat(t,"00"):"".concat(t).concat(e)}(n,o);return e?"".concat(u,"年").concat(i,"月").concat(a,"日"):"".concat(i,"/").concat(a,"/").concat(u)},_i=function(t,e){var r=Oi(t).map(ji).map((function(t){return"--"===t?"00":t}));return"".concat(e?"PC-":"GC-").concat(r.join(""))},Pi=function(t,e,r){var n,o,i,a=e/4096-2,u=a>=0?t[4530+a]:64,c=t[e+3924],l=t.slice(e+3584,e+3839+1);if(u<64){var f=(o=l,(i=[200,201,202,203,204,205,206,207,216,217,218,219,220,221,222,223,232,233,234,235,236,237,238,239,248,249,250,251,252,253,254,255]).map((function(t){return o[t]})).filter((function(t){return 0===t})).length===i.length?"stock":i.map((function(t){return o[t]})).filter((function(t){return 255===t})).length===i.length?"pxlr":"photo");n={romType:f},"stock"!==f&&(n=bi(bi({},n),function(t,e){var r;switch(e){case"photo":r=ai;break;case"pxlr":r=ii;break;default:return{}}var n=t[r.thumbnailByteExposureHigh],o=t[r.thumbnailByteExposureLow],i=2&t[r.thumbnailByteCapture],a=128&t[r.thumbnailByteEdgegains],u=96&t[r.thumbnailByteEdgegains],c=31&t[r.thumbnailByteEdgegains],l=112&t[r.thumbnailByteEdmovolt],f=8&t[r.thumbnailByteEdmovolt],s=7&t[r.thumbnailByteEdmovolt],h=192&t[r.thumbnailByteVoutzero],p=63&t[r.thumbnailByteVoutzero],y=t[r.thumbnailByteDitherset],d=t[r.thumbnailByteContrast];return"photo"===e?{romType:e,exposure:ui(n,o),captureMode:ci(i),edgeExclusive:li(a),edgeOperation:fi(u),gain:si(c),edgeMode:hi(l),invertOut:pi(f),voltageRef:yi(s),zeroPoint:di(h),vOut:vi(p)}:{romType:e,exposure:ui(n,o),captureMode:ci(i),edgeExclusive:li(a),edgeOperation:fi(u),gain:si(c),edgeMode:hi(l),invertOut:pi(f),voltageRef:yi(s),zeroPoint:di(h),vOut:vi(p),ditherset:mi(y),contrast:d+1}}(l,f))),"stock"===f&&(n=bi(bi({},n),function(t,e,r){var n,o=t.slice(e+3840,e+3843+1),i=t.slice(e+3844,e+3852+1),a=t[e+3853],u=t.slice(e+3854,e+3857+1),c=t.slice(e+3861,e+3887+1),l=Boolean(t[e+3891]);return{userId:_i(o,r),birthDate:Fi(u,r),userName:Li(i,r),gender:(n=a,1&n?"m":2&n?"f":"-"),bloodType:Ai(a),comment:Li(c,r),isCopy:l}}(t,e,r)))}return{cartIndex:a,albumIndex:u,baseAddress:e,meta:n,frameNumber:c}};function Ti(t){return function(t){if(Array.isArray(t))return Di(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||function(t,e){if(!t)return;if("string"==typeof t)return Di(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);"Object"===r&&t.constructor&&(r=t.constructor.name);if("Map"===r||"Set"===r)return Array.from(t);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Di(t,e)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Di(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}var Ii="FF FF FF FF FF FF FF FF FF FF FF FF FF FF FF FF",ki=function(t,e){var r=[],n="",o=!1;r.push.apply(r,Ti(Ti(Array(40)).map((function(){return Ii}))));for(var i=0;i<3584;i+=1)i%256==0&&r.push.apply(r,Ti(Ti(Array(2)).map((function(){return Ii})))),n+=" ".concat(t[e+i].toString(16).padStart(2,"0")),i%16==15&&(r.push(n.trim()),o||"00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00"===n.trim()||(o=!0),n=""),i%256==255&&r.push.apply(r,Ti(Ti(Array(2)).map((function(){return Ii}))));return r.push.apply(r,Ti(Ti(Array(40)).map((function(){return Ii})))),o?r:null};function Ni(t){return Ni="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Ni(t)}function Gi(){Gi=function(){return t};var t={},e=Object.prototype,r=e.hasOwnProperty,n="function"==typeof Symbol?Symbol:{},o=n.iterator||"@@iterator",i=n.asyncIterator||"@@asyncIterator",a=n.toStringTag||"@@toStringTag";function u(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{u({},"")}catch(t){u=function(t,e,r){return t[e]=r}}function c(t,e,r,n){var o=e&&e.prototype instanceof s?e:s,i=Object.create(o.prototype),a=new S(n||[]);return i._invoke=function(t,e,r){var n="suspendedStart";return function(o,i){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===o)throw i;return L()}for(r.method=o,r.arg=i;;){var a=r.delegate;if(a){var u=w(a,r);if(u){if(u===f)continue;return u}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var c=l(t,e,r);if("normal"===c.type){if(n=r.done?"completed":"suspendedYield",c.arg===f)continue;return{value:c.arg,done:r.done}}"throw"===c.type&&(n="completed",r.method="throw",r.arg=c.arg)}}}(t,r,a),i}function l(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}t.wrap=c;var f={};function s(){}function h(){}function p(){}var y={};u(y,o,(function(){return this}));var d=Object.getPrototypeOf,v=d&&d(d(x([])));v&&v!==e&&r.call(v,o)&&(y=v);var m=p.prototype=s.prototype=Object.create(y);function g(t){["next","throw","return"].forEach((function(e){u(t,e,(function(t){return this._invoke(e,t)}))}))}function b(t,e){function n(o,i,a,u){var c=l(t[o],t,i);if("throw"!==c.type){var f=c.arg,s=f.value;return s&&"object"==Ni(s)&&r.call(s,"__await")?e.resolve(s.__await).then((function(t){n("next",t,a,u)}),(function(t){n("throw",t,a,u)})):e.resolve(s).then((function(t){f.value=t,a(f)}),(function(t){return n("throw",t,a,u)}))}u(c.arg)}var o;this._invoke=function(t,r){function i(){return new e((function(e,o){n(t,r,e,o)}))}return o=o?o.then(i,i):i()}}function w(t,e){var r=t.iterator[e.method];if(void 0===r){if(e.delegate=null,"throw"===e.method){if(t.iterator.return&&(e.method="return",e.arg=void 0,w(t,e),"throw"===e.method))return f;e.method="throw",e.arg=new TypeError("The iterator does not provide a 'throw' method")}return f}var n=l(r,t.iterator,e.arg);if("throw"===n.type)return e.method="throw",e.arg=n.arg,e.delegate=null,f;var o=n.arg;return o?o.done?(e[t.resultName]=o.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=void 0),e.delegate=null,f):o:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,f)}function E(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function O(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function S(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(E,this),this.reset(!0)}function x(t){if(t){var e=t[o];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var n=-1,i=function e(){for(;++n<t.length;)if(r.call(t,n))return e.value=t[n],e.done=!1,e;return e.value=void 0,e.done=!0,e};return i.next=i}}return{next:L}}function L(){return{value:void 0,done:!0}}return h.prototype=p,u(m,"constructor",p),u(p,"constructor",h),h.displayName=u(p,a,"GeneratorFunction"),t.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===h||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,p):(t.__proto__=p,u(t,a,"GeneratorFunction")),t.prototype=Object.create(m),t},t.awrap=function(t){return{__await:t}},g(b.prototype),u(b.prototype,i,(function(){return this})),t.AsyncIterator=b,t.async=function(e,r,n,o,i){void 0===i&&(i=Promise);var a=new b(c(e,r,n,o),i);return t.isGeneratorFunction(r)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},g(m),u(m,a,"Generator"),u(m,o,(function(){return this})),u(m,"toString",(function(){return"[object Generator]"})),t.keys=function(t){var e=[];for(var r in t)e.push(r);return e.reverse(),function r(){for(;e.length;){var n=e.pop();if(n in t)return r.value=n,r.done=!1,r}return r.done=!0,r}},t.values=x,S.prototype={constructor:S,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(O),!t)for(var e in this)"t"===e.charAt(0)&&r.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function n(r,n){return a.type="throw",a.arg=t,e.next=r,n&&(e.method="next",e.arg=void 0),!!n}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],a=i.completion;if("root"===i.tryLoc)return n("end");if(i.tryLoc<=this.prev){var u=r.call(i,"catchLoc"),c=r.call(i,"finallyLoc");if(u&&c){if(this.prev<i.catchLoc)return n(i.catchLoc,!0);if(this.prev<i.finallyLoc)return n(i.finallyLoc)}else if(u){if(this.prev<i.catchLoc)return n(i.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return n(i.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,f):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),f},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),O(r),f}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;O(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,r){return this.delegate={iterator:x(t),resultName:e,nextLoc:r},"next"===this.method&&(this.arg=void 0),f}},t}function Ri(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function Ci(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?Ri(Object(r),!0).forEach((function(e){Mi(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):Ri(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function Mi(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function Bi(t,e,r,n,o,i,a){try{var u=t[i](a),c=u.value}catch(t){return void r(t)}u.done?e(c):Promise.resolve(c).then(n,o)}function Ui(t){return function(){var e=this,r=arguments;return new Promise((function(n,o){var i=t.apply(e,r);function a(t){Bi(i,n,o,a,u,"next",t)}function u(t){Bi(i,n,o,a,u,"throw",t)}a(void 0)}))}}function Vi(t){return function(t){if(Array.isArray(t))return Hi(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||function(t,e){if(!t)return;if("string"==typeof t)return Hi(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);"Object"===r&&t.constructor&&(r=t.constructor.name);if("Map"===r||"Set"===r)return Array.from(t);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Hi(t,e)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Hi(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}var Zi=Ft("albumIndex"),Yi=function(t){var e=t.importLastSeen,r=t.data,n=t.lastModified,o=t.frames,i=t.fileName,a=t.importDeleted,u=t.dispatch;if(t.forceMagicCheck){if([4306,4523,4560,4597].some((function(t){return"Magic"!==Vi(r.subarray(t,t+5)).map((function(t){return String.fromCharCode(t)})).join("")})))return null}return function(){var t=Ui(Gi().mark((function t(l,f){var s,h,p,y,d,v;return Gi().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return s=new Array(30).fill(null).map((function(t,e){return 4096*(e+2)})).filter((function(t){return t<r.length})),e&&s.unshift(0),t.next=4,Promise.all(s.map(function(){var t=Ui(Gi().mark((function t(e){var n,i,a,u;return Gi().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n=Pi(r,e,f),i=n.frameNumber,!(a=ki(r,e))){t.next=8;break}return t.next=6,(0,Tr.Z)(a,Dr(i,l,o));case 6:return u=t.sent,t.abrupt("return",Ci({tiles:u},n));case 8:return t.abrupt("return",null);case 9:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()));case 4:return h=t.sent,p=Zi(h.filter(Boolean)),y=new(Ge())(1,1/0),d=0,t.next=10,Promise.all(p.map(function(){var t=Ui(Gi().mark((function t(e){var r,o,u;return Gi().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=e.albumIndex,o=e.tiles,u=e.meta,t.abrupt("return",y.add(Ui(Gi().mark((function t(){var e,c,l,f,s,h;return Gi().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:t.t0=r,t.next=64===t.t0?3:255===t.t0?5:9;break;case 3:return e="[last seen]",t.abrupt("break",12);case 5:if(a){t.next=7;break}return t.abrupt("return",null);case 7:return e="[deleted]",t.abrupt("break",12);case 9:return e=(d+=1).toString(10).padStart(2,"0"),t.abrupt("break",12);case 12:return t.next=14,(0,xr.aj)(o);case 14:return c=t.sent,l=c.dataHash,t.next=18,(0,Lr.jm)(o);case 18:return f=t.sent,s=f.dataHash,h="function"==typeof i?i({indexText:e,albumIndex:r,displayIndex:d}):"".concat(i," ").concat(e),t.abrupt("return",{fileName:h,imageHash:l,frameHash:s,tiles:o,lastModified:n,meta:u,tempId:Math.random().toString(16).split(".").pop()});case 22:case"end":return t.stop()}}),t)})))));case 2:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()));case 10:return v=t.sent,u({type:c.hZ,payload:v.filter(Boolean)}),t.abrupt("return",!0);case 13:case"end":return t.stop()}}),t)})));return function(e,r){return t.apply(this,arguments)}}()};function $i(t){return $i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},$i(t)}function zi(){zi=function(){return t};var t={},e=Object.prototype,r=e.hasOwnProperty,n="function"==typeof Symbol?Symbol:{},o=n.iterator||"@@iterator",i=n.asyncIterator||"@@asyncIterator",a=n.toStringTag||"@@toStringTag";function u(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{u({},"")}catch(t){u=function(t,e,r){return t[e]=r}}function c(t,e,r,n){var o=e&&e.prototype instanceof s?e:s,i=Object.create(o.prototype),a=new S(n||[]);return i._invoke=function(t,e,r){var n="suspendedStart";return function(o,i){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===o)throw i;return L()}for(r.method=o,r.arg=i;;){var a=r.delegate;if(a){var u=w(a,r);if(u){if(u===f)continue;return u}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var c=l(t,e,r);if("normal"===c.type){if(n=r.done?"completed":"suspendedYield",c.arg===f)continue;return{value:c.arg,done:r.done}}"throw"===c.type&&(n="completed",r.method="throw",r.arg=c.arg)}}}(t,r,a),i}function l(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}t.wrap=c;var f={};function s(){}function h(){}function p(){}var y={};u(y,o,(function(){return this}));var d=Object.getPrototypeOf,v=d&&d(d(x([])));v&&v!==e&&r.call(v,o)&&(y=v);var m=p.prototype=s.prototype=Object.create(y);function g(t){["next","throw","return"].forEach((function(e){u(t,e,(function(t){return this._invoke(e,t)}))}))}function b(t,e){function n(o,i,a,u){var c=l(t[o],t,i);if("throw"!==c.type){var f=c.arg,s=f.value;return s&&"object"==$i(s)&&r.call(s,"__await")?e.resolve(s.__await).then((function(t){n("next",t,a,u)}),(function(t){n("throw",t,a,u)})):e.resolve(s).then((function(t){f.value=t,a(f)}),(function(t){return n("throw",t,a,u)}))}u(c.arg)}var o;this._invoke=function(t,r){function i(){return new e((function(e,o){n(t,r,e,o)}))}return o=o?o.then(i,i):i()}}function w(t,e){var r=t.iterator[e.method];if(void 0===r){if(e.delegate=null,"throw"===e.method){if(t.iterator.return&&(e.method="return",e.arg=void 0,w(t,e),"throw"===e.method))return f;e.method="throw",e.arg=new TypeError("The iterator does not provide a 'throw' method")}return f}var n=l(r,t.iterator,e.arg);if("throw"===n.type)return e.method="throw",e.arg=n.arg,e.delegate=null,f;var o=n.arg;return o?o.done?(e[t.resultName]=o.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=void 0),e.delegate=null,f):o:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,f)}function E(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function O(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function S(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(E,this),this.reset(!0)}function x(t){if(t){var e=t[o];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var n=-1,i=function e(){for(;++n<t.length;)if(r.call(t,n))return e.value=t[n],e.done=!1,e;return e.value=void 0,e.done=!0,e};return i.next=i}}return{next:L}}function L(){return{value:void 0,done:!0}}return h.prototype=p,u(m,"constructor",p),u(p,"constructor",h),h.displayName=u(p,a,"GeneratorFunction"),t.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===h||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,p):(t.__proto__=p,u(t,a,"GeneratorFunction")),t.prototype=Object.create(m),t},t.awrap=function(t){return{__await:t}},g(b.prototype),u(b.prototype,i,(function(){return this})),t.AsyncIterator=b,t.async=function(e,r,n,o,i){void 0===i&&(i=Promise);var a=new b(c(e,r,n,o),i);return t.isGeneratorFunction(r)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},g(m),u(m,a,"Generator"),u(m,o,(function(){return this})),u(m,"toString",(function(){return"[object Generator]"})),t.keys=function(t){var e=[];for(var r in t)e.push(r);return e.reverse(),function r(){for(;e.length;){var n=e.pop();if(n in t)return r.value=n,r.done=!1,r}return r.done=!0,r}},t.values=x,S.prototype={constructor:S,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(O),!t)for(var e in this)"t"===e.charAt(0)&&r.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function n(r,n){return a.type="throw",a.arg=t,e.next=r,n&&(e.method="next",e.arg=void 0),!!n}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],a=i.completion;if("root"===i.tryLoc)return n("end");if(i.tryLoc<=this.prev){var u=r.call(i,"catchLoc"),c=r.call(i,"finallyLoc");if(u&&c){if(this.prev<i.catchLoc)return n(i.catchLoc,!0);if(this.prev<i.finallyLoc)return n(i.finallyLoc)}else if(u){if(this.prev<i.catchLoc)return n(i.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return n(i.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,f):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),f},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),O(r),f}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;O(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,r){return this.delegate={iterator:x(t),resultName:e,nextLoc:r},"next"===this.method&&(this.arg=void 0),f}},t}function Ji(t,e,r,n,o,i,a){try{var u=t[i](a),c=u.value}catch(t){return void r(t)}u.done?e(c):Promise.resolve(c).then(n,o)}function Wi(t){return function(){var e=this,r=arguments;return new Promise((function(n,o){var i=t.apply(e,r);function a(t){Ji(i,n,o,a,u,"next",t)}function u(t){Ji(i,n,o,a,u,"throw",t)}a(void 0)}))}}var Xi=function(t){var e=t.getState,r=t.dispatch;return function(){var t=Wi(zi().mark((function t(n,o){var i,a,u,l,f,s,h,p,y,d;return zi().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,(0,Sr.Z)(n,"arrayBuffer");case 2:if(i=t.sent,a=e(),u=a.savFrameTypes,l=a.frames,f=a.frameGroupNames,s=a.importLastSeen,h=a.importDeleted,p=a.forceMagicCheck,(y=(0,Pr.Z)(l,f).map((function(t){var e=t.id;return{value:e,name:t.name,selected:u===e}}))).unshift({value:"",name:"None (Black frame)"}),d=Yi({importLastSeen:!!o||s,data:i,lastModified:n.lastModified,frames:l,fileName:n.name,importDeleted:!!o||h,dispatch:r,forceMagicCheck:!o&&p})){t.next=9;break}throw new Error(".sav file seems to be invalid");case 9:if(!o){t.next=13;break}return t.next=12,d("",!1);case 12:return t.abrupt("return",!0);case 13:return t.abrupt("return",new Promise((function(t){var e;r({type:c.jH,payload:{message:"Importing '".concat(n.name,"'"),questions:function(){return[{label:"Import is from a Japanese Cart (PocketCamera)",key:"cartIsJP",type:"checkbox"},y.length>1?{label:"Select frame group to use with this import",key:"chosenFrameset",type:"select",options:y}:null].filter(Boolean)},confirm:(e=Wi(zi().mark((function e(n){var o,i;return zi().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o=n.chosenFrameset,i=n.cartIsJP,r({type:c.Gp}),e.next=4,d(o||"",Boolean(i));case 4:t(!0);case 5:case"end":return e.stop()}}),e)}))),function(t){return e.apply(this,arguments)}),deny:function(){r({type:c.Gp}),t(!0)}}})})));case 14:case"end":return t.stop()}}),t)})));return function(e,r){return t.apply(this,arguments)}}()};function Ki(t){return Ki="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Ki(t)}function qi(){qi=function(){return t};var t={},e=Object.prototype,r=e.hasOwnProperty,n="function"==typeof Symbol?Symbol:{},o=n.iterator||"@@iterator",i=n.asyncIterator||"@@asyncIterator",a=n.toStringTag||"@@toStringTag";function u(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{u({},"")}catch(t){u=function(t,e,r){return t[e]=r}}function c(t,e,r,n){var o=e&&e.prototype instanceof s?e:s,i=Object.create(o.prototype),a=new S(n||[]);return i._invoke=function(t,e,r){var n="suspendedStart";return function(o,i){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===o)throw i;return L()}for(r.method=o,r.arg=i;;){var a=r.delegate;if(a){var u=w(a,r);if(u){if(u===f)continue;return u}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var c=l(t,e,r);if("normal"===c.type){if(n=r.done?"completed":"suspendedYield",c.arg===f)continue;return{value:c.arg,done:r.done}}"throw"===c.type&&(n="completed",r.method="throw",r.arg=c.arg)}}}(t,r,a),i}function l(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}t.wrap=c;var f={};function s(){}function h(){}function p(){}var y={};u(y,o,(function(){return this}));var d=Object.getPrototypeOf,v=d&&d(d(x([])));v&&v!==e&&r.call(v,o)&&(y=v);var m=p.prototype=s.prototype=Object.create(y);function g(t){["next","throw","return"].forEach((function(e){u(t,e,(function(t){return this._invoke(e,t)}))}))}function b(t,e){function n(o,i,a,u){var c=l(t[o],t,i);if("throw"!==c.type){var f=c.arg,s=f.value;return s&&"object"==Ki(s)&&r.call(s,"__await")?e.resolve(s.__await).then((function(t){n("next",t,a,u)}),(function(t){n("throw",t,a,u)})):e.resolve(s).then((function(t){f.value=t,a(f)}),(function(t){return n("throw",t,a,u)}))}u(c.arg)}var o;this._invoke=function(t,r){function i(){return new e((function(e,o){n(t,r,e,o)}))}return o=o?o.then(i,i):i()}}function w(t,e){var r=t.iterator[e.method];if(void 0===r){if(e.delegate=null,"throw"===e.method){if(t.iterator.return&&(e.method="return",e.arg=void 0,w(t,e),"throw"===e.method))return f;e.method="throw",e.arg=new TypeError("The iterator does not provide a 'throw' method")}return f}var n=l(r,t.iterator,e.arg);if("throw"===n.type)return e.method="throw",e.arg=n.arg,e.delegate=null,f;var o=n.arg;return o?o.done?(e[t.resultName]=o.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=void 0),e.delegate=null,f):o:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,f)}function E(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function O(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function S(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(E,this),this.reset(!0)}function x(t){if(t){var e=t[o];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var n=-1,i=function e(){for(;++n<t.length;)if(r.call(t,n))return e.value=t[n],e.done=!1,e;return e.value=void 0,e.done=!0,e};return i.next=i}}return{next:L}}function L(){return{value:void 0,done:!0}}return h.prototype=p,u(m,"constructor",p),u(p,"constructor",h),h.displayName=u(p,a,"GeneratorFunction"),t.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===h||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,p):(t.__proto__=p,u(t,a,"GeneratorFunction")),t.prototype=Object.create(m),t},t.awrap=function(t){return{__await:t}},g(b.prototype),u(b.prototype,i,(function(){return this})),t.AsyncIterator=b,t.async=function(e,r,n,o,i){void 0===i&&(i=Promise);var a=new b(c(e,r,n,o),i);return t.isGeneratorFunction(r)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},g(m),u(m,a,"Generator"),u(m,o,(function(){return this})),u(m,"toString",(function(){return"[object Generator]"})),t.keys=function(t){var e=[];for(var r in t)e.push(r);return e.reverse(),function r(){for(;e.length;){var n=e.pop();if(n in t)return r.value=n,r.done=!1,r}return r.done=!0,r}},t.values=x,S.prototype={constructor:S,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(O),!t)for(var e in this)"t"===e.charAt(0)&&r.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function n(r,n){return a.type="throw",a.arg=t,e.next=r,n&&(e.method="next",e.arg=void 0),!!n}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],a=i.completion;if("root"===i.tryLoc)return n("end");if(i.tryLoc<=this.prev){var u=r.call(i,"catchLoc"),c=r.call(i,"finallyLoc");if(u&&c){if(this.prev<i.catchLoc)return n(i.catchLoc,!0);if(this.prev<i.finallyLoc)return n(i.finallyLoc)}else if(u){if(this.prev<i.catchLoc)return n(i.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return n(i.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,f):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),f},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),O(r),f}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;O(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,r){return this.delegate={iterator:x(t),resultName:e,nextLoc:r},"next"===this.method&&(this.arg=void 0),f}},t}function Qi(t,e,r,n,o,i,a){try{var u=t[i](a),c=u.value}catch(t){return void r(t)}u.done?e(c):Promise.resolve(c).then(n,o)}function ta(t){return function(){var e=this,r=arguments;return new Promise((function(n,o){var i=t.apply(e,r);function a(t){Qi(i,n,o,a,u,"next",t)}function u(t){Qi(i,n,o,a,u,"throw",t)}a(void 0)}))}}var ea=function(t){return t.toString(10).padStart(2,"0")},ra=function(t){var e=t.getState,n=t.dispatch;return function(){var t=ta(qi().mark((function t(o){var i,a,u,c,l,f,s,h,p;return qi().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,r.e(705).then(r.t.bind(r,40705,23));case 2:return i=t.sent,a=i.default,t.next=6,(0,Sr.Z)(o,"arrayBuffer");case 6:return u=t.sent,c=e(),l=c.importLastSeen,f=c.importDeleted,s=c.forceMagicCheck,h=(h=Be()(u,131072).map((function(t,e){return{bankData:t,bankIndex:e,hash:a(t)}}))).filter((function(t,e){return h.findIndex((function(e){return e.hash===t.hash}))===e})),t.next=12,Promise.all(h.map(function(){var t=ta(qi().mark((function t(e){var r,i,a,u;return qi().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(r=e.bankData,0!==(i=e.bankIndex)){t.next=3;break}return t.abrupt("return",!1);case 3:if(a=function(t){var e=t.albumIndex;return 64===e?"".concat(o.name," - bank ").concat(ea(i)," [last seen]"):255===e?"".concat(o.name," - bank ").concat(ea(i)," [deleted]"):"".concat(o.name," - bank ").concat(ea(i)," - image ").concat(ea(e+1))},u=Yi({importLastSeen:l,data:r,lastModified:o.lastModified,frames:[],fileName:a,importDeleted:f,dispatch:n,forceMagicCheck:s})){t.next=7;break}return t.abrupt("return",!1);case 7:return t.abrupt("return",u("",!1));case 8:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()));case 12:if((p=t.sent).filter(Boolean).length){t.next=15;break}throw new Error("File does not contain any recognizable images");case 15:return t.abrupt("return",p);case 16:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},na=r(2737);function oa(t){return oa="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},oa(t)}function ia(){ia=function(){return t};var t={},e=Object.prototype,r=e.hasOwnProperty,n="function"==typeof Symbol?Symbol:{},o=n.iterator||"@@iterator",i=n.asyncIterator||"@@asyncIterator",a=n.toStringTag||"@@toStringTag";function u(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{u({},"")}catch(t){u=function(t,e,r){return t[e]=r}}function c(t,e,r,n){var o=e&&e.prototype instanceof s?e:s,i=Object.create(o.prototype),a=new S(n||[]);return i._invoke=function(t,e,r){var n="suspendedStart";return function(o,i){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===o)throw i;return L()}for(r.method=o,r.arg=i;;){var a=r.delegate;if(a){var u=w(a,r);if(u){if(u===f)continue;return u}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var c=l(t,e,r);if("normal"===c.type){if(n=r.done?"completed":"suspendedYield",c.arg===f)continue;return{value:c.arg,done:r.done}}"throw"===c.type&&(n="completed",r.method="throw",r.arg=c.arg)}}}(t,r,a),i}function l(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}t.wrap=c;var f={};function s(){}function h(){}function p(){}var y={};u(y,o,(function(){return this}));var d=Object.getPrototypeOf,v=d&&d(d(x([])));v&&v!==e&&r.call(v,o)&&(y=v);var m=p.prototype=s.prototype=Object.create(y);function g(t){["next","throw","return"].forEach((function(e){u(t,e,(function(t){return this._invoke(e,t)}))}))}function b(t,e){function n(o,i,a,u){var c=l(t[o],t,i);if("throw"!==c.type){var f=c.arg,s=f.value;return s&&"object"==oa(s)&&r.call(s,"__await")?e.resolve(s.__await).then((function(t){n("next",t,a,u)}),(function(t){n("throw",t,a,u)})):e.resolve(s).then((function(t){f.value=t,a(f)}),(function(t){return n("throw",t,a,u)}))}u(c.arg)}var o;this._invoke=function(t,r){function i(){return new e((function(e,o){n(t,r,e,o)}))}return o=o?o.then(i,i):i()}}function w(t,e){var r=t.iterator[e.method];if(void 0===r){if(e.delegate=null,"throw"===e.method){if(t.iterator.return&&(e.method="return",e.arg=void 0,w(t,e),"throw"===e.method))return f;e.method="throw",e.arg=new TypeError("The iterator does not provide a 'throw' method")}return f}var n=l(r,t.iterator,e.arg);if("throw"===n.type)return e.method="throw",e.arg=n.arg,e.delegate=null,f;var o=n.arg;return o?o.done?(e[t.resultName]=o.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=void 0),e.delegate=null,f):o:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,f)}function E(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function O(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function S(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(E,this),this.reset(!0)}function x(t){if(t){var e=t[o];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var n=-1,i=function e(){for(;++n<t.length;)if(r.call(t,n))return e.value=t[n],e.done=!1,e;return e.value=void 0,e.done=!0,e};return i.next=i}}return{next:L}}function L(){return{value:void 0,done:!0}}return h.prototype=p,u(m,"constructor",p),u(p,"constructor",h),h.displayName=u(p,a,"GeneratorFunction"),t.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===h||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,p):(t.__proto__=p,u(t,a,"GeneratorFunction")),t.prototype=Object.create(m),t},t.awrap=function(t){return{__await:t}},g(b.prototype),u(b.prototype,i,(function(){return this})),t.AsyncIterator=b,t.async=function(e,r,n,o,i){void 0===i&&(i=Promise);var a=new b(c(e,r,n,o),i);return t.isGeneratorFunction(r)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},g(m),u(m,a,"Generator"),u(m,o,(function(){return this})),u(m,"toString",(function(){return"[object Generator]"})),t.keys=function(t){var e=[];for(var r in t)e.push(r);return e.reverse(),function r(){for(;e.length;){var n=e.pop();if(n in t)return r.value=n,r.done=!1,r}return r.done=!0,r}},t.values=x,S.prototype={constructor:S,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(O),!t)for(var e in this)"t"===e.charAt(0)&&r.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function n(r,n){return a.type="throw",a.arg=t,e.next=r,n&&(e.method="next",e.arg=void 0),!!n}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],a=i.completion;if("root"===i.tryLoc)return n("end");if(i.tryLoc<=this.prev){var u=r.call(i,"catchLoc"),c=r.call(i,"finallyLoc");if(u&&c){if(this.prev<i.catchLoc)return n(i.catchLoc,!0);if(this.prev<i.finallyLoc)return n(i.finallyLoc)}else if(u){if(this.prev<i.catchLoc)return n(i.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return n(i.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,f):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),f},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),O(r),f}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;O(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,r){return this.delegate={iterator:x(t),resultName:e,nextLoc:r},"next"===this.method&&(this.arg=void 0),f}},t}function aa(t,e,r,n,o,i,a){try{var u=t[i](a),c=u.value}catch(t){return void r(t)}u.done?e(c):Promise.resolve(c).then(n,o)}function ua(t){return function(){var e=this,r=arguments;return new Promise((function(n,o){var i=t.apply(e,r);function a(t){aa(i,n,o,a,u,"next",t)}function u(t){aa(i,n,o,a,u,"throw",t)}a(void 0)}))}}var ca=function(t){var e=t.dispatch;return function(){var t=ua(ia().mark((function t(r){var n,o;return ia().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,(0,Sr.Z)(r,"arrayBuffer");case 2:return n=t.sent,t.next=5,(0,na.parseReducedPackets)(n).then(na.inflateTransferPackages).then(na.getImageDataStream).then(na.decompressDataStream).then(na.decodePrintCommands).then(na.harmonizePalettes).then(na.transformToClassic).then(na.completeFrame);case 5:return o=t.sent,t.next=8,Promise.all(o.map(function(){var t=ua(ia().mark((function t(n,i){var a,u,l,f,s;return ia().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,(0,xr.aj)(n);case 2:return a=t.sent,u=a.dataHash,t.next=6,(0,Lr.jm)(n);case 6:return l=t.sent,f=l.dataHash,s=o.length<2?"":" (".concat(i+1,")"),e({type:c.d3,payload:{fileName:"".concat(r.name).concat(s),imageHash:u,frameHash:f,tiles:n,lastModified:r.lastModified?r.lastModified+i:null,tempId:Math.random().toString(16).split(".").pop()}}),t.abrupt("return",!0);case 11:case"end":return t.stop()}}),t)})));return function(e,r){return t.apply(this,arguments)}}()));case 8:return t.abrupt("return",!0);case 9:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},la=function(t){t.fillStyle="#000",t.fillRect(0,0,t.canvas.width,t.canvas.height),t.filter="grayscale(1)",t.imageSmoothingEnabled=!1},fa=function(t){return new Promise((function(e,r){var n=document.createElement("img"),o=document.createElement("canvas");o.width=160;var i=o.getContext("2d");n.onerror=r,n.onload=function(){var r,a=n.naturalWidth,u=n.naturalHeight;.875===u/a?(o.height=144,r=n.naturalWidth/128,la(i),i.drawImage(n,0,0,a,u,16,16,o.width-32,o.height-32)):(o.height=o.width*u/a,r=a/160,la(i),i.drawImage(n,0,0,a,u,0,0,o.width,o.height));var c=i.getImageData(0,0,o.width,o.height);e({imageData:c,scaleFactor:r,width:o.width,height:o.height,fileName:t.name,lastModified:t.lastModified||null})},(0,Sr.Z)(t,"dataURL").then((function(t){n.src=t}))}))},sa=r(47387);function ha(t){return ha="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},ha(t)}function pa(){pa=function(){return t};var t={},e=Object.prototype,r=e.hasOwnProperty,n="function"==typeof Symbol?Symbol:{},o=n.iterator||"@@iterator",i=n.asyncIterator||"@@asyncIterator",a=n.toStringTag||"@@toStringTag";function u(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{u({},"")}catch(t){u=function(t,e,r){return t[e]=r}}function c(t,e,r,n){var o=e&&e.prototype instanceof s?e:s,i=Object.create(o.prototype),a=new S(n||[]);return i._invoke=function(t,e,r){var n="suspendedStart";return function(o,i){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===o)throw i;return L()}for(r.method=o,r.arg=i;;){var a=r.delegate;if(a){var u=w(a,r);if(u){if(u===f)continue;return u}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var c=l(t,e,r);if("normal"===c.type){if(n=r.done?"completed":"suspendedYield",c.arg===f)continue;return{value:c.arg,done:r.done}}"throw"===c.type&&(n="completed",r.method="throw",r.arg=c.arg)}}}(t,r,a),i}function l(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}t.wrap=c;var f={};function s(){}function h(){}function p(){}var y={};u(y,o,(function(){return this}));var d=Object.getPrototypeOf,v=d&&d(d(x([])));v&&v!==e&&r.call(v,o)&&(y=v);var m=p.prototype=s.prototype=Object.create(y);function g(t){["next","throw","return"].forEach((function(e){u(t,e,(function(t){return this._invoke(e,t)}))}))}function b(t,e){function n(o,i,a,u){var c=l(t[o],t,i);if("throw"!==c.type){var f=c.arg,s=f.value;return s&&"object"==ha(s)&&r.call(s,"__await")?e.resolve(s.__await).then((function(t){n("next",t,a,u)}),(function(t){n("throw",t,a,u)})):e.resolve(s).then((function(t){f.value=t,a(f)}),(function(t){return n("throw",t,a,u)}))}u(c.arg)}var o;this._invoke=function(t,r){function i(){return new e((function(e,o){n(t,r,e,o)}))}return o=o?o.then(i,i):i()}}function w(t,e){var r=t.iterator[e.method];if(void 0===r){if(e.delegate=null,"throw"===e.method){if(t.iterator.return&&(e.method="return",e.arg=void 0,w(t,e),"throw"===e.method))return f;e.method="throw",e.arg=new TypeError("The iterator does not provide a 'throw' method")}return f}var n=l(r,t.iterator,e.arg);if("throw"===n.type)return e.method="throw",e.arg=n.arg,e.delegate=null,f;var o=n.arg;return o?o.done?(e[t.resultName]=o.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=void 0),e.delegate=null,f):o:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,f)}function E(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function O(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function S(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(E,this),this.reset(!0)}function x(t){if(t){var e=t[o];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var n=-1,i=function e(){for(;++n<t.length;)if(r.call(t,n))return e.value=t[n],e.done=!1,e;return e.value=void 0,e.done=!0,e};return i.next=i}}return{next:L}}function L(){return{value:void 0,done:!0}}return h.prototype=p,u(m,"constructor",p),u(p,"constructor",h),h.displayName=u(p,a,"GeneratorFunction"),t.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===h||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,p):(t.__proto__=p,u(t,a,"GeneratorFunction")),t.prototype=Object.create(m),t},t.awrap=function(t){return{__await:t}},g(b.prototype),u(b.prototype,i,(function(){return this})),t.AsyncIterator=b,t.async=function(e,r,n,o,i){void 0===i&&(i=Promise);var a=new b(c(e,r,n,o),i);return t.isGeneratorFunction(r)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},g(m),u(m,a,"Generator"),u(m,o,(function(){return this})),u(m,"toString",(function(){return"[object Generator]"})),t.keys=function(t){var e=[];for(var r in t)e.push(r);return e.reverse(),function r(){for(;e.length;){var n=e.pop();if(n in t)return r.value=n,r.done=!1,r}return r.done=!0,r}},t.values=x,S.prototype={constructor:S,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(O),!t)for(var e in this)"t"===e.charAt(0)&&r.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function n(r,n){return a.type="throw",a.arg=t,e.next=r,n&&(e.method="next",e.arg=void 0),!!n}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],a=i.completion;if("root"===i.tryLoc)return n("end");if(i.tryLoc<=this.prev){var u=r.call(i,"catchLoc"),c=r.call(i,"finallyLoc");if(u&&c){if(this.prev<i.catchLoc)return n(i.catchLoc,!0);if(this.prev<i.finallyLoc)return n(i.finallyLoc)}else if(u){if(this.prev<i.catchLoc)return n(i.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return n(i.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,f):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),f},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),O(r),f}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;O(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,r){return this.delegate={iterator:x(t),resultName:e,nextLoc:r},"next"===this.method&&(this.arg=void 0),f}},t}function ya(t,e,r,n,o,i,a){try{var u=t[i](a),c=u.value}catch(t){return void r(t)}u.done?e(c):Promise.resolve(c).then(n,o)}var da=function(t){var e=t.dispatch,r=(0,sa.Z)(e);return function(){var t,n=(t=pa().mark((function t(n){var o,i,a=arguments;return pa().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return o=a.length>1&&void 0!==a[1]&&a[1],t.next=3,fa(n);case 3:return i=t.sent,o?r({bitmapQueue:[i],dither:!1,contrastBaseValues:[0,85,170,255]}):e({type:c.Vo,payload:i}),t.abrupt("return",!0);case 6:case"end":return t.stop()}}),t)})),function(){var e=this,r=arguments;return new Promise((function(n,o){var i=t.apply(e,r);function a(t){ya(i,n,o,a,u,"next",t)}function u(t){ya(i,n,o,a,u,"throw",t)}a(void 0)}))});return function(t){return n.apply(this,arguments)}}()},va=(r(82772),r(91058),function(t){var e=t.split("\n").map((function(t){return t.trim()})).filter((function(t){return t.length&&0!==t.indexOf("//")&&0!==t.indexOf("/*")})).map((function(t){return t.split(" ")})).flat().map((function(t){return parseInt(t,16)}));return(0,na.parsePackets)(e).then(na.getImageDataStream).then(na.decompressDataStream).then(na.decodePrintCommands).then(na.harmonizePalettes).then(na.transformToClassic)}),ma="NEW_LINES",ga="IMAGE_COMPLETE",ba=function(t){if("#"===t.charAt(0)||"/"===t.charAt(0))return null;if("!"===t.charAt(0)||"{"===t.charAt(0)){try{var e=JSON.parse(t.slice(t.indexOf("{")).trim()),r=e.command,n=e.margin_lower;if("PRNT"===r&&n>0)return{type:ga}}catch(t){return{type:"PARSE_ERROR",payload:"Error while trying to parse JSON data command block"}}return null}var o=t.replace(/[^0-9A-F]/gi,"");return o.length?{type:ma,payload:[o]}:null},wa=r(15177),Ea=r(25108);function Oa(t){return function(t){if(Array.isArray(t))return Sa(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||function(t,e){if(!t)return;if("string"==typeof t)return Sa(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);"Object"===r&&t.constructor&&(r=t.constructor.name);if("Map"===r||"Set"===r)return Array.from(t);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Sa(t,e)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Sa(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}var xa=function(t,e){var r=[],n="".concat(t,"\n").concat(wa.oU).split("\n").map(ba).filter(Boolean).map((function(t){var e;switch(t.type){case ma:return(e=r).push.apply(e,Oa(t.payload)),null;case ga:var n=r.filter(Boolean);return r=[],!!n.length&&n;default:return null}})).filter(Boolean);return n.length||Ea.warn("File ".concat(e," did not contain images")),Promise.resolve(n)};function La(t){return La="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},La(t)}function Aa(){Aa=function(){return t};var t={},e=Object.prototype,r=e.hasOwnProperty,n="function"==typeof Symbol?Symbol:{},o=n.iterator||"@@iterator",i=n.asyncIterator||"@@asyncIterator",a=n.toStringTag||"@@toStringTag";function u(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{u({},"")}catch(t){u=function(t,e,r){return t[e]=r}}function c(t,e,r,n){var o=e&&e.prototype instanceof s?e:s,i=Object.create(o.prototype),a=new S(n||[]);return i._invoke=function(t,e,r){var n="suspendedStart";return function(o,i){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===o)throw i;return L()}for(r.method=o,r.arg=i;;){var a=r.delegate;if(a){var u=w(a,r);if(u){if(u===f)continue;return u}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var c=l(t,e,r);if("normal"===c.type){if(n=r.done?"completed":"suspendedYield",c.arg===f)continue;return{value:c.arg,done:r.done}}"throw"===c.type&&(n="completed",r.method="throw",r.arg=c.arg)}}}(t,r,a),i}function l(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}t.wrap=c;var f={};function s(){}function h(){}function p(){}var y={};u(y,o,(function(){return this}));var d=Object.getPrototypeOf,v=d&&d(d(x([])));v&&v!==e&&r.call(v,o)&&(y=v);var m=p.prototype=s.prototype=Object.create(y);function g(t){["next","throw","return"].forEach((function(e){u(t,e,(function(t){return this._invoke(e,t)}))}))}function b(t,e){function n(o,i,a,u){var c=l(t[o],t,i);if("throw"!==c.type){var f=c.arg,s=f.value;return s&&"object"==La(s)&&r.call(s,"__await")?e.resolve(s.__await).then((function(t){n("next",t,a,u)}),(function(t){n("throw",t,a,u)})):e.resolve(s).then((function(t){f.value=t,a(f)}),(function(t){return n("throw",t,a,u)}))}u(c.arg)}var o;this._invoke=function(t,r){function i(){return new e((function(e,o){n(t,r,e,o)}))}return o=o?o.then(i,i):i()}}function w(t,e){var r=t.iterator[e.method];if(void 0===r){if(e.delegate=null,"throw"===e.method){if(t.iterator.return&&(e.method="return",e.arg=void 0,w(t,e),"throw"===e.method))return f;e.method="throw",e.arg=new TypeError("The iterator does not provide a 'throw' method")}return f}var n=l(r,t.iterator,e.arg);if("throw"===n.type)return e.method="throw",e.arg=n.arg,e.delegate=null,f;var o=n.arg;return o?o.done?(e[t.resultName]=o.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=void 0),e.delegate=null,f):o:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,f)}function E(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function O(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function S(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(E,this),this.reset(!0)}function x(t){if(t){var e=t[o];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var n=-1,i=function e(){for(;++n<t.length;)if(r.call(t,n))return e.value=t[n],e.done=!1,e;return e.value=void 0,e.done=!0,e};return i.next=i}}return{next:L}}function L(){return{value:void 0,done:!0}}return h.prototype=p,u(m,"constructor",p),u(p,"constructor",h),h.displayName=u(p,a,"GeneratorFunction"),t.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===h||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,p):(t.__proto__=p,u(t,a,"GeneratorFunction")),t.prototype=Object.create(m),t},t.awrap=function(t){return{__await:t}},g(b.prototype),u(b.prototype,i,(function(){return this})),t.AsyncIterator=b,t.async=function(e,r,n,o,i){void 0===i&&(i=Promise);var a=new b(c(e,r,n,o),i);return t.isGeneratorFunction(r)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},g(m),u(m,a,"Generator"),u(m,o,(function(){return this})),u(m,"toString",(function(){return"[object Generator]"})),t.keys=function(t){var e=[];for(var r in t)e.push(r);return e.reverse(),function r(){for(;e.length;){var n=e.pop();if(n in t)return r.value=n,r.done=!1,r}return r.done=!0,r}},t.values=x,S.prototype={constructor:S,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(O),!t)for(var e in this)"t"===e.charAt(0)&&r.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function n(r,n){return a.type="throw",a.arg=t,e.next=r,n&&(e.method="next",e.arg=void 0),!!n}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],a=i.completion;if("root"===i.tryLoc)return n("end");if(i.tryLoc<=this.prev){var u=r.call(i,"catchLoc"),c=r.call(i,"finallyLoc");if(u&&c){if(this.prev<i.catchLoc)return n(i.catchLoc,!0);if(this.prev<i.finallyLoc)return n(i.finallyLoc)}else if(u){if(this.prev<i.catchLoc)return n(i.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return n(i.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,f):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),f},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),O(r),f}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;O(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,r){return this.delegate={iterator:x(t),resultName:e,nextLoc:r},"next"===this.method&&(this.arg=void 0),f}},t}function ja(t,e,r,n,o,i,a){try{var u=t[i](a),c=u.value}catch(t){return void r(t)}u.done?e(c):Promise.resolve(c).then(n,o)}function Fa(t){return function(){var e=this,r=arguments;return new Promise((function(n,o){var i=t.apply(e,r);function a(t){ja(i,n,o,a,u,"next",t)}function u(t){ja(i,n,o,a,u,"throw",t)}a(void 0)}))}}var _a=function(t){var e=t.dispatch;return function(){var t=Fa(Aa().mark((function t(r){var n,o;return Aa().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,(0,Sr.Z)(r,"text");case 2:if(-1===(n=t.sent).indexOf('{"command"')){t.next=9;break}return t.next=6,xa(n,r.name);case 6:o=t.sent,t.next=12;break;case 9:return t.next=11,va(n,r.name);case 11:o=t.sent;case 12:return t.next=14,Promise.all(o.map(function(){var t=Fa(Aa().mark((function t(n,i){var a,u,l,f,s;return Aa().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,(0,xr.aj)(n);case 2:return a=t.sent,u=a.dataHash,t.next=6,(0,Lr.jm)(n);case 6:return l=t.sent,f=l.dataHash,s=o.length<2?"":" ".concat((i+1).toString(10).padStart(2,"0")),e({type:c.d3,payload:{fileName:"".concat(r.name).concat(s),imageHash:u,frameHash:f,tiles:n,lastModified:r.lastModified?r.lastModified+i:null,tempId:Math.random().toString(16).split(".").pop()}}),t.abrupt("return",!0);case 11:case"end":return t.stop()}}),t)})));return function(e,r){return t.apply(this,arguments)}}()));case 14:return t.abrupt("return",!0);case 15:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()};function Pa(t){return Pa="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Pa(t)}function Ta(){Ta=function(){return t};var t={},e=Object.prototype,r=e.hasOwnProperty,n="function"==typeof Symbol?Symbol:{},o=n.iterator||"@@iterator",i=n.asyncIterator||"@@asyncIterator",a=n.toStringTag||"@@toStringTag";function u(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{u({},"")}catch(t){u=function(t,e,r){return t[e]=r}}function c(t,e,r,n){var o=e&&e.prototype instanceof s?e:s,i=Object.create(o.prototype),a=new S(n||[]);return i._invoke=function(t,e,r){var n="suspendedStart";return function(o,i){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===o)throw i;return L()}for(r.method=o,r.arg=i;;){var a=r.delegate;if(a){var u=w(a,r);if(u){if(u===f)continue;return u}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var c=l(t,e,r);if("normal"===c.type){if(n=r.done?"completed":"suspendedYield",c.arg===f)continue;return{value:c.arg,done:r.done}}"throw"===c.type&&(n="completed",r.method="throw",r.arg=c.arg)}}}(t,r,a),i}function l(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}t.wrap=c;var f={};function s(){}function h(){}function p(){}var y={};u(y,o,(function(){return this}));var d=Object.getPrototypeOf,v=d&&d(d(x([])));v&&v!==e&&r.call(v,o)&&(y=v);var m=p.prototype=s.prototype=Object.create(y);function g(t){["next","throw","return"].forEach((function(e){u(t,e,(function(t){return this._invoke(e,t)}))}))}function b(t,e){function n(o,i,a,u){var c=l(t[o],t,i);if("throw"!==c.type){var f=c.arg,s=f.value;return s&&"object"==Pa(s)&&r.call(s,"__await")?e.resolve(s.__await).then((function(t){n("next",t,a,u)}),(function(t){n("throw",t,a,u)})):e.resolve(s).then((function(t){f.value=t,a(f)}),(function(t){return n("throw",t,a,u)}))}u(c.arg)}var o;this._invoke=function(t,r){function i(){return new e((function(e,o){n(t,r,e,o)}))}return o=o?o.then(i,i):i()}}function w(t,e){var r=t.iterator[e.method];if(void 0===r){if(e.delegate=null,"throw"===e.method){if(t.iterator.return&&(e.method="return",e.arg=void 0,w(t,e),"throw"===e.method))return f;e.method="throw",e.arg=new TypeError("The iterator does not provide a 'throw' method")}return f}var n=l(r,t.iterator,e.arg);if("throw"===n.type)return e.method="throw",e.arg=n.arg,e.delegate=null,f;var o=n.arg;return o?o.done?(e[t.resultName]=o.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=void 0),e.delegate=null,f):o:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,f)}function E(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function O(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function S(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(E,this),this.reset(!0)}function x(t){if(t){var e=t[o];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var n=-1,i=function e(){for(;++n<t.length;)if(r.call(t,n))return e.value=t[n],e.done=!1,e;return e.value=void 0,e.done=!0,e};return i.next=i}}return{next:L}}function L(){return{value:void 0,done:!0}}return h.prototype=p,u(m,"constructor",p),u(p,"constructor",h),h.displayName=u(p,a,"GeneratorFunction"),t.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===h||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,p):(t.__proto__=p,u(t,a,"GeneratorFunction")),t.prototype=Object.create(m),t},t.awrap=function(t){return{__await:t}},g(b.prototype),u(b.prototype,i,(function(){return this})),t.AsyncIterator=b,t.async=function(e,r,n,o,i){void 0===i&&(i=Promise);var a=new b(c(e,r,n,o),i);return t.isGeneratorFunction(r)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},g(m),u(m,a,"Generator"),u(m,o,(function(){return this})),u(m,"toString",(function(){return"[object Generator]"})),t.keys=function(t){var e=[];for(var r in t)e.push(r);return e.reverse(),function r(){for(;e.length;){var n=e.pop();if(n in t)return r.value=n,r.done=!1,r}return r.done=!0,r}},t.values=x,S.prototype={constructor:S,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(O),!t)for(var e in this)"t"===e.charAt(0)&&r.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function n(r,n){return a.type="throw",a.arg=t,e.next=r,n&&(e.method="next",e.arg=void 0),!!n}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],a=i.completion;if("root"===i.tryLoc)return n("end");if(i.tryLoc<=this.prev){var u=r.call(i,"catchLoc"),c=r.call(i,"finallyLoc");if(u&&c){if(this.prev<i.catchLoc)return n(i.catchLoc,!0);if(this.prev<i.finallyLoc)return n(i.finallyLoc)}else if(u){if(this.prev<i.catchLoc)return n(i.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return n(i.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,f):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),f},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),O(r),f}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;O(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,r){return this.delegate={iterator:x(t),resultName:e,nextLoc:r},"next"===this.method&&(this.arg=void 0),f}},t}function Da(t,e,r,n,o,i,a){try{var u=t[i](a),c=u.value}catch(t){return void r(t)}u.done?e(c):Promise.resolve(c).then(n,o)}var Ia=function(t){var e=t.dispatch;return function(){var t,r=(t=Ta().mark((function t(r){var n,o,i;return Ta().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,(0,Sr.Z)(r,"text");case 2:o=t.sent,i={},t.prev=4,i=JSON.parse(o),t.next=11;break;case 8:throw t.prev=8,t.t0=t.catch(4),new Error("Not a valid .json file");case 11:if(null!==(n=i)&&void 0!==n&&n.state){t.next=13;break}throw new Error("Not a settings .json file");case 13:return e({type:c.uH,payload:i}),t.abrupt("return",!0);case 15:case"end":return t.stop()}}),t,null,[[4,8]])})),function(){var e=this,r=arguments;return new Promise((function(n,o){var i=t.apply(e,r);function a(t){Da(i,n,o,a,u,"next",t)}function u(t){Da(i,n,o,a,u,"throw",t)}a(void 0)}))});return function(t){return r.apply(this,arguments)}}()},ka=function(t){var e=t,r=t.type,n=null,o=!0;if(t.blob&&((e=t.blob).name=t.blobName,r=t.contentType||"application/unknown",n=t.meta,o=void 0!==t.ok?t.ok:o),!o||!e.size)throw new Error("Error in received data:\nFilesize: ".concat(e.size,"\nFilename: ").concat(e.name,"\nContent Type: ").concat(r,"\nMeta: ").concat(JSON.stringify(n),"\nOK: ").concat(o?"yes":"no","\n"));return{file:e,contentType:r,meta:n}};function Na(t){return Na="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Na(t)}function Ga(){Ga=function(){return t};var t={},e=Object.prototype,r=e.hasOwnProperty,n="function"==typeof Symbol?Symbol:{},o=n.iterator||"@@iterator",i=n.asyncIterator||"@@asyncIterator",a=n.toStringTag||"@@toStringTag";function u(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{u({},"")}catch(t){u=function(t,e,r){return t[e]=r}}function c(t,e,r,n){var o=e&&e.prototype instanceof s?e:s,i=Object.create(o.prototype),a=new S(n||[]);return i._invoke=function(t,e,r){var n="suspendedStart";return function(o,i){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===o)throw i;return L()}for(r.method=o,r.arg=i;;){var a=r.delegate;if(a){var u=w(a,r);if(u){if(u===f)continue;return u}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var c=l(t,e,r);if("normal"===c.type){if(n=r.done?"completed":"suspendedYield",c.arg===f)continue;return{value:c.arg,done:r.done}}"throw"===c.type&&(n="completed",r.method="throw",r.arg=c.arg)}}}(t,r,a),i}function l(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}t.wrap=c;var f={};function s(){}function h(){}function p(){}var y={};u(y,o,(function(){return this}));var d=Object.getPrototypeOf,v=d&&d(d(x([])));v&&v!==e&&r.call(v,o)&&(y=v);var m=p.prototype=s.prototype=Object.create(y);function g(t){["next","throw","return"].forEach((function(e){u(t,e,(function(t){return this._invoke(e,t)}))}))}function b(t,e){function n(o,i,a,u){var c=l(t[o],t,i);if("throw"!==c.type){var f=c.arg,s=f.value;return s&&"object"==Na(s)&&r.call(s,"__await")?e.resolve(s.__await).then((function(t){n("next",t,a,u)}),(function(t){n("throw",t,a,u)})):e.resolve(s).then((function(t){f.value=t,a(f)}),(function(t){return n("throw",t,a,u)}))}u(c.arg)}var o;this._invoke=function(t,r){function i(){return new e((function(e,o){n(t,r,e,o)}))}return o=o?o.then(i,i):i()}}function w(t,e){var r=t.iterator[e.method];if(void 0===r){if(e.delegate=null,"throw"===e.method){if(t.iterator.return&&(e.method="return",e.arg=void 0,w(t,e),"throw"===e.method))return f;e.method="throw",e.arg=new TypeError("The iterator does not provide a 'throw' method")}return f}var n=l(r,t.iterator,e.arg);if("throw"===n.type)return e.method="throw",e.arg=n.arg,e.delegate=null,f;var o=n.arg;return o?o.done?(e[t.resultName]=o.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=void 0),e.delegate=null,f):o:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,f)}function E(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function O(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function S(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(E,this),this.reset(!0)}function x(t){if(t){var e=t[o];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var n=-1,i=function e(){for(;++n<t.length;)if(r.call(t,n))return e.value=t[n],e.done=!1,e;return e.value=void 0,e.done=!0,e};return i.next=i}}return{next:L}}function L(){return{value:void 0,done:!0}}return h.prototype=p,u(m,"constructor",p),u(p,"constructor",h),h.displayName=u(p,a,"GeneratorFunction"),t.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===h||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,p):(t.__proto__=p,u(t,a,"GeneratorFunction")),t.prototype=Object.create(m),t},t.awrap=function(t){return{__await:t}},g(b.prototype),u(b.prototype,i,(function(){return this})),t.AsyncIterator=b,t.async=function(e,r,n,o,i){void 0===i&&(i=Promise);var a=new b(c(e,r,n,o),i);return t.isGeneratorFunction(r)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},g(m),u(m,a,"Generator"),u(m,o,(function(){return this})),u(m,"toString",(function(){return"[object Generator]"})),t.keys=function(t){var e=[];for(var r in t)e.push(r);return e.reverse(),function r(){for(;e.length;){var n=e.pop();if(n in t)return r.value=n,r.done=!1,r}return r.done=!0,r}},t.values=x,S.prototype={constructor:S,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(O),!t)for(var e in this)"t"===e.charAt(0)&&r.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function n(r,n){return a.type="throw",a.arg=t,e.next=r,n&&(e.method="next",e.arg=void 0),!!n}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],a=i.completion;if("root"===i.tryLoc)return n("end");if(i.tryLoc<=this.prev){var u=r.call(i,"catchLoc"),c=r.call(i,"finallyLoc");if(u&&c){if(this.prev<i.catchLoc)return n(i.catchLoc,!0);if(this.prev<i.finallyLoc)return n(i.finallyLoc)}else if(u){if(this.prev<i.catchLoc)return n(i.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return n(i.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,f):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),f},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),O(r),f}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;O(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,r){return this.delegate={iterator:x(t),resultName:e,nextLoc:r},"next"===this.method&&(this.arg=void 0),f}},t}function Ra(t,e,r,n,o,i,a){try{var u=t[i](a),c=u.value}catch(t){return void r(t)}u.done?e(c):Promise.resolve(c).then(n,o)}var Ca=function(t){var e=Xi(t),r=ra(t),n=_r(t),o=da(t),i=_a(t),a=ca(t),u=Ia(t);return function(){var t,c=(t=Ga().mark((function t(c){var l,f=arguments;return Ga().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return l=(f.length>1&&void 0!==f[1]?f[1]:{fromPrinter:!1}).fromPrinter,t.next=3,Promise.all(c.map((function(t){var c,f,s,h=ka(t),p=h.file,y=h.contentType;if(y&&y.startsWith("image/"))return o(p,l);if(p.size>268435455)throw new Error("File too large");if("text/plain"===y)return i(p);if("application/json"===y)return u(p);if(null!==(c=p.name)&&void 0!==c&&c.toLowerCase().endsWith(".sav")&&(p.size%4096==0||3584===p.size))return e(p,3584===p.size);if((null!==(f=p.name)&&void 0!==f&&f.toLowerCase().endsWith(".gb")||null!==(s=p.name)&&void 0!==s&&s.toLowerCase().endsWith(".gbc"))&&p.size%1048576==0)return r(p);if("application/pico-printer-binary-log"===y)return a(p);if(y.startsWith("application/"))return n(p);throw new Error("Not a dump")})));case 3:case"end":return t.stop()}}),t)})),function(){var e=this,r=arguments;return new Promise((function(n,o){var i=t.apply(e,r);function a(t){Ra(i,n,o,a,u,"next",t)}function u(t){Ra(i,n,o,a,u,"throw",t)}a(void 0)}))});return function(t){return c.apply(this,arguments)}}()};function Ma(t){return Ma="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Ma(t)}function Ba(){Ba=function(){return t};var t={},e=Object.prototype,r=e.hasOwnProperty,n="function"==typeof Symbol?Symbol:{},o=n.iterator||"@@iterator",i=n.asyncIterator||"@@asyncIterator",a=n.toStringTag||"@@toStringTag";function u(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{u({},"")}catch(t){u=function(t,e,r){return t[e]=r}}function c(t,e,r,n){var o=e&&e.prototype instanceof s?e:s,i=Object.create(o.prototype),a=new S(n||[]);return i._invoke=function(t,e,r){var n="suspendedStart";return function(o,i){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===o)throw i;return L()}for(r.method=o,r.arg=i;;){var a=r.delegate;if(a){var u=w(a,r);if(u){if(u===f)continue;return u}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var c=l(t,e,r);if("normal"===c.type){if(n=r.done?"completed":"suspendedYield",c.arg===f)continue;return{value:c.arg,done:r.done}}"throw"===c.type&&(n="completed",r.method="throw",r.arg=c.arg)}}}(t,r,a),i}function l(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}t.wrap=c;var f={};function s(){}function h(){}function p(){}var y={};u(y,o,(function(){return this}));var d=Object.getPrototypeOf,v=d&&d(d(x([])));v&&v!==e&&r.call(v,o)&&(y=v);var m=p.prototype=s.prototype=Object.create(y);function g(t){["next","throw","return"].forEach((function(e){u(t,e,(function(t){return this._invoke(e,t)}))}))}function b(t,e){function n(o,i,a,u){var c=l(t[o],t,i);if("throw"!==c.type){var f=c.arg,s=f.value;return s&&"object"==Ma(s)&&r.call(s,"__await")?e.resolve(s.__await).then((function(t){n("next",t,a,u)}),(function(t){n("throw",t,a,u)})):e.resolve(s).then((function(t){f.value=t,a(f)}),(function(t){return n("throw",t,a,u)}))}u(c.arg)}var o;this._invoke=function(t,r){function i(){return new e((function(e,o){n(t,r,e,o)}))}return o=o?o.then(i,i):i()}}function w(t,e){var r=t.iterator[e.method];if(void 0===r){if(e.delegate=null,"throw"===e.method){if(t.iterator.return&&(e.method="return",e.arg=void 0,w(t,e),"throw"===e.method))return f;e.method="throw",e.arg=new TypeError("The iterator does not provide a 'throw' method")}return f}var n=l(r,t.iterator,e.arg);if("throw"===n.type)return e.method="throw",e.arg=n.arg,e.delegate=null,f;var o=n.arg;return o?o.done?(e[t.resultName]=o.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=void 0),e.delegate=null,f):o:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,f)}function E(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function O(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function S(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(E,this),this.reset(!0)}function x(t){if(t){var e=t[o];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var n=-1,i=function e(){for(;++n<t.length;)if(r.call(t,n))return e.value=t[n],e.done=!1,e;return e.value=void 0,e.done=!0,e};return i.next=i}}return{next:L}}function L(){return{value:void 0,done:!0}}return h.prototype=p,u(m,"constructor",p),u(p,"constructor",h),h.displayName=u(p,a,"GeneratorFunction"),t.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===h||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,p):(t.__proto__=p,u(t,a,"GeneratorFunction")),t.prototype=Object.create(m),t},t.awrap=function(t){return{__await:t}},g(b.prototype),u(b.prototype,i,(function(){return this})),t.AsyncIterator=b,t.async=function(e,r,n,o,i){void 0===i&&(i=Promise);var a=new b(c(e,r,n,o),i);return t.isGeneratorFunction(r)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},g(m),u(m,a,"Generator"),u(m,o,(function(){return this})),u(m,"toString",(function(){return"[object Generator]"})),t.keys=function(t){var e=[];for(var r in t)e.push(r);return e.reverse(),function r(){for(;e.length;){var n=e.pop();if(n in t)return r.value=n,r.done=!1,r}return r.done=!0,r}},t.values=x,S.prototype={constructor:S,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(O),!t)for(var e in this)"t"===e.charAt(0)&&r.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function n(r,n){return a.type="throw",a.arg=t,e.next=r,n&&(e.method="next",e.arg=void 0),!!n}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],a=i.completion;if("root"===i.tryLoc)return n("end");if(i.tryLoc<=this.prev){var u=r.call(i,"catchLoc"),c=r.call(i,"finallyLoc");if(u&&c){if(this.prev<i.catchLoc)return n(i.catchLoc,!0);if(this.prev<i.finallyLoc)return n(i.finallyLoc)}else if(u){if(this.prev<i.catchLoc)return n(i.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return n(i.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,f):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),f},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),O(r),f}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;O(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,r){return this.delegate={iterator:x(t),resultName:e,nextLoc:r},"next"===this.method&&(this.arg=void 0),f}},t}function Ua(t){return function(t){if(Array.isArray(t))return Va(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||function(t,e){if(!t)return;if("string"==typeof t)return Va(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);"Object"===r&&t.constructor&&(r=t.constructor.name);if("Map"===r||"Set"===r)return Array.from(t);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Va(t,e)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Va(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function Ha(t,e,r,n,o,i,a){try{var u=t[i](a),c=u.value}catch(t){return void r(t)}u.done?e(c):Promise.resolve(c).then(n,o)}var Za=function(t){var e,r=document.querySelector("#app"),n=Ca(t),o=!1;return r.addEventListener("dragover",(function(r){r.preventDefault(),o||t.dispatch({type:c.xo}),window.clearTimeout(e),o=!0,e=window.setTimeout((function(){o=!1,t.dispatch({type:c.es})}),250)})),r.addEventListener("drop",function(){var e,r=(e=Ba().mark((function e(r){var o;return Ba().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r.preventDefault(),o=r.dataTransfer.items?Ua(r.dataTransfer.items).filter((function(t){return"file"===t.kind})).map((function(t){return t.getAsFile()})):Ua(r.dataTransfer.files),e.prev=2,e.next=5,n(o);case 5:e.next=10;break;case 7:e.prev=7,e.t0=e.catch(2),t.dispatch({type:c.pn,payload:e.t0.message});case 10:case"end":return e.stop()}}),e,null,[[2,7]])})),function(){var t=this,r=arguments;return new Promise((function(n,o){var i=e.apply(t,r);function a(t){Ha(i,n,o,a,u,"next",t)}function u(t){Ha(i,n,o,a,u,"throw",t)}a(void 0)}))});return function(t){return r.apply(this,arguments)}}()),function(t){return function(e){t(e)}}},Ya=function(t){var e=null;return function(n){return function(o){n(o);var i=t.getState().gitStorage,a=i.use,u=i.owner,l=i.repo,f=i.branch,s=i.token;a&&u&&l&&f&&s&&(o.type===c.Ik||o.type===c.eP&&"git"===o.payload.storageType)&&(e?e(o):Promise.all([r.e(555),r.e(340)]).then(r.bind(r,59206)).then((function(r){var n=r.init,i=r.middleware;n(t),(e=i(t))(o)})))}}},$a=function(){return function(t){return function(e){e.type===c.pn&&alert(e.payload),t(e)}}};function za(t){return za="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},za(t)}function Ja(){Ja=function(){return t};var t={},e=Object.prototype,r=e.hasOwnProperty,n="function"==typeof Symbol?Symbol:{},o=n.iterator||"@@iterator",i=n.asyncIterator||"@@asyncIterator",a=n.toStringTag||"@@toStringTag";function u(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{u({},"")}catch(t){u=function(t,e,r){return t[e]=r}}function c(t,e,r,n){var o=e&&e.prototype instanceof s?e:s,i=Object.create(o.prototype),a=new S(n||[]);return i._invoke=function(t,e,r){var n="suspendedStart";return function(o,i){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===o)throw i;return L()}for(r.method=o,r.arg=i;;){var a=r.delegate;if(a){var u=w(a,r);if(u){if(u===f)continue;return u}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var c=l(t,e,r);if("normal"===c.type){if(n=r.done?"completed":"suspendedYield",c.arg===f)continue;return{value:c.arg,done:r.done}}"throw"===c.type&&(n="completed",r.method="throw",r.arg=c.arg)}}}(t,r,a),i}function l(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}t.wrap=c;var f={};function s(){}function h(){}function p(){}var y={};u(y,o,(function(){return this}));var d=Object.getPrototypeOf,v=d&&d(d(x([])));v&&v!==e&&r.call(v,o)&&(y=v);var m=p.prototype=s.prototype=Object.create(y);function g(t){["next","throw","return"].forEach((function(e){u(t,e,(function(t){return this._invoke(e,t)}))}))}function b(t,e){function n(o,i,a,u){var c=l(t[o],t,i);if("throw"!==c.type){var f=c.arg,s=f.value;return s&&"object"==za(s)&&r.call(s,"__await")?e.resolve(s.__await).then((function(t){n("next",t,a,u)}),(function(t){n("throw",t,a,u)})):e.resolve(s).then((function(t){f.value=t,a(f)}),(function(t){return n("throw",t,a,u)}))}u(c.arg)}var o;this._invoke=function(t,r){function i(){return new e((function(e,o){n(t,r,e,o)}))}return o=o?o.then(i,i):i()}}function w(t,e){var r=t.iterator[e.method];if(void 0===r){if(e.delegate=null,"throw"===e.method){if(t.iterator.return&&(e.method="return",e.arg=void 0,w(t,e),"throw"===e.method))return f;e.method="throw",e.arg=new TypeError("The iterator does not provide a 'throw' method")}return f}var n=l(r,t.iterator,e.arg);if("throw"===n.type)return e.method="throw",e.arg=n.arg,e.delegate=null,f;var o=n.arg;return o?o.done?(e[t.resultName]=o.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=void 0),e.delegate=null,f):o:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,f)}function E(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function O(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function S(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(E,this),this.reset(!0)}function x(t){if(t){var e=t[o];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var n=-1,i=function e(){for(;++n<t.length;)if(r.call(t,n))return e.value=t[n],e.done=!1,e;return e.value=void 0,e.done=!0,e};return i.next=i}}return{next:L}}function L(){return{value:void 0,done:!0}}return h.prototype=p,u(m,"constructor",p),u(p,"constructor",h),h.displayName=u(p,a,"GeneratorFunction"),t.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===h||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,p):(t.__proto__=p,u(t,a,"GeneratorFunction")),t.prototype=Object.create(m),t},t.awrap=function(t){return{__await:t}},g(b.prototype),u(b.prototype,i,(function(){return this})),t.AsyncIterator=b,t.async=function(e,r,n,o,i){void 0===i&&(i=Promise);var a=new b(c(e,r,n,o),i);return t.isGeneratorFunction(r)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},g(m),u(m,a,"Generator"),u(m,o,(function(){return this})),u(m,"toString",(function(){return"[object Generator]"})),t.keys=function(t){var e=[];for(var r in t)e.push(r);return e.reverse(),function r(){for(;e.length;){var n=e.pop();if(n in t)return r.value=n,r.done=!1,r}return r.done=!0,r}},t.values=x,S.prototype={constructor:S,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(O),!t)for(var e in this)"t"===e.charAt(0)&&r.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function n(r,n){return a.type="throw",a.arg=t,e.next=r,n&&(e.method="next",e.arg=void 0),!!n}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],a=i.completion;if("root"===i.tryLoc)return n("end");if(i.tryLoc<=this.prev){var u=r.call(i,"catchLoc"),c=r.call(i,"finallyLoc");if(u&&c){if(this.prev<i.catchLoc)return n(i.catchLoc,!0);if(this.prev<i.finallyLoc)return n(i.finallyLoc)}else if(u){if(this.prev<i.catchLoc)return n(i.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return n(i.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,f):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),f},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),O(r),f}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;O(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,r){return this.delegate={iterator:x(t),resultName:e,nextLoc:r},"next"===this.method&&(this.arg=void 0),f}},t}function Wa(t){return function(t){if(Array.isArray(t))return Xa(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||function(t,e){if(!t)return;if("string"==typeof t)return Xa(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);"Object"===r&&t.constructor&&(r=t.constructor.name);if("Map"===r||"Set"===r)return Array.from(t);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Xa(t,e)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Xa(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function Ka(t,e,r,n,o,i,a){try{var u=t[i](a),c=u.value}catch(t){return void r(t)}u.done?e(c):Promise.resolve(c).then(n,o)}var qa=function(t){var e=Ca(t);return function(r){return function(n){if(n.type!==c.uD)r(n);else if(n.payload.files&&n.payload.files.length){var o=function(){var r,o=(r=Ja().mark((function r(){return Ja().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.prev=0,r.next=3,e(Wa(n.payload.files),{fromPrinter:n.payload.fromPrinter||!1});case 3:r.next=8;break;case 5:r.prev=5,r.t0=r.catch(0),t.dispatch({type:c.pn,payload:r.t0.message});case 8:case"end":return r.stop()}}),r,null,[[0,5]])})),function(){var t=this,e=arguments;return new Promise((function(n,o){var i=r.apply(t,e);function a(t){Ka(i,n,o,a,u,"next",t)}function u(t){Ka(i,n,o,a,u,"throw",t)}a(void 0)}))});return function(){return o.apply(this,arguments)}}();o()}}}};r(60285),r(41637);function Qa(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function tu(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?Qa(Object(r),!0).forEach((function(e){eu(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):Qa(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function eu(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function ru(t){return function(t){if(Array.isArray(t))return nu(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||function(t,e){if(!t)return;if("string"==typeof t)return nu(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);"Object"===r&&t.constructor&&(r=t.constructor.name);if("Map"===r||"Set"===r)return Array.from(t);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return nu(t,e)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function nu(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}var ou=function(t){var e=null,n=null;return window.addEventListener("message",(function(r){var o,i=t.getState().printerUrl;try{o=new URL(i).origin}catch(t){o=new URL(window.location.href).origin}if(r.origin===o){var a=r.data.fromRemotePrinter,u=(a=void 0===a?{}:a).lines,l=a.progress,f=a.blob,s=a.blobsdone,h=a.commands,p=a.printerData,y=r.source;if(h&&(e&&JSON.stringify(h)===JSON.stringify(t.getState().printerFunctions)||t.dispatch({type:c.or,payload:h}),n=y,window.clearTimeout(e),e=window.setTimeout((function(){e=null,n=null,t.dispatch({type:c.od})}),1500)),u){var d;try{d=new File(ru(u.join("\n")),"Text input.txt",{type:"text/plain"})}catch(t){d=new Blob(ru(u.join("\n")),{type:"text/plain"})}t.dispatch({type:c.uD,payload:{files:[d]}})}if(void 0!==l&&t.dispatch({type:c.pQ,payload:l}),f&&t.dispatch({type:c.uD,payload:{files:[f]}}),s){if("string"==typeof s[0])return void window.setTimeout((function(){alert("You should update the web-app to a version > 1.16.0 on your printer for an optimized import experience :-)")}),200);var v=s.filter((function(t){return t.blob&&t.ok})),m=v.map((function(t,e){var r=v.length>1?(e+1).toString(10).padStart(2,"0"):"";return tu(tu({},t),{},{blobName:"Printer ".concat(r).trim()})}));v.length?t.dispatch({type:c.uD,payload:{files:m,fromPrinter:!0}}):t.dispatch({type:c.jH,payload:{message:"No valid files received from WiFi-Printer",confirm:function(){t.dispatch({type:c.Gp}),t.dispatch({type:c.Jx})}}})}p&&t.dispatch({type:c.fX,payload:p})}})),function(e){return function(o){if(o.type===c.ug){var i,a=t.getState(),u="fetchImages"===o.payload?{dumps:null===(i=a.printerData)||void 0===i?void 0:i.dumps}:void 0;r.e(705).then(r.t.bind(r,40705,23)).then((function(){r.e(591).then(r.t.bind(r,99591,23)).then((function(){n.postMessage({toRemotePrinter:{command:o.payload,params:u}},"*")}))}))}e(o)}}},iu=r(10577),au=r.n(iu),uu=function(t){return window.addEventListener("resize",(function(){t.dispatch({type:c.rU,payload:{height:window.innerHeight,width:window.innerWidth}})})),au().isEnabled&&au().on("change",(function(){t.dispatch({type:c.Yx,payload:!!au().element})})),document.addEventListener("keydown",(function(e){if(null!==t.getState().lightboxImage)switch(e.key){case"Esc":case"Escape":t.dispatch({type:c.vR,payload:null}),e.preventDefault();break;case"Right":case"ArrowRight":t.dispatch({type:c.BH}),e.preventDefault();break;case"Left":case"ArrowLeft":t.dispatch({type:c.$$}),e.preventDefault()}})),function(e){return function(r){var n=t.getState();switch(r.type){case c.BH:if(null===n.lightboxImage)return;return void t.dispatch({type:c.vR,payload:Math.min(n.lightboxImage+1,n.images.length-1)});case c.$$:if(null===n.lightboxImage)return;return void t.dispatch({type:c.vR,payload:Math.max(n.lightboxImage-1,0)});case c.CQ:au().isEnabled&&(au().element?au().exit():au().request(document.querySelector("body")));break;case c.vR:au().isEnabled&&!r.payload&&au().element&&au().exit();break;case c.Tq:t.dispatch({type:c.vR,payload:(0,er.Z)(n).findIndex((function(t){return t.hash===r.payload}))})}e(r)}}},cu=r(44936),lu=r.n(cu),fu=r(25108),su=function(t){var e={},r=new(lu())(1,1/0),n=function(e){t.dispatch({type:c.fc,payload:e%1})},o=function(e){var r=t.getState(),n=r.handleExportFrame,o=r.images.find((function(t){return t.hash===e})),i=(0,Ve.Z)(r,o),a=function(){return(0,Ue.Z)(r)(o)};o.isRGBN=!!o.hashes;return{getMeta:function(){return Promise.resolve(o)},getPalette:function(){return Promise.resolve(i)},getTiles:a,getCanvas:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.scaleFactor,r=void 0===e?1:e,u=t.palette,c=void 0===u?i:u,l=t.lockFrame,f=void 0===l?o.lockFrame||!1:l,s=t.invertPalette,h=void 0===s?o.invertPalette||!1:s,p=t.handleExportFrame,y=void 0===p?n:p;return a().then((function(t){var e=o.isRGBN?new He.Z:new Ze.Z;o.isRGBN?e.update({tiles:He.Z.rgbnTiles(t),palette:c,lockFrame:f}):e.update({tiles:t,palette:c.palette,lockFrame:f,invertPalette:h});var n=e.getScaledCanvas(r,y),i=document.createElement("canvas");return(0,$e.Z)(n,i,o.rotation),i}))}}},i=function(i){var a=t.getState().plugins.find((function(t){var e=t.url;return i.url===e}))||{},u=a.config,l=void 0===u?{}:u,f=i.url;return r.add((function(){return new Promise((function(r){window.gbpwRegisterPlugin=function(i){window.gbpwRegisterPlugin=function(){};try{var a=new i({saveAs:Ce.saveAs,progress:n,store:t,collectImageData:o},l),u=a.name,s=a.description,h=void 0===s?"":s,p=a.configParams,y=void 0===p?{}:p,d=a.config,v=void 0===d?{}:d;e[f]=a,t.dispatch({type:c.rc,payload:{url:f,name:u,description:h,configParams:y,config:v,loading:!1,error:!1}}),r(!0)}catch(e){t.dispatch({type:c.rc,payload:{url:f,loading:!1,error:e.message}}),r(!1)}};var i=document.createElement("script");document.head.appendChild(i),i.addEventListener("error",(function(){window.gbpwRegisterPlugin=function(){},t.dispatch({type:c.rc,payload:{url:f,loading:!1,error:"Loading error"}}),r(!1)})),i.src=f}))}))};return window.requestAnimationFrame((function(){var e=t.getState().plugins;Promise.all(e.map(i)).then((function(t){fu.log("".concat(t.filter(Boolean).length," plugins initialized"))})).catch((function(t){fu.error(t)}))})),function(r){return function(n){switch(n.type){case c.Ib:var a=n.payload,u=a.url,l=a.hash;e[u].withImage(o(l));break;case c.ui:var f=n.payload.url,s=t.getState().imageSelection;e[f].withSelection(s.map(o));break;case c.PA:var h=n.payload,p=h.url,y=h.config;e[p].setConfig(y);break;case c.gk:i({url:n.payload});break;case c.gH:delete e[n.payload]}r(n)}}};function hu(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function pu(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?hu(Object(r),!0).forEach((function(e){yu(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):hu(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function yu(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}var du=function(t){return["#",Math.ceil(Math.random()*t).toString(16).padStart(2,"0"),Math.ceil(Math.random()*t).toString(16).padStart(2,"0"),Math.ceil(Math.random()*t).toString(16).padStart(2,"0")].join("")},vu=function(t,e,r,n){var o=r===G.VP?{name:"",shortName:G.VP,palette:[du(255),du(170),du(102),du(34)],origin:"Selfmade"}:e.find((function(t){return t.shortName===r}));t({type:c.iF,payload:pu(pu({},o),{},{name:n?"Copy of ".concat(o.name):o.name,shortName:n?G.VP:r})})},mu=function(t){return document.addEventListener("keydown",(function(e){if("Enter"===e.key&&e.ctrlKey&&t.getState().editPalette.hash){var r=t.getState();t.dispatch({type:c.GY}),r.editPalette&&e.preventDefault()}})),function(e){return function(r){switch(r.type){case c.GY:return n=t.dispatch,o=t.getState(),void n({type:c.$e,payload:pu(pu({},o.editPalette),{},{tags:(0,rr.Z)(o.editPalette.tags)})});case c.Tc:return void vu(t.dispatch,t.getState().palettes,r.payload,!1);case c.y3:return void vu(t.dispatch,t.getState().palettes,r.payload,!0)}var n,o;e(r)}}};function gu(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function bu(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?gu(Object(r),!0).forEach((function(e){wu(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):gu(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function wu(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}var Eu=function(t){return function(e){return function(n){if(n.type===c.Fy){var o=t.getState();r.e(705).then(r.t.bind(r,40705,23)).then((function(e){var r=e.default,n={palette:wa.q1,hashes:bu({},o.rgbnImages),hash:r(o.rgbnImages),created:Ct()().format(wa.vc),title:"",tags:[]};t.dispatch({type:c.Dt,payload:[n]})}))}e(n)}}},Ou=(r(4723),r(98642)),Su=r(28443),xu=r.n(Su),Lu=r(24022),Au=r(59833);function ju(t){return ju="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},ju(t)}function Fu(){Fu=function(){return t};var t={},e=Object.prototype,r=e.hasOwnProperty,n="function"==typeof Symbol?Symbol:{},o=n.iterator||"@@iterator",i=n.asyncIterator||"@@asyncIterator",a=n.toStringTag||"@@toStringTag";function u(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{u({},"")}catch(t){u=function(t,e,r){return t[e]=r}}function c(t,e,r,n){var o=e&&e.prototype instanceof s?e:s,i=Object.create(o.prototype),a=new S(n||[]);return i._invoke=function(t,e,r){var n="suspendedStart";return function(o,i){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===o)throw i;return L()}for(r.method=o,r.arg=i;;){var a=r.delegate;if(a){var u=w(a,r);if(u){if(u===f)continue;return u}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var c=l(t,e,r);if("normal"===c.type){if(n=r.done?"completed":"suspendedYield",c.arg===f)continue;return{value:c.arg,done:r.done}}"throw"===c.type&&(n="completed",r.method="throw",r.arg=c.arg)}}}(t,r,a),i}function l(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}t.wrap=c;var f={};function s(){}function h(){}function p(){}var y={};u(y,o,(function(){return this}));var d=Object.getPrototypeOf,v=d&&d(d(x([])));v&&v!==e&&r.call(v,o)&&(y=v);var m=p.prototype=s.prototype=Object.create(y);function g(t){["next","throw","return"].forEach((function(e){u(t,e,(function(t){return this._invoke(e,t)}))}))}function b(t,e){function n(o,i,a,u){var c=l(t[o],t,i);if("throw"!==c.type){var f=c.arg,s=f.value;return s&&"object"==ju(s)&&r.call(s,"__await")?e.resolve(s.__await).then((function(t){n("next",t,a,u)}),(function(t){n("throw",t,a,u)})):e.resolve(s).then((function(t){f.value=t,a(f)}),(function(t){return n("throw",t,a,u)}))}u(c.arg)}var o;this._invoke=function(t,r){function i(){return new e((function(e,o){n(t,r,e,o)}))}return o=o?o.then(i,i):i()}}function w(t,e){var r=t.iterator[e.method];if(void 0===r){if(e.delegate=null,"throw"===e.method){if(t.iterator.return&&(e.method="return",e.arg=void 0,w(t,e),"throw"===e.method))return f;e.method="throw",e.arg=new TypeError("The iterator does not provide a 'throw' method")}return f}var n=l(r,t.iterator,e.arg);if("throw"===n.type)return e.method="throw",e.arg=n.arg,e.delegate=null,f;var o=n.arg;return o?o.done?(e[t.resultName]=o.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=void 0),e.delegate=null,f):o:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,f)}function E(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function O(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function S(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(E,this),this.reset(!0)}function x(t){if(t){var e=t[o];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var n=-1,i=function e(){for(;++n<t.length;)if(r.call(t,n))return e.value=t[n],e.done=!1,e;return e.value=void 0,e.done=!0,e};return i.next=i}}return{next:L}}function L(){return{value:void 0,done:!0}}return h.prototype=p,u(m,"constructor",p),u(p,"constructor",h),h.displayName=u(p,a,"GeneratorFunction"),t.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===h||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,p):(t.__proto__=p,u(t,a,"GeneratorFunction")),t.prototype=Object.create(m),t},t.awrap=function(t){return{__await:t}},g(b.prototype),u(b.prototype,i,(function(){return this})),t.AsyncIterator=b,t.async=function(e,r,n,o,i){void 0===i&&(i=Promise);var a=new b(c(e,r,n,o),i);return t.isGeneratorFunction(r)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},g(m),u(m,a,"Generator"),u(m,o,(function(){return this})),u(m,"toString",(function(){return"[object Generator]"})),t.keys=function(t){var e=[];for(var r in t)e.push(r);return e.reverse(),function r(){for(;e.length;){var n=e.pop();if(n in t)return r.value=n,r.done=!1,r}return r.done=!0,r}},t.values=x,S.prototype={constructor:S,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(O),!t)for(var e in this)"t"===e.charAt(0)&&r.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function n(r,n){return a.type="throw",a.arg=t,e.next=r,n&&(e.method="next",e.arg=void 0),!!n}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],a=i.completion;if("root"===i.tryLoc)return n("end");if(i.tryLoc<=this.prev){var u=r.call(i,"catchLoc"),c=r.call(i,"finallyLoc");if(u&&c){if(this.prev<i.catchLoc)return n(i.catchLoc,!0);if(this.prev<i.finallyLoc)return n(i.finallyLoc)}else if(u){if(this.prev<i.catchLoc)return n(i.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return n(i.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,f):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),f},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),O(r),f}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;O(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,r){return this.delegate={iterator:x(t),resultName:e,nextLoc:r},"next"===this.method&&(this.arg=void 0),f}},t}function _u(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function Pu(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?_u(Object(r),!0).forEach((function(e){Tu(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):_u(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function Tu(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function Du(t,e,r,n,o,i,a){try{var u=t[i](a),c=u.value}catch(t){return void r(t)}u.done?e(c):Promise.resolve(c).then(n,o)}var Iu=function(){var t,e=(t=Fu().mark((function t(e){return Fu().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(Boolean(e.find((function(t){return!t.hash})))){t.next=3;break}return t.abrupt("return",e);case 3:return t.abrupt("return",r.e(705).then(r.t.bind(r,40705,23)).then((function(t){var r=t.default;return Promise.all(e.map((function(t){return t.hash?t:Au.$0.getItem(t.id).then((function(e){var n=r(e);return Au.$0.removeItem(t.id).then((function(){return Au.$0.setItem(n,e)})).then((function(){return Pu(Pu({},t),{},{hash:n})}))}))})))})));case 4:case"end":return t.stop()}}),t)})),function(){var e=this,r=arguments;return new Promise((function(n,o){var i=t.apply(e,r);function a(t){Du(i,n,o,a,u,"next",t)}function u(t){Du(i,n,o,a,u,"throw",t)}a(void 0)}))});return function(t){return e.apply(this,arguments)}}(),ku=Iu,Nu=r(25108);function Gu(t){return Gu="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Gu(t)}function Ru(){Ru=function(){return t};var t={},e=Object.prototype,r=e.hasOwnProperty,n="function"==typeof Symbol?Symbol:{},o=n.iterator||"@@iterator",i=n.asyncIterator||"@@asyncIterator",a=n.toStringTag||"@@toStringTag";function u(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{u({},"")}catch(t){u=function(t,e,r){return t[e]=r}}function c(t,e,r,n){var o=e&&e.prototype instanceof s?e:s,i=Object.create(o.prototype),a=new S(n||[]);return i._invoke=function(t,e,r){var n="suspendedStart";return function(o,i){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===o)throw i;return L()}for(r.method=o,r.arg=i;;){var a=r.delegate;if(a){var u=w(a,r);if(u){if(u===f)continue;return u}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var c=l(t,e,r);if("normal"===c.type){if(n=r.done?"completed":"suspendedYield",c.arg===f)continue;return{value:c.arg,done:r.done}}"throw"===c.type&&(n="completed",r.method="throw",r.arg=c.arg)}}}(t,r,a),i}function l(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}t.wrap=c;var f={};function s(){}function h(){}function p(){}var y={};u(y,o,(function(){return this}));var d=Object.getPrototypeOf,v=d&&d(d(x([])));v&&v!==e&&r.call(v,o)&&(y=v);var m=p.prototype=s.prototype=Object.create(y);function g(t){["next","throw","return"].forEach((function(e){u(t,e,(function(t){return this._invoke(e,t)}))}))}function b(t,e){function n(o,i,a,u){var c=l(t[o],t,i);if("throw"!==c.type){var f=c.arg,s=f.value;return s&&"object"==Gu(s)&&r.call(s,"__await")?e.resolve(s.__await).then((function(t){n("next",t,a,u)}),(function(t){n("throw",t,a,u)})):e.resolve(s).then((function(t){f.value=t,a(f)}),(function(t){return n("throw",t,a,u)}))}u(c.arg)}var o;this._invoke=function(t,r){function i(){return new e((function(e,o){n(t,r,e,o)}))}return o=o?o.then(i,i):i()}}function w(t,e){var r=t.iterator[e.method];if(void 0===r){if(e.delegate=null,"throw"===e.method){if(t.iterator.return&&(e.method="return",e.arg=void 0,w(t,e),"throw"===e.method))return f;e.method="throw",e.arg=new TypeError("The iterator does not provide a 'throw' method")}return f}var n=l(r,t.iterator,e.arg);if("throw"===n.type)return e.method="throw",e.arg=n.arg,e.delegate=null,f;var o=n.arg;return o?o.done?(e[t.resultName]=o.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=void 0),e.delegate=null,f):o:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,f)}function E(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function O(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function S(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(E,this),this.reset(!0)}function x(t){if(t){var e=t[o];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var n=-1,i=function e(){for(;++n<t.length;)if(r.call(t,n))return e.value=t[n],e.done=!1,e;return e.value=void 0,e.done=!0,e};return i.next=i}}return{next:L}}function L(){return{value:void 0,done:!0}}return h.prototype=p,u(m,"constructor",p),u(p,"constructor",h),h.displayName=u(p,a,"GeneratorFunction"),t.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===h||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,p):(t.__proto__=p,u(t,a,"GeneratorFunction")),t.prototype=Object.create(m),t},t.awrap=function(t){return{__await:t}},g(b.prototype),u(b.prototype,i,(function(){return this})),t.AsyncIterator=b,t.async=function(e,r,n,o,i){void 0===i&&(i=Promise);var a=new b(c(e,r,n,o),i);return t.isGeneratorFunction(r)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},g(m),u(m,a,"Generator"),u(m,o,(function(){return this})),u(m,"toString",(function(){return"[object Generator]"})),t.keys=function(t){var e=[];for(var r in t)e.push(r);return e.reverse(),function r(){for(;e.length;){var n=e.pop();if(n in t)return r.value=n,r.done=!1,r}return r.done=!0,r}},t.values=x,S.prototype={constructor:S,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(O),!t)for(var e in this)"t"===e.charAt(0)&&r.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function n(r,n){return a.type="throw",a.arg=t,e.next=r,n&&(e.method="next",e.arg=void 0),!!n}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],a=i.completion;if("root"===i.tryLoc)return n("end");if(i.tryLoc<=this.prev){var u=r.call(i,"catchLoc"),c=r.call(i,"finallyLoc");if(u&&c){if(this.prev<i.catchLoc)return n(i.catchLoc,!0);if(this.prev<i.finallyLoc)return n(i.finallyLoc)}else if(u){if(this.prev<i.catchLoc)return n(i.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return n(i.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,f):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),f},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),O(r),f}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;O(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,r){return this.delegate={iterator:x(t),resultName:e,nextLoc:r},"next"===this.method&&(this.arg=void 0),f}},t}function Cu(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function Mu(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?Cu(Object(r),!0).forEach((function(e){Bu(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):Cu(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function Bu(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function Uu(t,e,r,n,o,i,a){try{var u=t[i](a),c=u.value}catch(t){return void r(t)}u.done?e(c):Promise.resolve(c).then(n,o)}function Vu(t){return function(){var e=this,r=arguments;return new Promise((function(n,o){var i=t.apply(e,r);function a(t){Uu(i,n,o,a,u,"next",t)}function u(t){Uu(i,n,o,a,u,"throw",t)}a(void 0)}))}}var Hu=function(){var t=Vu(Ru().mark((function t(e){var r;return Ru().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(localStorage.getItem("gbp-backup-frames")){t.next=6;break}return t.next=3,Promise.all(e.map(function(){var t=Vu(Ru().mark((function t(e){return Ru().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=Mu,t.t1=Mu({},e),t.t2={},t.next=5,Au.$0.getItem(e.id);case 5:return t.t3=t.sent,t.t4={data:t.t3},t.abrupt("return",(0,t.t0)(t.t1,t.t2,t.t4));case 8:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()));case 3:r=t.sent,localStorage.setItem("gbp-backup-frames",JSON.stringify(r)),Nu.log("Frame backup created",JSON.parse(localStorage.getItem("gbp-backup-frames")));case 6:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),Zu=Hu;function Yu(t){return Yu="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Yu(t)}function $u(){$u=function(){return t};var t={},e=Object.prototype,r=e.hasOwnProperty,n="function"==typeof Symbol?Symbol:{},o=n.iterator||"@@iterator",i=n.asyncIterator||"@@asyncIterator",a=n.toStringTag||"@@toStringTag";function u(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{u({},"")}catch(t){u=function(t,e,r){return t[e]=r}}function c(t,e,r,n){var o=e&&e.prototype instanceof s?e:s,i=Object.create(o.prototype),a=new S(n||[]);return i._invoke=function(t,e,r){var n="suspendedStart";return function(o,i){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===o)throw i;return L()}for(r.method=o,r.arg=i;;){var a=r.delegate;if(a){var u=w(a,r);if(u){if(u===f)continue;return u}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var c=l(t,e,r);if("normal"===c.type){if(n=r.done?"completed":"suspendedYield",c.arg===f)continue;return{value:c.arg,done:r.done}}"throw"===c.type&&(n="completed",r.method="throw",r.arg=c.arg)}}}(t,r,a),i}function l(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}t.wrap=c;var f={};function s(){}function h(){}function p(){}var y={};u(y,o,(function(){return this}));var d=Object.getPrototypeOf,v=d&&d(d(x([])));v&&v!==e&&r.call(v,o)&&(y=v);var m=p.prototype=s.prototype=Object.create(y);function g(t){["next","throw","return"].forEach((function(e){u(t,e,(function(t){return this._invoke(e,t)}))}))}function b(t,e){function n(o,i,a,u){var c=l(t[o],t,i);if("throw"!==c.type){var f=c.arg,s=f.value;return s&&"object"==Yu(s)&&r.call(s,"__await")?e.resolve(s.__await).then((function(t){n("next",t,a,u)}),(function(t){n("throw",t,a,u)})):e.resolve(s).then((function(t){f.value=t,a(f)}),(function(t){return n("throw",t,a,u)}))}u(c.arg)}var o;this._invoke=function(t,r){function i(){return new e((function(e,o){n(t,r,e,o)}))}return o=o?o.then(i,i):i()}}function w(t,e){var r=t.iterator[e.method];if(void 0===r){if(e.delegate=null,"throw"===e.method){if(t.iterator.return&&(e.method="return",e.arg=void 0,w(t,e),"throw"===e.method))return f;e.method="throw",e.arg=new TypeError("The iterator does not provide a 'throw' method")}return f}var n=l(r,t.iterator,e.arg);if("throw"===n.type)return e.method="throw",e.arg=n.arg,e.delegate=null,f;var o=n.arg;return o?o.done?(e[t.resultName]=o.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=void 0),e.delegate=null,f):o:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,f)}function E(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function O(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function S(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(E,this),this.reset(!0)}function x(t){if(t){var e=t[o];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var n=-1,i=function e(){for(;++n<t.length;)if(r.call(t,n))return e.value=t[n],e.done=!1,e;return e.value=void 0,e.done=!0,e};return i.next=i}}return{next:L}}function L(){return{value:void 0,done:!0}}return h.prototype=p,u(m,"constructor",p),u(p,"constructor",h),h.displayName=u(p,a,"GeneratorFunction"),t.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===h||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,p):(t.__proto__=p,u(t,a,"GeneratorFunction")),t.prototype=Object.create(m),t},t.awrap=function(t){return{__await:t}},g(b.prototype),u(b.prototype,i,(function(){return this})),t.AsyncIterator=b,t.async=function(e,r,n,o,i){void 0===i&&(i=Promise);var a=new b(c(e,r,n,o),i);return t.isGeneratorFunction(r)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},g(m),u(m,a,"Generator"),u(m,o,(function(){return this})),u(m,"toString",(function(){return"[object Generator]"})),t.keys=function(t){var e=[];for(var r in t)e.push(r);return e.reverse(),function r(){for(;e.length;){var n=e.pop();if(n in t)return r.value=n,r.done=!1,r}return r.done=!0,r}},t.values=x,S.prototype={constructor:S,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(O),!t)for(var e in this)"t"===e.charAt(0)&&r.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function n(r,n){return a.type="throw",a.arg=t,e.next=r,n&&(e.method="next",e.arg=void 0),!!n}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],a=i.completion;if("root"===i.tryLoc)return n("end");if(i.tryLoc<=this.prev){var u=r.call(i,"catchLoc"),c=r.call(i,"finallyLoc");if(u&&c){if(this.prev<i.catchLoc)return n(i.catchLoc,!0);if(this.prev<i.finallyLoc)return n(i.finallyLoc)}else if(u){if(this.prev<i.catchLoc)return n(i.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return n(i.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,f):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),f},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),O(r),f}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;O(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,r){return this.delegate={iterator:x(t),resultName:e,nextLoc:r},"next"===this.method&&(this.arg=void 0),f}},t}function zu(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function Ju(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?zu(Object(r),!0).forEach((function(e){Wu(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):zu(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function Wu(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function Xu(t){return function(t){if(Array.isArray(t))return Ku(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||function(t,e){if(!t)return;if("string"==typeof t)return Ku(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);"Object"===r&&t.constructor&&(r=t.constructor.name);if("Map"===r||"Set"===r)return Array.from(t);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Ku(t,e)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Ku(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function qu(t,e,r,n,o,i,a){try{var u=t[i](a),c=u.value}catch(t){return void r(t)}u.done?e(c):Promise.resolve(c).then(n,o)}var Qu=function(){var t,e=(t=$u().mark((function t(e){var r,n,o,i,a,u,c,l,f,s,h,p,y,d,v;return $u().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return o=(0,U.Z)("shortName")([].concat(Xu(xu().map((function(t){return Ju(Ju({},t),{},{isPredefined:!0})}))),Xu(e.palettes))),i=o.map((function(t){return t.shortName})),a=e.frames.map((function(t){return t.id})),u=(0,Yt.Z)(e.printerUrl,"http"),c=e.framesMessage,l=i.includes(e.activePalette)?e.activePalette:"bw",f=e.images.map((function(t){return Ju(Ju({},t),{},{created:Ct()(t.created).format(wa.vc)})})).map((function(t){return Ju(Ju({},t),{},{tags:t.tags||[]})})).map((function(t){return t.hashes?t.palette?t.palette.blend?t:Ju(Ju({},t),{},{palette:Ju(Ju({},t.palette),{},{blend:Lu._I.MULTIPLY})}):Ju(Ju({},t),{},{palette:wa.q1}):t.palette?i.includes(t.palette)?t:Ju(Ju({},t),{},{palette:i[0]||"bw"}):null})).filter(Boolean),s=f.map((function(t){return t.hash})),f.forEach((function(t){!t.frame||a.includes(t.frame)||c||(c=1)})),h=Ct()().subtract(6,"hour").unix(),p=e.recentImports.filter((function(t){var e=t.hash,r=t.timestamp;return s.includes(e)&&r>h})),y=e.plugins.map((function(t){return Ju(Ju({},t),{},{loading:!0,error:void 0})})),d=Ju(Ju({},e.syncLastUpdate),{},{dropbox:(null===(r=e.syncLastUpdate)||void 0===r?void 0:r.dropbox)||0,local:(null===(n=e.syncLastUpdate)||void 0===n?void 0:n.local)||0}),t.next=15,Zu(e.frames);case 15:return t.next=17,ku(e.frames);case 17:return v=t.sent,t.abrupt("return",Ju(Ju({},e),{},{frames:v||e.frames,syncLastUpdate:d,images:f,palettes:o,plugins:y,printerUrl:u,framesMessage:c,activePalette:l,recentImports:p}));case 19:case"end":return t.stop()}}),t)})),function(){var e=this,r=arguments;return new Promise((function(n,o){var i=t.apply(e,r);function a(t){qu(i,n,o,a,u,"next",t)}function u(t){qu(i,n,o,a,u,"throw",t)}a(void 0)}))});return function(t){return e.apply(this,arguments)}}(),tc=Qu,ec=r(39324);function rc(t){return function(t){if(Array.isArray(t))return nc(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||function(t,e){if(!t)return;if("string"==typeof t)return nc(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);"Object"===r&&t.constructor&&(r=t.constructor.name);if("Map"===r||"Set"===r)return Array.from(t);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return nc(t,e)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function nc(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function oc(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function ic(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?oc(Object(r),!0).forEach((function(e){ac(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):oc(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function ac(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}var uc=function(t){var e=(0,U.Z)(t);return function(r,n){var o=n.map((function(e){var n=r.find((function(r){return r[t]===e[t]}));return n?ic(ic({},n),e):e}));return e([].concat(rc(o),rc(r)))}},cc=uc("hash"),lc=uc("id"),fc=uc("shortName"),sc=function(t,e,r){var n=t.frames,o=t.images,i=t.palettes;return r?(e.frames&&e.frames.length&&(n=lc(n,e.frames)),e.images&&e.images.length&&(o=cc(o,e.images)),e.palettes&&e.palettes.length&&(i=fc(i,e.palettes))):(n=e.frames||t.frames,o=e.images||t.images,i=e.palettes||t.palettes),ic(ic(ic({},t),e),{},{images:o,frames:n,palettes:i})},hc=function(t,e,r){var n=arguments.length>3&&void 0!==arguments[3]&&arguments[3];Object.keys(r).forEach((function(t){"state"!==t&&(t.match(/^[a-f0-9]{40,}$/gi)?Au.Rt.setItem("".concat(t),r[t]):t.startsWith("frame-")&&Au.$0.setItem("".concat(t.split("frame-").pop()),r[t]))})),tc(sc(e,r.state||{},n)).then((function(e){t({type:c.D5,payload:e})}))},pc=function(t){var e=(0,ec.Z)(t);return function(r){return function(n){switch(n.type){case c.sO:!function(t){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";e(t,{selectedFrameGroup:r}).then((function(e){var n="frames"===t?"frames":[t,r].filter(Boolean).join("_");(0,Ou.L)(null)([{blob:new Blob(new Array(e)),filename:"".concat(n,".json")}])}))}(n.payload,n.selectedFrameGroup);break;case c.uH:hc(t.dispatch,t.getState(),n.payload,!0);break;case c.Gf:case c.yK:hc(t.dispatch,t.getState(),n.payload,!1)}r(n)}}};function yc(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function dc(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?yc(Object(r),!0).forEach((function(e){vc(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):yc(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function vc(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function mc(t){return function(t){if(Array.isArray(t))return gc(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||function(t,e){if(!t)return;if("string"==typeof t)return gc(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);"Object"===r&&t.constructor&&(r=t.constructor.name);if("Map"===r||"Set"===r)return Array.from(t);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return gc(t,e)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function gc(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}var bc=function(t){return function(e){return function(r){if(r.type===c.pr){var n=t.getState(),o=n.images.find((function(t){return t.hash===r.payload})),i=(0,Ve.Z)(n,o),a=mc(n.exportScaleFactors).pop()||4,u=mc(n.exportFileTypes).pop()||"png",l=(0,Ou.j)(dc(dc({},n),{},{exportScaleFactors:[a],exportFileTypes:[u]}));(0,Ue.Z)(n)(o).then(l(i,o)).then((function(t){var e=t[0],r=e.blob,n=e.filename,o=e.title;window.navigator.share&&window.navigator.share({files:[new File([r],n,{type:"image/png",lastModified:new Date})],title:o}).catch((function(){return"¯\\_(ツ)_/¯"}))}))}e(r)}}},wc=r(33761),Ec=function(t){return function(e){return function(r){if(r.type===c.hi||r.type===c.Zo){var n=t.getState(),o=(0,Ou.j)(n);switch(r.type){case c.hi:!function(t,e){return function(r){var n=e.images.find((function(t){return t.hash===r})),o=(0,Ve.Z)(e,n),i=(0,Ye.Z)({image:n,palette:o});return(0,Ue.Z)(e)(n).then(t(o,n)).then((0,wc.Z)(i))}}(o,n)(r.payload);break;case c.Zo:!function(t,e){return function(r){var n=(0,Ye.Z)({altTitle:"gameboy-printer-gallery",useCurrentDate:!0});Promise.all(r.map((function(r){var n=e.images.find((function(t){return t.hash===r})),o=(0,Ve.Z)(e,n);return(0,Ue.Z)(e)(n).then(t(o,n))}))).then((function(t){return t.flat()})).then((0,wc.Z)(n))}}(o,n)(r.payload)}}return e(r)}}},Oc=(0,a.md)(tr,fr,vr,Er,Or,$a,Za,Ya,qa,ou,uu,su,mu,Eu,pc,bc,Ec),Sc=window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__||a.qC,xc=[Oc,(0,a.md)(ke)],Lc=function(t){var e=(0,a.MT)(De,t,Sc.apply(void 0,xc));return window.store=e,e},Ac=r(97377),jc=function(){var t=document.getElementById("app");if(t){var e;try{e=JSON.parse(localStorage.getItem("gbp-web-state"))||{}}catch(t){e={}}"esp8266"===(0,Ac.d)().env&&(e.printerUrl="/");var a=Object.assign(Ie.c,e);Promise.all([r.e(164),r.e(143)]).then(r.bind(r,22185)).then((function(e){var r=e.default;tc(a).then((function(e){localStorage.setItem("gbp-web-state",JSON.stringify(e));try{var a=Lc(e);(0,i.render)(n.createElement(o.zt,{store:a},n.createElement(r,null)),t)}catch(t){document.getElementById("app").innerHTML='<p class="init-error">Error while initializing the app:<br>'.concat(t.message,"<br><small>").concat(t.stack,"</small></p>")}}))}))}}},13629:function(t,e,r){r.d(e,{$$:function(){return u},$e:function(){return y},A8:function(){return de},B4:function(){return Zt},BH:function(){return a},BS:function(){return S},CQ:function(){return c},D5:function(){return Qt},DK:function(){return Nt},DS:function(){return z},DU:function(){return pt},Dr:function(){return M},Dt:function(){return V},Dw:function(){return ye},Fw:function(){return P},Fy:function(){return Jt},GU:function(){return O},GY:function(){return d},Gf:function(){return ct},Gp:function(){return b},Hn:function(){return tt},Ib:function(){return Tt},Ik:function(){return at},Jf:function(){return w},Jx:function(){return Ht},K0:function(){return f},KD:function(){return se},Ki:function(){return lt},LC:function(){return ie},LR:function(){return _},Mx:function(){return D},O:function(){return n},OD:function(){return vt},ON:function(){return rt},Or:function(){return s},PA:function(){return Pt},Pk:function(){return k},Qs:function(){return I},R4:function(){return C},Rb:function(){return ce},Rv:function(){return Et},S1:function(){return H},SK:function(){return U},Sd:function(){return Yt},Tc:function(){return v},Tq:function(){return l},UF:function(){return re},Vo:function(){return oe},WB:function(){return T},WN:function(){return Rt},XB:function(){return Lt},Xb:function(){return zt},YE:function(){return Ct},Yx:function(){return o},Zo:function(){return Kt},ax:function(){return qt},b9:function(){return ut},bD:function(){return xt},bM:function(){return ft},cR:function(){return le},d0:function(){return Gt},d3:function(){return ae},d4:function(){return X},eP:function(){return st},eh:function(){return it},es:function(){return Q},fX:function(){return Vt},fc:function(){return It},fd:function(){return St},gH:function(){return jt},gk:function(){return Ft},hT:function(){return W},hZ:function(){return ue},hi:function(){return Xt},iF:function(){return h},iM:function(){return p},iq:function(){return wt},j6:function(){return bt},jH:function(){return g},jJ:function(){return fe},jN:function(){return E},kr:function(){return x},l3:function(){return he},m9:function(){return J},mW:function(){return G},md:function(){return Z},nD:function(){return pe},nN:function(){return N},oI:function(){return nt},od:function(){return Bt},or:function(){return Ut},ou:function(){return mt},pQ:function(){return kt},pn:function(){return ee},po:function(){return L},pr:function(){return Wt},qJ:function(){return At},qr:function(){return R},rR:function(){return B},rU:function(){return te},rc:function(){return _t},sO:function(){return yt},sS:function(){return ht},sV:function(){return K},u7:function(){return Y},uD:function(){return ne},uH:function(){return dt},ug:function(){return Mt},ui:function(){return Dt},uy:function(){return j},v6:function(){return $},vR:function(){return i},wA:function(){return A},wK:function(){return F},wb:function(){return et},xG:function(){return $t},xo:function(){return q},y0:function(){return Ot},y3:function(){return m},y9:function(){return gt},yK:function(){return ot}});var n="SET_CURRENT_GALLERY_VIEW",o="SET_IS_FULLSCREEN",i="SET_LIGHTBOX_IMAGE_INDEX",a="LIGHTBOX_NEXT",u="LIGHTBOX_PREV",c="LIGHTBOX_FULLSCREEN",l="SET_LIGHTBOX_IMAGE_HASH",f="PALETTE_SET_ACTIVE",s="PALETTE_DELETE",h="SET_EDIT_PALETTE",p="PALETTE_CANCEL_EDIT",y="PALETTE_UPDATE",d="SAVE_EDIT_PALETTE",v="PALETTE_EDIT",m="PALETTE_CLONE",g="CONFIRM_ASK",b="CONFIRM_ANSWERED",w="FRAMES_MESSAGE_SHOW",E="FRAMES_MESSAGE_HIDE",O="ADD_FRAME",S="DELETE_FRAME",x="EDIT_FRAME",L="CANCEL_EDIT_FRAME",A="UPDATE_FRAME",j="NAME_FRAMEGROUP",F="SET_HANDLE_EXPORT_FRAME",_="SET_SAV_FRAME_TYPES",P="UPDATE_EXPORT_FILE_TYPES",T="UPDATE_EXPORT_SCALE_FACTORS",D="SET_HIDE_DATES",I="SET_PREFERRED_LOCALE",k="SET_IMPORT_LAST_SEEN",N="SET_IMPORT_DELETED",G="SET_FORCE_MAGIC_CHECK",R="SET_IMPORT_PAD",C="SET_PAGESIZE",M="SHOW_SERIALS",B="USE_SERIALS",U="SET_DEBUG",V="ADD_IMAGES",H="DELETE_IMAGE",Z="DELETE_IMAGES",Y="EDIT_IMAGE",$="EDIT_IMAGE_SELECTION",z="CANCEL_EDIT_IMAGE",J="UPDATE_IMAGE",W="UPDATE_IMAGES_BATCH",X="IMAGE_FAVOURITE_TAG",K="REHASH_IMAGE",q="IMPORT_DRAGOVER_START",Q="IMPORT_DRAGOVER_END",tt="DROPBOX_LOGOUT",et="SET_DROPBOX_STORAGE",rt="DROPBOX_LOG_ACTION",nt="LAST_UPDATE_DROPBOX_REMOTE",ot="DROPBOX_SETTINGS_IMPORT",it="DROPBOX_START_AUTH",at="SET_GIT_STORAGE",ut="GITSTORAGE_LOG_ACTION",ct="GIT_SETTINGS_IMPORT",lt="STORAGE_SYNC_DONE",ft="STORAGE_DIFF_DONE",st="STORAGE_SYNC_START",ht="STORAGE_SYNC_SELECT",pt="STORAGE_SYNC_CANCEL",yt="JSON_EXPORT",dt="JSON_IMPORT",vt="SET_ACTIVE_TAGS",mt="SET_AVAILABLE_TAGS",gt="SHOW_FILTERS",bt="HIDE_FILTERS",wt="IMAGE_SELECTION_REMOVE",Et="IMAGE_SELECTION_ADD",Ot="IMAGE_SELECTION_SET",St="IMAGE_SELECTION_SHIFTCLICK",xt="SET_SORT_BY",Lt="SHOW_SORT_OPTIONS",At="HIDE_SORT_OPTIONS",jt="PLUGIN_REMOVE",Ft="PLUGIN_ADD",_t="PLUGIN_UPDATE_PROPERTIES",Pt="PLUGIN_UPDATE_CONFIG",Tt="PLUGIN_IMAGE",Dt="PLUGIN_IMAGES",It="EXECUTE_PLUGIN_PROGRESS",kt="PRINTER_PROGRESS",Nt="CREATE_GIF_PROGRESS",Gt="LOG_CLEAR",Rt="SET_PRINTER_PARAMS",Ct="SET_PRINTER_URL",Mt="REMOTE_CALL_FUNCTION",Bt="HEARTBEAT_TIMED_OUT",Ut="PRINTER_FUNCTIONS_RECEIVED",Vt="PRINTER_DATA_RECEIVED",Ht="PRINTER_RESET",Zt="ANIMATE_IMAGES",Yt="UPDATE_RGBN_PART",$t="SET_VIDEO_PARAMS",zt="CANCEL_ANIMATE_IMAGES",Jt="SAVE_RGBN_IMAGE",Wt="SHARE_IMAGE",Xt="START_DOWNLOAD",Kt="DOWNLOAD_SELECTION",qt="BATCH_TASK",Qt="GLOBAL_UPDATE",te="WINDOW_DIMENSIONS",ee="ERROR",re="TRY_RECOVER_IMAGE_DATA",ne="IMPORT_FILES",oe="BITMAPQUEUE_ADD",ie="BITMAPQUEUE_CANCEL",ae="IMPORTQUEUE_ADD",ue="IMPORTQUEUE_ADD_MULTI",ce="IMPORTQUEUE_CANCEL",le="IMPORTQUEUE_CANCEL_ONE",fe="FRAMEQUEUE_ADD",se="FRAMEQUEUE_CANCEL_ONE",he="SHOW_HIDE_TRASH",pe="SET_TRASH_COUNT_FRAMES",ye="SET_TRASH_COUNT_IMAGES",de="UPDATE_TRASH_COUNT"},23860:function(t,e,r){r.d(e,{C:function(){return n},c:function(){return o}});r(89554),r(41539),r(54747);var n=[{key:"printerUrl",saveLocally:!0,saveExport:["settings"],value:""},{key:"printerParams",saveLocally:!0,saveExport:["settings"],value:""},{key:"activePalette",saveLocally:!0,saveExport:["settings","remote"],value:"bw"},{key:"images",saveLocally:!0,saveExport:["selected_images","images","remote"],value:[]},{key:"galleryView",saveLocally:!0,saveExport:["settings"],value:"1x"},{key:"exportScaleFactors",saveLocally:!0,saveExport:["settings","remote"],value:[4]},{key:"exportFileTypes",saveLocally:!0,saveExport:["settings","remote"],value:["png"]},{key:"pageSize",saveLocally:!0,saveExport:["settings"],value:30},{key:"imageSelection",saveLocally:!0,saveExport:["selected_images"],value:[]},{key:"rgbnImages",saveLocally:!0,saveExport:[],value:{}},{key:"editImage",saveLocally:!0,saveExport:[],value:null},{key:"videoParams",saveLocally:!0,saveExport:["settings","remote"],value:{}},{key:"filtersActiveTags",saveLocally:!0,saveExport:[],value:[]},{key:"filtersVisible",saveLocally:!0,saveExport:[],value:!1},{key:"savFrameTypes",saveLocally:!0,saveExport:["settings","remote"],value:"int"},{key:"sortBy",saveLocally:!0,saveExport:["settings","remote"],value:"created_asc"},{key:"handleExportFrame",saveLocally:!0,saveExport:["settings","remote"],value:"keep"},{key:"importLastSeen",saveLocally:!0,saveExport:["settings","remote"],value:!0},{key:"importDeleted",saveLocally:!0,saveExport:["settings","remote"],value:!0},{key:"importPad",saveLocally:!0,saveExport:["settings","remote"],value:!1},{key:"hideDates",saveLocally:!0,saveExport:["settings","remote"],value:!1},{key:"enableDebug",saveLocally:!0,saveExport:["settings"],value:!1},{key:"palettes",saveLocally:!0,saveExport:["palettes","remote"],value:[]},{key:"plugins",saveLocally:!0,saveRemote:!1,saveExport:["settings","remote"],value:[]},{key:"framesMessage",saveLocally:!0,saveExport:["settings","remote"],value:0},{key:"frames",saveLocally:!0,saveExport:["frames","remote","framegroup"],value:[]},{key:"frameGroupNames",saveLocally:!0,saveExport:["frames","remote","framegroup"],value:[]},{key:"recentImports",saveLocally:!0,saveExport:[],value:[]},{key:"gitStorage",saveLocally:!0,saveExport:[],value:{use:!1,owner:"",repo:"",branch:"",token:"",throttle:"330"}},{key:"dropboxStorage",saveLocally:!0,saveExport:[],value:{path:""}},{key:"useSerials",saveLocally:!0,saveExport:[],value:!1},{key:"syncLastUpdate",saveLocally:!0,saveExport:[],value:{dropbox:0,local:0}},{key:"preferredLocale",saveLocally:!0,saveExport:["settings"],value:navigator.language},{key:"bitmapQueue",saveLocally:!1,saveExport:[],value:[]},{key:"importQueue",saveLocally:!1,saveExport:[],value:[]},{key:"frameQueue",saveLocally:!1,saveExport:[],value:[]},{key:"trashCount",saveLocally:!1,saveExport:[],value:{frames:0,images:0,show:!1}},{key:"forceMagicCheck",saveLocally:!0,saveExport:["settings"],value:!0}],o={};n.forEach((function(t){var e=t.key,r=t.value;o[e]=r}))},48766:function(t,e,r){r.d(e,{Dh:function(){return n},R1:function(){return f},TZ:function(){return o},Ul:function(){return l},VP:function(){return s},Vn:function(){return u},ee:function(){return a},oJ:function(){return c},z2:function(){return i}});var n="__filter:untagged__",o="__filter:new__",i="__filter:mono__",a="__filter:rgb__",u="__filter:recent__",c="__filter:favourite__",l="__filter:comments__",f="__filter:username__",s="__new:palette__"},97768:function(t,e,r){r(43290),r(66992),r(39575),r(41539),r(49743),r(92990),r(18927),r(33105),r(35035),r(74345),r(7174),r(32846),r(44731),r(77209),r(96319),r(58867),r(37789),r(33739),r(29368),r(14483),r(12056),r(3462),r(30678),r(27462),r(33824),r(55021),r(12974),r(15016),r(89554),r(54747),r(57327),r(21249),r(92222),r(47042),r(69600),r(91058),r(66528),r(74916),r(15306),r(69070),r(79753),r(82526),r(41817),r(32165),r(78783),r(33948),r(91038),r(68309);var n=r(18417);function o(t){return function(t){if(Array.isArray(t))return i(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||function(t,e){if(!t)return;if("string"==typeof t)return i(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);"Object"===r&&t.constructor&&(r=t.constructor.name);if("Map"===r||"Set"===r)return Array.from(t);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return i(t,e)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function i(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function a(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}var u="FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFF",c=20,l=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.canvas=null,this.tiles=[],this.colors=[],this.rawImageData=[],this.lockFrame=!1,this.invertPalette=!1,this.bwPalette=[16777215,11184810,5592405,0],this.colorData=this.bwPalette,this.blackLine=Array(20).fill(u),this.whiteLine=Array(20).fill("00000000000000000000000000000000"),this.tileIndexIsFramePart=n.Z}var e,r,i;return e=t,r=[{key:"update",value:function(t){var e=this,r=t.canvas,n=void 0===r?null:r,o=t.tiles,i=void 0===o?[]:o,a=t.palette,u=void 0===a?[]:a,c=t.lockFrame,l=void 0!==c&&c,f=t.invertPalette,s=void 0!==f&&f,h=this.setCanvas(n),p=this.setPalette(u,s),y=this.setLockFrame(l);(h||p||y||!this.tiles.length)&&(this.tiles=[]);var d=this.setTiles(i),v=this.getHeight();if(0!==v){if(this.canvas){if(this.canvas.height!==v||!this.rawImageData.length){this.canvas.height=v;var m=new Uint8ClampedArray(160*v*4);this.rawImageData.forEach((function(t,e){m[e]=t})),this.rawImageData=m}d.forEach((function(t){var r=t.index,n=t.newTile;e.renderTile(r,n)})),this.updateCanvas(v)}}else this.canvas.height=0}},{key:"updateCanvas",value:function(t){var e,r=this.canvas.getContext("2d");try{e=new ImageData(this.rawImageData,160,t)}catch(n){e=r.getImageData(0,0,160,t),this.rawImageData.forEach((function(t,r){e.data[r]=t}))}r.putImageData(e,0,0)}},{key:"getScaledCanvas",value:function(t){var e=this,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"keep",n=360===this.tiles.length?r:"keep",o=this.getScaleCanvasSize(n),i=o.initialHeight,a=o.initialWidth,u=o.tilesPerLine,c=document.createElement("canvas"),l=c.getContext("2d");return c.width=a*t,c.height=i*t,this.getExportTiles(n).forEach((function(n,o){e.paintTileScaled(e.decodeTile(n),o,l,t,u,r)})),c}},{key:"getScaleCanvasSize",value:function(t){switch(t){case"keep":return{initialHeight:this.getHeight(),initialWidth:160,tilesPerLine:c};case"crop":return{initialHeight:this.getHeight()-32,initialWidth:128,tilesPerLine:16};case"square_black":case"square_white":case"square_smart":return{initialHeight:this.getHeight()+16,initialWidth:160,tilesPerLine:c};default:throw new Error("unknown export mode ".concat(t))}}},{key:"getExportTiles",value:function(t){var e=this;switch(t){case"keep":return this.tiles;case"crop":return this.tiles.map((function(t,r){return e.tileIndexIsFramePart(r,"keep")?null:t})).filter(Boolean);case"square_black":return[].concat(o(this.blackLine),o(this.tiles),o(this.blackLine));case"square_white":return[].concat(o(this.whiteLine),o(this.tiles),o(this.whiteLine));case"square_smart":return[].concat(o(this.smartTile("first")),o(this.tiles),o(this.smartTile("last")));default:throw new Error("unknown export mode ".concat(t))}}},{key:"smartTile",value:function(t){switch(t){case"first":return this.tiles.slice(0,20).map((function(t){return Array(8).fill(t.slice(0,4)).join("")}));case"last":return this.tiles.slice(340,360).map((function(t){return Array(8).fill(t.slice(28,32)).join("")}));default:return this.blackLine}}},{key:"setCanvas",value:function(t){return this.canvas!==t&&(this.canvas=t,!0)}},{key:"setPalette",value:function(t,e){return(JSON.stringify(this.colors)!==JSON.stringify(t)||this.invertPalette!==e)&&(this.colors=t,this.invertPalette=e,this.colorData=this.colors.map((function(t){return 7!==t.length?null:parseInt(t.substring(1),16)})),!0)}},{key:"setLockFrame",value:function(t){return t!==this.lockFrame&&(this.lockFrame=t,!0)}},{key:"setTiles",value:function(t){var e=this,r=t.map((function(t,r){return t!==e.tiles[r]?{index:r,newTile:t}:null})).filter(Boolean);return this.tiles=t,r}},{key:"renderTile",value:function(t,e){var r=this.decodeTile(e);this.paintTile(r,t)}},{key:"decodeTile",value:function(){for(var t=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:u).replace(/[^0-9A-F]/gi,"").padEnd(32,"f"),e=new Array(16),r=0;r<e.length;r+=1)e[r]=parseInt(t.substr(2*r,2),16);for(var n=new Array(64),o=0;o<8;o+=1)for(var i=0;i<8;i+=1){var a=e[2*o+1]>>7-i&1,c=e[2*o]>>7-i&1;n[8*o+i]=a<<1|c}return n}},{key:"getRGBValue",value:function(t,e,r,n){var o=this.lockFrame&&"crop"!==n&&this.tileIndexIsFramePart(r,n)?this.bwPalette:this.colorData,i=this.invertPalette?o[3-t[e]]:o[t[e]];return{r:(16711680&i)>>16,g:(65280&i)>>8,b:255&i}}},{key:"paintTile",value:function(t,e){for(var r=e%c*8,n=8*Math.floor(e/c),o=0;o<8;o+=1)for(var i=0;i<8;i+=1){var a=4*(r+o+160*(n+i)),u=this.getRGBValue(t,8*i+o,e,"keep");this.rawImageData[a]=u.r,this.rawImageData[a+1]=u.g,this.rawImageData[a+2]=u.b,this.rawImageData[a+3]=255}}},{key:"paintTileScaled",value:function(t,e,r,n,o,i){for(var a=e%o*8*n,u=8*Math.floor(e/o)*n,c=0;c<8;c+=1)for(var l=0;l<8;l+=1){var f=this.getRGBValue(t,8*l+c,e,i);r.fillStyle="rgb(".concat(f.r,", ").concat(f.g,", ").concat(f.b,")"),r.fillRect(a+c*n,u+l*n,n+1,n+1)}}},{key:"getHeight",value:function(){return 8*Math.ceil(this.tiles.length/c)}}],r&&a(e.prototype,r),i&&a(e,i),Object.defineProperty(e,"prototype",{writable:!1}),t}();e.Z=l},24022:function(t,e,r){r.d(e,{Rg:function(){return u},_I:function(){return i},qe:function(){return a}});var n;r(69070);function o(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}var i={NORMAL:"normal",NORMAL_S:"normal_s",LIGHTEN:"lighten",SCREEN:"screen",DODGE:"dodge",DODGE_S:"dodge_s",ADDITION:"addition",DARKEN:"darken",MULTIPLY:"multiply",BURN:"burn",BURN_S:"burn_s",OVERLAY:"overlay",SOFTLIGHT:"softlight",SOFTLIGHT_S:"softlight_s",HARDLIGHT:"hardlight",DIFFERENCE:"difference",SUBTRACT:"subtract",SUBTRACT_S:"subtract_s",GRAIN_EXTRACT:"grainextract",GRAIN_EXTRACT_S:"grainextract_s",GRAIN_MERGE:"grainmerge",DIVIDE:"divide",DIVIDE_S:"divide_s"},a=(o(n={},i.NORMAL,(function(t,e){return t})),o(n,i.LIGHTEN,(function(t,e){return Math.max(e,t)})),o(n,i.SCREEN,(function(t,e){return 1-(1-e)*(1-t)})),o(n,i.DODGE,(function(t,e){return t/(1-e)})),o(n,i.ADDITION,(function(t,e){return e+t})),o(n,i.DARKEN,(function(t,e){return Math.min(e,t)})),o(n,i.MULTIPLY,(function(t,e){return e*t})),o(n,i.BURN,(function(t,e){return 1-(1-t)/e})),o(n,i.OVERLAY,(function(t,e){return t<.5?2*t*e:1-2*(1-e)*(1-t)})),o(n,i.SOFTLIGHT,(function(t,e){return(1-t)*a[i.MULTIPLY](t,e)+t*a[i.SCREEN](t,e)})),o(n,i.DIFFERENCE,(function(t,e){return Math.abs(t-e)})),o(n,i.SUBTRACT,(function(t,e){return t-e})),o(n,i.GRAIN_EXTRACT,(function(t,e){return t-e+.5})),o(n,i.GRAIN_MERGE,(function(t,e){return t+e-.5})),o(n,i.DIVIDE,(function(t,e){return t/e})),o(n,i.NORMAL_S,(function(t,e){return a[i.NORMAL](e,t)})),o(n,i.DODGE_S,(function(t,e){return a[i.DODGE](e,t)})),o(n,i.BURN_S,(function(t,e){return a[i.BURN](e,t)})),o(n,i.HARDLIGHT,(function(t,e){return a[i.OVERLAY](e,t)})),o(n,i.SOFTLIGHT_S,(function(t,e){return a[i.SOFTLIGHT](e,t)})),o(n,i.SUBTRACT_S,(function(t,e){return a[i.SUBTRACT](e,t)})),o(n,i.GRAIN_EXTRACT_S,(function(t,e){return a[i.GRAIN_EXTRACT](e,t)})),o(n,i.DIVIDE_S,(function(t,e){return a[i.DIVIDE](e,t)})),n),u=[{id:i.NORMAL,label:"Normal (ignore neutral layer)"},{id:i.NORMAL_S,label:"Normal ⇵ (only neutral layer)"},{id:i.LIGHTEN,label:"Lighten only"},{id:i.SCREEN,label:"Screen"},{id:i.DODGE,label:"Dodge"},{id:i.DODGE_S,label:"Dodge ⇵"},{id:i.ADDITION,label:"Addition"},{id:i.DARKEN,label:"Darken only"},{id:i.MULTIPLY,label:"Multiply"},{id:i.BURN,label:"Burn"},{id:i.BURN_S,label:"Burn ⇵"},{id:i.OVERLAY,label:"Overlay"},{id:i.SOFTLIGHT,label:"Soft light"},{id:i.SOFTLIGHT_S,label:"Soft light ⇵"},{id:i.HARDLIGHT,label:"Hard light"},{id:i.DIFFERENCE,label:"Difference"},{id:i.SUBTRACT,label:"Subtract"},{id:i.SUBTRACT_S,label:"Subtract ⇵"},{id:i.GRAIN_EXTRACT,label:"Grain extract"},{id:i.GRAIN_EXTRACT_S,label:"Grain extract ⇵"},{id:i.GRAIN_MERGE,label:"Grain merge"},{id:i.DIVIDE,label:"Divide"},{id:i.DIVIDE_S,label:"Divide ⇵"}]},17036:function(t,e,r){r(21249),r(47042),r(69600),r(43290),r(68304),r(24812),r(30489),r(41539),r(12419),r(78011),r(69070),r(74819),r(38880),r(79753),r(82526),r(41817),r(32165),r(66992),r(78783),r(33948),r(68309),r(91038),r(74916);var n=r(97768),o=r(24022);function i(t){return i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},i(t)}function a(t){return function(t){if(Array.isArray(t))return l(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||c(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function u(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null==r)return;var n,o,i=[],a=!0,u=!1;try{for(r=r.call(t);!(a=(n=r.next()).done)&&(i.push(n.value),!e||i.length!==e);a=!0);}catch(t){u=!0,o=t}finally{try{a||null==r.return||r.return()}finally{if(u)throw o}}return i}(t,e)||c(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function c(t,e){if(t){if("string"==typeof t)return l(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?l(t,e):void 0}}function l(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function f(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function s(){return s="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=y(t)););return t}(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(arguments.length<3?t:r):o.value}},s.apply(this,arguments)}function h(t,e){return h=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},h(t,e)}function p(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var r,n=y(t);if(e){var o=y(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(t,e){if(e&&("object"===i(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,r)}}function y(t){return y=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},y(t)}var d=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&h(t,e)}(c,t);var e,r,n,i=p(c);function c(){var t;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,c),(t=i.call(this)).blackLine=c.rgbnTiles([t.blackLine,t.blackLine,t.blackLine,t.blackLine]),t.whiteLine=c.rgbnTiles([t.whiteLine,t.whiteLine,t.whiteLine,t.whiteLine]),t}return e=c,n=[{key:"rgbnTiles",value:function(t){var e=u(t,4),r=e[0],n=e[1],o=e[2],i=e[3],c=Math.max((null==r?void 0:r.length)||0,(null==n?void 0:n.length)||0,(null==o?void 0:o.length)||0,(null==i?void 0:i.length)||0);return a(Array(c)).map((function(t,e){return{r:null==r?void 0:r[e],g:null==n?void 0:n[e],b:null==o?void 0:o[e],n:null==i?void 0:i[e]}}))}}],(r=[{key:"setPalette",value:function(t){return!!t&&JSON.stringify(this.palette)!==JSON.stringify(t)&&(this.palette=t,!0)}},{key:"decodeTile",value:function(t){var e=t.r,r=t.g,n=t.b,o=t.n;return{r:s(y(c.prototype),"decodeTile",this).call(this,e),g:s(y(c.prototype),"decodeTile",this).call(this,r),b:s(y(c.prototype),"decodeTile",this).call(this,n),n:o?s(y(c.prototype),"decodeTile",this).call(this,o):null}}},{key:"getRGBValue",value:function(t,e,r,n){var o=t.r,i=t.g,a=t.b,u=t.n;if(this.lockFrame&&"crop"!==n&&this.tileIndexIsFramePart(r,n)&&u)try{return s(y(c.prototype),"getRGBValue",this).call(this,u,e,r,n)}catch(t){return{r:255*Math.random(),g:255*Math.random(),b:255*Math.random()}}return this.blendColors({r:o[e],g:i[e],b:a[e],n:!!u&&u[e]})}},{key:"smartTile",value:function(t){var e=this;switch(t){case"first":return this.tiles.slice(0,20).map((function(t){return{r:t.r?Array(8).fill(t.r.slice(0,4)).join(""):s(y(c.prototype),"smartTile",e).call(e,null),g:t.g?Array(8).fill(t.g.slice(0,4)).join(""):s(y(c.prototype),"smartTile",e).call(e,null),b:t.b?Array(8).fill(t.b.slice(0,4)).join(""):s(y(c.prototype),"smartTile",e).call(e,null),n:t.n?Array(8).fill(t.n.slice(0,4)).join(""):s(y(c.prototype),"smartTile",e).call(e,null)}}));case"last":return this.tiles.slice(340,360).map((function(t){return{r:t.r?Array(8).fill(t.r.slice(28,32)).join(""):s(y(c.prototype),"smartTile",e).call(e,null),g:t.g?Array(8).fill(t.g.slice(28,32)).join(""):s(y(c.prototype),"smartTile",e).call(e,null),b:t.b?Array(8).fill(t.b.slice(28,32)).join(""):s(y(c.prototype),"smartTile",e).call(e,null),n:t.n?Array(8).fill(t.n.slice(28,32)).join(""):s(y(c.prototype),"smartTile",e).call(e,null)}}));default:return s(y(c.prototype),"smartTile",this).call(this,null)}}},{key:"blendColors",value:function(t){var e=t.r,r=t.g,n=t.b,i=t.n,a={r:this.palette.r[3-e],g:this.palette.g[3-r],b:this.palette.b[3-n]};if(!1===i)return a;var u=this.palette.blend||o._I.MULTIPLY;if(!o.qe[u])return a;var c=function(t,e){return 255*Math.max(0,Math.min(1,o.qe[u](t/255,e/255)))};return{r:c(this.palette.r[3-e],this.palette.n[3-i]),g:c(this.palette.g[3-r],this.palette.n[3-i]),b:c(this.palette.b[3-n],this.palette.n[3-i])}}},{key:"getHeight",value:function(){return 144}}])&&f(e.prototype,r),n&&f(e,n),Object.defineProperty(e,"prototype",{writable:!1}),c}(n.Z);e.Z=d},55140:function(t,e,r){r.d(e,{U:function(){return f},_:function(){return l}});r(21249),r(91058),r(47042);var n=({baseValues:t,orderPatterns:e})=>{const r=[];for(let n=0;n<4;n+=1){const o=[];r.push(o);for(let r=0;r<4;r+=1){const i=[];o.push(i);for(let o=0;o<3;o+=1)i.push(t[o][e[o][4*n+r]])}}return r};const o=[0,12,3,15,8,4,11,7,2,14,1,13,10,6,9,5],i=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];var a=(t,e)=>{const r=(e-t)/16;return new Array(16).fill(null).map(((e,n)=>Math.floor(t+r*n)))};var u=([t,e,r,n])=>[a(t,e),a(e,r),a(r,n)],c=0,l=function(t,e,r,a){for(var l=new ImageData(t.width,t.height),f=n({baseValues:u(e),orderPatterns:[r?o:i,r?o:i,r?o:i]}),s=t.width,h=t.data,p=0;p<h.length;p+=4){var y=c%s%4,d=Math.ceil(c/s)%4,v=h[p],m=void 0,g=f[y][d];m=v<=g[0]?a[3]:v<=g[1]?a[2]:v<=g[2]?a[1]:a[0],l.data[p]=m.r,l.data[p+1]=m.g,l.data[p+2]=m.b,l.data[p+3]=255,c+=1}return l},f=function(t){var e=t.targetCanvas,r=t.originalCanvas,n=t.imageData,o=t.palette,i=t.dither,a=t.contrastBaseValues,u=o.map((function(t){return{r:parseInt(t.slice(1,3),16),g:parseInt(t.slice(3,5),16),b:parseInt(t.slice(5,7),16)}}));e.getContext("2d").putImageData(l(n,a,i,u),0,0),r.getContext("2d").putImageData(n,0,0)}},75500:function(t,e,r){r.d(e,{ez:function(){return p},jm:function(){return h},vJ:function(){return y}});r(47042),r(92222),r(43290),r(66992),r(41539),r(88674),r(78783),r(33948),r(69600),r(21249),r(57327),r(74916),r(15306),r(79753),r(82526),r(41817),r(32165),r(91038),r(68309),r(72443),r(39341),r(73706),r(10408),r(69070),r(78011),r(30489),r(89554),r(54747),r(68304);var n=r(18417),o=r(59833);function i(t){return i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},i(t)}function a(){a=function(){return t};var t={},e=Object.prototype,r=e.hasOwnProperty,n="function"==typeof Symbol?Symbol:{},o=n.iterator||"@@iterator",u=n.asyncIterator||"@@asyncIterator",c=n.toStringTag||"@@toStringTag";function l(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{l({},"")}catch(t){l=function(t,e,r){return t[e]=r}}function f(t,e,r,n){var o=e&&e.prototype instanceof p?e:p,i=Object.create(o.prototype),a=new L(n||[]);return i._invoke=function(t,e,r){var n="suspendedStart";return function(o,i){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===o)throw i;return j()}for(r.method=o,r.arg=i;;){var a=r.delegate;if(a){var u=O(a,r);if(u){if(u===h)continue;return u}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var c=s(t,e,r);if("normal"===c.type){if(n=r.done?"completed":"suspendedYield",c.arg===h)continue;return{value:c.arg,done:r.done}}"throw"===c.type&&(n="completed",r.method="throw",r.arg=c.arg)}}}(t,r,a),i}function s(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}t.wrap=f;var h={};function p(){}function y(){}function d(){}var v={};l(v,o,(function(){return this}));var m=Object.getPrototypeOf,g=m&&m(m(A([])));g&&g!==e&&r.call(g,o)&&(v=g);var b=d.prototype=p.prototype=Object.create(v);function w(t){["next","throw","return"].forEach((function(e){l(t,e,(function(t){return this._invoke(e,t)}))}))}function E(t,e){function n(o,a,u,c){var l=s(t[o],t,a);if("throw"!==l.type){var f=l.arg,h=f.value;return h&&"object"==i(h)&&r.call(h,"__await")?e.resolve(h.__await).then((function(t){n("next",t,u,c)}),(function(t){n("throw",t,u,c)})):e.resolve(h).then((function(t){f.value=t,u(f)}),(function(t){return n("throw",t,u,c)}))}c(l.arg)}var o;this._invoke=function(t,r){function i(){return new e((function(e,o){n(t,r,e,o)}))}return o=o?o.then(i,i):i()}}function O(t,e){var r=t.iterator[e.method];if(void 0===r){if(e.delegate=null,"throw"===e.method){if(t.iterator.return&&(e.method="return",e.arg=void 0,O(t,e),"throw"===e.method))return h;e.method="throw",e.arg=new TypeError("The iterator does not provide a 'throw' method")}return h}var n=s(r,t.iterator,e.arg);if("throw"===n.type)return e.method="throw",e.arg=n.arg,e.delegate=null,h;var o=n.arg;return o?o.done?(e[t.resultName]=o.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=void 0),e.delegate=null,h):o:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,h)}function S(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function x(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function L(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(S,this),this.reset(!0)}function A(t){if(t){var e=t[o];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var n=-1,i=function e(){for(;++n<t.length;)if(r.call(t,n))return e.value=t[n],e.done=!1,e;return e.value=void 0,e.done=!0,e};return i.next=i}}return{next:j}}function j(){return{value:void 0,done:!0}}return y.prototype=d,l(b,"constructor",d),l(d,"constructor",y),y.displayName=l(d,c,"GeneratorFunction"),t.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===y||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,d):(t.__proto__=d,l(t,c,"GeneratorFunction")),t.prototype=Object.create(b),t},t.awrap=function(t){return{__await:t}},w(E.prototype),l(E.prototype,u,(function(){return this})),t.AsyncIterator=E,t.async=function(e,r,n,o,i){void 0===i&&(i=Promise);var a=new E(f(e,r,n,o),i);return t.isGeneratorFunction(r)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},w(b),l(b,c,"Generator"),l(b,o,(function(){return this})),l(b,"toString",(function(){return"[object Generator]"})),t.keys=function(t){var e=[];for(var r in t)e.push(r);return e.reverse(),function r(){for(;e.length;){var n=e.pop();if(n in t)return r.value=n,r.done=!1,r}return r.done=!0,r}},t.values=A,L.prototype={constructor:L,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(x),!t)for(var e in this)"t"===e.charAt(0)&&r.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function n(r,n){return a.type="throw",a.arg=t,e.next=r,n&&(e.method="next",e.arg=void 0),!!n}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],a=i.completion;if("root"===i.tryLoc)return n("end");if(i.tryLoc<=this.prev){var u=r.call(i,"catchLoc"),c=r.call(i,"finallyLoc");if(u&&c){if(this.prev<i.catchLoc)return n(i.catchLoc,!0);if(this.prev<i.finallyLoc)return n(i.finallyLoc)}else if(u){if(this.prev<i.catchLoc)return n(i.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return n(i.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,h):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),h},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),x(r),h}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;x(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,r){return this.delegate={iterator:A(t),resultName:e,nextLoc:r},"next"===this.method&&(this.arg=void 0),h}},t}function u(t,e,r,n,o,i,a){try{var u=t[i](a),c=u.value}catch(t){return void r(t)}u.done?e(c):Promise.resolve(c).then(n,o)}function c(t){return function(){var e=this,r=arguments;return new Promise((function(n,o){var i=t.apply(e,r);function a(t){u(i,n,o,a,c,"next",t)}function c(t){u(i,n,o,a,c,"throw",t)}a(void 0)}))}}function l(t){return function(t){if(Array.isArray(t))return f(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||function(t,e){if(!t)return;if("string"==typeof t)return f(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);"Object"===r&&t.constructor&&(r=t.constructor.name);if("Map"===r||"Set"===r)return Array.from(t);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return f(t,e)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function f(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}var s=function(t){if(t.length>360)return t.slice(0,360);if(t.length<360){var e=t.pop();return[].concat(l(t),l(Array(360-t.length).fill(e)))}return t},h=function(){var t=c(a().mark((function t(e){var o,i,u,c,f,h,p;return a().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,r.e(705).then(r.t.bind(r,40705,23));case 2:return o=t.sent,i=o.default,t.next=6,r.e(591).then(r.t.bind(r,99591,23));case 6:return u=t.sent,c=u.default,f=s(l(e)).filter((function(t,e){return(0,n.Z)(e,"keep")})).map((function(t){return t.replace(/ /gi,"").toUpperCase()})).join("\n"),h=c.deflate(f,{to:"string",strategy:1,level:8}),p=i(h),t.abrupt("return",{dataHash:p,compressed:h});case 12:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),p=function(){var t=c(a().mark((function t(e){var r,n,i;return a().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,h(e);case 2:return r=t.sent,n=r.dataHash,i=r.compressed,t.next=7,o.$0.setItem(n,i);case 7:return t.abrupt("return",n);case 8:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),y=function(t){return t?o.$0.getItem(t).then((function(t){return t?r.e(591).then(r.t.bind(r,99591,23)).then((function(e){var r=e.default;try{var n=r.inflate(t,{to:"string"}).split("\n");return{upper:n.slice(0,40),left:Array(14).fill(0).map((function(t,e){return n.slice(4*e+40,4*e+42)})),right:Array(14).fill(0).map((function(t,e){return n.slice(4*e+42,4*e+44)})),lower:n.slice(96,136)}}catch(t){return null}})):null})):Promise.resolve(null)}},2738:function(t,e,r){r(41539),r(88674),r(89554),r(54747),r(79753),r(82526),r(41817),r(32165),r(66992),r(78783),r(33948),r(91038),r(47042),r(68309),r(74916);var n=r(75500);function o(t){return function(t){if(Array.isArray(t))return i(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||function(t,e){if(!t)return;if("string"==typeof t)return i(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);"Object"===r&&t.constructor&&(r=t.constructor.name);if("Map"===r||"Set"===r)return Array.from(t);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return i(t,e)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function i(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}e.Z=function(t,e){return 360!==t.length?Promise.resolve(t):(0,n.vJ)(e).then((function(e){var r=o(t);return e.upper.forEach((function(t,e){r[e]=t})),e.lower.forEach((function(t,e){r[e+320]=t})),e.left.forEach((function(t,e){r[20*e+40]=t[0],r[20*e+41]=t[1]})),e.right.forEach((function(t,e){r[20*e+58]=t[0],r[20*e+59]=t[1]})),r})).catch((function(){return t}))}},22604:function(t,e){e.Z=function(t,e,r){var n=e.getContext("2d");switch(n.resetTransform(),r%2?(e.height=t.width,e.width=t.height):(e.width=t.width,e.height=t.height),r){case 1:n.translate(t.height,0);break;case 2:n.translate(t.width,t.height);break;case 3:n.translate(0,t.width)}n.rotate(90*r*Math.PI/180),n.drawImage(t,0,0)}},20170:function(t,e,r){r(92222),r(57327),r(41539),r(34553),r(26699),r(32023),r(79753),r(82526),r(41817),r(32165),r(66992),r(78783),r(33948),r(91038),r(47042),r(68309),r(74916);function n(t){return function(t){if(Array.isArray(t))return o(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||function(t,e){if(!t)return;if("string"==typeof t)return o(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);"Object"===r&&t.constructor&&(r=t.constructor.name);if("Map"===r||"Set"===r)return Array.from(t);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return o(t,e)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function o(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}e.Z=function(t){var e=t.initial,r=t.add,o=t.remove,i=[].concat(n(e),n(r));return i.filter((function(t,e){return i.findIndex((function(e){return e===t}))===e})).filter((function(t){return!o.includes(t)}))}},15168:function(t,e,r){r(73210),r(74916),r(4723),r(24603),r(39714),r(92222),r(27852);e.Z=function(t,e){if(!t.trim())return"";if("/"===t&&"ws"!==e)return t;var r=!!t.match(new RegExp("^".concat(e,"(s)?:\\/\\/"),"gi"));return"".concat(r?"":"".concat(e,"://")).concat(t).concat(t.endsWith("/")?"":"/")}},31712:function(t,e){var r={weekday:void 0,year:"numeric",month:"numeric",day:"numeric",hour:"numeric",minute:"numeric"};e.Z=function(t,e){return t.toDate().toLocaleString(e,r)}},33761:function(t,e,r){r.d(e,{Z:function(){return a}});r(66992),r(41539),r(88674),r(78783),r(33948),r(21249),r(89554),r(54747);var n=r(93162),o=function(t){return"function"==typeof t.arrayBuffer?t.arrayBuffer():new Promise((function(e){var r=new FileReader;r.onload=function(t){e(t.target.result)},r.readAsArrayBuffer(t)}))},i=r(93572),a=function(t){return function(e){if(1!==e.length)r.e(733).then(r.t.bind(r,55733,23)).then((function(r){var a=new(0,r.default);Promise.all(e.map((function(t){var e=t.filename,r=t.blob;return o(r).then((function(t){return{filename:e,arrayBuffer:t}}))}))).then(i.Z).then((function(t){t.forEach((function(t){var e=t.uFilename,r=t.arrayBuffer;a.file(e,r)}))})).then((function(){return a.generateAsync({type:"blob",compression:"DEFLATE"}).then((function(e){(0,n.saveAs)(e,"".concat(t,".zip"))}))}))}));else{var a=e[0];(0,n.saveAs)(a.blob,a.filename)}}}},75226:function(t,e,r){r(57327),r(41539),r(21249),r(88674),r(85827),r(69600),r(74916),r(4723),r(92222),r(83112),r(83710),r(39714),r(82772),r(91058),r(47042),r(66992),r(78783),r(33948),r(84944),r(33792),r(79753),r(82526),r(41817),r(32165),r(91038),r(68309);var n=r(97768),o=r(17036),i=r(84040),a=r(30661),u=r(15177),c=r(22604);function l(t){return function(t){if(Array.isArray(t))return f(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||function(t,e){if(!t)return;if("string"==typeof t)return f(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);"Object"===r&&t.constructor&&(r=t.constructor.name);if("Map"===r||"Set"===r)return Array.from(t);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return f(t,e)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function f(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}e.Z=function(t){return function(e,r){return function(f){var s=t.exportScaleFactors,h=t.exportFileTypes,p=t.handleExportFrame,y=!!r.hashes,d=y?new o.Z:new n.Z,v=r.lockFrame||!1,m=r.invertPalette||!1,g=r.rotation||0;y?d.update({tiles:f,palette:e,lockFrame:v}):d.update({tiles:f,palette:e.palette,lockFrame:v,invertPalette:m});var b=l(s).filter((function(t){return"number"==typeof t})),w=l(h);b.length||b.push(4),w.length||w.push("png");var E=b.map((function(t){return w.map((function(n){return new Promise((function(o){var f=(0,i.Z)({image:r,palette:e,exportScaleFactor:t});switch(n){case"txt":if(y)return void o(null);(0,a.zD)(r.hash,null).then((function(t){var e=t.map((function(t){return t.match(/.{1,2}/g).join(" ")})).reduce((function(t,e,r){return[].concat(l(t),r%40?[e]:[u.fb,e])}),[]),i=[u.jU].concat(l(e),[u.T6,u.oU]).join("\n");o({folder:"images",filename:"".concat(f,".").concat(n),blob:new Blob(new Array(i),{type:"text/plain"}),title:r.title})}));break;case"pgm":if(y)return void o(null);var s=d.getScaledCanvas(1,p),h=document.createElement("canvas");(0,c.Z)(s,h,g);for(var v=["P2","#","# Exported from ".concat(window.location.origin),"#","# hash: ".concat(r.hash),"# created: ".concat(r.created),"# title: ".concat(r.title),"# tags: ".concat(r.tags.join(", ")),"# dimension: ".concat(h.width,"*").concat(h.height," pixels"),"#","".concat(h.width," ").concat(h.height),"3","#"],m=h.getContext("2d"),b=0;b<h.height;b+=1){for(var w=[],E=0;E<h.width;E+=1){var O=m.getImageData(E,b,1,1).data,S=["#",O[0].toString(16).padStart(2,"0"),O[1].toString(16).padStart(2,"0"),O[2].toString(16).padStart(2,"0")].join(""),x=e.palette.indexOf(S);-1===x&&(x=d.bwPalette.indexOf(parseInt(S.slice(1),16))),w.push(3-x)}v.push(w.join(" "))}o({filename:"".concat(f,".").concat(n),blob:new Blob([v.join("\n")],{type:"text/plain"}),title:r.title});break;default:var L=d.getScaledCanvas(t,p),A=document.createElement("canvas");(0,c.Z)(L,A,g);A.toBlob((function(t){o({filename:"".concat(f,".").concat(n),blob:t,title:r.title})}),"image/".concat(n),1)}}))}))}));return Promise.all(E.flat()).then((function(t){return t.filter(Boolean)}))}}}},98642:function(t,e,r){r.d(e,{L:function(){return n.Z},j:function(){return o.Z}});var n=r(33761),o=r(75226)},84040:function(t,e,r){r(83112),r(83710),r(41539),r(39714),r(69600),r(21249),r(57327);var n=r(27484),o=r.n(n),i=r(10285),a=r.n(i),u=r(15177);o().extend(a());e.Z=function(t){var e,r,n,i,a,c,l=t.image,f=void 0!==l&&l,s=t.palette,h=void 0!==s&&s,p=t.exportScaleFactor,y=void 0!==p&&p,d=t.frameRate,v=void 0!==d&&d,m=t.altTitle,g=void 0!==m&&m,b=t.useCurrentDate,w=void 0!==b&&b,E=t.frameName,O=void 0!==E&&E,S=t.paletteShort,x=void 0!==S&&S,L=w?o()():o()(f.created,u.vc),A=!!L.isValid()&&L.format(u.z3),j=x||!!h&&(h.shortName||(r=(e=h).r,n=e.g,i=e.b,a=e.n,c=function(t){return t.toString(16).padStart(2,"0")},[r.map(c).join(""),n.map(c).join(""),i.map(c).join(""),a.map(c).join("")].join("")));return[A,f&&f.title?f.title:g,y?"".concat(y,"x"):null,v?"".concat(v,"fps"):null,O,j].filter(Boolean).join("-")}},84413:function(t,e,r){r(57327),r(41539),r(26699),r(32023),r(21249);var n=r(27484),o=r.n(n),i=r(48766),a=r(15177);e.Z=function(t,e){return function(r){var n=t.filter((function(t){return[i.z2,i.TZ,i.ee,i.Dh,i.Vn,i.oJ,i.Ul,i.R1].includes(t)}));if(n.length){var u,c;if(n.includes(i.Dh)&&0!==r.tags.length)return!1;if(n.includes(i.TZ))if(o()(r.created,a.vc).unix()<=o()().subtract("1","day").unix())return!1;return!(n.includes(i.Vn)&&!e.map((function(t){return t.hash})).includes(r.hash))&&(!(n.includes(i.ee)&&!r.hashes)&&((!n.includes(i.z2)||!r.hashes)&&(!(n.includes(i.oJ)&&!r.tags.includes(i.oJ))&&(!(n.includes(i.Ul)&&(null===(u=r.meta)||void 0===u||!u.comment))&&!(n.includes(i.R1)&&(null===(c=r.meta)||void 0===c||!c.userName))))))}return!0}}},87954:function(t,e,r){r(57327),r(41539),r(26699),r(32023),r(69826);var n=r(48766);e.Z=function(t){return function(e){var r=t.filter((function(t){return![n.z2,n.TZ,n.ee,n.Dh,n.Vn,n.oJ,n.Ul,n.R1].includes(t)}));return!r.length||e.tags.find((function(t){return r.includes(t)}))}}},81477:function(t,e,r){r(57327),r(41539),r(21249),r(2707),r(79753),r(82526),r(41817),r(32165),r(66992),r(78783),r(33948),r(91038),r(47042),r(68309),r(74916);var n=r(49965),o=r(84413),i=r(87954);function a(t){return function(t){if(Array.isArray(t))return u(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||function(t,e){if(!t)return;if("string"==typeof t)return u(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);"Object"===r&&t.constructor&&(r=t.constructor.name);if("Map"===r||"Set"===r)return Array.from(t);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return u(t,e)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function u(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}e.Z=function(t){var e=t.images,r=t.filtersActiveTags,u=t.sortBy,c=t.recentImports;return a(e).map(n.Np).sort((0,n.$b)({sortBy:u})).map(n.fD).filter((0,o.Z)(r,c)).filter((0,i.Z)(r))}},88791:function(t,e,r){r(69826),r(41539),r(68309),r(2707),r(85827),r(74916),r(4723);var n=function(t,e,r){var n=r.find((function(e){return e.id===t}));if(n)return n.name;switch(t){case"hk":return"Hallo Katze!";case"int":return"International Frames (GameBoy Camera)";case"jp":return"Japanese Frames (Pocket Camera)";default:return e}},o=function(t){switch(t){case"int":return"_1";case"jp":return"_2";case"hk":return"_3";default:return t}};e.Z=function(t,e){return t.reduce((function(t,r){var o,i=r.id,a=r.name;try{o=i.match(/^[a-z]+/g)[0]}catch(e){return t}return t.find((function(t){return t.id===o}))||t.push({id:o,name:n(o,a,e)}),t}),[]).sort((function(t,e){var r=t.id,n=e.id,i=o(r),a=o(n);return i>a?1:i<a?-1:0}))}},39324:function(t,e,r){r.d(e,{Z:function(){return p}});r(89554),r(41539),r(54747),r(26699),r(32023),r(57327),r(83710),r(88674),r(69070),r(47941),r(82526),r(38880),r(49337),r(33321);var n=r(23860),o=(r(66992),r(78783),r(33948),r(21249),r(59833)),i=function(t){return Promise.all(t.map((function(t){return o.Rt.getItem(t).then((function(e){return{hash:t,data:e}}))}))).then((function(t){var e={};return t.forEach((function(t){var r=t.hash,n=t.data;e[r]=n})),e}))},a=function(t){return Promise.all(t.map((function(t){return o.$0.getItem(t).then((function(e){return{hash:t,data:e}}))}))).then((function(t){var e={};return t.forEach((function(t){var r=t.hash,n=t.data;e["frame-".concat(r)]=n})),e}))},u=function(t,e){var r=e.images,n=e.imageSelection;switch(t){case"images":return r.map((function(t){return t.hash}));case"selected_images":return n;default:return[]}},c=(r(23157),function(t,e){var r=e.frames,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"";switch(t){case"frames":return r.map((function(t){return t.hash}));case"framegroup":return r.filter((function(t){return t.id.startsWith(n)})).map((function(t){return t.hash}));default:return[]}}),l=r(97377);function f(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function s(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?f(Object(r),!0).forEach((function(e){h(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):f(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function h(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}var p=function(t){return function(e){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},o=r.lastUpdateUTC,f=r.selectedFrameGroup,h=t.getState(),p=JSON.parse(localStorage.getItem("gbp-web-state"));delete p.gitStorage,delete p.dropboxStorage,"esp8266"===(0,l.d)().env&&delete p.printerUrl;var y={};switch(n.C.forEach((function(t){var r=t.saveExport,n=t.key;r.includes(e)&&(y[n]=p[n],"images"===n&&"selected_images"===e&&(y[n]=y[n].filter((function(t){var r=t.hash;return u(e,h).includes(r)}))),"frames"===n&&"framegroup"===e&&(y[n]=y[n].filter((function(t){var r=t.hash;return c(e,h,f).includes(r)}))),"frameGroupNames"===n&&"framegroup"===e&&(y[n]=y[n].filter((function(t){return t.id===f}))),"palettes"===n&&(y[n]=p[n].filter((function(t){return!t.isPredefined}))))})),y.lastUpdateUTC=o||Math.floor((new Date).getTime()/1e3),e){case"debug":return Promise.resolve(JSON.stringify({state:p},null,2));case"settings":case"remote":return Promise.resolve(JSON.stringify({state:y},null,2));case"images":case"selected_images":return i(u(e,h)).then((function(t){return JSON.stringify(s({state:y},t),null,2)}));case"frames":case"framegroup":return a(c(e,h,f)).then((function(t){return JSON.stringify(s({state:y},t),null,2)}));case"palettes":return Promise.resolve(y.palettes).then((function(t){return JSON.stringify({state:{palettes:t}},null,2)}));default:return null}}}},39506:function(t,e,r){r(69826),r(41539);e.Z=function(t,e){var r=t.palettes,n=e.hashes,o=e.palette;return n?o:r.find((function(t){return t.shortName===o}))}},16717:function(t,e,r){r(69826),r(41539);e.Z=function(t,e,r){var n=t.images,o=e.r,i=e.g,a=e.b,u=e.n;if(r)return{r:r,g:r,b:r,n:r};var c=n.find((function(t){return t.hash===o})),l=n.find((function(t){return t.hash===i})),f=n.find((function(t){return t.hash===a})),s=n.find((function(t){return t.hash===u}));return{r:c?c.frame:null,g:l?l.frame:null,b:f?f.frame:null,n:s?s.frame:null}}},27918:function(t,e,r){r.d(e,{Gw:function(){return y},c6:function(){return m},op:function(){return d}});r(69826),r(41539),r(26699),r(32023),r(66992),r(33948),r(89554),r(54747),r(57327),r(23157),r(88674),r(82526),r(41817),r(32165),r(78783),r(72443),r(39341),r(73706),r(10408),r(69070),r(78011),r(30489),r(68309),r(68304),r(47042);var n=r(59833),o=r(30661);function i(t){return i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},i(t)}function a(){a=function(){return t};var t={},e=Object.prototype,r=e.hasOwnProperty,n="function"==typeof Symbol?Symbol:{},o=n.iterator||"@@iterator",u=n.asyncIterator||"@@asyncIterator",c=n.toStringTag||"@@toStringTag";function l(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{l({},"")}catch(t){l=function(t,e,r){return t[e]=r}}function f(t,e,r,n){var o=e&&e.prototype instanceof p?e:p,i=Object.create(o.prototype),a=new L(n||[]);return i._invoke=function(t,e,r){var n="suspendedStart";return function(o,i){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===o)throw i;return j()}for(r.method=o,r.arg=i;;){var a=r.delegate;if(a){var u=O(a,r);if(u){if(u===h)continue;return u}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var c=s(t,e,r);if("normal"===c.type){if(n=r.done?"completed":"suspendedYield",c.arg===h)continue;return{value:c.arg,done:r.done}}"throw"===c.type&&(n="completed",r.method="throw",r.arg=c.arg)}}}(t,r,a),i}function s(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}t.wrap=f;var h={};function p(){}function y(){}function d(){}var v={};l(v,o,(function(){return this}));var m=Object.getPrototypeOf,g=m&&m(m(A([])));g&&g!==e&&r.call(g,o)&&(v=g);var b=d.prototype=p.prototype=Object.create(v);function w(t){["next","throw","return"].forEach((function(e){l(t,e,(function(t){return this._invoke(e,t)}))}))}function E(t,e){function n(o,a,u,c){var l=s(t[o],t,a);if("throw"!==l.type){var f=l.arg,h=f.value;return h&&"object"==i(h)&&r.call(h,"__await")?e.resolve(h.__await).then((function(t){n("next",t,u,c)}),(function(t){n("throw",t,u,c)})):e.resolve(h).then((function(t){f.value=t,u(f)}),(function(t){return n("throw",t,u,c)}))}c(l.arg)}var o;this._invoke=function(t,r){function i(){return new e((function(e,o){n(t,r,e,o)}))}return o=o?o.then(i,i):i()}}function O(t,e){var r=t.iterator[e.method];if(void 0===r){if(e.delegate=null,"throw"===e.method){if(t.iterator.return&&(e.method="return",e.arg=void 0,O(t,e),"throw"===e.method))return h;e.method="throw",e.arg=new TypeError("The iterator does not provide a 'throw' method")}return h}var n=s(r,t.iterator,e.arg);if("throw"===n.type)return e.method="throw",e.arg=n.arg,e.delegate=null,h;var o=n.arg;return o?o.done?(e[t.resultName]=o.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=void 0),e.delegate=null,h):o:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,h)}function S(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function x(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function L(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(S,this),this.reset(!0)}function A(t){if(t){var e=t[o];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var n=-1,i=function e(){for(;++n<t.length;)if(r.call(t,n))return e.value=t[n],e.done=!1,e;return e.value=void 0,e.done=!0,e};return i.next=i}}return{next:j}}function j(){return{value:void 0,done:!0}}return y.prototype=d,l(b,"constructor",d),l(d,"constructor",y),y.displayName=l(d,c,"GeneratorFunction"),t.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===y||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,d):(t.__proto__=d,l(t,c,"GeneratorFunction")),t.prototype=Object.create(b),t},t.awrap=function(t){return{__await:t}},w(E.prototype),l(E.prototype,u,(function(){return this})),t.AsyncIterator=E,t.async=function(e,r,n,o,i){void 0===i&&(i=Promise);var a=new E(f(e,r,n,o),i);return t.isGeneratorFunction(r)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},w(b),l(b,c,"Generator"),l(b,o,(function(){return this})),l(b,"toString",(function(){return"[object Generator]"})),t.keys=function(t){var e=[];for(var r in t)e.push(r);return e.reverse(),function r(){for(;e.length;){var n=e.pop();if(n in t)return r.value=n,r.done=!1,r}return r.done=!0,r}},t.values=A,L.prototype={constructor:L,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(x),!t)for(var e in this)"t"===e.charAt(0)&&r.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function n(r,n){return a.type="throw",a.arg=t,e.next=r,n&&(e.method="next",e.arg=void 0),!!n}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],a=i.completion;if("root"===i.tryLoc)return n("end");if(i.tryLoc<=this.prev){var u=r.call(i,"catchLoc"),c=r.call(i,"finallyLoc");if(u&&c){if(this.prev<i.catchLoc)return n(i.catchLoc,!0);if(this.prev<i.finallyLoc)return n(i.finallyLoc)}else if(u){if(this.prev<i.catchLoc)return n(i.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return n(i.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,h):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),h},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),x(r),h}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;x(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,r){return this.delegate={iterator:A(t),resultName:e,nextLoc:r},"next"===this.method&&(this.arg=void 0),h}},t}function u(t,e,r,n,o,i,a){try{var u=t[i](a),c=u.value}catch(t){return void r(t)}u.done?e(c):Promise.resolve(c).then(n,o)}function c(t){return function(){var e=this,r=arguments;return new Promise((function(n,o){var i=t.apply(e,r);function a(t){u(i,n,o,a,c,"next",t)}function c(t){u(i,n,o,a,c,"throw",t)}a(void 0)}))}}var l=function(t,e){return!!e.find((function(e){var r=e.hashes;return!!r&&[r.r,r.g,r.b,r.n].includes(t)}))},f=function(t,e){return!!e.find((function(e){return e.hash===t}))},s=function(t){return function(e){return!l(e,t)&&!f(e,t)}},h=function(t){return function(e){(function(t,e){return!!e.find((function(e){return e.hash===t}))})(e,t)||(0,o.jW)(e)}},p=function(t){return function(e){l(e,t)||f(e,t)||(0,o.IV)(e)}},y=function(){var t=c(a().mark((function t(e){var r,o;return a().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=e.images,o=e.frames,t.next=3,(0,n.VA)();case 3:return t.next=5,n.Rt.keys();case 5:return t.sent.forEach(p(r)),t.next=9,n.$0.keys();case 9:t.sent.forEach(h(o));case 11:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),d=function(){var t=c(a().mark((function t(e){var r;return a().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,(0,n.VA)();case 2:return t.next=4,n.Rt.keys();case 4:return r=t.sent,t.abrupt("return",r.filter((function(t){return!t.startsWith("dummy")})).filter(s(e)));case 6:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),v=function(t){return function(e){return!t.find((function(t){return t.hash===e}))}},m=function(){var t=c(a().mark((function t(e){var r;return a().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,(0,n.VA)();case 2:return t.next=4,n.$0.keys();case 4:return r=t.sent,t.abrupt("return",r.filter((function(t){return!t.startsWith("dummy")})).filter(v(e)));case 6:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},28014:function(t,e,r){r(69826),r(41539),r(66992),r(88674),r(78783),r(33948);var n=r(30661),o=r(16717),i=r(17036);e.Z=function(t){return function(e,r,a){var u,c=e.hash,l=e.frame,f=e.hashes,s=(null===(u=t.frames.find((function(t){return t.id===l})))||void 0===u?void 0:u.hash)||null;if(!f)return(0,n.zD)(c,s,r,a);var h=(0,o.Z)(t,f,s);return Promise.all([(0,n.zD)(f.r,h.r||s,r,a),(0,n.zD)(f.g,h.g||s,r,a),(0,n.zD)(f.b,h.b||s,r,a),(0,n.zD)(f.n,h.n||s,r,a)]).then(i.Z.rgbnTiles)}}},36965:function(t,e,r){r(41539),r(88674);var n=r(48764).Buffer;e.Z=function(t,e){return new Promise((function(r,o){var i=new FileReader;switch(i.onload=function(t){var i=t.target;if(i.result)return"arrayBuffer"===e?void r(n.from(i.result)):void r(i.result);o(new Error("Filereader has no result"))},i.onerror=function(t){o(t)},e){case"arrayBuffer":i.readAsArrayBuffer(t);break;case"text":i.readAsText(t);break;case"binaryString":i.readAsBinaryString(t);break;case"dataURL":i.readAsDataURL(t);break;default:o(new Error('readAs param missing or unknown type "'.concat(e,'"')))}}))}},93572:function(t,e,r){r(21249),r(69600),r(26699),r(92222),r(69070),r(47941),r(82526),r(57327),r(41539),r(38880),r(89554),r(54747),r(49337),r(33321);function n(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function o(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?n(Object(r),!0).forEach((function(e){i(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):n(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function i(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}e.Z=function(t){var e=[];return t.map((function(t){for(var r=t.filename,n=r.split("."),i=n.pop(),a=n.join("."),u=r,c=0;e.includes(u);)c+=1,u="".concat(a,"_(").concat(c,").").concat(i);return e.includes(u)||e.push(u),o(o({},t),{},{uFilename:u})}))}},49965:function(t,e,r){r.d(e,{$b:function(){return f},Np:function(){return c},fD:function(){return l}});r(69070),r(47941),r(82526),r(57327),r(41539),r(38880),r(89554),r(54747),r(49337),r(33321),r(79753),r(41817),r(32165),r(66992),r(78783),r(33948),r(47042),r(68309),r(91038),r(74916);function n(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null==r)return;var n,o,i=[],a=!0,u=!1;try{for(r=r.call(t);!(a=(n=r.next()).done)&&(i.push(n.value),!e||i.length!==e);a=!0);}catch(t){u=!0,o=t}finally{try{a||null==r.return||r.return()}finally{if(u)throw o}}return i}(t,e)||function(t,e){if(!t)return;if("string"==typeof t)return o(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);"Object"===r&&t.constructor&&(r=t.constructor.name);if("Map"===r||"Set"===r)return Array.from(t);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return o(t,e)}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function o(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function i(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function a(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?i(Object(r),!0).forEach((function(e){u(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):i(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function u(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}var c=function(t,e){return a(a({},t),{},{sortIndex:e})},l=function(t){return a(a({},t),{},{sortIndex:void 0})},f=function(t){var e=t.sortBy;return function(t,r){if(!e)return 0;var o=n(e.split("_"),2),i=o[0],a=o[1],u=t[i],c=r[i],l="desc"===a?-1:1;return u&&c?u>c?l:u<c?-l:t.sortIndex<r.sortIndex?l:-l:0}}},30661:function(t,e,r){r.d(e,{aj:function(){return s},IV:function(){return y},jW:function(){return d},zD:function(){return p},a1:function(){return h}});r(66992),r(41539),r(88674),r(78783),r(33948),r(69600),r(21249),r(74916),r(15306),r(82526),r(41817),r(32165),r(72443),r(39341),r(73706),r(10408),r(69070),r(78011),r(30489),r(89554),r(54747),r(68309),r(68304),r(47042),r(73210);var n=r(41027),o=function(t){var e="\nThe following hash is missing in\nyour indexedDb:\n".concat(t,"\n\nEither you imported a debug dump\nor your browser decided to do a\ncleanup.\n\nThis image might be able to be\nrecovered if you have set up git\nor dropbox sync.\n").trim();return(0,n.Z)(e)},i=r(2738),a=r(59833);function u(t){return u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},u(t)}function c(){c=function(){return t};var t={},e=Object.prototype,r=e.hasOwnProperty,n="function"==typeof Symbol?Symbol:{},o=n.iterator||"@@iterator",i=n.asyncIterator||"@@asyncIterator",a=n.toStringTag||"@@toStringTag";function l(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{l({},"")}catch(t){l=function(t,e,r){return t[e]=r}}function f(t,e,r,n){var o=e&&e.prototype instanceof p?e:p,i=Object.create(o.prototype),a=new L(n||[]);return i._invoke=function(t,e,r){var n="suspendedStart";return function(o,i){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===o)throw i;return j()}for(r.method=o,r.arg=i;;){var a=r.delegate;if(a){var u=O(a,r);if(u){if(u===h)continue;return u}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var c=s(t,e,r);if("normal"===c.type){if(n=r.done?"completed":"suspendedYield",c.arg===h)continue;return{value:c.arg,done:r.done}}"throw"===c.type&&(n="completed",r.method="throw",r.arg=c.arg)}}}(t,r,a),i}function s(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}t.wrap=f;var h={};function p(){}function y(){}function d(){}var v={};l(v,o,(function(){return this}));var m=Object.getPrototypeOf,g=m&&m(m(A([])));g&&g!==e&&r.call(g,o)&&(v=g);var b=d.prototype=p.prototype=Object.create(v);function w(t){["next","throw","return"].forEach((function(e){l(t,e,(function(t){return this._invoke(e,t)}))}))}function E(t,e){function n(o,i,a,c){var l=s(t[o],t,i);if("throw"!==l.type){var f=l.arg,h=f.value;return h&&"object"==u(h)&&r.call(h,"__await")?e.resolve(h.__await).then((function(t){n("next",t,a,c)}),(function(t){n("throw",t,a,c)})):e.resolve(h).then((function(t){f.value=t,a(f)}),(function(t){return n("throw",t,a,c)}))}c(l.arg)}var o;this._invoke=function(t,r){function i(){return new e((function(e,o){n(t,r,e,o)}))}return o=o?o.then(i,i):i()}}function O(t,e){var r=t.iterator[e.method];if(void 0===r){if(e.delegate=null,"throw"===e.method){if(t.iterator.return&&(e.method="return",e.arg=void 0,O(t,e),"throw"===e.method))return h;e.method="throw",e.arg=new TypeError("The iterator does not provide a 'throw' method")}return h}var n=s(r,t.iterator,e.arg);if("throw"===n.type)return e.method="throw",e.arg=n.arg,e.delegate=null,h;var o=n.arg;return o?o.done?(e[t.resultName]=o.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=void 0),e.delegate=null,h):o:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,h)}function S(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function x(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function L(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(S,this),this.reset(!0)}function A(t){if(t){var e=t[o];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var n=-1,i=function e(){for(;++n<t.length;)if(r.call(t,n))return e.value=t[n],e.done=!1,e;return e.value=void 0,e.done=!0,e};return i.next=i}}return{next:j}}function j(){return{value:void 0,done:!0}}return y.prototype=d,l(b,"constructor",d),l(d,"constructor",y),y.displayName=l(d,a,"GeneratorFunction"),t.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===y||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,d):(t.__proto__=d,l(t,a,"GeneratorFunction")),t.prototype=Object.create(b),t},t.awrap=function(t){return{__await:t}},w(E.prototype),l(E.prototype,i,(function(){return this})),t.AsyncIterator=E,t.async=function(e,r,n,o,i){void 0===i&&(i=Promise);var a=new E(f(e,r,n,o),i);return t.isGeneratorFunction(r)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},w(b),l(b,a,"Generator"),l(b,o,(function(){return this})),l(b,"toString",(function(){return"[object Generator]"})),t.keys=function(t){var e=[];for(var r in t)e.push(r);return e.reverse(),function r(){for(;e.length;){var n=e.pop();if(n in t)return r.value=n,r.done=!1,r}return r.done=!0,r}},t.values=A,L.prototype={constructor:L,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(x),!t)for(var e in this)"t"===e.charAt(0)&&r.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function n(r,n){return a.type="throw",a.arg=t,e.next=r,n&&(e.method="next",e.arg=void 0),!!n}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],a=i.completion;if("root"===i.tryLoc)return n("end");if(i.tryLoc<=this.prev){var u=r.call(i,"catchLoc"),c=r.call(i,"finallyLoc");if(u&&c){if(this.prev<i.catchLoc)return n(i.catchLoc,!0);if(this.prev<i.finallyLoc)return n(i.finallyLoc)}else if(u){if(this.prev<i.catchLoc)return n(i.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return n(i.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,h):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),h},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),x(r),h}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;x(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,r){return this.delegate={iterator:A(t),resultName:e,nextLoc:r},"next"===this.method&&(this.arg=void 0),h}},t}function l(t,e,r,n,o,i,a){try{var u=t[i](a),c=u.value}catch(t){return void r(t)}u.done?e(c):Promise.resolve(c).then(n,o)}function f(t){return function(){var e=this,r=arguments;return new Promise((function(n,o){var i=t.apply(e,r);function a(t){l(i,n,o,a,u,"next",t)}function u(t){l(i,n,o,a,u,"throw",t)}a(void 0)}))}}var s=function(){var t=f(c().mark((function t(e){var n,o,i,a,u,l,f;return c().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,r.e(705).then(r.t.bind(r,40705,23));case 2:return n=t.sent,o=n.default,t.next=6,r.e(591).then(r.t.bind(r,99591,23));case 6:return i=t.sent,a=i.default,u=e.map((function(t){return t.replace(/ /gi,"").toUpperCase()})).join("\n"),l=a.deflate(u,{to:"string",strategy:1,level:8}),f=o(l),t.abrupt("return",{dataHash:f,compressed:l});case 12:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),h=function(){var t=f(c().mark((function t(e){var r,n,o;return c().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,s(e);case 2:return r=t.sent,n=r.dataHash,o=r.compressed,t.next=7,a.Rt.setItem(n,o);case 7:return t.abrupt("return",n);case 8:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),p=function(t,e,n){var u=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return t?r.e(591).then(r.t.bind(r,99591,23)).then((function(e){var r=e.default;return a.Rt.getItem(t).then((function(t){return r.inflate(t,{to:"string"}).split("\n")})).catch((function(){return"function"==typeof u&&u(t),n?[]:o(t)}))})).then((function(t){return e?(0,i.Z)(t,e):t})):Promise.resolve(null)},y=function(t){a.Rt.removeItem(t)},d=function(t){a.$0.removeItem(t)}},41027:function(t,e,r){r.d(e,{Z:function(){return f}});r(84944),r(33792),r(21249),r(74916),r(4723),r(66528),r(92222),r(79753),r(82526),r(41817),r(41539),r(32165),r(66992),r(78783),r(33948),r(91038),r(47042),r(68309),r(83710),r(39714),r(69600);function n(t){return function(t){if(Array.isArray(t))return o(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||function(t,e){if(!t)return;if("string"==typeof t)return o(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);"Object"===r&&t.constructor&&(r=t.constructor.name);if("Map"===r||"Set"===r)return Array.from(t);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return o(t,e)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function o(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}var i={"":"006666666600FFFF"," ":"FFFFFFFFFFFFFFFF",0:"FFDDAAAAAADDFFFF",1:"FFDD99DDDDDDFFFF",2:"FF99EEDDBB88FFFF",3:"FF99EE99EE99FFFF",4:"FFDDBBBB88EEFFFF",5:"FF88BB99EE99FFFF",6:"FFCCBB99AADDFFFF",7:"FF88EEDDBBBBFFFF",8:"FFDDAADDAADDFFFF",9:"FFDDAACCEE99FFFF",a:"FFDDAAAA88AAFFFF",b:"FF99AA99AA99FFFF",c:"FFCCBBBBBBCCFFFF",d:"FF99AAAAAA99FFFF",e:"FF88BB99BB88FFFF",f:"FF88BB99BBBBFFFF",g:"FFCCBBAAAACCFFFF",h:"FFAAAA88AAAAFFFF",i:"FF88DDDDDD88FFFF",j:"FF99DDDDDDBBFFFF",k:"FFAAAA99AAAAFFFF",l:"FFBBBBBBBB88FFFF",m:"FFAA888AAAAAFFFF",n:"FFAA8A888AAAFFFF",o:"FFDDAAAAAADDFFFF",p:"FF99AA99BBBBFFFF",q:"FFDDAAAAAACCFFFF",r:"FF99AA99AAAAFFFF",s:"FFCCBBDDEE99FFFF",t:"FF88DDDDDDDDFFFF",u:"FFAAAAAAAACCFFFF",v:"FFAAAAAAAADDFFFF",w:"FFAAAA8A88AAFFFF",x:"FFAAAADDAAAAFFFF",y:"FFAAAADDDDDDFFFF",z:"FF88EEDDBB88FFFF","ä":"AADDAAAA88AAFFFF","ö":"AADDAAAAAADDFFFF","ü":"AAAFAAAAAACCFFFF","ß":"FF99AA99AA99BBFF",".":"FFFFFFFFFFDDFFFF","!":"DDDDDDDDFFDDFFFF","?":"DDAAEEDDFFDDFFFF","-":"FFFFFF88FFFFFFFF",_:"FFFFFFFFFF88FFFF",":":"FFFFDDFFDDFFFFFF"},a=function(t){var e=[].concat(n(t.toString(10).toLowerCase()),[" "," "]),r=e.shift(),o=e.shift(),a=i[r]||i[""],u=i[o]||i[""];return n(Array(16)).map((function(t,e){return"".concat(a[e]).concat(u[e])})).join("")};function u(t){return function(t){if(Array.isArray(t))return c(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||function(t,e){if(!t)return;if("string"==typeof t)return c(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);"Object"===r&&t.constructor&&(r=t.constructor.name);if("Map"===r||"Set"===r)return Array.from(t);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return c(t,e)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function c(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}var l="FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFF\n",f=function(t){var e=[],r=t.split("\n").map((function(t){return t.match(/.{1,32}/g)})).flat().map((function(t){return t||""})).map((function(){return(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"").padEnd(32," ")})).map((function(t){return t.match(/.{1,2}/g).map((function(t){return a(t)}))})).map((function(t){return[l,l].concat(u(t),[l,l])})).flat();for(e.push.apply(e,u(u(Array(40)).map((function(){return l})))),e.push.apply(e,u(r));e.length<360;)e.push(l);return e}},18417:function(t,e){e.Z=function(t){var e=t-("keep"===(arguments.length>1&&void 0!==arguments[1]?arguments[1]:"keep")?0:20);if(e<40)return!0;if(e>=320)return!0;switch(e%20){case 0:case 1:case 18:case 19:return!0;default:return!1}}},81451:function(t,e,r){r(57327),r(41539),r(34553);e.Z=function(t){return function(e){return e.filter((function(r,n){return e.findIndex((function(e){return e[t]===r[t]}))===n}))}}},31852:function(t,e,r){r(57327),r(41539),r(34553);e.Z=function(t){return t.filter((function(e,r){return t.findIndex((function(t){return t===e}))===r}))}}}]);