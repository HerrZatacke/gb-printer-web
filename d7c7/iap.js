(window.webpackJsonp=window.webpackJsonp||[]).push([[4],{168:function(t,e,r){"use strict";r.d(e,"a",(function(){return a})),r.d(e,"c",(function(){return o})),r.d(e,"k",(function(){return i})),r.d(e,"b",(function(){return c})),r.d(e,"d",(function(){return u})),r.d(e,"e",(function(){return d})),r.d(e,"h",(function(){return h})),r.d(e,"g",(function(){return f})),r.d(e,"i",(function(){return s})),r.d(e,"f",(function(){return p})),r.d(e,"j",(function(){return y}));r(124);var n=r(220),a="YYYY-MM-DD HH:mm:ss",o="YYYY-MM-DD",i="HH:mm",c="YYYYMMDD-HHmmss",u="DD.MM.YYYY HH:mm",l=[0,85,170,255],f='!{"command":"INIT"}',s='!{"command":"DATA", "compressed":0, "more":1}',p='!{"command":"DATA","compressed":0,"more":0}',y='!{"command":"PRNT","sheets":1,"margin_upper":1,"margin_lower":3,"pallet":228,"density":64 }',d={r:l.slice(),g:l.slice(),b:l.slice(),n:l.slice(),blend:n.b.MULTIPLY},h={shortName:"-",name:"Missing Palette",palette:["#aaaaaa","#999999","#888888","#777777"]}},189:function(t,e,r){"use strict";r.d(e,"e",(function(){return n})),r.d(e,"b",(function(){return a})),r.d(e,"a",(function(){return o})),r.d(e,"d",(function(){return i})),r.d(e,"c",(function(){return c})),r.d(e,"f",(function(){return u}));var n="__filter:untagged__",a="__filter:new__",o="__filter:mono__",i="__filter:rgb__",c="__filter:recent__",u="__new:palette__"},191:function(t,e,r){"use strict";r(79),r(18),r(21),r(98),r(97);var n=r(203),a=r(221),o=r(222);e.a=function(t){return function(e,r){var i=e.hash,c=e.frame,u=e.hashes;if(!u)return Object(n.b)(i,c,r);var l=Object(a.a)(t,u,c);return Promise.all([Object(n.b)(u.r,l.r||c,r),Object(n.b)(u.g,l.g||c,r),Object(n.b)(u.b,l.b||c,r),Object(n.b)(u.n,l.n||c,r)]).then(o.a.rgbnTiles)}}},192:function(t,e,r){"use strict";r.d(e,"a",(function(){return i})),r.d(e,"b",(function(){return o}));r(241),r(50),r(169),r(56),r(124),r(18),r(21),r(52),r(85),r(164);var n=r(318),a=r(16),o=function(t,e){return r.e(14).then(r.t.bind(null,332,7)).then((function(r){var o=r.default,i=e.filter((function(t,e){return Object(n.a)(e)})).map((function(t){return t.replace(/ /gi,"")})).join("\n"),c=o.deflate(i,{to:"string",strategy:1,level:8});return a.a.setItem(t,c)}))},i=function(t){return t?a.a.getItem(t).then((function(t){return t?r.e(14).then(r.t.bind(null,332,7)).then((function(e){var r=e.default;try{var n=r.inflate(t,{to:"string"}).split("\n");return{upper:n.slice(0,40),left:Array(14).fill(0).map((function(t,e){return n.slice(4*e+40,4*e+42)})),right:Array(14).fill(0).map((function(t,e){return n.slice(4*e+42,4*e+44)})),lower:n.slice(96,136)}}catch(t){return null}})):null})):Promise.resolve(null)}},194:function(t,e,r){"use strict";r(55),r(125),r(126),r(50),r(127),r(128),r(79),r(56),r(124),r(138),r(122),r(80),r(18),r(123),r(98),r(97);var n=r(244),a=r(323);function o(t){return function(t){if(Array.isArray(t))return i(t)}(t)||function(t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(t))return Array.from(t)}(t)||function(t,e){if(!t)return;if("string"==typeof t)return i(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);"Object"===r&&t.constructor&&(r=t.constructor.name);if("Map"===r||"Set"===r)return Array.from(t);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return i(t,e)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function i(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}e.a=function(t){var e=t.images,r=t.filtersActiveTags,i=t.sortBy,c=t.recentImports;return o(e).map(n.a).sort(Object(n.c)({sortBy:i})).map(n.b).filter(Object(a.a)(r,c))}},203:function(t,e,r){"use strict";r.d(e,"c",(function(){return y})),r.d(e,"b",(function(){return d})),r.d(e,"a",(function(){return h}));r(169),r(56),r(18),r(21),r(52),r(85),r(164),r(55),r(125),r(126),r(158),r(175),r(127),r(128),r(79),r(124),r(176),r(122),r(80),r(123),r(98),r(167),r(314),r(97);function n(t){return function(t){if(Array.isArray(t))return a(t)}(t)||function(t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(t))return Array.from(t)}(t)||function(t,e){if(!t)return;if("string"==typeof t)return a(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);"Object"===r&&t.constructor&&(r=t.constructor.name);if("Map"===r||"Set"===r)return Array.from(t);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return a(t,e)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function a(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}var o={"":"006666666600FFFF"," ":"FFFFFFFFFFFFFFFF",0:"FFDDAAAAAADDFFFF",1:"FFDD99DDDDDDFFFF",2:"FF99EEDDBB88FFFF",3:"FF99EE99EE99FFFF",4:"FFDDBBBB88EEFFFF",5:"FF88BB99EE99FFFF",6:"FFCCBB99AADDFFFF",7:"FF88EEDDBBBBFFFF",8:"FFDDAADDAADDFFFF",9:"FFDDAACCEE99FFFF",a:"FFDDAAAA88AAFFFF",b:"FF99AA99AA99FFFF",c:"FFCCBBBBBBCCFFFF",d:"FF99AAAAAA99FFFF",e:"FF88BB99BB88FFFF",f:"FF88BB99BBBBFFFF",g:"FFCCBBAAAACCFFFF",h:"FFAAAA88AAAAFFFF",i:"FF88DDDDDD88FFFF",j:"FF99DDDDDDBBFFFF",k:"FFAAAA99AAAAFFFF",l:"FFBBBBBBBB88FFFF",m:"FFAA888AAAAAFFFF",n:"FFAA8A888AAAFFFF",o:"FFDDAAAAAADDFFFF",p:"FF99AA99BBBBFFFF",q:"FFDDAAAAAACCFFFF",r:"FF99AA99AAAAFFFF",s:"FFCCBBDDEE99FFFF",t:"FF88DDDDDDDDFFFF",u:"FFAAAAAAAACCFFFF",v:"FFAAAAAAAADDFFFF",w:"FFAAAA8A88AAFFFF",x:"FFAAAADDAAAAFFFF",y:"FFAAAADDDDDDFFFF",z:"FF88EEDDBB88FFFF","ä":"AADDAAAA88AAFFFF","ö":"AADDAAAAAADDFFFF","ü":"AAAFAAAAAACCFFFF","ß":"FF99AA99AA99BBFF",".":"FFFFFFFFFFDDFFFF","!":"DDDDDDDDFFDDFFFF","?":"DDAAEEDDFFDDFFFF","-":"FFFFFF88FFFFFFFF",_:"FFFFFFFFFF88FFFF",":":"FFFFDDFFDDFFFFFF"},i=function(t){var e=[].concat(n(t.toString(10).toLowerCase()),[" "," "]),r=e.shift(),a=e.shift(),i=o[r]||o[""],c=o[a]||o[""];return n(Array(16)).map((function(t,e){return"".concat(i[e]).concat(c[e])})).join("")};function c(t){return function(t){if(Array.isArray(t))return u(t)}(t)||function(t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(t))return Array.from(t)}(t)||function(t,e){if(!t)return;if("string"==typeof t)return u(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);"Object"===r&&t.constructor&&(r=t.constructor.name);if("Map"===r||"Set"===r)return Array.from(t);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return u(t,e)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function u(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}var l="FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFF\n",f=function(t){var e=[],r="The following hash is missing in your localStorage:\n".concat(t,"\n\nMaybe you imported a debug dump?").split("\n").map((function(t){return t.match(/.{1,32}/g)})).flat().map((function(t){return t||""})).map((function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return t.padEnd(32," ")})).map((function(t){return t.match(/.{1,2}/g).map((function(t){return i(t)}))})).map((function(t){return[l,l].concat(c(t),[l,l])})).flat();for(e.push.apply(e,c(c(Array(40)).map((function(){return l})))),e.push.apply(e,c(r));e.length<360;)e.push(l);return e},s=r(317),p=r(16),y=function(t){return r.e(13).then(r.t.bind(null,755,7)).then((function(e){var n=e.default;return r.e(14).then(r.t.bind(null,332,7)).then((function(e){var r=e.default,a=t.map((function(t){return t.replace(/ /gi,"")})).join("\n"),o=r.deflate(a,{to:"string",strategy:1,level:8}),i=n(o);return p.b.setItem(i,o).then((function(){return i}))}))}))},d=function(t,e,n){return t?r.e(14).then(r.t.bind(null,332,7)).then((function(e){var r=e.default;return p.b.getItem(t).then((function(t){return r.inflate(t,{to:"string"}).split("\n")})).catch((function(){return n?[]:f(t)}))})).then((function(t){return e?Object(s.a)(t,e):t})):Promise.resolve(null)},h=function(t){p.b.removeItem(t)}},205:function(t,e,r){"use strict";r(50),r(184);e.a=function(t){return t.filter((function(e,r){return t.findIndex((function(t){return t===e}))===r}))}},206:function(t,e,r){"use strict";r(50),r(184);e.a=function(t){return function(e){return e.filter((function(r,n){return e.findIndex((function(e){return e[t]===r[t]}))===n}))}}},207:function(t,e,r){"use strict";r(158),r(406),r(52),r(123),r(407),r(167),r(190);e.a=function(t,e){if(!t.trim())return"";if("/"===t&&"ws"!==e)return t;var r=!!t.match(new RegExp("^".concat(e,"(s)?:\\/\\/"),"gi"));return"".concat(r?"":"".concat(e,"://")).concat(t).concat(t.endsWith("/")?"":"/")}},208:function(t,e,r){"use strict";r(135);e.a=function(t,e){var r=t.palettes,n=e.hashes,a=e.palette;return n?a:r.find((function(t){return t.shortName===a}))}},220:function(t,e,r){"use strict";r.d(e,"b",(function(){return o})),r.d(e,"a",(function(){return i})),r.d(e,"c",(function(){return c}));var n;r(81);function a(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}var o={NORMAL:"normal",NORMAL_S:"normal_s",LIGHTEN:"lighten",SCREEN:"screen",DODGE:"dodge",DODGE_S:"dodge_s",ADDITION:"addition",DARKEN:"darken",MULTIPLY:"multiply",BURN:"burn",BURN_S:"burn_s",OVERLAY:"overlay",SOFTLIGHT:"softlight",SOFTLIGHT_S:"softlight_s",HARDLIGHT:"hardlight",DIFFERENCE:"difference",SUBTRACT:"subtract",SUBTRACT_S:"subtract_s",GRAIN_EXTRACT:"grainextract",GRAIN_EXTRACT_S:"grainextract_s",GRAIN_MERGE:"grainmerge",DIVIDE:"divide",DIVIDE_S:"divide_s"},i=(a(n={},o.NORMAL,(function(t,e){return t})),a(n,o.LIGHTEN,(function(t,e){return Math.max(e,t)})),a(n,o.SCREEN,(function(t,e){return 1-(1-e)*(1-t)})),a(n,o.DODGE,(function(t,e){return t/(1-e)})),a(n,o.ADDITION,(function(t,e){return e+t})),a(n,o.DARKEN,(function(t,e){return Math.min(e,t)})),a(n,o.MULTIPLY,(function(t,e){return e*t})),a(n,o.BURN,(function(t,e){return 1-(1-t)/e})),a(n,o.OVERLAY,(function(t,e){return t<.5?2*t*e:1-2*(1-e)*(1-t)})),a(n,o.SOFTLIGHT,(function(t,e){return(1-t)*i[o.MULTIPLY](t,e)+t*i[o.SCREEN](t,e)})),a(n,o.DIFFERENCE,(function(t,e){return Math.abs(t-e)})),a(n,o.SUBTRACT,(function(t,e){return t-e})),a(n,o.GRAIN_EXTRACT,(function(t,e){return t-e+.5})),a(n,o.GRAIN_MERGE,(function(t,e){return t+e-.5})),a(n,o.DIVIDE,(function(t,e){return t/e})),a(n,o.NORMAL_S,(function(t,e){return i[o.NORMAL](e,t)})),a(n,o.DODGE_S,(function(t,e){return i[o.DODGE](e,t)})),a(n,o.BURN_S,(function(t,e){return i[o.BURN](e,t)})),a(n,o.HARDLIGHT,(function(t,e){return i[o.OVERLAY](e,t)})),a(n,o.SOFTLIGHT_S,(function(t,e){return i[o.SOFTLIGHT](e,t)})),a(n,o.SUBTRACT_S,(function(t,e){return i[o.SUBTRACT](e,t)})),a(n,o.GRAIN_EXTRACT_S,(function(t,e){return i[o.GRAIN_EXTRACT](e,t)})),a(n,o.DIVIDE_S,(function(t,e){return i[o.DIVIDE](e,t)})),n),c=[{id:o.NORMAL,label:"Normal (ignore neutral layer)"},{id:o.NORMAL_S,label:"Normal ⇵ (only neutral layer)"},{id:o.LIGHTEN,label:"Lighten only"},{id:o.SCREEN,label:"Screen"},{id:o.DODGE,label:"Dodge"},{id:o.DODGE_S,label:"Dodge ⇵"},{id:o.ADDITION,label:"Addition"},{id:o.DARKEN,label:"Darken only"},{id:o.MULTIPLY,label:"Multiply"},{id:o.BURN,label:"Burn"},{id:o.BURN_S,label:"Burn ⇵"},{id:o.OVERLAY,label:"Overlay"},{id:o.SOFTLIGHT,label:"Soft light"},{id:o.SOFTLIGHT_S,label:"Soft light ⇵"},{id:o.HARDLIGHT,label:"Hard light"},{id:o.DIFFERENCE,label:"Difference"},{id:o.SUBTRACT,label:"Subtract"},{id:o.SUBTRACT_S,label:"Subtract ⇵"},{id:o.GRAIN_EXTRACT,label:"Grain extract"},{id:o.GRAIN_EXTRACT_S,label:"Grain extract ⇵"},{id:o.GRAIN_MERGE,label:"Grain merge"},{id:o.DIVIDE,label:"Divide"},{id:o.DIVIDE_S,label:"Divide ⇵"}]},221:function(t,e,r){"use strict";r(135);e.a=function(t,e,r){var n=t.images,a=e.r,o=e.g,i=e.b,c=e.n;if(r)return{r:r,g:r,b:r,n:r};var u=n.find((function(t){return t.hash===a})),l=n.find((function(t){return t.hash===o})),f=n.find((function(t){return t.hash===i})),s=n.find((function(t){return t.hash===c}));return{r:u?u.frame:null,g:l?l.frame:null,b:f?f.frame:null,n:s?s.frame:null}}},222:function(t,e,r){"use strict";r(55),r(125),r(126),r(127),r(128),r(79),r(56),r(124),r(122),r(80),r(319),r(81),r(82),r(320),r(321),r(18),r(322),r(476),r(123),r(98),r(97);var n=r(224),a=r(220);function o(t){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function i(t){return function(t){if(Array.isArray(t))return l(t)}(t)||function(t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(t))return Array.from(t)}(t)||u(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function c(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(t)))return;var r=[],n=!0,a=!1,o=void 0;try{for(var i,c=t[Symbol.iterator]();!(n=(i=c.next()).done)&&(r.push(i.value),!e||r.length!==e);n=!0);}catch(t){a=!0,o=t}finally{try{n||null==c.return||c.return()}finally{if(a)throw o}}return r}(t,e)||u(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function u(t,e){if(t){if("string"==typeof t)return l(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?l(t,e):void 0}}function l(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function f(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function s(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function p(t,e,r){return(p="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=b(t)););return t}(t,e);if(n){var a=Object.getOwnPropertyDescriptor(n,e);return a.get?a.get.call(r):a.value}})(t,e,r||t)}function y(t,e){return(y=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function d(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var r,n=b(t);if(e){var a=b(this).constructor;r=Reflect.construct(n,arguments,a)}else r=n.apply(this,arguments);return h(this,r)}}function h(t,e){return!e||"object"!==o(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function b(t){return(b=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var m=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&y(t,e)}(u,t);var e,r,n,o=d(u);function u(){return f(this,u),o.apply(this,arguments)}return e=u,n=[{key:"rgbnTiles",value:function(t){var e=c(t,4),r=e[0],n=e[1],a=e[2],o=e[3];return i(Array(360)).map((function(t,e){return{r:null==r?void 0:r[e],g:null==n?void 0:n[e],b:null==a?void 0:a[e],n:null==o?void 0:o[e]}}))}}],(r=[{key:"setPalette",value:function(t){return!!t&&JSON.stringify(this.palette)!==JSON.stringify(t)&&(this.palette=t,!0)}},{key:"decodeTile",value:function(t){var e=t.r,r=t.g,n=t.b,a=t.n;return{r:p(b(u.prototype),"decodeTile",this).call(this,e),g:p(b(u.prototype),"decodeTile",this).call(this,r),b:p(b(u.prototype),"decodeTile",this).call(this,n),n:a?p(b(u.prototype),"decodeTile",this).call(this,a):null}}},{key:"getRGBValue",value:function(t,e,r,n){var a=t.r,o=t.g,i=t.b,c=t.n;return this.lockFrame&&!n&&this.tileIndexIsFramePart(r)?p(b(u.prototype),"getRGBValue",this).call(this,c,e,r,n):this.blendColors({r:a[e],g:o[e],b:i[e],n:!!c&&c[e]})}},{key:"blendColors",value:function(t){var e=t.r,r=t.g,n=t.b,o=t.n,i={r:this.palette.r[3-e],g:this.palette.g[3-r],b:this.palette.b[3-n]};if(!1===o)return i;var c=this.palette.blend||a.b.MULTIPLY;if(!a.a[c])return i;var u=function(t,e){return 255*Math.max(0,Math.min(1,a.a[c](t/255,e/255)))};return{r:u(this.palette.r[3-e],this.palette.n[3-o]),g:u(this.palette.g[3-r],this.palette.n[3-o]),b:u(this.palette.b[3-n],this.palette.n[3-o])}}},{key:"getHeight",value:function(){return 144}}])&&s(e.prototype,r),n&&s(e,n),u}(n.a);e.a=m},224:function(t,e,r){"use strict";r(158),r(50),r(33),r(79),r(56),r(284),r(81),r(18),r(185),r(52),r(314),r(85),r(478),r(290),r(291),r(292),r(293),r(294),r(295),r(296),r(297),r(298),r(299),r(300),r(301),r(302),r(303),r(304),r(305),r(306),r(307),r(308),r(309),r(310),r(311),r(312),r(34);var n=r(318);function a(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}var o="FF FF FF FF FF FF FF FF FF FF FF FF FF FF FF FF",i=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.canvas=null,this.tiles=[],this.colors=[],this.rawImageData=[],this.lockFrame=!1,this.invertPalette=!1,this.bwPalette=[16777215,11184810,5592405,0],this.tileIndexIsFramePart=n.a}var e,r,i;return e=t,(r=[{key:"update",value:function(t){var e=this,r=t.canvas,n=void 0===r?null:r,a=t.tiles,o=void 0===a?[]:a,i=t.palette,c=void 0===i?[]:i,u=t.lockFrame,l=void 0!==u&&u,f=t.invertPalette,s=void 0!==f&&f,p=this.setCanvas(n),y=this.setPalette(c,s),d=this.setLockFrame(l);(p||y||d||!this.tiles.length)&&(this.tiles=[]);var h=this.setTiles(o),b=this.getHeight();if(0!==b){if(this.canvas){if(this.canvas.height!==b||!this.rawImageData.length){this.canvas.height=b;var m=new Uint8ClampedArray(160*b*4);this.rawImageData.forEach((function(t,e){m[e]=t})),this.rawImageData=m}h.forEach((function(t){var r=t.index,n=t.newTile;e.renderTile(r,n)})),this.updateCanvas(b)}}else this.canvas.height=0}},{key:"updateCanvas",value:function(t){var e,r=this.canvas.getContext("2d");try{e=new ImageData(this.rawImageData,160,t)}catch(n){e=r.getImageData(0,0,160,t),this.rawImageData.forEach((function(t,r){e.data[r]=t}))}r.putImageData(e,0,0)}},{key:"getScaledCanvas",value:function(t){var e=this,r=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=4,a=this.getHeight()-(r?8*n:0),o=160-(r?8*n:0),i=r?20-n:20,c=document.createElement("canvas"),u=c.getContext("2d");return c.width=o*t,c.height=a*t,this.tiles.map((function(t,n){return r&&e.tileIndexIsFramePart(n)?null:t})).filter(Boolean).forEach((function(n,a){e.paintTileScaled(e.decodeTile(n),a,u,t,i,r)})),c}},{key:"setCanvas",value:function(t){return this.canvas!==t&&(this.canvas=t,!0)}},{key:"setPalette",value:function(t,e){return(JSON.stringify(this.colors)!==JSON.stringify(t)||this.invertPalette!==e)&&(this.colors=t,this.invertPalette=e,this.colorData=this.colors.map((function(t){return 7!==t.length?null:parseInt(t.substring(1),16)})),!0)}},{key:"setLockFrame",value:function(t){return t!==this.lockFrame&&(this.lockFrame=t,!0)}},{key:"setTiles",value:function(t){var e=this,r=t.map((function(t,r){return t!==e.tiles[r]?{index:r,newTile:t}:null})).filter(Boolean);return this.tiles=t,r}},{key:"renderTile",value:function(t,e){var r=this.decodeTile(e);this.paintTile(r,t)}},{key:"decodeTile",value:function(){for(var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:o,e=t.replace(/[^0-9A-F]/gi,"").padEnd(32,"f"),r=new Array(16),n=0;n<r.length;n+=1)r[n]=parseInt(e.substr(2*n,2),16);for(var a=new Array(64),i=0;i<8;i+=1)for(var c=0;c<8;c+=1){var u=r[2*i+1]>>7-c&1,l=r[2*i]>>7-c&1;a[8*i+c]=u<<1|l}return a}},{key:"getRGBValue",value:function(t,e,r,n){var a=this.lockFrame&&!n&&this.tileIndexIsFramePart(r)?this.bwPalette:this.colorData,o=this.invertPalette?a[3-t[e]]:a[t[e]];return{r:(16711680&o)>>16,g:(65280&o)>>8,b:255&o}}},{key:"paintTile",value:function(t,e){for(var r=e%20*8,n=8*Math.floor(e/20),a=0;a<8;a+=1)for(var o=0;o<8;o+=1){var i=4*(r+a+160*(n+o)),c=this.getRGBValue(t,8*o+a,e,!1);this.rawImageData[i]=c.r,this.rawImageData[i+1]=c.g,this.rawImageData[i+2]=c.b,this.rawImageData[i+3]=255}}},{key:"paintTileScaled",value:function(t,e,r,n,a){for(var o=arguments.length>5&&void 0!==arguments[5]&&arguments[5],i=e%a,c=Math.floor(e/a),u=8*i*n,l=8*c*n,f=0;f<8;f+=1)for(var s=0;s<8;s+=1){var p=this.getRGBValue(t,8*s+f,e,o);r.fillStyle="rgb(".concat(p.r,", ").concat(p.g,", ").concat(p.b,")"),r.fillRect(u+f*n,l+s*n,n+1,n+1)}}},{key:"getHeight",value:function(){return 8*Math.ceil(this.tiles.length/20)}}])&&a(e.prototype,r),i&&a(e,i),t}();e.a=i},225:function(t,e,r){"use strict";r(55),r(125),r(126),r(158),r(50),r(175),r(127),r(128),r(79),r(169),r(56),r(247),r(124),r(176),r(122),r(80),r(18),r(21),r(52),r(123),r(98),r(167),r(97);var n=r(224),a=r(222),o=r(242),i=r(203),c=r(168);function u(t){return function(t){if(Array.isArray(t))return l(t)}(t)||function(t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(t))return Array.from(t)}(t)||function(t,e){if(!t)return;if("string"==typeof t)return l(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);"Object"===r&&t.constructor&&(r=t.constructor.name);if("Map"===r||"Set"===r)return Array.from(t);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return l(t,e)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function l(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}e.a=function(t){return function(e,r){return function(l){var f=t.exportScaleFactors,s=t.exportFileTypes,p=t.exportCropFrame,y=!!r.hashes,d=y?new a.a:new n.a,h=r.lockFrame||!1,b=r.invertPalette||!1;y?d.update({tiles:l,palette:e,lockFrame:h}):d.update({tiles:l,palette:e.palette,lockFrame:h,invertPalette:b});var m=u(f).filter((function(t){return"number"==typeof t})),g=u(s);m.length||m.push(4),g.length||g.push("png");var v=m.map((function(t){return g.map((function(n){return new Promise((function(a){var l=Object(o.a)({image:r,palette:e,exportScaleFactor:t});if("txt"===n){if(r.hashes)return void a(null);Object(i.b)(r.hash,null).then((function(t){var e=t.map((function(t){return t.match(/.{1,2}/g).join(" ")})).reduce((function(t,e,r){return[].concat(u(t),r%40?[e]:[c.i,e])}),[]),o=[c.g].concat(u(e),[c.f,c.j]).join("\n");a({folder:"images",filename:"".concat(l,".").concat(n),blob:new Blob(new Array(o),{type:"text/plain"}),title:r.title})}))}else{d.getScaledCanvas(t,p).toBlob((function(t){a({filename:"".concat(l,".").concat(n),blob:t,title:r.title})}),"image/".concat(n),1)}}))}))}));return Promise.all(v.flat()).then((function(t){return t.filter(Boolean)}))}}}},238:function(t,e,r){"use strict";r.d(e,"a",(function(){return a})),r.d(e,"b",(function(){return n}));r(33);var n=[{key:"socketUrl",saveLocally:!0,saveExport:["settings"],value:"localhost:3001"},{key:"printerUrl",saveLocally:!0,saveExport:["settings"],value:""},{key:"activePalette",saveLocally:!0,saveExport:["settings","remote"],value:"bw"},{key:"images",saveLocally:!0,saveExport:["selected_images","images","remote"],value:[]},{key:"galleryView",saveLocally:!0,saveExport:["settings"],value:"1x"},{key:"exportScaleFactors",saveLocally:!0,saveExport:["settings","remote"],value:[4]},{key:"exportFileTypes",saveLocally:!0,saveExport:["settings","remote"],value:["png"]},{key:"pageSize",saveLocally:!0,saveExport:["settings","remote"],value:15},{key:"imageSelection",saveLocally:!0,saveExport:["selected_images"],value:[]},{key:"rgbnImages",saveLocally:!0,saveExport:[],value:{}},{key:"editImage",saveLocally:!0,saveExport:[],value:null},{key:"videoParams",saveLocally:!0,saveExport:["settings","remote"],value:{}},{key:"filtersActiveTags",saveLocally:!0,saveExport:[],value:[]},{key:"filtersVisible",saveLocally:!0,saveExport:[],value:!1},{key:"savFrameTypes",saveLocally:!0,saveExport:["settings","remote"],value:"int"},{key:"sortBy",saveLocally:!0,saveExport:["settings","remote"],value:"created_asc"},{key:"exportCropFrame",saveLocally:!0,saveExport:["settings","remote"],value:!1},{key:"hideDates",saveLocally:!0,saveExport:["settings","remote"],value:!1},{key:"palettes",saveLocally:!0,saveExport:["palettes","remote"],value:[]},{key:"framesMessage",saveLocally:!0,saveExport:["settings","remote"],value:0},{key:"frames",saveLocally:!0,saveExport:["frames","remote"],value:[]},{key:"recentImports",saveLocally:!0,saveExport:[],value:[]},{key:"gitStorage",saveLocally:!0,saveExport:[],value:{use:!1,owner:"",repo:"",branch:"",token:"",throttle:"330"}},{key:"dropboxStorage",saveLocally:!0,saveExport:[],value:{}}],a={};n.forEach((function(t){var e=t.key,r=t.value;a[e]=r}))},242:function(t,e,r){"use strict";r(50),r(169),r(56),r(122),r(18),r(123),r(193);var n=r(170),a=r.n(n),o=r(243),i=r.n(o),c=r(168);a.a.extend(i.a);e.a=function(t){var e,r,n,o,i,u,l=t.image,f=void 0!==l&&l,s=t.palette,p=void 0!==s&&s,y=t.exportScaleFactor,d=void 0!==y&&y,h=t.frameRate,b=void 0!==h&&h,m=t.altTitle,g=void 0!==m&&m,v=t.useCurrentDate,O=void 0!==v&&v,A=t.frameName,E=void 0!==A&&A,S=t.paletteShort,F=void 0!==S&&S,T=O?a()():a()(f.created,c.a),w=!!T.isValid()&&T.format(c.b),I=F||!!p&&(p.shortName||(r=(e=p).r,n=e.g,o=e.b,i=e.n,u=function(t){return t.toString(16).padStart(2,"0")},[r.map(u).join(""),n.map(u).join(""),o.map(u).join(""),i.map(u).join("")].join("")));return[w,f&&f.title?f.title:g,d?"".concat(d,"x"):null,b?"".concat(b,"fps"):null,E,I].filter(Boolean).join("-")}},244:function(t,e,r){"use strict";r.d(e,"a",(function(){return u})),r.d(e,"b",(function(){return l})),r.d(e,"c",(function(){return f}));r(55),r(125),r(126),r(50),r(33),r(127),r(128),r(79),r(124),r(122),r(80),r(83),r(81),r(82),r(84),r(51),r(18),r(52),r(123),r(98),r(164),r(34),r(97);function n(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(t)))return;var r=[],n=!0,a=!1,o=void 0;try{for(var i,c=t[Symbol.iterator]();!(n=(i=c.next()).done)&&(r.push(i.value),!e||r.length!==e);n=!0);}catch(t){a=!0,o=t}finally{try{n||null==c.return||c.return()}finally{if(a)throw o}}return r}(t,e)||function(t,e){if(!t)return;if("string"==typeof t)return a(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);"Object"===r&&t.constructor&&(r=t.constructor.name);if("Map"===r||"Set"===r)return Array.from(t);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return a(t,e)}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function a(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function o(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function i(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?o(Object(r),!0).forEach((function(e){c(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):o(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function c(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}var u=function(t,e){return i(i({},t),{},{sortIndex:e})},l=function(t){return i(i({},t),{},{sortIndex:void 0})},f=function(t){var e=t.sortBy;return function(t,r){if(!e)return 0;var a=n(e.split("_"),2),o=a[0],i=a[1],c=t[o],u=r[o],l="desc"===i?-1:1;return c&&u?c>u?l:c<u?-l:t.sortIndex<r.sortIndex?l:-l:0}}},245:function(t,e,r){"use strict";r(55),r(125),r(126),r(158),r(50),r(184),r(127),r(163),r(128),r(79),r(124),r(122),r(80),r(18),r(123),r(166),r(98),r(97);function n(t){return function(t){if(Array.isArray(t))return a(t)}(t)||function(t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(t))return Array.from(t)}(t)||function(t,e){if(!t)return;if("string"==typeof t)return a(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);"Object"===r&&t.constructor&&(r=t.constructor.name);if("Map"===r||"Set"===r)return Array.from(t);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return a(t,e)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function a(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}e.a=function(t){var e=t.initial,r=t.add,a=t.remove,o=[].concat(n(e),n(r));return o.filter((function(t,e){return o.findIndex((function(e){return e===t}))===e})).filter((function(t){return!a.includes(t)}))}},248:function(t,e,r){"use strict";(function(t){r(18),r(21);e.a=function(e,r){return new Promise((function(n,a){var o=new FileReader;switch(o.onload=function(e){var o=e.target;if(o.result)return"arrayBuffer"===r?void n(t.from(o.result)):void n(o.result);a(new Error("Filereader has no result"))},o.onerror=function(t){a(t)},r){case"arrayBuffer":o.readAsArrayBuffer(e);break;case"text":o.readAsText(e);break;case"binaryString":o.readAsBinaryString(e);break;case"dataURL":o.readAsDataURL(e);break;default:a(new Error('readAs param missing or unknown type "'.concat(r,'"')))}}))}}).call(this,r(162).Buffer)},277:function(t,e,r){"use strict";r(55),r(50),r(33),r(163),r(83),r(81),r(82),r(84),r(51),r(18),r(21),r(166),r(34);var n=r(238),a=(r(79),r(56),r(98),r(97),r(16)),o=function(t,e){return Promise.all(e.map((function(t){return a.b.getItem(t).then((function(e){return{hash:t,data:e}}))}))).then((function(t){var e={};return t.forEach((function(t){var r=t.hash,n=t.data;e[r]=n})),e}))},i=function(t){var e=t.map((function(t){return t.id}));return Promise.all(e.map((function(t){return a.a.getItem(t).then((function(e){return{frameId:t,data:e}}))}))).then((function(t){var e={};return t.forEach((function(t){var r=t.frameId,n=t.data;e["frame-".concat(r)]=n})),e}))},c=function(t,e){var r=e.images,n=e.imageSelection;switch(t){case"images":return r.map((function(t){return t.hash}));case"selected_images":return n;default:return[]}},u=r(58);function l(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function f(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?l(Object(r),!0).forEach((function(e){s(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):l(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function s(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}e.a=function(t){return function(e){var r=t.getState(),a=JSON.parse(localStorage.getItem("gbp-web-state"));delete a.gitStorage,delete a.dropboxStorage,"esp8266"===Object(u.a)().env&&delete a.printerUrl;var l={};switch(n.b.forEach((function(t){var n=t.saveExport,o=t.key;n.includes(e)&&(l[o]=a[o],"images"===o&&"selected_images"===e&&(l[o]=l[o].filter((function(t){var n=t.hash;return c(e,r).includes(n)}))),"palettes"===o&&(l[o]=a[o].filter((function(t){return!t.isPredefined}))))})),e){case"debug":return Promise.resolve(JSON.stringify({state:a},null,2));case"settings":case"remote":return Promise.resolve(JSON.stringify({state:l},null,2));case"images":case"selected_images":return o(e,c(e,r)).then((function(t){return JSON.stringify(f({state:l},t),null,2)}));case"frames":return i(r.frames).then((function(t){return JSON.stringify(f({state:l},t),null,2)}));case"palettes":return Promise.resolve(l.palettes).then((function(t){return JSON.stringify({state:{palettes:t}},null,2)}));default:return null}}}},317:function(t,e,r){"use strict";r(55),r(125),r(126),r(33),r(127),r(128),r(79),r(124),r(122),r(80),r(18),r(21),r(123),r(98),r(34),r(97);var n=r(192);function a(t){return function(t){if(Array.isArray(t))return o(t)}(t)||function(t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(t))return Array.from(t)}(t)||function(t,e){if(!t)return;if("string"==typeof t)return o(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);"Object"===r&&t.constructor&&(r=t.constructor.name);if("Map"===r||"Set"===r)return Array.from(t);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return o(t,e)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function o(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}e.a=function(t,e){return 360!==t.length?Promise.resolve(t):Object(n.a)(e).then((function(e){var r=a(t);return e.upper.forEach((function(t,e){r[e]=t})),e.lower.forEach((function(t,e){r[e+320]=t})),e.left.forEach((function(t,e){r[20*e+40]=t[0],r[20*e+41]=t[1]})),e.right.forEach((function(t,e){r[20*e+58]=t[0],r[20*e+59]=t[1]})),r})).catch((function(){return t}))}},318:function(t,e,r){"use strict";e.a=function(t){if(t<40)return!0;if(t>=320)return!0;switch(t%20){case 0:case 1:case 18:case 19:return!0;default:return!1}}},323:function(t,e,r){"use strict";r(135),r(163),r(56),r(166);var n=r(170),a=r.n(n),o=r(189),i=r(168);e.a=function(t,e){return function(r){if(t.length){if(t.includes(o.e)&&0===r.tags.length)return!0;if(t.includes(o.b))if(a()(r.created,i.a).unix()>a()().subtract("1","day").unix())return!0;return t.includes(o.c)?e.map((function(t){return t.hash})).includes(r.hash):!(!t.includes(o.d)||!r.hashes)||(!(!t.includes(o.a)||r.hashes)||!!r.tags.find((function(e){return t.includes(e)})))}return!0}}},325:function(t,e,r){"use strict";r(135),r(247),r(80),r(52),r(167);var n=function(t,e){switch(t){case"hk":return"Hallo Katze!";case"int":return"International Frames (GameBoy Camera)";case"jp":return"Japanese Frames (Pocket Camera)";default:return e}};e.a=function(t){return t.reduce((function(t,e){var r,a=e.id,o=e.name;try{r=a.match(/^[a-z]{2,}/g)[0]}catch(e){return t}return t.find((function(t){return t.id===r}))||t.push({id:r,name:n(r,o)}),t}),[])}},759:function(t,e,r){"use strict";r.r(e);r(158),r(217),r(18),r(21);var n=r(154),a=r.n(n),o=r(156),i=r(236),c=r(219),u=function(t,e){return void 0!==t?t:e},l=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"cybl",e=arguments.length>1?arguments[1]:void 0;switch(e.type){case"PALETTE_SET_ACTIVE":return e.payload;case"GLOBAL_UPDATE":return u(e.payload.activePalette,t);case"PALETTE_DELETE":return e.payload.newSelectedPalette||t;default:return t}};r(55),r(125),r(126),r(127),r(128),r(79),r(124),r(122),r(80),r(123),r(98),r(97);function f(t){return function(t){if(Array.isArray(t))return s(t)}(t)||function(t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(t))return Array.from(t)}(t)||function(t,e){if(!t)return;if("string"==typeof t)return s(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);"Object"===r&&t.constructor&&(r=t.constructor.name);if("Map"===r||"Set"===r)return Array.from(t);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return s(t,e)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function s(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}var p=null,y=function(){if(null===p)try{p=window.navigator.canShare({files:[new File([new Blob(f("test"))],"test.txt",{type:"text/plain",lastModified:new Date})]})}catch(t){p=!1}return p};r(50);function d(t){return function(t){if(Array.isArray(t))return h(t)}(t)||function(t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(t))return Array.from(t)}(t)||function(t,e){if(!t)return;if("string"==typeof t)return h(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);"Object"===r&&t.constructor&&(r=t.constructor.name);if("Map"===r||"Set"===r)return Array.from(t);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return h(t,e)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function h(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}var b=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],e=arguments.length>1?arguments[1]:void 0;switch(e.type){case"CONFIRM_ASK":return[e.payload].concat(d(t));case"DELETE_IMAGE":case"DELETE_IMAGES":case"PALETTE_DELETE":case"CONFIRM_ANSWERED":return t.filter((function(t,e){return e}));default:return t}},m=function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0],e=arguments.length>1?arguments[1]:void 0;switch(e.type){case"IMPORT_DRAGOVER_START":return!0;case"IMPORT_DRAGOVER_END":return!1;default:return t}};r(33),r(83),r(81),r(82),r(84),r(51),r(34);function g(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function v(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?g(Object(r),!0).forEach((function(e){O(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):g(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function O(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}var A=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=arguments.length>1?arguments[1]:void 0;switch(e.type){case"DROPBOX_LOGOUT":return{use:t.use};case"SET_DROPBOX_STORAGE":return v(v({},t),e.payload);default:return t}},E=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,e=arguments.length>1?arguments[1]:void 0;switch(e.type){case"EDIT_IMAGE":return{hash:e.payload};case"EDIT_IMAGE_SELECTION":return e.payload;case"CANCEL_EDIT_IMAGE":case"UPDATE_IMAGE":case"UPDATE_IMAGES_BATCH":case"CLOSE_OVERLAY":case"GLOBAL_UPDATE":return null;default:return t}},S=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=arguments.length>1?arguments[1]:void 0;switch(e.type){case"SET_EDIT_PALETTE":return e.payload;case"PALETTE_CANCEL_EDIT":case"PALETTE_UPDATE":case"CLOSE_OVERLAY":return{};default:return t}},F=function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0],e=arguments.length>1?arguments[1]:void 0;switch(e.type){case"SET_EXPORT_CROP_FRAME":return e.payload;case"GLOBAL_UPDATE":return u(e.payload.exportCropFrame,t);default:return t}},T=r(205);function w(t){return function(t){if(Array.isArray(t))return I(t)}(t)||function(t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(t))return Array.from(t)}(t)||function(t,e){if(!t)return;if("string"==typeof t)return I(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);"Object"===r&&t.constructor&&(r=t.constructor.name);if("Map"===r||"Set"===r)return Array.from(t);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return I(t,e)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function I(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}var _=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:["png"],e=arguments.length>1?arguments[1]:void 0;switch(e.type){case"UPDATE_EXPORT_FILE_TYPES":return e.payload.checked?Object(T.a)([].concat(w(t),[e.payload.fileType])):t.filter((function(t){return t!==e.payload.fileType}));case"GLOBAL_UPDATE":return u(e.payload.exportFileTypes,t);default:return t}};function j(t){return function(t){if(Array.isArray(t))return D(t)}(t)||function(t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(t))return Array.from(t)}(t)||function(t,e){if(!t)return;if("string"==typeof t)return D(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);"Object"===r&&t.constructor&&(r=t.constructor.name);if("Map"===r||"Set"===r)return Array.from(t);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return D(t,e)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function D(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}var P=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[1],e=arguments.length>1?arguments[1]:void 0;switch(e.type){case"UPDATE_EXPORT_SCALE_FACTORS":return e.payload.checked?window.navigator.msSaveBlob?[e.payload.factor]:[].concat(j(t),[e.payload.factor]):t.filter((function(t){return t!==e.payload.factor}));case"GLOBAL_UPDATE":return u(e.payload.exportScaleFactors,t);default:return t}},R=(r(163),r(166),r(189)),L=[R.e,R.b,R.a,R.d,R.c],N=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],e=arguments.length>1?arguments[1]:void 0;switch(e.type){case"SET_ACTIVE_TAGS":return e.payload;case"SET_AVAILABLE_TAGS":return t.filter((function(t){return L.includes(t)||e.payload.includes(t)}));default:return t}},C=function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0],e=arguments.length>1?arguments[1]:void 0;switch(e.type){case"SHOW_FILTERS":return!0;case"CLOSE_OVERLAY":case"HIDE_FILTERS":case"SET_ACTIVE_TAGS":return!1;default:return t}},M=(r(138),r(206));function G(t){return function(t){if(Array.isArray(t))return B(t)}(t)||function(t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(t))return Array.from(t)}(t)||function(t,e){if(!t)return;if("string"==typeof t)return B(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);"Object"===r&&t.constructor&&(r=t.constructor.name);if("Map"===r||"Set"===r)return Array.from(t);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return B(t,e)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function B(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}var k=function(t,e){return t.id<e.id?-1:t.id>e.id?1:0},U=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],e=arguments.length>1?arguments[1]:void 0;switch(e.type){case"ADD_FRAME":return Object(M.a)("id")([e.payload].concat(G(t))).sort(k);case"DELETE_FRAME":return t.filter((function(t){return t.id!==e.payload}));case"GLOBAL_UPDATE":return Object(M.a)("id")(e.payload.frames).sort(k);default:return t}},x=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,e=arguments.length>1?arguments[1]:void 0;switch(e.type){case"FRAMES_MESSAGE_SHOW":return 1;case"FRAMES_MESSAGE_HIDE":return 2;default:return t}},H=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"1x",e=arguments.length>1?arguments[1]:void 0;switch(e.type){case"SET_CURRENT_GALLERY_VIEW":return e.payload;case"GLOBAL_UPDATE":return u(e.payload.galleryView,t);default:return t}};function V(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function Y(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?V(Object(r),!0).forEach((function(e){X(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):V(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function X(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}var W=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=arguments.length>1?arguments[1]:void 0;switch(e.type){case"SET_GIT_STORAGE":return Y(Y({},t),e.payload);default:return t}},$=function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0],e=arguments.length>1?arguments[1]:void 0;switch(e.type){case"SET_HIDE_DATES":return e.payload;case"GLOBAL_UPDATE":return u(e.payload.hideDates,t);default:return t}};r(135),r(56);function J(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function z(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?J(Object(r),!0).forEach((function(e){K(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):J(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function K(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function Q(t){return function(t){if(Array.isArray(t))return q(t)}(t)||function(t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(t))return Array.from(t)}(t)||function(t,e){if(!t)return;if("string"==typeof t)return q(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);"Object"===r&&t.constructor&&(r=t.constructor.name);if("Map"===r||"Set"===r)return Array.from(t);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return q(t,e)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function q(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}var Z=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],e=arguments.length>1?arguments[1]:void 0;switch(e.type){case"ADD_IMAGE":return Object(M.a)("hash")([].concat(Q(t),[e.payload]));case"DELETE_IMAGE":return Q(t.filter((function(t){return t.hash!==e.payload})));case"DELETE_IMAGES":return Q(t.filter((function(t){var r=t.hash;return!e.payload.includes(r)})));case"UPDATE_IMAGE":return t.map((function(t){return t.hash===e.payload.hash?z(z({},t),e.payload):t}));case"UPDATE_IMAGES_BATCH":return t.map((function(t){return e.payload.find((function(e){return e.hash===t.hash}))||t}));case"GLOBAL_UPDATE":return Object(M.a)("hash")(e.payload.images);default:return t}};function tt(t){return function(t){if(Array.isArray(t))return et(t)}(t)||function(t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(t))return Array.from(t)}(t)||function(t,e){if(!t)return;if("string"==typeof t)return et(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);"Object"===r&&t.constructor&&(r=t.constructor.name);if("Map"===r||"Set"===r)return Array.from(t);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return et(t,e)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function et(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}var rt=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],e=arguments.length>1?arguments[1]:void 0;switch(e.type){case"IMAGE_SELECTION_REMOVE":case"DELETE_IMAGE":return tt(t.filter((function(t){return t!==e.payload})));case"IMAGE_SELECTION_ADD":return[].concat(tt(t),[e.payload]);case"IMAGE_SELECTION_SET":return e.payload;case"DELETE_IMAGES":return[];case"GLOBAL_UPDATE":return u(e.payload.imageSelection,t);default:return t}},nt=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,e=arguments.length>1?arguments[1]:void 0;switch(e.type){case"IMPORT_QUEUE_SIZE":return e.payload;default:return t}},at=function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0],e=arguments.length>1?arguments[1]:void 0;switch(e.type){case"SET_IS_FULLSCREEN":return e.payload;default:return t}},ot=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,e=arguments.length>1?arguments[1]:void 0;switch(e.type){case"IMAGE_SELECTION_ADD":case"IMAGE_SELECTION_REMOVE":return e.payload;case"DELETE_IMAGE":case"DELETE_IMAGES":case"SET_CURRENT_GALLERY_VIEW":return null;default:return t}},it=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,e=arguments.length>1?arguments[1]:void 0;switch(e.type){case"SET_LIGHTBOX_IMAGE_INDEX":return e.payload;default:return t}};function ct(t){return function(t){if(Array.isArray(t))return ut(t)}(t)||function(t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(t))return Array.from(t)}(t)||function(t,e){if(!t)return;if("string"==typeof t)return ut(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);"Object"===r&&t.constructor&&(r=t.constructor.name);if("Map"===r||"Set"===r)return Array.from(t);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return ut(t,e)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ut(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}var lt=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],e=arguments.length>1?arguments[1]:void 0;switch(e.type){case"CLEAR_LINES":case"IMAGE_COMPLETE":return[];case"NEW_LINES":return[].concat(ct(t),ct(e.payload));case"SET_ALL_LINES":return e.payload.lines;default:return t}},ft=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,e=arguments.length>1?arguments[1]:void 0;switch(e.type){case"SET_PAGESIZE":return e.payload;case"GLOBAL_UPDATE":return u(e.payload.pageSize,t);default:return t}};function st(t){return function(t){if(Array.isArray(t))return pt(t)}(t)||function(t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(t))return Array.from(t)}(t)||function(t,e){if(!t)return;if("string"==typeof t)return pt(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);"Object"===r&&t.constructor&&(r=t.constructor.name);if("Map"===r||"Set"===r)return Array.from(t);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return pt(t,e)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function pt(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}var yt=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],e=arguments.length>1?arguments[1]:void 0;switch(e.type){case"PALETTE_DELETE":return st(t.filter((function(t){return t.shortName!==e.payload.shortName})));case"PALETTE_UPDATE":return Object(M.a)("shortName")([].concat(st(t.map((function(t){return t.shortName!==e.payload.shortName?t:e.payload}))),[e.payload]));case"GLOBAL_UPDATE":return Object(M.a)("shortName").apply(void 0,[e.payload.palettes].concat(st(t)));default:return t}},dt=function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0],e=arguments.length>1?arguments[1]:void 0;switch(e.type){case"REMOTE_CALL_FUNCTION":case"HEARTBEAT_TIMED_OUT":return!0;case"PRINTER_FUNCTIONS_RECEIVED":case"PRINTER_READY":case"PRINTER_DATA_RECEIVED":return!1;default:return t}},ht=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=arguments.length>1?arguments[1]:void 0;switch(e.type){case"PRINTER_DATA_RECEIVED":return e.payload;case"HEARTBEAT_TIMED_OUT":return{};default:return t}},bt=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],e=arguments.length>1?arguments[1]:void 0;switch(e.type){case"PRINTER_FUNCTIONS_RECEIVED":return e.payload;case"HEARTBEAT_TIMED_OUT":return[];default:return t}},mt=r(207),gt=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",e=arguments.length>1?arguments[1]:void 0;switch(e.type){case"SET_PRINTER_URL":return Object(mt.a)(e.payload,"http");case"GLOBAL_UPDATE":return u(e.payload.printerUrl,t);default:return t}};function vt(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function Ot(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?vt(Object(r),!0).forEach((function(e){At(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):vt(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function At(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}var Et=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{gif:0},e=arguments.length>1?arguments[1]:void 0;switch(e.type){case"ANIMATE_IMAGES":return Ot(Ot({},t),{},{gif:.01});case"CREATE_GIF_PROGRESS":return Ot(Ot({},t),{},{gif:e.payload});default:return t}};function St(t){return function(t){if(Array.isArray(t))return Ft(t)}(t)||function(t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(t))return Array.from(t)}(t)||function(t,e){if(!t)return;if("string"==typeof t)return Ft(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);"Object"===r&&t.constructor&&(r=t.constructor.name);if("Map"===r||"Set"===r)return Array.from(t);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Ft(t,e)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Ft(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function Tt(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function wt(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?Tt(Object(r),!0).forEach((function(e){It(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):Tt(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function It(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}var _t=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{git:[],dropbox:[]},e=arguments.length>1?arguments[1]:void 0;switch(e.type){case"GITSTORAGE_LOG_ACTION":return wt(wt({},t),{},{git:[e.payload].concat(St(t.git))});case"DROPBOX_LOG_ACTION":return wt(wt({},t),{},{dropbox:[e.payload].concat(St(t.dropbox))});case"STORAGE_SYNC_DONE":return wt(wt({},t),{},It({},e.payload.storageType,[{timestamp:(new Date).getTime()/1e3,message:"."}].concat(St(t[e.payload.storageType]))));case"LOG_CLEAR":return{git:[],dropbox:[]};default:return t}},jt=r(170),Dt=r.n(jt);function Pt(t){return function(t){if(Array.isArray(t))return Rt(t)}(t)||function(t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(t))return Array.from(t)}(t)||function(t,e){if(!t)return;if("string"==typeof t)return Rt(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);"Object"===r&&t.constructor&&(r=t.constructor.name);if("Map"===r||"Set"===r)return Array.from(t);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Rt(t,e)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Rt(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}var Lt=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],e=arguments.length>1?arguments[1]:void 0;switch(e.type){case"ADD_IMAGE":return e.payload.hashes?t:[].concat(Pt(t.filter((function(t){return t.hash!==e.payload.hash}))),[{hash:e.payload.hash,timestamp:Dt()().unix()}]);case"GLOBAL_UPDATE":var r,n;return(null===(r=e.payload)||void 0===r||null===(n=r.imageSelection)||void 0===n?void 0:n.length)?[].concat(Pt(t.filter((function(t){var r=t.hash;return!e.payload.imageSelection.includes(r)}))),Pt(e.payload.imageSelection.map((function(t){return{hash:t,timestamp:Dt()().unix()}})))):t;default:return t}};function Nt(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function Ct(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?Nt(Object(r),!0).forEach((function(e){Mt(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):Nt(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function Mt(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}var Gt={r:"",g:"",b:"",n:""},Bt=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Gt,e=arguments.length>1?arguments[1]:void 0;switch(e.type){case"UPDATE_RGBN_PART":return Ct(Ct({},t),e.payload);case"ADD_IMAGE":return e.payload.hashes?Ct({},Gt):t;case"DELETE_IMAGE":case"DELETE_IMAGES":return Gt;case"GLOBAL_UPDATE":return u(e.payload.rgbnImages,t);default:return t}},kt=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"int",e=arguments.length>1?arguments[1]:void 0;switch(e.type){case"SET_SAV_FRAME_TYPES":return e.payload;case"GLOBAL_UPDATE":return u(e.payload.savFrameTypes,t);default:return t}},Ut=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",e=arguments.length>1?arguments[1]:void 0;switch(e.type){case"SET_SORT_BY":return e.payload;case"GLOBAL_UPDATE":return u(e.payload.sortBy,t);default:return t}},xt=function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0],e=arguments.length>1?arguments[1]:void 0;switch(e.type){case"SHOW_SORT_OPTIONS":return!0;case"HIDE_SORT_OPTIONS":case"CLOSE_OVERLAY":case"SET_SORT_BY":return!1;default:return t}},Ht=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:WebSocket.CLOSED,e=arguments.length>1?arguments[1]:void 0;switch(e.type){case"SET_SOCKET_STATE":return e.payload;default:return t}},Vt=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",e=arguments.length>1?arguments[1]:void 0;switch(e.type){case"SET_SOCKET_URL":return Object(mt.a)(e.payload,"ws");case"GLOBAL_UPDATE":return u(e.payload.socketUrl,t);default:return t}},Yt=function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0],e=arguments.length>1?arguments[1]:void 0;switch(e.type){case"STORAGE_SYNC_START":return!0;case"STORAGE_SYNC_DONE":return!1;default:return t}},Xt=function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0],e=arguments.length>1?arguments[1]:void 0;switch(e.type){case"STORAGE_SYNC_SELECT":return!0;case"STORAGE_SYNC_START":case"STORAGE_SYNC_DONE":case"STORAGE_SYNC_CANCEL":return!1;default:return t}};function Wt(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function $t(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?Wt(Object(r),!0).forEach((function(e){Jt(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):Wt(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function Jt(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}var zt={imageSelection:[]},Kt=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:zt,e=arguments.length>1?arguments[1]:void 0;switch(e.type){case"SET_VIDEO_PARAMS":return $t($t({},t),e.payload);case"ANIMATE_IMAGES":case"CANCEL_ANIMATE_IMAGES":case"CLOSE_OVERLAY":return $t($t({},t),{},{imageSelection:[]});case"GLOBAL_UPDATE":return u(e.payload.videoParams,t);default:return t}},Qt=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{height:window.innerHeight,width:window.innerWidth},e=arguments.length>1?arguments[1]:void 0;switch(e.type){case"WINDOW_DIMENSIONS":return e.payload;default:return t}},qt=Object(c.c)({activePalette:l,canShare:y,confirm:b,dragover:m,dropboxStorage:A,editImage:E,editPalette:S,exportCropFrame:F,exportFileTypes:_,exportScaleFactors:P,filtersActiveTags:N,filtersVisible:C,frames:U,framesMessage:x,galleryView:H,gitStorage:W,hideDates:$,images:Z,imageSelection:rt,importQueueSize:nt,isFullscreen:at,lastSelectedImage:ot,progressLog:_t,lightboxImage:it,lineBuffer:lt,pageSize:ft,palettes:yt,printerBusy:dt,printerData:ht,printerFunctions:bt,printerUrl:gt,progress:Et,recentImports:Lt,rgbnImages:Bt,savFrameTypes:kt,sortBy:Ut,sortOptionsVisible:xt,socketState:Ht,socketUrl:Vt,syncBusy:Yt,syncSelect:Xt,videoParams:Kt,windowDimensions:Qt}),Zt=r(409),te=r.n(Zt),ee=r(168),re=r(220);function ne(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function ae(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?ne(Object(r),!0).forEach((function(e){oe(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):ne(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function oe(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function ie(t){return function(t){if(Array.isArray(t))return ce(t)}(t)||function(t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(t))return Array.from(t)}(t)||function(t,e){if(!t)return;if("string"==typeof t)return ce(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);"Object"===r&&t.constructor&&(r=t.constructor.name);if("Map"===r||"Set"===r)return Array.from(t);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return ce(t,e)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ce(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}var ue=function(t){var e=Object(M.a)("shortName")([].concat(ie(te.a.map((function(t){return ae(ae({},t),{},{isPredefined:!0})}))),ie(t.palettes))),r=e.map((function(t){return t.shortName})),n=t.frames.map((function(t){return t.id})),a=Object(mt.a)(t.socketUrl,"ws"),o=Object(mt.a)(t.printerUrl,"http"),i=t.framesMessage,c=r.includes(t.activePalette)?t.activePalette:"bw",u=t.images.map((function(t){return t.tags=t.tags||[],t.hashes?t.palette?t.palette.blend?t:ae(ae({},t),{},{palette:ae(ae({},t.palette),{},{blend:re.b.MULTIPLY})}):ae(ae({},t),{},{palette:ee.e}):t.palette?r.includes(t.palette)?t:ae(ae({},t),{},{palette:r[0]||"bw"}):null})).filter(Boolean),l=u.map((function(t){return t.hash}));u.forEach((function(t){!t.frame||n.includes(t.frame)||i||(i=1)}));var f=Dt()().subtract(6,"hour").unix(),s=t.recentImports.filter((function(t){var e=t.hash,r=t.timestamp;return l.includes(e)&&r>f}));return ae(ae({},t),{},{images:u,palettes:e,socketUrl:a,printerUrl:o,framesMessage:i,activePalette:c,recentImports:s})},le=r(238),fe=function(t){return function(e){return function(r){e(r);var n=t.getState(),a={};le.b.forEach((function(t){var e=t.key;if(t.saveLocally)switch(e){case"palettes":a[e]=n.palettes.filter((function(t){return!t.isPredefined}));break;default:a[e]=n[e]}})),localStorage.setItem("gbp-web-state",JSON.stringify(a))}}},se=(r(184),r(284),r(466),r(290),r(291),r(292),r(293),r(294),r(295),r(296),r(297),r(298),r(299),r(300),r(301),r(302),r(303),r(304),r(305),r(306),r(307),r(308),r(309),r(310),r(311),r(312),r(134)),pe=r.n(se),ye=r(472),de=r(313),he=r(473),be=r.n(he),me=r(191),ge=r(208),ve=r(222),Oe=r(224),Ae=r(242);function Ee(t){return function(t){if(Array.isArray(t))return _e(t)}(t)||function(t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(t))return Array.from(t)}(t)||Ie(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Se(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function Fe(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?Se(Object(r),!0).forEach((function(e){Te(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):Se(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function Te(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function we(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(t)))return;var r=[],n=!0,a=!1,o=void 0;try{for(var i,c=t[Symbol.iterator]();!(n=(i=c.next()).done)&&(r.push(i.value),!e||r.length!==e);n=!0);}catch(t){a=!0,o=t}finally{try{n||null==c.return||c.return()}finally{if(a)throw o}}return r}(t,e)||Ie(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Ie(t,e){if(t){if("string"==typeof t)return _e(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?_e(t,e):void 0}}function _e(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}var je=function(t){return function(e){return function(r){if("ANIMATE_IMAGES"===r.type){var n=t.getState(),a=n.videoParams,o=a.scaleFactor,i=a.frameRate,c=a.imageSelection,u=a.yoyo,l=a.frame,f=a.lockFrame,s=a.invertPalette,p=a.palette,y=a.cropFrame;Promise.all(c.map((function(t){return n.images.find((function(e){return e.hash===t}))})).filter(Boolean).map((function(t){return Fe(Fe({},t),{},{frame:l||t.frame,palette:t.hashes?t.palette:p||t.palette})})).map((function(t){return Object(me.a)(n)(t).then((function(e){var r=Object(ge.a)(n,t),a=!!t.hashes,i=a?new ve.a:new Oe.a,c=f||t.lockFrame||!1,u=s||t.invertPalette||!1;return a?i.update({tiles:e,palette:r,lockFrame:c}):i.update({tiles:e,palette:r.palette,lockFrame:c,invertPalette:u}),i.getScaledCanvas(o,y)}))}))).then((function(e){var r=[],n=new pe.a(1,1/0),a=new ye.GifWriter(r,e[0].width,e[0].height,{loop:65535}),c=Ee(e);if(u){var f=Ee(e).reverse();f.shift(),f.pop(),c.push.apply(c,Ee(f))}var s=function(t,e,r,n,a){return function(o,i){return r.add((function(){return new Promise((function(r,c){for(var u=o.getContext("2d").getImageData(0,0,o.width,o.height).data,l=[],f=be()(u,4).map((function(t){var e=we(t,3),r=(e[0]<<16)+(e[1]<<8)+e[2],n=l.findIndex((function(t){return t===r}));return-1===n&&(n=l.length,l.push(r)),n}));l.length<256;)l.push(0);try{t({type:"CREATE_GIF_PROGRESS",payload:(i+1)/a}),window.requestAnimationFrame((function(){e.addFrame(0,0,o.width,o.height,f,{delay:Math.round(100/n),palette:l}),r()}))}catch(t){c(t)}}))}))}}(t.dispatch,a,n,i,c.length);Promise.all(c.map(s)).then((function(){var e,n=Object(Ae.a)({useCurrentDate:!0,exportScaleFactor:o,frameRate:i,altTitle:"animated",frameName:l,paletteShort:p}),c=a.end();try{e=new File([new Uint8Array(r.slice(0,c)).buffer],"".concat(n,".gif"),{type:"image/gif"})}catch(t){e=new Blob([new Uint8Array(r.slice(0,c)).buffer])}Object(de.saveAs)(e,"".concat(n,".gif")),t.dispatch({type:"CREATE_GIF_PROGRESS",payload:0})}))})).catch((function(e){t.dispatch({type:"ERROR",payload:e.message})}))}e(r)}}},De=(r(175),r(176),r(52),r(85),r(194)),Pe=r(245),Re=r(244);function Le(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function Ne(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?Le(Object(r),!0).forEach((function(e){Ce(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):Le(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function Ce(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function Me(t){return(Me="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}var Ge=["lockFrame","frame","palette","invertPalette","title","tags","created"],Be=function(t){return Object(T.a)(t.map((function(t){return t.tags})).flat())},ke=function(t){return function(e){return function(r){if("IMAGE_SELECTION_SHIFTCLICK"===r.type){var n=t.getState(),a=Object(De.a)(n),o=n.lastSelectedImage,i=n.pageSize,c=a.findIndex((function(t){return t.hash===r.payload})),u=a.findIndex((function(t){return t.hash===o}));-1===u&&(u=r.page*i);var l=Math.min(u,c),f=Math.max(u,c);t.dispatch({type:"IMAGE_SELECTION_SET",payload:a.slice(l,f+1).map((function(t){return t.hash}))})}if("UPDATE_IMAGES_BATCH"===r.type){var s=t.getState(),p=Object(Re.c)(s),y=s.editImage,d=s.images,h=r.payload,b=h.image,m=h.batch,g=h.tagChanges;if(m&&y.batch&&y.batch.length){var v=y.batch.map((function(t){return d.find((function(e){return e.hash===t}))})).map(Re.a).sort(p).map(Re.b).map((function(t,e){if(!t)return!1;var r={},n=t.tags;return Ge.forEach((function(a){switch(a){case"title":if(!m.title)break;r.title=b.title.replace(/%n/gi,e+1);break;case"created":if(!m.created)break;r.created=b.created;break;case"palette":if(!m.palette)break;Me(t.palette)===Me(b.palette)&&(r.palette=b.palette);break;case"invertPalette":if(!m.invertPalette)break;r.invertPalette=b.invertPalette;break;case"frame":if(!m.frame)break;r.frame=b.frame;break;case"lockFrame":if(!m.lockFrame)break;r.lockFrame=b.lockFrame;break;case"tags":n=Object(Pe.a)(Ne(Ne({},g),{},{initial:t.tags}))}})),Ne(Ne(Ne({},t),r),{},{tags:n})})).filter(Boolean);Object.assign(r,{payload:v})}}if("BATCH_TASK"!==r.type)e(r);else{var O=t.getState(),A=O.images,E=O.imageSelection,S=O.pageSize,F=A.filter((function(t){var e=t.hash;return E.includes(e)}));if(E.length)switch(r.payload){case"delete":t.dispatch({type:"CONFIRM_ASK",payload:{message:"Delete ".concat(E.length," images?"),confirm:function(){t.dispatch({type:"DELETE_IMAGES",payload:E})},deny:function(){t.dispatch({type:"CONFIRM_ANSWERED"})}}});break;case"animate":t.dispatch({type:"SET_VIDEO_PARAMS",payload:{imageSelection:E}});break;case"download":t.dispatch({type:"DOWNLOAD_SELECTION",payload:E});break;case"edit":t.dispatch({type:"EDIT_IMAGE_SELECTION",payload:{hash:F[0].hash,tags:Be(F),batch:F.map((function(t){return t.hash}))}})}switch(r.payload){case"checkall":t.dispatch({type:"IMAGE_SELECTION_SET",payload:Object(De.a)(O,!0).slice(r.page*S,(r.page+1)*S).map((function(t){return t.hash}))});break;case"uncheckall":t.dispatch({type:"IMAGE_SELECTION_SET",payload:[]})}}}}},Ue=r(203),xe=r(16),He=function(t){xe.b.keys().then((function(e){e.forEach((function(e){!function(t,e){(function(t,e){return!!e.find((function(e){var r=e.hashes;return!!r&&[r.r,r.g,r.b,r.n].includes(t)}))})(e,t)||function(t,e){return!!e.find((function(e){return e.hash===t}))}(e,t)||Object(Ue.a)(e)}(t,e)}))}))},Ve=function(t){return function(e){return function(r){switch(e(r),r.type){case"DELETE_IMAGE":case"DELETE_IMAGES":He(t.getState().images)}}}},Ye=(r(246),function(){var t=new URLSearchParams(window.location.hash.substr(1)),e=t.get("access_token"),r=t.get("expires_in");return e?(window.location.replace("#/settings/dropbox"),{accessToken:e,accessTokenExpiresAt:(new Date).getTime()+1e3*r}):{}});function Xe(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function We(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?Xe(Object(r),!0).forEach((function(e){$e(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):Xe(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function $e(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}var Je=function(t){var e,n=Ye(),a=t.getState().dropboxStorage.use;return n.accessToken&&a&&Promise.all([r.e(9),r.e(1)]).then(r.bind(null,760)).then((function(r){var o=r.default;e=o(t,We(We({},n),{},{use:a}))})),function(n){return function(a){n(a);var o=t.getState().dropboxStorage;o.use&&("DROPBOX_START_AUTH"===a.type||"STORAGE_SYNC_START"===a.type&&"dropbox"===a.payload.storageType)&&(e?e(a):Promise.all([r.e(9),r.e(1)]).then(r.bind(null,760)).then((function(r){var n=r.default;(e=n(t,o))(a)})))}}},ze=(r(129),r(186),r(102),r(193),r(190),function(t){return function(e,r){var n=[],a="";try{for(var o=0;o<5760;o+=1)a+=" ".concat(e[o+8].toString(16).padStart(2,"0")),o%16==15&&(n.push(a.trim()),a="")}catch(e){return void t({type:"ERROR",payload:"ERROR_IN_LOADED_BIN\n".concat(r)})}t({type:"ADD_TO_QUEUE",payload:[{file:r,lines:n}]})}}),Ke=r(317),Qe=function(t,e,r){var n=function(t){return r.find((function(e){return e.id===t}))},a=(t+1).toString(10).padStart(2,"0"),o="".concat(e).concat(a);if(n(o))return o;if("jp"===e){var i="int".concat(a);if(n(i))return i}var c="".concat(e,"01");if(n(c))return c;if("jp"!==e){var u="int".concat(a);if(n(u))return u}return"int01"},qe=r(325);function Ze(t){return function(t){if(Array.isArray(t))return tr(t)}(t)||function(t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(t))return Array.from(t)}(t)||function(t,e){if(!t)return;if("string"==typeof t)return tr(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);"Object"===r&&t.constructor&&(r=t.constructor.name);if("Map"===r||"Set"===r)return Array.from(t);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return tr(t,e)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function tr(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}var er="FF FF FF FF FF FF FF FF FF FF FF FF FF FF FF FF",rr=function(t,e){var r=[],n="";r.push.apply(r,Ze(Ze(Array(40)).map((function(){return er}))));for(var a=0;a<3584;a+=1)a%256==0&&r.push.apply(r,Ze(Ze(Array(2)).map((function(){return er})))),n+=" ".concat(t[e+a].toString(16).padStart(2,"0")),a%16==15&&(r.push(n.trim()),n=""),a%256==255&&r.push.apply(r,Ze(Ze(Array(2)).map((function(){return er}))));return r.push.apply(r,Ze(Ze(Array(40)).map((function(){return er})))),r},nr=function(t){return function(e,r){var n=t.getState(),a=n.savFrameTypes,o=n.frames,i=[],c=Object(qe.a)(o).map((function(t){var e=t.id;return{value:e,name:t.name,selected:a===e}})),u=function(n){for(var a=1;a<=30;a+=1){var c=4096*(a+1),u=e[c+4016],l=rr(e,c);i.push(Object(Ke.a)(l,Qe(u,n,o)))}Promise.all(i).then((function(e){e.forEach((function(e){t.dispatch({type:"ADD_TO_QUEUE",payload:[{file:r,lines:e}]})}))}))};c.length<2?u(a):t.dispatch({type:"CONFIRM_ASK",payload:{message:"Importing '".concat(r,"'"),questions:[{label:"Select frameset to use with this import",key:"selectedFrameset",options:c}],confirm:function(e){var r=e.selectedFrameset;t.dispatch({type:"CONFIRM_ANSWERED"}),u(r)},deny:function(){t.dispatch({type:"CONFIRM_ANSWERED"})}}})}},ar=(r(185),r(164),r(482)),or=function(t){return function(e,r){var n=e.split("\n").map((function(t){return t.trim()})).filter((function(t){return t.length&&0!==t.indexOf("//")&&0!==t.indexOf("/*")})).map((function(t){return t.split(" ")})).flat().map((function(t){return parseInt(t,16)}));Object(ar.parsePackets)(n).then(ar.getImageDataStream).then(ar.decompressDataStream).then(ar.decodePrintCommands).then(ar.harmonizePalettes).then(ar.transformToClassic).then((function(e){e.forEach((function(e){t({type:"ADD_TO_QUEUE",payload:[{file:r,lines:e}]})}))}))}},ir=(r(169),r(167),r(192)),cr=r(248);function ur(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(t)))return;var r=[],n=!0,a=!1,o=void 0;try{for(var i,c=t[Symbol.iterator]();!(n=(i=c.next()).done)&&(r.push(i.value),!e||r.length!==e);n=!0);}catch(t){a=!0,o=t}finally{try{n||null==c.return||c.return()}finally{if(a)throw o}}return r}(t,e)||function(t,e){if(!t)return;if("string"==typeof t)return lr(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);"Object"===r&&t.constructor&&(r=t.constructor.name);if("Map"===r||"Set"===r)return Array.from(t);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return lr(t,e)}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function lr(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}var fr=function(t){for(var e,r,n,a,o,i,c,u=t.data,l=[],f=0;f<8;f+=1){for(var s=0,p=0;p<8;p+=1){s+=(e=u.slice(4*(8*f+p)),r=void 0,n=void 0,a=void 0,o=void 0,i=void 0,c=void 0,r=ur(e,4),n=r[0],a=r[1],o=r[2],i=r[3],(c=Math.floor((n+a+o)/3*(i/255)))<64?257:c<128?1:c<192?256:0)<<7-p}l.push((s>>8).toString(16).padStart(2,"0"),(255&s).toString(16).padStart(2,"0"))}return l.join(" ").toUpperCase()},sr=function(t){return function(e){var r=document.createElement("img"),n=document.createElement("canvas"),a=n.getContext("2d"),o=[];n.width=160,n.height=144,r.onload=function(){a.drawImage(r,0,0,r.naturalWidth,r.naturalHeight,0,0,160,144);for(var i=0;i<n.height;i+=8)for(var c=0;c<n.width;c+=8)o.push(fr(a.getImageData(c,i,8,8)));var u=ur(e.name.split("."),4),l=u[0],f=u[1],s=u[2],p=u[3];f&&s&&!p&&l.match(/^[a-z]{2,}\d{2}$/g)?Object(ir.b)(l,o).then((function(){t({type:"ADD_FRAME",payload:{id:l,name:f}})})):t({type:"SET_ALL_LINES",payload:{lines:o,file:e.name.split(".").shift()}})},Object(cr.a)(e,"dataURL").then((function(t){r.src=t}))}},pr=function(t){if("#"===t.charAt(0)||"/"===t.charAt(0))return null;if("!"===t.charAt(0)||"{"===t.charAt(0)){try{var e=JSON.parse(t.slice(t.indexOf("{")).trim()),r=e.command,n=e.margin_lower;if("PRNT"===r&&n>0)return{type:"IMAGE_COMPLETE"}}catch(t){return{type:"PARSE_ERROR",payload:"Error while trying to parse JSON data command block"}}return null}var a=t.replace(/[^0-9A-F]/gi,"");return a.length?{type:"NEW_LINES",payload:[a]}:null};function yr(t){return function(t){if(Array.isArray(t))return dr(t)}(t)||function(t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(t))return Array.from(t)}(t)||function(t,e){if(!t)return;if("string"==typeof t)return dr(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);"Object"===r&&t.constructor&&(r=t.constructor.name);if("Map"===r||"Set"===r)return Array.from(t);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return dr(t,e)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function dr(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}var hr=function(t){return function(e,r){var n=[],a="".concat(e,"\n").concat(ee.j).split("\n").map(pr).filter(Boolean).map((function(t){var e;switch(t.type){case"NEW_LINES":return(e=n).push.apply(e,yr(t.payload)),null;case"IMAGE_COMPLETE":var a=n.filter(Boolean);return n=[],!!a.length&&{lines:a,file:!!r&&r.replace(/.txt$/gi,"")};default:return null}})).filter(Boolean);a.length||console.warn("File ".concat(r," did not contain images")),t({type:"ADD_TO_QUEUE",payload:yr(a)})}},br=function(t){var e=t.dispatch,r=nr(t),n=ze(e),a=or(e),o=sr(e),i=hr(e),c=function(){e({type:"ERROR",payload:"FILE_NOT_READ"})};return function(t){t.type.startsWith("image/")?o(t):t.size>268435455?e({type:"ERROR",payload:"FILE_TOO_LARGE"}):"application/json"!==t.type?"text/plain"!==t.type?!t.type.startsWith("application/")&&t.type?e({type:"ERROR",payload:"NOT_A_DUMP"}):Object(cr.a)(t,"arrayBuffer").catch(c).then((function(e){var a;131072!==t.size?71===(a=e)[0]&&66===a[1]&&45===a[2]&&66===a[3]&&73===a[4]&&78===a[5]&&48===a[6]&&49===a[7]&&n(e,t.name):r(e,t.name)})):Object(cr.a)(t,"text").catch(c).then((function(r){if(-1!==r.indexOf('{"command"'))i(r,t.name);else try{a(r,t.name)}catch(t){e({type:"ERROR",payload:"NOT_A_DUMP"})}})):Object(cr.a)(t,"text").catch(c).then((function(t){var r={};try{r=JSON.parse(t)}catch(t){}r&&r.state?e({type:"JSON_IMPORT",payload:r}):e({type:"ERROR",payload:"NOT_A_SETTINGS_FILE"})}))}};function mr(t){return function(t){if(Array.isArray(t))return gr(t)}(t)||function(t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(t))return Array.from(t)}(t)||function(t,e){if(!t)return;if("string"==typeof t)return gr(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);"Object"===r&&t.constructor&&(r=t.constructor.name);if("Map"===r||"Set"===r)return Array.from(t);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return gr(t,e)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function gr(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}var vr=function(t){var e,r=document.querySelector("#app"),n=br(t),a=!1;return r.addEventListener("dragover",(function(r){r.preventDefault(),a||t.dispatch({type:"IMPORT_DRAGOVER_START"}),window.clearTimeout(e),a=!0,e=window.setTimeout((function(){a=!1,t.dispatch({type:"IMPORT_DRAGOVER_END"})}),250)})),r.addEventListener("drop",(function(t){t.preventDefault(),(t.dataTransfer.items?mr(t.dataTransfer.items).filter((function(t){return"file"===t.kind})).map((function(t){return t.getAsFile()})):mr(t.dataTransfer.files)).forEach(n)})),function(t){return function(e){t(e)}}},Or=function(t){var e=null;return function(n){return function(a){n(a);var o=t.getState().gitStorage,i=o.use,c=o.owner,u=o.repo,l=o.branch,f=o.token;i&&c&&u&&l&&f&&("SET_GIT_STORAGE"===a.type||"STORAGE_SYNC_START"===a.type&&"git"===a.payload.storageType)&&(e?e(a):Promise.all([r.e(10),r.e(3)]).then(r.bind(null,761)).then((function(r){var n=r.init,o=r.middleware;n(t),(e=o(t))(a)})))}}},Ar=function(){return function(t){return function(e){"ERROR"===e.type&&alert(e.payload),t(e)}}},Er=null,Sr=function(t){return function(e){return function(r){["NEW_LINES","SET_ALL_LINES"].includes(r.type)&&(window.clearTimeout(Er),Er=window.setTimeout((function(){t.dispatch({type:"CLEAR_LINES"})}),5e3)),e(r)}}},Fr=function(t){var e=br(t);return function(t){return function(r){"IMPORT_FILE"!==r.type?t(r):r.payload.files&&1===r.payload.files.length&&e(r.payload.files[0])}}};function Tr(t){return function(t){if(Array.isArray(t))return wr(t)}(t)||function(t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(t))return Array.from(t)}(t)||function(t,e){if(!t)return;if("string"==typeof t)return wr(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);"Object"===r&&t.constructor&&(r=t.constructor.name);if("Map"===r||"Set"===r)return Array.from(t);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return wr(t,e)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function wr(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}var Ir=function(t){var e=null,r=null;return window.addEventListener("message",(function(n){var a,o=t.getState().printerUrl;try{a=new URL(o).origin}catch(t){a=new URL(window.location.href).origin}if(n.origin===a){var i=n.data.fromRemotePrinter,c=(i=void 0===i?{}:i).lines,u=i.blob,l=i.blobsdone,f=i.commands,s=i.printerData,p=n.source;if(f&&(e&&JSON.stringify(f)===JSON.stringify(t.getState().printerFunctions)||t.dispatch({type:"PRINTER_FUNCTIONS_RECEIVED",payload:f}),r=p,window.clearTimeout(e),e=window.setTimeout((function(){e=null,r=null,t.dispatch({type:"HEARTBEAT_TIMED_OUT"})}),1500)),c){var y;try{y=new File(Tr(c.join("\n")),"Text input.txt",{type:"text/plain"})}catch(t){y=new Blob(Tr(c.join("\n")),{type:"text/plain"})}t.dispatch({type:"IMPORT_FILE",payload:{files:[y]}}),t.dispatch({type:"PRINTER_READY"})}u&&t.dispatch({type:"IMPORT_FILE",payload:{files:[u]}}),l&&t.dispatch({type:"PRINTER_READY"}),s&&t.dispatch({type:"PRINTER_DATA_RECEIVED",payload:s})}})),function(e){return function(n){switch(n.type){case"REMOTE_CALL_FUNCTION":var a,o=t.getState(),i="fetchImages"===n.payload?{dumps:null===(a=o.printerData)||void 0===a?void 0:a.dumps}:void 0;r.postMessage({toRemotePrinter:{command:n.payload,params:i}},"*")}e(n)}}};function _r(t){return function(t){if(Array.isArray(t))return jr(t)}(t)||function(t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(t))return Array.from(t)}(t)||function(t,e){if(!t)return;if("string"==typeof t)return jr(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);"Object"===r&&t.constructor&&(r=t.constructor.name);if("Map"===r||"Set"===r)return Array.from(t);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return jr(t,e)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function jr(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}var Dr=function(t){var e,r=[],n=function(){!e&&r.length&&(e=!0,window.setTimeout((function(){e=!1,t.dispatch({type:"SET_ALL_LINES",payload:r.shift()})}),50),t.dispatch({type:"IMPORT_QUEUE_SIZE",payload:r.length-1}))};return function(t){return function(e){if("ADD_TO_QUEUE"===e.type)return r.push.apply(r,_r(e.payload)),void n();t(e),"ADD_IMAGE"===e.type&&n()}}},Pr=r(491),Rr=r.n(Pr),Lr=function(t){return window.addEventListener("resize",(function(){t.dispatch({type:"WINDOW_DIMENSIONS",payload:{height:window.innerHeight,width:window.innerWidth}})})),Rr.a.isEnabled&&Rr.a.on("change",(function(){t.dispatch({type:"SET_IS_FULLSCREEN",payload:!!Rr.a.element})})),document.addEventListener("keydown",(function(e){if(null!==t.getState().lightboxImage)switch(e.key){case"Esc":case"Escape":t.dispatch({type:"SET_LIGHTBOX_IMAGE_INDEX",payload:null}),e.preventDefault();break;case"Right":case"ArrowRight":t.dispatch({type:"LIGHTBOX_NEXT"}),e.preventDefault();break;case"Left":case"ArrowLeft":t.dispatch({type:"LIGHTBOX_PREV"}),e.preventDefault()}})),function(e){return function(r){var n=t.getState();switch(r.type){case"LIGHTBOX_NEXT":if(null===n.lightboxImage)return;return void t.dispatch({type:"SET_LIGHTBOX_IMAGE_INDEX",payload:Math.min(n.lightboxImage+1,n.images.length-1)});case"LIGHTBOX_PREV":if(null===n.lightboxImage)return;return void t.dispatch({type:"SET_LIGHTBOX_IMAGE_INDEX",payload:Math.max(n.lightboxImage-1,0)});case"LIGHTBOX_FULLSCREEN":Rr.a.isEnabled&&(Rr.a.element?Rr.a.exit():Rr.a.request(document.querySelector("body")));break;case"SET_LIGHTBOX_IMAGE_INDEX":Rr.a.isEnabled&&!r.payload&&Rr.a.element&&Rr.a.exit();break;case"SET_LIGHTBOX_IMAGE_HASH":t.dispatch({type:"SET_LIGHTBOX_IMAGE_INDEX",payload:Object(De.a)(n).findIndex((function(t){return t.hash===r.payload}))})}e(r)}}},Nr=function(t){return document.addEventListener("keydown",(function(e){"Escape"!==e.key&&"Esc"!==e.key||t.dispatch({type:"CONFIRM_ANSWERED"})})),function(t){return function(e){t(e)}}};function Cr(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function Mr(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?Cr(Object(r),!0).forEach((function(e){Gr(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):Cr(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function Gr(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}var Br=function(t){return["#",Math.ceil(Math.random()*t).toString(16).padStart(2,"0"),Math.ceil(Math.random()*t).toString(16).padStart(2,"0"),Math.ceil(Math.random()*t).toString(16).padStart(2,"0")].join("")},kr=function(t,e,r,n){var a=r===R.f?{name:"",shortName:R.f,palette:[Br(255),Br(170),Br(102),Br(34)],origin:"Selfmade"}:e.find((function(t){return t.shortName===r}));t({type:"SET_EDIT_PALETTE",payload:Mr(Mr({},a),{},{name:n?"Copy of ".concat(a.name):a.name,shortName:n?R.f:r})})},Ur=function(t){return document.addEventListener("keydown",(function(e){if("Enter"===e.key&&e.ctrlKey&&t.getState().editPalette.hash){var r=t.getState();t.dispatch({type:"SAVE_EDIT_PALETTE"}),r.editPalette&&e.preventDefault()}})),function(e){return function(r){switch(r.type){case"SAVE_EDIT_PALETTE":return n=t.dispatch,a=t.getState(),void n({type:"PALETTE_UPDATE",payload:Mr(Mr({},a.editPalette),{},{tags:Object(Pe.a)(a.editPalette.tags)})});case"PALETTE_EDIT":return void kr(t.dispatch,t.getState().palettes,r.payload,!1);case"PALETTE_CLONE":return void kr(t.dispatch,t.getState().palettes,r.payload,!0)}var n,a;e(r)}}},xr=function(t){return function(e){return function(r){var n=t.getState();"IMAGE_COMPLETE"!==r.type&&"SET_ALL_LINES"!==r.type||Object(Ue.c)(r.payload&&r.payload.lines?r.payload.lines:n.lineBuffer).then((function(e){var a={hash:e,created:Dt()().format(ee.a),title:r.payload&&r.payload.file?r.payload.file:"",lines:n.lineBuffer.length,tags:[],palette:n.activePalette};t.dispatch({type:"ADD_IMAGE",payload:a})})),e(r)}}};function Hr(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function Vr(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?Hr(Object(r),!0).forEach((function(e){Yr(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):Hr(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function Yr(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}var Xr=function(t){return function(e){return function(n){if("SAVE_RGBN_IMAGE"===n.type){var a=t.getState();r.e(13).then(r.t.bind(null,755,7)).then((function(e){var r=e.default,n={palette:ee.e,hashes:Vr({},a.rgbnImages),hash:r(a.rgbnImages),created:Dt()().format(ee.a),title:"",tags:[]};t.dispatch({type:"ADD_IMAGE",payload:n})}))}e(n)}}};function Wr(){}var $r=function(t,e){var r,n=0,a=1,o={},i=t,c=(e=e||{}).maxAttempts||1/0;return o.open=function(){try{r=new WebSocket(i,e.protocols||[])}catch(t){return(e.onstatechange||Wr)(WebSocket.CLOSED),void(e.onerror||Wr)(t)}(e.onstatechange||Wr)(r.readyState),r.onmessage=e.onmessage||Wr,r.onopen=function(t){(e.onopen||Wr)(t),(e.onstatechange||Wr)(r.readyState),n=0},r.onclose=function(t){1e3===t.code||1001===t.code||1005===t.code||o.reconnect(t),(e.onclose||Wr)(t),(e.onstatechange||Wr)(r.readyState)},r.onerror=function(t){t&&"ECONNREFUSED"===t.code?o.reconnect(t):(e.onerror||Wr)(t),(e.onstatechange||Wr)(r.readyState)}},o.reconnect=function(t){a&&n++<c?a=setTimeout((function(){(e.onreconnect||Wr)(t),(e.onstatechange||Wr)(r.readyState),o.open()}),e.timeout||1e3):((e.onmaximum||Wr)(t),(e.onstatechange||Wr)(r.readyState))},o.json=function(t){r.send(JSON.stringify(t))},o.send=function(t){r.send(t)},o.close=function(t,n){a=clearTimeout(a),r.close(t||1e3,n),(e.onstatechange||Wr)(r.readyState)},o.setUrl=function(t){i=t;try{o.close()}catch(t){}o.open()},o.open(),o},Jr=r(58);function zr(t){return function(t){if(Array.isArray(t))return Kr(t)}(t)||function(t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(t))return Array.from(t)}(t)||function(t,e){if(!t)return;if("string"==typeof t)return Kr(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);"Object"===r&&t.constructor&&(r=t.constructor.name);if("Map"===r||"Set"===r)return Array.from(t);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Kr(t,e)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Kr(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}var Qr=function(t,e){var r=[],n=function(){t({type:"NEW_LINES",payload:zr(r)}),r=[]};return new $r(e,{timeout:5e3,maxAttempts:10,onstatechange:function(e){t({type:"SET_SOCKET_STATE",payload:e})},onmessage:function(e){e.data.split("\n").map(pr).filter(Boolean).forEach((function(e){var a;"NEW_LINES"===e.type?((a=r).push.apply(a,zr(e.payload)),r.length>=40&&n()):(n(),t(e))}))}})},qr=function(t){if("webpack-dev"!==Object(Jr.a)().env)return function(t){return function(e){t(e)}};var e,r=t.getState().socketUrl;return r&&window.setTimeout((function(){e=Qr(t.dispatch,"".concat(r))}),1e3),function(r){return function(n){if("SET_SOCKET_URL"===n.type){var a="".concat(n.payload);e?e.setUrl(a):e=Qr(t.dispatch,a)}r(n)}}},Zr=function(t){return"function"==typeof t.arrayBuffer?t.arrayBuffer():new Promise((function(e){var r=new FileReader;r.onload=function(t){e(t.target.result)},r.readAsArrayBuffer(t)}))},tn=function(t){return function(e){if(1!==e.length)r.e(12).then(r.t.bind(null,756,7)).then((function(r){var n=new(0,r.default);Promise.all(e.map((function(t){var e=t.filename,r=t.blob;return Zr(r).then((function(t){return{filename:e,arrayBuffer:t}}))}))).then((function(t){t.forEach((function(t){for(var e=t.filename,r=t.arrayBuffer,a=e.split("."),o=a.pop(),i=a.join("."),c=e,u=1;n.files[c];)c="".concat(i,"_(").concat(u,").").concat(o),u+=1;n.file(c,r)}))})).then((function(){return n.generateAsync({type:"blob",compression:"DEFLATE"}).then((function(e){Object(de.saveAs)(e,"".concat(t,".zip"))}))}))}));else{var n=e[0];Object(de.saveAs)(n.blob,n.filename)}}},en=r(225),rn=r(277);function nn(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function an(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?nn(Object(r),!0).forEach((function(e){on(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):nn(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function on(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function cn(t){return function(t){if(Array.isArray(t))return un(t)}(t)||function(t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(t))return Array.from(t)}(t)||function(t,e){if(!t)return;if("string"==typeof t)return un(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);"Object"===r&&t.constructor&&(r=t.constructor.name);if("Map"===r||"Set"===r)return Array.from(t);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return un(t,e)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function un(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}var ln=function(t,e,r){var n=t.frames,a=t.images,o=t.palettes;if(r){var i,c,u;if(e.frames&&e.frames.length)(i=n).unshift.apply(i,cn(e.frames));if(e.images&&e.images.length)(c=a).unshift.apply(c,cn(e.images));if(e.palettes&&e.palettes.length)(u=o).unshift.apply(u,cn(e.palettes))}else n=e.frames||t.frames,a=e.images||t.images,o=e.palettes||t.palettes;return an(an(an({},t),e),{},{images:a,frames:n,palettes:o})},fn=function(t,e,r){var n=arguments.length>3&&void 0!==arguments[3]&&arguments[3];Object.keys(r).forEach((function(t){"state"!==t&&(t.match(/^[a-f0-9]{40}$/gi)?xe.b.setItem("".concat(t),r[t]):t.startsWith("frame-")&&xe.a.setItem("".concat(t.split("frame-").pop()),r[t]))})),t({type:"GLOBAL_UPDATE",payload:ue(ln(e,r.state||{},n))})},sn=function(t){var e=Object(rn.a)(t);return function(r){return function(n){switch(n.type){case"JSON_EXPORT":a=n.payload,e(a).then((function(t){tn(null)([{blob:new Blob(new Array(t)),filename:"".concat(a,".json")}])}));break;case"JSON_IMPORT":fn(t.dispatch,t.getState(),n.payload,!0);break;case"GIT_SETTINGS_IMPORT":case"DROPBOX_SETTINGS_IMPORT":fn(t.dispatch,t.getState(),n.payload,!1)}var a;r(n)}}};function pn(t){return(pn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function yn(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function dn(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?yn(Object(r),!0).forEach((function(e){hn(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):yn(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function hn(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function bn(t){return function(t){if(Array.isArray(t))return mn(t)}(t)||function(t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(t))return Array.from(t)}(t)||function(t,e){if(!t)return;if("string"==typeof t)return mn(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);"Object"===r&&t.constructor&&(r=t.constructor.name);if("Map"===r||"Set"===r)return Array.from(t);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return mn(t,e)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function mn(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}var gn=function(t){return function(e){return function(r){if("SHARE_IMAGE"===r.type){var n=t.getState(),a=n.images.find((function(t){return t.hash===r.payload})),o=Object(ge.a)(n,a),i=bn(n.exportScaleFactors).pop()||4,c=bn(n.exportFileTypes).pop()||"png",u=Object(en.a)(dn(dn({},n),{},{exportScaleFactors:[i],exportFileTypes:[c]}));Object(me.a)(n)(a).then(u(o,a)).then((function(t){var e,r=t[0],n=r.blob,a=r.filename,o=r.title;try{e={files:[new File([n],a,{type:"image/png",lastModified:new Date})],title:o}}catch(t){alert(JSON.stringify({s:1,error:t}))}if(e&&window.navigator.share)try{window.navigator.share(e).catch((function(t){return alert(JSON.stringify({s:3,error:t}))}))}catch(t){alert(JSON.stringify({s:4,error:t}))}else alert("sharing not enabled in your browser... because:\nshare is: ".concat(pn(window.navigator.share),"\nshareData is: ").concat(pn(e),"\ncanShare is: ").concat(pn(window.navigator.canShare),"\ncanShare says: ").concat(window.navigator.canShare?window.navigator.canShare(e):""))}))}e(r)}}},vn=function(t){return function(e){return function(r){if("START_DOWNLOAD"===r.type||"DOWNLOAD_SELECTION"===r.type){var n=t.getState(),a=Object(en.a)(n);switch(r.type){case"START_DOWNLOAD":!function(t,e){return function(r){var n=e.images.find((function(t){return t.hash===r})),a=Object(ge.a)(e,n),o=Object(Ae.a)({image:n,palette:a});return Object(me.a)(e)(n).then(t(a,n)).then(tn(o))}}(a,n)(r.payload);break;case"DOWNLOAD_SELECTION":!function(t,e){return function(r){var n=Object(Ae.a)({altTitle:"gameboy-printer-gallery",useCurrentDate:!0});Promise.all(r.map((function(r){var n=e.images.find((function(t){return t.hash===r})),a=Object(ge.a)(e,n);return Object(me.a)(e)(n).then(t(a,n))}))).then((function(t){return t.flat()})).then(tn(n))}}(a,n)(r.payload)}}return e(r)}}},On=Object(c.a)(je,ke,Ve,Je,Ar,vr,Or,Sr,Fr,Ir,Dr,Lr,Nr,Ur,xr,Xr,qr,sn,gn,vn),An=window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__||c.d,En=[On,Object(c.a)(fe)],Sn=function(t){var e=Object(c.e)(qt,ue(t),An.apply(void 0,En));return window.store=e,e};e.default=function(){var t=document.getElementById("app");if(t){var e;try{e=JSON.parse(localStorage.getItem("gbp-web-state"))||{}}catch(t){e={}}"esp8266"===Object(Jr.a)().env&&(e.printerUrl="/");var n=Object.assign(le.a,e);Promise.all([r.e(8),r.e(0)]).then(r.bind(null,758)).then((function(e){var r=e.default;try{var c=Sn(n);Object(i.render)(a.a.createElement(o.a,{store:c},a.a.createElement(r,null)),t)}catch(t){document.getElementById("app").innerHTML='<p class="init-error">Error while initializing the app:<br>'.concat(t.message,"<br><small>").concat(t.stack,"</small></p>")}}))}}}}]);