/*! License information can be found in d61d/app.js.l.txt */
"use strict";(self.webpackChunkgb_printer_web=self.webpackChunkgb_printer_web||[]).push([[143],{99892:function(e,t,r){r.r(t),r.d(t,{default:function(){return bc}});r(57327),r(41539);var n=r(67294),a=r(79655),o=r(89250);r(66992),r(88674),r(78783),r(33948),r(79753),r(82526),r(41817),r(32165),r(47042),r(68309),r(91038),r(74916);function i(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==r)return;var n,a,o=[],i=!0,l=!1;try{for(r=r.call(e);!(i=(n=r.next()).done)&&(o.push(n.value),!t||o.length!==t);i=!0);}catch(e){l=!0,a=e}finally{try{i||null==r.return||r.return()}finally{if(l)throw a}}return o}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return l(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return l(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function l(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var c=function(){var e=i((0,n.useState)((function(){return function(){return null}})),2),t=e[0],a=e[1];return(0,n.useEffect)((function(){r.e(456).then(r.t.bind(r,38456,23)).then((function(e){var t=e.default;a((function(){return t}))}))}),[]),n.createElement("div",{className:"home"},n.createElement(t,{className:"markdown-body"},'# [Game Boy Camera Gallery](https://github.com/HerrZatacke/gb-printer-web)\n\n## Basic usage\n* choose a [color palette](#/palettes)\n* [paste your exports](#/import) into a textfield (or simply drag and drop your dump(s) into this window)\n* check your images [in the gallery](#/gallery)\n* You can also try to drag/drop your cartridge dump into this window  \n\n## Supported formats\n* This Project is mainly built around the serial output of the original [GBP Emulator](https://github.com/mofosyne/arduino-gameboy-printer-emulator)\n* Cart .SAV files are also supported. The previously selected frame will be applied as well. If you\'re importing from a JP-Cartridge (Pocket Camera), you may want to change the "Frames when importing Cartridge dumps" option in the [settings page](#/settings)    \n\n## Frames\nIn a recent change (Version 1.7.0) the pre-compiled frames have been removed from this application.  \nThe application now however gives you the opportunity to add all frames you like by yourself and also share them with others.  \nMaybe you have designed some frames by yourself, or you have aquired some previously unknown frames.\n\n### Uploading your own frames\nYou can upload your own frames by dragging any image into this app.  \nDimensions of 160x144 are highly recommended, otherwise the image will be automatically scaled to size.  \nA lossles filetype is also recommended (e.g `.png` or `.webp`)\nAfter dragging your image into the app, you will be asked on how to import the frame.\n\n### Exporting/Importing your frames\n[In the import tab](#/import) you can find an "Export frames" button. The resulting `.json` file can be shared and will contain all of your frames.  \nThis `.json` file can be dragged into the application and will add all frames from that export to your application.  \n\n## Development usage\nThe following ptions apply if you plan on contributong to this app:\n\n### Optional deployment config with `config.json`\nAdd a `deploy` section in `config.json` to automatically copy the created files to another location ([e.g your arduino project](https://github.com/HerrZatacke/wifi-gbp-emulator)).  \nIf you set the option `gzip` to `true`, each file will be separately compressed. Useful for servers capable serving pre-zipped files. This saves ~1kB storage space.\n``` json\n{\n  "ports": [...], \n  "deploy": {\n    "dir": "/copy/all/files/to/that/folder",\n    "gzip": true\n  }\n}\n```\n\n### Local Setup\n* Install [node.js](https://nodejs.org/) if you haven\'t already.\n* Check out/clone/download [this repository](https://github.com/HerrZatacke/gb-printer-web)\n* Run `npm i` in the root directory via your commandline\n* Add a `config.json` in the root dir (see above)\n* Run `npm start` via your commandline\n* Open [localhost:3000](http://localhost:3000)\n\n### Links and research\n* The source to this project is [available on GitHub](https://github.com/HerrZatacke/gb-printer-web)\n* A basic version of this tool is avaliable [on GitHub-pages](https://herrzatacke.github.io/gb-printer-web/#/)  \n* This project has replaced my [GB printer direct serial to gif converter](https://github.com/HerrZatacke/direct-serial-to-gif-converter)\n* Also check out the [Gameboy Camera Discord](https://discord.gg/Kxhjg3qN) \n* [Lots of helpful GameBoy and GameBoy Camera resources](https://github.com/gbdev/awesome-gbdev)\n\n#### Research\n* Tutorial on how to work with an ESP8266 by [ttapa: ESP8266 Beginner\'s Guide](https://tttapa.github.io/ESP8266/Chap01%20-%20ESP8266.html)  \n* [Programming a standalone ESP8266](https://www.instructables.com/id/3-Simple-Ways-of-Programming-an-ESP8266-12X-Module/)\n* [Deploying your JS App to Github Pages the easy way (or not)](https://medium.com/linagora-engineering/1ef8c48424b7)\n'))},u=(r(21249),r(69070),r(40213)),s=r(94184),m=r.n(s),f=(r(69826),r(26699),r(32023),r(15177)),p=r(48766),d=r(13629),h=(0,u.$j)((function(e,t){var r,n=t.hash,a=e.images.find((function(e){return e.hash===n}));return a?(r=a.hashes?a.palette:e.palettes.find((function(e){return e.shortName===a.palette}))||f.d$,{title:a.title,created:a.created,frame:a.frame,hashes:a.hashes,tags:a.tags,isFavourite:a.tags.includes(p.oJ),isSelected:e.imageSelection.includes(n),palette:r,lockFrame:a.lockFrame||!1,invertPalette:a.invertPalette||!1,hideDate:e.hideDates,preferredLocale:e.preferredLocale,meta:a.meta||null,rotation:a.rotation||null,enableDebug:e.enableDebug}):{}}),(function(e,t){var r=t.hash;return{updateImageSelection:function(t,n,a){e(n?{type:d.fd,payload:r,page:a}:"add"===t?{type:d.Rv,payload:r}:{type:d.iq,payload:r})},editImage:function(){e({type:d.u7,payload:r})}}})),y=(r(2707),r(45697)),g=r.n(y),b=r(27484),v=r.n(b),E=r(10285),w=r.n(E),_=(0,u.$j)((function(e,t){var r=t.hash;return{isSelected:e.imageSelection.includes(r),canShare:e.canShare,hasPlugins:!!e.plugins.length,hash:r}}),(function(e,t){var r=t.hash,n=t.buttons,a=t.title;return{startDownload:n.includes("download")?function(){e({type:d.hi,payload:r})}:null,deleteImage:n.includes("delete")?function(){e({type:d.jH,payload:{message:a?'Delete image "'.concat(a,'"?'):"Delete this image?",confirm:function(){e({type:d.S1,payload:r})},deny:function(){e({type:d.Gp})}}})}:null,shareImage:n.includes("share")?function(){e({type:d.pr,payload:r})}:null,saveRGBNImage:n.includes("saveRGBNImage")?function(){e({type:d.Fy,payload:r})}:null,updateImageToSelection:n.includes("select")?function(t){e("add"===t?{type:d.Rv,payload:r}:{type:d.iq,payload:r})}:null,setLightboxImage:n.includes("view")?function(){e({type:d.Tq,payload:r})}:null,updateFavouriteTag:n.includes("favourite")?function(t){e({type:d.d4,payload:{hash:r,isFavourite:t}})}:null}})),S=function(e){var t=m()("svg","svg--".concat(e.name),e.className);switch(e.name){case"download":return n.createElement("svg",{className:t,viewBox:"0 0 20 20"},n.createElement("path",{d:"M8 3v7H5s5 6 5 6c0 0 5-6 5-6h-3V3z"}),n.createElement("path",{d:"M5 15v2l10 0V15z"}));case"clone":return n.createElement("svg",{className:t,viewBox:"0 0 20 20"},n.createElement("path",{d:"M3 2v13h3v3h10V5h-3V2zm1 1h8v2H8.11l.78 1H15v11H7V9.639L6 8.36V14H4zm2.162.996L4.588 5.23l4.314 5.51-1.574 1.233 6.063 2.875-1.338-6.575-1.574 1.235z"}));case"delete":return n.createElement("svg",{className:t,viewBox:"0 0 20 20"},n.createElement("path",{d:"M13 5v10h-1V5zM7 5v10H6V5zm4 0v10h-1V5zM9 5v10H8V5zM4 3v2h1v12h9V5h1V3h-4V2H8v1z"}));case"loading":return n.createElement("svg",{className:t,viewBox:"0 0 20 20"},n.createElement("path",{d:"M10 2 4 5l6 3V6c3.15 0 4.911 3.369 3.535 5.89l1.8.881C17.337 8.996 14.7 4 10 4zm-.001 16 6-3-6-3v2c-3.15 0-4.911-3.369-3.535-5.89l-1.8-.881C2.662 11.004 5.299 16 9.999 16z"}));case"warn":return n.createElement("svg",{className:t,viewBox:"0 0 20 20"},n.createElement("path",{d:"M10.75 16v-1.5h-1.5V16zm0-3V6h-1.5v7zM2 17c.192-.312 8-14 8-14l8 14z"}));case"arrowdown":return n.createElement("svg",{className:t,viewBox:"0 0 20 20"},n.createElement("path",{d:"m3 5 7 10 7-10z"}));case"plug":return n.createElement("svg",{className:t,viewBox:"0 0 20 20"},n.createElement("path",{d:"M12.526 9.533c0-1.932-1.856-3.033-4.21-3.033H6.21v.778H2v.972h4.21v3.5H2.02l-.02.972h4.21v.778h2.106c2.354 0 4.21-1.1 4.21-3.033 2.31-.651 3.02.774 5.474 0v-.934c-2.27.808-2.999-.697-5.474 0z"}));case"share":return n.createElement("svg",{className:t,viewBox:"0 0 20 20"},n.createElement("path",{d:"M14 3.5A2.5 2.5 0 0011.5 6a2.5 2.5 0 00.025.336l-3.85 1.812A2.5 2.5 0 006 7.5 2.5 2.5 0 003.5 10 2.5 2.5 0 006 12.5a2.5 2.5 0 001.676-.648l3.85 1.812A2.5 2.5 0 0011.5 14a2.5 2.5 0 002.5 2.5 2.5 2.5 0 002.5-2.5 2.5 2.5 0 00-2.5-2.5 2.5 2.5 0 00-1.836.807l-3.728-1.754A2.5 2.5 0 008.5 10a2.5 2.5 0 00-.066-.553l3.73-1.754A2.5 2.5 0 0014 8.5 2.5 2.5 0 0016.5 6 2.5 2.5 0 0014 3.5z"}));case"sync":return n.createElement("svg",{className:t,viewBox:"0 0 20 20"},n.createElement("path",{d:"M8 8.5v5H5s4.866 6 5 6c.134 0 5-6 5-6h-3v-5zm2-8l-6 3 6 3v-2c3.15 0 4.911 3.369 3.535 5.89l1.8.881C17.337 7.496 14.7 2.5 10 2.5zM4.664 5.729C3.271 8.357 4.2 11.392 6 13h1.5v-1.4c-1.358-.983-2.02-3.185-1.035-4.99z"}));case"edit":return n.createElement("svg",{className:t,viewBox:"0 0 20 20"},n.createElement("path",{d:"M4 14.978v1.978L16 17v-2.022zM13.5 3l-8 8-1 3.5 3.5-1 8-8L13.5 3zm0 .8l.85.85-9.1 9.1L6 11.5l7.5-7.7z"}));case"view":return n.createElement("svg",{className:t,viewBox:"0 0 20 20"},n.createElement("path",{d:"M5.506 6.6L1 10l4.504 3.4c1.199.88 2.814 1.372 4.496 1.371 1.682 0 3.296-.492 4.494-1.37L19 10l-4.504-3.4C13.297 5.72 11.711 5.228 10 5.237c-1.711.009-3.318.5-4.494 1.363zm4.152-.502c2.101 0 3.805 1.747 3.805 3.902 0 2.155-1.704 3.902-3.805 3.902-2.1 0-3.804-1.747-3.804-3.902 0-2.155 1.703-3.902 3.804-3.902zm-.894 2.035c-1.006 0-1.821.836-1.82 1.867-.001 1.031.814 1.868 1.82 1.867 1.004 0 1.818-.836 1.818-1.867 0-1.03-.814-1.867-1.818-1.867z"}));case"fav":return n.createElement("svg",{className:t,viewBox:"0 0 20 20"},n.createElement("path",{d:"m13 6.1c1.8 0 1.9 2.1 1.9 2.1 0 1.8-1.5 3.6-4.9 5.7-3.4-2.1-4.9-3.9-4.9-5.7 0 0 0.1-2.1 1.9-2.1 0.3 0 1 0.1 1.8 0.6l1.2 0.9 1.2-0.9c0.7-0.5 1.5-0.6 1.8-0.6m0-2c-0.4 0-1.7 0-3 1-1.3-1-2.6-1-3-1-2.8 0-3.9 2.7-3.9 4.1 0 3.1 2.6 5.6 6.9 8 4.2-2.4 6.9-4.9 6.9-8 0-1.4-1.1-4.1-3.9-4.1z"}));case"animate":return n.createElement("svg",{className:t,viewBox:"0 0 20 20"},n.createElement("path",{d:"M3 4v12h14V4zm.5.5h2v2h-2zm2.75 0h2v2h-2zM9 4.5h2v2H9zm2.75 0h2v2h-2zm2.75 0h2v2h-2zM4 7h12v6H4zm-.5 6.5h2v2h-2zm2.75 0h2v2h-2zm2.75 0h2v2H9zm2.75 0h2v2h-2zm2.75 0h2v2h-2z"}));case"reset":return n.createElement("svg",{className:t,viewBox:"0 0 20 20"},n.createElement("path",{d:"M6 10a4 4 0 104-4v2L4 5l6-3v2a6 6 0 11-6 6"}));case"checkmark":return n.createElement("svg",{className:t,viewBox:"0 0 20 20"},n.createElement("path",{d:"M15 5v10H5V5zM3 3v14h14V3z"}),n.createElement("path",{className:"tick",d:"M5.5 11l3 3 6-6.5L13 6l-4.5 5L7 9.5z"}));case"circle":return n.createElement("svg",{className:t,viewBox:"0 0 20 20"},n.createElement("circle",{r:"8",cx:"10",cy:"10"}));case"add":return n.createElement("svg",{className:t,viewBox:"0 0 20 20"},n.createElement("path",{d:"M8 2v6H2v4h6v6h4v-6h6V8h-6V2z"}));case"file-add":return n.createElement("svg",{className:t,viewBox:"0 0 20 20"},n.createElement("path",{d:"M9 6.5v3.52l-3.5-.04v2l3.5.04v3.48h2v-3.48h3.5v-2H11V6.5ZM1 17V3h6l2 2h10v12z"}));case"remove":return n.createElement("svg",{className:t,viewBox:"0 0 20 20"},n.createElement("path",{d:"M2 8v4h16V8z"}));case"save":return n.createElement("svg",{className:t,viewBox:"0 0 20 20"},n.createElement("path",{d:"M12 4v3h-2V4zM5 15v-4h10v4zm8-7H6l.01-4H4v12h12V6l-2-2h-1z"}));case"sort":return n.createElement("svg",{className:t,viewBox:"0 0 20 20"},n.createElement("path",{d:"M4.5 8.5L10 3l5.5 5.5zm0 3L10 17l5.5-5.5z"}));case"list":return n.createElement("svg",{className:t,viewBox:"0 0 40 40"},n.createElement("path",{d:"M6 6v4h28V6zm0 8v4h28v-4zm0 8v4h28v-4zm0 8v4h28V30z"}));case"1x":return n.createElement("svg",{className:t,viewBox:"0 0 40 40"},n.createElement("path",{d:"M5 5v6h6V5zm8 0v6h6V5zm8 0v6h6V5zm8 0v6h6V5zM5 13v6h6v-6zm8 0v6h6v-6zm8 0v6h6v-6zm8 0v6h6v-6zM5 21v6h6v-6zm8 0v6h6v-6zm8 0v6h6v-6zm8 0v6h6v-6zM5 29v6h6v-6zm8 0v6h6v-6zm8 0v6h6v-6zm8 0v6h6v-6z"}));case"2x":return n.createElement("svg",{className:t,viewBox:"0 0 40 40"},n.createElement("path",{d:"M22 6v12h12V6zm0 16v12h12V22zM6 6v12h12V6zm0 16v12h12V22z"}));case"3x":return n.createElement("svg",{className:t,viewBox:"0 0 40 40"},n.createElement("path",{d:"M30 30V10H10v20"}));case"4x":return n.createElement("svg",{className:t,viewBox:"0 0 40 40"},n.createElement("path",{d:"M34 34V6H6v28z"}));case"close":return n.createElement("svg",{className:t,viewBox:"0 0 40 40"},n.createElement("path",{d:"M7 3l12 17L7 37h2l11-15.584L31 37h2L21 20 33 3h-2L20 18.584 9 3H7z"}));case"fullscreen":return n.createElement("svg",{className:t,viewBox:"0 0 40 40"},n.createElement("path",{d:"M37 13h-2V9h-5V7h7zM3 13h2V9h5V7H3zm34 14h-2v4h-5v2h7zM3 27h2v4h5v2H3z"}));case"right":return n.createElement("svg",{className:t,viewBox:"0 0 40 40"},n.createElement("path",{d:"M17 3l12 17-12 17h-2l12-17L15 3z"}));case"left":return n.createElement("svg",{className:t,viewBox:"0 0 40 40"},n.createElement("path",{d:"M23 3L11 20l12 17h2L13 20 25 3z"}));case"burger":return n.createElement("svg",{className:t,viewBox:"0 0 40 40"},n.createElement("path",{d:"M2 6v4h36V6zm0 12v4h36v-4zm0 12v4h36v-4z"}));case"close-nav":return n.createElement("svg",{className:t,viewBox:"0 0 40 40"},n.createElement("path",{d:"M5.5 2.5l-3 3L17 20 2.5 34.5l3 3L20 23l14.5 14.5 3-3L23 20 37.5 5.5l-3-3L20 17z"}));case"filter":return n.createElement("svg",{className:t,viewBox:"0 0 40 40"},n.createElement("path",{d:"M34 10V6H6v4l12 12v12h4V22z"}));case"moon":return n.createElement("svg",{className:t,viewBox:"0 0 40 40"},n.createElement("path",{d:"M15.715 35.424a16.016 16 0 004.273.576A16.016 16 0 0036 20.004 16.016 16 0 0019.988 4a16.016 16 0 00-4.27.585 16.016 16 0 01.303.084 16.016 16 0 01.331.105 16.016 16 0 01.331.109 16.016 16 0 01.327.12 16.016 16 0 01.323.122 16.016 16 0 01.322.129 16.016 16 0 01.323.14 16.016 16 0 01.315.146 16.016 16 0 01.315.15 16.016 16 0 01.307.16 16.016 16 0 01.306.166 16.016 16 0 01.299.169 16.016 16 0 01.298.181 16.016 16 0 01.299.186 16.016 16 0 01.29.19 16.016 16 0 01.283.197 16.016 16 0 01.283.201 16.016 16 0 01.278.214 16.016 16 0 01.274.214 16.016 16 0 01.267.221 16.016 16 0 01.262.23 16.016 16 0 01.258.23 16.016 16 0 01.25.242 16.016 16 0 01.25.242 16.016 16 0 01.243.25 16.016 16 0 01.238.254 16.016 16 0 01.23.258 16.016 16 0 01.226.266 16.016 16 0 01.218.266 16.016 16 0 01.214.278 16.016 16 0 01.21.278 16.016 16 0 01.201.282 16.016 16 0 01.194.282 16.016 16 0 01.19.295 16.016 16 0 01.181.298 16.016 16 0 01.178.298 16.016 16 0 01.17.303 16.016 16 0 01.16.306 16.016 16 0 01.162.31 16.016 16 0 01.145.315 16.016 16 0 01.146.318 16.016 16 0 01.137.319 16.016 16 0 01.129.322 16.016 16 0 01.12.323 16.016 16 0 01.114.33 16.016 16 0 01.109.33 16.016 16 0 01.1.331 16.016 16 0 01.094.34 16.016 16 0 01.084.334 16.016 16 0 01.081.338 16.016 16 0 01.069.339 16.016 16 0 01.064.343 16.016 16 0 01.057.342 16.016 16 0 01.048.343 16.016 16 0 01.04.347 16.016 16 0 01.037.346 16.016 16 0 01.024.343 16.016 16 0 01.02.35 16.016 16 0 01.012.343 16.016 16 0 010 .351 16.016 16 0 010 .121 16.016 16 0 010 .347 16.016 16 0 01-.016.346 16.016 16 0 01-.024.347 16.016 16 0 01-.028.347 16.016 16 0 01-.04.346 16.016 16 0 01-.041.343 16.016 16 0 01-.053.343 16.016 16 0 01-.056.342 16.016 16 0 01-.069.343 16.016 16 0 01-.072.339 16.016 16 0 01-.08.338 16.016 16 0 01-.09.335 16.016 16 0 01-.097.334 16.016 16 0 01-.1.331 16.016 16 0 01-.11.33 16.016 16 0 01-.12.323 16.016 16 0 01-.122.33 16.016 16 0 01-.133.323 16.016 16 0 01-.137.315 16.016 16 0 01-.145.318 16.016 16 0 01-.154.31 16.016 16 0 01-.16.31 16.016 16 0 01-.162.307 16.016 16 0 01-.174.299 16.016 16 0 01-.177.298 16.016 16 0 01-.186.294 16.016 16 0 01-.19.29 16.016 16 0 01-.201.287 16.016 16 0 01-.202.282 16.016 16 0 01-.21.274 16.016 16 0 01-.214.274 16.016 16 0 01-.226.266 16.016 16 0 01-.226.262 16.016 16 0 01-.23.262 16.016 16 0 01-.242.25 16.016 16 0 01-.242.25 16.016 16 0 01-.25.242 16.016 16 0 01-.255.234 16.016 16 0 01-.258.234 16.016 16 0 01-.266.225 16.016 16 0 01-.27.218 16.016 16 0 01-.275.214 16.016 16 0 01-.282.205 16.016 16 0 01-.279.202 16.016 16 0 01-.286.197 16.016 16 0 01-.295.186 16.016 16 0 01-.294.185 16.016 16 0 01-.3.178 16.016 16 0 01-.302.169 16.016 16 0 01-.306.161 16.016 16 0 01-.311.157 16.016 16 0 01-.315.15 16.016 16 0 01-.319.145 16.016 16 0 01-.318.133 16.016 16 0 01-.323.129 16.016 16 0 01-.323.12 16.016 16 0 01-.331.117 16.016 16 0 01-.33.11 16.016 16 0 01-.336.096 16.016 16 0 01-.19.057z"}));case"usb":return n.createElement("svg",{className:t,viewBox:"0 0 40 40"},n.createElement("path",{d:"M20 3a2 2 0 0 0-2 2v17.172l-3-3V13a2 2 0 0 0-2-2 2 2 0 0 0-2 2v7a2 2 0 0 0 .586 1.414L18 27.828V35a2 2 0 0 0 2 2 2 2 0 0 0 2-2V23.828l6.414-6.414A2 2 0 0 0 29 16V9a2 2 0 0 0-2-2 2 2 0 0 0-2 2v6.172l-3 3V5a2 2 0 0 0-2-2z"}));case"sun":return n.createElement("svg",{className:t,viewBox:"0 0 40 40"},n.createElement("path",{d:"M19.96.004a1.002 1.002 0 00-.163.02 1.002 1.002 0 00-.083.022 1.002 1.002 0 00-.08.027 1.002 1.002 0 00-.075.037 1.002 1.002 0 00-.325.258 1.002 1.002 0 00-.053.068 1.002 1.002 0 00-.114.223 1.002 1.002 0 00-.045.162 1.002 1.002 0 00-.012.084 1.002 1.002 0 00-.007.087v5a1.002 1.002 0 00.004.086 1.002 1.002 0 00.174.47 1.002 1.002 0 00.049.064 1.002 1.002 0 00.057.064 1.002 1.002 0 00.128.113 1.002 1.002 0 00.14.087 1.002 1.002 0 00.076.03 1.002 1.002 0 00.083.03 1.002 1.002 0 00.08.02 1.002 1.002 0 00.083.015 1.002 1.002 0 00.495-.06 1.002 1.002 0 00.076-.038 1.002 1.002 0 00.329-.258 1.002 1.002 0 00.094-.136 1.002 1.002 0 00.038-.075 1.002 1.002 0 00.038-.076 1.002 1.002 0 00.023-.083 1.002 1.002 0 00.03-.167 1.002 1.002 0 00.004-.083V.988a1.002 1.002 0 000-.087 1.002 1.002 0 00-.038-.167 1.002 1.002 0 00-.023-.075 1.002 1.002 0 00-.068-.155 1.002 1.002 0 00-.045-.072 1.002 1.002 0 00-.11-.129 1.002 1.002 0 00-.06-.056 1.002 1.002 0 00-.209-.14 1.002 1.002 0 00-.238-.084 1.002 1.002 0 00-.083-.015 1.002 1.002 0 00-.166-.007zm-9.43 2.542a1.002 1.002 0 00-.082.004 1.002 1.002 0 00-.167.022 1.002 1.002 0 00-.442.235 1.002 1.002 0 00-.114.12 1.002 1.002 0 00-.049.069 1.002 1.002 0 00-.113.227 1.002 1.002 0 00-.038.163 1.002 1.002 0 00-.012.25 1.002 1.002 0 00.008.082 1.002 1.002 0 00.019.084 1.002 1.002 0 00.026.079 1.002 1.002 0 00.068.151 1.002 1.002 0 000 .004l2.504 4.334a1.002 1.002 0 00.046.068 1.002 1.002 0 00.049.068 1.002 1.002 0 00.057.06 1.002 1.002 0 00.064.058 1.002 1.002 0 00.136.098 1.002 1.002 0 00.151.072 1.002 1.002 0 00.163.045 1.002 1.002 0 00.083.015 1.002 1.002 0 00.416-.045 1.002 1.002 0 00.076-.03 1.002 1.002 0 00.287-.178 1.002 1.002 0 00.114-.121 1.002 1.002 0 00.049-.068 1.002 1.002 0 00.045-.076 1.002 1.002 0 00.068-.151 1.002 1.002 0 00.023-.08 1.002 1.002 0 00.015-.083 1.002 1.002 0 00.015-.083 1.002 1.002 0 000-.087 1.002 1.002 0 00-.015-.163 1.002 1.002 0 00-.113-.321l-2.497-4.33a1.002 1.002 0 00-.11-.14 1.002 1.002 0 00-.056-.06 1.002 1.002 0 00-.06-.058 1.002 1.002 0 00-.212-.136 1.002 1.002 0 00-.076-.034 1.002 1.002 0 00-.166-.041 1.002 1.002 0 00-.167-.023zm18.953 0a1.002 1.002 0 00-.48.14 1.002 1.002 0 00-.068.045 1.002 1.002 0 00-.238.235 1.002 1.002 0 00-.05.072l-2.503 4.326a1.002 1.002 0 00-.038.076 1.002 1.002 0 00-.034.075 1.002 1.002 0 00-.023.084 1.002 1.002 0 00-.019.083 1.002 1.002 0 00-.011.25 1.002 1.002 0 00.007.083 1.002 1.002 0 00.042.162 1.002 1.002 0 00.068.155 1.002 1.002 0 00.095.14 1.002 1.002 0 00.056.065 1.002 1.002 0 00.121.113 1.002 1.002 0 00.072.05 1.002 1.002 0 00.072.037 1.002 1.002 0 00.235.09 1.002 1.002 0 00.416.008 1.002 1.002 0 00.083-.019 1.002 1.002 0 00.159-.056 1.002 1.002 0 00.075-.042 1.002 1.002 0 00.137-.094 1.002 1.002 0 00.12-.118 1.002 1.002 0 00.099-.14l2.5-4.334a1.002 1.002 0 00.072-.151 1.002 1.002 0 00.023-.08 1.002 1.002 0 00.03-.166 1.002 1.002 0 000-.17 1.002 1.002 0 00-.117-.4 1.002 1.002 0 00-.152-.201 1.002 1.002 0 00-.12-.114 1.002 1.002 0 00-.073-.049 1.002 1.002 0 00-.147-.076 1.002 1.002 0 00-.076-.034 1.002 1.002 0 00-.083-.019 1.002 1.002 0 00-.083-.015 1.002 1.002 0 00-.083-.011 1.002 1.002 0 00-.087 0zm-9.478 6.448A11.006 11.005 0 009 20a11.006 11.005 0 0011.006 11.009 11.006 11.005 0 0011.006-11.006A11.006 11.005 0 0020.005 8.998zm-16.452.51a1.002 1.002 0 00-.083 0 1.002 1.002 0 00-.167.027 1.002 1.002 0 00-.076.027 1.002 1.002 0 00-.079.03 1.002 1.002 0 00-.076.038 1.002 1.002 0 00-.075.041 1.002 1.002 0 00-.19.163 1.002 1.002 0 00-.052.064 1.002 1.002 0 00-.05.076 1.002 1.002 0 00-.075.144 1.002 1.002 0 00-.034.08 1.002 1.002 0 00-.02.082 1.002 1.002 0 00-.026.167 1.002 1.002 0 000 .083 1.002 1.002 0 00.016.166 1.002 1.002 0 00.018.083 1.002 1.002 0 00.061.156 1.002 1.002 0 00.136.211 1.002 1.002 0 00.057.065 1.002 1.002 0 00.2.155l4.33 2.503a1.002 1.002 0 00.077.038 1.002 1.002 0 00.242.076 1.002 1.002 0 00.25.011 1.002 1.002 0 00.325-.083 1.002 1.002 0 00.34-.246 1.002 1.002 0 00.053-.064 1.002 1.002 0 00.155-.295 1.002 1.002 0 00.038-.167 1.002 1.002 0 00.011-.083 1.002 1.002 0 00-.004-.166 1.002 1.002 0 00-.06-.246 1.002 1.002 0 00-.117-.223 1.002 1.002 0 00-.106-.129 1.002 1.002 0 00-.129-.11 1.002 1.002 0 00-.072-.045L4.037 9.63a1.002 1.002 0 00-.151-.069 1.002 1.002 0 00-.246-.052 1.002 1.002 0 00-.083-.004zm32.905 0a1.002 1.002 0 00-.087 0 1.002 1.002 0 00-.084.012 1.002 1.002 0 00-.162.045 1.002 1.002 0 00-.076.03 1.002 1.002 0 00-.075.039l-4.339 2.503a1.002 1.002 0 00-.068.046 1.002 1.002 0 00-.068.049 1.002 1.002 0 00-.06.056 1.002 1.002 0 00-.19.277 1.002 1.002 0 00-.083.238 1.002 1.002 0 00-.015.253 1.002 1.002 0 00.023.163 1.002 1.002 0 00.132.31 1.002 1.002 0 00.046.072 1.002 1.002 0 00.053.064 1.002 1.002 0 00.06.06 1.002 1.002 0 00.064.054 1.002 1.002 0 00.069.049 1.002 1.002 0 00.071.045 1.002 1.002 0 00.076.038 1.002 1.002 0 00.076.03 1.002 1.002 0 00.083.023 1.002 1.002 0 00.08.015 1.002 1.002 0 00.086.015 1.002 1.002 0 00.167 0 1.002 1.002 0 00.083-.015 1.002 1.002 0 00.083-.015 1.002 1.002 0 00.235-.095l4.334-2.503a1.002 1.002 0 00.068-.046 1.002 1.002 0 00.068-.053 1.002 1.002 0 00.06-.056 1.002 1.002 0 00.057-.06 1.002 1.002 0 00.099-.137 1.002 1.002 0 00.072-.151 1.002 1.002 0 00.045-.167 1.002 1.002 0 00.011-.08 1.002 1.002 0 00.004-.17 1.002 1.002 0 00-.007-.083 1.002 1.002 0 00-.016-.083 1.002 1.002 0 00-.022-.08 1.002 1.002 0 00-.03-.079 1.002 1.002 0 00-.038-.075 1.002 1.002 0 00-.038-.076 1.002 1.002 0 00-.05-.068 1.002 1.002 0 00-.241-.227 1.002 1.002 0 00-.076-.045 1.002 1.002 0 00-.076-.038 1.002 1.002 0 00-.075-.03 1.002 1.002 0 00-.163-.038 1.002 1.002 0 00-.17-.015zM.988 19.002a1.002 1.002 0 00-.087.004 1.002 1.002 0 00-.166.03 1.002 1.002 0 00-.303.144 1.002 1.002 0 00-.064.05 1.002 1.002 0 00-.064.056 1.002 1.002 0 00-.057.06 1.002 1.002 0 00-.053.068 1.002 1.002 0 00-.049.069 1.002 1.002 0 00-.076.15 1.002 1.002 0 00-.06.243 1.002 1.002 0 00.011.333 1.002 1.002 0 00.344.567 1.002 1.002 0 00.068.05 1.002 1.002 0 00.224.116 1.002 1.002 0 00.075.027 1.002 1.002 0 00.087.019 1.002 1.002 0 00.083.011 1.002 1.002 0 00.087.004h5a1.002 1.002 0 00.17-.015 1.002 1.002 0 00.084-.02 1.002 1.002 0 00.23-.094 1.002 1.002 0 00.072-.045 1.002 1.002 0 00.065-.053 1.002 1.002 0 00.064-.057 1.002 1.002 0 00.057-.06 1.002 1.002 0 00.174-.284 1.002 1.002 0 00.049-.163 1.002 1.002 0 00-.019-.499 1.002 1.002 0 00-.026-.08 1.002 1.002 0 00-.122-.218 1.002 1.002 0 00-.052-.065 1.002 1.002 0 00-.061-.064 1.002 1.002 0 00-.06-.053 1.002 1.002 0 00-.137-.098 1.002 1.002 0 00-.4-.125A1.002 1.002 0 005.987 19H.992zm33.019 0a1.002 1.002 0 00-.167.015 1.002 1.002 0 00-.158.046 1.002 1.002 0 00-.076.034 1.002 1.002 0 00-.216.132 1.002 1.002 0 00-.219.254 1.002 1.002 0 00-.042.075 1.002 1.002 0 00-.098.318 1.002 1.002 0 00-.008.17 1.002 1.002 0 00.008.083 1.002 1.002 0 00.038.163 1.002 1.002 0 00.023.08 1.002 1.002 0 00.037.075 1.002 1.002 0 00.137.212 1.002 1.002 0 00.26.212 1.002 1.002 0 00.076.037 1.002 1.002 0 00.076.038 1.002 1.002 0 00.08.023 1.002 1.002 0 00.082.019 1.002 1.002 0 00.084.011 1.002 1.002 0 00.087.004h5.003a1.002 1.002 0 00.167-.015 1.002 1.002 0 00.083-.02 1.002 1.002 0 00.23-.094 1.002 1.002 0 00.14-.098 1.002 1.002 0 00.175-.182 1.002 1.002 0 00.087-.143 1.002 1.002 0 00.06-.155 1.002 1.002 0 00-.026-.662 1.002 1.002 0 00-.121-.22 1.002 1.002 0 00-.114-.128 1.002 1.002 0 00-.196-.151 1.002 1.002 0 00-.076-.038 1.002 1.002 0 00-.238-.076 1.002 1.002 0 00-.17-.019h-5zm-26.15 7.012a1.002 1.002 0 00-.163.015 1.002 1.002 0 00-.083.019 1.002 1.002 0 00-.238.095l-4.33 2.5a1.002 1.002 0 00-.073.045 1.002 1.002 0 00-.128.113 1.002 1.002 0 00-.106.125 1.002 1.002 0 00-.046.072 1.002 1.002 0 00-.075.151 1.002 1.002 0 00-.023.08 1.002 1.002 0 00-.034.166 1.002 1.002 0 00-.008.083 1.002 1.002 0 00.08.409 1.002 1.002 0 00.076.151 1.002 1.002 0 00.049.068 1.002 1.002 0 00.056.064 1.002 1.002 0 00.057.06 1.002 1.002 0 00.133.107 1.002 1.002 0 00.15.08 1.002 1.002 0 00.076.03 1.002 1.002 0 00.163.041 1.002 1.002 0 00.083.011 1.002 1.002 0 00.25-.011 1.002 1.002 0 00.163-.042 1.002 1.002 0 00.079-.034 1.002 1.002 0 00.076-.037l4.334-2.5a1.002 1.002 0 00.136-.099 1.002 1.002 0 00.06-.056 1.002 1.002 0 00.057-.065 1.002 1.002 0 00.053-.064 1.002 1.002 0 00.144-.303 1.002 1.002 0 00.019-.083 1.002 1.002 0 00.019-.25 1.002 1.002 0 00-.076-.328 1.002 1.002 0 00-.37-.447 1.002 1.002 0 00-.076-.041 1.002 1.002 0 00-.076-.038 1.002 1.002 0 00-.075-.03 1.002 1.002 0 00-.08-.027 1.002 1.002 0 00-.083-.015 1.002 1.002 0 00-.083-.011 1.002 1.002 0 00-.087 0zm24.3 0a1.002 1.002 0 00-.083 0 1.002 1.002 0 00-.083.011 1.002 1.002 0 00-.083.02 1.002 1.002 0 00-.076.022 1.002 1.002 0 00-.083.03 1.002 1.002 0 00-.148.083 1.002 1.002 0 00-.068.05 1.002 1.002 0 00-.125.113 1.002 1.002 0 00-.14.208 1.002 1.002 0 00-.037.076 1.002 1.002 0 00-.053.158 1.002 1.002 0 00-.027.254 1.002 1.002 0 00.02.163 1.002 1.002 0 00.018.083 1.002 1.002 0 00.027.08 1.002 1.002 0 00.034.079 1.002 1.002 0 00.136.211 1.002 1.002 0 00.057.06 1.002 1.002 0 00.124.114 1.002 1.002 0 00.072.046l4.335 2.5a1.002 1.002 0 00.15.071 1.002 1.002 0 00.25.053 1.002 1.002 0 00.167 0 1.002 1.002 0 00.083-.007 1.002 1.002 0 00.163-.042 1.002 1.002 0 00.227-.113 1.002 1.002 0 00.189-.163 1.002 1.002 0 00.056-.064 1.002 1.002 0 00.087-.144 1.002 1.002 0 00.069-.151 1.002 1.002 0 00.045-.25 1.002 1.002 0 000-.087 1.002 1.002 0 000-.083 1.002 1.002 0 00-.06-.242 1.002 1.002 0 00-.03-.08 1.002 1.002 0 00-.088-.143 1.002 1.002 0 00-.11-.129 1.002 1.002 0 00-.06-.06 1.002 1.002 0 00-.064-.05 1.002 1.002 0 00-.076-.049l-4.33-2.5a1.002 1.002 0 00-.152-.071 1.002 1.002 0 00-.08-.023 1.002 1.002 0 00-.166-.03 1.002 1.002 0 00-.087 0zM12.97 31.145a1.002 1.002 0 00-.083.008 1.002 1.002 0 00-.083.011 1.002 1.002 0 00-.083.019 1.002 1.002 0 00-.367.197 1.002 1.002 0 00-.064.056 1.002 1.002 0 00-.11.125 1.002 1.002 0 00-.046.072l-2.503 4.334a1.002 1.002 0 00-.095.235 1.002 1.002 0 00-.03.25 1.002 1.002 0 00.053.328 1.002 1.002 0 00.03.076 1.002 1.002 0 00.129.22 1.002 1.002 0 00.177.177 1.002 1.002 0 00.076.05 1.002 1.002 0 00.223.105 1.002 1.002 0 00.163.038 1.002 1.002 0 00.336-.008 1.002 1.002 0 00.163-.045 1.002 1.002 0 00.288-.17 1.002 1.002 0 00.174-.182 1.002 1.002 0 00.045-.072l2.504-4.334a1.002 1.002 0 00.068-.151 1.002 1.002 0 00.026-.08 1.002 1.002 0 00.015-.087 1.002 1.002 0 00.004-.332 1.002 1.002 0 00-.019-.084 1.002 1.002 0 00-.185-.374 1.002 1.002 0 00-.114-.125 1.002 1.002 0 00-.132-.098 1.002 1.002 0 00-.076-.042 1.002 1.002 0 00-.15-.068 1.002 1.002 0 00-.167-.038 1.002 1.002 0 00-.083-.007 1.002 1.002 0 00-.084 0zm14.07 0a1.002 1.002 0 00-.25.027 1.002 1.002 0 00-.162.052 1.002 1.002 0 00-.076.038 1.002 1.002 0 00-.14.087 1.002 1.002 0 00-.181.178 1.002 1.002 0 00-.2.454 1.002 1.002 0 00-.012.087 1.002 1.002 0 000 .083 1.002 1.002 0 00.011.166 1.002 1.002 0 00.042.163 1.002 1.002 0 00.068.151 1.002 1.002 0 000 .004l2.504 4.334a1.002 1.002 0 00.045.068 1.002 1.002 0 00.238.239 1.002 1.002 0 00.144.083 1.002 1.002 0 00.817.019 1.002 1.002 0 00.151-.076 1.002 1.002 0 00.068-.05 1.002 1.002 0 00.065-.052 1.002 1.002 0 00.06-.06 1.002 1.002 0 00.057-.061 1.002 1.002 0 00.05-.068 1.002 1.002 0 00.113-.227 1.002 1.002 0 00.022-.083 1.002 1.002 0 00.015-.08 1.002 1.002 0 00.016-.17 1.002 1.002 0 00-.016-.166 1.002 1.002 0 00-.041-.163 1.002 1.002 0 00-.034-.076 1.002 1.002 0 00-.038-.075l-2.5-4.338a1.002 1.002 0 00-.045-.068 1.002 1.002 0 00-.239-.238 1.002 1.002 0 00-.072-.046 1.002 1.002 0 00-.075-.038 1.002 1.002 0 00-.155-.056 1.002 1.002 0 00-.167-.038 1.002 1.002 0 00-.083 0zm-7.076 1.88a1.002 1.002 0 00-.48.143 1.002 1.002 0 00-.069.05 1.002 1.002 0 00-.128.11 1.002 1.002 0 00-.053.064 1.002 1.002 0 00-.053.064 1.002 1.002 0 00-.144.302 1.002 1.002 0 00-.034.254v5.003a1.002 1.002 0 00.004.084 1.002 1.002 0 00.011.083 1.002 1.002 0 00.076.238 1.002 1.002 0 00.038.076 1.002 1.002 0 00.098.14 1.002 1.002 0 00.057.064 1.002 1.002 0 00.268.196 1.002 1.002 0 00.076.035 1.002 1.002 0 00.083.026 1.002 1.002 0 00.08.023 1.002 1.002 0 00.253.019 1.002 1.002 0 00.73-.363 1.002 1.002 0 00.094-.137 1.002 1.002 0 00.133-.484v-5.003a1.002 1.002 0 000-.083 1.002 1.002 0 00-.015-.087 1.002 1.002 0 00-.02-.08 1.002 1.002 0 00-.14-.302 1.002 1.002 0 00-.052-.068 1.002 1.002 0 00-.057-.065 1.002 1.002 0 00-.125-.11 1.002 1.002 0 00-.143-.086 1.002 1.002 0 00-.239-.084 1.002 1.002 0 00-.083-.015 1.002 1.002 0 00-.166-.007z"}));case"frame":return n.createElement("svg",{className:t,viewBox:"0 0 40 40"},n.createElement("path",{d:"M30 29H10V11h20zm1 1V10H9v20zm1 1H8V9h24zm2 2V7H6v26z"}));case"meta":return n.createElement("svg",{className:t,viewBox:"0 0 40 40"},n.createElement("path",{d:"M31.596 9.683c0-1.494-.265-2.396-.795-2.705-.518-.322-1.452-.483-2.801-.483V3.539l1.608-.039c1.904 0 3.26.444 4.067 1.333.819.889 1.229 2.3 1.229 4.231v6.164c0 1.25.192 2.106.578 2.57.398.463.904.766 1.518.908v2.801c-1.398.31-2.096 1.385-2.096 3.227v6.472c0 1.88-.428 3.233-1.284 4.057-.843.825-2.21 1.237-4.102 1.237-.337 0-.843-.013-1.518-.039v-2.956c1.518 0 2.494-.206 2.928-.618.445-.412.668-1.243.668-2.492zM18 25v5h-5v-5zm9 0v5h-5v-5ZM8.404 30.317c0 1.494.265 2.396.795 2.705.53.322 1.464.483 2.801.483v2.956l-1.627.039c-1.843 0-3.186-.425-4.03-1.275-.843-.85-1.265-2.28-1.265-4.29v-6.163c0-1.262-.198-2.119-.596-2.57A2.753 2.753 0 0 0 3 21.295v-2.801c1.386-.31 2.078-1.385 2.078-3.227V8.794c0-1.88.422-3.233 1.265-4.057C7.2 3.912 8.578 3.5 10.482 3.5c.325 0 .831.013 1.518.039v2.956c-1.518 0-2.5.206-2.946.618-.434.412-.65 1.243-.65 2.492z"}));default:return null}};S.propTypes={name:g().string.isRequired,className:g().string},S.defaultProps={className:null};var N=S,x=(r(92222),function(e){var t=e.children,r=e.pluginsActive,a=e.hash,o=(0,u.v9)((function(e){return e.plugins})),i=(0,u.I0)();return n.createElement("span",{className:"plugin-select__wrapper"},t,n.createElement("ul",{className:m()("plugin-select",{"plugin-select--active":r})},o.map((function(e){var t=e.url,r=e.name,o=e.description,l=e.loading,c=e.error;return n.createElement("li",{className:"plugin-select__plugin-list-entry",key:t},n.createElement("button",{type:"button",className:"plugin-select__button",disabled:Boolean(l||c),title:"".concat(c||o||"","\n").concat(t),onClick:function(){return function(e){i(a?{type:d.Ib,payload:{url:e,hash:a}}:{type:d.ui,payload:{url:e}})}(t)}},c&&n.createElement(N,{name:"warn"}),l&&n.createElement(N,{name:"loading"}),r||t))}))))});x.propTypes={children:g().node.isRequired,pluginsActive:g().bool.isRequired,hash:g().string},x.defaultProps={hash:null};var k=x;function O(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==r)return;var n,a,o=[],i=!0,l=!1;try{for(r=r.call(e);!(i=(n=r.next()).done)&&(o.push(n.value),!t||o.length!==t);i=!0);}catch(e){l=!0,a=e}finally{try{i||null==r.return||r.return()}finally{if(l)throw a}}return o}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return j(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return j(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function j(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}v().extend(w());var P=function(e){var t=O((0,n.useState)(!1),2),r=t[0],a=t[1];return n.createElement("div",{className:"gallery-image-buttons",onClick:function(e){e.stopPropagation()},role:"presentation",onMouseLeave:function(){return a(!1)}},e.updateImageToSelection?n.createElement("button",{type:"button",className:m()("gallery-image-buttons__button",{"gallery-image-buttons__button--unchecked":!e.isSelected,"gallery-image-buttons__button--checked":e.isSelected}),onClick:function(){return e.updateImageToSelection(e.isSelected?"remove":"add")}},n.createElement(N,{name:"checkmark"})):null,e.startDownload?n.createElement("button",{type:"button",className:"gallery-image-buttons__button",onClick:e.startDownload},n.createElement(N,{name:"download"})):null,e.deleteImage?n.createElement("button",{type:"button",className:"gallery-image-buttons__button",onClick:e.deleteImage},n.createElement(N,{name:"delete"})):null,e.setLightboxImage?n.createElement("button",{type:"button",className:"gallery-image-buttons__button",onClick:e.setLightboxImage},n.createElement(N,{name:"view"})):null,e.saveRGBNImage?n.createElement("button",{type:"button",className:"gallery-image-buttons__button",onClick:e.saveRGBNImage},n.createElement(N,{name:"save"})):null,e.hasPlugins?n.createElement(k,{pluginsActive:r,hash:e.hash},n.createElement("button",{type:"button",className:"gallery-image-buttons__button",onClick:function(){return a(!0)}},n.createElement(N,{name:"plug"}))):null,e.shareImage&&e.canShare?n.createElement("button",{type:"button",className:"gallery-image-buttons__button",onClick:e.shareImage},n.createElement(N,{name:"share"})):null,e.updateFavouriteTag?n.createElement("button",{type:"button",className:m()("gallery-image-buttons__button",{"gallery-image-buttons__button--unchecked":!e.isFavourite,"gallery-image-buttons__button--favourite":e.isFavourite}),onClick:function(){return e.updateFavouriteTag(!e.isFavourite)}},e.isFavourite?"❤️":n.createElement(N,{name:"fav"})):null)};P.propTypes={canShare:g().bool.isRequired,deleteImage:g().func,setLightboxImage:g().func,isSelected:g().bool.isRequired,isFavourite:g().bool.isRequired,saveRGBNImage:g().func,shareImage:g().func,startDownload:g().func,updateImageToSelection:g().func,updateFavouriteTag:g().func,hasPlugins:g().bool.isRequired,hash:g().string.isRequired},P.defaultProps={deleteImage:null,setLightboxImage:null,saveRGBNImage:null,shareImage:null,startDownload:null,updateImageToSelection:null,updateFavouriteTag:null};var I=_(P);var A=(0,u.$j)((function(e,t){var r,n,a,o,i=t.hash;return{isR:(null===(r=e.rgbnImages)||void 0===r?void 0:r.r)===i,isG:(null===(n=e.rgbnImages)||void 0===n?void 0:n.g)===i,isB:(null===(a=e.rgbnImages)||void 0===a?void 0:a.b)===i,isN:(null===(o=e.rgbnImages)||void 0===o?void 0:o.n)===i}}),(function(e,t){return{updateRGBN:function(r,n){var a,o,i;e({type:d.Sd,payload:(a={},o=r,i=n?t.hash:"",o in a?Object.defineProperty(a,o,{value:i,enumerable:!0,configurable:!0,writable:!0}):a[o]=i,a)})}}})),R=[{propKey:"isR",cssModifier:"red",updateKey:"r"},{propKey:"isG",cssModifier:"green",updateKey:"g"},{propKey:"isB",cssModifier:"blue",updateKey:"b"},{propKey:"isN",cssModifier:"normal",updateKey:"n"}],C=function(e){return n.createElement("div",{className:"rgbn-select",onClick:function(e){e.stopPropagation()},role:"presentation"},R.map((function(t){var r=t.propKey,a=t.cssModifier,o=t.updateKey;return n.createElement("button",{type:"button",key:r,className:m()("rgbn-select__button rgbn-select__button--".concat(a),{"rgbn-select__button--selected":e[r]}),onClick:function(){e.updateRGBN(o,!e[r])}},n.createElement(N,{name:"circle"}))})))};C.propTypes={isR:g().bool.isRequired,isG:g().bool.isRequired,isB:g().bool.isRequired,isN:g().bool.isRequired,updateRGBN:g().func.isRequired},C.defaultProps={};var F=A(C),T=r(31712),q=r(28014),L=(0,u.$j)((function(e){return{loadImageTiles:(0,q.Z)(e)}}),(function(e){return{recover:function(t){e({type:d.UF,payload:t})}}})),D=r(97768),B=r(17036),M=r(22604),z=r(25108),U=function(e){var t=e.palette,r=e.tiles,a=e.lockFrame,o=e.invertPalette,i=e.asThumb,l=e.rotation,c=(0,n.useRef)(null);return(0,n.useEffect)((function(){if(t&&r){var e=document.createElement("canvas");e.width=160,e.height=144;try{if(t.length)(new D.Z).update({canvas:e,tiles:r,palette:t,lockFrame:a,invertPalette:o});else(new B.Z).update({canvas:e,tiles:r,palette:t,lockFrame:a})}catch(e){z.log("error in GameBoyImage: ".concat(e.message))}(0,M.Z)(e,c.current,l)}}),[r,t,a,o,l]),n.createElement("div",{className:m()("gameboy-image",{"gameboy-image--rot-90":1===l,"gameboy-image--rot-180":2===l,"gameboy-image--rot-270":3===l})},n.createElement("canvas",{className:m()("gameboy-image__image",{"gameboy-image__image--as-thumb":i,"gameboy-image__image--min-size":r.length<=360}),width:160,ref:c}))};U.propTypes={tiles:g().oneOfType([g().arrayOf(g().string),g().arrayOf(g().object)]).isRequired,palette:g().oneOfType([g().object,g().array]),lockFrame:g().bool.isRequired,invertPalette:g().bool.isRequired,asThumb:g().bool,rotation:g().number},U.defaultProps={palette:null,asThumb:!1,rotation:null};var G=U;function V(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==r)return;var n,a,o=[],i=!0,l=!1;try{for(r=r.call(e);!(i=(n=r.next()).done)&&(o.push(n.value),!t||o.length!==t);i=!0);}catch(e){l=!0,a=e}finally{try{i||null==r.return||r.return()}finally{if(l)throw a}}return o}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return $(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return $(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function $(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var H=function(e){var t=e.hash,r=e.hashes,a=e.frameId,o=e.lockFrame,i=e.invertPalette,l=e.palette,c=e.loadImageTiles,u=e.reportTileCount,s=e.recover,m=e.rotation,f=V((0,n.useState)(null),2),p=f[0],d=f[1];return(0,n.useEffect)((function(){var e=!1;return c({hash:t,frame:a,hashes:r},!1,s).then((function(t){e||(u(t.length),d(t))})),function(){e=!0}}),[c,u,t,r,a,s]),p?n.createElement(G,{lockFrame:o,invertPalette:i,tiles:p,palette:l,rotation:m}):n.createElement("div",{className:"image-render--loading"})};H.propTypes={loadImageTiles:g().func.isRequired,reportTileCount:g().func,hash:g().string.isRequired,hashes:g().object,palette:g().oneOfType([g().object,g().array]).isRequired,invertPalette:g().bool.isRequired,frameId:g().string,lockFrame:g().bool.isRequired,recover:g().func.isRequired,rotation:g().number},H.defaultProps={hashes:null,frameId:null,reportTileCount:function(){},rotation:null};var Z=L(H);v().extend(w());var W=function(e){var t=e.hideDate,r=e.created,a=e.updateImageSelection,o=e.isSelected,i=e.page,l=e.editImage,c=e.lockFrame,u=e.invertPalette,s=e.palette,d=e.frame,h=e.title,y=e.tags,g=e.isFavourite,b=e.hash,E=e.hashes,w=e.type,_=e.preferredLocale,S=e.meta,x=e.rotation,k=e.enableDebug,O=function(e){return t||!r?null:n.createElement("span",{className:e},(0,T.Z)(v()(r,f.vc),_))},j=function(){return n.createElement("ul",{className:"gallery-image__tags"},y.sort((function(e,t){return e.toLowerCase().localeCompare(t.toLowerCase())})).map((function(e){return n.createElement("li",{key:e,title:e===p.oJ?"Favourite":e,className:"gallery-image__tag"},e===p.oJ?"❤️":e)})))},P=function(e){e.ctrlKey||e.shiftKey?(e.preventDefault(),a(o?"remove":"add",e.shiftKey,i)):l()};return"default"===w?n.createElement("li",{className:m()("gallery-image",{"gallery-image--selected":o}),onClick:P,role:"presentation"},n.createElement("div",{className:"gallery-image__image"},n.createElement(Z,{lockFrame:c,invertPalette:u,palette:s.palette||s,frameId:d,hash:b,hashes:E,rotation:x})),h?n.createElement("span",{className:"gallery-image__title"},h):null,j(),n.createElement("div",{className:"gallery-image__created-meta"},S?n.createElement(n.Fragment,null,n.createElement("div",{className:"gallery-image__meta"},n.createElement(N,{name:"meta"})),n.createElement("pre",{className:"gallery-image__meta-pre"},JSON.stringify(S,null,2))):null,O("gallery-image__created")),k?n.createElement("span",{className:"gallery-image__hash-debug"},b):null,n.createElement(I,{isFavourite:g,hash:b,buttons:["select","favourite","download","delete","view","share","plugins"]})):n.createElement("li",{className:m()("gallery-list-image",{"gallery-list-image--selected":o}),onClick:P,role:"presentation"},n.createElement("div",{className:"gallery-list-image__cell gallery-list-image__cell-image"},n.createElement("div",{className:"gallery-list-image__image"},n.createElement("div",{className:"gallery-list-image__image--scale"},n.createElement(Z,{lockFrame:c,invertPalette:u,palette:s.palette||s,frameId:d,hash:b,hashes:E,rotation:x})))),n.createElement("div",{className:"gallery-list-image__cell gallery-list-image__cell-description"},n.createElement("div",{className:"gallery-list-image__description"},n.createElement("span",{className:"gallery-list-image__title"},h),O("gallery-list-image__created"))),n.createElement("div",{className:"gallery-list-image__cell gallery-list-image__cell-tags"},j()),n.createElement("div",{className:"gallery-list-image__cell gallery-list-image__cell-rgbn"},E?null:n.createElement(F,{hash:b})),n.createElement("div",{className:"gallery-list-image__cell gallery-list-image__cell-buttons"},n.createElement(I,{isFavourite:g,hash:b,buttons:["select","favourite","download","delete","view","plugins"]})))};W.propTypes={created:g().string,hash:g().string.isRequired,hashes:g().object,palette:g().object.isRequired,invertPalette:g().bool.isRequired,frame:g().string,lockFrame:g().bool.isRequired,title:g().string.isRequired,tags:g().arrayOf(g().string).isRequired,isFavourite:g().bool.isRequired,editImage:g().func.isRequired,type:g().oneOf(["list","default"]).isRequired,isSelected:g().bool.isRequired,updateImageSelection:g().func.isRequired,page:g().number.isRequired,hideDate:g().bool.isRequired,preferredLocale:g().string,meta:g().object,rotation:g().number,enableDebug:g().bool.isRequired},W.defaultProps={created:null,hashes:null,frame:null,preferredLocale:null,meta:null,rotation:0};var K=h(W),J=(0,u.$j)((function(e){return{currentView:e.galleryView}}),(function(e){return{updateView:function(t){e({type:d.O,payload:t})}}})),Y=["list","1x","2x","3x","4x"],Q=function(e){return n.createElement("ul",{className:"gallery-view-select gallery-button__group"},Y.map((function(t){return n.createElement("li",{key:t,className:m()("gallery-button gallery-button--enabled",{"gallery-button--selected":e.currentView===t})},n.createElement("button",{type:"button",onClick:function(){e.updateView(t)}},n.createElement(N,{name:t})))})))};Q.propTypes={currentView:g().string.isRequired,updateView:g().func.isRequired},Q.defaultProps={};var X=J(Q),ee=function(e){return n.createElement("li",{className:m()("gallery-button pagination__button",{"gallery-button--selected":e.active})},n.createElement(a.OL,{className:"pagination__link",to:"/gallery/page/".concat(e.page+1),disabled:e.disabled,title:e.title},e.children))};ee.propTypes={children:g().node.isRequired,active:g().bool,disabled:g().bool,page:g().number.isRequired,title:g().string.isRequired},ee.defaultProps={active:!1,disabled:!1};var te=ee,re=r(87954),ne=r(84413);function ae(e){return function(e){if(Array.isArray(e))return oe(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return oe(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return oe(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function oe(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var ie=function(e){var t=e.images,r=e.filtersActiveTags,n=e.recentImports;return ae(t).filter((0,ne.Z)(r,n)).filter((0,re.Z)(r)).length};function le(e){return function(e){if(Array.isArray(e))return ce(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return ce(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return ce(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ce(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var ue=function(e){var t=(0,u.v9)((function(e){return e.pageSize?Math.ceil(ie(e)/e.pageSize):0}));if(t<2)return null;var r=le(new Array(t)).map((function(e,t){return t})),a=e.page,o=r.map((function(e){switch(e){case 0:case a-1:case a:case a+1:case r.length-1:return n.createElement(te,{key:e,page:e,active:e===a,title:"To page ".concat(e+1),disabled:e===a},e+1);case a-2:case a+2:return n.createElement("li",{key:e,className:"gallery-button pagination__ellipsis"});default:return null}}));return a>0&&o.unshift(n.createElement(te,{key:"back",title:"To previous page",disabled:a<1,page:a-1},n.createElement(N,{name:"left"}))),a<r.length-1&&o.push(n.createElement(te,{key:"next",title:"To next page",disabled:a>=r.length-1,page:a+1},n.createElement(N,{name:"right"}))),n.createElement("ul",{className:"pagination gallery-button__group"},o.filter(Boolean))};ue.propTypes={page:g().number.isRequired};var se=ue,me=(r(40561),r(81477)),fe=function(e){var t=(0,u.v9)((function(e){return e})),r=(0,u.I0)(),n=e*t.pageSize,a=!!(0,me.Z)(t).splice(n,t.pageSize||1/0).find((function(e){var r=e.hash;return t.imageSelection.includes(r)}));return{hasPlugins:!!t.plugins.length,batchEnabled:t.imageSelection.length>1,activeFilters:t.filtersActiveTags.length||0,selectedImages:t.imageSelection.length,hasSelected:a,batchTask:function(t){r({type:d.ax,payload:t,page:e})},filter:function(){r({type:d.y9})},showSortOptions:function(){r({type:d.XB})}}};function pe(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==r)return;var n,a,o=[],i=!0,l=!1;try{for(r=r.call(e);!(i=(n=r.next()).done)&&(o.push(n.value),!t||o.length!==t);i=!0);}catch(e){l=!0,a=e}finally{try{i||null==r.return||r.return()}finally{if(l)throw a}}return o}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return de(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return de(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function de(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var he=["download","delete","edit"];he.push("animate");var ye=function(e){var t=e.page,r=fe(t),a=r.hasPlugins,o=r.batchEnabled,i=r.activeFilters,l=r.selectedImages,c=r.hasSelected,u=r.batchTask,s=r.filter,f=r.showSortOptions,p=pe((0,n.useState)(!1),2),d=p[0],h=p[1];return n.createElement("ul",{className:"batch-buttons gallery-button__group"},n.createElement("li",{className:"gallery-button gallery-button--enabled"},n.createElement("button",{type:"button",onClick:f},n.createElement(N,{name:"sort"}))),n.createElement("li",{className:"gallery-button gallery-button--enabled"},n.createElement("button",{type:"button",onClick:s},n.createElement(N,{name:"filter"}),0===i?null:n.createElement("span",{className:"batch-buttons__bubble"},i))),n.createElement("li",{className:m()("gallery-button gallery-button--enabled",{"gallery-button--has-selected":!c})},n.createElement("button",{type:"button",onClick:function(){return u(c?"uncheckall":"checkall")}},n.createElement(N,{name:"checkmark"}),0===l?null:n.createElement("span",{className:"batch-buttons__bubble"},l))),he.map((function(e){return n.createElement("li",{key:e,className:m()("gallery-button",{"gallery-button--disabled":!o,"gallery-button--enabled":o})},n.createElement("button",{disabled:!o,type:"button",onClick:function(){return u(e)}},n.createElement(N,{name:e})))})),a?n.createElement("li",{className:m()("gallery-button",{"gallery-button--disabled":!o,"gallery-button--enabled":o}),onMouseLeave:function(){return h(!1)}},n.createElement(k,{pluginsActive:d},n.createElement("button",{type:"button",onClick:function(){return h(!0)}},n.createElement(N,{name:"plug"})))):null)};ye.propTypes={page:g().number.isRequired},ye.defaultProps={};var ge=ye,be=function(e){return n.createElement("div",{className:m()("gallery-header",{"gallery-header--sticky":e.isSticky,"gallery-header--bottom":e.isBottom})},n.createElement(X,null),n.createElement(se,{page:e.page}),n.createElement(ge,{page:e.page}))};be.propTypes={page:g().number.isRequired,isSticky:g().bool,isBottom:g().bool},be.defaultProps={isSticky:!1,isBottom:!1};var ve=be,Ee=function(e){return n.createElement(n.Fragment,null,n.createElement("h2",{className:"gallery-intro__counter"},"".concat(e.imageCount," images"),e.filteredCount?" / ".concat(e.filteredCount," filtered"):null,e.selectedCount?" / ".concat(e.selectedCount," selected"):null),n.createElement("p",{className:"gallery-intro__content-hint"},"These images are stored in the localStorage of your browser. That's why you (currently) cannot share a link to one of them.",n.createElement("br",null),"Also if you clear your browser's cookies, the images will be gone too."))};Ee.propTypes={imageCount:g().number.isRequired,selectedCount:g().number.isRequired,filteredCount:g().number.isRequired};var we=Ee,_e=(r(91058),function(e){var t=e.pageSize,r=e.imageCount,n=(0,o.UO)().page,a=parseInt(n||"0",10)-1,i=t?Math.ceil(r/t):1,l=Math.max(0,i-1),c=Math.max(0,Math.min(a,l));return{valid:c===a,page:c}}),Se=function(e){var t=(0,u.v9)((function(e){return e})),r=e*t.pageSize;return{images:(0,me.Z)(t).splice(r,t.pageSize||1/0),currentView:t.galleryView}};var Ne=function(){var e=(0,u.v9)((function(e){return{imageCount:e.images.length,pageSize:e.pageSize,selectedCount:e.imageSelection.length,filteredCount:ie(e)}})),t=e.imageCount,r=e.selectedCount,a=e.filteredCount,i=e.pageSize,l=_e({pageSize:i,imageCount:a}),c=l.valid,s=l.page,f=Se(s),p=f.images,d=f.currentView;if(!c)return n.createElement(o.Fg,{to:"/gallery/page/".concat(s+1),replace:!0});var h,y,g,b=p.map((function(e){return n.createElement(K,{type:"list"===d?"list":"default",key:e.hash,hash:e.hash,page:s})}));return"list"!==d&&b.push(n.createElement("li",{className:"gallery-image gallery-image--dummy",key:"dummy1"}),n.createElement("li",{className:"gallery-image gallery-image--dummy",key:"dummy2"}),n.createElement("li",{className:"gallery-image gallery-image--dummy",key:"dummy3"}),n.createElement("li",{className:"gallery-image gallery-image--dummy",key:"dummy4"}),n.createElement("li",{className:"gallery-image gallery-image--dummy",key:"dummy5"})),n.createElement(n.Fragment,null,n.createElement(we,{imageCount:t,selectedCount:r,filteredCount:a}),n.createElement(ve,{page:s,isSticky:!0}),"list"===d?n.createElement("ul",{className:"gallery gallery--list"},b):n.createElement("ul",{className:m()("gallery",(h={},y="gallery--".concat(d),g=!0,y in h?Object.defineProperty(h,y,{value:g,enumerable:!0,configurable:!0,writable:!0}):h[y]=g,h))},b),p.length<3?null:n.createElement(ve,{page:s,isBottom:!0}))};function xe(e){return function(e){if(Array.isArray(e))return ke(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return ke(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return ke(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ke(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var Oe=(0,u.$j)((function(e){return{printerUrl:e.printerUrl?"".concat(e.printerUrl,"remote.html"):null,printerConnected:e.printerFunctions.length>0}}),(function(e){return{importPlainText:function(t){var r;try{r=new File(xe(t),"Text input.txt",{type:"text/plain"})}catch(e){r=new Blob(xe(t),{type:"text/plain"})}e({type:d.uD,payload:{files:[r]}})},importFile:function(t){e({type:d.uD,payload:t})},exportJson:function(t){e({type:d.sO,payload:t})}}})),je=(r(69600),r(23157),r(60285),r(41637),(0,u.$j)((function(e){return{printerData:e.printerData,printerFunctions:e.printerFunctions,printerConnected:e.printerFunctions.length>0,printerBusy:e.printerBusy}}),(function(e){return{callRemoteFunction:function(t){e({type:d.ug,payload:t})}}}))),Pe=r(56755),Ie=r.n(Pe),Ae={testFile:"Print test image",checkPrinter:"Check Printer",fetchImages:null,clearPrinter:"Clear Printer",tear:"Tear"},Re=function(e){var t=e.printerData,r=e.printerFunctions,a=e.printerConnected,o=e.callRemoteFunction,i=e.printerBusy;return a?n.createElement("div",{className:"printer-report"},n.createElement("div",{className:"inputgroup buttongroup"},r.map((function(e){var a,l;return n.createElement("button",{key:e,type:"button",className:"button",disabled:i||["fetchImages","clearPrinter","tear"].includes(e)&&!(null!==(a=t.dumps)&&void 0!==a&&a.length),onClick:function(){return o(e)}},"fetchImages"===e?function(e,t){return e.includes("tear")?"Fetch images":"Fetch ".concat(t||0," images")}(r,null===(l=t.dumps)||void 0===l?void 0:l.length):Ae[e])}))),null!=t&&t.fs&&null!=t&&t.dumps?n.createElement("table",{className:"printer-report__table"},n.createElement("thead",null,n.createElement("tr",null,n.createElement("th",{className:"printer-report__label printer-report__head"},"Printer Filesystem"),n.createElement("th",{className:"printer-report__value printer-report__head printer-report__value--url"}))),n.createElement("tbody",null,n.createElement("tr",null,n.createElement("td",{className:"printer-report__label"},"Total"),n.createElement("td",{className:"printer-report__value"},Ie()(t.fs.total))),n.createElement("tr",null,n.createElement("td",{className:"printer-report__label"},"Used"),n.createElement("td",{className:"printer-report__value"},Ie()(t.fs.used))),n.createElement("tr",null,n.createElement("td",{className:"printer-report__label"},"Free"),n.createElement("td",{className:"printer-report__value"},"".concat(Math.max(0,t.fs.maximages-t.dumps.length)," images"))),n.createElement("tr",null,n.createElement("td",{className:"printer-report__label"},"Images"),n.createElement("td",{className:"printer-report__value"},t.dumps.length)))):null,null!=t&&t.message?n.createElement("p",{className:"printer-report__message"},null==t?void 0:t.message):null):null};Re.propTypes={printerData:g().object.isRequired,printerBusy:g().bool.isRequired,printerFunctions:g().array.isRequired,printerConnected:g().bool.isRequired,callRemoteFunction:g().func.isRequired};var Ce=je(Re);r(32564);function Fe(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==r)return;var n,a,o=[],i=!0,l=!1;try{for(r=r.call(e);!(i=(n=r.next()).done)&&(o.push(n.value),!t||o.length!==t);i=!0);}catch(e){l=!0,a=e}finally{try{i||null==r.return||r.return()}finally{if(l)throw a}}return o}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return Te(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Te(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Te(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var qe=function(e){var t=(0,u.v9)((function(e){var t=e.printerParams?"#".concat(encodeURI(e.printerParams)):"";return{printerUrl:e.printerUrl?"".concat(e.printerUrl,"remote.html").concat(t):null,printerConnected:e.printerFunctions.length>0}})),r=t.printerUrl,a=t.printerConnected,o=Fe((0,n.useState)(!1),2),i=o[0],l=o[1],c=Fe((0,n.useState)(!1),2),s=c[0],m=c[1],f=(0,n.useRef)(null);return(0,n.useEffect)((function(){return i||s||f.current||(f.current=window.setTimeout((function(){m(!0)}),e)),function(){window.clearTimeout(f.current)}}),[s,i,e]),!i&&a&&(window.clearTimeout(f.current),l(!0)),{failed:s,loaded:i,printerUrl:r,printerConnected:a}},Le=function(){var e=qe(5e3),t=e.printerUrl,r=e.failed,a=e.loaded,o=e.printerConnected;return n.createElement("div",{className:"connect-printer"},n.createElement(Ce,null),function(e){if(e.startsWith("/"))return!0;var t=new URL(e).protocol,r=new URL(window.location.href).protocol;return"http:"===r||r===t}(t)&&!r?n.createElement(n.Fragment,null,n.createElement("iframe",{className:m()("connect-printer__remote-printer-iframe",{"connect-printer__remote-printer-iframe--connected":o}),title:"Transfer window",src:t}),!a&&n.createElement("div",{className:"connect-printer__iframe-loading"})):(!o||r)&&n.createElement("div",{className:"inputgroup buttongroup"},n.createElement("button",{type:"button",className:"button",onClick:function(){window.open(t,"remoteprinter","width=480,height=400")}},"Open printer page")))};r(4723);function De(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Be(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==r)return;var n,a,o=[],i=!0,l=!1;try{for(r=r.call(e);!(i=(n=r.next()).done)&&(o.push(n.value),!t||o.length!==t);i=!0);}catch(e){l=!0,a=e}finally{try{i||null==r.return||r.return()}finally{if(l)throw a}}return o}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return Me(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Me(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Me(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var ze=function(e){return e.match(/^#[0-9a-f]{6}$/i)},Ue=function(e){var t=e.id,r=e.labelText,a=e.buttonIcon,o=e.buttonLabel,i=e.buttonOnClick,l=e.type,c=e.min,u=e.max,s=e.step,f=e.value,p=e.disabled,d=e.onChange,h=e.onBlur,y=e.onKeyUp,g=e.children,b=Be((0,n.useState)(!1),2),v=b[0],E=b[1],w=Be((0,n.useState)(f),2),_=w[0],S=w[1];(0,n.useEffect)((function(){"color"===l&&S(f)}),[S,f,l]);var x=y?function(e){var t=e.key;return y(t)}:null,k=h?function(){"password"===l&&E(!1),h()}:null;return n.createElement("div",{className:"inputgroup inputgroup--".concat(l)},n.createElement("label",{htmlFor:t,className:"inputgroup__label"},r,g),"textarea"===l?n.createElement("textarea",{id:t,className:"inputgroup__input inputgroup__input--textarea",value:f,disabled:p,onChange:function(e){var t=e.target,r=t.value,n=t.files;d(n||r)},onBlur:k,onKeyUp:x}):n.createElement("input",{id:t,className:"inputgroup__input",type:v?"text":l,min:"number"===l?c:null,max:"number"===l?u:null,step:"number"===l?s:null,value:f,disabled:p,onChange:function(e){var t=e.target,r=t.value,n=t.files;d(n||r)},onBlur:k,onKeyUp:x}),"file"===l?n.createElement("label",{htmlFor:t,className:"button button--label"},"Select"):null,i&&(a||o)?n.createElement("button",{type:"button",className:m()(De({button:o},"inputgroup__button inputgroup__button--".concat(a),a)),onClick:i},a?n.createElement(N,{name:a}):o):null,"color"===l?n.createElement("input",{type:"text",autoCapitalize:"off",autoComplete:"off",autoCorrect:"off",className:m()("inputgroup__input inputgroup__input--colortext",{"inputgroup__input--invalid-color":!ze(_)}),value:_,disabled:p,onChange:function(e){var t=e.target.value;S(t),ze(t)&&d(t)},onBlur:k}):null,"password"===l?n.createElement("button",{type:"button",className:"inputgroup__button inputgroup__button--show-password",onClick:function(){return E(!v)}},n.createElement(N,{name:"view"})):null)};Ue.propTypes={id:g().string.isRequired,labelText:g().string.isRequired,type:g().oneOf(["text","number","color","file","password"]),min:g().number,max:g().number,step:g().number,value:g().oneOfType([g().string,g().number]),onChange:g().func.isRequired,onBlur:g().func,buttonOnClick:g().func,buttonIcon:g().string,buttonLabel:g().string,onKeyUp:g().func,disabled:g().bool,children:g().node},Ue.defaultProps={type:"text",min:null,max:null,step:null,value:"",onBlur:null,disabled:!1,buttonOnClick:null,buttonIcon:null,buttonLabel:null,onKeyUp:null,children:null};var Ge=Ue;function Ve(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==r)return;var n,a,o=[],i=!0,l=!1;try{for(r=r.call(e);!(i=(n=r.next()).done)&&(o.push(n.value),!t||o.length!==t);i=!0);}catch(e){l=!0,a=e}finally{try{i||null==r.return||r.return()}finally{if(l)throw a}}return o}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return $e(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return $e(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function $e(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var He=function(e){var t=e.importPlainText,a=e.importFile,o=e.printerUrl,i=e.exportJson,l=Ve((0,n.useState)(""),2),c=l[0],u=l[1];return(0,n.useEffect)((function(){r.e(158).then(r.bind(r,57485)).then((function(e){var t=e.default;u(t.join("\n"))}))}),[]),n.createElement("div",{className:"import"},o&&n.createElement(Le,null),n.createElement(Ge,{id:"import-file",labelText:"Select file for import",type:"file",onChange:function(e){e&&1===e.length&&a({files:e})}}),n.createElement("div",{className:"inputgroup inputgroup--column"},n.createElement("label",{htmlFor:"import-plaintext",className:"inputgroup__label"},"Paste your plaintext"),n.createElement("textarea",{id:"import-plaintext",className:"import__data",value:c,onChange:function(e){var t=e.target;u(t.value)}}),n.createElement("button",{className:"button button--label",type:"button",onClick:function(){t(c)}},"Import")),n.createElement("div",{className:"inputgroup buttongroup"},n.createElement("button",{type:"button",className:"button",onClick:function(){return i("images")}},"Export images"),n.createElement("button",{type:"button",className:"button",onClick:function(){return i("selected_images")}},"Export selected images"),n.createElement("button",{type:"button",className:"button",onClick:function(){return i("palettes")}},"Export palettes")))};He.propTypes={printerUrl:g().string,importPlainText:g().func.isRequired,importFile:g().func.isRequired,exportJson:g().func.isRequired},He.defaultProps={printerUrl:null};var Ze=Oe(He),We=(0,u.$j)((function(e){return{palettes:e.palettes}}),(function(e){return{newPalette:function(){e({type:d.Tc,payload:p.VP})}}})),Ke=(r(47941),(0,u.$j)((function(e,t){var r=t.shortName;return{isActive:e.activePalette===r}}),(function(e,t){var r=t.shortName,n=t.name;return{setActive:function(){e({type:d.K0,payload:r})},deletePalette:function(){e({type:d.jH,payload:{message:'Delete palette "'.concat(n||"no name",'"?'),confirm:function(){e({type:d.Or,payload:{shortName:r}})},deny:function(){e({type:d.Gp})}}})},editPalette:function(){e({type:d.Tc,payload:r})},clonePalette:function(){e({type:d.y3,payload:r})}}}))),Je="36",Ye=function(e){var t;return 4!==(null===(t=e.palette)||void 0===t?void 0:t.length)?n.createElement("li",{className:"palette palette--broken"}):n.createElement("li",{className:m()("palette",{"palette--active":e.isActive}),style:{backgroundImage:"linear-gradient(to right, ".concat(e.palette[0]).concat(Je," 0%, ").concat(e.palette[1]).concat(Je," 33.3%, ").concat(e.palette[2]).concat(Je," 66.6%, ").concat(e.palette[3]).concat(Je," 100%)")}},n.createElement("button",{onClick:function(){e.setActive()},className:"palette__button",type:"button"},n.createElement("div",{className:"palette__name"},e.name,n.createElement("span",{className:"palette__shortname"},e.shortName)),n.createElement("div",{className:"palette__colors"},n.createElement("div",{className:"palette__color",style:{backgroundColor:e.palette[0]},title:e.palette[0]}," "),n.createElement("div",{className:"palette__color",style:{backgroundColor:e.palette[1]},title:e.palette[1]}," "),n.createElement("div",{className:"palette__color",style:{backgroundColor:e.palette[2]},title:e.palette[2]}," "),n.createElement("div",{className:"palette__color",style:{backgroundColor:e.palette[3]},title:e.palette[3]}," "))),n.createElement("div",{className:"palette__manage-buttons"},n.createElement("button",{type:"button",title:"Clone palette",className:"palette__manage-button palette__manage-button--clone",onClick:function(){return e.clonePalette()}},n.createElement(N,{name:"clone"})),e.isPredefined?null:n.createElement(n.Fragment,null,n.createElement("button",{type:"button",title:"Edit palette",className:"palette__manage-button palette__manage-button--edit",onClick:function(){return e.editPalette()}},n.createElement(N,{name:"edit"})),n.createElement("button",{type:"button",title:"Delete palette",className:"palette__manage-button palette__manage-button--delete",onClick:function(){return e.deletePalette()}},n.createElement(N,{name:"delete"})))))};Ye.propTypes={shortName:g().string.isRequired,name:g().string.isRequired,isActive:g().bool.isRequired,isPredefined:g().bool.isRequired,setActive:g().func.isRequired,deletePalette:g().func.isRequired,editPalette:g().func.isRequired,clonePalette:g().func.isRequired,palette:g().arrayOf(g().string).isRequired},Ye.defaultProps={};var Qe=Ke(Ye),Xe=(r(83112),r(83710),r(39714),r(34553),r(72443),r(39341),r(73706),r(10408),r(78011),r(30489),r(89554),r(54747),r(68304),r(28485)),et=r(30236),tt=r.n(et),rt=r(16243),nt=r.n(rt),at=r(18321),ot=r(25108);function it(e){return it="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},it(e)}function lt(){lt=function(){return e};var e={},t=Object.prototype,r=t.hasOwnProperty,n="function"==typeof Symbol?Symbol:{},a=n.iterator||"@@iterator",o=n.asyncIterator||"@@asyncIterator",i=n.toStringTag||"@@toStringTag";function l(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{l({},"")}catch(e){l=function(e,t,r){return e[t]=r}}function c(e,t,r,n){var a=t&&t.prototype instanceof m?t:m,o=Object.create(a.prototype),i=new S(n||[]);return o._invoke=function(e,t,r){var n="suspendedStart";return function(a,o){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===a)throw o;return x()}for(r.method=a,r.arg=o;;){var i=r.delegate;if(i){var l=E(i,r);if(l){if(l===s)continue;return l}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var c=u(e,t,r);if("normal"===c.type){if(n=r.done?"completed":"suspendedYield",c.arg===s)continue;return{value:c.arg,done:r.done}}"throw"===c.type&&(n="completed",r.method="throw",r.arg=c.arg)}}}(e,r,i),o}function u(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}e.wrap=c;var s={};function m(){}function f(){}function p(){}var d={};l(d,a,(function(){return this}));var h=Object.getPrototypeOf,y=h&&h(h(N([])));y&&y!==t&&r.call(y,a)&&(d=y);var g=p.prototype=m.prototype=Object.create(d);function b(e){["next","throw","return"].forEach((function(t){l(e,t,(function(e){return this._invoke(t,e)}))}))}function v(e,t){function n(a,o,i,l){var c=u(e[a],e,o);if("throw"!==c.type){var s=c.arg,m=s.value;return m&&"object"==it(m)&&r.call(m,"__await")?t.resolve(m.__await).then((function(e){n("next",e,i,l)}),(function(e){n("throw",e,i,l)})):t.resolve(m).then((function(e){s.value=e,i(s)}),(function(e){return n("throw",e,i,l)}))}l(c.arg)}var a;this._invoke=function(e,r){function o(){return new t((function(t,a){n(e,r,t,a)}))}return a=a?a.then(o,o):o()}}function E(e,t){var r=e.iterator[t.method];if(void 0===r){if(t.delegate=null,"throw"===t.method){if(e.iterator.return&&(t.method="return",t.arg=void 0,E(e,t),"throw"===t.method))return s;t.method="throw",t.arg=new TypeError("The iterator does not provide a 'throw' method")}return s}var n=u(r,e.iterator,t.arg);if("throw"===n.type)return t.method="throw",t.arg=n.arg,t.delegate=null,s;var a=n.arg;return a?a.done?(t[e.resultName]=a.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,s):a:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,s)}function w(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function _(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function S(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(w,this),this.reset(!0)}function N(e){if(e){var t=e[a];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var n=-1,o=function t(){for(;++n<e.length;)if(r.call(e,n))return t.value=e[n],t.done=!1,t;return t.value=void 0,t.done=!0,t};return o.next=o}}return{next:x}}function x(){return{value:void 0,done:!0}}return f.prototype=p,l(g,"constructor",p),l(p,"constructor",f),f.displayName=l(p,i,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===f||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,p):(e.__proto__=p,l(e,i,"GeneratorFunction")),e.prototype=Object.create(g),e},e.awrap=function(e){return{__await:e}},b(v.prototype),l(v.prototype,o,(function(){return this})),e.AsyncIterator=v,e.async=function(t,r,n,a,o){void 0===o&&(o=Promise);var i=new v(c(t,r,n,a),o);return e.isGeneratorFunction(r)?i:i.next().then((function(e){return e.done?e.value:i.next()}))},b(g),l(g,i,"Generator"),l(g,a,(function(){return this})),l(g,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=[];for(var r in e)t.push(r);return t.reverse(),function r(){for(;t.length;){var n=t.pop();if(n in e)return r.value=n,r.done=!1,r}return r.done=!0,r}},e.values=N,S.prototype={constructor:S,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(_),!e)for(var t in this)"t"===t.charAt(0)&&r.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function n(r,n){return i.type="throw",i.arg=e,t.next=r,n&&(t.method="next",t.arg=void 0),!!n}for(var a=this.tryEntries.length-1;a>=0;--a){var o=this.tryEntries[a],i=o.completion;if("root"===o.tryLoc)return n("end");if(o.tryLoc<=this.prev){var l=r.call(o,"catchLoc"),c=r.call(o,"finallyLoc");if(l&&c){if(this.prev<o.catchLoc)return n(o.catchLoc,!0);if(this.prev<o.finallyLoc)return n(o.finallyLoc)}else if(l){if(this.prev<o.catchLoc)return n(o.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<o.finallyLoc)return n(o.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var a=this.tryEntries[n];if(a.tryLoc<=this.prev&&r.call(a,"finallyLoc")&&this.prev<a.finallyLoc){var o=a;break}}o&&("break"===e||"continue"===e)&&o.tryLoc<=t&&t<=o.finallyLoc&&(o=null);var i=o?o.completion:{};return i.type=e,i.arg=t,o?(this.method="next",this.next=o.finallyLoc,s):this.complete(i)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),s},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),_(r),s}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var a=n.arg;_(r)}return a}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,r){return this.delegate={iterator:N(e),resultName:t,nextLoc:r},"next"===this.method&&(this.arg=void 0),s}},e}function ct(e){return function(e){if(Array.isArray(e))return ft(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||mt(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ut(e,t,r,n,a,o,i){try{var l=e[o](i),c=l.value}catch(e){return void r(e)}l.done?t(c):Promise.resolve(c).then(n,a)}function st(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==r)return;var n,a,o=[],i=!0,l=!1;try{for(r=r.call(e);!(i=(n=r.next()).done)&&(o.push(n.value),!t||o.length!==t);i=!0);}catch(e){l=!0,a=e}finally{try{i||null==r.return||r.return()}finally{if(l)throw a}}return o}(e,t)||mt(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function mt(e,t){if(e){if("string"==typeof e)return ft(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?ft(e,t):void 0}}function ft(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var pt=function(e,t){var r=.299*e[0]+.587*e[1]+.114*e[2],n=.299*t[0]+.587*t[1]+.114*t[2];return r>n?-1:r<n?1:0},dt=function(){var e=(0,u.I0)(),t=function(){var t,r=(t=lt().mark((function t(r){var n,a,o,i,l,c,u;return lt().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(a=r.target,null===(n=a.files)||void 0===n||!n[0]){t.next=10;break}return t.next=4,(0,at.Z)(a.files[0],!0);case 4:o=t.sent,i=o.imageData,l=o.fileName,c=tt()(i.data,4),u=c.map((function(e){var t=st(e,3);return[t[0],t[1],t[2]]})),Xe.clusterize(u,{k:6},(function(t,r){if(t)ot.error(t);else{var n=nt()(u,4),a=[].concat(ct(n.palette()),ct(r.map((function(e){var t=st(e.centroid,3),r=t[0],n=t[1],a=t[2];return[Math.round(r),Math.round(n),Math.round(a)]})))).filter((function(e,t,r){return r.findIndex((function(t){return t.join(",")===e.join(",")}))===t})).sort(pt);e({type:d.pK,payload:{colors:a,fileName:l}})}}));case 10:a.value="";case 11:case"end":return t.stop()}}),t)})),function(){var e=this,r=arguments;return new Promise((function(n,a){var o=t.apply(e,r);function i(e){ut(o,n,a,i,l,"next",e)}function l(e){ut(o,n,a,i,l,"throw",e)}i(void 0)}))});return function(e){return r.apply(this,arguments)}}();return{onInputChange:t}};function ht(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==r)return;var n,a,o=[],i=!0,l=!1;try{for(r=r.call(e);!(i=(n=r.next()).done)&&(o.push(n.value),!t||o.length!==t);i=!0);}catch(e){l=!0,a=e}finally{try{i||null==r.return||r.return()}finally{if(l)throw a}}return o}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return yt(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return yt(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function yt(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var gt={all:{headline:"All palettes",filter:Boolean},own:{headline:"Own palettes",filter:function(e){return!e.isPredefined}},predefined:{headline:"Predefined palettes",filter:function(e){return e.isPredefined}}},bt=function(e){var t=dt().onInputChange,r=ht((0,n.useState)(Object.keys(gt)[0]),2),a=r[0],o=r[1],i=gt[a],l=i.filter,c=i.headline;return n.createElement(n.Fragment,null,n.createElement("ul",{className:"contenttabs__tabs"},Object.keys(gt).map((function(e){var t=gt[e].headline;return n.createElement("li",{className:"contenttabs__tab",key:e},n.createElement("button",{type:"button",className:m()("button contenttabs__tabs-button",{"button contenttabs__tabs-button--active":e===a}),onClick:function(){return o(e)}},t))}))),n.createElement("h2",{className:"palettes__headline"},c,"own"===a?n.createElement(n.Fragment,null,n.createElement("button",{type:"button",title:"New palette",className:"button palettes__add-button",onClick:function(){e.newPalette()}},n.createElement(N,{name:"add"})),n.createElement("label",{title:"New palette from file",className:"button palettes__add-button"},n.createElement(N,{name:"file-add"}),n.createElement("input",{type:"file",hidden:!0,onChange:t}))):null),n.createElement("ul",{className:"palettes"},e.palettes.filter(l).map((function(e){return n.createElement(Qe,{key:e.shortName,name:e.name,isPredefined:e.isPredefined||!1,shortName:e.shortName,palette:e.palette})}))))};bt.propTypes={palettes:g().array.isRequired,newPalette:g().func.isRequired},bt.defaultProps={};var vt=We(bt),Et=(r(24812),r(24603),r(4129),r(85827),r(83510),r(15306),r(38880),r(49337),r(33321),r(88791));function wt(e){return wt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},wt(e)}function _t(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function St(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?_t(Object(r),!0).forEach((function(t){Nt(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):_t(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function Nt(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function xt(){xt=function(e,t){return new r(e,void 0,t)};var e=RegExp.prototype,t=new WeakMap;function r(e,n,a){var o=new RegExp(e,n);return t.set(o,a||t.get(e)),kt(o,r.prototype)}function n(e,r){var n=t.get(r);return Object.keys(n).reduce((function(t,r){var a=n[r];if("number"==typeof a)t[r]=e[a];else{for(var o=0;void 0===e[a[o]]&&o+1<a.length;)o++;t[r]=e[a[o]]}return t}),Object.create(null))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&kt(e,t)}(r,RegExp),r.prototype.exec=function(t){var r=e.exec.call(this,t);return r&&(r.groups=n(r,this)),r},r.prototype[Symbol.replace]=function(r,a){if("string"==typeof a){var o=t.get(this);return e[Symbol.replace].call(this,r,a.replace(/\$<([^>]+)>/g,(function(e,t){return"$"+o[t]})))}if("function"==typeof a){var i=this;return e[Symbol.replace].call(this,r,(function(){var e=arguments;return"object"!=wt(e[e.length-1])&&(e=[].slice.call(e)).push(n(e,i)),a.apply(this,e)}))}return e[Symbol.replace].call(this,r,a)},xt.apply(this,arguments)}function kt(e,t){return kt=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},kt(e,t)}function Ot(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==r)return;var n,a,o=[],i=!0,l=!1;try{for(r=r.call(e);!(i=(n=r.next()).done)&&(o.push(n.value),!t||o.length!==t);i=!0);}catch(e){l=!0,a=e}finally{try{i||null==r.return||r.return()}finally{if(l)throw a}}return o}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return jt(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return jt(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function jt(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var Pt=function(){var e,t,r,a,o=(0,u.I0)(),i=(0,u.v9)((function(e){return e.savFrameTypes})),l=(0,u.v9)((function(e){return e.frames})),c=(0,u.v9)((function(e){return e.frameGroupNames})),s=(0,u.v9)((function(e){return e.palettes.find((function(t){return t.shortName===e.activePalette}))})),m=(0,Et.Z)(l,c),f=Ot((0,n.useState)([]),2),p=f[0],h=f[1],y=Ot((0,n.useState)((t=i,(a=(e=m).find((function(e){return e.id===t})))?a.id:(null===(r=e[0])||void 0===r?void 0:r.id)||"")),2),g=y[0],b=y[1];(0,n.useEffect)((function(){h(g?l.filter((function(e){var t=e.id;try{var r=xt(/^([a-z]+)([0-9]+)/g,{group:1,id:2}).exec(t).groups.group;return g===r}catch(e){return!1}})):[])}),[l,g]);var v=m.find((function(e){return e.id===g}));return{selectedFrameGroup:g,groupFrames:p,setSelectedFrameGroup:b,frameGroups:m,exportJson:function(e){o({type:d.sO,payload:e,selectedFrameGroup:g})},palette:s.palette,setActiveFrameGroupName:function(e){o({type:d.uy,payload:St(St({},v),{},{name:e})})},activeFrameGroup:v}},It=function(e){var t=e.deleteFrame,r=e.editFrame;return n.createElement("div",{className:"frame-buttons",onClick:function(e){e.stopPropagation()},role:"presentation"},n.createElement("button",{type:"button",className:"frame-buttons__button",onClick:t},n.createElement(N,{name:"delete"})),n.createElement("button",{type:"button",className:"frame-buttons__button",onClick:r},n.createElement(N,{name:"edit"})))};It.propTypes={deleteFrame:g().func.isRequired,editFrame:g().func.isRequired};var At=It,Rt=r(2738),Ct=r(41027);function Ft(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==r)return;var n,a,o=[],i=!0,l=!1;try{for(r=r.call(e);!(i=(n=r.next()).done)&&(o.push(n.value),!t||o.length!==t);i=!0);}catch(e){l=!0,a=e}finally{try{i||null==r.return||r.return()}finally{if(l)throw a}}return o}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return Tt(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Tt(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Tt(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var qt=function(e){var t,r=e.frameId,a=e.name,o=(0,u.I0)(),i=Ft((0,n.useState)(null),2),l=i[0],c=i[1],s=null===(t=(0,u.v9)((function(e){return e.frames.find((function(e){return e.id===r}))})))||void 0===t?void 0:t.hash,m=(0,n.useRef)(!1);(0,n.useEffect)((function(){return m.current=!0,function(){m.current=!1}}),[]),(0,n.useEffect)((function(){(function(e){var t=e.frameId,r=e.frameHash,n=e.name,a="\n  frameId: ".concat(t,"\n\n  ").concat(n,"\n\n").concat(r);return(0,Rt.Z)((0,Ct.Z)(a),r)})({frameId:r,frameHash:s,name:a}).then((function(e){m.current&&c(e)}))}),[r,s,a]);return{tiles:l,setTiles:c,frameHash:s,deleteFrame:function(){m.current=!1,o({type:d.jH,payload:{message:'Delete frame "'.concat(a,'" (').concat(r,")?"),confirm:function(){o({type:d.BS,payload:r})},deny:function(){o({type:d.Gp})}}})},editFrame:function(){o({type:d.kr,payload:r})}}},Lt=function(e){var t=e.frameId,r=e.name,a=e.palette,o=qt({frameId:t,name:r}),i=o.tiles,l=o.deleteFrame,c=o.editFrame,s=o.frameHash,m=(0,u.v9)((function(e){return e.enableDebug}));return i?n.createElement("li",{className:"frame",onClick:c,role:"presentation"},n.createElement("div",{className:"frame__image"},n.createElement(G,{lockFrame:!1,invertPalette:!1,palette:a,tiles:i})),n.createElement("code",{className:"frame__id"},t),n.createElement("span",{className:"frame__name"},r),m?n.createElement("span",{className:"frame__hash-debug"},s):null,n.createElement(At,{deleteFrame:l,editFrame:c})):null};Lt.propTypes={frameId:g().string.isRequired,name:g().string.isRequired,palette:g().array.isRequired};var Dt=Lt,Bt=function(){var e=Pt(),t=e.frameGroups,r=e.selectedFrameGroup,a=e.setSelectedFrameGroup,o=e.palette,i=e.groupFrames,l=e.exportJson,c=e.setActiveFrameGroupName,u=e.activeFrameGroup;return n.createElement("div",{className:"frames"},n.createElement("div",{className:"inputgroup"},n.createElement("label",{htmlFor:"framegroups",className:"inputgroup__label"},"Edit Framegroup"),n.createElement("select",{id:"framegroups",className:"inputgroup__input inputgroup__input--select",value:r,onChange:function(e){a(e.target.value)}},n.createElement("option",{value:""},"Select frame group"),t.map((function(e){var t=e.id,r=e.name;return n.createElement("option",{value:t,key:t},r)})))),u?n.createElement(Ge,{id:"frames-edit-group-name",onChange:function(e){c(e)},value:u.name||"",labelText:"Rename Framegroup"}):null,n.createElement("ul",{className:"frames__list"},null==i?void 0:i.map((function(e){return n.createElement(Dt,{frameId:e.id,key:"frame-".concat(e.id),name:e.name,palette:o})})),n.createElement("li",{className:"frame frame--dummy",key:"dummy1"}),n.createElement("li",{className:"frame frame--dummy",key:"dummy2"}),n.createElement("li",{className:"frame frame--dummy",key:"dummy3"}),n.createElement("li",{className:"frame frame--dummy",key:"dummy4"}),n.createElement("li",{className:"frame frame--dummy",key:"dummy5"})),n.createElement("div",{className:"inputgroup buttongroup"},n.createElement("button",{type:"button",className:"button",onClick:function(){return l("frames")}},"Export frames"),n.createElement("button",{type:"button",className:"button",onClick:function(){return l("framegroup")}},"Export current framegroup (".concat(r,")"))))};Bt.propTypes={},Bt.defaultProps={};var Mt=Bt,zt=(0,u.$j)((function(e){return{printerUrl:e.printerUrl}}),(function(e){return{updatePrinterUrl:function(t){e({type:d.YE,payload:t})}}})),Ut=(0,u.$j)((function(){return{}}),(function(e){return{exportJson:function(t){e({type:d.sO,payload:t})}}}));function Gt(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==r)return;var n,a,o=[],i=!0,l=!1;try{for(r=r.call(e);!(i=(n=r.next()).done)&&(o.push(n.value),!t||o.length!==t);i=!0);}catch(e){l=!0,a=e}finally{try{i||null==r.return||r.return()}finally{if(l)throw a}}return o}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return Vt(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Vt(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Vt(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var $t=function(){var e=Gt((0,n.useState)(!1),2),t=e[0],r=e[1],a=!!(navigator.storage&&navigator.storage.persisted&&navigator.storage.persist);a&&navigator.storage.persisted().then(r);return{persistAPIAvailable:a,persisted:t,requestPersist:function(){r(!1),a&&navigator.storage.persist().then(r)}}},Ht=r(30661),Zt=r(25108);function Wt(e){return Wt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Wt(e)}function Kt(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Jt(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Kt(Object(r),!0).forEach((function(t){Yt(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Kt(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function Yt(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Qt(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==r)return;var n,a,o=[],i=!0,l=!1;try{for(r=r.call(e);!(i=(n=r.next()).done)&&(o.push(n.value),!t||o.length!==t);i=!0);}catch(e){l=!0,a=e}finally{try{i||null==r.return||r.return()}finally{if(l)throw a}}return o}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return Xt(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Xt(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Xt(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function er(){er=function(){return e};var e={},t=Object.prototype,r=t.hasOwnProperty,n="function"==typeof Symbol?Symbol:{},a=n.iterator||"@@iterator",o=n.asyncIterator||"@@asyncIterator",i=n.toStringTag||"@@toStringTag";function l(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{l({},"")}catch(e){l=function(e,t,r){return e[t]=r}}function c(e,t,r,n){var a=t&&t.prototype instanceof m?t:m,o=Object.create(a.prototype),i=new S(n||[]);return o._invoke=function(e,t,r){var n="suspendedStart";return function(a,o){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===a)throw o;return x()}for(r.method=a,r.arg=o;;){var i=r.delegate;if(i){var l=E(i,r);if(l){if(l===s)continue;return l}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var c=u(e,t,r);if("normal"===c.type){if(n=r.done?"completed":"suspendedYield",c.arg===s)continue;return{value:c.arg,done:r.done}}"throw"===c.type&&(n="completed",r.method="throw",r.arg=c.arg)}}}(e,r,i),o}function u(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}e.wrap=c;var s={};function m(){}function f(){}function p(){}var d={};l(d,a,(function(){return this}));var h=Object.getPrototypeOf,y=h&&h(h(N([])));y&&y!==t&&r.call(y,a)&&(d=y);var g=p.prototype=m.prototype=Object.create(d);function b(e){["next","throw","return"].forEach((function(t){l(e,t,(function(e){return this._invoke(t,e)}))}))}function v(e,t){function n(a,o,i,l){var c=u(e[a],e,o);if("throw"!==c.type){var s=c.arg,m=s.value;return m&&"object"==Wt(m)&&r.call(m,"__await")?t.resolve(m.__await).then((function(e){n("next",e,i,l)}),(function(e){n("throw",e,i,l)})):t.resolve(m).then((function(e){s.value=e,i(s)}),(function(e){return n("throw",e,i,l)}))}l(c.arg)}var a;this._invoke=function(e,r){function o(){return new t((function(t,a){n(e,r,t,a)}))}return a=a?a.then(o,o):o()}}function E(e,t){var r=e.iterator[t.method];if(void 0===r){if(t.delegate=null,"throw"===t.method){if(e.iterator.return&&(t.method="return",t.arg=void 0,E(e,t),"throw"===t.method))return s;t.method="throw",t.arg=new TypeError("The iterator does not provide a 'throw' method")}return s}var n=u(r,e.iterator,t.arg);if("throw"===n.type)return t.method="throw",t.arg=n.arg,t.delegate=null,s;var a=n.arg;return a?a.done?(t[e.resultName]=a.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,s):a:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,s)}function w(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function _(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function S(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(w,this),this.reset(!0)}function N(e){if(e){var t=e[a];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var n=-1,o=function t(){for(;++n<e.length;)if(r.call(e,n))return t.value=e[n],t.done=!1,t;return t.value=void 0,t.done=!0,t};return o.next=o}}return{next:x}}function x(){return{value:void 0,done:!0}}return f.prototype=p,l(g,"constructor",p),l(p,"constructor",f),f.displayName=l(p,i,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===f||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,p):(e.__proto__=p,l(e,i,"GeneratorFunction")),e.prototype=Object.create(g),e},e.awrap=function(e){return{__await:e}},b(v.prototype),l(v.prototype,o,(function(){return this})),e.AsyncIterator=v,e.async=function(t,r,n,a,o){void 0===o&&(o=Promise);var i=new v(c(t,r,n,a),o);return e.isGeneratorFunction(r)?i:i.next().then((function(e){return e.done?e.value:i.next()}))},b(g),l(g,i,"Generator"),l(g,a,(function(){return this})),l(g,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=[];for(var r in e)t.push(r);return t.reverse(),function r(){for(;t.length;){var n=t.pop();if(n in e)return r.value=n,r.done=!1,r}return r.done=!0,r}},e.values=N,S.prototype={constructor:S,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(_),!e)for(var t in this)"t"===t.charAt(0)&&r.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function n(r,n){return i.type="throw",i.arg=e,t.next=r,n&&(t.method="next",t.arg=void 0),!!n}for(var a=this.tryEntries.length-1;a>=0;--a){var o=this.tryEntries[a],i=o.completion;if("root"===o.tryLoc)return n("end");if(o.tryLoc<=this.prev){var l=r.call(o,"catchLoc"),c=r.call(o,"finallyLoc");if(l&&c){if(this.prev<o.catchLoc)return n(o.catchLoc,!0);if(this.prev<o.finallyLoc)return n(o.finallyLoc)}else if(l){if(this.prev<o.catchLoc)return n(o.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<o.finallyLoc)return n(o.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var a=this.tryEntries[n];if(a.tryLoc<=this.prev&&r.call(a,"finallyLoc")&&this.prev<a.finallyLoc){var o=a;break}}o&&("break"===e||"continue"===e)&&o.tryLoc<=t&&t<=o.finallyLoc&&(o=null);var i=o?o.completion:{};return i.type=e,i.arg=t,o?(this.method="next",this.next=o.finallyLoc,s):this.complete(i)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),s},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),_(r),s}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var a=n.arg;_(r)}return a}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,r){return this.delegate={iterator:N(e),resultName:t,nextLoc:r},"next"===this.method&&(this.arg=void 0),s}},e}function tr(e,t,r,n,a,o,i){try{var l=e[o](i),c=l.value}catch(e){return void r(e)}l.done?t(c):Promise.resolve(c).then(n,a)}function rr(e){return function(){var t=this,r=arguments;return new Promise((function(n,a){var o=e.apply(t,r);function i(e){tr(o,n,a,i,l,"next",e)}function l(e){tr(o,n,a,i,l,"throw",e)}i(void 0)}))}}var nr=function(){var e=rr(er().mark((function e(t,r){var n,a;return er().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,q.Z)(t)({hash:r},!1,!0);case 2:return n=e.sent,e.next=5,(0,Ht.aj)(n);case 5:if(a=e.sent,a.dataHash===r){e.next=9;break}return e.abrupt("return",(0,Ht.a1)(n));case 9:return e.abrupt("return",null);case 10:case"end":return e.stop()}}),e)})));return function(t,r){return e.apply(this,arguments)}}(),ar=function(){var e,t=(0,u.oR)(),a=(0,u.I0)(),o=Qt((0,n.useState)(!0),2),i=o[0],l=o[1];return window.enableHashCleanup=function(){return l(!1)},{cleanupBusy:i,hashCleanup:(e=rr(er().mark((function e(){var n,o,i,c,u;return er().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return l(!0),n=0,o=0,i=t.getState(),e.next=6,r.e(705).then(r.t.bind(r,40705,23));case 6:return c=e.sent,u=c.default,e.next=10,Promise.all(t.getState().images.map(function(){var e=rr(er().mark((function e(t){var r,l,c,s,m,f;return er().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=t.hash,!(l=t.hashes)){e.next=10;break}return e.next=4,Promise.all(Object.keys(l).map(function(){var e=rr(er().mark((function e(t){var r,n;return er().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=l[t],n=null,!r){e.next=6;break}return e.next=5,nr(i,r);case 5:n=e.sent;case 6:return e.abrupt("return",Yt({},t,n||r));case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()));case 4:c=e.sent,s=c.reduce((function(e,t){return Jt(Jt({},e),t)}),{}),(m=u(s))!==r&&(n+=1,a({type:d.sV,payload:{oldHash:r,image:Jt(Jt({},t),{},{hash:m,hashes:s})}})),e.next=14;break;case 10:return e.next=12,nr(i,r);case 12:(f=e.sent)&&(o+=1,a({type:d.sV,payload:{oldHash:r,image:Jt(Jt({},t),{},{hash:f})}}));case 14:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()));case 10:l(!1),Zt.info({iCounterRGBN:n,iCounterMono:o});case 12:case"end":return e.stop()}}),e)}))),function(){return e.apply(this,arguments)})}},or=function(e){var t=ar(),r=t.hashCleanup,a=t.cleanupBusy,o=$t(),i=o.persistAPIAvailable,l=o.persisted,c=o.requestPersist;return n.createElement("div",{className:"inputgroup buttongroup settings__export"},i?n.createElement("button",{type:"button",className:"button",disabled:l,onClick:c},l?"Storage is persistent":"Request storage persistence"):null,n.createElement("button",{type:"button",className:"button",onClick:function(){return e.exportJson("debug")}},"Export debug settings"),n.createElement("button",{type:"button",className:"button",onClick:function(){return e.exportJson("settings")}},"Export settings"),n.createElement("button",{disabled:a,type:"button",className:"button button--tiny",onClick:r},"Hash Cleanup"))};or.propTypes={exportJson:g().func.isRequired},or.defaultProps={};var ir=Ut(or),lr=r(97377),cr=(0,lr.d)(),ur=[{path:"/settings/generic",headline:"Generic Settings"},{path:"/settings/git",headline:"Git Settings"},{path:"/settings/plugins",headline:"Plugin Settings"}];ur.push({path:"/settings/dropbox",headline:"Dropbox Settings"}),"esp8266"!==(0,lr.d)().env&&"webpack-dev"!==(0,lr.d)().env||ur.push({path:"/settings/wifi",headline:"WiFi Settings"});var sr=zt((function(){var e,t=null===(e=(0,o.SN)()[2])||void 0===e?void 0:e.pathname,r=ur.find((function(e){return e.path===t}));return r?n.createElement("div",{className:"settings"},n.createElement("ul",{className:"contenttabs__tabs"},ur.map((function(e){var t=e.headline,r=e.path;return n.createElement("li",{className:"contenttabs__tab",key:r},n.createElement(a.OL,{to:r,className:function(e){var t=e.isActive;return"button contenttabs__tabs-button ".concat(t?"contenttabs__tabs-button--active":"")}},t))}))),n.createElement("h2",{className:"settings__headline"},r.headline),n.createElement(o.j3,null),n.createElement(ir,null),n.createElement("ul",{className:"settings__version"},n.createElement("li",null,"Web-App version: ".concat("1.35.0")),n.createElement("li",null,"Web-App branch: ".concat("master")),n.createElement("li",null,"Printer version: ".concat(cr.version)),n.createElement("li",null,"Max Images: ".concat(cr.maximages)),n.createElement("li",null,"Localforage driver: ".concat(cr.localforage)),n.createElement("li",null,"Environment type: ".concat(cr.env)),n.createElement("li",null,"Compiled Filesystem: ".concat(cr.fstype)),n.createElement("li",null,"Compiled Bootmode: ".concat(cr.bootmode)),n.createElement("li",null,"Compiled for OLED: ".concat(cr.oled?"yes":"no")))):n.createElement(o.Fg,{to:ur[0].path,replace:!0})})),mr=(r(12419),r(17187)),fr=r.n(mr);function pr(e){return pr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},pr(e)}function dr(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function hr(e,t){return hr=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},hr(e,t)}function yr(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=gr(e);if(t){var a=gr(this).constructor;r=Reflect.construct(n,arguments,a)}else r=n.apply(this,arguments);return function(e,t){if(t&&("object"===pr(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,r)}}function gr(e){return gr=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},gr(e)}var br=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&hr(e,t)}(o,e);var t,r,n,a=yr(o);function o(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,o),(t=a.call(this)).device=e,t.manufacturerName=e.manufacturerName,t.productName=e.productName,t.serialNumber=e.serialNumber,t.interfaceNumber=2,t.endpointIn=5,t.endpointOut=4,t.textDecoder=new TextDecoder,t}return t=o,(r=[{key:"connect",value:function(){var e=this,t=function t(){e.device.transferIn(e.endpointIn,64).then((function(r){e.emit("data",e.textDecoder.decode(r.data)),t()})).catch((function(t){e.emit("error",t)}))};return this.device.open().then((function(){var t,r;return null===(t=e.device)||void 0===t||null===(r=t.selectConfiguration)||void 0===r?void 0:r.call(t,1)})).then((function(){e.device.configuration.interfaces.forEach((function(t){t.alternates.forEach((function(r){255===r.interfaceClass&&(e.interfaceNumber=t.interfaceNumber,r.endpoints.forEach((function(t){"out"===t.direction&&(e.endpointOut=t.endpointNumber),"in"===t.direction&&(e.endpointIn=t.endpointNumber)})))}))}))})).then((function(){return e.device.claimInterface(e.interfaceNumber)})).then((function(){return e.device.selectAlternateInterface(e.interfaceNumber,0)})).then((function(){return e.device.controlTransferOut({requestType:"class",recipient:"interface",request:34,value:1,index:e.interfaceNumber})})).then((function(){t()}))}},{key:"disconnect",value:function(){var e=this;return this.device.controlTransferOut({requestType:"class",recipient:"interface",request:34,value:0,index:this.interfaceNumber}).then((function(){return e.device.close()}))}},{key:"send",value:function(e){return this.device.transferOut(this.endpointOut,e)}}])&&dr(t.prototype,r),n&&dr(t,n),Object.defineProperty(t,"prototype",{writable:!1}),o}(fr()),vr=r(25108);function Er(e){return Er="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Er(e)}function wr(e){return function(e){if(Array.isArray(e))return _r(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return _r(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return _r(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function _r(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function Sr(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function Nr(e,t){return Nr=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},Nr(e,t)}function xr(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=kr(e);if(t){var a=kr(this).constructor;r=Reflect.construct(n,arguments,a)}else r=n.apply(this,arguments);return function(e,t){if(t&&("object"===Er(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,r)}}function kr(e){return kr=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},kr(e)}var Or=new(function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Nr(e,t)}(o,e);var t,r,n,a=xr(o);function o(){var e;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,o),(e=a.call(this)).enabled=!!navigator.usb&&!!navigator.usb.getDevices,e.activePorts=[],e.watchPorts(),e}return t=o,(r=[{key:"getPorts",value:function(){return this.enabled?navigator.usb.getDevices().then((function(e){return e.filter((function(e){return!e.opened})).map((function(e){return new br(e)}))})):Promise.resolve([])}},{key:"getActivePorts",value:function(){return this.activePorts}},{key:"watchPorts",value:function(){var e=this;window.setInterval((function(){e.getPorts().then((function(t){t.forEach((function(t){t.addListener("error",(function(r){vr.warn(r),e.activePorts=e.activePorts.filter((function(e){return e!==t})),e.emit("activePortsChange",wr(e.activePorts))})),t.addListener("data",(function(t){e.emit("data",t)})),t.connect().then((function(){e.activePorts.push(t),e.emit("activePortsChange",wr(e.activePorts))}))}))}))}),1e3)}},{key:"requestPort",value:function(){var e=this;this.enabled&&navigator.usb.requestDevice({filters:[{vendorId:9025,productId:32822},{vendorId:9025,productId:32823},{vendorId:9025,productId:32845},{vendorId:9025,productId:32846},{vendorId:9025,productId:32847},{vendorId:9025,productId:32848},{vendorId:9025,productId:32850},{vendorId:9025,productId:32851},{vendorId:9025,productId:32852},{vendorId:9025,productId:32853},{vendorId:9025,productId:32854},{vendorId:9025,productId:32855},{vendorId:9114}]}).then((function(e){if(e.opened)throw new Error("device already opened");return new br(e)})).catch((function(){return null})).then((function(t){t&&t.connect().then((function(){e.activePorts.push(t),e.emit("activePortsChange",wr(e.activePorts))}))}))}}])&&Sr(t.prototype,r),n&&Sr(t,n),Object.defineProperty(t,"prototype",{writable:!1}),o}(fr()));function jr(e){return function(e){if(Array.isArray(e))return Pr(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return Pr(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Pr(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Pr(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var Ir=function(){var e=(0,u.I0)();return(0,n.useRef)((function(t){var r;try{r=new File(jr(t),"Text input.txt",{type:"text/plain"})}catch(e){r=new Blob(jr(t),{type:"text/plain"})}e({type:d.uD,payload:{files:[r]}})})).current};function Ar(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==r)return;var n,a,o=[],i=!0,l=!1;try{for(r=r.call(e);!(i=(n=r.next()).done)&&(o.push(n.value),!t||o.length!==t);i=!0);}catch(e){l=!0,a=e}finally{try{i||null==r.return||r.return()}finally{if(l)throw a}}return o}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return Rr(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Rr(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Rr(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var Cr=function(e){var t=Or.enabled,r=Ir(),a=Ar((0,n.useState)([]),2),o=a[0],i=a[1],l=Ar((0,n.useState)(!1),2),c=l[0],u=l[1],s=(0,n.useRef)(""),m=(0,n.useRef)(null);(0,n.useEffect)((function(){if(!Or.enabled)return function(){};var t=function(e){window.clearTimeout(m.current),m.current=window.setTimeout((function(){u(!1),r(s.current),s.current=""}),1e3),u(!0),s.current="".concat(s.current).concat(e)};return i(Or.getActivePorts()),Or.addListener("activePortsChange",i),e||Or.addListener("data",t),function(){Or.removeListener("activePortsChange",i),Or.removeListener("data",t)}}),[r,e]);return{activePorts:o,webUSBEnabled:t,openWebUSBSerial:function(){Or.enabled&&Or.requestPort()},isReceiving:c}};function Fr(e){return Fr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Fr(e)}function Tr(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function qr(e,t){return qr=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},qr(e,t)}function Lr(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=Dr(e);if(t){var a=Dr(this).constructor;r=Reflect.construct(n,arguments,a)}else r=n.apply(this,arguments);return function(e,t){if(t&&("object"===Fr(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,r)}}function Dr(e){return Dr=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},Dr(e)}var Br=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&qr(e,t)}(o,e);var t,r,n,a=Lr(o);function o(e){var t,r=e.device,n=e.baudRate;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,o),(t=a.call(this)).device=r,t.baudRate=n;var i=r.getInfo(),l=i.usbProductId,c=i.usbVendorId;return t.usbProductId=l,t.usbVendorId=c,t.reader=null,t}return t=o,(r=[{key:"connect",value:function(){var e=this,t=function t(){e.reader.read().then((function(r){var n=r.value;e.emit("data",n),t()})).catch((function(t){e.emit("error",t)}))};return this.device.open({baudRate:this.baudRate}).then((function(){var r=new window.TextDecoderStream;e.device.readable.pipeTo(r.writable),e.reader=r.readable.getReader(),t()}))}}])&&Tr(t.prototype,r),n&&Tr(t,n),Object.defineProperty(t,"prototype",{writable:!1}),o}(fr()),Mr=r(25108);function zr(e){return zr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},zr(e)}function Ur(e){return function(e){if(Array.isArray(e))return Gr(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return Gr(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Gr(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Gr(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function Vr(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function $r(e,t){return $r=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},$r(e,t)}function Hr(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=Zr(e);if(t){var a=Zr(this).constructor;r=Reflect.construct(n,arguments,a)}else r=n.apply(this,arguments);return function(e,t){if(t&&("object"===zr(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,r)}}function Zr(e){return Zr=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},Zr(e)}var Wr=new(function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&$r(e,t)}(o,e);var t,r,n,a=Hr(o);function o(){var e;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,o),(e=a.call(this)).enabled=!!navigator.serial&&!!window.TextDecoderStream,e.activePorts=[],e.baudRate=115200,e.watchPorts(),e}return t=o,(r=[{key:"getPorts",value:function(){var e=this;return this.enabled?navigator.serial.getPorts().then((function(t){return t.filter((function(e){return!e.readable})).map((function(t){return new Br({device:t,baudRate:e.baudRate})}))})):Promise.resolve([])}},{key:"getActivePorts",value:function(){return this.activePorts}},{key:"watchPorts",value:function(){var e=this;window.setInterval((function(){e.getPorts().then((function(t){t.forEach((function(t){t.addListener("error",(function(r){Mr.warn(r),e.activePorts=e.activePorts.filter((function(e){return e!==t})),e.emit("activePortsChange",Ur(e.activePorts))})),t.addListener("data",(function(t){e.emit("data",t)})),t.connect().then((function(){e.activePorts.push(t),e.emit("activePortsChange",Ur(e.activePorts))})).catch((function(){}))}))}))}),1e3)}},{key:"requestPort",value:function(){var e=this;this.enabled&&navigator.serial.requestPort().then((function(t){if(t.readable)throw new Error("device already opened");return new Br({device:t,baudRate:e.baudRate})})).catch((function(){return null})).then((function(t){t&&t.connect().then((function(){e.activePorts.push(t),e.emit("activePortsChange",Ur(e.activePorts))}))}))}}])&&Vr(t.prototype,r),n&&Vr(t,n),Object.defineProperty(t,"prototype",{writable:!1}),o}(fr()));function Kr(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==r)return;var n,a,o=[],i=!0,l=!1;try{for(r=r.call(e);!(i=(n=r.next()).done)&&(o.push(n.value),!t||o.length!==t);i=!0);}catch(e){l=!0,a=e}finally{try{i||null==r.return||r.return()}finally{if(l)throw a}}return o}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return Jr(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Jr(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Jr(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var Yr=function(e){var t=Wr.enabled,r=Ir(),a=Kr((0,n.useState)([]),2),o=a[0],i=a[1],l=Kr((0,n.useState)(!1),2),c=l[0],u=l[1],s=(0,n.useRef)(""),m=(0,n.useRef)(null);(0,n.useEffect)((function(){if(!Wr.enabled)return function(){};var t=function(e){window.clearTimeout(m.current),m.current=window.setTimeout((function(){u(!1),r(s.current),s.current=""}),1e3),u(!0),s.current="".concat(s.current).concat(e)};return i(Wr.getActivePorts()),Wr.addListener("activePortsChange",i),e||Wr.addListener("data",t),function(){Wr.removeListener("activePortsChange",i),Wr.removeListener("data",t)}}),[r,e]);return{activePorts:o,webSerialEnabled:t,openWebSerial:function(){Wr.enabled&&Wr.requestPort(115200)},isReceiving:c}},Qr=function(e){var t=e.confirm,r=e.deny,a=e.canConfirm;return n.createElement("div",{className:"buttons"},r?n.createElement("button",{className:"buttons__button buttons__button--deny",type:"button",onClick:r},"Cancel"):null,t?n.createElement("button",{disabled:!a,className:"buttons__button buttons__button--confirm",type:"button",onClick:t},"Ok"):null)};Qr.propTypes={confirm:g().func,canConfirm:g().bool,deny:g().func},Qr.defaultProps={confirm:null,canConfirm:!0,deny:null};var Xr=Qr,en=function(e){var t=e.confirm,r=void 0===t?null:t,a=e.canConfirm,o=void 0===a?null:a,i=e.deny,l=void 0===i?null:i;(0,n.useEffect)((function(){var e=function(e){"Escape"===e.key&&l&&l(),"Enter"===e.key&&e.ctrlKey&&r&&o&&r()};return document.addEventListener("keydown",e),function(){document.removeEventListener("keydown",e)}}),[r,o,l])},tn=r(97460);function rn(e){return function(e){if(Array.isArray(e))return nn(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return nn(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return nn(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function nn(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var an=function(){var e=(0,n.useRef)();return(0,n.useEffect)((function(){var t=document.activeElement,r=rn(e.current.querySelectorAll('a[href], area[href], input:not([disabled]), select:not([disabled]), textarea:not([disabled]), button:not([disabled]), [tabindex="0"]'));return r.length&&!(0,tn.Z)()&&r[0].focus(),function(){t.focus()}}),[]),e},on=function(e){var t=(0,u.v9)((function(e){return e.isFullscreen}));en({confirm:e.confirm,canConfirm:e.canConfirm,deny:e.deny});var r=an();return n.createElement("div",{className:m()("lightbox ".concat(e.className),{"lightbox--fullscreen":t})},n.createElement("button",{type:"button",className:"lightbox__backdrop ".concat(e.className,"__backdrop"),onClick:e.denyOnOverlayClick?e.deny:null}),n.createElement("div",{className:"lightbox__box ".concat(e.className,"__box"),ref:r,style:{height:e.height?"".concat(e.height,"px"):null}},n.createElement("dialog",{className:"lightbox__box-content ".concat(e.className,"__box-content"),"aria-labelledby":"lightbox-header"},e.header?n.createElement("div",{id:"lightbox-header",className:"lightbox__header ".concat(e.className,"__header")},e.header):null,e.children),e.confirm||e.deny?n.createElement(Xr,{confirm:e.confirm,canConfirm:e.canConfirm,deny:e.deny}):null))};on.propTypes={height:g().number,className:g().string,header:g().string,children:g().oneOfType([g().arrayOf(g().node),g().node]),confirm:g().func,deny:g().func,canConfirm:g().bool,denyOnOverlayClick:g().bool},on.defaultProps={height:null,header:null,className:"",confirm:null,children:null,deny:null,canConfirm:!0,denyOnOverlayClick:!0};var ln=on,cn=function(){var e=(0,u.v9)((function(e){return!!e.showSerials&&!!e.useSerials})),t=(0,u.I0)();return{lightBoxOpen:e,setHideSerials:function(){t({type:d.Dr,payload:!1})}}},un=function(e){var t=e.inline,r=e.passive,a="WebUSB Serial devices",o=Cr(r),i=o.activePorts,l=o.isReceiving,c=o.webUSBEnabled,u=o.openWebUSBSerial,s=Yr(r),f=s.activePorts,p=s.isReceiving,d=s.webSerialEnabled,h=s.openWebSerial,y=cn(),g=y.lightBoxOpen,b=y.setHideSerials,v=n.createElement("div",{className:"connect-usb-serial-overlay__content"},n.createElement("button",{type:"button",className:m()("connect-usb-serial-overlay__button button",{"connect-usb-serial-overlay__button--is-receiving":l,"connect-usb-serial-overlay__button--disabled":!c}),title:a,onClick:u,disabled:!c||l},"Open WebUSB device",l?" (receiving)":null),n.createElement("div",{className:"connect-usb-serial-overlay__info connect-usb-serial-overlay__info--spaced"},n.createElement("h4",null,"Connected devices (".concat(i.length,"):")),n.createElement("ul",null,i.map((function(e,t){var r=e.productName;return n.createElement("li",{key:t},r)})))),n.createElement("button",{type:"button",className:m()("connect-usb-serial-overlay__button button",{"connect-usb-serial-overlay__button--is-receiving":p,"connect-usb-serial-overlay__button--disabled":!d}),title:a,onClick:h,disabled:!d||p},"Open Web Serial device",p?" (receiving)":null),n.createElement("div",{className:"connect-usb-serial-overlay__info"},"".concat(f.length," devices connected")));return t?v:g||l||p?n.createElement(ln,{header:"WebUSB / Serial devices",confirm:function(){return b()},canConfirm:!l&&!p,className:"connect-usb-serial-overlay"},v):null};un.propTypes={inline:g().bool,passive:g().bool},un.defaultProps={inline:!1,passive:!1};var sn=un,mn=function(){var e=(0,u.v9)((function(e){return e.useSerials})),t=(0,u.I0)();return{useSerials:e,setUseSerials:function(e){t({type:d.rR,payload:e})}}},fn=function(){var e=mn(),t=e.useSerials,r=e.setUseSerials;return n.createElement("label",{className:m()("inputgroup checkgroup",{"checkgroup--checked":t})},n.createElement("span",{className:"inputgroup__label",title:"Hide dates in gallery"},"Enable WebUSB / Serial ports",n.createElement("span",{className:"inputgroup__note inputgroup__note--warn"},"This is currently an experimental feature")),n.createElement("span",{className:"checkgroup__checkbox-wrapper"},n.createElement("input",{type:"checkbox",className:"checkgroup__input",checked:t,onChange:function(e){var t=e.target;r(t.checked)}}),n.createElement(N,{name:"checkmark"})))},pn=function(){var e=mn().useSerials;return n.createElement(n.Fragment,null,n.createElement(fn,null),e?n.createElement(n.Fragment,null,n.createElement(sn,{inline:!0,passive:!0}),n.createElement("div",{className:"usb-greeting"},n.createElement("p",null,"After connecting a USB (or serial) device, you can continue to the ",n.createElement(a.rU,{to:"/gallery"},"Gallery Page")," or ",n.createElement(a.rU,{to:"/"},"Home Page")," now."),n.createElement("p",null,"An overlay will appear once you're receiving data."),n.createElement("p",null,"You can also access these options via the USB-Symbol in the navigation and the ",n.createElement(a.rU,{to:"/settings/generic"},"Settings Page")," ."),n.createElement("p",null,n.createElement("strong",null,"Note: WebUSB and Web Serial are similar but not the same:")),n.createElement("p",null,"While Web Serial has access to a regular COM-port and does not require special devices, the feature is not available on mobile devices. ",n.createElement("br",null),n.createElement("span",{className:Wr.enabled?"usb-greeting--supported":"usb-greeting--not-supported"},Wr.enabled?"Your current device does support Web Serial":"Your current device does not support Web Serial")),n.createElement("p",null,"WebUSB requires certain microcontrollers where the processor has direct access to the USB interface (e.g. an Arduino Leonardo). ",n.createElement("a",{href:"https://github.com/webusb/arduino"},"See webusb for arduino on GitHub for more information"),".",n.createElement("br",null),n.createElement("span",{className:Or.enabled?"usb-greeting--supported":"usb-greeting--not-supported"},Or.enabled?"Your current device does support WebUSB":"Your current device does not support WebUSB")))):null)},dn=["theme-bright","theme-dark"],hn=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:localStorage.getItem("gbp-web-theme");(0,n.useEffect)((function(){localStorage.setItem("gbp-web-theme",e);var t=document.querySelector("html").classList;dn.forEach(t.remove.bind(t)),t.add(e)}),[e])};function yn(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==r)return;var n,a,o=[],i=!0,l=!1;try{for(r=r.call(e);!(i=(n=r.next()).done)&&(o.push(n.value),!t||o.length!==t);i=!0);}catch(e){l=!0,a=e}finally{try{i||null==r.return||r.return()}finally{if(l)throw a}}return o}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return gn(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return gn(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function gn(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var bn=function(e){var t=e.closeNavigation,r=yn((0,n.useState)(localStorage.getItem("gbp-web-theme")||dn[0]),2),a=r[0],o=r[1];hn(a);var i=a===dn[0]?"Switch to dark mode":"Switch to bright mode";return n.createElement("label",{className:"theme-toggle navigation__link",title:i},n.createElement(N,{name:a===dn[0]?"sun":"moon"}),n.createElement("span",{className:"theme-toggle__title"},i),n.createElement("input",{type:"checkbox",checked:a===dn[0],onChange:function(e){var r=e.target;t(),o(r.checked?dn[0]:dn[1])}}))};bn.propTypes={closeNavigation:g().func.isRequired},bn.defaultProps={};var vn=bn,En=function(){var e=(0,u.v9)((function(e){var t;return{syncBusy:e.syncBusy,useSync:!!(e.dropboxStorage.use||e.gitStorage.use&&e.gitStorage.owner&&e.gitStorage.repo&&e.gitStorage.branch&&e.gitStorage.throttle&&e.gitStorage.token),useSerials:e.useSerials,syncLastUpdate:e.syncLastUpdate,autoDropboxSync:(null===(t=e.dropboxStorage)||void 0===t?void 0:t.autoDropboxSync)||!1}})),t=e.syncBusy,r=e.useSync,n=e.useSerials,a=e.syncLastUpdate,o=e.autoDropboxSync,i=(0,u.I0)();return{disableSerials:!Or.enabled&&!Wr.enabled,syncBusy:t,useSync:r,useSerials:n,syncLastUpdate:a,autoDropboxSync:o,selectSync:function(){i({type:d.sS})},setShowSerials:function(){i({type:d.Dr,payload:!0})}}},wn=r(93162),_n=r(59833),Sn=r(27918);function Nn(e){return Nn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Nn(e)}function xn(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function kn(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?xn(Object(r),!0).forEach((function(t){On(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):xn(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function On(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function jn(e){return function(e){if(Array.isArray(e))return Pn(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return Pn(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Pn(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Pn(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function In(){In=function(){return e};var e={},t=Object.prototype,r=t.hasOwnProperty,n="function"==typeof Symbol?Symbol:{},a=n.iterator||"@@iterator",o=n.asyncIterator||"@@asyncIterator",i=n.toStringTag||"@@toStringTag";function l(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{l({},"")}catch(e){l=function(e,t,r){return e[t]=r}}function c(e,t,r,n){var a=t&&t.prototype instanceof m?t:m,o=Object.create(a.prototype),i=new S(n||[]);return o._invoke=function(e,t,r){var n="suspendedStart";return function(a,o){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===a)throw o;return x()}for(r.method=a,r.arg=o;;){var i=r.delegate;if(i){var l=E(i,r);if(l){if(l===s)continue;return l}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var c=u(e,t,r);if("normal"===c.type){if(n=r.done?"completed":"suspendedYield",c.arg===s)continue;return{value:c.arg,done:r.done}}"throw"===c.type&&(n="completed",r.method="throw",r.arg=c.arg)}}}(e,r,i),o}function u(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}e.wrap=c;var s={};function m(){}function f(){}function p(){}var d={};l(d,a,(function(){return this}));var h=Object.getPrototypeOf,y=h&&h(h(N([])));y&&y!==t&&r.call(y,a)&&(d=y);var g=p.prototype=m.prototype=Object.create(d);function b(e){["next","throw","return"].forEach((function(t){l(e,t,(function(e){return this._invoke(t,e)}))}))}function v(e,t){function n(a,o,i,l){var c=u(e[a],e,o);if("throw"!==c.type){var s=c.arg,m=s.value;return m&&"object"==Nn(m)&&r.call(m,"__await")?t.resolve(m.__await).then((function(e){n("next",e,i,l)}),(function(e){n("throw",e,i,l)})):t.resolve(m).then((function(e){s.value=e,i(s)}),(function(e){return n("throw",e,i,l)}))}l(c.arg)}var a;this._invoke=function(e,r){function o(){return new t((function(t,a){n(e,r,t,a)}))}return a=a?a.then(o,o):o()}}function E(e,t){var r=e.iterator[t.method];if(void 0===r){if(t.delegate=null,"throw"===t.method){if(e.iterator.return&&(t.method="return",t.arg=void 0,E(e,t),"throw"===t.method))return s;t.method="throw",t.arg=new TypeError("The iterator does not provide a 'throw' method")}return s}var n=u(r,e.iterator,t.arg);if("throw"===n.type)return t.method="throw",t.arg=n.arg,t.delegate=null,s;var a=n.arg;return a?a.done?(t[e.resultName]=a.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,s):a:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,s)}function w(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function _(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function S(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(w,this),this.reset(!0)}function N(e){if(e){var t=e[a];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var n=-1,o=function t(){for(;++n<e.length;)if(r.call(e,n))return t.value=e[n],t.done=!1,t;return t.value=void 0,t.done=!0,t};return o.next=o}}return{next:x}}function x(){return{value:void 0,done:!0}}return f.prototype=p,l(g,"constructor",p),l(p,"constructor",f),f.displayName=l(p,i,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===f||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,p):(e.__proto__=p,l(e,i,"GeneratorFunction")),e.prototype=Object.create(g),e},e.awrap=function(e){return{__await:e}},b(v.prototype),l(v.prototype,o,(function(){return this})),e.AsyncIterator=v,e.async=function(t,r,n,a,o){void 0===o&&(o=Promise);var i=new v(c(t,r,n,a),o);return e.isGeneratorFunction(r)?i:i.next().then((function(e){return e.done?e.value:i.next()}))},b(g),l(g,i,"Generator"),l(g,a,(function(){return this})),l(g,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=[];for(var r in e)t.push(r);return t.reverse(),function r(){for(;t.length;){var n=t.pop();if(n in e)return r.value=n,r.done=!1,r}return r.done=!0,r}},e.values=N,S.prototype={constructor:S,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(_),!e)for(var t in this)"t"===t.charAt(0)&&r.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function n(r,n){return i.type="throw",i.arg=e,t.next=r,n&&(t.method="next",t.arg=void 0),!!n}for(var a=this.tryEntries.length-1;a>=0;--a){var o=this.tryEntries[a],i=o.completion;if("root"===o.tryLoc)return n("end");if(o.tryLoc<=this.prev){var l=r.call(o,"catchLoc"),c=r.call(o,"finallyLoc");if(l&&c){if(this.prev<o.catchLoc)return n(o.catchLoc,!0);if(this.prev<o.finallyLoc)return n(o.finallyLoc)}else if(l){if(this.prev<o.catchLoc)return n(o.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<o.finallyLoc)return n(o.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var a=this.tryEntries[n];if(a.tryLoc<=this.prev&&r.call(a,"finallyLoc")&&this.prev<a.finallyLoc){var o=a;break}}o&&("break"===e||"continue"===e)&&o.tryLoc<=t&&t<=o.finallyLoc&&(o=null);var i=o?o.completion:{};return i.type=e,i.arg=t,o?(this.method="next",this.next=o.finallyLoc,s):this.complete(i)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),s},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),_(r),s}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var a=n.arg;_(r)}return a}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,r){return this.delegate={iterator:N(e),resultName:t,nextLoc:r},"next"===this.method&&(this.arg=void 0),s}},e}function An(e,t,r,n,a,o,i){try{var l=e[o](i),c=l.value}catch(e){return void r(e)}l.done?t(c):Promise.resolve(c).then(n,a)}function Rn(e){return function(){var t=this,r=arguments;return new Promise((function(n,a){var o=e.apply(t,r);function i(e){An(o,n,a,i,l,"next",e)}function l(e){An(o,n,a,i,l,"throw",e)}i(void 0)}))}}var Cn=function(){var e=Rn(In().mark((function e(t,n){var a,o;return In().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,_n.VA)();case 2:return e.next=4,r.e(591).then(r.t.bind(r,99591,23));case 4:return a=e.sent,o=a.default,e.abrupt("return",Promise.all(t.map((function(e){return n.getItem(e).then((function(t){var r=o.inflate(t,{to:"string"});return{hash:e,lines:r.split("\n"),binary:t}})).catch((function(){return null}))}))));case 7:case"end":return e.stop()}}),e)})));return function(t,r){return e.apply(this,arguments)}}(),Fn=function(){var e=(0,u.v9)((function(e){return e.trashCount})),t=((null==e?void 0:e.frames)||0)+((null==e?void 0:e.images)||0),r=(0,u.oR)(),n=(0,u.I0)(),a=function(e){n({type:d.l3,payload:e})},o=function(){var e=Rn(In().mark((function e(){var t,n,a,o;return In().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,Sn.op)(r.getState().images);case 2:return t=e.sent,e.next=5,Cn(t,_n.Rt);case 5:n=e.sent,a={state:{}},o=n.map((function(e){try{return a[e.hash]=e.binary,{hash:e.hash,created:v()().format(f.vc),title:"Backup export ".concat(e.hash),lines:e.lines.length,tags:["backup"],palette:"bw",frame:""}}catch(e){return null}})).filter(Boolean),a.state.images=o,(0,wn.saveAs)(new Blob(jn(JSON.stringify(a,null,2))),"backup_images.json");case 10:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),i=function(){var e=Rn(In().mark((function e(){var t,n,a,o;return In().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,Sn.c6)(r.getState().frames);case 2:return t=e.sent,e.next=5,Cn(t,_n.$0);case 5:n=e.sent,a={state:{}},o=n.map((function(e,t){try{return a["frame-".concat(e.hash)]=e.binary,{hash:e.hash,name:"Backup export ".concat(e.hash),id:"bak".concat(t.toString(10).padStart(2,"0"))}}catch(e){return null}})).filter(Boolean),a.state.frames=o,a.state.frameGroupNames=[{id:"bak",name:"Re-imported trash frames"}],(0,wn.saveAs)(new Blob(jn(JSON.stringify(a,null,2))),"backup_frames.json");case 11:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),l=function(){var e=Rn(In().mark((function e(){return In().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,Sn.Gw)(r.getState());case 2:n({type:d.A8}),a(!1);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return{showTrash:a,purgeTrash:l,downloadImages:o,downloadFrames:i,trashCount:kn(kn({},e),{},{sum:t})}};function Tn(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==r)return;var n,a,o=[],i=!0,l=!1;try{for(r=r.call(e);!(i=(n=r.next()).done)&&(o.push(n.value),!t||o.length!==t);i=!0);}catch(e){l=!0,a=e}finally{try{i||null==r.return||r.return()}finally{if(l)throw a}}return o}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return qn(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return qn(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function qn(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var Ln=function(){var e=Tn((0,n.useState)(!1),2),t=e[0],r=e[1],o=En(),i=o.disableSerials,l=o.syncBusy,c=o.useSync,u=o.useSerials,s=o.syncLastUpdate,f=o.autoDropboxSync,p=o.selectSync,d=o.setShowSerials,h=Fn(),y=h.showTrash,g=h.trashCount,b=function(e){var t=e.isActive;return"navigation__link ".concat(t?"navigation__link--active":"")};return n.createElement("nav",{className:m()("navigation",{"navigation--mobile-open":t})},n.createElement("button",{className:"navigation__burger-button",type:"button",onClick:function(){return r(!t)}},n.createElement(N,{name:t?"close-nav":"burger"})),n.createElement("ul",{className:"navigation__list"},n.createElement("li",{className:"navigation__entry"},n.createElement(a.OL,{to:"/home",className:b,onClick:function(){return r(!1)}},"Home")),n.createElement("li",{className:"navigation__entry"},n.createElement(a.OL,{to:"/gallery",className:b,onClick:function(){return r(!1)}},"Gallery")),n.createElement("li",{className:"navigation__entry"},n.createElement(a.OL,{to:"/import",className:b,onClick:function(){return r(!1)}},"Import")),n.createElement("li",{className:"navigation__entry"},n.createElement(a.OL,{to:"/palettes",className:b,onClick:function(){return r(!1)}},"Palettes")),n.createElement("li",{className:"navigation__entry"},n.createElement(a.OL,{to:"/frames",className:b,onClick:function(){return r(!1)}},"Frames")),n.createElement("li",{className:"navigation__entry"},n.createElement(a.OL,{to:"/settings",className:b,onClick:function(){return r(!1)}},"Settings")),n.createElement("li",{className:"navigation__entry navigation__entry--buttons"},n.createElement("button",{type:"button",title:"Trash Bin",className:"navigation__link navigation__link--icon",onClick:function(){return y(!0)}},n.createElement(N,{name:"delete"}),g.sum>0?n.createElement("span",{className:"navigation__link-bubble"},g.sum):null)),c?n.createElement("li",{className:"navigation__entry navigation__entry--buttons"},n.createElement("button",{type:"button",title:"Synchronize",className:"navigation__link navigation__link--icon",onClick:p,disabled:l},n.createElement(N,{name:"sync"}),f&&s.local!==s.dropbox?n.createElement("span",{className:"navigation__link-bubble",title:s.local>s.dropbox?"There are local changes not synched to dropbox yet":"There are remote changes not synched yet"},"!"):null)):null,n.createElement("li",{className:"navigation__entry navigation__entry--right"},n.createElement(vn,{closeNavigation:function(){return r(!1)}})),u?n.createElement("li",{className:"navigation__entry navigation__entry--right"},n.createElement("button",{title:"WebUSB Serial devices",type:"button",className:"connect-usb-serial navigation__link",disabled:i,onClick:function(){r(!1),d()}},n.createElement(N,{name:"usb"}),n.createElement("span",{className:"connect-usb-serial__title"},"WebUSB Serial devices"))):null))},Dn=(0,u.$j)((function(e){return{git:{messages:e.progressLog.git||[],repoUrl:"https://github.com/".concat(e.gitStorage.owner,"/").concat(e.gitStorage.repo,"/tree/").concat(e.gitStorage.branch),repo:e.gitStorage.repo,branch:e.gitStorage.branch},dropbox:{messages:e.progressLog.dropbox||[],path:e.dropboxStorage.path||""}}}),(function(e){return{confirm:function(){e({type:d.d0})}}})),Bn=r(1646),Mn=r.n(Bn);function zn(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==r)return;var n,a,o=[],i=!0,l=!1;try{for(r=r.call(e);!(i=(n=r.next()).done)&&(o.push(n.value),!t||o.length!==t);i=!0);}catch(e){l=!0,a=e}finally{try{i||null==r.return||r.return()}finally{if(l)throw a}}return o}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return Un(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Un(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Un(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}v().extend(Mn());var Gn=function(e){var t=e.git,r=t.messages,a=t.repoUrl,o=t.repo,i=t.branch,l=e.dropbox,c=l.messages,u=l.path,s=e.confirm,m=zn((0,n.useState)(!0),2),f=m[0],p=m[1];if(!r.length&&!c.length)return null;var d=r.length>0,h=c.length>0,y=(r[r.length-1]||{}).timestamp,g=r[0]||{},b=g.timestamp,E=g.message,w=(c[c.length-1]||{}).timestamp,_=c[0]||{},S=_.timestamp,N=_.message,x="."===E||"."===N,k=d?y:w,O=d?b:S,j=r.concat(c),P=j.filter((function(e,t){return!f||t<15}));return n.createElement(ln,{className:"progress-log",header:"".concat(x?"✔️ Update done":"⏳ Updating..."," ").concat(d?' - "'.concat(o,"/").concat(i,'"'):""),confirm:x?s:null},n.createElement("ul",{className:"progress-log__messages"},P.map((function(e,t){var r=e.message,a=e.timestamp;return"."===r?null:n.createElement("li",{key:t,className:"progress-log__message",title:v().unix(a).format("HH:mm:ss")},r)}))),j.length>15?n.createElement("button",{type:"button",className:"progress-log__button",onClick:function(){return p(!f)}},f?"Show all ".concat(j.length," messages"):"Reduce messages"):null,n.createElement("div",{className:"progress-log__duration"},"Started at: ".concat(v().unix(k).format("HH:mm:ss")),n.createElement("br",null),"".concat(x?"Finished after":"Running for",": ").concat(v().duration(O-k,"seconds").format("HH:mm:ss")),d?n.createElement(n.Fragment,null,n.createElement("br",null),"Repository: ",n.createElement("a",{title:a,href:a,target:"_blank",rel:"noreferrer"},"Open GitHub")):null,h?n.createElement(n.Fragment,null,n.createElement("br",null),n.createElement("a",{title:"Open Dropbox folder:\nhttps://www.dropbox.com/home/Apps/GameBoyPrinter/".concat(u),href:"https://www.dropbox.com/home/Apps/GameBoyPrinter/".concat(u),target:"_blank",rel:"noreferrer"},"Open Dropbox folder")):null))};Gn.propTypes={git:g().shape({messages:g().arrayOf(g().shape({timestamp:g().number.isRequired,message:g().string.isRequired})).isRequired,repoUrl:g().string.isRequired,repo:g().string.isRequired,branch:g().string.isRequired}).isRequired,dropbox:g().shape({messages:g().arrayOf(g().shape({timestamp:g().number.isRequired,message:g().string.isRequired})).isRequired,path:g().string.isRequired}).isRequired,confirm:g().func.isRequired};var Vn=Dn(Gn),$n=(0,u.$j)((function(e){return 1===e.framesMessage?{message:{type:d.jN,headline:"You might be temporarily missing some frames",text:["In a recent change the pre-compiled frames have been removed from this application.","The application now however gives you the opportunity to add all frames you like by yourself and also share them with others.","Maybe you have designed some frames by yourself, or you have aquired some previously unknown frames.",'To see how you can add the frames, check the "Frames" explanation on the startpage of this app.']}}:{}}),(function(e){return{confirm:function(t){e({type:t})}}})),Hn=function(e){var t=e.message,r=e.confirm;return t?n.createElement(ln,{className:"info-box",confirm:function(){return r(t.type)},header:t.headline},n.createElement("div",{className:"info-box__message"},t.text.map((function(e,t){return n.createElement("p",{key:t},e)})))):null};Hn.propTypes={message:g().object,confirm:g().func.isRequired},Hn.defaultProps={message:null};var Zn=$n(Hn),Wn=(0,u.$j)((function(e){return e.progress.gif?{progress:e.progress.gif,message:"Creating GIF animation..."}:e.progress.plugin?{progress:e.progress.plugin,message:"Executing plugin..."}:e.progress.printer?{progress:e.progress.printer,message:"Fetching images from printer..."}:{}}),(function(e){return{confirm:function(t){e({type:t})}}})),Kn=function(e){var t=e.message,r=e.progress;return r?n.createElement(ln,{className:"progress-box",header:t.headline},n.createElement("div",{className:"progress-box__message"},t),n.createElement("progress",{className:"progress-box__progress",value:r,max:1})):null};Kn.propTypes={message:g().string.isRequired,progress:g().number.isRequired};var Jn=Wn(Kn);function Yn(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==r)return;var n,a,o=[],i=!0,l=!1;try{for(r=r.call(e);!(i=(n=r.next()).done)&&(o.push(n.value),!t||o.length!==t);i=!0);}catch(e){l=!0,a=e}finally{try{i||null==r.return||r.return()}finally{if(l)throw a}}return o}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return Qn(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Qn(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Qn(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function Xn(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function ea(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Xn(Object(r),!0).forEach((function(t){ta(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Xn(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function ta(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var ra=function(e){var t,r;return ea(ea({},e),{},{selected:(null===(t=e.options)||void 0===t||null===(r=t.find((function(e){return e.selected})))||void 0===r?void 0:r.value)||""})},na=function(e){var t=Yn((0,n.useState)(e({}).map(ra).reduce((function(e,t){var r=t.key,n=t.selected;return ea(ea({},e),{},ta({},r,n))}),{})),2),r=t[0],a=t[1];return[e(r),r,function(e,t){a(ea(ea({},r),{},ta({},e,t)))}]},aa=function(e){var t=e.id,r=e.label,a=e.disabled,o=e.value,i=e.setSelected,l=e.options;return n.createElement("div",{className:"inputgroup"},n.createElement("label",{htmlFor:"confirm-options-".concat(t),className:"inputgroup__label"},r),n.createElement("select",{id:"confirm-options-".concat(t),disabled:a,className:"inputgroup__input inputgroup__input--select",value:o,onChange:i},l.map((function(e){var t=e.value,r=e.name;return n.createElement("option",{value:t,key:t},r)}))))};aa.propTypes={id:g().string.isRequired,label:g().string.isRequired,disabled:g().bool.isRequired,value:g().string.isRequired,setSelected:g().func.isRequired,options:g().arrayOf(g().shape({value:g().string.isRequired,name:g().string.isRequired})).isRequired};var oa=aa;function ia(e){var t=e.label,r=e.themes;return n.createElement("p",{className:m()("info-text",r.map((function(e){return"info-text--".concat(e)})))},t)}ia.propTypes={label:g().string.isRequired,themes:g().array.isRequired};var la=ia;function ca(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==r)return;var n,a,o=[],i=!0,l=!1;try{for(r=r.call(e);!(i=(n=r.next()).done)&&(o.push(n.value),!t||o.length!==t);i=!0);}catch(e){l=!0,a=e}finally{try{i||null==r.return||r.return()}finally{if(l)throw a}}return o}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return ua(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return ua(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ua(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var sa=function(){var e,t=(0,u.v9)((function(e){var t=e.confirm[0];return t?{message:t.message,questionsState:t.questions||function(){return[]},confirm:t.confirm,deny:null==t?void 0:t.deny}:{}})),r=t.message,a=t.questionsState,o=t.confirm,i=t.deny,l=ca(na(a),3),c=l[0],s=l[1],f=l[2],p=null===(e=c.find((function(e){return"confirmForm"===e.type})))||void 0===e?void 0:e.notComplete;return n.createElement(ln,{className:"confirm",confirm:p?null:function(){return o(s)},deny:i,header:r},c.map((function(e){var t=e.label,r=e.key,a=e.type,o=e.options,i=e.disabled,l=void 0!==i&&i,c=e.themes,u=void 0===c?[]:c,p=e.min,d=e.max;switch(a){case"select":return n.createElement(oa,{key:r,id:r,disabled:l,value:s[r]||"",label:t,options:o,setSelected:function(e){var t=e.target.value;f(r,t)}});case"text":case"number":return n.createElement(Ge,{key:r,id:r,disabled:l,value:s[r]||"",type:a,labelText:t,min:p,max:d,onChange:function(e){f(r,e)}});case"checkbox":return n.createElement("label",{key:r,id:r,className:m()("confirm__check-label",{"confirm__check-label--checked":s[r]})},n.createElement("input",{type:"checkbox",className:"confirm__checkbox",checked:s[r],disabled:l,onChange:function(e){var t=e.target;f(r,t.checked)}}),n.createElement(N,{name:"checkmark"}),n.createElement("span",{className:"confirm__check-label-text"},t));case"info":return n.createElement(la,{label:t,themes:u,key:r});default:return null}})).filter(Boolean))},ma=r(20170);function fa(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function pa(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?fa(Object(r),!0).forEach((function(t){da(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):fa(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function da(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var ha=(0,u.$j)((function(e){var t=e.windowDimensions.width<=600?e.windowDimensions.height:Math.min(900,e.windowDimensions.height),r=function(t){return e.palettes.find((function(e){return t===e.shortName}))||f.d$},n=e.images.find((function(t){var r;return t.hash===(null===(r=e.editImage)||void 0===r?void 0:r.hash)})),a=(null==e?void 0:e.editImage)||{},o=a.batch,i=a.tags;return e.editImage&&n?{created:n.created||null,hash:n.hash,tags:o?i:n.tags,title:n.title,hashes:n.hashes,frame:n.frame,lockFrame:n.lockFrame||!1,meta:n.meta||null,palette:n.palette,invertPalette:n.invertPalette||!1,batch:o?o.length:0,rotation:n.rotation||null,paletteShort:"string"==typeof n.palette?n.palette:null,paletteRGBN:"string"!=typeof n.palette?n.palette:null,height:t,findPalette:r}:{hash:null,invertPalette:!1,lockFrame:!1,tags:[],batch:0,height:t,findPalette:r}}),(function(e){return{save:function(t,r){var n=t.batch,a=t.tagChanges;e(n?{type:d.hT,payload:{image:r,batch:n,tagChanges:a}}:{type:d.m9,payload:pa(pa({},r),{},{tags:(0,ma.Z)(a)})})},cancel:function(){e({type:d.DS})}}})),ya=function(e){var t=e.frame,r=e.updateFrame,a=e.noFrameOption,o=e.updateFrameLock,i=e.lockFrame,l=e.selectLabel,c=(0,u.v9)((function(e){return e.frames}));return n.createElement(n.Fragment,null,l?n.createElement("label",{className:"frame-select__select-label",htmlFor:"frame-select-select"},l):null,n.createElement("select",{className:"frame-select",id:"frame-select-select",value:t,onChange:function(e){r(e.target.value)}},n.createElement("option",{value:""},a),c.map((function(e){var t=e.id,r=e.name;return n.createElement("option",{key:t,value:t},"".concat(r," (").concat(t,")"))}))),"function"==typeof o?n.createElement("label",{className:m()("frame-select__check-label",{"frame-select__check-label--checked":i})},n.createElement("input",{type:"checkbox",className:"frame-select__checkbox",checked:i,onChange:function(e){var t=e.target;o(t.checked)}}),n.createElement(N,{name:"checkmark"}),n.createElement("span",{className:"frame-select__check-label-text"},"Palette does not affect frame")):null)};ya.propTypes={frame:g().string.isRequired,updateFrame:g().func.isRequired,updateFrameLock:g().func,lockFrame:g().bool,noFrameOption:g().string,selectLabel:g().string},ya.defaultProps={noFrameOption:"As imported / No frame",selectLabel:null,lockFrame:!1,updateFrameLock:null};var ga=ya,ba=(r(84944),r(33792),r(19302)),va=r(24022),Ea=r(32100),wa=function(e){var t=e.domain,r=e.handle,a=(0,e.getHandleProps)(r.id),o=a.onKeyDown,i=a.onMouseDown,l=a.onTouchStart;return n.createElement("button",{role:"slider",type:"button","aria-valuemin":t.min,"aria-valuemax":t.max,"aria-valuenow":r.value,className:"color-slider__handle",style:{left:"".concat(r.percent,"%")},onKeyDown:o,onMouseDown:i,onTouchStart:l})};wa.propTypes={domain:g().array.isRequired,handle:g().shape({id:g().string.isRequired,value:g().number.isRequired,percent:g().number.isRequired}).isRequired,getHandleProps:g().func.isRequired},wa.defaultProps={};var _a=wa,Sa=function(e){var t=(0,e.getRailProps)(),r=t.onMouseDown,a=t.onTouchStart;return n.createElement("button",{type:"button",className:"color-slider__rail",onMouseDown:r,onTouchStart:a,tabIndex:"-1"},n.createElement("div",{className:"color-slider__rail-inner"}))};Sa.propTypes={getRailProps:g().func.isRequired};var Na=Sa,xa=[0,255],ka=function(e){return n.createElement("div",{className:"color-slider","data-color":e.color},n.createElement("button",{className:"color-slider__button color-slider__button--reset",type:"button",onClick:function(){e.onChange([0,85,170,255])}},n.createElement(N,{name:"reset"})),n.createElement(Ea.iR,{className:"color-slider__root",mode:2,step:4,domain:xa,onUpdate:e.onChange,onChange:e.onChange,values:e.values},n.createElement(Ea.S0,null,(function(e){var t=e.getRailProps;return n.createElement(Na,{getRailProps:t})})),n.createElement(Ea.wO,null,(function(e){var t=e.handles,r=e.getHandleProps;return n.createElement("div",{className:"slider-handles"},t.map((function(e){return n.createElement(_a,{key:e.id,handle:e,domain:xa,getHandleProps:r})})))}))))};ka.propTypes={color:g().oneOf(["r","g","b","n"]).isRequired,onChange:g().func.isRequired,values:g().array.isRequired};var Oa=ka;function ja(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Pa(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?ja(Object(r),!0).forEach((function(t){Ia(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ja(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function Ia(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Aa(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==r)return;var n,a,o=[],i=!0,l=!1;try{for(r=r.call(e);!(i=(n=r.next()).done)&&(o.push(n.value),!t||o.length!==t);i=!0);}catch(e){l=!0,a=e}finally{try{i||null==r.return||r.return()}finally{if(l)throw a}}return o}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return Ra(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Ra(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Ra(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var Ca=function(e){var t=Aa((0,n.useState)(e.values),2),r=t[0],a=t[1],o=(0,ba.Z)((function(t){e.onChange(t,!0)}),150,{leading:!0,trailing:!0}),i=function(e,t){var n=Pa(Pa({},r),{},Ia({},e,t));a(n),o.callback(n)};return n.createElement("div",{className:"grey-select"},["r","g","b","n"].filter((function(t){return e.useChannels[t]})).map((function(e){return["n"===e?n.createElement("select",{key:"blendmode",className:"grey-select__select",value:r.blend,onChange:function(e){i("blend",e.target.value)}},va.Rg.map((function(e){var t=e.id,r=e.label;return n.createElement("option",{key:t,value:t},r)}))):null,n.createElement(Oa,{key:"slider-".concat(e),color:e,values:r[e],onChange:function(t){i(e,t)}})].flat().filter(Boolean)})))};Ca.propTypes={values:g().object.isRequired,onChange:g().func.isRequired,useChannels:g().shape({r:g().bool.isRequired,g:g().bool.isRequired,b:g().bool.isRequired,n:g().bool.isRequired}).isRequired},Ca.defaultProps={};var Fa=Ca;function Ta(e){return function(e){if(Array.isArray(e))return Da(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||La(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function qa(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==r)return;var n,a,o=[],i=!0,l=!1;try{for(r=r.call(e);!(i=(n=r.next()).done)&&(o.push(n.value),!t||o.length!==t);i=!0);}catch(e){l=!0,a=e}finally{try{i||null==r.return||r.return()}finally{if(l)throw a}}return o}(e,t)||La(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function La(e,t){if(e){if("string"==typeof e)return Da(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?Da(e,t):void 0}}function Da(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var Ba=function(e){var t=e.value,r=e.allowEmpty,a=e.onChange,o=e.invertPalette,i=e.updateInvertPalette,l=e.noFancy,c=e.selectLabel,s=qa((0,n.useState)(t),2),f=s[0],p=s[1],d=Ta((0,u.v9)((function(e){return e.palettes})));return r&&d.unshift({shortName:"",name:"As selected per image",palette:[]}),n.createElement(n.Fragment,null,c?n.createElement("label",{className:"palette-select__select-label",htmlFor:"palette-select-select"},c):null,n.createElement("select",{id:"palette-select-select",className:"palette-select",value:t,onChange:function(e){a(e.target.value,!0),p(e.target.value)}},d.map((function(e){var t=e.shortName,r=e.name;return n.createElement("option",{key:t,value:t},r)}))),i?n.createElement("label",{className:m()("palette-select__check-label",{"palette-select__check-label--checked":o})},n.createElement("input",{type:"checkbox",className:"palette-select__checkbox",checked:o,onChange:function(e){var t=e.target;i(t.checked)}}),n.createElement(N,{name:"checkmark"}),n.createElement("span",{className:"palette-select__check-label-text"},"Invert Palette")):null,l?null:n.createElement("ul",{className:"fancy-palette-select"},d.map((function(e){var t=e.shortName,r=e.name,o=e.palette;return n.createElement("li",{key:t,className:m()("fancy-palette-select__entry",{"fancy-palette-select__entry--active":f===t})},n.createElement("button",{type:"button",className:"fancy-palette-select__button",title:r,onClick:function(){a(t,!0),p(t)},onMouseEnter:function(){a(t,!1)},onMouseLeave:function(){a(f)}},n.createElement("span",{className:"fancy-palette-select__color",style:{backgroundColor:o[0]}}),n.createElement("span",{className:"fancy-palette-select__color",style:{backgroundColor:o[1]}}),n.createElement("span",{className:"fancy-palette-select__color",style:{backgroundColor:o[2]}}),n.createElement("span",{className:"fancy-palette-select__color",style:{backgroundColor:o[3]}})))}))))};Ba.propTypes={value:g().string.isRequired,selectLabel:g().string,onChange:g().func.isRequired,invertPalette:g().bool,updateInvertPalette:g().func,noFancy:g().bool,allowEmpty:g().bool},Ba.defaultProps={selectLabel:null,noFancy:!1,allowEmpty:!1,invertPalette:!1,updateInvertPalette:null};var Ma=Ba,za=(r(73210),r(19601),r(88899)),Ua=r(31852);function Ga(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==r)return;var n,a,o=[],i=!0,l=!1;try{for(r=r.call(e);!(i=(n=r.next()).done)&&(o.push(n.value),!t||o.length!==t);i=!0);}catch(e){l=!0,a=e}finally{try{i||null==r.return||r.return()}finally{if(l)throw a}}return o}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return Va(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Va(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Va(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var $a=function(e){return(0,Ua.Z)(e.map((function(e){return e.tags})).flat()).filter((function(e){return e!==p.oJ})).sort((function(e,t){return e.toLowerCase().localeCompare(t.toLowerCase())}))},Ha=function(){var e=(0,u.v9)((function(e){return e.images})),t=Ga((0,n.useState)($a(e)),2),r=t[0],a=t[1];return(0,n.useEffect)((function(){a($a(e))}),[e]),{availableTags:r}};function Za(){return Za=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Za.apply(this,arguments)}function Wa(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==r)return;var n,a,o=[],i=!0,l=!1;try{for(r=r.call(e);!(i=(n=r.next()).done)&&(o.push(n.value),!t||o.length!==t);i=!0);}catch(e){l=!0,a=e}finally{try{i||null==r.return||r.return()}finally{if(l)throw a}}return o}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return Ka(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Ka(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Ka(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var Ja=function(e){var t,r,a,o=e.updateTags,i=e.selectedTags,l=e.direction,c=Ha().availableTags.filter((function(e){return!i.includes(e)})),u=Wa((0,n.useState)(c),2),s=u[0],f=u[1],p=(0,za.Kb)({items:s,onSelectedItemChange:function(e){var t=e.inputValue;t.trim()&&(o("add",t.trim()),w())},onInputValueChange:function(e){var t=e.inputValue;f(c.filter((function(e){return e.toLowerCase().startsWith(t.trim().toLowerCase())})))}}),d=p.isOpen,h=p.getMenuProps,y=p.getInputProps,g=p.getComboboxProps,b=p.getToggleButtonProps,v=p.highlightedIndex,E=p.getItemProps,w=p.reset,_=p.inputValue,S=function(){_.trim()&&(o("add",_.trim()),w())};return n.createElement("li",Za({},g(),{className:"tags-select__tag tags-select__tag--input"}),n.createElement("input",Za({type:"text",className:"tags-select__tag-name",id:"tags-select-new-tag"},y(),{onKeyUp:function(e){if("Enter"===e.key)S()}})),n.createElement("button",{type:"button",className:"tags-select__button tags-select__button--add tags-select__button--only-touch",onClick:S},n.createElement(N,{name:"add"})),n.createElement("button",Za({type:"button",className:"tags-select__combo-box-toggle-button"},b(),{"aria-label":"toggle tag select menu"}),n.createElement(N,{name:"arrowdown"})),n.createElement("ul",Za({},h(),{className:m()("tags-select__combo-box-list",(t={"tags-select__combo-box-list--open":d},r="tags-select__combo-box-list--".concat(l),a=l,r in t?Object.defineProperty(t,r,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[r]=a,t))}),d&&s.map((function(e,t){return n.createElement("li",Za({className:m()("tags-select__combo-box-item",{"tags-select__combo-box-item--selected":v===t}),key:"".concat(e).concat(t)},E({item:e,index:t})),e)}))))};Ja.propTypes={updateTags:g().func.isRequired,selectedTags:g().array.isRequired,direction:g().string.isRequired};var Ya=Ja;function Qa(e){return function(e){if(Array.isArray(e))return Xa(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return Xa(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Xa(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Xa(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var eo=function(e){var t=e.label,r=e.tags,a=e.updateTags,o=e.listDirection,i=(0,Ua.Z)([].concat(Qa(r.initial),Qa(r.add)));return n.createElement(n.Fragment,null,t?n.createElement("label",{className:"tags-select__label",htmlFor:"tags-select-new-tag"},t):null,n.createElement("ul",{className:"tags-select"},i.map((function(e){return n.createElement("li",{className:m()("tags-select__tag",{"tags-select__tag--add":r.add.includes(e),"tags-select__tag--remove":r.remove.includes(e)}),key:e},n.createElement("span",{className:"tags-select__tag-name"},e===p.oJ?"❤️":e),n.createElement("button",{type:"button",className:"tags-select__button tags-select__button--remove",onClick:function(){return a("remove",e)}},n.createElement(N,{name:"remove"})),n.createElement("button",{type:"button",className:"tags-select__button tags-select__button--add",onClick:function(){return a("add",e)}},n.createElement(N,{name:"add"})))})),n.createElement(Ya,{updateTags:a,selectedTags:i,direction:o})))};eo.propTypes={tags:g().shape({initial:g().array.isRequired,add:g().array.isRequired,remove:g().array.isRequired}).isRequired,updateTags:g().func.isRequired,label:g().string,listDirection:g().string},eo.defaultProps={label:null,listDirection:"down"};var to=eo;function ro(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==r)return;var n,a,o=[],i=!0,l=!1;try{for(r=r.call(e);!(i=(n=r.next()).done)&&(o.push(n.value),!t||o.length!==t);i=!0);}catch(e){l=!0,a=e}finally{try{i||null==r.return||r.return()}finally{if(l)throw a}}return o}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return no(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return no(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function no(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}window.dayjs=v();var ao=function(e,t){var r=v()(e),a=ro((0,n.useState)(e?r.format(f.k3):""),2),o=a[0],i=a[1],l=ro((0,n.useState)(e?r.format(f.Z6):""),2),c=l[0],u=l[1];return[o,c,i,u,function(n){var a=ro(n.split("-"),3),o=a[0],l=a[1],c=a[2],u=parseInt(o,10),s=parseInt(l,10),m=parseInt(c,10);if(isNaN(u)||isNaN(s)||isNaN(m))i(r.format(f.k3));else{var p=v()(e).date(c).month(l-1).year(o);t(p.format(f.vc))}},function(n){var a=ro(n.split(":"),2),o=a[0],l=a[1],c=parseInt(o,10),u=parseInt(l,10);if(isNaN(c)||isNaN(u))i(r.format(f.Z6));else{var s=v()(e).hour(o).minute(l);t(s.format(f.vc))}}]};function oo(e){return function(e){if(Array.isArray(e))return mo(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||so(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function io(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function lo(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?io(Object(r),!0).forEach((function(t){co(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):io(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function co(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function uo(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==r)return;var n,a,o=[],i=!0,l=!1;try{for(r=r.call(e);!(i=(n=r.next()).done)&&(o.push(n.value),!t||o.length!==t);i=!0);}catch(e){l=!0,a=e}finally{try{i||null==r.return||r.return()}finally{if(l)throw a}}return o}(e,t)||so(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function so(e,t){if(e){if("string"==typeof e)return mo(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?mo(e,t):void 0}}function mo(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var fo=[{value:0,label:"0°"},{value:1,label:"90°"},{value:2,label:"180°"},{value:3,label:"270°"}],po=function(e){var t=e.created,r=e.hash,a=e.hashes,o=e.updatecreated,i=e.meta,l=e.rotation,c=e.updateRotation,u=uo(ao(t,o),6),s=u[0],f=u[1],p=u[2],d=u[3],h=u[4],y=u[5],g=lo(lo({},i),{},{hash:r}),b=Object.keys(g).reduce((function(e,t){var r=g[t];"number"!=typeof r&&"string"!=typeof r&&(r=JSON.stringify(r));var n={key:t,value:r};return[].concat(oo(e),[n])}),[]);if(a){var v=["r","g","b","n"].map((function(e){return a[e]?{key:"hash ".concat(e),value:a[e]}:null})).filter(Boolean);b.push.apply(b,oo(v))}return n.createElement("div",{className:"image-meta-form"},n.createElement("div",{className:"image-meta-form__datetime"},n.createElement("label",{className:"image-meta-form__label image-meta-form__label--date"},n.createElement("span",{className:"image-meta-form__label-text"},"Edit Date"),n.createElement("input",{type:"date",className:"image-meta-form__date",value:s,onChange:function(e){var t=e.target.value;p(t)},onBlur:function(e){var t=e.target.value;h(t)}})),n.createElement("label",{className:"image-meta-form__label image-meta-form__label--time"},n.createElement("span",{className:"image-meta-form__label-text"},"Edit Time"),n.createElement("input",{type:"time",className:"image-meta-form__date",value:f,onChange:function(e){var t=e.target.value;d(t)},onBlur:function(e){var t=e.target.value;y(t)}}))),n.createElement("div",{className:"image-meta-form__rotation"},n.createElement("span",{className:"image-meta-form__label-text"},"Edit Rotation"),n.createElement("div",{className:"inputgroup buttongroup"},fo.map((function(e){var t=e.value,r=e.label;return n.createElement("button",{key:r,type:"button",className:m()("button image-meta-form__rotation-button",{"button--active":t===(l||0)}),onClick:function(){c(t)}},r)})))),n.createElement("table",{className:"image-meta-form__meta-table"},n.createElement("tbody",null,b.map((function(e){var t=e.key,r=e.value;return n.createElement("tr",{key:t},n.createElement("td",{className:"image-meta-form__meta-cell image-meta-form__meta-cell--key"},t),n.createElement("td",{className:"image-meta-form__meta-cell image-meta-form__meta-cell--value"},r))})))))};po.propTypes={created:g().string,hash:g().string.isRequired,hashes:g().object,updatecreated:g().func.isRequired,meta:g().object,rotation:g().number,updateRotation:g().func.isRequired},po.defaultProps={created:null,meta:{},rotation:null,hashes:null};var ho=po;function yo(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==r)return;var n,a,o=[],i=!0,l=!1;try{for(r=r.call(e);!(i=(n=r.next()).done)&&(o.push(n.value),!t||o.length!==t);i=!0);}catch(e){l=!0,a=e}finally{try{i||null==r.return||r.return()}finally{if(l)throw a}}return o}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return go(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return go(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function go(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var bo=function(e){var t=yo((0,n.useState)(0),2),r=t[0],a=t[1],o=function(e){return function(){a(e)}};return n.createElement("div",{className:"edit-image-tabs"},n.createElement("ul",{className:"edit-image-tabs__list",style:{marginLeft:"-".concat(100*r,"%")}},n.createElement("li",{className:m()("edit-image-tabs__tab",{"edit-image-tabs__tab--active":0===r}),onFocus:o(0),onClick:o(0)},e.paletteRGBN?n.createElement(n.Fragment,null,n.createElement("button",{type:"button",className:"edit-image-tabs__button"},"Edit Greytones"),n.createElement(Fa,{values:e.paletteRGBN,onChange:e.updatePalette,useChannels:{r:!!e.hashes.r,g:!!e.hashes.g,b:!!e.hashes.b,n:!!e.hashes.n}})):n.createElement(n.Fragment,null,n.createElement("button",{type:"button",className:"edit-image-tabs__button"},"Select Palette"),n.createElement(Ma,{value:e.paletteShort,invertPalette:e.invertPalette,onChange:e.updatePalette,updateInvertPalette:e.updateInvertPalette}))),e.regularImage?n.createElement("li",{className:m()("edit-image-tabs__tab",{"edit-image-tabs__tab--active":1===r}),onFocus:o(1),onClick:o(1)},n.createElement("button",{type:"button",className:"edit-image-tabs__button"},"Select Frame"),n.createElement(ga,{updateFrame:e.updateFrame,updateFrameLock:e.updateFrameLock,frame:e.frame||"",lockFrame:e.lockFrame})):null,n.createElement("li",{className:m()("edit-image-tabs__tab",{"edit-image-tabs__tab--active":2===r}),onFocus:o(e.regularImage?2:1),onClick:o(e.regularImage?2:1)},n.createElement("button",{type:"button",className:"edit-image-tabs__button"},"Tags"),n.createElement(to,{updateTags:e.updateTags,tags:e.tags})),n.createElement("li",{className:m()("edit-image-tabs__tab",{"edit-image-tabs__tab--active":3===r}),onFocus:o(e.regularImage?3:2),onClick:o(e.regularImage?3:2)},n.createElement("button",{type:"button",className:"edit-image-tabs__button"},"Misc"),n.createElement(ho,{created:e.created,hash:e.hash,hashes:e.hashes,updatecreated:e.updateCreated,meta:e.meta,rotation:e.rotation,updateRotation:e.updateRotation}))))};bo.propTypes={hash:g().string.isRequired,hashes:g().object,created:g().string,paletteShort:g().string,paletteRGBN:g().object,invertPalette:g().bool.isRequired,frame:g().string,tags:g().shape({initial:g().array.isRequired,add:g().array.isRequired,remove:g().array.isRequired}).isRequired,regularImage:g().bool.isRequired,lockFrame:g().bool.isRequired,updateCreated:g().func.isRequired,updatePalette:g().func.isRequired,updateInvertPalette:g().func.isRequired,updateTags:g().func.isRequired,updateFrame:g().func.isRequired,updateFrameLock:g().func.isRequired,updateRotation:g().func.isRequired,meta:g().object,rotation:g().number},bo.defaultProps={hashes:null,paletteShort:"",paletteRGBN:null,frame:null,created:null,meta:null,rotation:null};var vo=bo;function Eo(e){return function(e){if(Array.isArray(e))return wo(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return wo(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return wo(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function wo(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var _o=function(e,t){var r=t.mode,n=t.tag;switch(r){case"add":return{add:[].concat(Eo(e.add),[n]),remove:Eo(e.remove.filter((function(e){return e!==n})))};case"remove":return{remove:[].concat(Eo(e.remove),[n]),add:Eo(e.add.filter((function(e){return e!==n})))};default:return{}}};function So(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function No(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?So(Object(r),!0).forEach((function(t){xo(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):So(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function xo(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function ko(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==r)return;var n,a,o=[],i=!0,l=!1;try{for(r=r.call(e);!(i=(n=r.next()).done)&&(o.push(n.value),!t||o.length!==t);i=!0);}catch(e){l=!0,a=e}finally{try{i||null==r.return||r.return()}finally{if(l)throw a}}return o}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return Oo(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Oo(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Oo(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var jo=function(e){var t=ko((0,n.useState)(e.title),2),r=t[0],a=t[1],o=ko((0,n.useState)(e.created),2),i=o[0],l=o[1],c=ko((0,n.useState)(e.frame),2),u=c[0],s=c[1],m=ko((0,n.useState)(e.lockFrame),2),f=m[0],p=m[1],d=ko((0,n.useState)(e.rotation),2),h=d[0],y=d[1],g=ko((0,n.useState)(e.invertPalette),2),b=g[0],v=g[1],E=ko((0,n.useState)(e.paletteShort),2),w=E[0],_=E[1],S=ko((0,n.useState)(e.paletteRGBN),2),N=S[0],x=S[1],k=ko((0,n.useState)(!0),2),O=k[0],j=k[1],P=ko((0,n.useState)({initial:e.tags,add:[],remove:[]}),2),I=P[0],A=P[1],R=ko((0,n.useState)(!!e.batch&&{created:!1,title:!1,palette:!1,invertPalette:!1,frame:!1,lockFrame:!1,tags:!1,rotation:!1}),2),C=R[0],F=R[1];if(!e.hash)return null;var T=w?e.findPalette(w).palette:N,q=function(e){return e?[e.created?"date":null,e.title?"title":null,e.palette?"palette":null,e.invertPalette?"invertPalette":null,e.frame?"frame":null,e.lockFrame?"framePalette":null,e.tags?"tags":null,e.rotation?"rotation":null].filter(Boolean).join(", "):""}(C),L=function(e,t){return function(r){F(No(No({},C),{},xo({},e,!0))),t(r)}};return n.createElement(ln,{height:e.height,className:"edit-image",confirm:function(){return e.save({batch:!!e.batch&&C,tagChanges:I},{hash:e.hash,title:r,created:i,frame:u,invertPalette:b,lockFrame:f,palette:w||N,rotation:h})},deny:e.cancel},n.createElement("label",{className:"edit-image__header"},n.createElement("input",{className:"edit-image__header-edit",placeholder:"Add a title",value:r,onChange:function(e){var t=e.target.value;L("title",a)(t)}})),e.batch?n.createElement("span",{className:"edit-image__title-hint"},"Use %n (or %nn, %nnn, ...) to add an index to the image titles"):null,n.createElement(Z,{lockFrame:f,invertPalette:b,palette:T,frameId:u,hash:e.hash,hashes:e.hashes,rotation:h,reportTileCount:function(e){j(360===e)}}),e.batch?n.createElement("div",{className:"edit-image__batch-warn",style:T?{borderLeftColor:T[1],borderTopColor:T[1],backgroundColor:T[2],borderRightColor:T[3],borderBottomColor:T[3],color:T[0]}:null},"You are editing ".concat(e.batch," images"),q?n.createElement("p",{className:"edit-image__batch-update-list"},"Will update: ".concat(q)):null):null,n.createElement(vo,{created:i,updateCreated:L("created",l),regularImage:O,lockFrame:f,hash:e.hash,hashes:e.hashes,paletteShort:w,paletteRGBN:N,invertPalette:b,frame:u,tags:I,meta:e.meta,rotation:h,updatePalette:function(e,t){t&&F(No(No({},C),{},{palette:!0})),w?_(e):x(e)},updateInvertPalette:L("invertPalette",v),updateFrame:L("frame",s),updateFrameLock:L("lockFrame",p),updateRotation:L("rotation",y),updateTags:function(e,t){F(No(No({},C),{},{tags:!0})),A(No(No({},I),_o(I,{mode:e,tag:t})))}}))};jo.propTypes={batch:g().number.isRequired,created:g().string,cancel:g().func.isRequired,hash:g().string,hashes:g().object,paletteShort:g().string,paletteRGBN:g().object,invertPalette:g().bool.isRequired,lockFrame:g().bool.isRequired,frame:g().string,save:g().func.isRequired,tags:g().array.isRequired,title:g().string,height:g().number.isRequired,findPalette:g().func.isRequired,meta:g().object,rotation:g().number},jo.defaultProps={created:null,title:null,hash:null,hashes:null,paletteShort:null,paletteRGBN:null,frame:null,meta:null,rotation:null};var Po=ha(jo);function Io(e){return Io="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Io(e)}function Ao(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Ro(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Ao(Object(r),!0).forEach((function(t){Co(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Ao(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function Co(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Fo(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==r)return;var n,a,o=[],i=!0,l=!1;try{for(r=r.call(e);!(i=(n=r.next()).done)&&(o.push(n.value),!t||o.length!==t);i=!0);}catch(e){l=!0,a=e}finally{try{i||null==r.return||r.return()}finally{if(l)throw a}}return o}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return To(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return To(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function To(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function qo(){qo=function(e,t){return new r(e,void 0,t)};var e=RegExp.prototype,t=new WeakMap;function r(e,n,a){var o=new RegExp(e,n);return t.set(o,a||t.get(e)),Lo(o,r.prototype)}function n(e,r){var n=t.get(r);return Object.keys(n).reduce((function(t,r){var a=n[r];if("number"==typeof a)t[r]=e[a];else{for(var o=0;void 0===e[a[o]]&&o+1<a.length;)o++;t[r]=e[a[o]]}return t}),Object.create(null))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Lo(e,t)}(r,RegExp),r.prototype.exec=function(t){var r=e.exec.call(this,t);return r&&(r.groups=n(r,this)),r},r.prototype[Symbol.replace]=function(r,a){if("string"==typeof a){var o=t.get(this);return e[Symbol.replace].call(this,r,a.replace(/\$<([^>]+)>/g,(function(e,t){return"$"+o[t]})))}if("function"==typeof a){var i=this;return e[Symbol.replace].call(this,r,(function(){var e=arguments;return"object"!=Io(e[e.length-1])&&(e=[].slice.call(e)).push(n(e,i)),a.apply(this,e)}))}return e[Symbol.replace].call(this,r,a)},qo.apply(this,arguments)}function Lo(e,t){return Lo=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},Lo(e,t)}var Do=function(e){var t,r,a=e.id,o=(0,u.v9)((function(e){return e.frames})),i=(0,u.v9)((function(e){return e.frameGroupNames})),l=(0,Et.Z)(o,i),c=qo(/^([a-z]+)([0-9]+)/g,{groupName:1,id:2}),s=(0,u.I0)(),m=c.exec(e.id),f=(null==m||null===(t=m.groups)||void 0===t?void 0:t.groupName)||"",p=(null==m||null===(r=m.groups)||void 0===r?void 0:r.id)||"0",h=Fo((0,n.useState)(f),2),y=h[0],g=h[1],b=Fo((0,n.useState)(parseInt(p,10)),2),v=b[0],E=b[1],w=Fo((0,n.useState)(e.name),2),_=w[0],S=w[1],N="".concat(y).concat(v.toString(10).padStart(2,"0")),x=N===a||!o.find((function(e){return N===e.id})),k=Boolean(y.match(/^[a-z]{2,}$/g)),O=v>0;return{cancelEdit:function(){s({type:d.po})},saveFrame:function(){s({type:d.wA,payload:{updateId:a,data:Ro(Ro({},e),{},{id:N,name:_})}})},groups:l,updateId:a,fullId:N,frameIndex:v,setFrameIndex:function(e){return E(parseInt(e,10))},frameGroup:y,setFrameGroup:g,frameName:_,setFrameName:S,idValid:x,formValid:x&&k&&O,groupIdValid:k,frameIndexValid:O}};function Bo(e){var t=e.frameIndex,r=e.setFrameIndex,a=e.frameName,o=e.setFrameGroup,i=e.setFrameName,l=e.idValid,c=e.groupIdValid,u=e.frameIndexValid,s=e.frameGroup,m=e.groups,f=e.fullId,p=e.frameGroupName,d=e.setFrameGroupName,h=Boolean(m.find((function(e){var t=e.id;return s===t})));return n.createElement(n.Fragment,null,n.createElement("div",{className:"inputgroup"},n.createElement("label",{htmlFor:"frame-edit-group",className:"inputgroup__label"},"Frame group"),n.createElement("select",{id:"frame-edit-group",className:"inputgroup__input inputgroup__input--select",value:s,onChange:function(e){o(e.target.value)}},n.createElement("option",{value:""},h?"Select frame group":"New frame group"),m.map((function(e){var t=e.id,r=e.name;return n.createElement("option",{value:t,key:t},r)})))),n.createElement(Ge,{id:"frame-edit-new-group",labelText:h?"Frame group id":"New frame group id",type:"text",value:s,onChange:o},c?null:n.createElement("span",{className:"inputgroup__note inputgroup__note--warn"},"Must have at least two characters, only lowercase")),d?n.createElement(Ge,{id:"frame-edit-new-group-name",labelText:"New frame group name",disabled:h,type:"text",value:h?"":p,onChange:d}):null,n.createElement(Ge,{id:"frame-edit-index",labelText:"Frame Index",type:"number",min:1,max:99,value:t,onChange:r},u?null:n.createElement("span",{className:"inputgroup__note inputgroup__note--warn"},"Integer, must be greater 0")),n.createElement(Ge,{id:"frame-edit-shortname",labelText:"Frame name",type:"text",value:a,onChange:i}),n.createElement("p",{className:"edit-frame__warning"},l?" ":'Specified frame index/identifier "'.concat(f,'" is already in use, please try another one.')))}Bo.propTypes={frameIndex:g().number.isRequired,setFrameIndex:g().func.isRequired,frameName:g().string.isRequired,setFrameGroup:g().func.isRequired,setFrameName:g().func.isRequired,idValid:g().bool.isRequired,groupIdValid:g().bool.isRequired,frameIndexValid:g().bool.isRequired,frameGroup:g().string.isRequired,groups:g().array.isRequired,fullId:g().string.isRequired,frameGroupName:g().string,setFrameGroupName:g().func},Bo.defaultProps={frameGroupName:"",setFrameGroupName:null};var Mo=Bo,zo=function(){var e=(0,u.v9)((function(e){return e.frames.find((function(t){return t.id===e.editFrame}))})),t=Do(e),r=t.cancelEdit,a=t.saveFrame,o=t.updateId,i=t.fullId,l=t.formValid,c=t.groups,s=t.frameGroup,m=t.frameIndex,f=t.setFrameIndex,p=t.frameName,d=t.setFrameGroup,h=t.setFrameName,y=t.idValid,g=t.groupIdValid,b=t.frameIndexValid,v=o!==i?' -> "'.concat(i,'"'):"";return n.createElement(ln,{className:"edit-frame",confirm:a,canConfirm:l,header:'Editing frame "'.concat(o,'"').concat(v),deny:r,denyOnOverlayClick:!1},n.createElement("div",{className:"edit-frame__content"},n.createElement(Mo,{frameIndex:m,setFrameIndex:f,frameName:p,setFrameGroup:d,setFrameName:h,idValid:y,groupIdValid:g,frameIndexValid:b,frameGroup:s,groups:c,fullId:i})))},Uo=r(49965),Go=r(81451);function Vo(e){return function(e){if(Array.isArray(e))return $o(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return $o(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return $o(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function $o(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var Ho=function(e){return e&&!e.hashes},Zo=(0,Go.Z)("hash"),Wo=function(e){return function(){var t=e.imageSelection.map((function(t){return e.images.find((function(e){return e.hash===t}))})).filter(Ho),r=t.length>1?[]:(0,me.Z)(e).filter(Ho),n=t.length+r.length>1?[]:Vo(e.images).map(Uo.Np).sort((0,Uo.$b)({sortBy:e.sortBy})).map(Uo.fD).filter(Ho),a=Zo([t.shift(),r.shift(),n.shift(),n.pop(),r.pop(),t.pop()].filter(Boolean));return[a.shift(),a.pop()].filter(Boolean)}},Ko=(0,u.$j)((function(e){return{shortName:e.editPalette.shortName,palette:e.editPalette.palette||[],name:e.editPalette.name||"",getPreviewImages:Wo(e),shortNameIsValid:function(t){return!!t.match(/^[a-z]+[a-z0-9]*$/gi)&&-1===e.palettes.findIndex((function(e){return e.shortName===t}))}}}),(function(e){return{savePalette:function(t){e({type:d.$e,payload:t})},cancelEditPalette:function(){e({type:d.iM})}}}));function Jo(e){return function(e){if(Array.isArray(e))return Xo(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||Qo(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Yo(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==r)return;var n,a,o=[],i=!0,l=!1;try{for(r=r.call(e);!(i=(n=r.next()).done)&&(o.push(n.value),!t||o.length!==t);i=!0);}catch(e){l=!0,a=e}finally{try{i||null==r.return||r.return()}finally{if(l)throw a}}return o}(e,t)||Qo(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Qo(e,t){if(e){if("string"==typeof e)return Xo(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?Xo(e,t):void 0}}function Xo(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var ei=function(e){var t=e.palette,r=e.shortName,a=e.name,o=e.shortNameIsValid,i=e.savePalette,l=e.cancelEditPalette,c=e.getPreviewImages,u=r===p.VP,s=Yo((0,n.useState)(a),2),m=s[0],f=s[1],d=Yo((0,n.useState)(t),2),h=d[0],y=d[1],g=Yo((0,n.useState)(u?"":r),2),b=g[0],v=g[1],E=Yo((0,n.useState)([]),2),w=E[0],_=E[1];return(0,n.useEffect)((function(){_(c())}),[c]),r?n.createElement(ln,{className:"edit-palette",confirm:function(){return i({shortName:u?b:r,name:m,palette:h,origin:""})},canConfirm:!u||o(b),deny:function(){return l()},denyOnOverlayClick:!1},n.createElement("label",{className:"edit-palette__header"},n.createElement("input",{className:"edit-palette__header-edit",placeholder:"Add a title",value:m,onChange:function(e){f(e.target.value)}})),n.createElement("div",{className:"edit-palette__content"},n.createElement(Ge,{id:"palette-edit-shortname",labelText:"ID/Short name",type:"text",value:b,disabled:!u,onChange:function(e){v(e.toLowerCase())}}),n.createElement("ul",{className:"edit-palette__previews"},w.map((function(e){return n.createElement("li",{className:"edit-palette__preview-image",key:e.hash},n.createElement(Z,{hash:e.hash,invertPalette:!1,lockFrame:!1,palette:h}))}))),h.map((function(e,t){return n.createElement(Ge,{key:t,id:"palette-color-".concat(t),labelText:"Color ".concat(t+1),type:"color",value:e,onChange:function(e){var r=Jo(h);r[t]=e,y(r)}})})))):null};ei.propTypes={shortName:g().string,shortNameIsValid:g().func.isRequired,palette:g().arrayOf(g().string).isRequired,name:g().string.isRequired,savePalette:g().func.isRequired,cancelEditPalette:g().func.isRequired,getPreviewImages:g().func.isRequired},ei.defaultProps={shortName:null};var ti=Ko(ei);function ri(e){return function(e){if(Array.isArray(e))return ni(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return ni(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return ni(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ni(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var ai=(0,u.$j)((function(e){return{imageCount:e.videoParams.imageSelection?e.videoParams.imageSelection.length:0,scaleFactor:e.videoParams.scaleFactor||ri(e.exportScaleFactors).pop()||4,frameRate:e.videoParams.frameRate||12,yoyo:e.videoParams.yoyo||!1,reverse:e.videoParams.reverse||!1,lockFrame:e.videoParams.lockFrame||!1,invertPalette:e.videoParams.invertPalette||!1,frame:e.videoParams.frame||"",exportFrameMode:e.videoParams.exportFrameMode||"keep",palette:e.videoParams.palette||""}}),(function(e){return{update:function(t){e({type:d.xG,payload:t})},cancel:function(){e({type:d.Xb})},animate:function(){e({type:d.B4})}}})),oi=[{id:"keep",name:"Keep frame"},{id:"crop",name:"Crop frame"},{id:"square_black",name:"Make image squared (add black)"},{id:"square_white",name:"Make image squared (add white)"},{id:"square_smart",name:"Make image squared (smart - repeats first/last line - works in most cases...)"}];function ii(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==r)return;var n,a,o=[],i=!0,l=!1;try{for(r=r.call(e);!(i=(n=r.next()).done)&&(o.push(n.value),!t||o.length!==t);i=!0);}catch(e){l=!0,a=e}finally{try{i||null==r.return||r.return()}finally{if(l)throw a}}return o}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return li(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return li(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function li(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var ci=function(e){var t=e.update,r=e.cancel,a=e.imageCount,o=e.animate,i=ii((0,n.useState)(e.frameRate),2),l=i[0],c=i[1],u=ii((0,n.useState)(e.scaleFactor),2),s=u[0],f=u[1],p=ii((0,n.useState)(e.palette),2),d=p[0],h=p[1],y=ii((0,n.useState)(e.invertPalette),2),g=y[0],b=y[1],v=ii((0,n.useState)(e.yoyo),2),E=v[0],w=v[1],_=ii((0,n.useState)(e.reverse),2),S=_[0],x=_[1],k=ii((0,n.useState)(e.frame),2),O=k[0],j=k[1],P=ii((0,n.useState)(e.lockFrame),2),I=P[0],A=P[1],R=ii((0,n.useState)(e.exportFrameMode),2),C=R[0],F=R[1];return(0,n.useEffect)((function(){var e={frameRate:Math.min(120,Math.max(1,parseInt(l,10))),scaleFactor:Math.min(12,Math.max(1,parseInt(s,10))),palette:d,invertPalette:g,yoyo:E,reverse:S,frame:O,lockFrame:I,exportFrameMode:C};t(e)}),[l,s,d,g,E,S,O,I,C,t]),a?n.createElement(ln,{className:"video-params",confirm:o,deny:r,header:"Create an animated GIF with ".concat(a," frames")},n.createElement(Ge,{id:"video-params-frameRate",labelText:"Framerate",type:"number",min:1,max:120,value:l,onChange:c}),n.createElement(Ge,{id:"video-params-scaleFactor",labelText:"Scale GIF",type:"number",min:1,max:12,value:s,onChange:f}),n.createElement("label",{className:m()("video-params__check-label",{"video-params__check-label--checked":E}),title:"Enable Yoyo-Effect (loop back to the beginning)"},n.createElement("input",{type:"checkbox",className:"video-params__checkbox",checked:E,onChange:function(e){w(e.target.checked)}}),n.createElement(N,{name:"checkmark"}),n.createElement("span",{className:"video-params__check-label-text"},"Yoyo-Effect")),n.createElement("label",{className:m()("video-params__check-label",{"video-params__check-label--checked":S}),title:"Reverse animation direction"},n.createElement("input",{type:"checkbox",className:"video-params__checkbox",checked:S,onChange:function(e){x(e.target.checked)}}),n.createElement(N,{name:"checkmark"}),n.createElement("span",{className:"video-params__check-label-text"},"Reverse Direction")),n.createElement("div",{className:"video-params__select-label"},"Palette"),n.createElement(Ma,{noFancy:!0,allowEmpty:!0,value:d,invertPalette:g,onChange:h,updateInvertPalette:b}),n.createElement("label",{htmlFor:"settings-handle-export-frames",className:"video-params__select-label"},"How to handle frames when exporting images"),n.createElement("select",{id:"settings-handle-export-frames",className:"video-params__frameexport-select",value:C,onChange:function(e){F(e.target.value)}},oi.map((function(e){var t=e.id,r=e.name;return n.createElement("option",{value:t,key:t},r)}))),"crop"===C?null:n.createElement(n.Fragment,null,n.createElement("div",{className:"video-params__select-label"},"Frame"),n.createElement(ga,{frame:O,lockFrame:I,noFrameOption:"As selected per image",updateFrame:j,updateFrameLock:A}))):null};ci.propTypes={imageCount:g().number.isRequired,frameRate:g().number.isRequired,scaleFactor:g().number.isRequired,palette:g().string.isRequired,invertPalette:g().bool.isRequired,yoyo:g().bool.isRequired,reverse:g().bool.isRequired,lockFrame:g().bool.isRequired,exportFrameMode:g().string.isRequired,frame:g().string.isRequired,cancel:g().func.isRequired,animate:g().func.isRequired,update:g().func.isRequired};var ui=ai(ci),si=r(16717),mi=(0,u.$j)((function(e){var t,r,n=(0,me.Z)(e),a=n.find((function(t,r){return r===e.lightboxImage}));return a?(a.hashes?(t=a.palette,r=(0,si.Z)(e,a.hashes,a.frame)):(t=e.palettes.find((function(e){return e.shortName===a.palette})),r=null),{hash:a.hash,title:a.title,created:a.created,hashes:a.hashes,frame:a.frame,isFullscreen:e.isFullscreen,palette:t,frames:r,lightboxIndex:e.lightboxImage,size:n.length||0,lockFrame:a.lockFrame||!1,invertPalette:a.invertPalette||!1,preferredLocale:e.preferredLocale,rotation:a.rotation||null}):{isFullscreen:!1,lockFrame:!1,invertPalette:!1,lightboxIndex:0,size:0}}),(function(e){return{close:function(){e({type:d.vR,payload:null})},prev:function(){e({type:d.$$})},next:function(){e({type:d.BH})},fullscreen:function(){e({type:d.CQ})}}})),fi=function(e){var t=e.close,r=e.title,a=e.isFullscreen,o=e.fullscreen,i=e.lockFrame,l=e.invertPalette,c=e.palette,u=e.frame,s=e.frames,m=e.hash,p=e.hashes,d=e.prev,h=e.lightboxIndex,y=e.size,g=e.next,b=e.created,E=e.preferredLocale,w=e.rotation;return n.createElement(ln,{className:"lightbox-image",deny:t},n.createElement("label",{className:"lightbox-image__title"},r),a?null:n.createElement("button",{type:"button",className:"lightbox-image__button lightbox-image__button--fullscreen",onClick:o},n.createElement(N,{name:"fullscreen"})),n.createElement("button",{type:"button",className:"lightbox-image__button lightbox-image__button--close",onClick:t},n.createElement(N,{name:"close"})),n.createElement(Z,{lockFrame:i,invertPalette:l,palette:(null==c?void 0:c.palette)||c,frameId:u,frames:s,hash:m,hashes:p,rotation:w}),n.createElement("div",{className:"lightbox-image__navigation"},h>0?n.createElement("button",{type:"button",className:"lightbox-image__button lightbox-image__button--left",onClick:d},n.createElement(N,{name:"left"})):null,h<y-1?n.createElement("button",{type:"button",className:"lightbox-image__button lightbox-image__button--right",onClick:g},n.createElement(N,{name:"right"})):null),n.createElement("div",{className:"lightbox-image__created"},(0,T.Z)(v()(b,f.vc),E)))};fi.propTypes={created:g().string,hash:g().string,hashes:g().object,palette:g().object,invertPalette:g().bool.isRequired,frame:g().string,frames:g().object,lockFrame:g().bool.isRequired,title:g().string,close:g().func.isRequired,prev:g().func.isRequired,next:g().func.isRequired,fullscreen:g().func.isRequired,isFullscreen:g().bool.isRequired,lightboxIndex:g().number.isRequired,size:g().number.isRequired,preferredLocale:g().string,rotation:g().number},fi.defaultProps={created:null,hash:null,hashes:null,palette:null,title:null,frame:null,frames:null,preferredLocale:null,rotation:null};var pi=mi(fi),di=function(){var e=(0,u.v9)((function(e){return{hashes:{r:e.rgbnImages.r,g:e.rgbnImages.g,b:e.rgbnImages.b,n:e.rgbnImages.n},frames:(0,si.Z)(e,e.rgbnImages,null)}})),t=e.hashes,r=e.frames;return n.createElement("div",{className:m()("rgbn-image",{"rgbn-image--has-tiles":t.r||t.g||t.b||t.n})},n.createElement(Z,{lockFrame:!1,invertPalette:!1,palette:f.q1,frames:r,hash:"newRGBN",hashes:t}),n.createElement(I,{hash:"newRGBN",buttons:["saveRGBNImage"],isFavourite:!1}))},hi=function(){return(0,u.v9)((function(e){return e.dragover}))?n.createElement("div",{className:"drag-over"}):null},yi=(0,u.$j)((function(e){return{activeTags:e.filtersActiveTags,visible:e.filtersVisible}}),(function(e){return{setActiveTags:function(t){e({type:d.OD,payload:t})},hideFilters:function(t){e({type:d.j6,payload:t})}}})),gi=function(e){var t=e.tagActive,r=e.toggleTag,a=e.title,o=e.icon;return n.createElement("li",{title:a,className:m()("filter-form__tag",{"filter-form__tag--active":t})},n.createElement("button",{className:"filter-form__tag-button",type:"button",onClick:function(){return r(t?"remove":"add")}},n.createElement(N,{name:o}),n.createElement("span",{className:"filter-form__tag-text"},a)))};gi.propTypes={title:g().string.isRequired,tagActive:g().bool.isRequired,toggleTag:g().func.isRequired,icon:g().string},gi.defaultProps={icon:"checkmark"};var bi=gi;function vi(e){return function(e){if(Array.isArray(e))return _i(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||wi(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Ei(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==r)return;var n,a,o=[],i=!0,l=!1;try{for(r=r.call(e);!(i=(n=r.next()).done)&&(o.push(n.value),!t||o.length!==t);i=!0);}catch(e){l=!0,a=e}finally{try{i||null==r.return||r.return()}finally{if(l)throw a}}return o}(e,t)||wi(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function wi(e,t){if(e){if("string"==typeof e)return _i(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?_i(e,t):void 0}}function _i(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var Si=function(e){var t=Ei((0,n.useState)(e.activeTags),2),r=t[0],a=t[1],o=Ha().availableTags;(0,n.useEffect)((function(){a(e.activeTags)}),[e.activeTags]);var i=function(e,t){a("add"===t?(0,Ua.Z)([].concat(vi(r),[e])):r.filter((function(t){return t!==e})))};return e.visible?n.createElement(ln,{className:"filter-form",confirm:function(){return e.setActiveTags(r)},deny:function(){return e.hideFilters()},header:"Select Filters"},n.createElement("span",{className:"filter-form__hint"},"If set, all must be met"),n.createElement("ul",{className:"filter-form__tag-list"},n.createElement(bi,{title:"Untagged",tagActive:r.includes(p.Dh),toggleTag:function(e){return i(p.Dh,e)}}),n.createElement(bi,{title:"❤️ Favourite",tagActive:r.includes(p.oJ),toggleTag:function(e){return i(p.oJ,e)}}),n.createElement(bi,{title:"New",tagActive:r.includes(p.TZ),toggleTag:function(e){return i(p.TZ,e)}}),n.createElement(bi,{title:"Monochrome",tagActive:r.includes(p.z2),toggleTag:function(e){return i(p.z2,e)}}),n.createElement(bi,{title:"RGB",tagActive:r.includes(p.ee),toggleTag:function(e){return i(p.ee,e)}}),n.createElement(bi,{title:"Recent Imports",tagActive:r.includes(p.Vn),toggleTag:function(e){return i(p.Vn,e)}}),n.createElement(bi,{title:"Image has comments",tagActive:r.includes(p.Ul),toggleTag:function(e){return i(p.Ul,e)}}),n.createElement(bi,{title:"Image has username",tagActive:r.includes(p.R1),toggleTag:function(e){return i(p.R1,e)}})),n.createElement("ul",{className:"filter-form__tag-list filter-form__tag-list--clear"},n.createElement(bi,{title:"Clear Filters",tagActive:!1,icon:"delete",toggleTag:function(){a([])}})),n.createElement("span",{className:"filter-form__hint"},"If set, one must be met"),n.createElement("ul",{className:"filter-form__tag-list"},o.map((function(e){return n.createElement(bi,{key:e,title:e,tagActive:r.includes(e),toggleTag:function(t){return i(e,t)}})})))):null};Si.propTypes={visible:g().bool.isRequired,activeTags:g().array.isRequired,setActiveTags:g().func.isRequired,hideFilters:g().func.isRequired},Si.defaultProps={};var Ni=yi(Si);function xi(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==r)return;var n,a,o=[],i=!0,l=!1;try{for(r=r.call(e);!(i=(n=r.next()).done)&&(o.push(n.value),!t||o.length!==t);i=!0);}catch(e){l=!0,a=e}finally{try{i||null==r.return||r.return()}finally{if(l)throw a}}return o}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return ki(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return ki(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ki(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var Oi=(0,u.$j)((function(e){var t=xi(e.sortBy.split("_"),2),r=t[0],n=void 0===r?"":r,a=t[1],o=void 0===a?"":a;return{visible:e.sortOptionsVisible,sortBy:n,sortOrder:o}}),(function(e){return{setSortBy:function(t){e({type:d.bD,payload:t})},hideSortForm:function(){e({type:d.qJ})}}}));function ji(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==r)return;var n,a,o=[],i=!0,l=!1;try{for(r=r.call(e);!(i=(n=r.next()).done)&&(o.push(n.value),!t||o.length!==t);i=!0);}catch(e){l=!0,a=e}finally{try{i||null==r.return||r.return()}finally{if(l)throw a}}return o}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return Pi(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Pi(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Pi(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var Ii=[{title:"Title",key:"title"},{title:"Date",key:"created"},{title:"Palette",key:"palette"}],Ai=function(e){var t=ji((0,n.useState)(e.sortBy),2),r=t[0],a=t[1],o=ji((0,n.useState)(e.sortOrder),2),i=o[0],l=o[1];if((0,n.useEffect)((function(){a(e.sortBy),l(e.sortOrder)}),[a,l,e.visible,e.sortBy,e.sortOrder]),!e.visible)return null;var c=Ii.find((function(e){return e.key===r})),u="asc"===i?"ascending":"descending";return n.createElement(ln,{className:"sort-form",confirm:function(){return e.setSortBy("".concat(r,"_").concat(i))},deny:function(){e.hideSortForm()},header:"Sort by: ".concat(c.title,"/").concat(u)},n.createElement("ul",{className:"sort-form__list"},Ii.map((function(e){var t=e.key,o=e.title;return n.createElement("li",{key:t},n.createElement("button",{className:m()("sort-form__button",{"sort-form__button--selected":r===t}),type:"button",onClick:function(){return a(t)}},o))}))),n.createElement("ul",{className:"sort-form__list"},n.createElement("li",null,n.createElement("button",{className:m()("sort-form__button sort-form__button--order-asc",{"sort-form__button--selected":"asc"===i}),type:"button",onClick:function(){return l("asc")}},"Ascending")),n.createElement("li",null,n.createElement("button",{className:m()("sort-form__button sort-form__button--order-desc",{"sort-form__button--selected":"desc"===i}),type:"button",onClick:function(){return l("desc")}},"Descending"))))};Ai.propTypes={visible:g().bool.isRequired,sortBy:g().string.isRequired,sortOrder:g().string.isRequired,setSortBy:g().func.isRequired,hideSortForm:g().func.isRequired},Ai.defaultProps={};var Ri=Oi(Ai),Ci=(0,u.$j)((function(e){var t;return{repoUrl:"https://github.com/".concat(e.gitStorage.owner,"/").concat(e.gitStorage.repo,"/tree/").concat(e.gitStorage.branch),dropboxActive:!(!e.dropboxStorage.use||!e.dropboxStorage.accessToken),gitActive:!!(e.gitStorage.use&&e.gitStorage.owner&&e.gitStorage.repo&&e.gitStorage.branch&&e.gitStorage.throttle&&e.gitStorage.token),syncLastUpdate:e.syncLastUpdate,autoDropboxSync:(null===(t=e.dropboxStorage)||void 0===t?void 0:t.autoDropboxSync)||!1}}),(function(e){return{startSync:function(t,r){e({type:d.eP,payload:{storageType:t,direction:r}})},cancelSync:function(t,r){e({type:d.DU,payload:{storageType:t,direction:r}})}}})),Fi=function(e){var t=e.startSync,r=e.cancelSync,a=e.repoUrl,o=e.dropboxActive,i=e.gitActive,l=e.syncLastUpdate,c=e.autoDropboxSync&&l.local!==l.dropbox;return n.createElement(ln,{className:"sync-select",deny:r,header:"Synchronize"},n.createElement("ul",{className:"sync-select__list"},i&&n.createElement(n.Fragment,null,n.createElement("li",{className:"sync-select__option"},n.createElement("button",{type:"button",className:"sync-select__button button",title:"Synchronize to GitHub\n".concat(a),onClick:function(){t("git","up")}},n.createElement("span",{className:"sync-select__button-label"},"Synchronize to GitHub"),n.createElement(N,{name:"sync",className:"svg--180"}))),n.createElement("li",{className:"sync-select__option"},n.createElement("button",{type:"button",className:"sync-select__button button",title:"Synchronize from GitHub\n".concat(a),onClick:function(){t("git","down")}},n.createElement("span",{className:"sync-select__button-label"},"Synchronize from GitHub"),n.createElement(N,{name:"sync"})))),o&&n.createElement(n.Fragment,null,n.createElement("li",{className:"sync-select__option"},n.createElement("button",{type:"button",className:"sync-select__button button",title:"Synchronize to Dropbox",onClick:function(){t("dropbox","up")}},n.createElement("span",{className:"sync-select__button-label"},"Synchronize to Dropbox"),n.createElement(N,{name:"sync",className:"svg--180"}),c&&n.createElement("span",{className:m()("sync-select__button-hint",{"sync-select__button-hint--warn":l.local<l.dropbox})},l.local<l.dropbox?"There are pending remote changes. If you synchronize to dropbox now, these will be lost.":"Upload changes to dropbox"))),n.createElement("li",{className:"sync-select__option"},n.createElement("button",{type:"button",className:"sync-select__button button",title:"Synchronize from Dropbox",onClick:function(){t("dropbox","down")}},n.createElement("span",{className:"sync-select__button-label"},"Synchronize from Dropbox"),n.createElement(N,{name:"sync"}),c&&n.createElement("span",{className:m()("sync-select__button-hint",{"sync-select__button-hint--warn":l.local>l.dropbox})},l.local>l.dropbox?"There are local changes not synched to dropbox yet. If you synchronize from dropbox now, these will be lost.":"Download changes from dropbox"))),n.createElement("li",{className:"sync-select__option"},n.createElement("button",{type:"button",className:"sync-select__button button",title:"Synchronize images to Dropbox",onClick:function(){t("dropboximages","up")}},n.createElement("span",{className:"sync-select__button-label"},"Synchronize images to Dropbox"),n.createElement(N,{name:"sync",className:"svg--180"}))))))};Fi.propTypes={startSync:g().func.isRequired,cancelSync:g().func.isRequired,repoUrl:g().string.isRequired,dropboxActive:g().bool.isRequired,autoDropboxSync:g().bool.isRequired,gitActive:g().bool.isRequired,syncLastUpdate:g().shape({dropbox:g().number.isRequired,local:g().number.isRequired}).isRequired},Fi.defaultProps={};var Ti=Ci(Fi),qi=function(e){return Math.floor(e)===e&&((t=e)&&!(t&t-1));var t},Li=r(55140),Di=function(e){var t=e.imageData,r=e.scaleFactor,a=e.width,o=e.height,i=e.fileName,l=e.palette,c=e.dither,u=e.contrastBaseValues,s=(0,n.useRef)(null),m=(0,n.useRef)(null);return(0,n.useEffect)((function(){s.current&&m.current&&null!=u&&u.length&&(0,Li.U)({targetCanvas:s.current,originalCanvas:m.current,imageData:t,palette:l,dither:c,contrastBaseValues:u})})),n.createElement("div",{className:"import-preview-image",title:"".concat(i," - ").concat(r,"x")},n.createElement("canvas",{className:"import-preview-image__canvas",width:a,height:o,ref:m}),n.createElement(N,{className:"import-preview-image__arrow",name:"right"}),n.createElement("canvas",{className:"import-preview-image__canvas",width:a,height:o,ref:s}),qi(r)?null:n.createElement(la,{label:"The scale factor of your image is ".concat(r.toPrecision(3),". To get a clean result without artifacts, use images with factors being powers of two. (1, 2, 4, 8 ...)"),themes:["warning"]}))};Di.propTypes={imageData:g().object.isRequired,scaleFactor:g().number.isRequired,fileName:g().string.isRequired,width:g().number.isRequired,height:g().number.isRequired,palette:g().array.isRequired,dither:g().bool.isRequired,contrastBaseValues:g().array.isRequired};var Bi=Di,Mi=r(47387);function zi(){return zi=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},zi.apply(this,arguments)}function Ui(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Gi(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Vi(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==r)return;var n,a,o=[],i=!0,l=!1;try{for(r=r.call(e);!(i=(n=r.next()).done)&&(o.push(n.value),!t||o.length!==t);i=!0);}catch(e){l=!0,a=e}finally{try{i||null==r.return||r.return()}finally{if(l)throw a}}return o}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return $i(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return $i(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function $i(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var Hi=[{name:"Wider",baseValues:[0,68,187,255],value:"wider"},{name:"Wide",baseValues:[0,85,170,255],value:"wide"},{name:"Normal",baseValues:[51,102,153,204],value:"normal"},{name:"Narrow",baseValues:[69,115,162,208],value:"narrow"},{name:"Narrower",baseValues:[85,113,141,170],value:"narrower"},{name:"From Emulator",baseValues:[64,144,224,255],value:"emulator"}],Zi=function(){var e,t=(0,u.v9)((function(e){return e.bitmapQueue})),r=(0,u.I0)(),a=Vi((0,n.useState)(!0),2),o=a[0],i=a[1],l=Vi((0,n.useState)("wide"),2),c=l[0],s=l[1],f={dither:o,contrastBaseValues:null===(e=Hi.find((function(e){return e.value===c})))||void 0===e?void 0:e.baseValues},p=(0,Mi.Z)(r);return n.createElement(ln,{className:"bitmap-import-overlay",header:"Prepare Bitmaps for import",confirm:function(){p(function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Ui(Object(r),!0).forEach((function(t){Gi(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Ui(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}({bitmapQueue:t},f))},deny:function(){r({type:d.LC})}},n.createElement("div",{className:"bitmap-import-overlay__content"},t.map((function(e,t){return n.createElement(Bi,zi({key:t},e,f,{palette:["#ffffff","#aaaaaa","#555555","#000000"]}))})),n.createElement("label",{className:m()("bitmap-import-overlay__dither-check",{"bitmap-import-overlay__dither-check--checked":o})},n.createElement("input",{type:"checkbox",className:"bitmap-import-overlay__dither",checked:o,onChange:function(e){var t=e.target;i(t.checked)}}),n.createElement(N,{name:"checkmark"}),n.createElement("span",{className:"bitmap-import-overlay__dither-text"},"Enable Dither")),n.createElement(oa,{id:"contasts",label:"Contrast preset",options:Hi,setSelected:function(e){var t=e.target.value;return s(t)},value:c,disabled:!1})))};function Wi(e){var t=e.tiles,r=e.fileName,a=e.lastModified,o=e.imageHash,i=e.frameHash,l=e.tempId,c=e.paletteShort,s=(0,u.v9)((function(e){return e.palettes.find((function(e){return e.shortName===c}))})),m=(0,u.v9)((function(e){return e.preferredLocale})),f=(0,u.v9)((function(e){return e.images.find((function(e){return e.hash===o}))})),p=(0,u.v9)((function(e){return e.frames.find((function(e){return e.hash===i}))})),h=(0,u.v9)((function(e){return e.importQueue.filter((function(e){return e.imageHash===o}))})).length,y=(0,u.I0)();return n.createElement("li",{className:"import-image"},n.createElement("span",{className:"import-image__image-zoom",style:{height:"".concat(t.length/2.5/2.66,"px")}},n.createElement("span",{className:"import-image__image"},n.createElement(G,{tiles:t,invertPalette:!1,lockFrame:!1,palette:s.palette,asThumb:!0}))),n.createElement("div",{className:"import-image__meta"},n.createElement("div",{className:"import-image__name"},r),a?n.createElement("div",{className:"import-image__date"},(0,T.Z)(v()(a),m)):null),n.createElement("div",{className:"import-image__duplicate-icons"},h>1?n.createElement("div",{className:"import-image__duplicate-icon import-image__duplicate-icon--queue",title:"This image exists multiple times within this queue"},"D"):null,f?n.createElement("div",{className:"import-image__duplicate-icon import-image__duplicate-icon--image",title:"This image has already been imported".concat(f.title?' as "'.concat(f.title,'"'):"")},"I"):null,p?n.createElement("div",{className:"import-image__duplicate-icon import-image__duplicate-icon--frame",title:"This frame has already been imported".concat(p.name?' as "'.concat(p.name,'"'):"")},"F"):null),n.createElement("div",{className:"import-image__buttons"},360===t.length?n.createElement("button",{className:"import-image__button import-image__button--frame",type:"button",title:"Import as Frame",onClick:function(){y({type:d.jJ,payload:{fileName:r,tiles:t,imageHash:o,tempId:l}})}},n.createElement(N,{className:"import-image__icon",name:"frame"})):null,n.createElement("button",{className:"import-image__button import-image__button--delete",type:"button",title:"Delete",onClick:function(){y({type:d.cR,payload:{tempId:l}})}},n.createElement(N,{className:"import-image__icon",name:"delete"}))))}Wi.propTypes={tiles:g().array.isRequired,fileName:g().string.isRequired,lastModified:g().number,imageHash:g().string.isRequired,frameHash:g().string.isRequired,paletteShort:g().string.isRequired,tempId:g().string.isRequired},Wi.defaultProps={lastModified:null};var Ki=Wi,Ji=r(25009),Yi=r.n(Ji),Qi=function(e){var t=e.lines,r=e.filename,n=e.palette,a=e.frame,o=void 0===a?null:a,i=e.tags,l=void 0===i?[]:i,c=e.meta,u=e.created,s=void 0===u?v()().format(f.vc):u;return(0,Ht.a1)(t).then((function(e){return{hash:e,created:s,title:r||"",lines:t.length,tags:l,palette:n,frame:o,meta:c}}))};r(43290);function Xi(e){return function(e){if(Array.isArray(e))return el(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return el(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return el(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function el(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var tl=function(e){for(var t="FF FF FF FF FF FF FF FF FF FF FF FF FF FF FF FF";e.length%20;)e.push(t);for(var r=new Array(20).fill(t);e.length<360;)e.push.apply(e,Xi(r)),e.length<360&&e.unshift.apply(e,Xi(r));return e};function rl(e){return rl="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},rl(e)}function nl(){nl=function(){return e};var e={},t=Object.prototype,r=t.hasOwnProperty,n="function"==typeof Symbol?Symbol:{},a=n.iterator||"@@iterator",o=n.asyncIterator||"@@asyncIterator",i=n.toStringTag||"@@toStringTag";function l(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{l({},"")}catch(e){l=function(e,t,r){return e[t]=r}}function c(e,t,r,n){var a=t&&t.prototype instanceof m?t:m,o=Object.create(a.prototype),i=new S(n||[]);return o._invoke=function(e,t,r){var n="suspendedStart";return function(a,o){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===a)throw o;return x()}for(r.method=a,r.arg=o;;){var i=r.delegate;if(i){var l=E(i,r);if(l){if(l===s)continue;return l}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var c=u(e,t,r);if("normal"===c.type){if(n=r.done?"completed":"suspendedYield",c.arg===s)continue;return{value:c.arg,done:r.done}}"throw"===c.type&&(n="completed",r.method="throw",r.arg=c.arg)}}}(e,r,i),o}function u(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}e.wrap=c;var s={};function m(){}function f(){}function p(){}var d={};l(d,a,(function(){return this}));var h=Object.getPrototypeOf,y=h&&h(h(N([])));y&&y!==t&&r.call(y,a)&&(d=y);var g=p.prototype=m.prototype=Object.create(d);function b(e){["next","throw","return"].forEach((function(t){l(e,t,(function(e){return this._invoke(t,e)}))}))}function v(e,t){function n(a,o,i,l){var c=u(e[a],e,o);if("throw"!==c.type){var s=c.arg,m=s.value;return m&&"object"==rl(m)&&r.call(m,"__await")?t.resolve(m.__await).then((function(e){n("next",e,i,l)}),(function(e){n("throw",e,i,l)})):t.resolve(m).then((function(e){s.value=e,i(s)}),(function(e){return n("throw",e,i,l)}))}l(c.arg)}var a;this._invoke=function(e,r){function o(){return new t((function(t,a){n(e,r,t,a)}))}return a=a?a.then(o,o):o()}}function E(e,t){var r=e.iterator[t.method];if(void 0===r){if(t.delegate=null,"throw"===t.method){if(e.iterator.return&&(t.method="return",t.arg=void 0,E(e,t),"throw"===t.method))return s;t.method="throw",t.arg=new TypeError("The iterator does not provide a 'throw' method")}return s}var n=u(r,e.iterator,t.arg);if("throw"===n.type)return t.method="throw",t.arg=n.arg,t.delegate=null,s;var a=n.arg;return a?a.done?(t[e.resultName]=a.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,s):a:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,s)}function w(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function _(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function S(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(w,this),this.reset(!0)}function N(e){if(e){var t=e[a];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var n=-1,o=function t(){for(;++n<e.length;)if(r.call(e,n))return t.value=e[n],t.done=!1,t;return t.value=void 0,t.done=!0,t};return o.next=o}}return{next:x}}function x(){return{value:void 0,done:!0}}return f.prototype=p,l(g,"constructor",p),l(p,"constructor",f),f.displayName=l(p,i,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===f||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,p):(e.__proto__=p,l(e,i,"GeneratorFunction")),e.prototype=Object.create(g),e},e.awrap=function(e){return{__await:e}},b(v.prototype),l(v.prototype,o,(function(){return this})),e.AsyncIterator=v,e.async=function(t,r,n,a,o){void 0===o&&(o=Promise);var i=new v(c(t,r,n,a),o);return e.isGeneratorFunction(r)?i:i.next().then((function(e){return e.done?e.value:i.next()}))},b(g),l(g,i,"Generator"),l(g,a,(function(){return this})),l(g,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=[];for(var r in e)t.push(r);return t.reverse(),function r(){for(;t.length;){var n=t.pop();if(n in e)return r.value=n,r.done=!1,r}return r.done=!0,r}},e.values=N,S.prototype={constructor:S,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(_),!e)for(var t in this)"t"===t.charAt(0)&&r.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function n(r,n){return i.type="throw",i.arg=e,t.next=r,n&&(t.method="next",t.arg=void 0),!!n}for(var a=this.tryEntries.length-1;a>=0;--a){var o=this.tryEntries[a],i=o.completion;if("root"===o.tryLoc)return n("end");if(o.tryLoc<=this.prev){var l=r.call(o,"catchLoc"),c=r.call(o,"finallyLoc");if(l&&c){if(this.prev<o.catchLoc)return n(o.catchLoc,!0);if(this.prev<o.finallyLoc)return n(o.finallyLoc)}else if(l){if(this.prev<o.catchLoc)return n(o.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<o.finallyLoc)return n(o.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var a=this.tryEntries[n];if(a.tryLoc<=this.prev&&r.call(a,"finallyLoc")&&this.prev<a.finallyLoc){var o=a;break}}o&&("break"===e||"continue"===e)&&o.tryLoc<=t&&t<=o.finallyLoc&&(o=null);var i=o?o.completion:{};return i.type=e,i.arg=t,o?(this.method="next",this.next=o.finallyLoc,s):this.complete(i)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),s},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),_(r),s}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var a=n.arg;_(r)}return a}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,r){return this.delegate={iterator:N(e),resultName:t,nextLoc:r},"next"===this.method&&(this.arg=void 0),s}},e}function al(e,t,r,n,a,o,i){try{var l=e[o](i),c=l.value}catch(e){return void r(e)}l.done?t(c):Promise.resolve(c).then(n,a)}var ol=function(){var e=(0,u.I0)(),t=new(Yi())(1,1/0),r=(0,u.v9)((function(e){return e.importPad})),n=function(){var n,a=(n=nl().mark((function n(a){var o,i,l,c,u;return nl().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return o=a.importQueue,i=a.palette,l=a.frame,c=a.tags,n.next=3,Promise.all(o.map((function(e,n){var a=e.tiles,o=e.fileName,u=e.meta,s=e.lastModified;return t.add((function(){return Qi({lines:r?tl(a):a,filename:o,palette:i,frame:l,tags:c,created:s?v()(s+n).format(f.vc):void 0,meta:u})}))})));case 3:u=n.sent,e({type:d.Dt,payload:u});case 5:case"end":return n.stop()}}),n)})),function(){var e=this,t=arguments;return new Promise((function(r,a){var o=n.apply(e,t);function i(e){al(o,r,a,i,l,"next",e)}function l(e){al(o,r,a,i,l,"throw",e)}i(void 0)}))});return function(e){return a.apply(this,arguments)}}();return{runImport:n}};function il(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function ll(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?il(Object(r),!0).forEach((function(t){cl(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):il(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function cl(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function ul(){return ul=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},ul.apply(this,arguments)}function sl(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==r)return;var n,a,o=[],i=!0,l=!1;try{for(r=r.call(e);!(i=(n=r.next()).done)&&(o.push(n.value),!t||o.length!==t);i=!0);}catch(e){l=!0,a=e}finally{try{i||null==r.return||r.return()}finally{if(l)throw a}}return o}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return ml(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return ml(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ml(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var fl=function(){var e=(0,u.v9)((function(e){return e.importQueue})),t=(0,u.I0)(),r=(0,u.v9)((function(e){return e.activePalette})),a=sl((0,n.useState)(""),2),o=a[0],i=a[1],l=sl((0,n.useState)({initial:[],add:[],remove:[]}),2),c=l[0],s=l[1],m=ol().runImport;return n.createElement(ln,{className:"import-overlay",header:"Image Import (".concat(e.length," images)"),confirm:function(){return m({importQueue:e,palette:r,frame:o,tags:c.add})},deny:function(){t({type:d.Rb})}},n.createElement("div",{className:"import-overlay__content"},n.createElement("ul",{className:"import-overlay__images"},e.map((function(e,t){return n.createElement(Ki,ul({key:t,paletteShort:r},e))}))),n.createElement(Ma,{selectLabel:"Palette",noFancy:!0,value:r,onChange:function(e){t({type:d.K0,payload:e})}}),n.createElement(ga,{selectLabel:"Modify Frame",frame:o,lockFrame:!1,noFrameOption:"No frame / import as is",updateFrame:i}),n.createElement(to,{label:"Tags",tags:c,listDirection:"up",updateTags:function(e,t){s(ll(ll({},c),_o(c,{mode:e,tag:t})))}})))},pl=r(75500);function dl(e){return dl="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},dl(e)}function hl(){hl=function(){return e};var e={},t=Object.prototype,r=t.hasOwnProperty,n="function"==typeof Symbol?Symbol:{},a=n.iterator||"@@iterator",o=n.asyncIterator||"@@asyncIterator",i=n.toStringTag||"@@toStringTag";function l(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{l({},"")}catch(e){l=function(e,t,r){return e[t]=r}}function c(e,t,r,n){var a=t&&t.prototype instanceof m?t:m,o=Object.create(a.prototype),i=new S(n||[]);return o._invoke=function(e,t,r){var n="suspendedStart";return function(a,o){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===a)throw o;return x()}for(r.method=a,r.arg=o;;){var i=r.delegate;if(i){var l=E(i,r);if(l){if(l===s)continue;return l}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var c=u(e,t,r);if("normal"===c.type){if(n=r.done?"completed":"suspendedYield",c.arg===s)continue;return{value:c.arg,done:r.done}}"throw"===c.type&&(n="completed",r.method="throw",r.arg=c.arg)}}}(e,r,i),o}function u(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}e.wrap=c;var s={};function m(){}function f(){}function p(){}var d={};l(d,a,(function(){return this}));var h=Object.getPrototypeOf,y=h&&h(h(N([])));y&&y!==t&&r.call(y,a)&&(d=y);var g=p.prototype=m.prototype=Object.create(d);function b(e){["next","throw","return"].forEach((function(t){l(e,t,(function(e){return this._invoke(t,e)}))}))}function v(e,t){function n(a,o,i,l){var c=u(e[a],e,o);if("throw"!==c.type){var s=c.arg,m=s.value;return m&&"object"==dl(m)&&r.call(m,"__await")?t.resolve(m.__await).then((function(e){n("next",e,i,l)}),(function(e){n("throw",e,i,l)})):t.resolve(m).then((function(e){s.value=e,i(s)}),(function(e){return n("throw",e,i,l)}))}l(c.arg)}var a;this._invoke=function(e,r){function o(){return new t((function(t,a){n(e,r,t,a)}))}return a=a?a.then(o,o):o()}}function E(e,t){var r=e.iterator[t.method];if(void 0===r){if(t.delegate=null,"throw"===t.method){if(e.iterator.return&&(t.method="return",t.arg=void 0,E(e,t),"throw"===t.method))return s;t.method="throw",t.arg=new TypeError("The iterator does not provide a 'throw' method")}return s}var n=u(r,e.iterator,t.arg);if("throw"===n.type)return t.method="throw",t.arg=n.arg,t.delegate=null,s;var a=n.arg;return a?a.done?(t[e.resultName]=a.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,s):a:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,s)}function w(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function _(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function S(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(w,this),this.reset(!0)}function N(e){if(e){var t=e[a];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var n=-1,o=function t(){for(;++n<e.length;)if(r.call(e,n))return t.value=e[n],t.done=!1,t;return t.value=void 0,t.done=!0,t};return o.next=o}}return{next:x}}function x(){return{value:void 0,done:!0}}return f.prototype=p,l(g,"constructor",p),l(p,"constructor",f),f.displayName=l(p,i,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===f||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,p):(e.__proto__=p,l(e,i,"GeneratorFunction")),e.prototype=Object.create(g),e},e.awrap=function(e){return{__await:e}},b(v.prototype),l(v.prototype,o,(function(){return this})),e.AsyncIterator=v,e.async=function(t,r,n,a,o){void 0===o&&(o=Promise);var i=new v(c(t,r,n,a),o);return e.isGeneratorFunction(r)?i:i.next().then((function(e){return e.done?e.value:i.next()}))},b(g),l(g,i,"Generator"),l(g,a,(function(){return this})),l(g,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=[];for(var r in e)t.push(r);return t.reverse(),function r(){for(;t.length;){var n=t.pop();if(n in e)return r.value=n,r.done=!1,r}return r.done=!0,r}},e.values=N,S.prototype={constructor:S,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(_),!e)for(var t in this)"t"===t.charAt(0)&&r.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function n(r,n){return i.type="throw",i.arg=e,t.next=r,n&&(t.method="next",t.arg=void 0),!!n}for(var a=this.tryEntries.length-1;a>=0;--a){var o=this.tryEntries[a],i=o.completion;if("root"===o.tryLoc)return n("end");if(o.tryLoc<=this.prev){var l=r.call(o,"catchLoc"),c=r.call(o,"finallyLoc");if(l&&c){if(this.prev<o.catchLoc)return n(o.catchLoc,!0);if(this.prev<o.finallyLoc)return n(o.finallyLoc)}else if(l){if(this.prev<o.catchLoc)return n(o.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<o.finallyLoc)return n(o.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var a=this.tryEntries[n];if(a.tryLoc<=this.prev&&r.call(a,"finallyLoc")&&this.prev<a.finallyLoc){var o=a;break}}o&&("break"===e||"continue"===e)&&o.tryLoc<=t&&t<=o.finallyLoc&&(o=null);var i=o?o.completion:{};return i.type=e,i.arg=t,o?(this.method="next",this.next=o.finallyLoc,s):this.complete(i)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),s},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),_(r),s}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var a=n.arg;_(r)}return a}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,r){return this.delegate={iterator:N(e),resultName:t,nextLoc:r},"next"===this.method&&(this.arg=void 0),s}},e}function yl(e,t,r,n,a,o,i){try{var l=e[o](i),c=l.value}catch(e){return void r(e)}l.done?t(c):Promise.resolve(c).then(n,a)}function gl(e){return function(){var t=this,r=arguments;return new Promise((function(n,a){var o=e.apply(t,r);function i(e){yl(o,n,a,i,l,"next",e)}function l(e){yl(o,n,a,i,l,"throw",e)}i(void 0)}))}}function bl(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==r)return;var n,a,o=[],i=!0,l=!1;try{for(r=r.call(e);!(i=(n=r.next()).done)&&(o.push(n.value),!t||o.length!==t);i=!0);}catch(e){l=!0,a=e}finally{try{i||null==r.return||r.return()}finally{if(l)throw a}}return o}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return vl(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return vl(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function vl(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var El=function(){var e=(0,u.v9)((function(e){return e.frameQueue[0]})),t=bl((0,n.useState)(""),2),r=t[0],a=t[1],o=(0,u.I0)(),i=Do({id:"",name:e.fileName}),l=i.fullId,c=i.formValid,s=i.groups,m=i.frameGroup,f=i.frameIndex,p=i.setFrameIndex,h=i.frameName,y=i.setFrameGroup,g=i.setFrameName,b=i.idValid,v=i.groupIdValid,E=i.frameIndexValid;return n.createElement(ln,{className:"import-overlay",header:'Import new Frame as "'.concat(l,'"'),canConfirm:c,confirm:gl(hl().mark((function t(){var n;return hl().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,(0,pl.ez)(e.tiles);case 2:n=t.sent,o({type:d.GU,payload:{id:l,name:h,hash:n,tempId:e.tempId}}),null!=r&&r.trim()&&o({type:d.uy,payload:{id:m,name:r}});case 5:case"end":return t.stop()}}),t)}))),deny:function(){o({type:d.KD,payload:e})}},n.createElement("div",{className:"import-overlay__content"},n.createElement(Mo,{frameIndex:f,setFrameGroup:y,frameName:h,frameGroup:m,setFrameName:g,groupIdValid:v,idValid:b,frameIndexValid:E,setFrameIndex:p,groups:s,fullId:l,frameGroupName:r,setFrameGroupName:a})))},wl=function(){var e=Fn(),t=e.showTrash,r=e.purgeTrash,a=e.downloadImages,o=e.downloadFrames,i=e.trashCount;return n.createElement(ln,{className:"trashbin",confirm:function(){t(!1)},header:"Trash (".concat(i.sum," items)")},n.createElement("ul",{className:"trashbin__list"},n.createElement("li",{className:"trashbin__option"},n.createElement("button",{type:"button",className:"trashbin__button button",title:"Download deleted frames",disabled:0===i.frames,onClick:o},n.createElement("span",{className:"trashbin__button-label"},"Download deleted frames (".concat(i.frames,")")))),n.createElement("li",{className:"trashbin__option"},n.createElement("button",{type:"button",className:"trashbin__button button",title:"Download deleted images",disabled:0===i.images,onClick:a},n.createElement("span",{className:"trashbin__button-label"},"Download deleted images (".concat(i.images,")")))),n.createElement("li",{className:"trashbin__option"},n.createElement("button",{type:"button",className:"trashbin__button trashbin__button--sum button",title:"Purge all",disabled:0===i.sum,onClick:r},n.createElement("span",{className:"trashbin__button-label"},"Purge all (".concat(i.sum,")"))))))};function _l(e){return function(e){if(Array.isArray(e))return xl(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||Nl(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Sl(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==r)return;var n,a,o=[],i=!0,l=!1;try{for(r=r.call(e);!(i=(n=r.next()).done)&&(o.push(n.value),!t||o.length!==t);i=!0);}catch(e){l=!0,a=e}finally{try{i||null==r.return||r.return()}finally{if(l)throw a}}return o}(e,t)||Nl(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Nl(e,t){if(e){if("string"==typeof e)return xl(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?xl(e,t):void 0}}function xl(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var kl=function(){var e=(0,u.v9)((function(e){return e})),t=e.pickColors,r=t.colors,a=t.fileName,o=(0,u.I0)(),i=Sl((0,n.useState)([0,3,6,9]),2),l=i[0],c=i[1],s=Wo(e),m=(0,n.useMemo)((function(){return Array(4).fill(null).map((function(e,t){var n,a,o,i,c=l[t],u=r[c];return u?(n=st(u,3),a=n[0],o=n[1],i=n[2],["#",Math.min(255,Math.max(0,a)).toString(16).padStart(2,"0"),Math.min(255,Math.max(0,o)).toString(16).padStart(2,"0"),Math.min(255,Math.max(0,i)).toString(16).padStart(2,"0")].join("")):"#000000"}))}),[r,l]),f=(0,n.useMemo)((function(){return s()}),[s]);return n.createElement(ln,{className:"pick-colors",confirm:function(){o({type:d.iF,payload:{name:"From file ".concat(a),shortName:p.VP,palette:m,origin:"generated from file"}})},canConfirm:4===l.length,deny:function(){o({type:d.VO})},header:'Pick colors from "'.concat(a,'"')},n.createElement(n.Fragment,null,n.createElement("ul",{className:"edit-palette__previews"},f.map((function(e){return n.createElement("li",{className:"edit-palette__preview-image",key:e.hash},n.createElement(Z,{hash:e.hash,invertPalette:!1,lockFrame:!1,palette:m}))}))),n.createElement("ul",{className:"pick-colors__list"},r.map((function(e,t){var r=function(e){return l.findIndex((function(t){return t===e}))+1}(t);return n.createElement("li",{key:t,className:"pick-colors__item",style:{"--color":"rgb(".concat(e.join(","),")")}},n.createElement("button",{type:"button",className:"pick-colors__button",onClick:function(){return function(e){var t=!1,r=l.filter((function(r){return r!==e||(t=!0,!1)}));if(t)c(r);else{for(;r.length>3;)r.shift();c([].concat(_l(r),[e]))}}(t)}},r?n.createElement("span",{className:"pick-colors__index"},r):null))}))),n.createElement("div",{className:"pick-colors__preview"},m.map((function(e,t){return n.createElement("div",{key:t,className:"pick-colors__preview-item",style:{backgroundColor:e},title:e})})))))},Ol=function(){var e=(0,u.v9)((function(e){return{showProgressLog:!!e.progressLog.git.length||!!e.progressLog.dropbox.length,showInfoBox:1===e.framesMessage,showProgressBox:!!e.progress.gif||!!e.progress.printer||!!e.progress.plugin,showConfirm:!!e.confirm.length,showBitmapQueue:!!e.bitmapQueue.length,showImportQueue:!!e.importQueue.length,showFrameQueue:!!e.frameQueue.length,showEditForm:!!e.editImage,showEditFrame:!!e.editFrame,showEditPalette:!!e.editPalette.shortName,showVideoForm:!!e.videoParams.imageSelection&&!!e.videoParams.imageSelection.length,showPickColors:!!e.pickColors,showRGBNImage:!!e.rgbnImages&&Object.keys(e.rgbnImages).length>0,showLightbox:null!==e.lightboxImage,showDragOver:!!e.dragover,showFilters:!!e.filtersVisible,showSortForm:!!e.sortOptionsVisible,showTrashbin:!!e.trashCount.show,syncSelect:!!e.syncSelect}})),t=e.showProgressLog,r=e.showInfoBox,a=e.showProgressBox,o=e.showConfirm,i=e.showBitmapQueue,l=e.showImportQueue,c=e.showFrameQueue,s=e.showEditForm,m=e.showEditFrame,f=e.showEditPalette,p=e.showVideoForm,d=e.showPickColors,h=e.showRGBNImage,y=e.showLightbox,g=e.showDragOver,b=e.showFilters,v=e.showSortForm,E=e.showTrashbin,w=e.syncSelect;switch(!0){case r:return n.createElement(Zn,null);case o:return n.createElement(sa,null);case c:return n.createElement(El,null);case i:return n.createElement(Zi,null);case l:return n.createElement(fl,null);case s:return n.createElement(Po,null);case m:return n.createElement(zo,null);case f:return n.createElement(ti,null);case p:return n.createElement(ui,null);case d:return n.createElement(kl,null);case y:return n.createElement(pi,null);case b:return n.createElement(Ni,null);case v:return n.createElement(Ri,null);case w:return n.createElement(Ti,null);case E:return n.createElement(wl,null);case g:return n.createElement(hi,null);case t:return n.createElement(Vn,null);case a:return n.createElement(Jn,null);case h:return n.createElement(di,null);default:return n.createElement(sn,null)}},jl=function(){var e,t,r=(0,o.SN)();if(!r[1])return n.createElement(o.Fg,{to:"/gallery/page/1",replace:!0});var a=null===(e=r[1])||void 0===e||null===(t=e.handle)||void 0===t?void 0:t.headline;return n.createElement(n.Fragment,null,n.createElement(Ln,null),n.createElement("div",{className:"layout"},a&&n.createElement("h1",{className:"layout__main-headline"},a),n.createElement(o.j3,null)),n.createElement(Ol,null))},Pl=r(25108),Il=function(){var e=(0,o.lk)();return Pl.error(e),n.createElement("div",{id:"error-page"},n.createElement("p",null,e.statusText||e.message),n.createElement("pre",null,e.stack))},Al=(0,u.$j)((function(e){return{exportScaleFactors:e.exportScaleFactors,exportFileTypes:e.exportFileTypes,pageSize:e.pageSize,savFrameTypes:e.savFrameTypes,savFrameGroups:(0,Et.Z)(e.frames,e.frameGroupNames),handleExportFrame:e.handleExportFrame,importDeleted:e.importDeleted,forceMagicCheck:e.forceMagicCheck,importLastSeen:e.importLastSeen,importPad:e.importPad,hideDates:e.hideDates,printerUrl:e.printerUrl,printerParams:e.printerParams,preferredLocale:e.preferredLocale,enableDebug:e.enableDebug}}),(function(e){return{setSavFrameTypes:function(t){e({type:d.LR,payload:t})},setHandleExportFrame:function(t){e({type:d.wK,payload:t})},setImportLastSeen:function(t){e({type:d.Pk,payload:t})},setImportDeleted:function(t){e({type:d.nN,payload:t})},setForceMagicCheck:function(t){e({type:d.mW,payload:t})},setImportPad:function(t){e({type:d.qr,payload:t})},setHideDates:function(t){e({type:d.Mx,payload:t})},setEnableDebug:function(t){e({type:d.SK,payload:t})},setPreferredLocale:function(t){e({type:d.Qs,payload:t})},setPageSize:function(t){e({type:d.R4,payload:t})},changeExportScaleFactors:function(t,r){e({type:d.WB,payload:{factor:t,checked:r}})},changeExportFileTypes:function(t,r){e({type:d.Fw,payload:{fileType:t,checked:r}})},updatePrinterUrl:function(t){e({type:d.YE,payload:t})},updatePrinterParams:function(t){e({type:d.WN,payload:t})}}})),Rl=(r(82772),{}),Cl=function(){return["jpeg","jpg","png","webp","bmp","gif"].filter((function(e){return function(e){if(void 0!==Rl[e])return Rl[e];var t=document.createElement("canvas");t.width=2,t.height=2;var r=t.toDataURL("image/".concat(e));return Rl[e]=0===r.indexOf("data:image/".concat(e,";base64")),Rl[e]}(e)}))},Fl=r(15168);function Tl(e){return function(e){if(Array.isArray(e))return Dl(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||Ll(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ql(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==r)return;var n,a,o=[],i=!0,l=!1;try{for(r=r.call(e);!(i=(n=r.next()).done)&&(o.push(n.value),!t||o.length!==t);i=!0);}catch(e){l=!0,a=e}finally{try{i||null==r.return||r.return()}finally{if(l)throw a}}return o}(e,t)||Ll(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Ll(e,t){if(e){if("string"==typeof e)return Dl(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?Dl(e,t):void 0}}function Dl(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var Bl=function(e){var t=ql((0,n.useState)(e.pageSize),2),o=t[0],i=t[1],l=ql((0,n.useState)(e.printerUrl),2),c=l[0],u=l[1],s=ql((0,n.useState)(e.printerParams),2),f=s[0],p=s[1],d=ql((0,n.useState)([]),2),h=d[0],y=d[1],g=ql((0,n.useState)(v()()),1)[0];return(0,n.useEffect)((function(){r.e(343).then(r.t.bind(r,95343,23)).then((function(e){var t=e.default.all.filter((function(e){var t=e.tag;try{return(0,T.Z)(v()(),t),!0}catch(e){return!1}}));y(t)}))}),[]),n.createElement(n.Fragment,null,n.createElement(Ge,{id:"settings-pagesize",labelText:"Page size",type:"number",min:0,value:o,onChange:function(e){i(e)},onBlur:function(){e.setPageSize(parseInt(o,10)||0)}},n.createElement("span",{className:m()("inputgroup__note",{"inputgroup__note--warn":!e.pageSize})},"(set to 0 to disable pagination - might cause performance issues on large sets of images)")),n.createElement("div",{className:"inputgroup"},n.createElement("div",{className:"inputgroup__label"},"Image export dimensions"),[1,2,3,4,5,6,8,10].map((function(t){return n.createElement("label",{key:t,className:m()("inputgroup__label-check",{"inputgroup__label-check--selected":e.exportScaleFactors.includes(t)}),title:"".concat(160*t,"×").concat(144*t)},"".concat(t,"×"),n.createElement("input",{type:"checkbox",checked:e.exportScaleFactors.includes(t),onChange:function(r){var n=r.target;e.changeExportScaleFactors(t,n.checked)}}))}))),n.createElement("div",{className:"inputgroup"},n.createElement("div",{className:"inputgroup__label"},"Image export filetypes"),[].concat(Tl(Cl()),["txt","pgm"]).map((function(t){return n.createElement("label",{key:t,className:m()("inputgroup__label-check",{"inputgroup__label-check--selected":e.exportFileTypes.includes(t)}),title:t},t,n.createElement("input",{type:"checkbox",checked:e.exportFileTypes.includes(t),onChange:function(r){var n=r.target;e.changeExportFileTypes(t,n.checked)}}))}))),n.createElement("div",{className:"inputgroup"},n.createElement("label",{htmlFor:"settings-handle-export-frames",className:"inputgroup__label"},"How to handle frames when exporting images"),n.createElement("select",{id:"settings-handle-export-frames",className:"inputgroup__input inputgroup__input--select",value:e.handleExportFrame,onChange:function(t){e.setHandleExportFrame(t.target.value)}},oi.map((function(e){var t=e.id,r=e.name;return n.createElement("option",{value:t,key:t},r)})))),n.createElement("div",{className:"inputgroup"},n.createElement("label",{htmlFor:"settings-sav-frames",className:"inputgroup__label"},"Frames to be applied when importing Cartridge dumps"),n.createElement("select",{id:"settings-sav-frames",className:"inputgroup__input inputgroup__input--select",disabled:!e.savFrameGroups.length,value:e.savFrameTypes,onChange:function(t){e.setSavFrameTypes(t.target.value)}},n.createElement("option",{value:""},"None"),e.savFrameGroups.map((function(e){var t=e.id,r=e.name;return n.createElement("option",{value:t,key:t},r)})))),n.createElement("label",{className:m()("inputgroup checkgroup",{"checkgroup--checked":e.importLastSeen})},n.createElement("span",{className:"inputgroup__label",title:"Import ‘last seen’ image when importing Cartridge dumps"},"Import ‘last seen’ image when importing Cartridge dumps"),n.createElement("span",{className:"checkgroup__checkbox-wrapper"},n.createElement("input",{type:"checkbox",className:"checkgroup__input",checked:e.importLastSeen,onChange:function(t){var r=t.target;e.setImportLastSeen(r.checked)}}),n.createElement(N,{name:"checkmark"}))),n.createElement("label",{className:m()("inputgroup checkgroup",{"checkgroup--checked":e.importDeleted})},n.createElement("span",{className:"inputgroup__label",title:"Import deleted images when importing Cartridge dumps"},"Import deleted images when importing Cartridge dumps"),n.createElement("span",{className:"checkgroup__checkbox-wrapper"},n.createElement("input",{type:"checkbox",className:"checkgroup__input",checked:e.importDeleted,onChange:function(t){var r=t.target;e.setImportDeleted(r.checked)}}),n.createElement(N,{name:"checkmark"}))),n.createElement("label",{className:m()("inputgroup checkgroup",{"checkgroup--checked":e.forceMagicCheck})},n.createElement("span",{className:"inputgroup__label",title:"Force valid .sav file when importing"},"Force valid .sav file when importing"),n.createElement("span",{className:"checkgroup__checkbox-wrapper"},n.createElement("input",{type:"checkbox",className:"checkgroup__input",checked:e.forceMagicCheck,onChange:function(t){var r=t.target;e.setForceMagicCheck(r.checked)}}),n.createElement(N,{name:"checkmark"}))),n.createElement("label",{className:m()("inputgroup checkgroup",{"checkgroup--checked":e.importPad})},n.createElement("span",{className:"inputgroup__label",title:"Pad images up to 144px height on import"},"Pad images up to 144px height on import"),n.createElement("span",{className:"checkgroup__checkbox-wrapper"},n.createElement("input",{type:"checkbox",className:"checkgroup__input",checked:e.importPad,onChange:function(t){var r=t.target;e.setImportPad(r.checked)}}),n.createElement(N,{name:"checkmark"}))),n.createElement("label",{className:m()("inputgroup checkgroup",{"checkgroup--checked":e.hideDates})},n.createElement("span",{className:"inputgroup__label",title:"Hide dates in gallery"},"Hide dates in gallery"),n.createElement("span",{className:"checkgroup__checkbox-wrapper"},n.createElement("input",{type:"checkbox",className:"checkgroup__input",checked:e.hideDates,onChange:function(t){var r=t.target;e.setHideDates(r.checked)}}),n.createElement(N,{name:"checkmark"}))),n.createElement("div",{className:"inputgroup"},n.createElement("label",{htmlFor:"settings-preferred-locale",className:"inputgroup__label"},"Preferred locale",n.createElement("span",{className:"inputgroup__note inputgroup__note--newline"},"Example date format: ".concat((0,T.Z)(g,e.preferredLocale)))),n.createElement("select",{id:"settings-preferred-locale",className:"inputgroup__input inputgroup__input--select",value:e.preferredLocale,onChange:function(t){e.setPreferredLocale(t.target.value)}},h.map((function(e){var t=e.name,r=e.local,a=e.location,o=e.tag;return n.createElement("option",{value:o,key:o},"".concat(r||t).concat(a?" - ".concat(a):""," (").concat(o,")"))})))),n.createElement(fn,null),"esp8266"===(0,lr.d)().env?null:n.createElement(Ge,{id:"settings-printer-url",labelText:"Printer URL",type:"text",value:c,onChange:function(e){u(e)},onBlur:function(){u((0,Fl.Z)(c,"http")),e.updatePrinterUrl(c)},onKeyUp:function(t){switch(t){case"Enter":u((0,Fl.Z)(c,"http")),e.updatePrinterUrl(c);break;case"Escape":u(e.printerUrl)}}},n.createElement("span",{className:"inputgroup__note"},"If you own a physical wifi-printer, you can add it's URL here and check the ",n.createElement(a.rU,{to:"/import"},"Import-tab"))),"esp8266"===(0,lr.d)().env||c?n.createElement(Ge,{id:"settings-printer-settings",labelText:"Additional printer settings",type:"text",value:f,onChange:function(e){p(e)},onBlur:function(){p(f),e.updatePrinterParams(f)},onKeyUp:function(t){switch(t){case"Enter":p(f),e.updatePrinterParams(f);break;case"Escape":p(e.printerParams)}}}):null,n.createElement("label",{className:m()("inputgroup checkgroup",{"checkgroup--checked":e.enableDebug})},n.createElement("span",{className:"inputgroup__label",title:"Show debug info"},"Show debug info"),n.createElement("span",{className:"checkgroup__checkbox-wrapper"},n.createElement("input",{type:"checkbox",className:"checkgroup__input",checked:e.enableDebug,onChange:function(t){var r=t.target;e.setEnableDebug(r.checked)}}),n.createElement(N,{name:"checkmark"}))))};Bl.propTypes={changeExportScaleFactors:g().func.isRequired,exportScaleFactors:g().array.isRequired,changeExportFileTypes:g().func.isRequired,exportFileTypes:g().array.isRequired,savFrameTypes:g().string.isRequired,savFrameGroups:g().array.isRequired,setSavFrameTypes:g().func.isRequired,pageSize:g().number.isRequired,setPageSize:g().func.isRequired,preferredLocale:g().string,setPreferredLocale:g().func.isRequired,setHandleExportFrame:g().func.isRequired,handleExportFrame:g().string.isRequired,setImportLastSeen:g().func.isRequired,importLastSeen:g().bool.isRequired,setImportDeleted:g().func.isRequired,importDeleted:g().bool.isRequired,setForceMagicCheck:g().func.isRequired,forceMagicCheck:g().bool.isRequired,setImportPad:g().func.isRequired,importPad:g().bool.isRequired,setHideDates:g().func.isRequired,hideDates:g().bool.isRequired,printerUrl:g().string.isRequired,updatePrinterUrl:g().func.isRequired,printerParams:g().string.isRequired,updatePrinterParams:g().func.isRequired,enableDebug:g().bool.isRequired,setEnableDebug:g().func.isRequired},Bl.defaultProps={preferredLocale:null};var Ml=Al(Bl),zl=(0,u.$j)((function(e){return{gitStorage:e.gitStorage}}),(function(e){return{setGitStorage:function(t){e({type:d.Ik,payload:t})}}}));function Ul(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Gl(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Ul(Object(r),!0).forEach((function(t){Vl(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Ul(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function Vl(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function $l(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==r)return;var n,a,o=[],i=!0,l=!1;try{for(r=r.call(e);!(i=(n=r.next()).done)&&(o.push(n.value),!t||o.length!==t);i=!0);}catch(e){l=!0,a=e}finally{try{i||null==r.return||r.return()}finally{if(l)throw a}}return o}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return Hl(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Hl(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Hl(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var Zl=function(e){var t=e.gitStorage,r=e.setGitStorage,a=$l((0,n.useState)(t),2),o=a[0],i=a[1];return n.createElement(n.Fragment,null,n.createElement("label",{className:m()("inputgroup checkgroup",{"checkgroup--checked":o.use})},n.createElement("span",{className:"inputgroup__label",title:"Use github as storage"},"Use github as storage"),n.createElement("span",{className:"checkgroup__checkbox-wrapper"},n.createElement("input",{type:"checkbox",className:"checkgroup__input",checked:o.use,onChange:function(e){var t=e.target,n=Gl(Gl({},o),{},{use:t.checked});i(n),r(n)}}),n.createElement(N,{name:"checkmark"}))),o.use?n.createElement(n.Fragment,null,n.createElement(Ge,{id:"settings-git-owner",labelText:"Owner",type:"text",value:o.owner,onChange:function(e){i(Gl(Gl({},o),{},{owner:e}))},onBlur:function(){r(o)}}),n.createElement(Ge,{id:"settings-git-repo",labelText:"Repository name",type:"text",value:o.repo,onChange:function(e){i(Gl(Gl({},o),{},{repo:e}))},onBlur:function(){r(o)}}),n.createElement(Ge,{id:"settings-git-branch",labelText:"Branch",type:"text",value:o.branch,onChange:function(e){i(Gl(Gl({},o),{},{branch:e}))},onBlur:function(){r(o)}}),n.createElement(Ge,{id:"settings-git-throttle",labelText:"Throttle (in ms)",type:"number",min:10,max:5e3,step:25,value:o.throttle,onChange:function(e){i(Gl(Gl({},o),{},{throttle:e}))},onBlur:function(){r(o)}}),n.createElement(Ge,{id:"settings-git-token",labelText:"Token",type:"password",value:o.token,onChange:function(e){i(Gl(Gl({},o),{},{token:e}))},onBlur:function(){r(o)}},n.createElement("a",{className:"inputgroup__note",href:"https://github.com/settings/tokens/new?scopes=repo"},"How to obtain a token"))):null)};Zl.propTypes={gitStorage:g().object.isRequired,setGitStorage:g().func.isRequired};var Wl=zl(Zl);function Kl(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var Jl=(0,u.$j)((function(e){return{plugins:e.plugins}}),(function(e){return{pluginAdd:function(t){e({type:d.gk,payload:t})},pluginRemove:function(t){e({type:d.gH,payload:t})},pluginUpdateConfig:function(t,r,n){e({type:d.PA,payload:{url:t,config:Kl({},r,n)}})}}}));r(54678);function Yl(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==r)return;var n,a,o=[],i=!0,l=!1;try{for(r=r.call(e);!(i=(n=r.next()).done)&&(o.push(n.value),!t||o.length!==t);i=!0);}catch(e){l=!0,a=e}finally{try{i||null==r.return||r.return()}finally{if(l)throw a}}return o}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return Ql(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Ql(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Ql(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var Xl=function(e){switch(e){case"number":return"number";case"string":default:return"text";case"multiline":return"textarea"}},ec=function(e,t){switch(e){case"number":var r=parseFloat(t);return isNaN(r)?"":r;case"string":return t||"";default:return t}},tc=function(e){var t=e.pluginAdd,r=e.pluginRemove,a=e.pluginUpdateConfig,o=e.plugins,i=Yl((0,n.useState)(""),2),l=i[0],c=i[1];return n.createElement(n.Fragment,null,n.createElement(Ge,{id:"plugin-settings-add-plugin",labelText:"Add Plugin",type:"text",value:l,onChange:function(e){return c(e)},buttonOnClick:function(){t(l),c("")},buttonIcon:l?"add":null}),n.createElement("ul",{className:"plugin-settings__plugin-list"},o.map((function(e,t){var o=e.url,i=e.name,l=e.description,c=e.configParams,u=void 0===c?{}:c,s=e.config,m=void 0===s?{}:s,f=e.error,p=e.loading;return n.createElement("li",{className:"plugin-settings__plugin",key:o},n.createElement("div",{className:"plugin-settings__plugin-details"},n.createElement("span",{className:"plugin-settings__plugin-name"},i),n.createElement("code",{className:"plugin-settings__plugin-url"},o),n.createElement("small",{className:"plugin-settings__plugin-description"},l)),f&&n.createElement("span",{className:"plugin-settings__plugin-warning",title:f},n.createElement(N,{name:"warn"})),p&&n.createElement("span",{className:"plugin-settings__plugin-loading",title:"Loading plugin"},n.createElement(N,{name:"loading"})),n.createElement("button",{type:"button",className:"button plugin-settings__button plugin-settings__button--delete",onClick:function(){return r(o)}},n.createElement(N,{name:"delete"})),n.createElement("div",{className:"plugin-settings__config-options"},Object.keys(u).map((function(e){var r=u[e],i=r.type,l=r.label;return n.createElement(Ge,{id:"".concat(e,"-").concat(t),key:"".concat(e,"-").concat(t),labelText:l,type:Xl(i),value:ec(i,m[e]),onChange:function(t){a(o,e,ec(i,t))}})}))))}))))};tc.propTypes={pluginAdd:g().func.isRequired,pluginRemove:g().func.isRequired,pluginUpdateConfig:g().func.isRequired,plugins:g().array.isRequired};var rc=Jl(tc),nc=(0,u.$j)((function(e){var t;return{use:!!e.dropboxStorage.use,loggedIn:!!e.dropboxStorage.refreshToken,path:e.dropboxStorage.path||"",autoDropboxSync:(null===(t=e.dropboxStorage)||void 0===t?void 0:t.autoDropboxSync)||!1}}),(function(e){return{logout:function(){e({type:d.Hn})},setDropboxStorage:function(t){e({type:d.wb,payload:t})},startAuth:function(t){e({type:d.eh,payload:t})}}})),ac=r(35820);function oc(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==r)return;var n,a,o=[],i=!0,l=!1;try{for(r=r.call(e);!(i=(n=r.next()).done)&&(o.push(n.value),!t||o.length!==t);i=!0);}catch(e){l=!0,a=e}finally{try{i||null==r.return||r.return()}finally{if(l)throw a}}return o}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return ic(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return ic(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ic(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var lc=function(e){var t=e.use,r=e.loggedIn,a=e.logout,o=e.startAuth,i=e.setDropboxStorage,l=e.path,c=e.autoDropboxSync,u=oc((0,n.useState)(l),2),s=u[0],f=u[1];return n.createElement(n.Fragment,null,n.createElement("label",{className:m()("inputgroup checkgroup",{"checkgroup--checked":t})},n.createElement("span",{className:"inputgroup__label",title:"Use Dropbox as storage"},"Use Dropbox as storage"),n.createElement("span",{className:"checkgroup__checkbox-wrapper"},n.createElement("input",{type:"checkbox",className:"checkgroup__input",checked:t,onChange:function(e){var t=e.target;i({use:t.checked})}}),n.createElement(N,{name:"checkmark"}))),n.createElement(Ge,{id:"dropbox-settings-path",value:s,onChange:f,onBlur:function(){f((0,ac.Z)(s)),i({path:(0,ac.Z)(s)})},labelText:"Subfolder"},n.createElement("a",{className:"inputgroup__note",title:"Open Dropbox folder:\nhttps://www.dropbox.com/home/Apps/GameBoyPrinter/".concat(s),href:"https://www.dropbox.com/home/Apps/GameBoyPrinter/".concat(s),target:"_blank",rel:"noreferrer"},"open")),t?n.createElement(n.Fragment,null,n.createElement("label",{className:m()("inputgroup checkgroup",{"checkgroup--checked":c})},n.createElement("span",{className:"inputgroup__label",title:"Enable enhanced dropbox sync (experimental)"},"Enable enhanced dropbox sync",n.createElement("span",{className:"inputgroup__note inputgroup__note--warn"},"This is currently an experimental feature.")),n.createElement("span",{className:"checkgroup__checkbox-wrapper"},n.createElement("input",{type:"checkbox",className:"checkgroup__input",checked:c,onChange:function(e){var t=e.target;i({autoDropboxSync:t.checked}),window.setTimeout((function(){window.location.reload()}),300)}}),n.createElement(N,{name:"checkmark"}))),n.createElement("div",{className:"inputgroup buttongroup"},n.createElement("button",{type:"button",className:"button",disabled:r,onClick:o},"Authenticate"),n.createElement("button",{type:"button",className:"button",disabled:!r,onClick:a},"Logout"))):null)};lc.propTypes={logout:g().func.isRequired,startAuth:g().func.isRequired,setDropboxStorage:g().func.isRequired,loggedIn:g().bool.isRequired,use:g().bool.isRequired,path:g().string.isRequired,autoDropboxSync:g().bool.isRequired};var cc=nc(lc),uc=function(e){return n.createElement("div",{className:m()("wifi-settings__ap-group",{"wifi-settings__ap-group--delete":e.delete})},n.createElement(Ge,{id:"".concat(e.id,"-settings-ap-ssid"),labelText:"Network SSID",type:"text",value:e.ssid,disabled:!e.isNew||e.disabled,onChange:function(t){e.update({ssid:t})},buttonOnClick:function(){e.update({delete:!e.delete})},buttonIcon:"delete"}),n.createElement(Ge,{id:"".concat(e.id,"-settings-ap-psk"),labelText:"Network Password",type:"password",value:e.psk,disabled:e.disabled,onChange:function(t){e.update({psk:t})}}))};uc.propTypes={id:g().string.isRequired,ssid:g().string.isRequired,isNew:g().bool.isRequired,delete:g().bool.isRequired,psk:g().string.isRequired,update:g().func.isRequired,disabled:g().bool.isRequired};var sc=uc;function mc(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==r)return;var n,a,o=[],i=!0,l=!1;try{for(r=r.call(e);!(i=(n=r.next()).done)&&(o.push(n.value),!t||o.length!==t);i=!0);}catch(e){l=!0,a=e}finally{try{i||null==r.return||r.return()}finally{if(l)throw a}}return o}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return fc(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return fc(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function fc(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function pc(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function dc(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?pc(Object(r),!0).forEach((function(t){hc(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):pc(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function hc(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var yc=function(e,t){t("loading");var r=new AbortController,n=r.signal;return fetch("/wificonfig/get",{signal:n}).then((function(e){return e.json()})).then((function(r){r.mdns=r.mdns||"",r.ap=r.ap||{ssid:"",psk:""},r.networks=r.networks||[],t(""),e(r)})).catch((function(){n.aborted||(t("error"),e(null))})),function(){r.abort()}},gc=function(){var e=(0,n.useRef)(null),t=mc((0,n.useState)(null),2),r=t[0],a=t[1],o=mc((0,n.useState)("loading"),2),i=o[0],l=o[1];if((0,n.useEffect)((function(){return yc(a,l)}),[a,l]),"loading"===i||!r)return n.createElement("div",{className:"wifi-settings--loading"});var c=""!==i&&"updated"!==i;return n.createElement("div",{className:"wifi-settings",ref:e},n.createElement("h3",{className:"wifi-settings__subheadline"},"Host Settings"),n.createElement(Ge,{id:"settings-mdns",labelText:"mDNS Name (Bonjour/Avahi)",type:"text",disabled:c,value:r.mdns,onChange:function(e){l("updated"),a(dc(dc({},r),{},{mdns:e.trim()}))}}),n.createElement(Ge,{id:"settings-ap-ssid",labelText:"Accesspoint SSID",type:"text",disabled:c,value:r.ap.ssid,onChange:function(e){l("updated"),a(dc(dc({},r),{},{ap:dc(dc({},r.ap),{},{ssid:e.trim()})}))}}),n.createElement(Ge,{id:"settings-ap-psk",labelText:"Accesspoint Password",type:"password",disabled:c,value:r.ap.psk,onChange:function(e){l("updated"),a(dc(dc({},r),{},{ap:dc(dc({},r.ap),{},{psk:e.trim()})}))}}),n.createElement("h3",{className:"wifi-settings__subheadline"},"Networks",n.createElement("button",{type:"button",disabled:c,className:"button wifi-settings__button wifi-settings__button--add",onClick:function(){var e=r.networks;e.push({ssid:"",psk:"",delete:!1,isNew:!0}),a(dc(dc({},r),{},{networks:e}))}},n.createElement(N,{name:"add"}))),n.createElement("ul",{className:"wifi-settings__ap-groups"},r.networks.map((function(e,t){var o=e.ssid,i=e.psk,u=void 0===i?"":i,s=e.delete,m=void 0!==s&&s,f=e.isNew,p=void 0!==f&&f;return n.createElement(sc,{key:"apconf-".concat(t),id:"apconf-".concat(t),ssid:o,psk:u,disabled:c,isNew:p,delete:m,update:function(n){var o=r.networks;o[t]=dc(dc({},e),n),l("updated"),a(dc(dc({},r),{},{networks:o}))}})}))),n.createElement("div",{className:"inputgroup buttongroup"},n.createElement("button",{type:"button",disabled:"updated"!==i,className:"button",onClick:function(){return function(e,t,r){var n=dc(dc({},r),{},{networks:r.networks.filter((function(e){return!0===e.delete||e.psk})).filter((function(e){return e.ssid})).filter((function(e){return!(e.delete&&e.isNew)})).map((function(e){var t=e.ssid,r=e.psk;return{delete:e.delete,ssid:t,psk:r}}))});t("loading"),fetch("/wificonfig/set",{method:"post",body:JSON.stringify(n)}).then((function(e){return e.json()})).then((function(e){if(e.error)throw new Error(e.error)})).catch((function(r){alert(r),t("error"),e(null)})).then((function(){yc(e,t)}))}(a,l,r)}},"Save WiFi-Settings")))},bc=function(){var e=(0,a.cP)([{path:"/",element:n.createElement(jl,null),errorElement:n.createElement(Il,null),children:[{path:"/home",element:n.createElement(c,null)},{path:"/gallery",element:n.createElement(Ne,null),handle:{headline:"Gallery"},children:[{path:"page/:page",element:n.createElement(Ne,null)}]},{path:"/import",element:n.createElement(Ze,null),handle:{headline:"Import"}},{path:"/palettes",element:n.createElement(vt,null),handle:{headline:"Palettes"}},{path:"/frames",element:n.createElement(Mt,null),handle:{headline:"Frames"}},{path:"/settings",element:n.createElement(sr,null),handle:{headline:"Settings"},children:[{path:"generic",element:n.createElement(Ml,null),handle:{headline:"Generic Settings"}},{path:"git",element:n.createElement(Wl,null),handle:{headline:"Git Settings"}},{path:"plugins",element:n.createElement(rc,null),handle:{headline:"Plugin Settings"}},{path:"dropbox",element:n.createElement(cc,null),handle:{headline:"Dropbox Settings"}},"esp8266"===(0,lr.d)().env||"webpack-dev"===(0,lr.d)().env?{path:"wifi",element:n.createElement(gc,null),handle:{headline:"WiFi Settings"}}:null].filter(Boolean)},{path:"/webusb",element:n.createElement(pn,null)}]}]);return n.createElement(o.pG,{router:e})}},35820:function(e,t,r){r(74916),r(15306);t.Z=function(e){return e.replace(/[^a-z0-9/\\._-]/gi,"").replace(/[\\/]+/gi,"/").replace(/^\//,"").replace(/\/$/,"")}}}]);