(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{372:function(e,t,a){},376:function(e,t,a){},377:function(e,t,a){},378:function(e,t,a){},379:function(e,t,a){},380:function(e,t,a){},381:function(e,t,a){},382:function(e,t,a){},384:function(e,t,a){},385:function(e,t,a){},386:function(e,t,a){},387:function(e,t,a){},388:function(e,t,a){},389:function(e,t,a){},390:function(e,t,a){},391:function(e,t,a){},392:function(e,t,a){},393:function(e,t,a){},394:function(e,t,a){},396:function(e,t,a){},397:function(e,t,a){},398:function(e,t,a){},399:function(e,t,a){},401:function(e,t,a){},402:function(e,t,a){},403:function(e,t,a){},404:function(e,t,a){},405:function(e,t,a){},406:function(e,t,a){},407:function(e,t,a){},408:function(e,t,a){},409:function(e,t,a){},410:function(e,t,a){},411:function(e,t,a){},412:function(e,t,a){},413:function(e,t,a){},414:function(e,t,a){},415:function(e,t,a){},416:function(e,t,a){},417:function(e,t,a){},512:function(e,t,a){"use strict";a.r(t);var n=a(145),r=(a(3),a(13),a(14),a(6),a(16),a(17),a(4),a(9),a(8),a(15),a(2),a(5),a(12),a(11),a(184));function o(e){return function(e){if(Array.isArray(e))return i(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return i(e,t);var a=Object.prototype.toString.call(e).slice(8,-1);"Object"===a&&e.constructor&&(a=e.constructor.name);if("Map"===a||"Set"===a)return Array.from(e);if("Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a))return i(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function i(e,t){(null==t||t>e.length)&&(t=e.length);for(var a=0,n=new Array(t);a<t;a++)n[a]=e[a];return n}var s=function(e){var t=e.images,a=e.filter.activeTags;return o(t).filter(Object(r.a)(a)).length},l=Object(n.b)((function(e){return{imageCount:e.images.length,pageSize:e.pageSize,selectedCount:e.imageSelection.length,filteredCount:s(e)}}),(function(){return{}})),c=(a(28),a(114),a(0)),u=a.n(c),p=a(195),m=a.n(p),f=a(348),d=a(338),h=Object(n.b)((function(e){return{importQueueSize:e.importQueueSize}}),(function(){return{}})),b=(a(343),a(196),a(34),a(197),a(198),a(199),a(337)),g=a.n(b),y=(a(372),function(e){switch(e.name){case"download":return u.a.createElement("svg",{className:"svg",viewBox:"0 0 20 20"},u.a.createElement("path",{d:"M8 3v7H5s5 6 5 6c0 0 5-6 5-6h-3V3z"}),u.a.createElement("path",{d:"M5 15v2l10 0V15z"}));case"delete":return u.a.createElement("svg",{className:"svg",viewBox:"0 0 20 20"},u.a.createElement("path",{d:"M13 5v10h-1V5zM7 5v10H6V5zm4 0v10h-1V5zM9 5v10H8V5zM4 3v2h1v12h9V5h1V3h-4V2H8v1z"}));case"share":return u.a.createElement("svg",{className:"svg",viewBox:"0 0 20 20"},u.a.createElement("path",{d:"M14 3.5A2.5 2.5 0 0011.5 6a2.5 2.5 0 00.025.336l-3.85 1.812A2.5 2.5 0 006 7.5 2.5 2.5 0 003.5 10 2.5 2.5 0 006 12.5a2.5 2.5 0 001.676-.648l3.85 1.812A2.5 2.5 0 0011.5 14a2.5 2.5 0 002.5 2.5 2.5 2.5 0 002.5-2.5 2.5 2.5 0 00-2.5-2.5 2.5 2.5 0 00-1.836.807l-3.728-1.754A2.5 2.5 0 008.5 10a2.5 2.5 0 00-.066-.553l3.73-1.754A2.5 2.5 0 0014 8.5 2.5 2.5 0 0016.5 6 2.5 2.5 0 0014 3.5z"}));case"edit":return u.a.createElement("svg",{className:"svg",viewBox:"0 0 20 20"},u.a.createElement("path",{d:"M4 14.978v1.978L16 17v-2.022zM13.5 3l-8 8-1 3.5 3.5-1 8-8L13.5 3zm0 .8l.85.85-9.1 9.1L6 11.5l7.5-7.7z"}));case"view":return u.a.createElement("svg",{className:"svg",viewBox:"0 0 20 20"},u.a.createElement("path",{d:"M5.506 6.6L1 10l4.504 3.4c1.199.88 2.814 1.372 4.496 1.371 1.682 0 3.296-.492 4.494-1.37L19 10l-4.504-3.4C13.297 5.72 11.711 5.228 10 5.237c-1.711.009-3.318.5-4.494 1.363zm4.152-.502c2.101 0 3.805 1.747 3.805 3.902 0 2.155-1.704 3.902-3.805 3.902-2.1 0-3.804-1.747-3.804-3.902 0-2.155 1.703-3.902 3.804-3.902zm-.894 2.035c-1.006 0-1.821.836-1.82 1.867-.001 1.031.814 1.868 1.82 1.867 1.004 0 1.818-.836 1.818-1.867 0-1.03-.814-1.867-1.818-1.867z"}));case"animate":return u.a.createElement("svg",{className:"svg",viewBox:"0 0 20 20"},u.a.createElement("path",{d:"M3 4v12h14V4zm.5.5h2v2h-2zm2.75 0h2v2h-2zM9 4.5h2v2H9zm2.75 0h2v2h-2zm2.75 0h2v2h-2zM4 7h12v6H4zm-.5 6.5h2v2h-2zm2.75 0h2v2h-2zm2.75 0h2v2H9zm2.75 0h2v2h-2zm2.75 0h2v2h-2z"}));case"reset":return u.a.createElement("svg",{className:"svg",viewBox:"0 0 20 20"},u.a.createElement("path",{d:"M6 10a4 4 0 104-4v2L4 5l6-3v2a6 6 0 11-6 6"}));case"checkmark":return u.a.createElement("svg",{className:"svg",viewBox:"0 0 20 20"},u.a.createElement("path",{d:"M15 5v10H5V5zM3 3v14h14V3z"}),u.a.createElement("path",{className:"tick",d:"M5.5 11l3 3 6-6.5L13 6l-4.5 5L7 9.5z"}));case"circle":return u.a.createElement("svg",{className:"svg",viewBox:"0 0 20 20"},u.a.createElement("circle",{r:"8",cx:"10",cy:"10"}));case"add":return u.a.createElement("svg",{className:"svg",viewBox:"0 0 20 20"},u.a.createElement("path",{d:"M8 2v6H2v4h6v6h4v-6h6V8h-6V2z"}));case"remove":return u.a.createElement("svg",{className:"svg",viewBox:"0 0 20 20"},u.a.createElement("path",{d:"M2 8v4h16V8z"}));case"save":return u.a.createElement("svg",{className:"svg",viewBox:"0 0 20 20"},u.a.createElement("path",{d:"M12 4v3h-2V4zM5 15v-4h10v4zm8-7H6l.01-4H4v12h12V6l-2-2h-1z"}));case"sort":return u.a.createElement("svg",{className:"svg",viewBox:"0 0 20 20"},u.a.createElement("path",{d:"M4.5 8.5L10 3l5.5 5.5zm0 3L10 17l5.5-5.5z"}));case"list":return u.a.createElement("svg",{className:"svg",viewBox:"0 0 40 40"},u.a.createElement("path",{d:"M6 6v4h28V6zm0 8v4h28v-4zm0 8v4h28v-4zm0 8v4h28V30z"}));case"1x":return u.a.createElement("svg",{className:"svg",viewBox:"0 0 40 40"},u.a.createElement("path",{d:"M5 5v6h6V5zm8 0v6h6V5zm8 0v6h6V5zm8 0v6h6V5zM5 13v6h6v-6zm8 0v6h6v-6zm8 0v6h6v-6zm8 0v6h6v-6zM5 21v6h6v-6zm8 0v6h6v-6zm8 0v6h6v-6zm8 0v6h6v-6zM5 29v6h6v-6zm8 0v6h6v-6zm8 0v6h6v-6zm8 0v6h6v-6z"}));case"2x":return u.a.createElement("svg",{className:"svg",viewBox:"0 0 40 40"},u.a.createElement("path",{d:"M22 6v12h12V6zm0 16v12h12V22zM6 6v12h12V6zm0 16v12h12V22z"}));case"3x":return u.a.createElement("svg",{className:"svg",viewBox:"0 0 40 40"},u.a.createElement("path",{d:"M30 30V10H10v20"}));case"4x":return u.a.createElement("svg",{className:"svg",viewBox:"0 0 40 40"},u.a.createElement("path",{d:"M34 34V6H6v28z"}));case"close":return u.a.createElement("svg",{className:"svg",viewBox:"0 0 40 40"},u.a.createElement("path",{d:"M7 3l12 17L7 37h2l11-15.584L31 37h2L21 20 33 3h-2L20 18.584 9 3H7z"}));case"fullscreen":return u.a.createElement("svg",{className:"svg",viewBox:"0 0 40 40"},u.a.createElement("path",{d:"M37 13h-2V9h-5V7h7zM3 13h2V9h5V7H3zm34 14h-2v4h-5v2h7zM3 27h2v4h5v2H3z"}));case"right":return u.a.createElement("svg",{className:"svg",viewBox:"0 0 40 40"},u.a.createElement("path",{d:"M17 3l12 17-12 17h-2l12-17L15 3z"}));case"left":return u.a.createElement("svg",{className:"svg",viewBox:"0 0 40 40"},u.a.createElement("path",{d:"M23 3L11 20l12 17h2L13 20 25 3z"}));case"burger":return u.a.createElement("svg",{className:"svg",viewBox:"0 0 40 40"},u.a.createElement("path",{d:"M2 6v4h36V6zm0 12v4h36v-4zm0 12v4h36v-4z"}));case"close-nav":return u.a.createElement("svg",{className:"svg",viewBox:"0 0 40 40"},u.a.createElement("path",{d:"M5.5 2.5l-3 3L17 20 2.5 34.5l3 3L20 23l14.5 14.5 3-3L23 20 37.5 5.5l-3-3L20 17z"}));case"filter":return u.a.createElement("svg",{className:"svg",viewBox:"0 0 40 40"},u.a.createElement("path",{d:"M34 10V6H6v4l12 12v12h4V22z"}));default:return null}});y.propTypes={name:m.a.string.isRequired},y.defaultProps={};var v=y;function _(e){return(_="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function E(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function S(e,t){return(S=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function k(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,n=R(e);if(t){var r=R(this).constructor;a=Reflect.construct(n,arguments,r)}else a=n.apply(this,arguments);return N(this,a)}}function N(e,t){return!t||"object"!==_(t)&&"function"!=typeof t?w(e):t}function w(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function R(e){return(R=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var O=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&S(e,t)}(o,e);var t,a,n,r=k(o);function o(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,o),(t=r.call(this,e)).state={mobileNavOpen:!1},t.closeMobileNav=t.closeMobileNav.bind(w(t)),t}return t=o,(a=[{key:"closeMobileNav",value:function(){this.setState({mobileNavOpen:!1})}},{key:"render",value:function(){var e=this;return u.a.createElement("nav",{className:g()("navigation",{"navigation--mobile-open":this.state.mobileNavOpen})},u.a.createElement("button",{className:"navigation__burger-button",type:"button",onClick:function(){var t=!e.state.mobileNavOpen;e.setState({mobileNavOpen:t})}},u.a.createElement(v,{name:this.state.mobileNavOpen?"close-nav":"burger"})),u.a.createElement("ul",{className:"navigation__list"},u.a.createElement("li",{className:"navigation__entry"},u.a.createElement(f.b,{to:"/",activeClassName:"navigation__link--active",className:"navigation__link",exact:!0,onClick:this.closeMobileNav},"Home")),u.a.createElement("li",{className:"navigation__entry"},u.a.createElement(f.b,{to:"/gallery",activeClassName:"navigation__link--active",className:"navigation__link",exact:!0,onClick:this.closeMobileNav},"Gallery")),u.a.createElement("li",{className:"navigation__entry"},u.a.createElement(f.b,{to:"/import",activeClassName:"navigation__link--active",className:"navigation__link",exact:!0,onClick:this.closeMobileNav},"Import")),u.a.createElement("li",{className:"navigation__entry"},u.a.createElement(f.b,{to:"/palettes",activeClassName:"navigation__link--active",className:"navigation__link",exact:!0,onClick:this.closeMobileNav},"Palettes")),u.a.createElement("li",{className:"navigation__entry"},u.a.createElement(f.b,{to:"/settings",activeClassName:"navigation__link--active",className:"navigation__link",exact:!0,onClick:this.closeMobileNav},"Settings"))),this.props.importQueueSize>0?u.a.createElement("div",{className:"navigation__queuesize"},this.props.importQueueSize):null)}}])&&E(t.prototype,a),n&&E(t,n),o}(u.a.Component);O.propTypes={importQueueSize:m.a.number.isRequired},O.defaultProps={};var P=O,C=(a(376),h(P)),j=Object(n.b)((function(e){return 1===e.framesMessage?{message:{type:"FRAMES_MESSAGE_HIDE",headline:"You might be temporarily missing some frames",text:["In a recent change the pre-compiled frames have been removed from this application.","The application now however gives you the opportunity to add all fames you like by yourself and also share them with others.","Maybe you have designed some frames by yourself, or you have aquired some previously unknown frames.",'To see how you can add the frames, check the "Frames" explanation on the startpage of this app.']}}:{}}),(function(e){return{confirm:function(t){e({type:t})}}})),T=(a(21),Object(n.b)((function(e){return{isFullscreen:e.isFullscreen}}),(function(){return{}}))),x=Object(n.b)((function(){return{}}),(function(){return{}})),I=function(e){var t=e.confirm,a=e.deny;return u.a.createElement("div",{className:"buttons"},a?u.a.createElement("button",{className:"buttons__button buttons__button--deny",type:"button",onClick:a},"Cancel"):null,t?u.a.createElement("button",{className:"buttons__button buttons__button--confirm",type:"button",onClick:t,autoFocus:!0},"Ok"):null)};I.propTypes={confirm:m.a.func,deny:m.a.func},I.defaultProps={confirm:null,deny:null};var F=I,q=(a(377),x(F)),A=function(e){return u.a.createElement("div",{className:g()("lightbox ".concat(e.className),{"lightbox--fullscreen":e.isFullscreen})},u.a.createElement("button",{type:"button",className:"lightbox__backdrop ".concat(e.className,"__backdrop"),onClick:e.deny}),u.a.createElement("div",{className:"lightbox__box ".concat(e.className,"__box"),style:{height:e.height?"".concat(e.height,"px"):null}},u.a.createElement("div",{className:"lightbox__box-content ".concat(e.className,"__box-content")},e.header?u.a.createElement("div",{className:"lightbox__header ".concat(e.className,"__header")},e.header):null,e.children),e.confirm||e.deny?u.a.createElement(q,{confirm:e.confirm,deny:e.deny}):null))};A.propTypes={height:m.a.number,className:m.a.string,header:m.a.string,isFullscreen:m.a.bool,children:m.a.oneOfType([m.a.arrayOf(m.a.node),m.a.node]),confirm:m.a.func,deny:m.a.func},A.defaultProps={height:null,header:null,isFullscreen:!1,className:"",confirm:null,children:null,deny:null};var D=A,M=(a(378),T(D)),z=function(e){var t=e.message,a=e.confirm;return t?u.a.createElement(M,{className:"info-box",confirm:function(){return a(t.type)},header:t.headline},u.a.createElement("div",{className:"info-box__message"},t.text.map((function(e,t){return u.a.createElement("p",{key:t},e)})))):null};z.propTypes={message:m.a.object,confirm:m.a.func.isRequired},z.defaultProps={message:null};var U=z,L=(a(379),j(U)),B=Object(n.b)((function(e){return{message:e.confirmation.message||null}}),(function(e){return{confirm:function(){e({type:"CONFIRM_CONFIRMATION"})},deny:function(){e({type:"DENY_CONFIRMATION"})}}})),G=function(e){return e.message?u.a.createElement(M,{className:"confirmation",confirm:e.confirm,deny:e.deny,header:e.message}):null};G.propTypes={message:m.a.string,confirm:m.a.func.isRequired,deny:m.a.func.isRequired},G.defaultProps={message:null};var V=G,H=(a(380),B(V)),K=(a(37),a(146)),W=Object(n.b)((function(e){var t,a;e.editImage.hashes?(t=e.editImage.palette,a=Object(K.a)(e,e.editImage.hashes,e.editImage.frame)):(t=e.palettes.find((function(t){return t.shortName===e.editImage.palette})),a=null);var n=e.windowDimensions.width<=480?e.windowDimensions.height:Math.min(800,e.windowDimensions.height);return{batch:e.editImage.batch,created:e.editImage.created||null,hash:e.editImage.hash,tags:e.editImage.tags,title:e.editImage.title,hashes:e.editImage.hashes,frame:e.editImage.frame,lockFrame:e.editImage.lockFrame||!1,palette:t,invertPalette:e.editImage.invertPalette||!1,frames:a,height:n}}),(function(e){return{updateTitle:function(t){e({type:"UPDATE_EDIT_IMAGE",payload:{title:t,confirmed:!0}})},updatePalette:function(t,a){e({type:"UPDATE_EDIT_IMAGE",payload:{palette:t,confirmed:a}})},updateCreated:function(t){e({type:"UPDATE_EDIT_IMAGE",payload:{created:t,confirmed:!0}})},updateInvertPalette:function(t){e({type:"UPDATE_EDIT_IMAGE",payload:{invertPalette:t,confirmed:!0}})},updateFrame:function(t){e({type:"UPDATE_EDIT_IMAGE",payload:{frame:t,confirmed:!0}})},updateFrameLock:function(t){e({type:"UPDATE_EDIT_IMAGE",payload:{lockFrame:t,confirmed:!0}})},updateTags:function(t,a){e({type:"UPDATE_EDIT_IMAGE",payload:{tag:a,mode:t,confirmed:!0}})},save:function(){e({type:"SAVE_EDIT_IMAGE"})},cancel:function(){e({type:"CANCEL_EDIT_IMAGE"})}}})),Y=(a(86),a(32),Object(n.b)((function(){return{}}),(function(){return{}}))),X=a(84),J=a(71);function $(e){return($="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Q(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function Z(e,t){return(Z=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function ee(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,n=ae(e);if(t){var r=ae(this).constructor;a=Reflect.construct(n,arguments,r)}else a=n.apply(this,arguments);return te(this,a)}}function te(e,t){return!t||"object"!==$(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function ae(e){return(ae=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var ne=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Z(e,t)}(o,e);var t,a,n,r=ee(o);function o(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,o),(t=r.call(this,e)).canvasRef=u.a.createRef(),t}return t=o,(a=[{key:"componentDidMount",value:function(){this.updateCanvasContent()}},{key:"componentDidUpdate",value:function(){this.updateCanvasContent()}},{key:"updateCanvasContent",value:function(){if(this.props.palette)try{this.props.palette.palette?(new X.a).update({canvas:this.canvasRef.current,tiles:this.props.tiles,palette:this.props.palette.palette,lockFrame:this.props.lockFrame,invertPalette:this.props.invertPalette}):(new J.a).update({canvas:this.canvasRef.current,tiles:this.props.tiles,palette:this.props.palette,lockFrame:this.props.lockFrame})}catch(e){console.error("error in GameBoyImage: ".concat(e.message))}}},{key:"render",value:function(){return u.a.createElement("canvas",{className:"gameboy-image",width:160,ref:this.canvasRef})}}])&&Q(t.prototype,a),n&&Q(t,n),o}(c.Component);ne.propTypes={tiles:m.a.oneOfType([m.a.arrayOf(m.a.string),m.a.arrayOf(m.a.object)]).isRequired,palette:m.a.object,lockFrame:m.a.bool.isRequired,invertPalette:m.a.bool.isRequired},ne.defaultProps={palette:null};var re=ne,oe=(a(381),Y(re)),ie=Object(n.b)((function(){return{}}),(function(){return{}})),se=Object(n.b)((function(e){return{frames:e.frames}}),(function(){return{}})),le=(a(26),function(e){return u.a.createElement(u.a.Fragment,null,u.a.createElement("select",{className:"frame-select",value:e.frame,onChange:function(t){e.updateFrame(t.target.value)}},u.a.createElement("option",{value:""},e.noFrameOption),e.frames.map((function(e){var t=e.id,a=e.name;return u.a.createElement("option",{key:t,value:t},"".concat(a," (").concat(t,")"))}))),u.a.createElement("label",{className:g()("frame-select__check-label",{"frame-select__check-label--checked":e.lockFrame})},u.a.createElement("input",{type:"checkbox",className:"frame-select__checkbox",checked:e.lockFrame,onChange:function(t){var a=t.target;e.updateFrameLock(a.checked)}}),u.a.createElement(v,{name:"checkmark"}),u.a.createElement("span",{className:"frame-select__check-label-text"},"Palette does not affect frame")))});le.propTypes={frame:m.a.string.isRequired,frames:m.a.array.isRequired,updateFrame:m.a.func.isRequired,updateFrameLock:m.a.func.isRequired,lockFrame:m.a.bool.isRequired,noFrameOption:m.a.string},le.defaultProps={noFrameOption:"As imported / No frame"};var ce=le,ue=(a(382),se(ce)),pe=Object(n.b)((function(){return{}}),(function(){return{}})),me=a(383),fe=Object(n.b)((function(){return{}}),(function(){return{}})),de=a(507),he=function(e){var t=e.domain,a=e.handle,n=(0,e.getHandleProps)(a.id),r=n.onKeyDown,o=n.onMouseDown,i=n.onTouchStart;return u.a.createElement("button",{role:"slider",type:"button","aria-valuemin":t.min,"aria-valuemax":t.max,"aria-valuenow":a.value,className:"color-slider__handle",style:{left:"".concat(a.percent,"%")},onKeyDown:r,onMouseDown:o,onTouchStart:i})};he.propTypes={domain:m.a.array.isRequired,handle:m.a.shape({id:m.a.string.isRequired,value:m.a.number.isRequired,percent:m.a.number.isRequired}).isRequired,getHandleProps:m.a.func.isRequired},he.defaultProps={};var be=he,ge=function(e){var t=(0,e.getRailProps)(),a=t.onMouseDown,n=t.onTouchStart;return u.a.createElement("button",{type:"button",className:"color-slider__rail",onMouseDown:a,onTouchStart:n,tabIndex:"-1"},u.a.createElement("div",{className:"color-slider__rail-inner"}))};ge.propTypes={getRailProps:m.a.func.isRequired};var ye=ge,ve=[0,255],_e=function(e){return u.a.createElement("div",{className:"color-slider","data-color":e.color},u.a.createElement("button",{className:"color-slider__button color-slider__button--reset",type:"button",onClick:function(){e.onChange([0,85,170,255])}},u.a.createElement(v,{name:"reset"})),u.a.createElement(de.c,{className:"color-slider__root",mode:2,step:4,domain:ve,onUpdate:e.onChange,onChange:e.onChange,values:e.values},u.a.createElement(de.b,null,(function(e){var t=e.getRailProps;return u.a.createElement(ye,{getRailProps:t})})),u.a.createElement(de.a,null,(function(e){var t=e.handles,a=e.getHandleProps;return u.a.createElement("div",{className:"slider-handles"},t.map((function(e){return u.a.createElement(be,{key:e.id,handle:e,domain:ve,getHandleProps:a})})))}))))};_e.propTypes={color:m.a.oneOf(["r","g","b","n"]).isRequired,onChange:m.a.func.isRequired,values:m.a.array.isRequired};var Ee=_e,Se=(a(384),fe(Ee));function ke(e){return(ke="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Ne(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function we(e,t){return(we=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Re(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,n=Pe(e);if(t){var r=Pe(this).constructor;a=Reflect.construct(n,arguments,r)}else a=n.apply(this,arguments);return Oe(this,a)}}function Oe(e,t){return!t||"object"!==ke(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Pe(e){return(Pe=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var Ce=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&we(e,t)}(o,e);var t,a,n,r=Re(o);function o(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,o),(t=r.call(this,e)).state=e.values,t.sendUpdate=Object(me.debounce)(t.sendUpdate,150,!1),t}return t=o,(a=[{key:"change",value:function(e,t){var a,n,r;this.setState((r=t,(n=e)in(a={})?Object.defineProperty(a,n,{value:r,enumerable:!0,configurable:!0,writable:!0}):a[n]=r,a),this.sendUpdate)}},{key:"sendUpdate",value:function(){this.props.onChange(this.state,!0)}},{key:"render",value:function(){var e=this;return u.a.createElement("div",{className:"grey-select"},["r","g","b","n"].map((function(t){return u.a.createElement(Se,{key:"slider-".concat(t),color:t,values:e.state[t],onChange:function(a){e.change(t,a)}})})))}}])&&Ne(t.prototype,a),n&&Ne(t,n),o}(u.a.Component);Ce.propTypes={values:m.a.object.isRequired,onChange:m.a.func.isRequired},Ce.defaultProps={};var je=Ce,Te=(a(385),pe(je)),xe=Object(n.b)((function(e){return{palettes:e.palettes}}),(function(){return{}}));function Ie(e){return(Ie="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Fe(e){return function(e){if(Array.isArray(e))return qe(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return qe(e,t);var a=Object.prototype.toString.call(e).slice(8,-1);"Object"===a&&e.constructor&&(a=e.constructor.name);if("Map"===a||"Set"===a)return Array.from(e);if("Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a))return qe(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function qe(e,t){(null==t||t>e.length)&&(t=e.length);for(var a=0,n=new Array(t);a<t;a++)n[a]=e[a];return n}function Ae(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function De(e,t){return(De=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Me(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,n=Ue(e);if(t){var r=Ue(this).constructor;a=Reflect.construct(n,arguments,r)}else a=n.apply(this,arguments);return ze(this,a)}}function ze(e,t){return!t||"object"!==Ie(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Ue(e){return(Ue=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var Le=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&De(e,t)}(o,e);var t,a,n,r=Me(o);function o(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,o),(t=r.call(this,e)).state={initiallySelected:e.value},t}return t=o,(a=[{key:"render",value:function(){var e=this,t=Fe(this.props.palettes);return this.props.allowEmpty&&t.unshift({shortName:"",name:"As selected per image",palette:[]}),u.a.createElement(u.a.Fragment,null,u.a.createElement("select",{className:"palette-select",value:this.props.value,onChange:function(t){e.props.onChange(t.target.value,!0),e.setState({initiallySelected:t.target.value})}},t.map((function(e){var t=e.shortName,a=e.name;return u.a.createElement("option",{key:t,value:t},a)}))),u.a.createElement("label",{className:g()("palette-select__check-label",{"palette-select__check-label--checked":this.props.invertPalette})},u.a.createElement("input",{type:"checkbox",className:"palette-select__checkbox",checked:this.props.invertPalette,onChange:function(t){var a=t.target;e.props.updateInvertPalette(a.checked)}}),u.a.createElement(v,{name:"checkmark"}),u.a.createElement("span",{className:"palette-select__check-label-text"},"Invert Palette")),this.props.noFancy?null:u.a.createElement("ul",{className:"fancy-palette-select"},t.map((function(t){var a=t.shortName,n=t.name,r=t.palette;return u.a.createElement("li",{key:a,className:g()("fancy-palette-select__entry",{"fancy-palette-select__entry--active":e.state.initiallySelected===a})},u.a.createElement("button",{type:"button",className:"fancy-palette-select__button",title:n,onClick:function(){e.props.onChange(a,!0),e.setState({initiallySelected:a})},onMouseEnter:function(){e.props.onChange(a,!1)},onMouseLeave:function(){e.props.onChange(e.state.initiallySelected)}},u.a.createElement("span",{className:"fancy-palette-select__color",style:{backgroundColor:r[0]}}),u.a.createElement("span",{className:"fancy-palette-select__color",style:{backgroundColor:r[1]}}),u.a.createElement("span",{className:"fancy-palette-select__color",style:{backgroundColor:r[2]}}),u.a.createElement("span",{className:"fancy-palette-select__color",style:{backgroundColor:r[3]}})))}))))}}])&&Ae(t.prototype,a),n&&Ae(t,n),o}(u.a.Component);Le.propTypes={palettes:m.a.array.isRequired,value:m.a.string.isRequired,onChange:m.a.func.isRequired,invertPalette:m.a.bool.isRequired,updateInvertPalette:m.a.func.isRequired,noFancy:m.a.bool,allowEmpty:m.a.bool},Le.defaultProps={noFancy:!1,allowEmpty:!1};var Be=Le,Ge=(a(386),xe(Be)),Ve=Object(n.b)((function(){return{}}),(function(){return{}})),He=(a(52),a(56),a(105));function Ke(e){return(Ke="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function We(e){return function(e){if(Array.isArray(e))return Ye(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return Ye(e,t);var a=Object.prototype.toString.call(e).slice(8,-1);"Object"===a&&e.constructor&&(a=e.constructor.name);if("Map"===a||"Set"===a)return Array.from(e);if("Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a))return Ye(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Ye(e,t){(null==t||t>e.length)&&(t=e.length);for(var a=0,n=new Array(t);a<t;a++)n[a]=e[a];return n}function Xe(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function Je(e,t){return(Je=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function $e(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,n=Ze(e);if(t){var r=Ze(this).constructor;a=Reflect.construct(n,arguments,r)}else a=n.apply(this,arguments);return Qe(this,a)}}function Qe(e,t){return!t||"object"!==Ke(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Ze(e){return(Ze=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var et=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Je(e,t)}(o,e);var t,a,n,r=$e(o);function o(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,o),(t=r.call(this,e)).state={newTag:""},t}return t=o,(a=[{key:"addNewTag",value:function(e){e&&(this.props.updateTags("add",e),this.setState({newTag:""}))}},{key:"render",value:function(){var e=this,t=Object(He.a)([].concat(We(this.props.tags.initial),We(this.props.tags.add)));return u.a.createElement("ul",{className:"tags-select"},t.map((function(t){return u.a.createElement("li",{className:g()("tags-select__tag",{"tags-select__tag--add":e.props.tags.add.includes(t),"tags-select__tag--remove":e.props.tags.remove.includes(t)}),key:t},u.a.createElement("button",{type:"button",className:"tags-select__button tags-select__button--add",onClick:function(){return e.props.updateTags("add",t)}},u.a.createElement(v,{name:"add"})),u.a.createElement("button",{type:"button",className:"tags-select__button tags-select__button--remove",onClick:function(){return e.props.updateTags("remove",t)}},u.a.createElement(v,{name:"remove"})),u.a.createElement("span",{className:"tags-select__tag-name"},t))})),u.a.createElement("li",{className:"tags-select__tag tags-select__tag--input"},u.a.createElement("input",{type:"text",className:"tags-select__tag-name",onChange:function(t){var a=t.target;e.setState({newTag:a.value})},onBlur:function(t){var a=t.target;e.addNewTag(a.value)},onKeyUp:function(t){switch(t.key){case"Enter":e.addNewTag(t.target.value)}},value:this.state.newTag})))}}])&&Xe(t.prototype,a),n&&Xe(t,n),o}(u.a.Component);et.propTypes={tags:m.a.shape({initial:m.a.array.isRequired,add:m.a.array.isRequired,remove:m.a.array.isRequired}).isRequired,updateTags:m.a.func.isRequired},et.defaultProps={};var tt=et,at=(a(387),Ve(tt)),nt=Object(n.b)((function(){return{}}),(function(){return{}})),rt=a(46),ot=a.n(rt),it=a(40),st=function(e){return u.a.createElement("label",{className:"image-meta-form"},u.a.createElement("span",{className:"image-meta-form__label-text"},"Edit Date/Time"),u.a.createElement("input",{type:"datetime-local",className:"image-meta-form__date",value:e.created?ot()(e.created).format(it.c):"",onChange:function(t){var a=t.target;e.updatecreated(ot()(a.value).format(it.a))}}))};st.propTypes={created:m.a.string,updatecreated:m.a.func.isRequired},st.defaultProps={created:null};var lt=st,ct=(a(388),nt(lt));function ut(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var a=[],n=!0,r=!1,o=void 0;try{for(var i,s=e[Symbol.iterator]();!(n=(i=s.next()).done)&&(a.push(i.value),!t||a.length!==t);n=!0);}catch(e){r=!0,o=e}finally{try{n||null==s.return||s.return()}finally{if(r)throw o}}return a}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return pt(e,t);var a=Object.prototype.toString.call(e).slice(8,-1);"Object"===a&&e.constructor&&(a=e.constructor.name);if("Map"===a||"Set"===a)return Array.from(e);if("Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a))return pt(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function pt(e,t){(null==t||t>e.length)&&(t=e.length);for(var a=0,n=new Array(t);a<t;a++)n[a]=e[a];return n}var mt=function(e){var t=ut(Object(c.useState)(0),2),a=t[0],n=t[1],r=function(e){return function(){n(e)}};return u.a.createElement("div",{className:"edit-image-tabs"},u.a.createElement("ul",{className:"edit-image-tabs__list",style:{marginLeft:"-".concat(100*a,"%")}},u.a.createElement("li",{className:g()("edit-image-tabs__tab",{"edit-image-tabs__tab--active":0===a}),onFocus:r(0),onClick:r(0)},e.hashes?u.a.createElement(u.a.Fragment,null,u.a.createElement("button",{type:"button",className:"edit-image-tabs__button"},"Edit Greytones"),u.a.createElement(Te,{values:e.palette,onChange:e.updatePalette})):u.a.createElement(u.a.Fragment,null,u.a.createElement("button",{type:"button",className:"edit-image-tabs__button"},"Select Palette"),u.a.createElement(Ge,{value:e.palette?e.palette.shortName:"",invertPalette:e.invertPalette,onChange:e.updatePalette,updateInvertPalette:e.updateInvertPalette}))),e.regularImage?u.a.createElement("li",{className:g()("edit-image-tabs__tab",{"edit-image-tabs__tab--active":1===a}),onFocus:r(1),onClick:r(1)},u.a.createElement("button",{type:"button",className:"edit-image-tabs__button"},"Select Frame"),u.a.createElement(ue,{updateFrame:e.updateFrame,updateFrameLock:e.updateFrameLock,frame:e.frame||"",lockFrame:e.lockFrame})):null,u.a.createElement("li",{className:g()("edit-image-tabs__tab",{"edit-image-tabs__tab--active":2===a}),onFocus:r(e.regularImage?2:1),onClick:r(e.regularImage?2:1)},u.a.createElement("button",{type:"button",className:"edit-image-tabs__button"},"Tags"),u.a.createElement(at,{updateTags:e.updateTags,tags:e.tags,batchTags:e.batchTags})),u.a.createElement("li",{className:g()("edit-image-tabs__tab",{"edit-image-tabs__tab--active":3===a}),onFocus:r(e.regularImage?3:2),onClick:r(e.regularImage?3:2)},u.a.createElement("button",{type:"button",className:"edit-image-tabs__button"},"Misc"),u.a.createElement(ct,{created:e.created,updatecreated:e.updateCreated}))))};mt.propTypes={hashes:m.a.object,created:m.a.string,palette:m.a.object,invertPalette:m.a.bool.isRequired,frame:m.a.string,tags:m.a.shape({initial:m.a.array.isRequired,add:m.a.array.isRequired,remove:m.a.array.isRequired}).isRequired,batchTags:m.a.shape({initial:m.a.array.isRequired,add:m.a.array.isRequired,remove:m.a.array.isRequired}),regularImage:m.a.bool.isRequired,lockFrame:m.a.bool.isRequired,updateCreated:m.a.func.isRequired,updatePalette:m.a.func.isRequired,updateInvertPalette:m.a.func.isRequired,updateTags:m.a.func.isRequired,updateFrame:m.a.func.isRequired,updateFrameLock:m.a.func.isRequired},mt.defaultProps={hashes:null,batchTags:null,palette:null,frame:null,created:null};var ft=mt,dt=(a(389),ie(ft)),ht=a(50);function bt(e){return(bt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function gt(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function yt(e,t){return(yt=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function vt(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,n=Et(e);if(t){var r=Et(this).constructor;a=Reflect.construct(n,arguments,r)}else a=n.apply(this,arguments);return _t(this,a)}}function _t(e,t){return!t||"object"!==bt(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Et(e){return(Et=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var St=document.querySelector("body"),kt=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&yt(e,t)}(o,e);var t,a,n,r=vt(o);function o(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,o),(t=r.call(this,e)).state={tiles:null,loaded:!1,hash:e.hash},t.restoreScroll=window.scrollY,t}return t=o,n=[{key:"getDerivedStateFromProps",value:function(e,t){return e.hash===t.hash?t:{tiles:null,loaded:!1,hash:e.hash}}}],(a=[{key:"componentDidMount",value:function(){this.props.hash&&this.loadImage()}},{key:"componentDidUpdate",value:function(e){!this.props.hash||e.hash===this.props.hash&&e.frame===this.props.frame||this.loadImage()}},{key:"loadImage",value:function(){var e=this;this.props.hashes?Promise.all([Object(ht.b)(this.props.hashes.r,this.props.frames.r),Object(ht.b)(this.props.hashes.g,this.props.frames.g),Object(ht.b)(this.props.hashes.b,this.props.frames.b),Object(ht.b)(this.props.hashes.n,this.props.frames.n)]).then((function(t){e.setState({tiles:J.a.rgbnTiles(t),loaded:!0})})):Object(ht.b)(this.props.hash,this.props.frame).then((function(t){e.setState({tiles:t,loaded:!0})}))}},{key:"applyOverlayScrolling",value:function(){!this.state.loaded&&St.classList.contains("has-overlay")&&(St.classList.remove("has-overlay"),window.scrollTo(0,this.restoreScroll)),this.state.loaded&&!St.classList.contains("has-overlay")&&(this.restoreScroll=window.scrollY,St.classList.add("has-overlay"))}},{key:"render",value:function(){var e=this;if(this.applyOverlayScrolling(),!this.state.loaded)return null;var t=this.props.palette?this.props.palette.palette:null,a=this.props.batch&&!(!this.props.tags.add.length&&!this.props.tags.remove.length),n=this.props.batch&&(this.props.batch.created||this.props.batch.title||this.props.batch.palette||this.props.batch.invertPalette||this.props.batch.frame||this.props.batch.lockFrame||a);return u.a.createElement(M,{height:this.props.height,className:"edit-image",confirm:this.props.save,deny:this.props.cancel},u.a.createElement("label",{className:"edit-image__header"},u.a.createElement("input",{className:"edit-image__header-edit",placeholder:"Add a title",value:this.props.title,onChange:function(t){e.props.updateTitle(t.target.value)}})),this.props.batch?u.a.createElement("span",{className:"edit-image__title-hint"},"Use %n to add an index to the image titles"):null,u.a.createElement(oe,{tiles:this.state.tiles,palette:this.props.palette,lockFrame:this.props.lockFrame,invertPalette:this.props.invertPalette}),this.props.batch&&this.props.batch.selection&&this.props.batch.selection.length?u.a.createElement("div",{className:"edit-image__batch-warn",style:t?{borderLeftColor:t[1],borderTopColor:t[1],backgroundColor:t[2],borderRightColor:t[3],borderBottomColor:t[3],color:t[0]}:null},"You are editing ".concat(this.props.batch.selection.length," images"),n?u.a.createElement("p",{className:"edit-image__batch-update-list"},"Will update: ",[this.props.batch.created?"date":null,this.props.batch.title?"title":null,this.props.batch.palette?"palette":null,this.props.batch.invertPalette?"invertPalette":null,this.props.batch.frame?"frame":null,this.props.batch.lockFrame?"framePalette":null,a?"tags":null].filter(Boolean).join(", ")):null):null,u.a.createElement(dt,{created:this.props.created,updateCreated:this.props.updateCreated,regularImage:360===this.state.tiles.length,lockFrame:this.props.lockFrame,hashes:this.props.hashes,palette:this.props.palette,invertPalette:this.props.invertPalette,frame:this.props.frame,tags:this.props.tags,updatePalette:this.props.updatePalette,updateInvertPalette:this.props.updateInvertPalette,updateFrame:this.props.updateFrame,updateFrameLock:this.props.updateFrameLock,updateTags:this.props.updateTags}))}}])&&gt(t.prototype,a),n&&gt(t,n),o}(u.a.Component);kt.propTypes={batch:m.a.object,created:m.a.string,cancel:m.a.func.isRequired,hash:m.a.string,hashes:m.a.object,palette:m.a.object,invertPalette:m.a.bool.isRequired,lockFrame:m.a.bool.isRequired,frame:m.a.string,frames:m.a.object,save:m.a.func.isRequired,tags:m.a.shape({initial:m.a.array.isRequired,add:m.a.array.isRequired,remove:m.a.array.isRequired}),title:m.a.string,updateCreated:m.a.func.isRequired,updatePalette:m.a.func.isRequired,updateInvertPalette:m.a.func.isRequired,updateTitle:m.a.func.isRequired,updateFrame:m.a.func.isRequired,updateFrameLock:m.a.func.isRequired,updateTags:m.a.func.isRequired,height:m.a.number.isRequired},kt.defaultProps={batch:null,created:null,title:null,hash:null,hashes:null,palette:null,tags:{initial:[],add:[],remove:[]},frame:null,frames:null};var Nt=kt,wt=(a(390),W(Nt)),Rt=Object(n.b)((function(e){return{tiles:e.lineBuffer,palette:e.palettes.find((function(t){return t.shortName===e.activePalette}))}}),(function(){return{}})),Ot=function(e){return u.a.createElement("div",{className:g()("live-image",{"live-image--receiving":e.tiles.length})},u.a.createElement(oe,{palette:e.palette,tiles:e.tiles,lockFrame:!1,invertPalette:!1}))};Ot.propTypes={tiles:m.a.arrayOf(m.a.string).isRequired,palette:m.a.object.isRequired},Ot.defaultProps={};var Pt=Ot,Ct=(a(391),Rt(Pt)),jt=a(94),Tt=Object(n.b)((function(e){var t,a,n=Object(jt.a)(e),r=n.find((function(t,a){return a===e.lightboxImage}));return r?(r.hashes?(t=r.palette,a=Object(K.a)(e,r.hashes,r.frame)):(t=e.palettes.find((function(e){return e.shortName===r.palette})),a=null),{hash:r.hash,title:r.title,created:r.created,hashes:r.hashes,frame:r.frame,isFullscreen:e.isFullscreen,palette:t,frames:a,index:e.lightboxImage||0,size:n.length||0,lockFrame:r.lockFrame||!1,invertPalette:r.invertPalette||!1}):{isFullscreen:!1,lockFrame:!1,invertPalette:!1,index:0,size:0}}),(function(e){return{close:function(){e({type:"SET_LIGHTBOX_IMAGE_INDEX",payload:null})},prev:function(){e({type:"LIGHTBOX_PREV"})},next:function(){e({type:"LIGHTBOX_NEXT"})},fullscreen:function(){e({type:"LIGHTBOX_FULLSCREEN"})}}}));function xt(e){return(xt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function It(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function Ft(e,t){return(Ft=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function qt(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,n=Dt(e);if(t){var r=Dt(this).constructor;a=Reflect.construct(n,arguments,r)}else a=n.apply(this,arguments);return At(this,a)}}function At(e,t){return!t||"object"!==xt(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Dt(e){return(Dt=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var Mt=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Ft(e,t)}(o,e);var t,a,n,r=qt(o);function o(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,o),(t=r.call(this,e)).state={tiles:null,loaded:!1,hash:e.hash},t}return t=o,n=[{key:"getDerivedStateFromProps",value:function(e,t){return e.hash===t.hash?t:{tiles:null,loaded:!1,hash:e.hash}}}],(a=[{key:"componentDidUpdate",value:function(e){var t=this;e.hash!==this.props.hash&&this.props.hash&&(this.props.hashes?Promise.all([Object(ht.b)(this.props.hashes.r,this.props.frames.r),Object(ht.b)(this.props.hashes.g,this.props.frames.g),Object(ht.b)(this.props.hashes.b,this.props.frames.b),Object(ht.b)(this.props.hashes.n,this.props.frames.n)]).then((function(e){t.setState({tiles:J.a.rgbnTiles(e),loaded:!0})})):Object(ht.b)(this.props.hash,this.props.frame).then((function(e){t.setState({tiles:e,loaded:!0})})))}},{key:"render",value:function(){return this.state.loaded?u.a.createElement(M,{className:"lightbox-image",deny:this.props.close},u.a.createElement("label",{className:"lightbox-image__title"},this.props.title),this.props.isFullscreen?null:u.a.createElement("button",{type:"button",className:"lightbox-image__button lightbox-image__button--fullscreen",onClick:this.props.fullscreen},u.a.createElement(v,{name:"fullscreen"})),u.a.createElement("button",{type:"button",className:"lightbox-image__button lightbox-image__button--close",onClick:this.props.close},u.a.createElement(v,{name:"close"})),u.a.createElement(oe,{tiles:this.state.tiles,palette:this.props.palette,lockFrame:this.props.lockFrame,invertPalette:this.props.invertPalette}),u.a.createElement("div",{className:"lightbox-image__navigation"},this.props.index>0?u.a.createElement("button",{type:"button",className:"lightbox-image__button lightbox-image__button--left",onClick:this.props.prev},u.a.createElement(v,{name:"left"})):null,this.props.index<this.props.size-1?u.a.createElement("button",{type:"button",className:"lightbox-image__button lightbox-image__button--right",onClick:this.props.next},u.a.createElement(v,{name:"right"})):null),u.a.createElement("div",{className:"lightbox-image__created"},ot()(this.props.created,it.a).format(it.d))):null}}])&&It(t.prototype,a),n&&It(t,n),o}(u.a.Component);Mt.propTypes={created:m.a.string,hash:m.a.string,hashes:m.a.object,palette:m.a.object,invertPalette:m.a.bool.isRequired,frame:m.a.string,frames:m.a.object,lockFrame:m.a.bool.isRequired,title:m.a.string,close:m.a.func.isRequired,prev:m.a.func.isRequired,next:m.a.func.isRequired,fullscreen:m.a.func.isRequired,isFullscreen:m.a.bool.isRequired,index:m.a.number.isRequired,size:m.a.number.isRequired},Mt.defaultProps={created:null,hash:null,hashes:null,palette:null,title:null,frame:null,frames:null};var zt=Mt,Ut=(a(392),Tt(zt)),Lt=Object(n.b)((function(e){return{hashes:{r:e.rgbnImages.r,g:e.rgbnImages.g,b:e.rgbnImages.b,n:e.rgbnImages.n},frames:Object(K.a)(e,e.rgbnImages,null)}}),(function(){return{}})),Bt=Object(n.b)((function(e,t){var a=t.hash;return{isSelected:e.imageSelection.includes(a),canShare:e.canShare}}),(function(e,t){var a=t.hash,n=t.buttons;return{startDownload:n.includes("download")?function(){e({type:"START_DOWNLOAD",payload:a})}:null,deleteImage:n.includes("delete")?function(){e({type:"DELETE_IMAGE",payload:a})}:null,shareImage:n.includes("share")?function(){e({type:"SHARE_IMAGE",payload:a})}:null,saveRGBNImage:n.includes("saveRGBNImage")?function(){e({type:"SAVE_RGBN_IMAGE",payload:a})}:null,updateImageToSelection:n.includes("select")?function(t){e("add"===t?{type:"IMAGE_SELECTION_ADD",payload:a}:{type:"IMAGE_SELECTION_REMOVE",payload:a})}:null,setLightboxImage:n.includes("view")?function(){e({type:"SET_LIGHTBOX_IMAGE_HASH",payload:a})}:null}})),Gt=a(150),Vt=a.n(Gt);ot.a.extend(Vt.a);var Ht=function(e){return u.a.createElement("div",{className:"gallery-image-buttons",onClick:function(e){e.stopPropagation()},role:"presentation"},e.updateImageToSelection?u.a.createElement("button",{type:"button",className:g()("gallery-image-buttons__button",{"gallery-image-buttons__button--unchecked":!e.isSelected,"gallery-image-buttons__button--checked":e.isSelected}),onClick:function(){return e.updateImageToSelection(e.isSelected?"remove":"add")}},u.a.createElement(v,{name:"checkmark"})):null,e.startDownload?u.a.createElement("button",{type:"button",className:"gallery-image-buttons__button",onClick:e.startDownload},u.a.createElement(v,{name:"download"})):null,e.deleteImage?u.a.createElement("button",{type:"button",className:"gallery-image-buttons__button",onClick:e.deleteImage},u.a.createElement(v,{name:"delete"})):null,e.setLightboxImage?u.a.createElement("button",{type:"button",className:"gallery-image-buttons__button",onClick:e.setLightboxImage},u.a.createElement(v,{name:"view"})):null,e.saveRGBNImage?u.a.createElement("button",{type:"button",className:"gallery-image-buttons__button",onClick:e.saveRGBNImage},u.a.createElement(v,{name:"save"})):null,e.shareImage&&e.canShare?u.a.createElement("button",{type:"button",className:"gallery-image-buttons__button",onClick:e.shareImage},u.a.createElement(v,{name:"share"})):null)};Ht.propTypes={canShare:m.a.bool.isRequired,deleteImage:m.a.func,setLightboxImage:m.a.func,isSelected:m.a.bool.isRequired,saveRGBNImage:m.a.func,shareImage:m.a.func,startDownload:m.a.func,updateImageToSelection:m.a.func},Ht.defaultProps={deleteImage:null,setLightboxImage:null,saveRGBNImage:null,shareImage:null,startDownload:null,updateImageToSelection:null};var Kt=Ht,Wt=(a(393),Bt(Kt));function Yt(e){return(Yt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Xt(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function Jt(e,t){return(Jt=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function $t(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,n=Zt(e);if(t){var r=Zt(this).constructor;a=Reflect.construct(n,arguments,r)}else a=n.apply(this,arguments);return Qt(this,a)}}function Qt(e,t){return!t||"object"!==Yt(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Zt(e){return(Zt=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var ea=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Jt(e,t)}(o,e);var t,a,n,r=$t(o);function o(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,o),(t=r.call(this,e)).canvasRef=u.a.createRef(),t.rgbnDecoder=new J.a,t}return t=o,(a=[{key:"componentDidMount",value:function(){this.updateCanvasContent()}},{key:"componentDidUpdate",value:function(e){JSON.stringify(e.hashes)===JSON.stringify(this.props.hashes)&&JSON.stringify(e.frames)===JSON.stringify(this.props.frames)||this.updateCanvasContent()}},{key:"updateCanvasContent",value:function(){var e=this;Promise.all([Object(ht.b)(this.props.hashes.r,this.props.frames.r),Object(ht.b)(this.props.hashes.g,this.props.frames.g),Object(ht.b)(this.props.hashes.b,this.props.frames.b),Object(ht.b)(this.props.hashes.n,this.props.frames.n)]).then((function(t){if(e.canvasRef.current){var a=J.a.rgbnTiles(t);e.rgbnDecoder.update({canvas:e.canvasRef.current,tiles:a,palette:it.e,lockFrame:!1})}}))}},{key:"render",value:function(){var e=this.props.hashes.r||this.props.hashes.g||this.props.hashes.b||this.props.hashes.n;return u.a.createElement("div",{className:g()("rgbn-image",{"rgbn-image--has-tiles":e})},e?u.a.createElement("canvas",{width:160,ref:this.canvasRef}):null,u.a.createElement(Wt,{hash:"newRGBN",buttons:["saveRGBNImage"]}))}}])&&Xt(t.prototype,a),n&&Xt(t,n),o}(c.Component);ea.propTypes={hashes:m.a.object,frames:m.a.object},ea.defaultProps={hashes:null,frames:null};var ta=ea,aa=(a(394),Lt(ta)),na=(a(395),function(e,t){switch(e){case"hk":return"Hallo Katze!";case"int":return"International Frames (GameBoy Camera)";case"jp":return"Japanese Frames (Pocket Camera)";default:return t}}),ra=function(e){return e.reduce((function(e,t){var a,n=t.id,r=t.name;try{a=n.match(/^[a-z]{2,}/g)[0]}catch(t){return e}return e.find((function(e){return e.id===a}))||e.push({id:a,name:na(a,r)}),e}),[])},oa=Object(n.b)((function(e){return{socketUrl:e.socketUrl,printerUrl:e.printerUrl,exportScaleFactors:e.exportScaleFactors,exportFileTypes:e.exportFileTypes,pageSize:e.pageSize,savFrameTypes:e.savFrameTypes,savFrameGroups:ra(e.frames),exportCropFrame:e.exportCropFrame,hideDates:e.hideDates}}),(function(e){return{updateSocketUrl:function(t){e({type:"SET_SOCKET_URL",payload:t})},updatePrinterUrl:function(t){e({type:"SET_PRINTER_URL",payload:t})},setSavFrameTypes:function(t){e({type:"SET_SAV_FRAME_TYPES",payload:t})},setExportCropFrame:function(t){e({type:"SET_EXPORT_CROP_FRAME",payload:t})},setHideDates:function(t){e({type:"SET_HIDE_DATES",payload:t})},setPageSize:function(t){e({type:"SET_PAGESIZE",payload:t})},exportSettings:function(t){e({type:"SETTINGS_EXPORT",payload:t})},changeExportScaleFactors:function(t,a){e({type:"UPDATE_EXPORT_SCALE_FACTORS",payload:{factor:t,checked:a}})},changeExportFileTypes:function(t,a){e({type:"UPDATE_EXPORT_FILE_TYPES",payload:{fileType:t,checked:a}})}}})),ia=(a(147),Object(n.b)((function(e){return{socketState:e.socketState}}),(function(){return{}}))),sa=function(e){return u.a.createElement("div",{className:g()("socketstate-indicator",{"socketstate-indicator--closed":e.socketState===WebSocket.CLOSED,"socketstate-indicator--closing":e.socketState===WebSocket.CLOSING,"socketstate-indicator--open":e.socketState===WebSocket.OPEN,"socketstate-indicator--connecting":e.socketState===WebSocket.CONNECTING})})};sa.propTypes={socketState:m.a.number.isRequired},sa.defaultProps={};var la=sa,ca=(a(396),ia(la)),ua=a(67),pa=a(96),ma=(a(117),{}),fa=function(){return["jpeg","jpg","png","webp","bmp","gif"].filter((function(e){return function(e){if(void 0!==ma[e])return ma[e];var t=document.createElement("canvas");t.width=2,t.height=2;var a=t.toDataURL("image/".concat(e));return ma[e]=0===a.indexOf("data:image/".concat(e,";base64")),ma[e]}(e)}))};function da(e){return(da="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function ha(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function ba(e,t){return(ba=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function ga(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,n=va(e);if(t){var r=va(this).constructor;a=Reflect.construct(n,arguments,r)}else a=n.apply(this,arguments);return ya(this,a)}}function ya(e,t){return!t||"object"!==da(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function va(e){return(va=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var _a=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&ba(e,t)}(o,e);var t,a,n,r=ga(o);function o(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,o),(t=r.call(this,e)).state={sync:!0,socketUrl:e.socketUrl,printerUrl:e.printerUrl,pageSize:e.pageSize},t.env=Object(pa.a)(),t}return t=o,n=[{key:"getDerivedStateFromProps",value:function(e,t){return{printerUrl:t.sync?Object(ua.a)(e.printerUrl,"http"):t.printerUrl,socketUrl:t.sync?Object(ua.a)(e.socketUrl,"ws"):t.socketUrl,sync:t.sync,pageSize:t.sync?e.pageSize:t.pageSize}}}],(a=[{key:"render",value:function(){var e=this;return u.a.createElement("div",{className:"settings"},u.a.createElement("div",{className:"settings__inputgroup"},u.a.createElement("label",{htmlFor:"settings-pagesize",className:"settings__label"},"Page size",u.a.createElement("span",{className:g()("settings__note",{"settings__note--warn":!this.props.pageSize})},"(set to 0 to disable pagination - might cause performance issues on large sets of images)")),u.a.createElement("input",{id:"settings-pagesize",className:"settings__input",type:"number",min:"0",value:this.state.pageSize,onChange:function(t){var a=t.target;e.setState({sync:!1,pageSize:a.value})},onBlur:function(){e.props.setPageSize(parseInt(e.state.pageSize,10)||0),e.setState({sync:!0})}})),u.a.createElement("div",{className:"settings__inputgroup"},u.a.createElement("div",{className:"settings__label"},"Image export dimensions"),[1,2,3,4,6,8,10].map((function(t){return u.a.createElement("label",{key:t,className:g()("settings__label-check",{"settings__label-check--selected":e.props.exportScaleFactors.includes(t)}),title:"".concat(160*t,"×").concat(144*t)},"".concat(t,"×"),u.a.createElement("input",{type:"checkbox",checked:e.props.exportScaleFactors.includes(t),onChange:function(a){var n=a.target;e.props.changeExportScaleFactors(t,n.checked)}}))}))),u.a.createElement("div",{className:"settings__inputgroup"},u.a.createElement("div",{className:"settings__label"},"Image export filetypes"),fa().map((function(t){return u.a.createElement("label",{key:t,className:g()("settings__label-check",{"settings__label-check--selected":e.props.exportFileTypes.includes(t)}),title:t},t,u.a.createElement("input",{type:"checkbox",checked:e.props.exportFileTypes.includes(t),onChange:function(a){var n=a.target;e.props.changeExportFileTypes(t,n.checked)}}))}))),u.a.createElement("label",{className:g()("settings__inputgroup settings__check-group",{"settings__check-group--checked":this.props.exportCropFrame})},u.a.createElement("span",{className:"settings__label",title:"Crop/remove frame when exporting or sharing images"},"Crop/remove frame when exporting or sharing images"),u.a.createElement("span",{className:"settings__checkbox-wrap"},u.a.createElement("input",{type:"checkbox",className:"settings__checkbox",checked:this.props.exportCropFrame,onChange:function(t){var a=t.target;e.props.setExportCropFrame(a.checked)}}),u.a.createElement(v,{name:"checkmark"}))),"webpack-dev"!==this.env.env?null:u.a.createElement(u.a.Fragment,null,u.a.createElement("div",{className:"settings__inputgroup"},u.a.createElement("label",{htmlFor:"settings-socket-url",className:"settings__label"},"Remote Socket URL",u.a.createElement(ca,null)),u.a.createElement("input",{id:"settings-socket-url",className:"settings__input",value:this.state.socketUrl,onChange:function(t){var a=t.target;e.setState({sync:!1,socketUrl:a.value})},onKeyUp:function(t){switch(t.key){case"Enter":e.props.updateSocketUrl(e.state.socketUrl),e.setState({sync:!0});break;case"Escape":e.setState({socketUrl:e.props.socketUrl,sync:!0})}}}),u.a.createElement("button",{type:"button",className:"settings__button",onClick:function(){e.setState({sync:!0}),e.props.updateSocketUrl(e.state.socketUrl),e.setState({sync:!0})}},"Connect")),u.a.createElement("div",{className:"settings__inputgroup"},u.a.createElement("label",{htmlFor:"settings-printer-url",className:"settings__label"},"Printer URL"),u.a.createElement("input",{id:"settings-printer-url",className:"settings__input",value:this.state.printerUrl,onChange:function(t){var a=t.target;e.setState({sync:!1,printerUrl:a.value})},onBlur:function(){e.props.updatePrinterUrl(e.state.printerUrl),e.setState({sync:!0})},onKeyUp:function(t){switch(t.key){case"Enter":e.props.updatePrinterUrl(e.state.printerUrl),e.setState({sync:!0});break;case"Escape":e.setState({printerUrl:e.props.printerUrl,sync:!0})}}}))),u.a.createElement("div",{className:"settings__inputgroup"},u.a.createElement("label",{htmlFor:"settings-printer-url",className:"settings__label"},"Frames to be applied when importing Cartridge dumps"),u.a.createElement("select",{className:"settings__input settings__input--select",disabled:!this.props.savFrameGroups.length,value:this.props.savFrameTypes,onChange:function(t){e.props.setSavFrameTypes(t.target.value)}},this.props.savFrameGroups.map((function(e){var t=e.id,a=e.name;return u.a.createElement("option",{value:t,key:t},a)})))),u.a.createElement("label",{className:g()("settings__inputgroup settings__check-group",{"settings__check-group--checked":this.props.hideDates})},u.a.createElement("span",{className:"settings__label",title:"Hide dates in gallery"},"Hide dates in gallery"),u.a.createElement("span",{className:"settings__checkbox-wrap"},u.a.createElement("input",{type:"checkbox",className:"settings__checkbox",checked:this.props.hideDates,onChange:function(t){var a=t.target;e.props.setHideDates(a.checked)}}),u.a.createElement(v,{name:"checkmark"}))),u.a.createElement("div",{className:"settings__inputgroup settings__buttongroup"},u.a.createElement("button",{type:"button",className:"settings__button",onClick:function(){return e.props.exportSettings("debug")}},"Export debug settings"),u.a.createElement("button",{type:"button",className:"settings__button",onClick:function(){return e.props.exportSettings("settings")}},"Export settings"),u.a.createElement("button",{type:"button",className:"settings__button",onClick:function(){return e.props.exportSettings("images")}},"Export images"),u.a.createElement("button",{type:"button",className:"settings__button",onClick:function(){return e.props.exportSettings("frames")}},"Export frames"),u.a.createElement("button",{type:"button",className:"settings__button",onClick:function(){return e.props.exportSettings("full")}},"Export everything")))}}])&&ha(t.prototype,a),n&&ha(t,n),o}(u.a.Component);_a.propTypes={changeExportScaleFactors:m.a.func.isRequired,exportScaleFactors:m.a.array.isRequired,changeExportFileTypes:m.a.func.isRequired,exportFileTypes:m.a.array.isRequired,printerUrl:m.a.string.isRequired,savFrameTypes:m.a.string.isRequired,savFrameGroups:m.a.array.isRequired,socketUrl:m.a.string.isRequired,updateSocketUrl:m.a.func.isRequired,updatePrinterUrl:m.a.func.isRequired,setSavFrameTypes:m.a.func.isRequired,pageSize:m.a.number.isRequired,setPageSize:m.a.func.isRequired,exportSettings:m.a.func.isRequired,setExportCropFrame:m.a.func.isRequired,exportCropFrame:m.a.bool.isRequired,setHideDates:m.a.func.isRequired,hideDates:m.a.bool.isRequired},_a.defaultProps={};var Ea=_a,Sa=(a(397),oa(Ea)),ka=Object(n.b)((function(e){return{palettes:e.palettes}}),(function(){return{}})),Na=Object(n.b)((function(e,t){var a=t.shortName;return{isActive:e.activePalette===a}}),(function(e,t){var a=t.shortName;return{setActive:function(){e({type:"PALETTE_SET_ACTIVE",payload:a})}}})),wa=function(e){return u.a.createElement("li",{className:g()("palette",{"palette--active":e.isActive}),style:{backgroundImage:"linear-gradient(to right, ".concat(e.palette[0]).concat("36"," 0%, ").concat(e.palette[1]).concat("36"," 33.3%, ").concat(e.palette[2]).concat("36"," 66.6%, ").concat(e.palette[3]).concat("36"," 100%)")}},u.a.createElement("button",{onClick:function(){e.setActive()},className:"palette__button",type:"button"},u.a.createElement("div",{className:"palette__name"},e.name,u.a.createElement("span",{className:"palette__shortname"},e.shortName)),u.a.createElement("div",{className:"palette__colors"},u.a.createElement("div",{className:"palette__color",style:{backgroundColor:e.palette[0]},title:e.palette[0]}," "),u.a.createElement("div",{className:"palette__color",style:{backgroundColor:e.palette[1]},title:e.palette[1]}," "),u.a.createElement("div",{className:"palette__color",style:{backgroundColor:e.palette[2]},title:e.palette[2]}," "),u.a.createElement("div",{className:"palette__color",style:{backgroundColor:e.palette[3]},title:e.palette[3]}," "))))};wa.propTypes={shortName:m.a.string.isRequired,name:m.a.string.isRequired,isActive:m.a.bool.isRequired,setActive:m.a.func.isRequired,palette:m.a.arrayOf(m.a.string).isRequired},wa.defaultProps={};var Ra=wa,Oa=(a(398),Na(Ra)),Pa=function(e){return u.a.createElement("ul",{className:"palettes"},e.palettes.map((function(e){return u.a.createElement(Oa,{key:e.shortName,name:e.name,shortName:e.shortName,palette:e.palette})})))};Pa.propTypes={palettes:m.a.array.isRequired},Pa.defaultProps={};var Ca=Pa,ja=(a(399),ka(Ca)),Ta=Object(n.b)((function(e){return{dumpCount:e.printerData.dumps?e.printerData.dumps.length:0}}),(function(e){return{importPlainText:function(t){e({type:"IMPORT_PLAIN_TEXT",payload:t})},importFile:function(t){e({type:"IMPORT_FILE",payload:t})},checkPrinter:function(){e({type:"PRINTER_QUERY"})},downloadPrinter:function(){e({type:"PRINTER_DOWNLOAD"})},clearPrinter:function(){e({type:"PRINTER_CLEAR"})}}})),xa=Object(n.b)((function(e){return{printerData:e.printerData,printerUrl:e.printerUrl}}),(function(){return{}})),Ia=a(400),Fa=a.n(Ia),qa=function(e){return e.printerData.fs&&e.printerData.dumps?u.a.createElement("div",{className:"printer-report"},u.a.createElement("table",{className:"printer-report__table"},u.a.createElement("thead",null,u.a.createElement("tr",null,u.a.createElement("th",{className:"printer-report__label printer-report__head"},"Printer Filesystem"),u.a.createElement("th",{className:"printer-report__value printer-report__head printer-report__value--url"},e.printerUrl))),u.a.createElement("tbody",null,u.a.createElement("tr",null,u.a.createElement("td",{className:"printer-report__label"},"Total"),u.a.createElement("td",{className:"printer-report__value"},Fa()(e.printerData.fs.total))),u.a.createElement("tr",null,u.a.createElement("td",{className:"printer-report__label"},"Used"),u.a.createElement("td",{className:"printer-report__value"},Fa()(e.printerData.fs.used))),u.a.createElement("tr",null,u.a.createElement("td",{className:"printer-report__label"},"Free"),u.a.createElement("td",{className:"printer-report__value"},"".concat(Math.max(0,e.printerData.fs.maximages-e.printerData.dumps.length)," images"))),u.a.createElement("tr",null,u.a.createElement("td",{className:"printer-report__label"},"Images"),u.a.createElement("td",{className:"printer-report__value"},e.printerData.dumps.length))))):null};qa.propTypes={printerData:m.a.shape({fs:m.a.shape({dumpcount:m.a.number,maximages:m.a.number,total:m.a.number,used:m.a.number}),dumps:m.a.arrayOf(m.a.string)}).isRequired,printerUrl:m.a.string.isRequired},qa.defaultProps={};var Aa=qa,Da=(a(401),xa(Aa));function Ma(e){return(Ma="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function za(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function Ua(e,t){return(Ua=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function La(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,n=Ga(e);if(t){var r=Ga(this).constructor;a=Reflect.construct(n,arguments,r)}else a=n.apply(this,arguments);return Ba(this,a)}}function Ba(e,t){return!t||"object"!==Ma(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Ga(e){return(Ga=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var Va=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Ua(e,t)}(i,e);var t,n,r,o=La(i);function i(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),(t=o.call(this,e)).fileInputRef=u.a.createRef(),t.state={text:""},t.env=Object(pa.a)(),t}return t=i,(n=[{key:"componentDidMount",value:function(){var e=this;a.e(1).then(a.bind(null,510)).then((function(t){var a=t.default;e.setState({text:a.join("\n")})}))}},{key:"render",value:function(){var e=this;return u.a.createElement("div",{className:"import"},"esp8266"!==this.env.env?null:u.a.createElement("div",{className:"import__inputgroup import__buttongroup"},u.a.createElement("button",{type:"button",className:"import__button import__button",onClick:this.props.checkPrinter},"Check Printer"),u.a.createElement("button",{type:"button",className:"import__button import__button",disabled:0===this.props.dumpCount,onClick:this.props.downloadPrinter},"Download ".concat(this.props.dumpCount?this.props.dumpCount:""," Dumps")),u.a.createElement("button",{type:"button",className:"import__button import__button",disabled:0===this.props.dumpCount,onClick:this.props.clearPrinter},"Clear Printer")),u.a.createElement(Da,null),u.a.createElement("div",{className:"import__inputgroup"},u.a.createElement("label",{htmlFor:"import-file",className:"import__label"},"Select file for import"),u.a.createElement("input",{id:"import-file",className:"import__input",type:"file",onChange:function(t){var a=t.target;a.files&&1===a.files.length&&e.props.importFile(a)},ref:this.fileInputRef}),u.a.createElement("label",{htmlFor:"import-file",className:"import__button import__button--label"},"Select")),u.a.createElement("div",{className:"import__inputgroup import__inputgroup--column"},u.a.createElement("label",{htmlFor:"import-plaintext",className:"import__label"},"Paste your plaintext"),u.a.createElement("textarea",{id:"import-plaintext",className:"import__data",value:this.state.text,onChange:function(t){var a=t.target;e.setState({text:a.value})}}),u.a.createElement("button",{className:"import__button",type:"button",onClick:function(){e.props.importPlainText(e.state.text)}},"Import")))}}])&&za(t.prototype,n),r&&za(t,r),i}(u.a.Component);Va.propTypes={dumpCount:m.a.number.isRequired,importPlainText:m.a.func.isRequired,importFile:m.a.func.isRequired,checkPrinter:m.a.func.isRequired,downloadPrinter:m.a.func.isRequired,clearPrinter:m.a.func.isRequired},Va.defaultProps={};var Ha=Va,Ka=(a(402),Ta(Ha)),Wa=(a(358),Object(n.b)((function(e,t){var a=t.page*e.pageSize;return{images:Object(jt.a)(e).splice(a,e.pageSize||1/0),currentView:e.galleryView}}),(function(){return{}}))),Ya=Object(n.b)((function(e,t){var a,n,r=t.hash,o=e.images.find((function(e){return e.hash===r}));return o.hashes?(a=o.palette,n=Object(K.a)(e,o.hashes,o.frame)):(a=e.palettes.find((function(e){return e.shortName===o.palette})),n=null),{title:o.title,created:o.created,index:o.index,frame:o.frame,hashes:o.hashes,tags:o.tags,isSelected:e.imageSelection.includes(r),palette:a,frames:n,lockFrame:o.lockFrame||!1,invertPalette:o.invertPalette||!1,hideDate:e.hideDates}}),(function(e,t){var a=t.hash;return{updateImageSelection:function(t,n,r){e(n?{type:"IMAGE_SELECTION_SHIFTCLICK",payload:a,page:r}:"add"===t?{type:"IMAGE_SELECTION_ADD",payload:a}:{type:"IMAGE_SELECTION_REMOVE",payload:a})},editImage:function(){e({type:"EDIT_IMAGE",payload:a})}}}));var Xa=Object(n.b)((function(e,t){var a=t.hash;return{isR:e.rgbnImages.r===a,isG:e.rgbnImages.g===a,isB:e.rgbnImages.b===a,isN:e.rgbnImages.n===a}}),(function(e,t){return{updateRGBN:function(a,n){var r,o,i;e({type:"UPDATE_RGBN_PART",payload:(r={},o=a,i=n?t.hash:"",o in r?Object.defineProperty(r,o,{value:i,enumerable:!0,configurable:!0,writable:!0}):r[o]=i,r)})}}})),Ja=[{propKey:"isR",cssModifier:"red",updateKey:"r"},{propKey:"isG",cssModifier:"green",updateKey:"g"},{propKey:"isB",cssModifier:"blue",updateKey:"b"},{propKey:"isN",cssModifier:"normal",updateKey:"n"}],$a=function(e){return u.a.createElement("div",{className:"rgbn-select",onClick:function(e){e.stopPropagation()},role:"presentation"},Ja.map((function(t){var a=t.propKey,n=t.cssModifier,r=t.updateKey;return u.a.createElement("button",{type:"button",key:a,className:g()("rgbn-select__button rgbn-select__button--".concat(n),{"rgbn-select__button--selected":e[a]}),onClick:function(){e.updateRGBN(r,!e[a])}},u.a.createElement(v,{name:"circle"}))})))};$a.propTypes={isR:m.a.bool.isRequired,isG:m.a.bool.isRequired,isB:m.a.bool.isRequired,isN:m.a.bool.isRequired,updateRGBN:m.a.func.isRequired},$a.defaultProps={};var Qa=$a,Za=(a(403),Xa(Qa));function en(e){return(en="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function tn(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function an(e,t){return(an=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function nn(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,n=sn(e);if(t){var r=sn(this).constructor;a=Reflect.construct(n,arguments,r)}else a=n.apply(this,arguments);return rn(this,a)}}function rn(e,t){return!t||"object"!==en(t)&&"function"!=typeof t?on(e):t}function on(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function sn(e){return(sn=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}ot.a.extend(Vt.a);var ln=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&an(e,t)}(o,e);var t,a,n,r=nn(o);function o(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,o),(t=r.call(this,e)).state={tiles:null},t.handleCellClick=t.handleCellClick.bind(on(t)),t}return t=o,(a=[{key:"componentDidMount",value:function(){var e=this;this.props.hashes?Promise.all([Object(ht.b)(this.props.hashes.r,this.props.frames.r),Object(ht.b)(this.props.hashes.g,this.props.frames.g),Object(ht.b)(this.props.hashes.b,this.props.frames.b),Object(ht.b)(this.props.hashes.n,this.props.frames.n)]).then((function(t){e.setState({tiles:J.a.rgbnTiles(t)})})):Object(ht.b)(this.props.hash,this.props.frame).then((function(t){e.setState({tiles:t})}))}},{key:"componentDidUpdate",value:function(e){var t=this;e.frame===this.props.frame&&JSON.stringify(e.frames)===JSON.stringify(this.props.frames)||(this.props.hashes?Promise.all([Object(ht.b)(this.props.hashes.r,this.props.frames.r),Object(ht.b)(this.props.hashes.g,this.props.frames.g),Object(ht.b)(this.props.hashes.b,this.props.frames.b),Object(ht.b)(this.props.hashes.n,this.props.frames.n)]).then((function(e){t.setState({tiles:J.a.rgbnTiles(e)})})):Object(ht.b)(this.props.hash,this.props.frame).then((function(e){t.setState({tiles:e})})))}},{key:"getDateSpan",value:function(e){return this.props.hideDate||!this.props.created?null:u.a.createElement("span",{className:e},ot()(this.props.created,it.a).format(it.d))}},{key:"handleCellClick",value:function(e){e.ctrlKey||e.shiftKey?(e.preventDefault(),this.props.updateImageSelection(this.props.isSelected?"remove":"add",e.shiftKey,this.props.page)):this.props.editImage()}},{key:"renderDefault",value:function(){return u.a.createElement("li",{className:g()("gallery-image",{"gallery-image--selected":this.props.isSelected}),onClick:this.handleCellClick,role:"presentation"},u.a.createElement("div",{className:"gallery-image__image"},this.state.tiles?u.a.createElement(oe,{lockFrame:this.props.lockFrame,invertPalette:this.props.invertPalette,tiles:this.state.tiles,palette:this.props.palette}):null),this.props.title?u.a.createElement("span",{className:"gallery-image__title"},this.props.title):null,u.a.createElement("ul",{className:"gallery-list-image__tags"},this.props.tags.map((function(e){return u.a.createElement("li",{key:e,title:e,className:"gallery-list-image__tag"},e)}))),this.getDateSpan("gallery-image__created"),u.a.createElement(Wt,{index:this.props.index,hash:this.props.hash,buttons:["select","download","delete","view","share"]}))}},{key:"renderList",value:function(){return u.a.createElement("tr",{className:g()("gallery-list-image",{"gallery-list-image--selected":this.props.isSelected}),onClick:this.handleCellClick,role:"presentation"},u.a.createElement("td",{className:"gallery-list-image__cell-image"},u.a.createElement("div",{className:"gallery-list-image__image"},this.state.tiles?u.a.createElement(oe,{lockFrame:this.props.lockFrame,invertPalette:this.props.invertPalette,tiles:this.state.tiles,palette:this.props.palette}):null)),u.a.createElement("td",{className:"gallery-list-image__cell-index"},u.a.createElement("div",{className:"gallery-list-image__index"},this.props.index)),u.a.createElement("td",{className:"gallery-list-image__cell-description"},u.a.createElement("div",{className:"gallery-list-image__description"},u.a.createElement("span",{className:"gallery-list-image__title"},this.props.title),this.getDateSpan("gallery-list-image__created"))),u.a.createElement("td",{className:"gallery-list-image__cell-rgbn"},this.props.hashes?null:u.a.createElement(Za,{hash:this.props.hash})),u.a.createElement("td",{className:"gallery-list-image__cell-buttons"},u.a.createElement(Wt,{index:this.props.index,hash:this.props.hash,buttons:["select","download","delete","view"]})))}},{key:"render",value:function(){return"default"===this.props.type?this.renderDefault():this.renderList()}}])&&tn(t.prototype,a),n&&tn(t,n),o}(u.a.Component);ln.propTypes={created:m.a.string,hash:m.a.string.isRequired,hashes:m.a.object,palette:m.a.object.isRequired,invertPalette:m.a.bool.isRequired,frame:m.a.string,frames:m.a.object,lockFrame:m.a.bool.isRequired,title:m.a.string.isRequired,tags:m.a.arrayOf(m.a.string).isRequired,editImage:m.a.func.isRequired,type:m.a.oneOf(["list","default"]).isRequired,index:m.a.number.isRequired,isSelected:m.a.bool.isRequired,updateImageSelection:m.a.func.isRequired,page:m.a.number.isRequired,hideDate:m.a.bool.isRequired},ln.defaultProps={created:null,hashes:null,frame:null,frames:null};var cn=ln,un=(a(404),Ya(cn)),pn=Object(n.b)((function(){return{}}),(function(){return{}})),mn=Object(n.b)((function(e){return{currentView:e.galleryView}}),(function(e){return{updateView:function(t){e({type:"SET_CURRENT_GALLERY_VIEW",payload:t})}}})),fn=["list","1x","2x","3x","4x"],dn=function(e){return u.a.createElement("ul",{className:"gallery-view-select"},fn.map((function(t){return u.a.createElement("li",{key:t,className:g()("gallery-view-select__view",{"gallery-view-select__view--selected":e.currentView===t})},u.a.createElement("button",{type:"button",onClick:function(){e.updateView(t)}},u.a.createElement(v,{name:t})))})))};dn.propTypes={currentView:m.a.string.isRequired,updateView:m.a.func.isRequired},dn.defaultProps={};var hn=dn,bn=(a(405),mn(hn)),gn=Object(n.b)((function(e){return{totalPages:e.pageSize?Math.ceil(s(e)/e.pageSize):0}}),(function(){return{}})),yn=Object(n.b)((function(){return{}}),(function(){return{}})),vn=function(e){return u.a.createElement("li",{className:e.className},u.a.createElement(f.b,{className:"pagination__link",to:"/gallery/page/".concat(e.page+1),disabled:e.disabled,title:e.title},e.children))};vn.propTypes={children:m.a.node.isRequired,className:m.a.string,disabled:m.a.bool,page:m.a.number.isRequired,title:m.a.string.isRequired},vn.defaultProps={className:null,disabled:!1};var _n=vn,En=(a(406),yn(_n));function Sn(e){return function(e){if(Array.isArray(e))return kn(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return kn(e,t);var a=Object.prototype.toString.call(e).slice(8,-1);"Object"===a&&e.constructor&&(a=e.constructor.name);if("Map"===a||"Set"===a)return Array.from(e);if("Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a))return kn(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function kn(e,t){(null==t||t>e.length)&&(t=e.length);for(var a=0,n=new Array(t);a<t;a++)n[a]=e[a];return n}var Nn=function(e){if(e.totalPages<2)return null;var t=Sn(new Array(e.totalPages)).map((function(e,t){return t})),a=e.page,n=t.map((function(e){switch(e){case 0:case a-1:case a:case a+1:case t.length-1:return u.a.createElement(En,{key:e,page:e,className:g()("pagination__list-item pagination__list-item--page",{"pagination__list-item--page--active":e===a}),title:"To page ".concat(e+1),disabled:e===a},e+1);case a-2:case a+2:return u.a.createElement("li",{key:e,className:"pagination__list-item pagination__list-item--ellipsis"});default:return null}}));return a>0&&n.unshift(u.a.createElement(En,{key:"back",className:"pagination__list-item pagination__list-item--prevnext pagination__list-item--prevnext-prev",title:"To previous page",disabled:a<1,page:a-1},u.a.createElement(v,{name:"left"}))),a<t.length-1&&n.push(u.a.createElement(En,{key:"next",className:"pagination__list-item pagination__list-item--prevnext",title:"To next page",disabled:a>=t.length-1,page:a+1},u.a.createElement(v,{name:"right"}))),u.a.createElement("ul",{className:"pagination"},n.filter(Boolean))};Nn.propTypes={totalPages:m.a.number.isRequired,page:m.a.number.isRequired};var wn=Nn,Rn=(a(407),gn(wn)),On=Object(n.b)((function(e,t){var a=t.page*e.pageSize,n=!!Object(jt.a)(e).splice(a,e.pageSize||1/0).find((function(t){var a=t.hash;return e.imageSelection.includes(a)}));return{enabled:e.imageSelection.length>1,activeFilters:e.filter.activeTags.length||0,selectedImages:e.imageSelection.length,hasSelected:n}}),(function(e){return{batchTask:function(t,a){e({type:"BATCH_TASK",payload:t,page:a})},filter:function(){e({type:"SHOW_FILTERS"})},showSortOptions:function(){e({type:"SHOW_SORT_OPTIONS"})}}})),Pn=["download","delete","edit"];(function(){return fa().includes("webp")})()&&Pn.push("animate");var Cn=function(e){return u.a.createElement("ul",{className:"batch-buttons"},u.a.createElement("li",{className:"batch-buttons__action batch-buttons__action--enabled"},u.a.createElement("button",{type:"button",onClick:e.filter},u.a.createElement(v,{name:"filter"}),0===e.activeFilters?null:u.a.createElement("span",{className:"batch-buttons__bubble"},e.activeFilters))),u.a.createElement("li",{className:g()("batch-buttons__action batch-buttons__action--enabled",{"batch-buttons__action--has-selected":!e.hasSelected})},u.a.createElement("button",{type:"button",onClick:function(){return e.batchTask(e.hasSelected?"uncheckall":"checkall",e.page)}},u.a.createElement(v,{name:"checkmark"}),0===e.selectedImages?null:u.a.createElement("span",{className:"batch-buttons__bubble"},e.selectedImages))),u.a.createElement("li",{className:"batch-buttons__action batch-buttons__action--enabled"},u.a.createElement("button",{type:"button",onClick:e.showSortOptions},u.a.createElement(v,{name:"sort"}))),Pn.map((function(t){return u.a.createElement("li",{key:t,className:g()("batch-buttons__action",{"batch-buttons__action--disabled":!e.enabled,"batch-buttons__action--enabled":e.enabled})},u.a.createElement("button",{disabled:!e.enabled,type:"button",onClick:function(){return e.batchTask(t,e.page)}},u.a.createElement(v,{name:t})))})))};Cn.propTypes={batchTask:m.a.func.isRequired,enabled:m.a.bool.isRequired,activeFilters:m.a.number.isRequired,selectedImages:m.a.number.isRequired,filter:m.a.func.isRequired,showSortOptions:m.a.func.isRequired,hasSelected:m.a.bool.isRequired,page:m.a.number.isRequired},Cn.defaultProps={};var jn=Cn,Tn=(a(408),On(jn)),xn=function(e){return u.a.createElement("div",{className:"gallery-header"},u.a.createElement(bn,null),u.a.createElement(Rn,{page:e.page}),u.a.createElement(Tn,{page:e.page}))};xn.propTypes={page:m.a.number.isRequired};var In=xn,Fn=(a(409),pn(In));var qn=function(e){var t,a,n,r=e.images.map((function(t){return u.a.createElement(un,{type:"list"===e.currentView?"list":"default",key:t.hash,hash:t.hash,page:e.page})}));return"list"!==e.currentView&&r.push(u.a.createElement("li",{className:"gallery-image gallery-image--dummy",key:"dummy1"}),u.a.createElement("li",{className:"gallery-image gallery-image--dummy",key:"dummy2"}),u.a.createElement("li",{className:"gallery-image gallery-image--dummy",key:"dummy3"}),u.a.createElement("li",{className:"gallery-image gallery-image--dummy",key:"dummy4"}),u.a.createElement("li",{className:"gallery-image gallery-image--dummy",key:"dummy5"})),u.a.createElement(u.a.Fragment,null,u.a.createElement(Fn,{page:e.page}),"list"===e.currentView?u.a.createElement("table",{className:"gallery gallery--list"},u.a.createElement("tbody",null,r)):u.a.createElement("ul",{className:g()("gallery",(t={},a="gallery--".concat(e.currentView),n=!0,a in t?Object.defineProperty(t,a,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[a]=n,t))},r),e.images.length<3?null:u.a.createElement(Fn,{page:e.page}))};qn.propTypes={images:m.a.array.isRequired,currentView:m.a.string.isRequired,page:m.a.number.isRequired},qn.defaultProps={};var An=qn,Dn=(a(410),Wa(An)),Mn=Object(n.b)((function(){return{}}),(function(){return{}}));function zn(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var a=[],n=!0,r=!1,o=void 0;try{for(var i,s=e[Symbol.iterator]();!(n=(i=s.next()).done)&&(a.push(i.value),!t||a.length!==t);n=!0);}catch(e){r=!0,o=e}finally{try{n||null==s.return||s.return()}finally{if(r)throw o}}return a}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return Un(e,t);var a=Object.prototype.toString.call(e).slice(8,-1);"Object"===a&&e.constructor&&(a=e.constructor.name);if("Map"===a||"Set"===a)return Array.from(e);if("Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a))return Un(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Un(e,t){(null==t||t>e.length)&&(t=e.length);for(var a=0,n=new Array(t);a<t;a++)n[a]=e[a];return n}var Ln=function(){var e=zn(Object(c.useState)((function(){return function(){return null}})),2),t=e[0],n=e[1];return Object(c.useEffect)((function(){a.e(8).then(a.t.bind(null,511,7)).then((function(e){var t=e.default;n((function(){return t}))}))}),[]),u.a.createElement("div",{className:"home"},u.a.createElement(t,{className:"markdown-body",source:'# Game Boy Printer Web\r\n\r\n## Basic usage\r\n* choose a [color palette](#/palettes)\r\n* [paste your exports](#/import) into a textfield (or simply drag and drop your dump(s) into this window)\r\n* check your images [in the gallery](#/gallery)\r\n* You can also try to drag/drop your cartridge dump into this window  \r\n\r\n## Supported formats\r\n* This Project is mainly built around the serial output of the original [GBP Emulator](https://github.com/mofosyne/arduino-gameboy-printer-emulator)\r\n* Cart .SAV files are also supported. The previously selected frame will be applied as well. If you\'re importing from a JP-Cartridge (Pocket Camera), you may want to change the "Frames when importing Cartridge dumps" option in the [settings page](#/settings)    \r\n\r\n## Local Setup\r\nYou can run this app locally to directly use the gbp-emulator on your serial port \r\n* Install [node.js](https://nodejs.org/) if you haven\'t already.\r\n* Check out/clone/download [this repository](https://github.com/HerrZatacke/gb-printer-web)\r\n* Run `npm i` in the root directory via your commandline\r\n* Add a `config.json` in the root dir (see below)\r\n* Run `npm start` via your commandline\r\n* Open [localhost:3000](http://localhost:3000)\r\n* Go to the \'Settings\' page and change the \'Remote Socket URL\' to `localhost:3001`\r\n* Print something\r\n\r\n## Frames\r\nIn a recent change (Version 1.7.0) the pre-compiled frames have been removed from this application.  \r\nThe application now however gives you the opportunity to add all fames you like by yourself and also share them with others.  \r\nMaybe you have designed some frames by yourself, or you have aquired some previously unknown frames.\r\n\r\n### Uploading your own frames\r\nYou can upload your own frames by dragging any image into this app.  \r\nDimensions of 160x144 are highly recommended, otherwise the image will be automatically scaled to size.  \r\nA lossles filetype is also recommended (e.g `.png` or `.webp`)\r\nFor the application to correctly recognize your frame you need to follow a specific filename pattern:  \r\nE.g. `int01.Nintendo + Gameboy.png` would be a good name for the first frame of the `int` set.  \r\n* The Filename needs to contain exactly two dots `.`\r\n* Before the first dot is the ID of your frame (uploading another image with the same ID will replace that one).  \r\n* The ID needs to be at least two letters and exactly two numbers.\r\n* Prevoiusly existing frames used `int01` to `int18` for the international frames, and `jp01` to `jp18` for the japanese ones.\r\n* The part after the frame ID will be the readable description shown in the frame selection dropdown when editing an image.  \r\n\r\n### Exporting/Importing your frames\r\n[In the settings tab](#/settings) you can find an "Export frames" button. The resulting `.json` file can be shared and will contain all of your frames.  \r\nThis `.json` file can be dragged into the application and will add all frames from that export to your application.  \r\n\r\n## Serial config with `config.json`\r\nCreate a file `config.json` in the root dir and configure it like the following example (multiple ports are supported):\r\n``` json\r\n{\r\n  "ports": [\r\n    {\r\n      "path": "COM19",\r\n      "baudRate": 115200,\r\n      "dataBits": 8,\r\n      "stopBits": 1,\r\n      "parity": "none",\r\n      "retry": false\r\n    },\r\n    ...\r\n  ] \r\n}\r\n```\r\nyou can set `retry` to a number of milliseconds after which a retry will be attempted to open the port.\r\n\r\n## Optional deployment config with `config.json`\r\nAdd a `deploy` section in `config.json` to automatically copy the created files to another location.  \r\nIf you set the option `gzip` to `true`, each file will be separately compressed. Useful for servers capable serving pre-zipped files. This saves ~1kB storage space which is very useful on [small systems](https://github.com/HerrZatacke/wifi-gbp-emulator).\r\n``` json\r\n{\r\n  "ports": [...], \r\n  "deploy": {\r\n    "dir": "/copy/all/files/to/that/folder",\r\n    "gzip": true\r\n  }\r\n}\r\n```\r\n\r\n## ToDos\r\n* User manual\r\n* Global Storage for images \r\n* Edit palettes\r\n* Other blendmodes than multiply for RGB-Images\r\n* trash bin for raw-data of deleted images (must implement global storage first for this)\r\n* Allow some gesture/swipe in gallery on touch devices\r\n* Translations\r\n\r\n## Future Plans\r\nThis tool is partially integrated into the [WiFi GBP Emulator](https://herrzatacke.github.io/wifi-gbp-emulator/), for which, you\'ll best [use the latest release](https://github.com/HerrZatacke/gb-printer-web/releases)\r\n\r\n## Links and research\r\n* The source to this project is [available on GitHub](https://github.com/HerrZatacke/gb-printer-web)\r\n* A basic version of this tool is avaliable [on GitHub-pages](https://herrzatacke.github.io/gb-printer-web/#/)  \r\n* This project has replaced my [GB printer direct serial to gif converter](https://github.com/HerrZatacke/direct-serial-to-gif-converter)\r\n* Also check out the [Gameboy Camera Discord](https://discord.gg/Kxhjg3qN) \r\n\r\n### Research\r\n* Tutorial on how to work with an ESP8266 by [ttapa: ESP8266 Beginner\'s Guide](https://tttapa.github.io/ESP8266/Chap01%20-%20ESP8266.html)  \r\n* [Programming a standalone ESP8266](https://www.instructables.com/id/3-Simple-Ways-of-Programming-an-ESP8266-12X-Module/)\r\n* [Deploying your JS App to Github Pages the easy way (or not)](https://medium.com/linagora-engineering/1ef8c48424b7)\r\n'}))},Bn=(a(411),Mn(Ln)),Gn=Object(n.b)((function(e){return{dragover:e.dragover}}),(function(){return{}})),Vn=function(e){return e.dragover?u.a.createElement("div",{className:"drag-over"}):null};Vn.propTypes={dragover:m.a.bool.isRequired},Vn.defaultProps={};var Hn=Vn,Kn=(a(412),Gn(Hn)),Wn=function(e){return u.a.createElement(u.a.Fragment,null,u.a.createElement("h1",{className:"app__content-headline"},"Gallery",u.a.createElement("span",{className:"app__counter"},"".concat(e.imageCount," images"),e.filteredCount?" / ".concat(e.filteredCount," filtered"):null,e.selectedCount?" / ".concat(e.selectedCount," selected"):null)),u.a.createElement("p",{className:"app__content-hint"},"These images are stored in the localStorage of your browser. That's why you (currently) cannot share a link to one of them.",u.a.createElement("br",null),"Also if you clear your browser's cookies, the images will be gone too."))};Wn.propTypes={imageCount:m.a.number.isRequired,selectedCount:m.a.number.isRequired,filteredCount:m.a.number.isRequired};var Yn=Wn,Xn=function(e){var t=e.pageSize,a=e.imageCount,n=e.urlParam,r=parseInt(n||"0",10)-1,o=t?Math.ceil(a/t):1,i=Math.max(0,o-1),s=Math.max(0,Math.min(r,i));return{valid:s===r,page:s}},Jn=Object(n.b)((function(e){return{availableTags:e.filter.availableTags,activeTags:e.filter.activeTags,visible:e.filter.visible}}),(function(e){return{setActiveTags:function(t){e({type:"SET_ACTIVE_TAGS",payload:t})},hideFilters:function(t){e({type:"HIDE_FILTERS",payload:t})}}})),$n=function(e){var t=e.tagActive,a=e.toggleTag,n=e.title,r=e.icon;return u.a.createElement("li",{title:n,className:g()("filter-form__tag",{"filter-form__tag--active":t})},u.a.createElement("button",{className:"filter-form__tag-button",type:"button",onClick:function(){return a(t?"remove":"add")}},u.a.createElement(v,{name:r}),u.a.createElement("span",{className:"filter-form__tag-text"},n)))};$n.propTypes={title:m.a.string.isRequired,tagActive:m.a.bool.isRequired,toggleTag:m.a.func.isRequired,icon:m.a.string},$n.defaultProps={icon:"checkmark"};var Qn=$n,Zn=a(51);function er(e){return function(e){if(Array.isArray(e))return nr(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||ar(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function tr(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var a=[],n=!0,r=!1,o=void 0;try{for(var i,s=e[Symbol.iterator]();!(n=(i=s.next()).done)&&(a.push(i.value),!t||a.length!==t);n=!0);}catch(e){r=!0,o=e}finally{try{n||null==s.return||s.return()}finally{if(r)throw o}}return a}(e,t)||ar(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ar(e,t){if(e){if("string"==typeof e)return nr(e,t);var a=Object.prototype.toString.call(e).slice(8,-1);return"Object"===a&&e.constructor&&(a=e.constructor.name),"Map"===a||"Set"===a?Array.from(e):"Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a)?nr(e,t):void 0}}function nr(e,t){(null==t||t>e.length)&&(t=e.length);for(var a=0,n=new Array(t);a<t;a++)n[a]=e[a];return n}var rr=function(e){var t=tr(Object(c.useState)(e.activeTags),2),a=t[0],n=t[1];Object(c.useEffect)((function(){n(e.activeTags)}),[e.availableTags]);var r=function(e,t){n("add"===t?Object(He.a)([].concat(er(a),[e])):a.filter((function(t){return t!==e})))};return e.visible?u.a.createElement(M,{className:"filter-form",confirm:function(){return e.setActiveTags(a)},deny:function(){return e.hideFilters()},header:"Select Filters"},u.a.createElement("ul",{className:"filter-form__tag-list"},u.a.createElement(Qn,{title:"Untagged",tagActive:a.includes(Zn.d),toggleTag:function(e){return r(Zn.d,e)}}),u.a.createElement(Qn,{title:"New",tagActive:a.includes(Zn.b),toggleTag:function(e){return r(Zn.b,e)}}),u.a.createElement(Qn,{title:"Monochrome",tagActive:a.includes(Zn.a),toggleTag:function(e){return r(Zn.a,e)}}),u.a.createElement(Qn,{title:"RGB",tagActive:a.includes(Zn.c),toggleTag:function(e){return r(Zn.c,e)}})),u.a.createElement("ul",{className:"filter-form__tag-list"},e.availableTags.map((function(e){return u.a.createElement(Qn,{key:e,title:e,tagActive:a.includes(e),toggleTag:function(t){return r(e,t)}})}))),u.a.createElement("ul",{className:"filter-form__tag-list filter-form__tag-list--clear"},u.a.createElement(Qn,{title:"Clear Filters",tagActive:!1,icon:"delete",toggleTag:function(){n([])}}))):null};rr.propTypes={visible:m.a.bool.isRequired,availableTags:m.a.array.isRequired,activeTags:m.a.array.isRequired,setActiveTags:m.a.func.isRequired,hideFilters:m.a.func.isRequired},rr.defaultProps={};var or=rr,ir=(a(413),Jn(or)),sr=Object(n.b)((function(){return{}}),(function(){return{}})),lr=(a(22),a(42),a(38),a(43),a(35),a(88),a(23),function(e){return u.a.createElement("div",{className:g()("wifi-settings__ap-group",{"wifi-settings__ap-group--delete":e.delete})},u.a.createElement("div",{className:"settings__inputgroup"},u.a.createElement("label",{htmlFor:"".concat(e.id,"-settings-ap-ssid"),className:"settings__label"},"Network SSID"),u.a.createElement("input",{id:"".concat(e.id,"-settings-ap-ssid"),className:"settings__input",type:"text",value:e.ssid,readOnly:!e.isNew,disabled:!e.isNew,onChange:function(t){var a=t.target;e.update({ssid:a.value})}}),u.a.createElement("button",{type:"button",className:"settings__button wifi-settings__button wifi-settings__button--delete",onClick:function(){e.update({delete:!e.delete})}},u.a.createElement(v,{name:"delete"}))),u.a.createElement("div",{className:"settings__inputgroup"},u.a.createElement("label",{htmlFor:"".concat(e.id,"-settings-ap-psk"),className:"settings__label"},"Network Password"),u.a.createElement("input",{id:"".concat(e.id,"-settings-ap-psk"),className:"settings__input",type:"password",placeholder:"••••••••",value:e.psk||"",onChange:function(t){var a=t.target;e.update({psk:a.value})}})))});lr.propTypes={id:m.a.string.isRequired,ssid:m.a.string.isRequired,isNew:m.a.bool.isRequired,delete:m.a.bool.isRequired,psk:m.a.string.isRequired,update:m.a.func.isRequired};var cr=lr;function ur(e){return(ur="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function pr(e){return function(e){if(Array.isArray(e))return mr(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return mr(e,t);var a=Object.prototype.toString.call(e).slice(8,-1);"Object"===a&&e.constructor&&(a=e.constructor.name);if("Map"===a||"Set"===a)return Array.from(e);if("Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a))return mr(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function mr(e,t){(null==t||t>e.length)&&(t=e.length);for(var a=0,n=new Array(t);a<t;a++)n[a]=e[a];return n}function fr(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function dr(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?fr(Object(a),!0).forEach((function(t){hr(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):fr(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function hr(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function br(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function gr(e,t){return(gr=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function yr(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,n=Er(e);if(t){var r=Er(this).constructor;a=Reflect.construct(n,arguments,r)}else a=n.apply(this,arguments);return vr(this,a)}}function vr(e,t){return!t||"object"!==ur(t)&&"function"!=typeof t?_r(e):t}function _r(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Er(e){return(Er=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var Sr=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&gr(e,t)}(o,e);var t,a,n,r=yr(o);function o(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,o),(t=r.call(this,e)).env=Object(pa.a)(),t.ref=u.a.createRef(),t.saveSettings=t.saveSettings.bind(_r(t)),t.getSettings=t.getSettings.bind(_r(t)),t.state={sync:!1,wifiConfig:null},t}return t=o,(a=[{key:"componentDidMount",value:function(){this.getSettings()}},{key:"componentWillUnmount",value:function(){this.emptyPassWordFields()}},{key:"getSettings",value:function(){var e=this;fetch("/wificonfig/get").then((function(e){return e.json()})).then((function(t){t.mdns=t.mdns||"",t.ap=t.ap||{ssid:"",psk:""},t.networks=t.networks||[],e.setState({sync:!0,wifiConfig:t})})).catch((function(){e.setState({sync:!1,wifiConfig:null})}))}},{key:"saveSettings",value:function(){var e=this,t=dr(dr({},this.state.wifiConfig),{},{networks:this.state.wifiConfig.networks.filter((function(e){return!0===e.delete||e.psk})).filter((function(e){return e.ssid})).filter((function(e){return!(e.delete&&e.isNew)})).map((function(e){var t=e.ssid,a=e.psk;return{delete:e.delete,ssid:t,psk:a}}))});fetch("/wificonfig/set",{method:"post",body:JSON.stringify(t)}).then((function(e){return e.json()})).then((function(e){if(e.error)throw new Error(e.error)})).catch((function(t){alert(t),e.setState({sync:!1,wifiConfig:null})})).then((function(){e.getSettings()}))}},{key:"emptyPassWordFields",value:function(){pr(this.ref.current.querySelectorAll("[type=password")).forEach((function(e){e.value=""}))}},{key:"render",value:function(){var e=this,t=this.state,a=t.wifiConfig,n=t.sync;return a?u.a.createElement("div",{className:"wifi-settings",ref:this.ref},u.a.createElement("h3",{className:"wifi-settings__subheadline"},"Host Settings"),u.a.createElement("div",{className:"settings__inputgroup"},u.a.createElement("label",{htmlFor:"settings-mdns",className:"settings__label"},"mDNS Name (Bonjour/Avahi)"),u.a.createElement("input",{id:"settings-mdns",className:"settings__input",type:"text",autoCapitalize:"off",autoComplete:"off",autoCorrect:"off",value:a.mdns,onChange:function(t){var n=t.target;e.setState({sync:!1,wifiConfig:dr(dr({},a),{},{mdns:n.value.trim()})})}})),u.a.createElement("div",{className:"settings__inputgroup"},u.a.createElement("label",{htmlFor:"settings-ap-ssid",className:"settings__label"},"Accesspoint SSID"),u.a.createElement("input",{id:"settings-ap-ssid",className:"settings__input",type:"text",autoCapitalize:"off",autoComplete:"off",autoCorrect:"off",value:a.ap.ssid,onChange:function(t){var n=t.target;e.setState({sync:!1,wifiConfig:dr(dr({},a),{},{ap:dr(dr({},a.ap),{},{ssid:n.value.trim()})})})}})),u.a.createElement("div",{className:"settings__inputgroup"},u.a.createElement("label",{htmlFor:"settings-ap-psk",className:"settings__label"},"Accesspoint Password"),u.a.createElement("input",{id:"settings-ap-psk",className:"settings__input",type:"password",autoComplete:"off",placeholder:"••••••••",value:a.ap.psk||"",onChange:function(t){var n=t.target;e.setState({sync:!1,wifiConfig:dr(dr({},a),{},{ap:dr(dr({},a.ap),{},{psk:n.value.trim()})})})}})),u.a.createElement("h3",{className:"wifi-settings__subheadline"},"Networks",u.a.createElement("button",{type:"button",className:"settings__button wifi-settings__button wifi-settings__button--add",onClick:function(){var t=a.networks;t.push({ssid:"",psk:"",delete:!1,isNew:!0}),e.setState({sync:!1,wifiConfig:dr(dr({},a),{},{networks:t})})}},u.a.createElement(v,{name:"add"}))),u.a.createElement("ul",{className:"wifi-settings__ap-groups"},a.networks.map((function(t,n){var r=t.ssid,o=t.psk,i=void 0===o?"":o,s=t.delete,l=void 0!==s&&s,c=t.isNew,p=void 0!==c&&c;return u.a.createElement(cr,{key:"apconf-".concat(n),id:"apconf-".concat(n),ssid:r,psk:i,isNew:p,delete:l,update:function(r){var o=a.networks;o[n]=dr(dr({},t),r),e.setState({sync:!1,wifiConfig:dr(dr({},a),{},{networks:o})})}})}))),u.a.createElement("div",{className:"settings__inputgroup wifi-settings__buttongroup"},u.a.createElement("button",{type:"button",disabled:n,className:"settings__button wifi-settings__button",onClick:this.saveSettings},"Save WiFi-Settings"))):null}}])&&br(t.prototype,a),n&&br(t,n),o}(u.a.Component),kr=(a(414),sr(Sr));function Nr(e){return function(e){if(Array.isArray(e))return wr(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return wr(e,t);var a=Object.prototype.toString.call(e).slice(8,-1);"Object"===a&&e.constructor&&(a=e.constructor.name);if("Map"===a||"Set"===a)return Array.from(e);if("Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a))return wr(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function wr(e,t){(null==t||t>e.length)&&(t=e.length);for(var a=0,n=new Array(t);a<t;a++)n[a]=e[a];return n}var Rr=Object(n.b)((function(e){return{imageCount:e.videoParams.imageSelection?e.videoParams.imageSelection.length:0,scaleFactor:e.videoParams.scaleFactor||Nr(e.exportScaleFactors).pop()||4,frameRate:e.videoParams.frameRate||24,yoyo:e.videoParams.yoyo||!1,lockFrame:e.videoParams.lockFrame||!1,invertPalette:e.videoParams.invertPalette||!1,frame:e.videoParams.frame||"",cropFrame:e.videoParams.cropFrame||!1,palette:e.videoParams.palette||""}}),(function(e){return{update:function(t){e({type:"SET_VIDEO_PARAMS",payload:t})},cancel:function(){e({type:"CANCEL_ANIMATE_IMAGES"})},animate:function(){e({type:"ANIMATE_IMAGES"})}}}));function Or(e){return(Or="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Pr(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function Cr(e,t){return(Cr=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function jr(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,n=Ir(e);if(t){var r=Ir(this).constructor;a=Reflect.construct(n,arguments,r)}else a=n.apply(this,arguments);return Tr(this,a)}}function Tr(e,t){return!t||"object"!==Or(t)&&"function"!=typeof t?xr(e):t}function xr(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Ir(e){return(Ir=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var Fr=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Cr(e,t)}(o,e);var t,a,n,r=jr(o);function o(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,o),(t=r.call(this,e)).state={frameRate:e.frameRate,scaleFactor:e.scaleFactor,palette:e.palette,invertPalette:e.invertPalette,yoyo:e.yoyo,frame:e.frame,lockFrame:e.lockFrame,cropFrame:e.lockFrame},t.callUpdate=t.callUpdate.bind(xr(t)),t}return t=o,(a=[{key:"callUpdate",value:function(){var e={frameRate:Math.min(120,Math.max(1,parseInt(this.state.frameRate,10))),scaleFactor:Math.min(12,Math.max(1,parseInt(this.state.scaleFactor,10))),palette:this.state.palette,invertPalette:this.state.invertPalette,yoyo:this.state.yoyo,frame:this.state.frame,lockFrame:this.state.lockFrame,cropFrame:this.state.cropFrame};this.setState(e),this.props.update(e)}},{key:"render",value:function(){var e=this;return this.props.imageCount?u.a.createElement(D,{className:"video-params",confirm:function(){e.callUpdate(),e.props.animate()},deny:this.props.cancel,header:"Create a video with ".concat(this.props.imageCount," frames")},u.a.createElement("div",{className:"settings__inputgroup"},u.a.createElement("label",{htmlFor:"video-params-frameRate",className:"settings__label"},"Framerate"),u.a.createElement("input",{id:"video-params-frameRate",className:"settings__input",type:"number",min:"1",max:"120",value:this.state.frameRate,onChange:function(t){var a=t.target;e.setState({frameRate:a.value})},onBlur:this.callUpdate})),u.a.createElement("div",{className:"settings__inputgroup"},u.a.createElement("label",{htmlFor:"video-params-scaleFactor",className:"settings__label"},"Scale video"),u.a.createElement("input",{id:"video-params-scaleFactor",className:"settings__input",type:"number",min:"1",max:"12",value:this.state.scaleFactor,onChange:function(t){var a=t.target;e.setState({scaleFactor:a.value})},onBlur:this.callUpdate})),u.a.createElement("label",{className:g()("video-params__check-label",{"video-params__check-label--checked":this.state.yoyo}),title:"Enable Yoyo-Effect (loop back to the beginning)"},u.a.createElement("input",{type:"checkbox",className:"video-params__checkbox",checked:this.state.yoyo,onChange:function(t){var a=t.target;e.setState({yoyo:a.checked},e.callUpdate)}}),u.a.createElement(v,{name:"checkmark"}),u.a.createElement("span",{className:"video-params__check-label-text"},"Yoyo-Effect")),u.a.createElement("label",{className:g()("video-params__check-label",{"video-params__check-label--checked":this.props.cropFrame})},u.a.createElement("input",{type:"checkbox",className:"video-params__checkbox",checked:this.state.cropFrame,onChange:function(t){var a=t.target;e.setState({cropFrame:a.checked},e.callUpdate)}}),u.a.createElement(v,{name:"checkmark"}),u.a.createElement("span",{className:"video-params__check-label-text"},"Crop/remove frame")),u.a.createElement("div",{className:"video-params__select-label"},"Palette"),u.a.createElement(Ge,{noFancy:!0,allowEmpty:!0,value:this.state.palette,invertPalette:this.state.invertPalette,onChange:function(t){e.setState({palette:t},e.callUpdate)},updateInvertPalette:function(t){e.setState({invertPalette:t},e.callUpdate)}}),this.state.cropFrame?null:u.a.createElement(u.a.Fragment,null,u.a.createElement("div",{className:"video-params__select-label"},"Frame"),u.a.createElement(ue,{frame:this.state.frame,lockFrame:this.state.lockFrame,noFrameOption:"As selected per image",updateFrame:function(t){e.setState({frame:t},e.callUpdate)},updateFrameLock:function(t){e.setState({lockFrame:t},e.callUpdate)}}))):null}}])&&Pr(t.prototype,a),n&&Pr(t,n),o}(u.a.Component);Fr.propTypes={imageCount:m.a.number.isRequired,frameRate:m.a.number.isRequired,scaleFactor:m.a.number.isRequired,palette:m.a.string.isRequired,invertPalette:m.a.bool.isRequired,yoyo:m.a.bool.isRequired,lockFrame:m.a.bool.isRequired,cropFrame:m.a.bool.isRequired,frame:m.a.string.isRequired,cancel:m.a.func.isRequired,animate:m.a.func.isRequired,update:m.a.func.isRequired};var qr=Fr,Ar=(a(415),Rr(qr));a(57);function Dr(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var a=[],n=!0,r=!1,o=void 0;try{for(var i,s=e[Symbol.iterator]();!(n=(i=s.next()).done)&&(a.push(i.value),!t||a.length!==t);n=!0);}catch(e){r=!0,o=e}finally{try{n||null==s.return||s.return()}finally{if(r)throw o}}return a}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return Mr(e,t);var a=Object.prototype.toString.call(e).slice(8,-1);"Object"===a&&e.constructor&&(a=e.constructor.name);if("Map"===a||"Set"===a)return Array.from(e);if("Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a))return Mr(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Mr(e,t){(null==t||t>e.length)&&(t=e.length);for(var a=0,n=new Array(t);a<t;a++)n[a]=e[a];return n}var zr=Object(n.b)((function(e){var t=Dr(e.sortBy.split("_"),2),a=t[0],n=void 0===a?"":a,r=t[1],o=void 0===r?"":r;return{visible:e.sortOptionsVisible,sortBy:n,sortOrder:o}}),(function(e){return{setSortBy:function(t){e({type:"SET_SORT_BY",payload:t})},hideSortForm:function(){e({type:"HIDE_SORT_OPTIONS"})}}}));function Ur(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var a=[],n=!0,r=!1,o=void 0;try{for(var i,s=e[Symbol.iterator]();!(n=(i=s.next()).done)&&(a.push(i.value),!t||a.length!==t);n=!0);}catch(e){r=!0,o=e}finally{try{n||null==s.return||s.return()}finally{if(r)throw o}}return a}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return Lr(e,t);var a=Object.prototype.toString.call(e).slice(8,-1);"Object"===a&&e.constructor&&(a=e.constructor.name);if("Map"===a||"Set"===a)return Array.from(e);if("Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a))return Lr(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Lr(e,t){(null==t||t>e.length)&&(t=e.length);for(var a=0,n=new Array(t);a<t;a++)n[a]=e[a];return n}var Br=[{title:"Index",key:"index"},{title:"Title",key:"title"},{title:"Date",key:"created"},{title:"Palette",key:"palette"}],Gr=function(e){var t=Ur(Object(c.useState)(e.sortBy),2),a=t[0],n=t[1],r=Ur(Object(c.useState)(e.sortOrder),2),o=r[0],i=r[1];if(Object(c.useEffect)((function(){n(e.sortBy),i(e.sortOrder)}),[e.visible]),!e.visible)return null;var s=Br.find((function(e){return e.key===a})),l="asc"===o?"ascending":"descending";return u.a.createElement(M,{className:"sort-form",confirm:function(){return e.setSortBy("".concat(a,"_").concat(o))},deny:function(){e.hideSortForm()},header:"Sort by: ".concat(s.title,"/").concat(l)},u.a.createElement("ul",{className:"sort-form__list"},Br.map((function(e){var t=e.key,r=e.title;return u.a.createElement("li",{key:t},u.a.createElement("button",{className:g()("sort-form__button",{"sort-form__button--selected":a===t}),type:"button",onClick:function(){return n(t)}},r))}))),u.a.createElement("ul",{className:"sort-form__list"},u.a.createElement("li",null,u.a.createElement("button",{className:g()("sort-form__button sort-form__button--order-asc",{"sort-form__button--selected":"asc"===o}),type:"button",onClick:function(){return i("asc")}},"Ascending")),u.a.createElement("li",null,u.a.createElement("button",{className:g()("sort-form__button sort-form__button--order-desc",{"sort-form__button--selected":"desc"===o}),type:"button",onClick:function(){return i("desc")}},"Descending"))))};Gr.propTypes={visible:m.a.bool.isRequired,sortBy:m.a.string.isRequired,sortOrder:m.a.string.isRequired,setSortBy:m.a.func.isRequired,hideSortForm:m.a.func.isRequired},Gr.defaultProps={};var Vr=Gr,Hr=(a(416),zr(Vr)),Kr=Object(pa.a)(),Wr=function(e){return u.a.createElement(f.a,null,u.a.createElement(C,null),u.a.createElement("div",{className:"app__content"},u.a.createElement(d.d,null,u.a.createElement(d.b,{exact:!0,path:"/gallery"},u.a.createElement(d.a,{to:"/gallery/page/1"})),u.a.createElement(d.b,{path:"/gallery/page/:page",render:function(t){var a=t.match,n=Xn({urlParam:a.params.page,pageSize:e.pageSize,imageCount:e.filteredCount}),r=n.valid,o=n.page;return r?u.a.createElement(u.a.Fragment,null,u.a.createElement(Yn,{imageCount:e.imageCount,selectedCount:e.selectedCount,filteredCount:e.filteredCount}),u.a.createElement(Dn,{page:o})):u.a.createElement(d.a,{to:"/gallery/page/".concat(o+1)})}}),u.a.createElement(d.b,{path:"/palettes"},u.a.createElement("h1",{className:"app__content-headline"},"Palettes"),u.a.createElement(ja,null)),u.a.createElement(d.b,{path:"/settings"},u.a.createElement("h1",{className:"app__content-headline"},"Settings"),u.a.createElement(Sa,null),"esp8266"!==Kr.env?null:u.a.createElement(u.a.Fragment,null,u.a.createElement("h1",{className:"app__content-headline"},"WiFi-Settings"),u.a.createElement(kr,null)),u.a.createElement("ul",{className:"settings__version"},u.a.createElement("li",null,"Web-App version: ".concat("1.7.0")),u.a.createElement("li",null,"Printer version: ".concat(Kr.version)),u.a.createElement("li",null,"Max Images: ".concat(Kr.maximages)),u.a.createElement("li",null,"Environment type: ".concat(Kr.env)),u.a.createElement("li",null,"Compiled Filesystem: ".concat(Kr.fstype)),u.a.createElement("li",null,"Compiled Bootmode: ".concat(Kr.bootmode)),u.a.createElement("li",null,"Compiled for OLED: ".concat(Kr.oled?"yes":"no")))),u.a.createElement(d.b,{path:"/import"},u.a.createElement("h1",{className:"app__content-headline"},"Import"),u.a.createElement(Ka,null)),u.a.createElement(d.b,{path:"/"},u.a.createElement(Bn,null)))),u.a.createElement(L,null),u.a.createElement(H,null),u.a.createElement(wt,null),u.a.createElement(Ar,null),u.a.createElement(Ct,null),u.a.createElement(Ut,null),u.a.createElement(aa,null),u.a.createElement(Kn,null),u.a.createElement(ir,null),u.a.createElement(Hr,null))};Wr.propTypes={imageCount:m.a.number.isRequired,selectedCount:m.a.number.isRequired,filteredCount:m.a.number.isRequired,pageSize:m.a.number.isRequired},Wr.defaultProps={};var Yr=Wr;a(417),t.default=l(Yr)}}]);