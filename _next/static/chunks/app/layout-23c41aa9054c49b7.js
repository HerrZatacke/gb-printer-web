(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[7177],{933:(e,t,r)=>{"use strict";r.d(t,{E:()=>s});var n,a=r(97004),o=r(39249),i=r(24463),s=function(e,t){var s,l,u,c,d=(s=(0,a._)(function(){var a;return(0,o.YH)(this,function(o){switch(o.label){case 0:if(n)return[3,2];return[4,Promise.all([r.e(9268),r.e(7431),r.e(1575)]).then(r.bind(r,94979))];case 1:a=o.sent().dropBoxSyncTool,n=n||a(e,t),o.label=2;case 2:return[2,n]}})}),function(){return s.apply(this,arguments)});return i.A.getState().dropboxStorage.use&&d(),{recoverImageData:(l=(0,a._)(function(e){return(0,o.YH)(this,function(t){switch(t.label){case 0:return[4,d()];case 1:return[2,t.sent().recoverImageData(e)]}})}),function(e){return l.apply(this,arguments)}),startAuth:(0,a._)(function(){return(0,o.YH)(this,function(e){switch(e.label){case 0:return[4,d()];case 1:return[2,e.sent().startAuth()]}})}),startSyncData:(u=(0,a._)(function(e){return(0,o.YH)(this,function(t){switch(t.label){case 0:return[4,d()];case 1:return[2,t.sent().startSyncData(e)]}})}),function(e){return u.apply(this,arguments)}),startSyncImages:(0,a._)(function(){return(0,o.YH)(this,function(e){switch(e.label){case 0:return[4,d()];case 1:return[2,e.sent().startSyncImages()]}})}),updateSettings:(c=(0,a._)(function(e){return(0,o.YH)(this,function(t){switch(t.label){case 0:return[4,d()];case 1:return[2,t.sent().updateSettings(e)]}})}),function(e){return c.apply(this,arguments)}),subscribe:function(){var e;return i.A.subscribe(function(e){return e.dropboxStorage},(e=(0,a._)(function(e){return(0,o.YH)(this,function(t){switch(t.label){case 0:return[4,d()];case 1:return t.sent().updateSettings(e),[2]}})}),function(t){return e.apply(this,arguments)}))}}}},1441:(e,t,r)=>{"use strict";r.d(t,{default:()=>v});var n,a,o=r(97004),i=r(87025),s=r(39249),l=r(95155),u=r(12115),c=r(45686),d=r(64768),m=r(41186),p=r(46498),g=r(41476),f=r(52166),h=r(30891);let v=function(e){var t=e.children,v=p.A.getState(),b=v.setPrinterFunctions,w=v.setPrinterBusy,y=v.setPrinterData,S=g.A.getState(),P=S.startProgress,I=S.setProgress,F=S.stopProgress,T=m.A.getState(),E=T.dismissDialog,C=T.setDialog,D=(0,d.A)().handleFileImport,A=(0,u.useRef)(""),k=(0,u.useCallback)(function(e){var t=Math.min(1,Math.max(0,e));if(A&&(0===t||1===t)){F(A.current),A.current="";return}A.current||(A.current=P("Getting items from printer")),I(A.current,t)},[I,P,F]);(0,u.useEffect)(function(){var e=function(e){var t,r=f.A.getState().printerUrl;try{t=new URL(r).origin}catch(e){t=new URL(window.location.href).origin}if(e.origin===t){var l=e.data.fromRemotePrinter,u=void 0===l?{}:l,c=u.lines,d=u.progress,m=u.blob,g=u.blobsdone,h=u.commands,v=u.printerData,S=e.source;if(h&&(n&&JSON.stringify(h)===JSON.stringify(p.A.getState().printerFunctions)||(b(h),w(!1),y(null)),a=S,window.clearTimeout(n),n=window.setTimeout(function(){n=null,a=null,w(!0),y(null),b([])},1500)),c&&D([new File([c.join("\n")],"Text input.txt",{type:"text/plain"})]),void 0!==d&&k(d),m&&D([new File([m],"blob.unknown")]),g){if("string"==typeof g[0])return void window.setTimeout(function(){alert("You should update the web-app to a version > 1.16.0 on your printer for an optimized import experience :-)")},200);var P=g.reduce(function(e,t){if(!t.blob||!t.ok)return e;var r=g.length>1?(e.length+1).toString(10).padStart(2,"0"):"";return(0,i._)(e).concat([new File([t.blob],"Printer ".concat(r).trim(),{type:t.contentType})])},[]);P.length?D(P,{fromPrinter:!0}):C({message:"No valid files received from WiFi-Printer",confirm:(0,o._)(function(){return(0,s.YH)(this,function(e){return E(0),w(!1),y(null),[2]})})})}v&&(y(v),w(!1))}};return window.addEventListener("message",e),function(){return window.removeEventListener("message",e)}},[E,D,C,w,y,b,k]);var x=(0,u.useMemo)(function(){var e;return{callRemoteFunction:(e=(0,o._)(function(e){var t,n;return(0,s.YH)(this,function(o){switch(o.label){case 0:return t=p.A.getState().printerData,w(!0),e===c.n.FETCHIMAGES&&t&&(n={dumps:null==t?void 0:t.dumps}),[4,Promise.resolve().then(r.t.bind(r,52491,23))];case 1:return o.sent(),[4,Promise.resolve().then(r.t.bind(r,98933,23))];case 2:if(o.sent(),!a)throw Error("remote printer window object is missing");return a.postMessage({toRemotePrinter:{command:e,params:n}},"*"),[2]}})}),function(t){return e.apply(this,arguments)})}},[w]);return(0,l.jsx)(h.G.Provider,{value:x,children:t})}},1607:(e,t,r)=>{"use strict";r.d(t,{D:()=>p,EnvProvider:()=>g});var n=r(97004),a=r(693),o=r(60376),i=r(78538),s=r(39249),l=r(95155),u=r(12115),c=r(52166),d=r(75380),m=(0,u.createContext)(null),p=function(){return(0,u.useContext)(m)},g=function(e){var t=e.children,r=(0,i._)((0,u.useState)(null),2),p=r[0],g=r[1],f=(0,c.A)().setPrinterUrl;return(0,u.useEffect)(function(){var e=["/gb-printer-web","/env.json"].filter(Boolean).join("/");e&&(0,n._)(function(){var t,r,n,i;return(0,s.YH)(this,function(s){switch(s.label){case 0:return s.trys.push([0,5,,6]),[4,(0,d.ZU)()];case 1:return s.sent(),[4,fetch(e)];case 2:return[4,s.sent().json()];case 3:return t=s.sent(),n=[(0,a._)({},t)],i={},[4,d.mU.driver()];case 4:return"esp8266"===(r=o._.apply(void 0,n.concat([(i.localforage=s.sent(),i)]))).env&&f("/"),g(r),[3,6];case 5:return s.sent(),g({version:"0.0.0",maximages:0,localforage:"error",env:"error",fstype:"-",bootmode:"-",oled:!1}),[3,6];case 6:return[2]}})})()},[f]),(0,l.jsx)(m.Provider,{value:p,children:t})}},3800:(e,t,r)=>{var n={"./de.json":[8945,8945],"./en.json":[27581],"./es.json":[64754,4754],"./fr.json":[65454,5454],"./it.json":[91451,1451],"./nl.json":[69348,9348],"./no.json":[441,441],"./pt.json":[83262,3262],"./sv.json":[35975,5975]};function a(e){if(!r.o(n,e))return Promise.resolve().then(()=>{var t=Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t});var t=n[e],a=t[0];return Promise.all(t.slice(1).map(r.e)).then(()=>r.t(a,19))}a.keys=()=>Object.keys(n),a.id=3800,e.exports=a},6617:(e,t,r)=>{"use strict";r.d(t,{h:()=>s,i:()=>i});var n=r(97004),a=r(39249),o=r(12115),i=(0,o.createContext)({runWithImage:(0,n._)(function(){return(0,a.YH)(this,function(e){throw Error("Plugin Context is missing")})}),runWithImages:(0,n._)(function(){return(0,a.YH)(this,function(e){throw Error("Plugin Context is missing")})}),validateAndAddPlugin:(0,n._)(function(){return(0,a.YH)(this,function(e){throw Error("Plugin Context is missing")})})}),s=function(){return(0,o.useContext)(i)}},9718:(e,t,r)=>{"use strict";r.d(t,{_Y:()=>a,k4:()=>o,qt:()=>n});var n=function(e){return e.USB="USB",e.SERIAL="SERIAL",e}({}),a=function(e){return e.INACTIVE="inactive",e.PACKET_CAPTURE="packet_capture",e.SUPER_PRINTER_INTERFACE="super_printer_interface",e.GBXCART="gbxcart",e}({}),o=[{vendorId:9025,productId:32822},{vendorId:9025,productId:32823},{vendorId:9025,productId:32845},{vendorId:9025,productId:32846},{vendorId:9025,productId:32847},{vendorId:9025,productId:32848},{vendorId:9025,productId:32850},{vendorId:9025,productId:32851},{vendorId:9025,productId:32852},{vendorId:9025,productId:32853},{vendorId:9025,productId:32854},{vendorId:9025,productId:32855},{vendorId:9114}]},12107:(e,t,r)=>{Promise.resolve().then(r.bind(r,94116)),Promise.resolve().then(r.bind(r,53585)),Promise.resolve().then(r.bind(r,1607)),Promise.resolve().then(r.bind(r,32134)),Promise.resolve().then(r.bind(r,29619)),Promise.resolve().then(r.bind(r,7119)),Promise.resolve().then(r.bind(r,52588)),Promise.resolve().then(r.bind(r,93959)),Promise.resolve().then(r.bind(r,1441))},27581:e=>{"use strict";e.exports=JSON.parse('{"SettingsGeneric":{"galleryPageSize":"Gallery page size","galleryPageSizeHelper":"Set to 0 to disable pagination – might cause performance issues on large sets of images","galleryClickAction":"Click behaviour for gallery images","galleryClickActionHelper":"Ctrl+Click and Shift+Click will always select/range-select","exportDimensions":"Image export dimensions","exportFiletypes":"Image export filetypes","exportHandleFrame":"How to handle frames when exporting images","filenameStyle":"Filename style","importSavFrames":"Frames to be applied when importing Cartridge dumps","importSavFramesNone":"None","importSavFramesUnknown":"Unknown","importSavOrder":"Order to use when importing a .sav file","importLastSeen":"Import ‘last seen’ image when importing Cartridge dumps","importDeleted":"Import deleted images when importing Cartridge dumps","forceMagicCheck":"Force valid .sav file when importing","importPad":"Pad images up to 144px height on import","hideDates":"Hide dates in gallery","sortPalettes":"Sort Palettes","preferredLocale":"Preferred locale","exampleDateFormat":"Example date format: {format}","printerUrl":"Printer URL","printerUrlHelper":"If you own a physical wifi-printer, you can add its URL here and check the <link>\uD83D\uDD17 Import-tab</link>","printerParams":"Additional printer settings","enableDebug":"Show debug info","galleryClickActions":{"clickSelectsItem":"Click selects the item","clickOpensEditDialog":"Click opens edit dialog","clickOpensLightbox":"Click opens the item in lightbox"},"frameModes":{"keepFrame":"Keep frame","cropFrame":"Crop frame","squareBlack":"Make image squared (add black)","squareWhite":"Make image squared (add white)"},"importOrders":{"cartIndex":"Sorted by ROMs decision (as seen in camera roll in original RAM)","ramIndex":"Sorted by actual order in RAM (memory address)"},"filenameStyles":{"fullTitle":"Full Title","dateTitle":"Date and Title","titleOnly":"Title only"},"locales":{"de-DE":"German – Germany (de-DE)","en-US":"English – United States (en-US)","en-GB":"English – United Kingdom (en-GB)","en-CA":"English – Canada (en-CA)","fr-FR":"French – France (fr-FR)"}},"SettingsDropbox":{"enableStorage":"Use Dropbox as storage","subfolder":"Subfolder","subfolderWarning":"Enter only the subfolder name. Otherwise, the app will fully resolve to “{fullAppPath}” within your Dropbox, which is probably not what you intended.","openFolder":"<link>\uD83D\uDD17 Open folder</link>","openFolderLinkTitle":"Open Dropbox folder:\\n{folderLink}","enableEnhancedSync":"Enable enhanced dropbox sync","enableEnhancedSyncHelper":"This is an experimental feature.","authenticate":"Authenticate","logout":"Logout"},"SettingsWiFi":{"hostSettings":"Host Settings","mdnsName":"mDNS Name (Bonjour/Avahi)","accesspointSSID":"Accesspoint SSID","accesspointPassword":"Accesspoint Password","networks":"Networks","networkSSID":"Network SSID","networkPassword":"Network Password","deleteNetwork":"Delete Network","willDeleteNetwork":"Network will be deleted","addNetwork":"Add Network","saveSettings":"Save WiFi-Settings"},"SettingsPlugins":{"addPlugin":"Add Plugin","addPluginHelper":"\uD83D\uDD17 A selection of plugins can be found here","installedPlugins":"Installed Plugins","deletePlugin":"Delete Plugin “{name}”"},"SettingsGit":{"enableStorage":"Use github as storage","owner":"Owner","repoName":"Repository name","branch":"Branch","throttle":"Throttle (in ms)","token":"Token","tokenHelper":"Go to GitHub to create a <link>\uD83D\uDD17 new fine-grained personal access token</link>, select the repository you want to use for synching and allow read/write for <code>“Repository Permissions > Contents”</code>"},"WebUSBGreeting":{"enableWebUsb":"Enable WebUSB / Serial ports","webUSBEnabled":"Your current browser/device does support WebUSB","webUSBDisabled":"Your current browser/device does not support WebUSB","webSerialEnabled":"Your current browser/device does support Web Serial","webSerialDisabled":"Your current browser/device does not support Web Serial"},"ConnectSerial":{"openWebUSB":"Open WebUSB device","openWebSerial":"Open Web Serial device","connectedDevices":"{deviceCount, plural, =0 {No connected devices} =1 {One connected device:} other {# connected devices:}}","showUnknownResponse":"Show message from unrecognized device","unknownDeviceInfo":"Unknown device info","copyToClipboard":"Copy to clipboard","portDeviceTypes":{"inactiveDevice":"Inactive Device","arduinoGameboyPrinterEmulator":"Arduino Gameboy Printer Emulator","superPrinterInterface":"Super Printer Interface","cartridgeReader":"Cartridge Reader (LK Firmware)"}},"SettingsTabs":{"genericSettings":"Generic Settings","dropboxSettings":"Dropbox Settings","wifiSettings":"WiFi Settings","pluginSettings":"Plugin Settings","gitSettings":"Git Settings"},"ExportSettings":{"resetGroups":"Reset image groups","exportAll":"Export Everything","exportPlugins":"Export Plugins","hashCleanup":"Hash Cleanup","persistState":{"isPersistent":"Storage is persistent","requestPersistence":"Request storage persistence","apiUnavailable":"Persistence API not available","failed":"Failed to persist storage"}},"BatchButtons":{"manageSorting":"Manage Sorting","manageFilters":"Manage Filters","checkAll":"Check All","uncheckAll":"Uncheck All","usePlugin":"Use Plugin","batchActions":{"delete":"Delete","animate":"Animate","download":"Download","edit":"Edit","rgb":"Create RGB Images"}},"AddPlugin":{"notTrusted":"The source “{source}” of this plugin is not trusted!!","alreadyInstalled":"The plugin “{url}” is already installed","goToPlugins":"\uD83D\uDD17 Go to plugins","willAdd":"This will add {url} to your plugins.","addButton":"Add"},"CopyDatabase":{"sourceUrl":"Source URL","loadButton":"Load","copyButton":"Copy","reportImages":"{count} images","reportFrames":"{count} frames","reportLocalStorage":"{count} localStorage entries","reportLocalStorageCleared":"localStorage cleared","reportLocalStorageCopied":"localStorage copied","reportImagesCopied":"images copied","reportFramesCopied":"frames copied"},"EditFrameStartLine":{"moveUp":"Move image up","moveDown":"Move image down"},"EditImageTabs":{"tabTypes":{"frame":"Frame","misc":"Misc","palette":"Palette","colors":"Colors","tags":"Tags"}},"FolderBreadcrumb":{"editGroup":"Edit group “{title}”","openNavigation":"Open Gallery Navigation"},"FolderTreeDialog":{"dialogHeader":"Gallery Navigation"},"Frame":{"usedTimes":"Used {count} times","notUsed":"Not used"},"FrameContextMenu":{"edit":"Edit","delete":"Delete"},"FrameSelect":{"frameLabel":"Frame","noFrameOption":"As imported / No frame","separateColorSettings":"Use separate color settings for frame"},"Frames":{"editFramegroup":"Edit Framegroup","renameFramegroup":"Rename Framegroup","exportFrames":"Export frames","exportCurrentFramegroup":"Export current framegroup ({id})","convertFramesFormat":"Convert frames to new format"},"GalleryGroup":{"itemCount":"{count} images"},"GalleryGroupContextMenu":{"edit":"Edit","delete":"Delete"},"GalleryNumbers":{"imageCount":"{count} images","filteredCount":"{count} filtered","selectedCount":"{count} selected","separator":" / "},"GalleryViewSelect":{"viewNames":{"smallest":"Smallest","originalSize":"Original Size","doubleSize":"Double Size","maximumSize":"Maximum Size"}},"GalleryImageContextMenu":{"edit":"Edit","download":"Download","delete":"Delete","viewInLightbox":"View in Lightbox","printViaSuperPrinter":"Print via Super Printer","usePlugin":"Use Plugin","share":"Share","addToFavourites":"Add to favourites","removeFromFavourites":"Remove from favourites","addToSelection":"Add to selection","removeFromSelection":"Remove from selection","showMetadata":"Show Metadata","createGroup":"Create Group"},"GreySelect":{"neutralLayerBlendmode":"Neutral Layer Blendmode","blendModes":{"normal":"Normal (ignore neutral layer)","normalS":"Normal ⇵ (only neutral layer)","lighten":"Lighten","screen":"Screen","dodge":"Dodge","addition":"Addition","darken":"Darken","multiply":"Multiply","burn":"Burn","overlay":"Overlay","softLight":"Soft light","hardLight":"Hard light","difference":"Difference","exclusion":"Exclusion"}},"ConnectPrinter":{"openPrinterPage":"Open printer page"},"EnvInfo":{"appVersion":"Web-App version: {value}","appBranch":"Web-App branch: {value}","printerVersion":"Printer version: {value}","maxImages":"Max Images: {value}","storageDriver":"Localforage driver: {value}","envType":"Environment type: {value}","filesystem":"Compiled Filesystem: {value}","bootmode":"Compiled Bootmode: {value}","hasOled":"Compiled for OLED: {value}","yes":"yes","no":"no"},"usePaletteSort":{"defaultAsc":"Default (ascending)","defaultDesc":"Default (descending)","usageAsc":"Usage (ascending)","usageDesc":"Usage (descending)","nameAsc":"Name (ascending)","nameDesc":"Name (descending)"},"useAsPasswordField":{"hidePassword":"Hide Password","showPassword":"Show Password"},"ImageMeta":{"dateTime":"Date / Time","editRotation":"Edit Rotation"},"Import":{"selectFiles":"Select file(s) to import","importMemory":"Import memory from Cartridge Reader","importAlbumRolls":"Import Album Rolls from Photo!(ROM + Flash)","serialMonitorLabel":"Enter data received through your serial monitor","import":"Import","exportImages":"Export images","exportSelectedImages":"Export selected images"},"ImportPreviewImage":{"scaleFactorWarning":"The scale factor of your image is {scaleFactor}. To get a clean result without artifacts, try to import only images with it\'s dimensions being scaled by powers of two. (1, 2, 4, 8 ...)"},"Lightbox":{"cancel":"Cancel","close":"Close","ok":"Ok","closeWithHeader":"Close {header}"},"LightboxImage":{"leaveFullscreen":"Leave fullscreen","enterFullscreen":"Enter fullscreen","imageCounter":"Image {current}/{total}"},"MetaTable":{"hashChannel":"{channel}-channel hash"},"Navigation":{"home":"Home","gallery":"Gallery","import":"Import","palettes":"Palettes","frames":"Frames","settings":"Settings","addPlugin":"Add Plugin","trash":"Trash","syncRemote":"Synchronize with remote service(s)","switchToDark":"Switch to dark mode","switchToBright":"Switch to bright mode","usbDisabled":"USB devices are not available","usbDevices":"WebUSB and Web Serial devices","openMainNav":"Open Main Navigation","closeMainNav":"Close Main Navigation","mainNavAriaLabel":"Main Navigation","utilityNavAriaLabel":"Utility Navigation"},"BitmapQueue":{"dialogHeader":"Bitmap Queue","enableDither":"Enable Dither","contrastPreset":"Contrast preset","contrastSettings":{"wider":"Wider","wide":"Wide","normal":"Normal","narrow":"Narrow","narrower":"Narrower","emulator":"From Emulator"}},"DragOver":{"dropFilesHere":"Drop your files here","supportedFileTypes":"Printer hex-dumps, .sav savestates, JSON exports or even plain bitmaps."},"EditForm":{"dialogHeader":"Editing {count, plural, =0 {} =1 {one image} other {# images}}","editingMultiple":"You are editing {count} images","indexHelperText":"Use %n (or %nn, %nnn, ...) to add an index to the image titles","editTitle":"Edit title"},"EditFrame":{"dialogHeader":"Editing frame “{id}” {idChange}","idChange":"→ “{newId}”"},"EditFrameForm":{"selectFrameGroup":"Select frame group","newFrameGroup":"New frame group","unknown":"Unknown","frameGroup":"Frame group","frameGroupId":"Frame group id","newFrameGroupId":"New frame group id","groupIdHelperText":"Must have at least two characters, only lowercase","newFrameGroupName":"New frame group name","frameIndex":"Frame Index","frameIndexHelperText":"Integer, must be greater than 0","frameName":"Frame name","idInUse":"Specified frame index/identifier “{id}” is already in use, please try another one."},"EditImageGroup":{"dialogHeader":"Editing group {title}","createNewGroupDialogHeader":"Create new group {count, plural, =0 {} =1 {} other {with # images}}","moveSelectedImages":"Move {count, plural, =0 {} =1 {image} other {# images}}","title":"Title","pathSegment":"Pathsegment (identifier)","path":"Path: “{path}”","pathInUse":"Path is already in use: “{path}”","parentGroup":"Parent group"},"EditPalette":{"dialogHeader":"Editing palette {name}","editTitle":"Edit Title","addTitle":"Add a title","idShortName":"ID/Short name","colorIndex":"Color {index}"},"EditRGBN":{"dialogHeader":"Create RGBN images","groupingLabel":"Grouping of your selection","groupByColor":"Selection is grouped by colors (RRR GGG BBB)","groupByImage":"Selection is grouped by image (RGB RGB RGB)","manualChannelSelection":"Manual channel selection for a single image","manualChannelInstructions":"Manually select the channels to create a single RGBN image","channelOrderInstructions":"Select the order of channels to be applied (in the order of images taken). Channels to the right of the separator will not be used.","channelDistributionError":"Your distribution of channels and number of selected images does not add up! Make sure to select the correct images.","imagePreview":"Image preview","createGroupLabel":"Create group from created images at current location"},"useEditRGBNImages":{"rgbNewGroupTitle":"RGB {date}"},"FilterForm":{"dialogHeader":"Select Filters","clearFiltersTitle":"Clear Filters","clear":"Clear","clearFiltersAndApplyTitle":"Clear Filters and apply","clearAndApply":"Clear and apply","clearTab":"Reset selected {tab, select, tabTags {Tags} tabPalettes {Palettes} tabFrames {Frames} other {}}","allMustBeMet":"If set, all must be met","oneMustBeMet":"If set, one must be met","untagged":"Untagged","favourite":"❤️ Favourite","new":"New","monochrome":"Monochrome","rgb":"RGB","recentImports":"Recent Imports","imageHasComments":"Image has comments","imageHasUsername":"Image has username","filterTabs":{"tabTags":"Tags {count, plural, =0 {} other {(#)}}","tabPalettes":"Palettes {count, plural, =0 {} other {(#)}}","tabFrames":"Frames {count, plural, =0 {} other {(#)}}"}},"FilterFormTag":{"removeTag":"Remove “{title}”-tag from selection","selectTag":"Select “{title}”-tag"},"FilterFormPalette":{"removePalette":"Remove palette „{name}“ from selection","selectPalette":"Select palette „{name}“"},"FilterFormFrame":{"usage":"Used {usage} times","removeFrame":"Remove frame „{name}“ from selection","selectFrame":"Select frame „{name}“"},"FrameQueue":{"dialogHeader":"Import new Frame as “{id}”"},"ImportQueue":{"dialogHeader":"{count, plural, =1 {Import one image} other {Import # images}}","removeLastSeenTitle":"Remove last seen","removeLastSeen":"Remove last seen {count, plural, =0 {} other {({count})}}","removeDeletedTitle":"Remove deleted","removeDeleted":"Remove deleted {count, plural, =0 {} other {({count})}}","removeDuplicatesInQueueTitle":"Remove duplicates in queue","removeDuplicatesInQueue":"Remove duplicates in queue {count, plural, =0 {} other {({count})}}","removeAlreadyImportedTitle":"Remove already imported","removeAlreadyImported":"Remove already imported {count, plural, =0 {} other {({count})}}","modifyFrame":"Modify Frame","noFrameOption":"No frame / import as is","createGroupLabel":"Create group from images at current location"},"ImportRow":{"duplicateInQueue":"This image exists multiple times within this queue","alreadyImported":"This image has already been imported {title, select, NO_TITLE {} other {as “{title}”}}","importAsFrame":"Import image as frame","removeFromQueue":"Remove image from queue"},"PickColors":{"newPaletteNameFromFile":"From file {fileName}","dialogHeader":"Pick colors from “{fileName}”"},"ProgressBox":{"dialogHeader":"Working..."},"ProgressLogBox":{"dialogHeaderDone":"✔️ Update done {repo, select, NO_REPO {} other {- {repo}}}","dialogHeaderUpdating":"⏳ Updating... {repo, select, NO_REPO {} other {- {repo}}}","showAllMessages":"Show all {count} messages","reduceMessages":"Reduce messages","startedAt":"Started at: {time}","finishedAfter":"Finished after: {duration}","runningFor":"Running for: {duration}","openGitHubRepository":"Open GitHub Repository","openDropboxFolder":"Open Dropbox folder","openDropboxFolderTitle":"Open Dropbox folder:\\n{path}"},"Serials":{"dialogHeader":"WebUSB / Serial devices"},"SortForm":{"dialogHeader":"Sort by: {sortBy}/{order}","sortByLabel":"Sort by","sortDirectionLabel":"Sort direction","titleOption":"Title","dateOption":"Date","paletteOption":"Palette","ascending":"Ascending","descending":"Descending"},"SyncSelect":{"dialogHeader":"Synchronize","syncToGitHub":"Synchronize to GitHub","syncToGitHubTitle":"Synchronize to GitHub\\n{repoUrl}","syncFromGitHub":"Synchronize from GitHub","syncFromGitHubTitle":"Synchronize from GitHub\\n{repoUrl}","syncToDropbox":"Synchronize to Dropbox","syncFromDropbox":"Synchronize from Dropbox","syncImagesToDropbox":"Synchronize images to Dropbox","pendingRemoteChangesWarning":"There are pending remote changes. If you synchronize to dropbox now, these will be lost.","pendingLocalChangesWarning":"There are local changes not synched to dropbox yet. If you synchronize from dropbox now, these will be lost."},"Trashbin":{"dialogHeader":"Trash ({count} items)","downloadFrames":"Download frames {count, plural, =0 {} other {(#)}}","downloadImages":"Download images {count, plural, =0 {} other {(#)}}","purgeAll":"Purge all {count, plural, =0 {} other {(#)}}","deletedFrames":"Deleted frames: {count}","deletedImages":"Deleted images: {count}"},"VideoParamsForm":{"dialogHeader":"Create an animated GIF with {count} frames","frameRate":"Framerate","scaleGif":"Scale GIF","enableYoyo":"Enable Yoyo-Effect (loop back to the beginning)","reverseDirection":"Reverse animation direction","handleFrames":"How to handle frames for animation","noFrameOption":"As selected per image","frameModes":{"keepFrame":"Keep frame","cropFrame":"Crop frame","squareBlack":"Make image squared (add black)","squareWhite":"Make image squared (add white)"}},"Pagination":{"pageCount":"{current}/{total}"},"PaginationButton":{"toPage":"To page {page}"},"Palette":{"usageCount":"({shortName}) {count, plural, =0 {Not used} =1 {Used one time} other {used # times}}"},"PaletteContextMenu":{"setActive":"Set Active","clone":"Clone","edit":"Edit","delete":"Delete"},"Palettes":{"ownPalettes":"Own palettes","predefinedPalettes":"Predefined palettes","allPalettes":"All palettes","newPalette":"New palette","newPaletteFromImage":"New palette from image","sortPalettes":"Sort Palettes","exportPalettes":"Export palettes"},"PaletteSelect":{"asSelectedPerImage":"As selected per image","palette":"Palette","invertPalette":"Invert Palette"},"PluginSelect":{"pluginTooltip":"{description}\\n{url}"},"PrinterReport":{"functions":{"printTestImage":"Print test image","checkPrinter":"Check Printer","fetchImagesGeneric":"Fetch images","fetchImagesCount":"Fetch {count} images","clearPrinter":"Clear Printer","tear":"Tear"},"printerFilesystem":"Printer Filesystem","total":"Total","used":"Used","free":"Free","freeImages":"{count} images","images":"Images"},"Remote":{"iframe":"<p>This is a remote window which is included in an iframe on your main page. <em>You should not see this message.</em></p>","popup":"<p>This is your Wi-Fi printer’s remote control page.</p><p>{host}</p><p>You can go back to your main app and start importing your images.</p><p><em>In order for the import to work, this window needs to remain open!</em></p>","noReference":"<p>This window is missing the reference to your main app.</p><p><em>It must be opened from the settings page of your main app in order to work!</em></p>"},"StorageWarning":{"storageTypes":{"indexedDB":"database storage","localStorage":"local storage"},"usageTooltip":"Using {used} of {total}","usageWarning":"You are using {percentage}% of your browser’s {type}. Be aware that saving images will not be possible once you hit the limit."},"TagsList":{"favourite":"Favourite","moreTags":"+{count} more tags:\\n{tags}","moreTagsLabel":"+{count} more"},"TagsSelect":{"resetTags":"Reset tags"},"InputNewTag":{"tagsLabel":"Tags"},"useBatchButtons":{"deleteConfirmation":"Delete {count} images?"},"useEditForm":{"updateDate":"Update date","updateTitle":"Update title","updatePalette":"Update image palette colors","updateInvertPalette":"Update invert image palette setting","updateFrame":"Update frame","updateLockFrame":"Update separate frame settings","updateFramePalette":"Update frame palette colors","updateInvertFramePalette":"Update invert frame palette setting","updateTags":"Update tags","updateRotation":"Update rotation"},"useEditPalette":{"paletteOrigin":"Made with the webapp"},"useFrame":{"deleteConfirmation":"Delete frame “{name}” ({frameId})?"},"useGalleryImageContext":{"deleteImage":"Delete {title, select, NO_TITLE {this image} other {image “{title}”}}?","metaInfo":"Metadata {title, select, NO_TITLE {} other {for “{title}”}}"},"useGetPortSettings":{"specifyBaudrate":"Specify Baudrate for Port","baudRateLabel":"Baud Rate"},"useImageGroups":{"newGroupDefault":"New Group","resetGroupsMessage":"Reset image groups?","resetGroupsInfo":"This will remove ALL your created groups and all existing images will be moved to the top level.","deleteGroupMessage":"Delete image group?","deleteGroupInfo":"This will delete this group “{groupTitle}” and move all children (images & groups) to the current level."},"usePalette":{"deletePaletteMessage":"Delete palette “{name}”?"},"useRunImport":{"importGroupTitle":"Import {date}"},"useSetEditPalette":{"copyOfPalette":"Copy of {name}"},"useTrashbin":{"backupExportImage":"Backup export {hash}","backupExportFrame":"Backup export {hash}","reImportedTrashFrames":"Re-imported trash frames"}}')},29619:(e,t,r)=>{"use strict";r.d(t,{default:()=>w});var n=r(97004),a=r(78538),o=r(39249),i=r(95155);function s(e){if(null===e||"object"!=typeof e)return!1;let t=Object.getPrototypeOf(e);return(null===t||t===Object.prototype||null===Object.getPrototypeOf(t))&&!(Symbol.iterator in e)&&(!(Symbol.toStringTag in e)||"[object Module]"===Object.prototype.toString.call(e))}function l(e){return(...t)=>t.reduce((t,r)=>(function e(t,r,n=".",a){if(!s(r))return e(t,{},n,a);let o=Object.assign({},r);for(let r in t){if("__proto__"===r||"constructor"===r)continue;let i=t[r];null!=i&&(a&&a(o,r,i,n)||(Array.isArray(i)&&Array.isArray(o[r])?o[r]=[...i,...o[r]]:s(i)&&s(o[r])?o[r]=e(i,o[r],(n?`${n}.`:"")+r.toString(),a):o[r]=i))}return o})(t,r,"",e),{})}let u=l();l((e,t,r)=>{if(void 0!==e[t]&&"function"==typeof r)return e[t]=r(e[t]),!0}),l((e,t,r)=>{if(Array.isArray(e[t])&&"function"==typeof r)return e[t]=r(e[t]),!0});var c=r(693),d=r(37414),m=r(72797);function p(e){var t=e.locale,r=(0,d._)(e,["locale"]);if(!t)throw Error(void 0);return(0,i.jsx)(m.Dk,(0,c._)({locale:t},r))}var g=r(12115),f={dateTime:{full:{day:"2-digit",month:"2-digit",year:"numeric",hour:"2-digit",minute:"2-digit",second:"2-digit",hourCycle:"h24"},short:{day:"2-digit",month:"2-digit",year:"numeric",hour:"2-digit",minute:"2-digit",hourCycle:"h24"}}},h=r(44965),v=r(27581),b=r(52166);let w=function(e){var t=e.children,s=(0,a._)((0,g.useState)("en"),2),l=s[0],c=s[1],d=(0,a._)((0,g.useState)(v),2),m=d[0],w=d[1],y=(0,a._)((0,g.useState)("UTC"),2),S=y[0],P=y[1],I=(0,b.A)(),F=I.preferredLocale,T=I.setPreferredLocale;return(0,g.useEffect)(function(){h.IB.includes(F)||T(h.q)},[F,T]),(0,g.useEffect)(function(){var e;(e=(0,n._)(function(){var e;return(0,o.YH)(this,function(t){switch(t.label){case 0:return e=F.split("-")[0],h.Gw.includes(e)||(e="en"),[4,r(3800)("./".concat(e,".json"))];case 1:return w(u(t.sent().default,v)),c(F),P(Intl.DateTimeFormat().resolvedOptions().timeZone),[2]}})}),function(){return e.apply(this,arguments)})()},[F]),(0,i.jsx)(p,{locale:l,messages:m,timeZone:S,formats:f,children:t})}},30891:(e,t,r)=>{"use strict";r.d(t,{G:()=>i,b:()=>s});var n=r(97004),a=r(39249),o=r(12115),i=(0,o.createContext)({callRemoteFunction:(0,n._)(function(){return(0,a.YH)(this,function(e){return[2]})})}),s=function(){return(0,o.useContext)(i)}},32521:(e,t,r)=>{"use strict";r.d(t,{U:()=>a,Z:()=>o});var n=r(12115),a=(0,n.createContext)({connectedDevices:[],isReceiving:!1,webSerialEnabled:!1,openWebSerial:function(){throw Error("PortsContext is missing")},webUSBEnabled:!1,openWebUSB:function(){throw Error("PortsContext is missing")},unknownDeviceResponse:null,hasInactiveDevices:!1}),o=function(){return(0,n.useContext)(a)}},35695:(e,t,r)=>{"use strict";var n=r(18999);r.o(n,"RedirectType")&&r.d(t,{RedirectType:function(){return n.RedirectType}}),r.o(n,"redirect")&&r.d(t,{redirect:function(){return n.redirect}}),r.o(n,"usePathname")&&r.d(t,{usePathname:function(){return n.usePathname}}),r.o(n,"useRouter")&&r.d(t,{useRouter:function(){return n.useRouter}}),r.o(n,"useServerInsertedHTML")&&r.d(t,{useServerInsertedHTML:function(){return n.useServerInsertedHTML}})},40774:(e,t,r)=>{"use strict";r.d(t,{B:()=>n,Q:()=>a});var n=function(e){return e.CONFIRM_ASK="CONFIRM_ASK",e.CONFIRM_ANSWERED="CONFIRM_ANSWERED",e.ADD_IMAGES="ADD_IMAGES",e.IMPORT_FILES="IMPORT_FILES",e}({}),a=function(e){return e.NUMBER="number",e.STRING="string",e.MULTILINE="multiline",e}({})},41476:(e,t,r)=>{"use strict";r.d(t,{A:()=>l});var n=r(86447),a=r(693),o=r(60376),i=r(87025),s=r(51368);let l=(0,r(65453).v)(function(e,t){return{progress:[],progressLog:{git:[],dropbox:[]},resetProgressLog:function(){return e({progressLog:{git:[],dropbox:[]}})},startProgress:function(t){var r={id:(0,s.A)(),label:t,value:0};return e(function(e){var t=e.progress;return{progress:(0,i._)(t).concat([r])}}),r.id},setProgress:function(t,r){e(function(e){return{progress:e.progress.map(function(e){return e.id!==t?e:(0,o._)((0,a._)({},e),{value:r})})}})},stopProgress:function(t){e(function(e){return{progress:e.progress.filter(function(e){return e.id!==t})}})},setProgressLog:function(r,s){var l=t().progressLog;e({progressLog:(0,o._)((0,a._)({},l),(0,n._)({},r,[s].concat((0,i._)(l[r]))))})}}})},45686:(e,t,r)=>{"use strict";r.d(t,{n:()=>n});var n=function(e){return e.TESTFILE="testFile",e.CHECKPRINTER="checkPrinter",e.FETCHIMAGES="fetchImages",e.CLEARPRINTER="clearPrinter",e.TEAR="tear",e}({})},47457:(e,t,r)=>{"use strict";r.d(t,{A:()=>F});var n=r(97004),a=r(693),o=r(87025),i=r(39249),s=r(91540),l=r(17652),u=r(12115),c=r(46498),d=r(11760),m=r(75380),p=r(72623),g=function(e,t){return!!t.find(function(t){var r=t.hashes;return!!r&&Object.values(r).includes(e)})},f=function(e,t){return!!t.find(function(t){return t.hash===e})},h=function(){var e=(0,n._)(function(e){var t,r;return(0,i.YH)(this,function(n){var a,o;switch(n.label){case 0:return t=e.images,r=e.frames,[4,(0,m.ZU)()];case 1:return n.sent(),[4,m.mU.keys()];case 2:return n.sent().forEach((a=t,function(e){g(e,a)||f(e,a)||(0,p.yH)(e)})),[4,m.Uv.keys()];case 3:return n.sent().forEach((o=r,function(e){o.find(function(t){return t.hash===e})||(0,p.t9)(e)})),[2]}})});return function(t){return e.apply(this,arguments)}}(),v=function(){var e=(0,n._)(function(e){return(0,i.YH)(this,function(t){switch(t.label){case 0:return[4,(0,m.ZU)()];case 1:return t.sent(),[4,m.mU.keys()];case 2:return[2,t.sent().filter(function(e){return!e.startsWith("dummy")}).filter(function(t){return!g(t,e)&&!f(t,e)})]}})});return function(t){return e.apply(this,arguments)}}(),b=function(){var e=(0,n._)(function(e){return(0,i.YH)(this,function(t){switch(t.label){case 0:return[4,(0,m.ZU)()];case 1:return t.sent(),[4,m.Uv.keys()];case 2:return[2,t.sent().filter(function(e){return!e.startsWith("dummy")}).filter(function(t){return!e.find(function(e){return e.hash===t})})]}})});return function(t){return e.apply(this,arguments)}}(),w=r(55364),y=r(50263),S=r(99451),P=r(46594),I=function(){var e=(0,n._)(function(e,t){return(0,i.YH)(this,function(r){switch(r.label){case 0:return[4,(0,m.ZU)()];case 1:var a;return r.sent(),[4,Promise.all(e.map((a=(0,n._)(function(e){var r;return(0,i.YH)(this,function(n){switch(n.label){case 0:return n.trys.push([0,3,,4]),[4,t.getItem(e)];case 1:if(!(r=n.sent()))return[2,null];return[4,(0,y.U)(r)];case 2:return[2,{hash:e,lines:n.sent().split("\n"),binary:r}];case 3:return n.sent(),[2,null];case 4:return[2]}})}),function(e){return a.apply(this,arguments)})))];case 2:return[2,r.sent().reduce(S.N,[])]}})});return function(t,r){return e.apply(this,arguments)}}();let F=function(){var e=(0,c.A)(),t=e.trashCount,r=e.showTrashCount,p=(0,d.h)(),g=p.frames,f=p.images,y=(0,c.A)().updateTrashCount,F=(0,l.c3)("useTrashbin"),T=(0,u.useCallback)((0,n._)(function(){var e,t,r;return(0,i.YH)(this,function(n){switch(n.label){case 0:return[4,v(f)];case 1:return[4,I(n.sent(),m.mU)];case 2:return e=n.sent(),t={},r={state:{images:e.map(function(e){try{return t[e.hash]=e.binary,{hash:e.hash,created:(0,P.J)(),title:F("backupExportImage",{hash:e.hash}),lines:e.lines.length,tags:["backup"],palette:"bw",framePalette:"bw",invertPalette:!1,invertFramePalette:!1,frame:""}}catch(e){return null}}).reduce(w.iy,[]),lastUpdateUTC:Math.floor(new Date().getTime()/1e3),version:d.A}},(0,s.saveAs)(new Blob((0,o._)(JSON.stringify((0,a._)({},r,t),null,2))),"backup_images.json"),[2]}})}),[f,F]),E=(0,u.useCallback)((0,n._)(function(){var e,t,r;return(0,i.YH)(this,function(n){switch(n.label){case 0:return[4,b(g)];case 1:return[4,I(n.sent(),m.Uv)];case 2:return e=n.sent(),t={},r={state:{frames:e.map(function(e,r){try{return t["frame-".concat(e.hash)]=e.binary,{hash:e.hash,name:F("backupExportFrame",{hash:e.hash}),id:"bak".concat(r.toString(10).padStart(2,"0"))}}catch(e){return null}}).reduce(S.N,[]),frameGroups:[{id:"bak",name:F("reImportedTrashFrames")}],lastUpdateUTC:Math.floor(new Date().getTime()/1e3),version:d.A}},(0,s.saveAs)(new Blob((0,o._)(JSON.stringify((0,a._)({},r,t),null,2))),"backup_frames.json"),[2]}})}),[F,g]),C=(0,u.useCallback)((0,n._)(function(){var e,t;return(0,i.YH)(this,function(r){switch(r.label){case 0:return[4,b(g)];case 1:return e=r.sent().length,[4,v(f)];case 2:return t=r.sent().length,y(e,t),[2]}})}),[g,f,y]),D=(0,u.useCallback)((0,n._)(function(){return(0,i.YH)(this,function(e){switch(e.label){case 0:return[4,h({images:f,frames:g})];case 1:return e.sent(),r(!1),window.requestAnimationFrame(function(){C()}),[2]}})}),[C,g,f,r]);return{showTrashCount:r,purgeTrash:D,downloadImages:T,downloadFrames:E,checkUpdateTrashCount:C,trashCount:t}}},52588:(e,t,r)=>{"use strict";r.d(t,{PluginsContext:()=>x});var n=r(97004),a=r(39249),o=r(95155),i=r(12115),s=r(83936),l=r(633),u=r(46498),c=r(11760),d=r(41476),m=r(693),p=r(60376),g=r(15905),f=r(52166),h=r(53982),v=r(18335),b=r(77683),w=r(86964),y=r(55364),S=r(5847),P=function(e){return function(t){var r,o=c.h.getState(),i=o.frames,s=o.palettes,l=f.A.getState().handleExportFrame,u=e.find(function(e){return e.hash===t});if(!u)throw Error("image not found");var d=(0,v.s)(s,u),P=d.palette,I=d.framePalette;if(!P)throw Error("selectedPalette not found");var F=function(){return(0,S.T)(e,i)(u.hash)},T=(0,y.pl)(u),E=(r=(0,n._)(function(){var e,t,r,n,o,s,c,d,p,f,v,y,S,E,C,D,A,k,x,R,_,U,H,N,G,L,M=arguments;return(0,a.YH)(this,function(a){switch(a.label){case 0:return r=void 0===(t=(e=M.length>0&&void 0!==M[0]?M[0]:{}).scaleFactor)?1:t,o=void 0===(n=e.palette)?P:n,c=void 0===(s=e.framePalette)?I:s,d=e.lockFrame,p=e.invertPalette,f=e.invertFramePalette,y=void 0===(v=e.handleExportFrame)?l:v,[4,F()];case 1:if(S=a.sent(),!(C=i.find(function(e){return e.id===u.frame})))return[3,3];return[4,(0,h.mZ)(C.hash)];case 2:return A=a.sent(),[3,4];case 3:A=null,a.label=4;case 4:if(k=(D=A)?D.upper.length/20:2,!T)return[3,6];return[4,(0,g.y1)({tiles:S,palette:o,lockFrame:void 0!==d?d:u.lockFrame,imageStartLine:k,rotation:u.rotation,scaleFactor:r,handleExportFrame:y},"image/png")];case 5:return E=a.sent(),[3,8];case 6:return x=(null==o?void 0:o.palette)||g.CU,R=(null==c?void 0:c.palette)||g.CU,U=(_=(0,w.f)(u)).invertPalette,H=_.invertFramePalette,N=(0,b.C)({imagePalette:x,framePalette:R,invertPalette:void 0!==p?p:U,invertFramePalette:void 0!==f?f:H}),[4,(0,g.Yn)((0,m._)({tiles:S,imageStartLine:k,rotation:u.rotation,scaleFactor:r,handleExportFrame:y},N),"image/png")];case 7:E=a.sent(),a.label=8;case 8:return[4,createImageBitmap(E)];case 9:return G=a.sent(),(L=document.createElement("canvas")).width=G.width,L.height=G.height,L.getContext("2d").drawImage(G,0,0),[2,L]}})}),function(){return r.apply(this,arguments)});return{getMeta:(0,n._)(function(){return(0,a.YH)(this,function(e){return[2,(0,p._)((0,m._)({},u),{isRGBN:T})]})}),getPalette:(0,n._)(function(){return(0,a.YH)(this,function(e){return[2,P]})}),getTiles:F,getCanvas:E}}},I=r(91540),F=r(39630),T=r(40774),E=r(55988),C=function(e,t){var r=e.addImages,o=e.setDialog,i=e.dismissDialog;return{importFiles:(0,E.A)(t),setDialog:o,alert:function(e,t){return o({message:"Plugin: ".concat(e),questions:function(){return[{label:t,key:"info",type:F.V.INFO}]},confirm:(0,n._)(function(){return(0,a.YH)(this,function(e){return[2,i(0)]})})})},dismissDialog:function(){return i(0)},addImages:r}},D=function(e,t){var r=C(e,t),n=r.setDialog,a=r.dismissDialog,o=r.importFiles,i=r.addImages,s=r.alert;return{dispatch:function(e){switch(console.warn('You are using a legacy method: "dispatch('.concat(e.type,')". Please refer to "env.functions" from your plugin to switch to up-to-date methods')),e.type){case T.B.CONFIRM_ASK:n(e.payload);break;case T.B.CONFIRM_ANSWERED:a();break;case T.B.IMPORT_FILES:o(e.payload.files);break;case T.B.ADD_IMAGES:i(e.payload);break;default:s("Plugin error:",'Unhandled Compatibility Action (type:"'.concat(e.type,'")'))}}}},A=function(e,t){var r=e.startProgress,n=e.setProgress,a=e.stopProgress,o=e.setError,i=e.addUpdatePluginProperties,s=e.collectImageData,l=e.stores,u=e.importFn,c=t.url,d=t.config,m=void 0===d?{}:d,p="",g=function(e){var o=Math.min(1,Math.max(0,e));if(p&&(0===o||1===o)){a(p),p="";return}p||(p=r(t.name||"Plugin")),n(p,o)};return new Promise(function(e){window.gbpwRegisterPlugin=function(t){if(window.gbpwRegisterPlugin=function(){},!t)return void e(null);try{var r=new t({saveAs:I.saveAs,progress:g,setError:o,store:D(l,u),functions:C(l,u),collectImageData:s},m),n=r.name,a=r.description,d=r.configParams,p=r.config;i({url:c,name:n,description:void 0===a?"":a,configParams:void 0===d?{}:d,config:void 0===p?{}:p,loading:!1,error:!1}),e(r)}catch(t){i({url:c,loading:!1,error:null==t?void 0:t.message}),e(null)}};var t=document.createElement("script");document.head.appendChild(t),t.addEventListener("error",function(){window.gbpwRegisterPlugin=function(){},i({url:c,loading:!1,error:"Loading error"}),e(null)}),t.src=c})},k=r(6617);function x(e){var t,r=e.children,m=(0,c.h)(),p=m.plugins,g=m.images,f=m.addUpdatePluginProperties,h=(0,l.g)(),v=(0,d.A)(),b=v.startProgress,w=v.setProgress,y=v.stopProgress,S=(0,u.A)().setError,I=(0,s.W)().jsonImport,F=(0,i.useMemo)(function(){return{collectImageData:P(g),addUpdatePluginProperties:f,startProgress:b,setProgress:w,stopProgress:y,setError:S,stores:h,importFn:I}},[g,f,b,w,y,S,h,I]),T=(0,i.useMemo)(function(){var e;return e=(0,n._)(function(e){return(0,a.YH)(this,function(t){return[2,A(F,p.find(function(t){return t.url===e})||{url:""})]})}),function(t){return e.apply(this,arguments)}},[F,p]),E=(0,i.useCallback)((t=(0,n._)(function(e){return(0,a.YH)(this,function(t){switch(t.label){case 0:return[4,A(F,e)];case 1:return[2,!!t.sent()]}})}),function(e){return t.apply(this,arguments)}),[F]),C=(0,i.useMemo)(function(){var e,t;return{runWithImage:(e=(0,n._)(function(e,t){var r,n;return(0,a.YH)(this,function(a){switch(a.label){case 0:return n=P(g)(t),[4,T(e)];case 1:return null==(r=a.sent())||r.withImage(n),[2]}})}),function(t,r){return e.apply(this,arguments)}),runWithImages:(t=(0,n._)(function(e,t){var r,n;return(0,a.YH)(this,function(a){switch(a.label){case 0:return n=t.map(P(g)),[4,T(e)];case 1:return null==(r=a.sent())||r.withSelection(n),[2]}})}),function(e,r){return t.apply(this,arguments)}),validateAndAddPlugin:E}},[T,g,E]);return(0,o.jsx)(k.i.Provider,{value:C,children:r})}},53585:(e,t,r)=>{"use strict";r.d(t,{default:()=>y});var n,a=r(12115),o=r(97004),i=r(87025),s=r(39249),l=r(83936),u=r(46498),c=r(55988),d=!1;let m=function(){var e=(0,u.A)(),t=e.setDragover,r=e.setError,m=(0,l.W)().jsonImport,p=(0,a.useMemo)(function(){return(0,c.A)(m)},[m]),g=(0,a.useCallback)(function(){var e,a=function(e){e.preventDefault(),d||t(!0),window.clearTimeout(n),d=!0,n=window.setTimeout(function(){d=!1,t(!1)},250)},l=(e=(0,o._)(function(e){var t,n,a;return(0,s.YH)(this,function(o){switch(o.label){case 0:e.preventDefault(),(n=e.dataTransfer.items)?t=(0,i._)(n).reduce(function(e,t){if("file"===t.kind){var r=t.getAsFile();return r?(0,i._)(e).concat([r]):e}return e},[]):(a=e.dataTransfer.files,t=(0,i._)(a)),o.label=1;case 1:return o.trys.push([1,3,,4]),[4,p(t)];case 2:return o.sent(),[3,4];case 3:return r(o.sent()),[3,4];case 4:return[2]}})}),function(t){return e.apply(this,arguments)}),u=document.querySelector("body");if(!u)throw Error("dafuq?");return u.addEventListener("dragover",a),u.addEventListener("drop",l),function(){u.removeEventListener("dragover",a),u.removeEventListener("drop",l)}},[p,t,r]);(0,a.useEffect)(g,[g])};var p=r(78538),g=r(35695),f=r(95939),h=function(){var e=(0,f.Z)().getUrl,t=window.location.hash.length<2?"":window.location.hash;(0,a.useEffect)(function(){if(t){var r=t.slice(1).split("/").filter(Boolean),n=r[0],a="";switch(n){case"gallery":var o,i=(0,p._)(r.slice(-2),2),s=i[0],l=i[1];(o="page"===s?r.slice(1,-2).join("/"):r.slice(1).join("/")).length||(null==l?void 0:l.length)?(o.length&&(o="".concat(o,"/")),a=e({group:o,pageIndex:parseInt(l,10)-1})):a="/gallery/";break;case"add-plugin":a="add-plugin/?pluginUrl=".concat(r.slice(1).join("/"));break;case"settings":var u=r[1];a="settings/".concat(u,"/");break;case"home":break;default:(null==n?void 0:n.length)&&(a="".concat(r.join("/"),"/"))}window.location.hash="",window.setTimeout(function(){(0,g.redirect)(a)},10)}},[e,t])},v=r(633),b=r(47457),w=r(933);let y=function(e){var t=e.children;m(),h();var r=(0,v.g)(),n=(0,l.W)().remoteImport;(0,a.useEffect)(function(){return(0,(0,w.E)(r,n).subscribe)()},[n,r]);var o=(0,b.A)().checkUpdateTrashCount;return(0,a.useEffect)(function(){var e=window.setTimeout(function(){o()},1);return function(){return window.clearTimeout(e)}},[o]),t}},93959:(e,t,r)=>{"use strict";r.d(t,{PortsContext:()=>S});var n=r(97004),a=r(78538),o=r(87025),i=r(39249),s=r(95155),l=r(7062),u=r(12115),c=r(9718),d=r(17652),m=r(39630),p=r(41186),g=r(52166),f=[2400,4800,9600,19200,28800,38400,57600,76800,115200,230400,25e4,460800,576e3,921600,1e6],h=function(){var e=(0,d.c3)("useGetPortSettings"),t=(0,p.A)(),r=t.setDialog,a=t.dismissDialog,o=(0,g.A)().setLastBaudRate;return{querySettings:(0,u.useCallback)(function(){var t=g.A.getState().lastBaudRate;return new Promise(function(s){var l;r({confirm:(l=(0,n._)(function(e){var t;return(0,i.YH)(this,function(r){return a(0),s({baudRate:t=parseInt((null==e?void 0:e.baudRate)||"115200",10)}),o(t),[2]})}),function(e){return l.apply(this,arguments)}),deny:(0,n._)(function(){return(0,i.YH)(this,function(e){return a(0),s(null),[2]})}),message:e("specifyBaudrate"),questions:function(){return[{key:"baudRate",label:e("baudRateLabel"),type:m.V.SELECT,options:f.map(function(e){return{value:e.toString(10),name:e.toString(10),selected:e===t}})}]}})})},[a,r,o,e])}},v=r(64768);let b=function(){var e=(0,v.A)().handleFileImport;return(0,u.useCallback)(function(t){e([new File((0,o._)(t),"Text input.txt",{type:"text/plain"})])},[e])};var w=r(46498),y=r(32521);function S(e){var t=e.children,d=(0,a._)((0,u.useState)(null),2),m=d[0],p=d[1],g=(0,a._)((0,u.useState)(!1),2),f=g[0],v=g[1],S=(0,a._)((0,u.useState)(!1),2),P=S[0],I=S[1],F=(0,a._)((0,u.useState)([]),2),T=F[0],E=F[1],C=(0,a._)((0,u.useState)(!1),2),D=C[0],A=C[1],k=(0,a._)((0,u.useState)(null),2),x=k[0],R=k[1],_=(0,a._)((0,u.useState)(""),2),U=_[0],H=_[1],N=(0,u.useRef)(0),G=b(),L=h().querySettings,M=(0,w.A)().setError;(0,u.useEffect)(function(){var e=new Worker(r.tu(new URL(r.p+r.u(7332),r.b)),{type:void 0}),t=window.setTimeout(function(){var t=(0,l.LV)(e);t.registerClient((0,l.BX)({addDeviceApi:function(e){return(0,n._)(function(){var t,r,n,a,s,u;return(0,i.YH)(this,function(i){switch(i.label){case 0:return[4,e.id];case 1:return t=i.sent(),[4,e.portType];case 2:return r=i.sent(),[4,e.portDeviceType];case 3:switch(n=i.sent()){case c._Y.PACKET_CAPTURE:return[3,4];case c._Y.INACTIVE:return[3,6]}return[3,8];case 4:return[4,e.setup((0,l.BX)({receiving:function(){A(!0)},data:function(e){H(e)}}))];case 5:return i.sent(),[3,8];case 6:return[4,e.getBanner()];case 7:return(a=i.sent()).byteLength&&R(a),[3,8];case 8:return u={id:t,portType:r,portDeviceType:n},[4,e.description];case 9:return[4,(u.description=i.sent(),u.device=e,u)];case 10:return s=i.sent(),E(function(e){return(0,o._)(e).concat([s])}),[2]}})})()},setStatus:function(e,t){return(0,n._)(function(){return(0,i.YH)(this,function(r){return v(t),I(e),[2]})})()},removeDeviceApi:function(e){return(0,n._)(function(){return(0,i.YH)(this,function(t){return E(function(t){return t.filter(function(t){return e!==t.id})}),[2]})})()},settingsCallback:function(){return L()}})),p(function(){return t})},1);return function(){e.terminate(),window.clearTimeout(t),p(null)}},[L,M]);var B=(0,u.useMemo)(function(){return T.map(function(e){return e.portDeviceType}).includes(c._Y.INACTIVE)},[T]),O=(0,u.useCallback)((0,n._)(function(){return(0,i.YH)(this,function(e){switch(e.label){case 0:if(!(f&&m))return[3,4];e.label=1;case 1:return e.trys.push([1,3,,4]),[4,navigator.serial.requestPort()];case 2:if(e.sent().readable)return M(Error("device already opened")),[2];return m.openSerial(),[3,4];case 3:return e.sent(),[3,4];case 4:return[2]}})}),[m,M,f]),Y=(0,u.useCallback)((0,n._)(function(){return(0,i.YH)(this,function(e){switch(e.label){case 0:if(!(P&&m))return[3,4];e.label=1;case 1:return e.trys.push([1,3,,4]),[4,navigator.usb.requestDevice({filters:c.k4})];case 2:if(e.sent().opened)return M(Error("device already opened")),[2];return m.openUSB(),[3,4];case 3:return e.sent(),[3,4];case 4:return[2]}})}),[m,M,P]);(0,u.useEffect)(function(){if(U)return window.clearTimeout(N.current),N.current=window.setTimeout(function(){U.length&&(H(""),A(!1),G(U))},250),function(){window.clearTimeout(N.current)}},[U,G]);var W=(0,u.useMemo)(function(){return{connectedDevices:T,hasInactiveDevices:B,isReceiving:D,openWebSerial:O,openWebUSB:Y,unknownDeviceResponse:x,webSerialEnabled:f,webUSBEnabled:P}},[T,B,D,O,Y,x,f,P]);return(0,s.jsx)(y.U.Provider,{value:W,children:t})}},94116:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>m});var n=r(693),a=r(60376),o=r(78538),i=r(87025),s=r(12115),l=r(25041),u=r(64453),c=r(35695),d=r(95155);function m(e){var t=e.options,r=e.CacheProvider,m=void 0===r?u.C:r,p=e.children,g=(0,o._)(s.useState(function(){var e,r=(0,l.A)((0,a._)((0,n._)({},t),{key:null!=(e=null==t?void 0:t.key)?e:"mui"}));r.compat=!0;var s=r.insert,u=[];return r.insert=function(){for(var e=arguments.length,n=Array(e),a=0;a<e;a++)n[a]=arguments[a];(null==t?void 0:t.enableCssLayer)&&!n[1].styles.match(/^@layer\s+[^{]*$/)&&(n[1].styles="@layer mui {".concat(n[1].styles,"}"));var l=(0,o._)(n,2),c=l[0],d=l[1];return void 0===r.inserted[d.name]&&u.push({name:d.name,isGlobal:!c}),s.apply(void 0,(0,i._)(n))},{cache:r,flush:function(){var e=u;return u=[],e}}}),1)[0];return(0,c.useServerInsertedHTML)(function(){var e=g.flush();if(0===e.length)return null;var r="",n=g.cache.key,a=[];return e.forEach(function(e){var t=e.name,o=e.isGlobal,i=g.cache.inserted[t];"string"==typeof i&&(o?a.push({name:t,style:i}):(r+=i,n+=" ".concat(t)))}),(0,d.jsxs)(s.Fragment,{children:[a.map(function(e){var r=e.name,n=e.style;return(0,d.jsx)("style",{nonce:null==t?void 0:t.nonce,"data-emotion":"".concat(g.cache.key,"-global ").concat(r),dangerouslySetInnerHTML:{__html:n}},r)}),r&&(0,d.jsx)("style",{nonce:null==t?void 0:t.nonce,"data-emotion":n,dangerouslySetInnerHTML:{__html:r}})]})}),(0,d.jsx)(m,{value:g.cache,children:p})}}},e=>{var t=t=>e(e.s=t);e.O(0,[7652,4453,8250,7271,2491,7890,6672,8348,1760,2973,4768,9194,8441,1684,7358],()=>t(12107)),_N_E=e.O()}]);