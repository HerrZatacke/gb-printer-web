(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[7177],{933:(e,t,n)=>{"use strict";n.d(t,{E:()=>s});var r,i=n(97004),a=n(39249),o=n(24463),s=function(e,t){var s,u,c,l,d=(s=(0,i._)(function(){var i;return(0,a.YH)(this,function(a){switch(a.label){case 0:if(r)return[3,2];return[4,Promise.all([n.e(9268),n.e(7431),n.e(340),n.e(1575)]).then(n.bind(n,94979))];case 1:i=a.sent().dropBoxSyncTool,r=r||i(e,t),a.label=2;case 2:return[2,r]}})}),function(){return s.apply(this,arguments)});return o.A.getState().dropboxStorage.use&&d(),{recoverImageData:(u=(0,i._)(function(e){return(0,a.YH)(this,function(t){switch(t.label){case 0:return[4,d()];case 1:return[2,t.sent().recoverImageData(e)]}})}),function(e){return u.apply(this,arguments)}),startAuth:(0,i._)(function(){return(0,a.YH)(this,function(e){switch(e.label){case 0:return[4,d()];case 1:return[2,e.sent().startAuth()]}})}),startSyncData:(c=(0,i._)(function(e){return(0,a.YH)(this,function(t){switch(t.label){case 0:return[4,d()];case 1:return[2,t.sent().startSyncData(e)]}})}),function(e){return c.apply(this,arguments)}),startSyncImages:(0,i._)(function(){return(0,a.YH)(this,function(e){switch(e.label){case 0:return[4,d()];case 1:return[2,e.sent().startSyncImages()]}})}),updateSettings:(l=(0,i._)(function(e){return(0,a.YH)(this,function(t){switch(t.label){case 0:return[4,d()];case 1:return[2,t.sent().updateSettings(e)]}})}),function(e){return l.apply(this,arguments)}),subscribe:function(){var e;return o.A.subscribe(function(e){return e.dropboxStorage},(e=(0,i._)(function(e){return(0,a.YH)(this,function(t){switch(t.label){case 0:return[4,d()];case 1:return t.sent().updateSettings(e),[2]}})}),function(t){return e.apply(this,arguments)}))}}}},1441:(e,t,n)=>{"use strict";n.d(t,{default:()=>m});var r,i,a=n(97004),o=n(87025),s=n(39249),u=n(95155),c=n(12115),l=n(45686),d=n(64768),f=n(41186),p=n(46498),g=n(41476),h=n(52166),v=n(30891);let m=function(e){var t=e.children,m=p.A.getState(),b=m.setPrinterFunctions,w=m.setPrinterBusy,y=m.setPrinterData,S=g.A.getState(),E=S.startProgress,I=S.setProgress,_=S.stopProgress,P=f.A.getState(),T=P.dismissDialog,A=P.setDialog,C=(0,d.A)().handleFileImport,k=(0,c.useRef)(""),R=(0,c.useCallback)(function(e){var t=Math.min(1,Math.max(0,e));if(k&&(0===t||1===t)){_(k.current),k.current="";return}k.current||(k.current=E("Getting items from printer")),I(k.current,t)},[I,E,_]);(0,c.useEffect)(function(){var e=function(e){var t,n=h.A.getState().printerUrl;try{t=new URL(n).origin}catch(e){t=new URL(window.location.href).origin}if(e.origin===t){var u=e.data.fromRemotePrinter,c=void 0===u?{}:u,l=c.lines,d=c.progress,f=c.blob,g=c.blobsdone,v=c.commands,m=c.printerData,S=e.source;if(v&&(r&&JSON.stringify(v)===JSON.stringify(p.A.getState().printerFunctions)||(b(v),w(!1),y(null)),i=S,window.clearTimeout(r),r=window.setTimeout(function(){r=null,i=null,w(!0),y(null),b([])},1500)),l&&C([new File([l.join("\n")],"Text input.txt",{type:"text/plain"})]),void 0!==d&&R(d),f&&C([new File([f],"blob.unknown")]),g){if("string"==typeof g[0])return void window.setTimeout(function(){alert("You should update the web-app to a version > 1.16.0 on your printer for an optimized import experience :-)")},200);var E=g.reduce(function(e,t){if(!t.blob||!t.ok)return e;var n=g.length>1?(e.length+1).toString(10).padStart(2,"0"):"";return(0,o._)(e).concat([new File([t.blob],"Printer ".concat(n).trim(),{type:t.contentType})])},[]);E.length?C(E,{fromPrinter:!0}):A({message:"No valid files received from WiFi-Printer",confirm:(0,a._)(function(){return(0,s.YH)(this,function(e){return T(0),w(!1),y(null),[2]})})})}m&&(y(m),w(!1))}};return window.addEventListener("message",e),function(){return window.removeEventListener("message",e)}},[T,C,A,w,y,b,R]);var x=(0,c.useMemo)(function(){var e;return{callRemoteFunction:(e=(0,a._)(function(e){var t,r;return(0,s.YH)(this,function(a){switch(a.label){case 0:return t=p.A.getState().printerData,w(!0),e===l.n.FETCHIMAGES&&t&&(r={dumps:null==t?void 0:t.dumps}),[4,Promise.resolve().then(n.t.bind(n,52491,23))];case 1:return a.sent(),[4,Promise.resolve().then(n.t.bind(n,98933,23))];case 2:if(a.sent(),!i)throw Error("remote printer window object is missing");return i.postMessage({toRemotePrinter:{command:e,params:r}},"*"),[2]}})}),function(t){return e.apply(this,arguments)})}},[w]);return(0,u.jsx)(v.G.Provider,{value:x,children:t})}},1470:(e,t,n)=>{"use strict";n.d(t,{t:()=>r,z:()=>i});var r="ROOT",i=function(){return{id:r,slug:"",created:"",title:"Home",coverImage:"",images:[],groups:[],tags:[]}}},1607:(e,t,n)=>{"use strict";n.d(t,{D:()=>p,EnvProvider:()=>g});var r=n(97004),i=n(693),a=n(60376),o=n(78538),s=n(39249),u=n(95155),c=n(12115),l=n(52166),d=n(75380),f=(0,c.createContext)(null),p=function(){return(0,c.useContext)(f)},g=function(e){var t=e.children,n=(0,o._)((0,c.useState)(null),2),p=n[0],g=n[1],h=(0,l.A)().setPrinterUrl;return(0,c.useEffect)(function(){var e=["/gb-printer-web","/env.json"].filter(Boolean).join("/");e&&(0,r._)(function(){var t,n,r,o;return(0,s.YH)(this,function(s){switch(s.label){case 0:return s.trys.push([0,5,,6]),[4,(0,d.ZU)()];case 1:return s.sent(),[4,fetch(e)];case 2:return[4,s.sent().json()];case 3:return t=s.sent(),r=[(0,i._)({},t)],o={},[4,d.mU.driver()];case 4:return"esp8266"===(n=a._.apply(void 0,r.concat([(o.localforage=s.sent(),o)]))).env&&h("/"),g(n),[3,6];case 5:return s.sent(),g({version:"0.0.0",maximages:0,localforage:"error",env:"error",fstype:"-",bootmode:"-",oled:!1}),[3,6];case 6:return[2]}})})()},[h]),(0,u.jsx)(f.Provider,{value:p,children:t})}},3800:(e,t,n)=>{var r={"./de.json":[8945,8945],"./en.json":[27581]};function i(e){if(!n.o(r,e))return Promise.resolve().then(()=>{var t=Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t});var t=r[e],i=t[0];return Promise.all(t.slice(1).map(n.e)).then(()=>n.t(i,19))}i.keys=()=>Object.keys(r),i.id=3800,e.exports=i},5847:(e,t,n)=>{"use strict";n.d(t,{T:()=>s,p:()=>u});var r=n(97004),i=n(39249),a=n(55364),o=n(72623),s=function(e,t,n){var s,u=(s=(0,r._)(function(r,s,c,l){var d,f,p,g,h,v,m,b,w,y,S,E;return(0,i.YH)(this,function(i){switch(i.label){case 0:if(f=e.find(function(e){return r===e.hash}),p=("string"==typeof c?c:null==f?void 0:f.frame)||void 0,g=null==(d=t.find(function(e){return e.id===p}))?void 0:d.hash,l||!(!f||!(0,a.pl)(f)))return[3,2];return[4,(0,o.Hh)(r,g,s,n)];case 1:return[2,i.sent()||[]];case 2:if(!(h=l||f.hashes).r)return[3,4];return[4,u(h.r,s,p)];case 3:return m=i.sent(),[3,5];case 4:m=[],i.label=5;case 5:if(v=m,!h.g)return[3,7];return[4,u(h.g,s,p)];case 6:return w=i.sent(),[3,8];case 7:w=[],i.label=8;case 8:if(b=w,!h.b)return[3,10];return[4,u(h.b,s,p)];case 9:return S=i.sent(),[3,11];case 10:S=[],i.label=11;case 11:if(y=S,!h.n)return[3,13];return[4,u(h.n,s,p)];case 12:return E=i.sent(),[3,14];case 13:E=[],i.label=14;case 14:return[2,{r:v,g:b,b:y,n:E}]}})}),function(e,t,n,r){return s.apply(this,arguments)});return u},u=function(e,t){var n,a=s(e,t);return n=(0,r._)(function(e){var t,n,r,o,s;return(0,i.YH)(this,function(i){switch(i.label){case 0:return[4,a(e,!0,"")];case 1:if(t=i.sent())return[2,(null==t?void 0:t.length)||(null==(n=t.r)?void 0:n.length)||(null==(r=t.g)?void 0:r.length)||(null==(o=t.b)?void 0:o.length)||(null==(s=t.n)?void 0:s.length)||0];return[2,0]}})}),function(e){return n.apply(this,arguments)}}},6456:(e,t,n)=>{"use strict";n.d(t,{PM:()=>u,YZ:()=>o,lt:()=>s});var r=n(693),i=n(60376),a=n(78538),o=function(e,t){return(0,i._)((0,r._)({},e),{sortIndex:t})},s=function(e){return(0,i._)((0,r._)({},e),{sortIndex:void 0})},u=function(e){return function(t,n){if(!e)return 0;var r=(0,a._)(e.split("_"),2),i=r[0],o=r[1],s=t[i],u=n[i],c="desc"===o?-1:1;return s&&u?s>u?c:s<u?-c:t.sortIndex<n.sortIndex?c:-c:0}}},6617:(e,t,n)=>{"use strict";n.d(t,{h:()=>s,i:()=>o});var r=n(97004),i=n(39249),a=n(12115),o=(0,a.createContext)({runWithImage:(0,r._)(function(){return(0,i.YH)(this,function(e){throw Error("Plugin Context is missing")})}),runWithImages:(0,r._)(function(){return(0,i.YH)(this,function(e){throw Error("Plugin Context is missing")})}),validateAndAddPlugin:(0,r._)(function(){return(0,i.YH)(this,function(e){throw Error("Plugin Context is missing")})})}),s=function(){return(0,a.useContext)(o)}},7119:(e,t,n)=>{"use strict";n.d(t,{NavigationToolsProvider:()=>g,g:()=>h});var r=n(95155),i=n(12115),a=n(78538),o=n(35695),s=n(95939),u=n(71620),c=n(52166),l=n(1470),d=n(66785),f=function(){var e=(0,o.useRouter)(),t=(0,s.Z)(),n=t.paths,r=t.root,f=t.isWorking,p=t.path,g=t.getUrl,h=(0,a._)((0,i.useState)(!1),2),v=h[0],m=h[1],b=(0,u.A)(),w=b.sortBy,y=b.filtersActiveTags,S=b.recentImports,E=(0,c.A)().pageSize,I=(0,i.useCallback)(function(e){return(0,d.S)(e,{filtersActiveTags:y,sortBy:w,recentImports:S})},[y,S,w]),_=(0,i.useCallback)(function(e,t){return Math.floor(I(t.images).findIndex(function(t){return t.hash===e})/E)},[I,E]),P=(0,i.useCallback)(function(e,t){var r;return e===l.t?g({pageIndex:t,group:""}):g({pageIndex:t,group:(null==(r=n.find(function(t){return e===t.group.id}))?void 0:r.absolutePath)||""})},[g,n]),T=(0,i.useMemo)(function(){var e;return(null==(e=n.find(function(e){return e.absolutePath===p}))?void 0:e.group)||r},[p,n,r]),A=(0,i.useCallback)(function(e){var t=n.find(function(t){return t.group.images.map(function(e){return e.hash}).includes(e)}),i=(null==t?void 0:t.absolutePath)||"";return g({pageIndex:_(e,(null==t?void 0:t.group)||r),group:i})},[_,g,n,r]),C=(0,i.useCallback)(function(e,t){f||window.setTimeout(function(){m({group:{id:e,pageIndex:t}})},1)},[f]),k=(0,i.useCallback)(function(e){window.setTimeout(function(){m({imageHash:e})},1)},[]);return(0,i.useEffect)(function(){if(!f&&v){var t=window.setTimeout(function(){v.imageHash?(e.push(A(v.imageHash)),m(!1)):v.group&&(e.push(P(v.group.id,v.group.pageIndex)),m(!1))},1);return function(){window.clearTimeout(t)}}},[P,A,f,e,v]),{currentGroup:T,getGroupPath:P,getImagePageIndexInGroup:_,navigateToGroup:C,navigateToImage:k}},p=(0,i.createContext)(null);function g(e){var t=e.children,n=f();return(0,r.jsx)(p.Provider,{value:n,children:t})}var h=function(){var e=(0,i.useContext)(p);if(!e)throw Error("useNavigationToolsContext must be used within an NavigationToolsProvider");return e}},9718:(e,t,n)=>{"use strict";n.d(t,{_Y:()=>o,k4:()=>u,qt:()=>a,vK:()=>s});var r,i=n(86447),a=function(e){return e.USB="USB",e.SERIAL="SERIAL",e}({}),o=function(e){return e.UNKNOWN="unknown",e.INACTIVE="inactive",e.PACKET_CAPTURE="packet_capture",e.SUPER_PRINTER_INTERFACE="super_printer_interface",e.GBXCART="gbxcart",e}({}),s=(r={},(0,i._)(r,"unknown","Unknown Device"),(0,i._)(r,"inactive","Inactive Device"),(0,i._)(r,"packet_capture","Arduino Gameboy Printer Emulator"),(0,i._)(r,"super_printer_interface","Super Printer Interface"),(0,i._)(r,"gbxcart","Cartridge Reader (LK Firmware)"),r),u=[{vendorId:9025,productId:32822},{vendorId:9025,productId:32823},{vendorId:9025,productId:32845},{vendorId:9025,productId:32846},{vendorId:9025,productId:32847},{vendorId:9025,productId:32848},{vendorId:9025,productId:32850},{vendorId:9025,productId:32851},{vendorId:9025,productId:32852},{vendorId:9025,productId:32853},{vendorId:9025,productId:32854},{vendorId:9025,productId:32855},{vendorId:9114}]},12107:(e,t,n)=>{Promise.resolve().then(n.bind(n,94116)),Promise.resolve().then(n.bind(n,53585)),Promise.resolve().then(n.bind(n,1607)),Promise.resolve().then(n.bind(n,32134)),Promise.resolve().then(n.bind(n,29619)),Promise.resolve().then(n.bind(n,7119)),Promise.resolve().then(n.bind(n,52588)),Promise.resolve().then(n.bind(n,93959)),Promise.resolve().then(n.bind(n,1441))},12360:(e,t,n)=>{"use strict";n.d(t,{A:()=>i});var r=n(19864);let i=function(e){return function(t){var n=e.filter(function(e){return![r.X3.FILTER_MONOCHROME,r.X3.FILTER_NEW,r.X3.FILTER_RGB,r.X3.FILTER_UNTAGGED,r.X3.FILTER_RECENT,r.X3.FILTER_FAVOURITE,r.X3.FILTER_COMMENTS,r.X3.FILTER_USERNAME].includes(e)});return!n.length||!!t.tags.find(function(e){return n.includes(e)})}}},27581:e=>{"use strict";e.exports=JSON.parse('{"SettingsGeneric":{"galleryPageSize":"Gallery page size","galleryPageSizeHelper":"Set to 0 to disable pagination - might cause performance issues on large sets of images","galleryClickAction":"Click behaviour for gallery images","galleryClickActionHelper":"Ctrl+Click and Shift+Click will always select/range-select","exportDimensions":"Image export dimensions","exportFiletypes":"Image export filetypes","exportHandleFrame":"How to handle frames when exporting images","filenameStyle":"Filename style","importSavFrames":"Frames to be applied when importing Cartridge dumps","importSavFramesNone":"None","importSavFramesUnknown":"Unknown","importLastSeen":"Import ‘last seen’ image when importing Cartridge dumps","importDeleted":"Import deleted images when importing Cartridge dumps","forceMagicCheck":"Force valid .sav file when importing","importPad":"Pad images up to 144px height on import","hideDates":"Hide dates in gallery","sortPalettes":"Sort Palettes","preferredLocale":"Preferred locale","exampleDateFormat":"Example date format: {format}","printerUrl":"Printer URL","printerUrlHelper":"If you own a physical wifi-printer, you can add it\\\\\'s URL here and check the <link>Import-tab</link>","printerParams":"Additional printer settings","enableDebug":"Show debug info","enableImageGroups":"Enable Image Groups {groupCount, plural, =0 {} =1 {(you have one group)} other {(you have # groups)}}","frameModes":{"keepFrame":"Keep frame","cropFrame":"Crop frame","squareBlack":"Make image squared (add black)","squareWhite":"Make image squared (add white)"},"filenameStyles":{"fullTitle":"Full Title","dateTitle":"Date and Title","titleOnly":"Title only"},"locales":{"de-DE":"German - Germany (de-DE)","en-US":"English - United States (en-US)","en-GB":"English - United Kingdom (en-GB)","en-CA":"English - Canada (en-CA)"}},"SettingsDropbox":{"enableStorage":"Use Dropbox as storage","subfolder":"Subfolder","openFolder":"<link>Open folder</link>","openFolderLinkTitle":"Open Dropbox folder:\\n{folderLink}","enableEnhancedSync":"Enable enhanced dropbox sync","enableEnhancedSyncHelper":"This is an experimental feature.","authenticate":"Authenticate","logout":"Logout"},"SettingsWiFi":{"hostSettings":"Host Settings","mdnsName":"mDNS Name (Bonjour/Avahi)","accesspointSSID":"Accesspoint SSID","accesspointPassword":"Accesspoint Password","networks":"Networks","networkSSID":"Network SSID","networkPassword":"Network Password","deleteNetwork":"Delete Network","willDeleteNetwork":"Network will be deleted","addNetwork":"Add Network","saveSettings":"Save WiFi-Settings"},"SettingsPlugins":{"addPlugin":"Add Plugin","addPluginHelper":"A selection of plugins can be found here","installedPlugins":"Installed Plugins","deletePlugin":"Delete Plugin \\"{name}\\""},"SettingsGit":{"enableStorage":"Use github as storage","owner":"Owner","repoName":"Repository name","branch":"Branch","throttle":"Throttle (in ms)","token":"Token","tokenHelper":"Go to GitHub to create a <link>new fine-grained personal access token</link>, select the repository you want to use for synching and allow read/write for <code>\\"Repository Permissions > Contents\\"</code>"},"WebUSBGreeting":{"enableWebUsb":"Enable WebUSB / Serial ports","webUSBEnabled":"Your current browser/device does support WebUSB","webUSBDisabled":"Your current browser/device does not support WebUSB","webSerialEnabled":"Your current browser/device does support Web Serial","webSerialDisabled":"Your current browser/device does not support Web Serial"},"ConnectSerial":{"openWebUSB":"Open WebUSB device","openWebSerial":"Open Web Serial device","connectedDevices":"{deviceCount, plural, =0 {No connected devices} =1 {One connected device:} other {# connected devices:}}","showUnknownResponse":"Show message from unrecognized device","unknownDeviceInfo":"Unknown device info","copyToClipboard":"Copy to clipboard"},"SettingsTabs":{"genericSettings":"Generic Settings","dropboxSettings":"Dropbox Settings","wifiSettings":"WiFi Settings","pluginSettings":"Plugin Settings","gitSettings":"Git Settings"},"ExportSettings":{"resetGroups":"Reset image groups","exportAll":"Export Everything","exportPlugins":"Export Plugins","hashCleanup":"Hash Cleanup","persistState":{"isPersistent":"Storage is persistent","requestPersistence":"Request storage persistence","apiUnavailable":"Persistance API not available","failed":"Failed to persist storage"}},"EnvInfo":{"appVersion":"Web-App version: {value}","appBranch":"Web-App branch: {value}","printerVersion":"Printer version: {value}","maxImages":"Max Images: {value}","storageDriver":"Localforage driver: {value}","envType":"Environment type: {value}","filesystem":"Compiled Filesystem: {value}","bootmode":"Compiled Bootmode: {value}","hasOled":"Compiled for OLED: {value}","yes":"yes","no":"no"},"usePaletteSort":{"defaultAsc":"Default (ascending)","defaultDesc":"Default (descending)","usageAsc":"Usage (ascending)","usageDesc":"Usage (descending)","nameAsc":"Name (ascending)","nameDesc":"Name (descending)"},"useAsPasswordField":{"hidePassword":"Hide Password","showPassword":"Show Password"}}')},29032:(e,t,n)=>{"use strict";n.d(t,{j:()=>o});var r=n(78538),i=n(35695),a=n(12115),o=function(){var e=(0,i.usePathname)(),t=(0,r._)((0,a.useState)(window.location.search),2),n=t[0],o=t[1],s=(0,a.useMemo)(function(){return new URLSearchParams(n)},[n]);(0,a.useEffect)(function(){var e=function(){window.setTimeout(function(){o(function(e){return window.location.search!==e?window.location.search:e})},1)};e(),window.addEventListener("popstate",e);var t=history.pushState,n=history.replaceState;return history.pushState=function(){for(var n=arguments.length,r=Array(n),i=0;i<n;i++)r[i]=arguments[i];t.apply(this,r),e()},history.replaceState=function(){for(var t=arguments.length,r=Array(t),i=0;i<t;i++)r[i]=arguments[i];n.apply(this,r),e()},function(){window.removeEventListener("popstate",e),history.pushState=t,history.replaceState=n}},[s,e]);var u=(0,a.useMemo)(function(){return s.toString()},[s]);return{fullPath:(0,a.useMemo)(function(){return u?"".concat(e,"?").concat(u):e},[e,u]),pathname:e,query:u,searchParams:s}}},29619:(e,t,n)=>{"use strict";n.d(t,{default:()=>w});var r=n(97004),i=n(78538),a=n(39249),o=n(95155);function s(e){if(null===e||"object"!=typeof e)return!1;let t=Object.getPrototypeOf(e);return(null===t||t===Object.prototype||null===Object.getPrototypeOf(t))&&!(Symbol.iterator in e)&&(!(Symbol.toStringTag in e)||"[object Module]"===Object.prototype.toString.call(e))}function u(e){return(...t)=>t.reduce((t,n)=>(function e(t,n,r=".",i){if(!s(n))return e(t,{},r,i);let a=Object.assign({},n);for(let n in t){if("__proto__"===n||"constructor"===n)continue;let o=t[n];null!=o&&(i&&i(a,n,o,r)||(Array.isArray(o)&&Array.isArray(a[n])?a[n]=[...o,...a[n]]:s(o)&&s(a[n])?a[n]=e(o,a[n],(r?`${r}.`:"")+n.toString(),i):a[n]=o))}return a})(t,n,"",e),{})}let c=u();u((e,t,n)=>{if(void 0!==e[t]&&"function"==typeof n)return e[t]=n(e[t]),!0}),u((e,t,n)=>{if(Array.isArray(e[t])&&"function"==typeof n)return e[t]=n(e[t]),!0});var l=n(693),d=n(37414),f=n(72797);function p(e){var t=e.locale,n=(0,d._)(e,["locale"]);if(!t)throw Error(void 0);return(0,o.jsx)(f.Dk,(0,l._)({locale:t},n))}var g=n(12115),h={dateTime:{full:{day:"2-digit",month:"2-digit",year:"numeric",hour:"2-digit",minute:"2-digit",second:"2-digit",hourCycle:"h24"},short:{day:"2-digit",month:"2-digit",year:"numeric",hour:"2-digit",minute:"2-digit",hourCycle:"h24"}}},v=n(44965),m=n(27581),b=n(52166);let w=function(e){var t=e.children,s=(0,i._)((0,g.useState)("en"),2),u=s[0],l=s[1],d=(0,i._)((0,g.useState)(m),2),f=d[0],w=d[1],y=(0,i._)((0,g.useState)("UTC"),2),S=y[0],E=y[1],I=(0,b.A)(),_=I.preferredLocale,P=I.setPreferredLocale;return(0,g.useEffect)(function(){v.I.includes(_)||P(v.I[0])},[_,P]),(0,g.useEffect)(function(){var e;(e=(0,r._)(function(){var e;return(0,a.YH)(this,function(t){switch(t.label){case 0:return["de","en"].includes(e=_.split("-")[0])||(e="en"),[4,n(3800)("./".concat(e,".json"))];case 1:return w(c(t.sent().default,m)),l(_),E(Intl.DateTimeFormat().resolvedOptions().timeZone),[2]}})}),function(){return e.apply(this,arguments)})()},[_]),(0,o.jsx)(p,{locale:u,messages:f,timeZone:S,formats:h,children:t})}},30891:(e,t,n)=>{"use strict";n.d(t,{G:()=>o,b:()=>s});var r=n(97004),i=n(39249),a=n(12115),o=(0,a.createContext)({callRemoteFunction:(0,r._)(function(){return(0,i.YH)(this,function(e){return[2]})})}),s=function(){return(0,a.useContext)(o)}},32134:(e,t,n)=>{"use strict";n.d(t,{GalleryTreeContext:()=>g,K:()=>p});var r=n(78538),i=n(95155),a=n(7062),o=n(12115),s=n(29032),u=n(46498),c=n(11760),l=n(52166),d=n(1470),f="/gallery/",p=(0,o.createContext)({root:(0,d.z)(),view:(0,d.z)(),images:[],covers:[],paths:[],pathsOptions:[],isWorking:!1,pageIndex:0,path:"",lastGalleryLink:"",getUrl:function(){return"".concat(f,"?page=1")}});function g(e){var t=e.children,g=(0,r._)((0,o.useState)(!0),2),h=g[0],v=g[1],m=(0,r._)((0,o.useState)((0,d.z)()),2),b=m[0],w=m[1],y=(0,r._)((0,o.useState)([]),2),S=y[0],E=y[1],I=(0,r._)((0,o.useState)([]),2),_=I[0],P=I[1],T=(0,s.j)(),A=T.searchParams,C=T.pathname,k=(0,r._)((0,o.useState)(""),2),R=k[0],x=k[1],F=(0,l.A)(),U=F.enableImageGroups,D=F.enableDebug,L=(0,u.A)().setError,N=(0,c.h)(),H=N.imageGroups,M=N.images,O=N.setImageGroups,Y=(0,o.useMemo)(function(){return U?H:[]},[U,H]);(0,o.useEffect)(function(){var e=new Worker(n.tu(new URL(n.p+n.u(5440),n.b)),{type:void 0}),t=(0,a.LV)(e),r=[],i=(0,a.BX)(function(e){r.push(e)});return v(!0),t.calculate({imageGroups:Y,stateImages:M},i).then(function(e){if(w(e.root),E(e.paths),P(e.pathsOptions),r.length&&L(Error(r.join("\n"))),U&&H.length>e.paths.length){var t=e.paths.map(function(e){return e.group.id});O(H.filter(function(e){var n=e.id;return t.includes(n)}))}D&&console.info("worker ran for ".concat(e.duration.toFixed(2),"ms"))}).catch(function(e){console.error(e),L(e)}).finally(function(){v(!1),e.terminate()}),function(){e.terminate(),v(!1)}},[D,U,Y,L,O,H,M]);var B=(0,o.useMemo)(function(){var e;return parseInt(null!=(e=A.get("page"))?e:"1",10)-1},[A]),G=(0,o.useMemo)(function(){return A.get("group")||""},[A]),W=(0,o.useCallback)(function(e){var t="number"==typeof e.pageIndex?e.pageIndex:B,n="string"==typeof e.group?e.group:G,r="".concat(f,"?page=").concat(t+1);return n.length&&(r="".concat(r,"&group=").concat(encodeURIComponent(n))),r},[B,G]);(0,o.useEffect)(function(){C===f&&x(W({pageIndex:B,group:G}))},[G,B,C,W]);var j=(0,o.useMemo)(function(){var e,t=(null==(e=S.find(function(e){return e.absolutePath===G}))?void 0:e.group)||b,n=t.groups.map(function(e){return e.coverImage}),r=t.images.filter(function(e){return!n.includes(e.hash)});return{view:t,covers:n,paths:S,images:r,pathsOptions:_,root:b,isWorking:h,pageIndex:B,path:G,lastGalleryLink:R,getUrl:W}},[S,b,_,h,B,G,R,W]);return(0,i.jsx)(p.Provider,{value:j,children:t})}},32521:(e,t,n)=>{"use strict";n.d(t,{U:()=>i,Z:()=>a});var r=n(12115),i=(0,r.createContext)({connectedDevices:[],isReceiving:!1,webSerialEnabled:!1,openWebSerial:function(){throw Error("PortsContext is missing")},webUSBEnabled:!1,openWebUSB:function(){throw Error("PortsContext is missing")},unknownDeviceResponse:null,hasInactiveDevices:!1}),a=function(){return(0,r.useContext)(i)}},35695:(e,t,n)=>{"use strict";var r=n(18999);n.o(r,"RedirectType")&&n.d(t,{RedirectType:function(){return r.RedirectType}}),n.o(r,"redirect")&&n.d(t,{redirect:function(){return r.redirect}}),n.o(r,"usePathname")&&n.d(t,{usePathname:function(){return r.usePathname}}),n.o(r,"useRouter")&&n.d(t,{useRouter:function(){return r.useRouter}}),n.o(r,"useServerInsertedHTML")&&n.d(t,{useServerInsertedHTML:function(){return r.useServerInsertedHTML}})},40774:(e,t,n)=>{"use strict";n.d(t,{B:()=>r,Q:()=>i});var r=function(e){return e.CONFIRM_ASK="CONFIRM_ASK",e.CONFIRM_ANSWERED="CONFIRM_ANSWERED",e.ADD_IMAGES="ADD_IMAGES",e.IMPORT_FILES="IMPORT_FILES",e}({}),i=function(e){return e.NUMBER="number",e.STRING="string",e.MULTILINE="multiline",e}({})},41476:(e,t,n)=>{"use strict";n.d(t,{A:()=>u});var r=n(86447),i=n(693),a=n(60376),o=n(87025),s=n(51368);let u=(0,n(65453).v)(function(e,t){return{progress:[],progressLog:{git:[],dropbox:[]},resetProgressLog:function(){return e({progressLog:{git:[],dropbox:[]}})},startProgress:function(t){var n={id:(0,s.A)(),label:t,value:0};return e(function(e){var t=e.progress;return{progress:(0,o._)(t).concat([n])}}),n.id},setProgress:function(t,n){e(function(e){return{progress:e.progress.map(function(e){return e.id!==t?e:(0,a._)((0,i._)({},e),{value:n})})}})},stopProgress:function(t){e(function(e){return{progress:e.progress.filter(function(e){return e.id!==t})}})},setProgressLog:function(n,s){var u=t().progressLog;e({progressLog:(0,a._)((0,i._)({},u),(0,r._)({},n,[s].concat((0,o._)(u[n]))))})}}})},45686:(e,t,n)=>{"use strict";n.d(t,{n:()=>r});var r=function(e){return e.TESTFILE="testFile",e.CHECKPRINTER="checkPrinter",e.FETCHIMAGES="fetchImages",e.CLEARPRINTER="clearPrinter",e.TEAR="tear",e}({})},47457:(e,t,n)=>{"use strict";n.d(t,{A:()=>I});var r=n(97004),i=n(693),a=n(87025),o=n(39249),s=n(91540),u=n(12115),c=n(46498),l=n(11760),d=n(75380),f=n(72623),p=function(e,t){return!!t.find(function(t){var n=t.hashes;return!!n&&Object.values(n).includes(e)})},g=function(e,t){return!!t.find(function(t){return t.hash===e})},h=function(){var e=(0,r._)(function(e){var t,n;return(0,o.YH)(this,function(r){var i,a;switch(r.label){case 0:return t=e.images,n=e.frames,[4,(0,d.ZU)()];case 1:return r.sent(),[4,d.mU.keys()];case 2:return r.sent().forEach((i=t,function(e){p(e,i)||g(e,i)||(0,f.yH)(e)})),[4,d.Uv.keys()];case 3:return r.sent().forEach((a=n,function(e){a.find(function(t){return t.hash===e})||(0,f.t9)(e)})),[2]}})});return function(t){return e.apply(this,arguments)}}(),v=function(){var e=(0,r._)(function(e){return(0,o.YH)(this,function(t){switch(t.label){case 0:return[4,(0,d.ZU)()];case 1:return t.sent(),[4,d.mU.keys()];case 2:return[2,t.sent().filter(function(e){return!e.startsWith("dummy")}).filter(function(t){return!p(t,e)&&!g(t,e)})]}})});return function(t){return e.apply(this,arguments)}}(),m=function(){var e=(0,r._)(function(e){return(0,o.YH)(this,function(t){switch(t.label){case 0:return[4,(0,d.ZU)()];case 1:return t.sent(),[4,d.Uv.keys()];case 2:return[2,t.sent().filter(function(e){return!e.startsWith("dummy")}).filter(function(t){return!e.find(function(e){return e.hash===t})})]}})});return function(t){return e.apply(this,arguments)}}(),b=n(55364),w=n(50263),y=n(99451),S=n(46594),E=function(){var e=(0,r._)(function(e,t){return(0,o.YH)(this,function(n){switch(n.label){case 0:return[4,(0,d.ZU)()];case 1:var i;return n.sent(),[4,Promise.all(e.map((i=(0,r._)(function(e){var n;return(0,o.YH)(this,function(r){switch(r.label){case 0:return r.trys.push([0,3,,4]),[4,t.getItem(e)];case 1:if(!(n=r.sent()))return[2,null];return[4,(0,w.U)(n)];case 2:return[2,{hash:e,lines:r.sent().split("\n"),binary:n}];case 3:return r.sent(),[2,null];case 4:return[2]}})}),function(e){return i.apply(this,arguments)})))];case 2:return[2,n.sent().reduce(y.N,[])]}})});return function(t,n){return e.apply(this,arguments)}}();let I=function(){var e,t=(0,c.A)(),n=t.trashCount,f=t.showTrashCount,p=(0,l.h)(),g=p.frames,w=p.images,I=(0,c.A)().updateTrashCount,_=(e=(0,r._)(function(){var e,t,n;return(0,o.YH)(this,function(r){switch(r.label){case 0:return[4,v(w)];case 1:return[4,E(r.sent(),d.mU)];case 2:return e=r.sent(),t={},n={state:{images:e.map(function(e){try{return t[e.hash]=e.binary,{hash:e.hash,created:(0,S.J)(),title:"Backup export ".concat(e.hash),lines:e.lines.length,tags:["backup"],palette:"bw",framePalette:"bw",invertPalette:!1,invertFramePalette:!1,frame:""}}catch(e){return null}}).reduce(b.iy,[]),lastUpdateUTC:Math.floor(new Date().getTime()/1e3),version:l.A}},(0,s.saveAs)(new Blob((0,a._)(JSON.stringify((0,i._)({},n,t),null,2))),"backup_images.json"),[2]}})}),function(){return e.apply(this,arguments)}),P=(0,u.useCallback)((0,r._)(function(){var e,t,n;return(0,o.YH)(this,function(r){switch(r.label){case 0:return[4,m(g)];case 1:return[4,E(r.sent(),d.Uv)];case 2:return e=r.sent(),t={},n={state:{frames:e.map(function(e,n){try{return t["frame-".concat(e.hash)]=e.binary,{hash:e.hash,name:"Backup export ".concat(e.hash),id:"bak".concat(n.toString(10).padStart(2,"0"))}}catch(e){return null}}).reduce(y.N,[]),frameGroups:[{id:"bak",name:"Re-imported trash frames"}],lastUpdateUTC:Math.floor(new Date().getTime()/1e3),version:l.A}},(0,s.saveAs)(new Blob((0,a._)(JSON.stringify((0,i._)({},n,t),null,2))),"backup_frames.json"),[2]}})}),[g]),T=(0,u.useCallback)((0,r._)(function(){var e,t;return(0,o.YH)(this,function(n){switch(n.label){case 0:return[4,m(g)];case 1:return e=n.sent().length,[4,v(w)];case 2:return t=n.sent().length,I(e,t),[2]}})}),[g,w,I]),A=(0,u.useCallback)((0,r._)(function(){return(0,o.YH)(this,function(e){switch(e.label){case 0:return[4,h({images:w,frames:g})];case 1:return e.sent(),f(!1),window.requestAnimationFrame(function(){T()}),[2]}})}),[T,g,w,f]);return{showTrashCount:f,purgeTrash:A,downloadImages:_,downloadFrames:P,checkUpdateTrashCount:T,trashCount:n}}},52588:(e,t,n)=>{"use strict";n.d(t,{PluginsContext:()=>x});var r=n(97004),i=n(39249),a=n(95155),o=n(12115),s=n(83936),u=n(633),c=n(46498),l=n(11760),d=n(41476),f=n(693),p=n(60376),g=n(15905),h=n(52166),v=n(53982),m=n(18335),b=n(77683),w=n(86964),y=n(55364),S=n(5847),E=function(e){return function(t){var n,a=l.h.getState(),o=a.frames,s=a.palettes,u=h.A.getState().handleExportFrame,c=e.find(function(e){return e.hash===t});if(!c)throw Error("image not found");var d=(0,m.s)(s,c),E=d.palette,I=d.framePalette;if(!E)throw Error("selectedPalette not found");var _=function(){return(0,S.T)(e,o)(c.hash)},P=(0,y.pl)(c),T=(n=(0,r._)(function(){var e,t,n,r,a,s,l,d,p,h,m,y,S,T,A,C,k,R,x,F,U,D,L,N,H,M,O=arguments;return(0,i.YH)(this,function(i){switch(i.label){case 0:return n=void 0===(t=(e=O.length>0&&void 0!==O[0]?O[0]:{}).scaleFactor)?1:t,a=void 0===(r=e.palette)?E:r,l=void 0===(s=e.framePalette)?I:s,d=e.lockFrame,p=e.invertPalette,h=e.invertFramePalette,y=void 0===(m=e.handleExportFrame)?u:m,[4,_()];case 1:if(S=i.sent(),!(A=o.find(function(e){return e.id===c.frame})))return[3,3];return[4,(0,v.mZ)(A.hash)];case 2:return k=i.sent(),[3,4];case 3:k=null,i.label=4;case 4:if(R=(C=k)?C.upper.length/20:2,!P)return[3,6];return[4,(0,g.y1)({tiles:S,palette:a,lockFrame:void 0!==d?d:c.lockFrame,imageStartLine:R,rotation:c.rotation,scaleFactor:n,handleExportFrame:y},"image/png")];case 5:return T=i.sent(),[3,8];case 6:return x=(null==a?void 0:a.palette)||g.CU,F=(null==l?void 0:l.palette)||g.CU,D=(U=(0,w.f)(c)).invertPalette,L=U.invertFramePalette,N=(0,b.C)({imagePalette:x,framePalette:F,invertPalette:void 0!==p?p:D,invertFramePalette:void 0!==h?h:L}),[4,(0,g.Yn)((0,f._)({tiles:S,imageStartLine:R,rotation:c.rotation,scaleFactor:n,handleExportFrame:y},N),"image/png")];case 7:T=i.sent(),i.label=8;case 8:return[4,createImageBitmap(T)];case 9:return H=i.sent(),(M=document.createElement("canvas")).width=H.width,M.height=H.height,M.getContext("2d").drawImage(H,0,0),[2,M]}})}),function(){return n.apply(this,arguments)});return{getMeta:(0,r._)(function(){return(0,i.YH)(this,function(e){return[2,(0,p._)((0,f._)({},c),{isRGBN:P})]})}),getPalette:(0,r._)(function(){return(0,i.YH)(this,function(e){return[2,E]})}),getTiles:_,getCanvas:T}}},I=n(91540),_=n(39630),P=n(40774),T=n(55988),A=function(e,t){var n=e.addImages,a=e.setDialog,o=e.dismissDialog;return{importFiles:(0,T.A)(t),setDialog:a,alert:function(e,t){return a({message:"Plugin: ".concat(e),questions:function(){return[{label:t,key:"info",type:_.V.INFO}]},confirm:(0,r._)(function(){return(0,i.YH)(this,function(e){return[2,o(0)]})})})},dismissDialog:function(){return o(0)},addImages:n}},C=function(e,t){var n=A(e,t),r=n.setDialog,i=n.dismissDialog,a=n.importFiles,o=n.addImages,s=n.alert;return{dispatch:function(e){switch(console.warn('You are using a legacy method: "dispatch('.concat(e.type,')". Please refer to "env.functions" from your plugin to switch to up-to-date methods')),e.type){case P.B.CONFIRM_ASK:r(e.payload);break;case P.B.CONFIRM_ANSWERED:i();break;case P.B.IMPORT_FILES:a(e.payload.files);break;case P.B.ADD_IMAGES:o(e.payload);break;default:s("Plugin error:",'Unhandled Compatibility Action (type:"'.concat(e.type,'")'))}}}},k=function(e,t){var n=e.startProgress,r=e.setProgress,i=e.stopProgress,a=e.setError,o=e.addUpdatePluginProperties,s=e.collectImageData,u=e.stores,c=e.importFn,l=t.url,d=t.config,f=void 0===d?{}:d,p="",g=function(e){var a=Math.min(1,Math.max(0,e));if(p&&(0===a||1===a)){i(p),p="";return}p||(p=n(t.name||"Plugin")),r(p,a)};return new Promise(function(e){window.gbpwRegisterPlugin=function(t){if(window.gbpwRegisterPlugin=function(){},!t)return void e(null);try{var n=new t({saveAs:I.saveAs,progress:g,setError:a,store:C(u,c),functions:A(u,c),collectImageData:s},f),r=n.name,i=n.description,d=n.configParams,p=n.config;o({url:l,name:r,description:void 0===i?"":i,configParams:void 0===d?{}:d,config:void 0===p?{}:p,loading:!1,error:!1}),e(n)}catch(t){o({url:l,loading:!1,error:null==t?void 0:t.message}),e(null)}};var t=document.createElement("script");document.head.appendChild(t),t.addEventListener("error",function(){window.gbpwRegisterPlugin=function(){},o({url:l,loading:!1,error:"Loading error"}),e(null)}),t.src=l})},R=n(6617);function x(e){var t,n=e.children,f=(0,l.h)(),p=f.plugins,g=f.images,h=f.addUpdatePluginProperties,v=(0,u.g)(),m=(0,d.A)(),b=m.startProgress,w=m.setProgress,y=m.stopProgress,S=(0,c.A)().setError,I=(0,s.W)().jsonImport,_=(0,o.useMemo)(function(){return{collectImageData:E(g),addUpdatePluginProperties:h,startProgress:b,setProgress:w,stopProgress:y,setError:S,stores:v,importFn:I}},[g,h,b,w,y,S,v,I]),P=(0,o.useMemo)(function(){var e;return e=(0,r._)(function(e){return(0,i.YH)(this,function(t){return[2,k(_,p.find(function(t){return t.url===e})||{url:""})]})}),function(t){return e.apply(this,arguments)}},[_,p]),T=(0,o.useCallback)((t=(0,r._)(function(e){return(0,i.YH)(this,function(t){switch(t.label){case 0:return[4,k(_,e)];case 1:return[2,!!t.sent()]}})}),function(e){return t.apply(this,arguments)}),[_]),A=(0,o.useMemo)(function(){var e,t;return{runWithImage:(e=(0,r._)(function(e,t){var n,r;return(0,i.YH)(this,function(i){switch(i.label){case 0:return r=E(g)(t),[4,P(e)];case 1:return null==(n=i.sent())||n.withImage(r),[2]}})}),function(t,n){return e.apply(this,arguments)}),runWithImages:(t=(0,r._)(function(e,t){var n,r;return(0,i.YH)(this,function(i){switch(i.label){case 0:return r=t.map(E(g)),[4,P(e)];case 1:return null==(n=i.sent())||n.withSelection(r),[2]}})}),function(e,n){return t.apply(this,arguments)}),validateAndAddPlugin:T}},[P,g,T]);return(0,a.jsx)(R.i.Provider,{value:A,children:n})}},53585:(e,t,n)=>{"use strict";n.d(t,{default:()=>y});var r,i=n(12115),a=n(97004),o=n(87025),s=n(39249),u=n(83936),c=n(46498),l=n(55988),d=!1;let f=function(){var e=(0,c.A)(),t=e.setDragover,n=e.setError,f=(0,u.W)().jsonImport,p=(0,i.useMemo)(function(){return(0,l.A)(f)},[f]),g=(0,i.useCallback)(function(){var e,i=function(e){e.preventDefault(),d||t(!0),window.clearTimeout(r),d=!0,r=window.setTimeout(function(){d=!1,t(!1)},250)},u=(e=(0,a._)(function(e){var t,r,i;return(0,s.YH)(this,function(a){switch(a.label){case 0:e.preventDefault(),(r=e.dataTransfer.items)?t=(0,o._)(r).reduce(function(e,t){if("file"===t.kind){var n=t.getAsFile();return n?(0,o._)(e).concat([n]):e}return e},[]):(i=e.dataTransfer.files,t=(0,o._)(i)),a.label=1;case 1:return a.trys.push([1,3,,4]),[4,p(t)];case 2:return a.sent(),[3,4];case 3:return n(a.sent()),[3,4];case 4:return[2]}})}),function(t){return e.apply(this,arguments)}),c=document.querySelector("body");if(!c)throw Error("dafuq?");return c.addEventListener("dragover",i),c.addEventListener("drop",u),function(){c.removeEventListener("dragover",i),c.removeEventListener("drop",u)}},[p,t,n]);(0,i.useEffect)(g,[g])};var p=n(78538),g=n(35695),h=n(95939),v=function(){var e=(0,h.Z)().getUrl,t=window.location.hash.length<2?"":window.location.hash;(0,i.useEffect)(function(){if(t){var n=t.slice(1).split("/").filter(Boolean),r=n[0],i="";switch(r){case"gallery":var a,o=(0,p._)(n.slice(-2),2),s=o[0],u=o[1];(a="page"===s?n.slice(1,-2).join("/"):n.slice(1).join("/")).length||(null==u?void 0:u.length)?(a.length&&(a="".concat(a,"/")),i=e({group:a,pageIndex:parseInt(u,10)-1})):i="/gallery/";break;case"add-plugin":i="add-plugin/?pluginUrl=".concat(n.slice(1).join("/"));break;case"settings":var c=n[1];i="settings/".concat(c,"/");break;case"home":break;default:(null==r?void 0:r.length)&&(i="".concat(n.join("/"),"/"))}window.location.hash="",window.setTimeout(function(){(0,g.redirect)(i)},10)}},[e,t])},m=n(633),b=n(47457),w=n(933);let y=function(e){var t=e.children;f(),v();var n=(0,m.g)(),r=(0,u.W)().remoteImport;(0,i.useEffect)(function(){return(0,(0,w.E)(n,r).subscribe)()},[r,n]);var a=(0,b.A)().checkUpdateTrashCount;return(0,i.useEffect)(function(){var e=window.setTimeout(function(){a()},1);return function(){return window.clearTimeout(e)}},[a]),t}},66785:(e,t,n)=>{"use strict";n.d(t,{S:()=>s});var r=n(87025),i=n(6456),a=n(77840),o=n(12360),s=function(e,t){var n=t.filtersActiveTags,s=t.sortBy,u=t.recentImports;return(0,r._)(e).map(i.YZ).sort((0,i.PM)(s)).map(i.lt).filter((0,a.A)(n,u)).filter((0,o.A)(n))}},77840:(e,t,n)=>{"use strict";n.d(t,{A:()=>u});var r=n(87025),i=n(30832),a=n.n(i),o=n(19864),s=n(55364);let u=function(e,t){return function(n){var i,u,c=e.reduce(function(e,t){return[o.X3.FILTER_MONOCHROME,o.X3.FILTER_NEW,o.X3.FILTER_RGB,o.X3.FILTER_UNTAGGED,o.X3.FILTER_RECENT,o.X3.FILTER_FAVOURITE,o.X3.FILTER_COMMENTS,o.X3.FILTER_USERNAME].includes(t)?(0,r._)(e).concat([t]):e},[]);if(c.length&&(c.includes(o.X3.FILTER_UNTAGGED)&&0!==n.tags.length||c.includes(o.X3.FILTER_NEW)&&a()(new Date(n.created)).unix()<=a()().subtract(1,"day").unix()||c.includes(o.X3.FILTER_RECENT)&&!t.map(function(e){return e.hash}).includes(n.hash)||c.includes(o.X3.FILTER_RGB)&&!(0,s.pl)(n)||c.includes(o.X3.FILTER_MONOCHROME)&&(0,s.pl)(n)||c.includes(o.X3.FILTER_FAVOURITE)&&!n.tags.includes(o.X3.FILTER_FAVOURITE)||c.includes(o.X3.FILTER_COMMENTS)&&!(null==(i=n.meta)?void 0:i.comment)||c.includes(o.X3.FILTER_USERNAME)&&!(null==(u=n.meta)?void 0:u.userName)))return!1;return!0}}},93959:(e,t,n)=>{"use strict";n.d(t,{PortsContext:()=>y});var r=n(97004),i=n(78538),a=n(87025),o=n(39249),s=n(95155),u=n(7062),c=n(12115),l=n(9718),d=n(39630),f=n(41186),p=n(52166),g=[2400,4800,9600,19200,28800,38400,57600,76800,115200,230400,25e4,460800,576e3,921600,1e6],h=function(){var e=(0,f.A)(),t=e.setDialog,n=e.dismissDialog,i=(0,p.A)().setLastBaudRate;return{querySettings:(0,c.useCallback)(function(){var e=p.A.getState().lastBaudRate;return new Promise(function(a){var s;t({confirm:(s=(0,r._)(function(e){var t;return(0,o.YH)(this,function(r){return n(0),a({baudRate:t=parseInt((null==e?void 0:e.baudRate)||"115200",10)}),i(t),[2]})}),function(e){return s.apply(this,arguments)}),deny:(0,r._)(function(){return(0,o.YH)(this,function(e){return n(0),a(null),[2]})}),message:"Specify Baudrate for Port",questions:function(){return[{key:"baudRate",label:"Baud Rate",type:d.V.SELECT,options:g.map(function(t){return{value:t.toString(10),name:t.toString(10),selected:t===e}})}]}})})},[n,t,i])}},v=n(64768);let m=function(){var e=(0,v.A)().handleFileImport;return(0,c.useCallback)(function(t){e([new File((0,a._)(t),"Text input.txt",{type:"text/plain"})])},[e])};var b=n(46498),w=n(32521);function y(e){var t=e.children,d=(0,i._)((0,c.useState)(null),2),f=d[0],p=d[1],g=(0,i._)((0,c.useState)(!1),2),v=g[0],y=g[1],S=(0,i._)((0,c.useState)(!1),2),E=S[0],I=S[1],_=(0,i._)((0,c.useState)([]),2),P=_[0],T=_[1],A=(0,i._)((0,c.useState)(!1),2),C=A[0],k=A[1],R=(0,i._)((0,c.useState)(null),2),x=R[0],F=R[1],U=(0,i._)((0,c.useState)(""),2),D=U[0],L=U[1],N=(0,c.useRef)(0),H=m(),M=h().querySettings,O=(0,b.A)().setError;(0,c.useEffect)(function(){var e=new Worker(n.tu(new URL(n.p+n.u(7332),n.b)),{type:void 0}),t=window.setTimeout(function(){var t=(0,u.LV)(e);t.registerClient((0,u.BX)({addDeviceApi:function(e){return(0,r._)(function(){var t,n,r,i,s,c;return(0,o.YH)(this,function(o){switch(o.label){case 0:return[4,e.id];case 1:return t=o.sent(),[4,e.portType];case 2:return n=o.sent(),[4,e.portDeviceType];case 3:switch(r=o.sent()){case l._Y.PACKET_CAPTURE:return[3,4];case l._Y.INACTIVE:return[3,6]}return[3,8];case 4:return[4,e.setup((0,u.BX)({receiving:function(){k(!0)},data:function(e){L(e)}}))];case 5:return o.sent(),[3,8];case 6:return[4,e.getBanner()];case 7:return(i=o.sent()).byteLength&&F(i),[3,8];case 8:return c={id:t,portType:n,portDeviceType:r},[4,e.description];case 9:return[4,(c.description=o.sent(),c.device=e,c)];case 10:return s=o.sent(),T(function(e){return(0,a._)(e).concat([s])}),[2]}})})()},setStatus:function(e,t){return(0,r._)(function(){return(0,o.YH)(this,function(n){return y(t),I(e),[2]})})()},removeDeviceApi:function(e){return(0,r._)(function(){return(0,o.YH)(this,function(t){return T(function(t){return t.filter(function(t){return e!==t.id})}),[2]})})()},settingsCallback:function(){return M()}})),p(function(){return t})},1);return function(){e.terminate(),window.clearTimeout(t),p(null)}},[M,O]);var Y=(0,c.useMemo)(function(){return P.map(function(e){return e.portDeviceType}).includes(l._Y.INACTIVE)},[P]),B=(0,c.useCallback)((0,r._)(function(){return(0,o.YH)(this,function(e){switch(e.label){case 0:if(!(v&&f))return[3,4];e.label=1;case 1:return e.trys.push([1,3,,4]),[4,navigator.serial.requestPort()];case 2:if(e.sent().readable)return O(Error("device already opened")),[2];return f.openSerial(),[3,4];case 3:return e.sent(),[3,4];case 4:return[2]}})}),[f,O,v]),G=(0,c.useCallback)((0,r._)(function(){return(0,o.YH)(this,function(e){switch(e.label){case 0:if(!(E&&f))return[3,4];e.label=1;case 1:return e.trys.push([1,3,,4]),[4,navigator.usb.requestDevice({filters:l.k4})];case 2:if(e.sent().opened)return O(Error("device already opened")),[2];return f.openUSB(),[3,4];case 3:return e.sent(),[3,4];case 4:return[2]}})}),[f,O,E]);(0,c.useEffect)(function(){if(D)return window.clearTimeout(N.current),N.current=window.setTimeout(function(){D.length&&(L(""),k(!1),H(D))},250),function(){window.clearTimeout(N.current)}},[D,H]);var W=(0,c.useMemo)(function(){return{connectedDevices:P,hasInactiveDevices:Y,isReceiving:C,openWebSerial:B,openWebUSB:G,unknownDeviceResponse:x,webSerialEnabled:v,webUSBEnabled:E}},[P,Y,C,B,G,x,v,E]);return(0,s.jsx)(w.U.Provider,{value:W,children:t})}},94116:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>f});var r=n(693),i=n(60376),a=n(78538),o=n(87025),s=n(12115),u=n(30401),c=n(64453),l=n(35695),d=n(95155);function f(e){var t=e.options,n=e.CacheProvider,f=void 0===n?c.C:n,p=e.children,g=(0,a._)(s.useState(function(){var e,n=(0,u.A)((0,i._)((0,r._)({},t),{key:null!=(e=null==t?void 0:t.key)?e:"mui"}));n.compat=!0;var s=n.insert,c=[];return n.insert=function(){for(var e=arguments.length,r=Array(e),i=0;i<e;i++)r[i]=arguments[i];(null==t?void 0:t.enableCssLayer)&&!r[1].styles.match(/^@layer\s+[^{]*$/)&&(r[1].styles="@layer mui {".concat(r[1].styles,"}"));var u=(0,a._)(r,2),l=u[0],d=u[1];return void 0===n.inserted[d.name]&&c.push({name:d.name,isGlobal:!l}),s.apply(void 0,(0,o._)(r))},{cache:n,flush:function(){var e=c;return c=[],e}}}),1)[0];return(0,l.useServerInsertedHTML)(function(){var e=g.flush();if(0===e.length)return null;var n="",r=g.cache.key,i=[];return e.forEach(function(e){var t=e.name,a=e.isGlobal,o=g.cache.inserted[t];"string"==typeof o&&(a?i.push({name:t,style:o}):(n+=o,r+=" ".concat(t)))}),(0,d.jsxs)(s.Fragment,{children:[i.map(function(e){var n=e.name,r=e.style;return(0,d.jsx)("style",{nonce:null==t?void 0:t.nonce,"data-emotion":"".concat(g.cache.key,"-global ").concat(n),dangerouslySetInnerHTML:{__html:r}},n)}),n&&(0,d.jsx)("style",{nonce:null==t?void 0:t.nonce,"data-emotion":r,dangerouslySetInnerHTML:{__html:n}})]})}),(0,d.jsx)(f,{value:g.cache,children:p})}},95939:(e,t,n)=>{"use strict";n.d(t,{Z:()=>a});var r=n(12115),i=n(32134),a=function(){return(0,r.useContext)(i.K)}}},e=>{var t=t=>e(e.s=t);e.O(0,[4453,7271,8250,2491,2797,7890,6672,8348,1760,3936,4768,8441,1684,7358],()=>t(12107)),_N_E=e.O()}]);