(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[929,1760,7133],{806:(e,t,n)=>{"use strict";n.d(t,{A:()=>d});var r=n(86447),F=n(693),a=n(60376),i=n(78538),o=n(12115),l=n(27803),s=n(11760),u=n(52166),c=n(55364);let d=function(){var e=(0,u.A)(),t=e.sortPalettes,n=e.setSortPalettes,d=(0,s.h)().images,f=[{label:"Default (ascending)",value:l.V.DEFAULT_ASC},{label:"Default (descending)",value:l.V.DEFAULT_DESC},{label:"Usage (ascending)",value:l.V.USAGE_ASC},{label:"Usage (descending)",value:l.V.USAGE_DESC},{label:"Name (ascending)",value:l.V.NAME_ASC},{label:"Name (descending)",value:l.V.NAME_DESC}],m=(0,o.useMemo)(function(){return d.reduce(function(e,t){return(0,c.pl)(t)?e:(0,a._)((0,F._)({},e),(0,r._)({},t.palette,(e[t.palette]||0)+1))},{})},[d]),h=(0,o.useCallback)(function(e,n){var r=(0,i._)(t.split("_"),2),F=r[0],a="asc"===r[1]?1:-1;switch(F){case"usage":var o=m[e.shortName]||0,l=m[n.shortName]||0;if(o<l)return -1*a;if(o>l)return a;return 0;case"name":return e.name.localeCompare(n.name)*a;default:return a}},[m,t]);return{sortPalettes:t,setSortPalettes:n,paletteSortOptions:f,paletteUsages:m,sortFn:h}}},933:(e,t,n)=>{"use strict";n.d(t,{E:()=>o});var r,F=n(97004),a=n(39249),i=n(24463),o=function(e,t){var o,l,s,u,c=(o=(0,F._)(function(){var F;return(0,a.YH)(this,function(a){switch(a.label){case 0:if(r)return[3,2];return[4,Promise.all([n.e(9268),n.e(5678),n.e(1753),n.e(1575)]).then(n.bind(n,94979))];case 1:F=a.sent().dropBoxSyncTool,r=r||F(e,t),a.label=2;case 2:return[2,r]}})}),function(){return o.apply(this,arguments)});return i.A.getState().dropboxStorage.use&&c(),{recoverImageData:(l=(0,F._)(function(e){return(0,a.YH)(this,function(t){switch(t.label){case 0:return[4,c()];case 1:return[2,t.sent().recoverImageData(e)]}})}),function(e){return l.apply(this,arguments)}),startAuth:(0,F._)(function(){return(0,a.YH)(this,function(e){switch(e.label){case 0:return[4,c()];case 1:return[2,e.sent().startAuth()]}})}),startSyncData:(s=(0,F._)(function(e){return(0,a.YH)(this,function(t){switch(t.label){case 0:return[4,c()];case 1:return[2,t.sent().startSyncData(e)]}})}),function(e){return s.apply(this,arguments)}),startSyncImages:(0,F._)(function(){return(0,a.YH)(this,function(e){switch(e.label){case 0:return[4,c()];case 1:return[2,e.sent().startSyncImages()]}})}),updateSettings:(u=(0,F._)(function(e){return(0,a.YH)(this,function(t){switch(t.label){case 0:return[4,c()];case 1:return[2,t.sent().updateSettings(e)]}})}),function(e){return u.apply(this,arguments)}),subscribe:function(){var e;return i.A.subscribe(function(e){return e.dropboxStorage},(e=(0,F._)(function(e){return(0,a.YH)(this,function(t){switch(t.label){case 0:return[4,c()];case 1:return t.sent().updateSettings(e),[2]}})}),function(t){return e.apply(this,arguments)}))}}}},1470:(e,t,n)=>{"use strict";n.d(t,{t:()=>r,z:()=>F});var r="ROOT",F=function(){return{id:r,slug:"",created:"",title:"Home",coverImage:"",images:[],groups:[],tags:[]}}},5432:(e,t,n)=>{"use strict";n.d(t,{Fv:()=>f,R2:()=>u,YP:()=>d,Ys:()=>c,dm:()=>l,fE:()=>i,fg:()=>a,g0:()=>s,i$:()=>F});var r=n(15905),F="YYYY-MM-DD HH:mm:ss:SSS",a="YYYY-MM-DD HH:mm:ss",i="YYYYMMDD-HHmmss",o=[0,85,170,255],l='{"command":"INIT"}',s='{"command":"DATA", "compressed":0, "more":1}',u='{"command":"DATA","compressed":0,"more":0}',c='{"command":"PRNT","sheets":1,"margin_upper":1,"margin_lower":3,"pallet":228,"density":64 }',d={r:o.slice(),g:o.slice(),b:o.slice(),n:o.slice(),blend:r.Nx.MULTIPLY},f={shortName:"-",name:"Missing Palette",palette:["#aaaaaa","#999999","#888888","#777777"],isPredefined:!0,origin:"technical"}},5847:(e,t,n)=>{"use strict";n.d(t,{T:()=>o,p:()=>l});var r=n(97004),F=n(39249),a=n(55364),i=n(72623),o=function(e,t,n){var o,l=(o=(0,r._)(function(r,o,s,u){var c,d,f,m,h,p,g,v,x,b,j,y;return(0,F.YH)(this,function(F){switch(F.label){case 0:if(d=e.find(function(e){return r===e.hash}),f=("string"==typeof s?s:null==d?void 0:d.frame)||void 0,m=null==(c=t.find(function(e){return e.id===f}))?void 0:c.hash,u||!(!d||!(0,a.pl)(d)))return[3,2];return[4,(0,i.Hh)(r,m,o,n)];case 1:return[2,F.sent()||[]];case 2:if(!(h=u||d.hashes).r)return[3,4];return[4,l(h.r,o,f)];case 3:return g=F.sent(),[3,5];case 4:g=[],F.label=5;case 5:if(p=g,!h.g)return[3,7];return[4,l(h.g,o,f)];case 6:return x=F.sent(),[3,8];case 7:x=[],F.label=8;case 8:if(v=x,!h.b)return[3,10];return[4,l(h.b,o,f)];case 9:return j=F.sent(),[3,11];case 10:j=[],F.label=11;case 11:if(b=j,!h.n)return[3,13];return[4,l(h.n,o,f)];case 12:return y=F.sent(),[3,14];case 13:y=[],F.label=14;case 14:return[2,{r:p,g:v,b:b,n:y}]}})}),function(e,t,n,r){return o.apply(this,arguments)});return l},l=function(e,t){var n,a=o(e,t);return n=(0,r._)(function(e){var t,n,r,i,o;return(0,F.YH)(this,function(F){switch(F.label){case 0:return[4,a(e,!0,"")];case 1:if(t=F.sent())return[2,(null==t?void 0:t.length)||(null==(n=t.r)?void 0:n.length)||(null==(r=t.g)?void 0:r.length)||(null==(i=t.b)?void 0:i.length)||(null==(o=t.n)?void 0:o.length)||0];return[2,0]}})}),function(e){return n.apply(this,arguments)}}},6456:(e,t,n)=>{"use strict";n.d(t,{PM:()=>l,YZ:()=>i,lt:()=>o});var r=n(693),F=n(60376),a=n(78538),i=function(e,t){return(0,F._)((0,r._)({},e),{sortIndex:t})},o=function(e){return(0,F._)((0,r._)({},e),{sortIndex:void 0})},l=function(e){return function(t,n){if(!e)return 0;var r=(0,a._)(e.split("_"),2),F=r[0],i=r[1],o=t[F],l=n[F],s="desc"===i?-1:1;return o&&l?o>l?s:o<l?-s:t.sortIndex<n.sortIndex?s:-s:0}}},10746:(e,t,n)=>{"use strict";n.d(t,{z:()=>r});var r="gbp-z-web"},11760:(e,t,n)=>{"use strict";n.d(t,{A:()=>C,h:()=>R});var r=n(97004),F=n(86447),a=n(693),i=n(60376),o=n(577),l=n(39249),s=n(36952),u=n.n(s),c=n(65453),d=n(46786),f=n(19864),m=n(87031),h=n(55685),p=n(85546),g=n(10746),v=n(30832),x=n.n(v),b=n(15905),j=n(5432),y=n(55364),_=n(52324),A=function(){var e=(0,r._)(function(e){var t,n,r,F,o,s,u,c;return(0,l.YH)(this,function(l){switch(l.label){case 0:if(c={},!(null==(t=(u=e).frames)?void 0:t.length))return[3,2];return[4,(0,_.g)(u.frames)];case 1:c.frames=l.sent(),l.label=2;case 2:return(null==(n=u.frameGroupNames)?void 0:n.length)&&(c.frameGroups=u.frameGroupNames),(null==(r=u.palettes)?void 0:r.length)&&(c.palettes=u.palettes),(null==(F=u.plugins)?void 0:F.length)&&(c.plugins=u.plugins),(null==(o=u.imageGroups)?void 0:o.length)&&(c.imageGroups=u.imageGroups),(null==(s=u.images)?void 0:s.length)&&(c.images=u.images.map(function(e){return(0,i._)((0,a._)({},e),{created:x()(e.created).format(j.i$)})}).map(function(e){return(0,i._)((0,a._)({},e),{tags:e.tags||[]})}).map(function(e){if((0,y.pl)(e)){var t=(0,a._)({},e);return t.palette||Object.assign(t,{palette:j.YP}),t.palette.blend||Object.assign(t.palette,{blend:b.Nx.MULTIPLY}),t.frame=e.frame||void 0,t}var n=(0,a._)({},e);return void 0===n.framePalette&&(n.lockFrame?n.framePalette="bw":n.framePalette=n.palette),void 0===n.lockFrame&&(n.lockFrame=!1),void 0===n.invertFramePalette&&(n.invertFramePalette=n.invertPalette),n.frame=e.frame||void 0,n})),[2,c]}})});return function(t){return e.apply(this,arguments)}}(),C=1,I=(0,p.A)("id"),E=(0,p.A)("id"),w=(0,p.A)("id"),S=(0,p.A)("url"),P=(0,m.A)("id"),T=(0,p.A)("shortName"),k=(0,m.A)("name"),D=(0,p.A)("hash"),B=function(e){return P(I(e))},N=function(e){return k(S(e))},M=function(e){return T((0,o._)(u().map(function(e){return(0,i._)((0,a._)({},e),{isPredefined:!0})})).concat((0,o._)(e)))};let R=(0,c.v)()((0,d.Zr)(function(e,t){return{frames:[],palettes:[],frameGroups:[],plugins:[],imageGroups:[],images:[],addFrames:function(t){return e(function(e){return{frames:B((0,o._)(t).concat((0,o._)(e.frames)))}})},addPalettes:function(n){var r=t().palettes,F=n.reduce(function(e,t){return r.find(function(e){return e.shortName===t.shortName})?{update:(0,o._)(e.update).concat([t]),add:e.add}:{update:e.update,add:(0,o._)(e.add).concat([t])}},{add:[],update:[]}),a=F.update,i=F.add;e({palettes:T((0,o._)(i).concat((0,o._)(r.map(function(e){return a.find(function(t){return t.shortName===e.shortName})||e}))))})},deleteFrame:function(t){return e(function(e){return{frames:B(e.frames.filter(function(e){return t!==e.id}))}})},deletePalette:function(t){return e(function(e){return{palettes:e.palettes.filter(function(e){return t!==e.shortName})}})},deletePlugin:function(t){return e(function(e){return{plugins:N(e.plugins.filter(function(e){return t!==e.url}))}})},updateFrameGroups:function(t){return e(function(e){return{frameGroups:E((0,o._)(t).concat((0,o._)(e.frameGroups)))}})},updatePluginConfig:function(n,r,o){var l=t().plugins,s=l.find(function(e){return e.url===n});if(!s)throw Error('Plugin "'.concat(n,'" not found'));var u=s,c=(0,i._)((0,a._)({},u.config||{}),(0,F._)({},r,o));return u=(0,i._)((0,a._)({},u),{config:c}),e({plugins:l.map(function(e){return e.url!==n?e:u})}),c},addUpdatePluginProperties:function(n){var r=t().plugins,F=(0,o._)(r);r.find(function(e){var t=e.url;return n.url===t})||F.push(n),e({plugins:N(F.map(function(e){return e.url!==n.url?e:(0,a._)({},e,n)}))})},addImageGroup:function(n,r){var F=t().imageGroups.map(function(e){var t=e.images.filter(function(e){return!n.images.includes(e)}),F=e.id===r?(0,o._)(e.groups).concat([n.id]):e.groups;return(0,i._)((0,a._)({},e),{groups:F,images:t})});e({imageGroups:w((0,o._)(F).concat([n]))})},deleteImageGroup:function(n){var r=t().imageGroups,F=r.find(function(e){return e.id===n});F&&e({imageGroups:r.reduce(function(e,t){return t.id===n?e:t.groups.includes(n)?(0,o._)(e).concat([(0,i._)((0,a._)({},t),{images:(0,o._)(t.images).concat((0,o._)(F.images)),groups:(0,o._)(t.groups).concat((0,o._)(F.groups)).filter(function(e){return e!==F.id})})]):(0,o._)(e).concat([t])},[])})},updateImageGroup:function(n,r){e({imageGroups:t().imageGroups.map(function(e){var t=(0,a._)({},e);return t.groups=t.groups.filter(function(e){return e!==n.id}),r===t.id&&(t.groups=(0,o._)(t.groups).concat([n.id])),t.id===n.id?n:t})})},groupImagesAdd:function(t,n){return e(function(e){return{imageGroups:e.imageGroups.map(function(e){return e.id===t?(0,i._)((0,a._)({},e),{images:(0,o._)(e.images).concat((0,o._)(n))}):(0,i._)((0,a._)({},e),{images:e.images.filter(function(e){return!n.includes(e)})})})}})},ungroupImages:function(t){return e(function(e){return{imageGroups:e.imageGroups.map(function(e){return(0,i._)((0,a._)({},e),{images:e.images.filter(function(e){return!t.includes(e)})})})}})},setImageGroups:function(t){return e({imageGroups:t})},addImages:function(t){return e(function(e){return{images:D((0,o._)(e.images).concat((0,o._)(t)))}})},deleteImages:function(t){return e(function(e){return{images:(0,o._)(e.images.filter(function(e){var n=e.hash;return!t.includes(n)}))}})},updateImageHash:function(t,n){return e(function(e){return{images:e.images.map(function(e){return e.hash===t?n:e})}})},updateImageFavouriteTag:function(t,n){return e(function(e){return{images:e.images.map(function(e){return e.hash===n?(0,i._)((0,a._)({},e),{tags:(0,h.A)(t?[f.X3.FILTER_FAVOURITE].concat((0,o._)(e.tags)):e.tags.filter(function(e){return e!==f.X3.FILTER_FAVOURITE}))}):e})}})},updateImages:function(t){return e(function(e){return{images:e.images.map(function(e){return t.find(function(t){return t.hash===e.hash})||e})}})},setFrames:function(t){return e({frames:I(t)})},setImages:function(t){return e({images:D(t)})},setPalettes:function(t){return e({palettes:M(t)})}}},{name:"".concat(g.z,"-items"),storage:(0,d.KU)(function(){return localStorage}),merge:function(e,t){var n=(0,a._)({},t,e);return(0,i._)((0,a._)({},n),{palettes:M(n.palettes),plugins:n.plugins.map(function(e){return(0,i._)((0,a._)({},e),{loading:!1})})})},partialize:function(e){return{frames:e.frames,frameGroups:e.frameGroups,imageGroups:e.imageGroups,images:e.images,plugins:e.plugins.map(function(e){return(0,i._)((0,a._)({},e),{loading:void 0,error:void 0})}),palettes:e.palettes.filter(function(e){return!e.isPredefined})}},version:C,migrate:function(){var e=(0,r._)(function(e,t){var n;return(0,l.YH)(this,function(r){switch(r.label){case 0:if(0!==t)return[3,2];return[4,A(e)];case 1:n=r.sent(),r.label=2;case 2:return[2,n]}})});return function(t,n){return e.apply(this,arguments)}}()}))},12360:(e,t,n)=>{"use strict";n.d(t,{A:()=>F});var r=n(19864);let F=function(e){return function(t){var n=e.filter(function(e){return![r.X3.FILTER_MONOCHROME,r.X3.FILTER_NEW,r.X3.FILTER_RGB,r.X3.FILTER_UNTAGGED,r.X3.FILTER_RECENT,r.X3.FILTER_FAVOURITE,r.X3.FILTER_COMMENTS,r.X3.FILTER_USERNAME].includes(e)});return!n.length||!!t.tags.find(function(e){return n.includes(e)})}}},15821:(e,t,n)=>{"use strict";n.d(t,{A:()=>x});var r=n(78538),F=n(44054),a=n(95155),i=n(69242),o=n(53267),l=n(7642),s=n(36114),u=n(71977),c=n(99927),d=n(54492),f=n(3127),m=n(16324),h=n(51095),p=n(12115);let g=function(e){var t=e.confirm,n=e.canConfirm,r=e.deny;(0,p.useEffect)(function(){var e=function(e){"Escape"===e.key&&r&&r(),"Enter"===e.key&&e.ctrlKey&&t&&n&&t()};return document.addEventListener("keydown",e),function(){document.removeEventListener("keydown",e)}},[t,n,r])};var v=function(e,t,n,r){var a={};if(r?(a.padding="8px !important",a.overflowX="hidden",a.overflowY="hidden"):(a.scrollbarGutter="stable",a.overflowY="scroll"),n)return a;switch(void 0===t?"undefined":(0,F._)(t)){case"string":a.height=t;break;case"number":a.height="".concat(t,"px")}switch(void 0===e?"undefined":(0,F._)(e)){case"string":a.width=e;break;case"number":a.width="".concat(e,"px");break;default:a.width="440px"}return a};let x=function(e){var t=e.contentHeight,n=e.contentWidth,F=e.header,x=e.closeTitle,b=e.children,j=e.confirm,y=e.deny,_=e.canConfirm,A=e.headerOnly,C=e.fullSize,I=e.open,E=e.keepMounted,w=e.closeOnOverlayClick,S=e.headerActionButtons,P=e.actionButtons,T=(0,r._)((0,p.useState)(),2),k=T[0],D=T[1];g({confirm:j,canConfirm:_||!1,deny:y}),(0,p.useEffect)(function(){D(document.body)},[]);var B=(0,m.default)(),N=(0,h.A)(B.breakpoints.down("md")),M=v(n,t,N,C);return(0,a.jsxs)(s.default,{container:k,fullScreen:N||C,maxWidth:"lg",open:"boolean"!=typeof I||I,onClose:y,"aria-label":"string"==typeof F?F:void 0,keepMounted:"boolean"!=typeof E||E,disableEscapeKeyDown:!("boolean"!=typeof w||w),sx:{paddingRight:"10px"},children:[(0,a.jsxs)(d.default,{sx:{display:"flex",justifyContent:"space-between",gap:2,maxWidth:M.width},children:[(0,a.jsx)(o.default,{sx:{whiteSpace:"nowrap",textOverflow:"ellipsis",overflow:"hidden"},children:F}),(0,a.jsxs)(o.default,{sx:{my:-.5,mr:-2},children:[S,y?(0,a.jsx)(f.default,{title:x||"Close ".concat("string"==typeof F?F:""),color:"inherit",onClick:y,children:(0,a.jsx)(i.A,{})}):null]})]}),!A&&(0,a.jsx)(c.default,{sx:M,children:b}),(0,a.jsxs)(u.default,{children:[P,y?(0,a.jsx)(l.default,{onClick:y,color:"primary",variant:"outlined",children:"Cancel"}):null,j?(0,a.jsx)(l.default,{disabled:!1===_,color:"primary",variant:"contained",onClick:j,children:"Ok"}):null]})]})}},16853:(e,t,n)=>{var r={"./af.js":[30639,639],"./am.js":[39218,9218],"./ar-dz.js":[83291,5672],"./ar-iq.js":[64228,4228],"./ar-kw.js":[36568,6568],"./ar-ly.js":[58265,8265],"./ar-ma.js":[9592,9592],"./ar-sa.js":[42562,2562],"./ar-tn.js":[99148,9148],"./ar.js":[82091,4472],"./az.js":[29139,9139],"./be.js":[33821,3821],"./bg.js":[5543,5543],"./bi.js":[1313,1313],"./bm.js":[55989,5989],"./bn-bd.js":[73705,3705],"./bn.js":[21484,1484],"./bo.js":[97087,7087],"./br.js":[32608,2608],"./bs.js":[11235,1235],"./ca.js":[75648,5648],"./cs.js":[67950,7950],"./cv.js":[1437,1437],"./cy.js":[11400,1400],"./da.js":[89315,9315],"./de-at.js":[90575,575],"./de-ch.js":[42321,2321],"./de.js":[65847,5847],"./dv.js":[29474,9474],"./el.js":[3361,3361],"./en-au.js":[3800,3800],"./en-ca.js":[81458,1458],"./en-gb.js":[37329,2091],"./en-ie.js":[36080,6080],"./en-il.js":[12651,2651],"./en-in.js":[78753,8753],"./en-nz.js":[43410,3410],"./en-sg.js":[18704,8704],"./en-tt.js":[21490,1490],"./en.js":[32107,2107],"./eo.js":[64200,4200],"./es-do.js":[35506,5506],"./es-mx.js":[70918,918],"./es-pr.js":[67005,7005],"./es-us.js":[38827,8827],"./es.js":[37060,7060],"./et.js":[43961,3961],"./eu.js":[93566,3566],"./fa.js":[58133,8133],"./fi.js":[46781,6781],"./fo.js":[53107,3107],"./fr-ca.js":[74579,4579],"./fr-ch.js":[67944,7944],"./fr.js":[1308,1308],"./fy.js":[67661,7661],"./ga.js":[47260,7260],"./gd.js":[58107,8107],"./gl.js":[23459,3459],"./gom-latn.js":[76197,6197],"./gu.js":[78600,8600],"./he.js":[29243,9243],"./hi.js":[94871,4871],"./hr.js":[38650,8650],"./ht.js":[24552,4552],"./hu.js":[84139,4139],"./hy-am.js":[23812,3812],"./id.js":[69965,9965],"./is.js":[73968,3968],"./it-ch.js":[25415,5415],"./it.js":[36317,6317],"./ja.js":[60241,241],"./jv.js":[70028,28],"./ka.js":[21064,1064],"./kk.js":[77614,7614],"./km.js":[95412,5412],"./kn.js":[11101,1101],"./ko.js":[39810,9810],"./ku.js":[87804,7804],"./ky.js":[1664,1664],"./lb.js":[44006,4006],"./lo.js":[37917,7917],"./lt.js":[14524,4524],"./lv.js":[17770,7770],"./me.js":[71318,1318],"./mi.js":[66994,6994],"./mk.js":[57092,7092],"./ml.js":[45689,5689],"./mn.js":[78595,8595],"./mr.js":[32511,2511],"./ms-my.js":[60265,265],"./ms.js":[72076,2076],"./mt.js":[54593,4593],"./my.js":[17890,7890],"./nb.js":[18452,8452],"./ne.js":[60393,393],"./nl-be.js":[28672,8672],"./nl.js":[69030,9030],"./nn.js":[64296,4296],"./oc-lnc.js":[82472,2472],"./pa-in.js":[741,741],"./pl.js":[45624,5624],"./pt-br.js":[10683,683],"./pt.js":[63088,3088],"./rn.js":[57468,7468],"./ro.js":[11087,1087],"./ru.js":[68445,8445],"./rw.js":[92775,2775],"./sd.js":[16743,6743],"./se.js":[50580,580],"./si.js":[96424,6424],"./sk.js":[1158,1158],"./sl.js":[58271,8271],"./sq.js":[4992,4992],"./sr-cyrl.js":[74798,4798],"./sr.js":[21977,1977],"./ss.js":[37502,7502],"./sv-fi.js":[12481,2481],"./sv.js":[9709,9709],"./sw.js":[43090,3090],"./ta.js":[49011,9011],"./te.js":[97543,9924],"./tet.js":[35321,5321],"./tg.js":[59037,9037],"./th.js":[42376,2376],"./tk.js":[45377,5377],"./tl-ph.js":[15879,5879],"./tlh.js":[46288,6288],"./tr.js":[27742,7742],"./tzl.js":[80834,834],"./tzm-latn.js":[88893,8893],"./tzm.js":[69469,9469],"./ug-cn.js":[12326,2326],"./uk.js":[59516,9516],"./ur.js":[94823,4823],"./uz-latn.js":[2367,2367],"./uz.js":[19999,9999],"./vi.js":[6477,6477],"./x-pseudo.js":[9217,9217],"./yo.js":[6252,6252],"./zh-cn.js":[38464,8464],"./zh-hk.js":[2068,2068],"./zh-tw.js":[77932,7932],"./zh.js":[70350,350]};function F(e){if(!n.o(r,e))return Promise.resolve().then(()=>{var t=Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t});var t=r[e],F=t[0];return n.e(t[1]).then(()=>n.t(F,23))}F.keys=()=>Object.keys(r),F.id=16853,e.exports=F},19864:(e,t,n)=>{"use strict";n.d(t,{X3:()=>r,mI:()=>a,rx:()=>F});var r=function(e){return e.FILTER_UNTAGGED="__filter:untagged__",e.FILTER_NEW="__filter:new__",e.FILTER_MONOCHROME="__filter:mono__",e.FILTER_RGB="__filter:rgb__",e.FILTER_RECENT="__filter:recent__",e.FILTER_FAVOURITE="__filter:favourite__",e.FILTER_COMMENTS="__filter:comments__",e.FILTER_USERNAME="__filter:username__",e}({}),F=["__filter:untagged__","__filter:new__","__filter:mono__","__filter:rgb__","__filter:recent__","__filter:favourite__","__filter:comments__","__filter:username__"],a="__new:palette__"},23747:(e,t,n)=>{"use strict";n.d(t,{Ay:()=>_,BF:()=>b,Ll:()=>x});var r=n(97004),F=n(693),a=n(60376),i=n(78538),o=n(39249),l=n(30832),s=n.n(l),u=n(12115),c=n(5432),d=n(95939),f=n(33782),m=n(45465),h=n(3381),p=n(71620),g=n(11760),v=n(80360),x="NEW_GROUP",b=function(e){return e.trim().replace(/[^A-Z0-9_-]+/gi,"_").toLowerCase()},j=function(e,t){return e.find(function(e){return e.group.groups.find(function(e){return e.id===t})})||null},y=function(e){return e.CREATE_NEW="CREATE_NEW",e.EDIT_EXISTING="EDIT_EXISTING",e.NOT_EDITING="NOT_EDITING",e}(y||{});let _=function(){var e,t=(0,p.A)().imageSelection,n=(0,h.A)(),l=n.editImageGroup,y=n.cancelEditImageGroup,_=(0,g.h)(),A=_.imageGroups,C=_.addImageGroup,I=_.updateImageGroup,E=_.groupImagesAdd,w=_.ungroupImages,S=(0,f.g)(),P=S.navigateToGroup,T=S.navigateToImage,k=(0,d.Z)(),D=k.view,B=k.paths,N=k.pathsOptions,M=(0,m.Y)().path,R=t.length,G=(null==l?void 0:l.groupId)?l.groupId===x?"CREATE_NEW":"EDIT_EXISTING":"NOT_EDITING",L=(0,u.useMemo)(function(){switch(G){case"CREATE_NEW":var e=(null==l?void 0:l.newGroupTitle)||"";return{imageGroup:null,parentPathMap:B.find(function(e){return e.group.id===D.id})||null,title:e,slug:b(e),slugTouched:!1};case"EDIT_EXISTING":var t=A.find(function(e){return e.id===(null==l?void 0:l.groupId)})||null;return{imageGroup:t,parentPathMap:(null==l?void 0:l.groupId)?j(B,l.groupId):null,title:(null==t?void 0:t.title)||"",slug:(null==t?void 0:t.slug)||"",slugTouched:!0};default:return{imageGroup:null,parentPathMap:null,title:"",slug:"",slugTouched:!1}}},[l,G,A,B,D]),O=(0,i._)((0,u.useState)(L.title),2),z=O[0],U=O[1],H=(0,i._)((0,u.useState)(L.slug),2),Y=H[0],V=H[1],W=(0,i._)((0,u.useState)(L.slugTouched),2),X=W[0],Q=W[1],q=(0,i._)((0,u.useState)((null==(e=L.parentPathMap)?void 0:e.absolutePath)||""),2),K=q[0],Z=q[1],$=(0,u.useMemo)(function(){if(!(null==l?void 0:l.groupId))return"";if((null==l?void 0:l.groupId)===x)return"".concat(M).concat(Y,"/");var e=j(B,l.groupId),t=(null==e?void 0:e.absolutePath)||"";return"".concat(t).concat(Y,"/")},[l,B,M,Y]),J=(0,u.useMemo)(function(){return!!B.find(function(e){return e.absolutePath===$})},[$,B]),ee=(0,u.useMemo)(function(){var e;return Y!==(null==(e=L.imageGroup)?void 0:e.slug)},[L,Y]),et=(0,u.useMemo)(function(){return!!Y&&("CREATE_NEW"===G?!J:"EDIT_EXISTING"===G&&(!ee||!J))},[G,Y,J,ee]),en=(0,u.useMemo)(function(){var e,t,n=(null==(e=B.find(function(e){return e.absolutePath===K}))?void 0:e.group.id)||"";return((null==(t=L.parentPathMap)?void 0:t.group.id)||"")!==n},[L,K,B]),er=(0,u.useMemo)(function(){switch(G){case"EDIT_EXISTING":var e,t=(null==(e=B.find(function(e){return e.group.id===(null==l?void 0:l.groupId)}))?void 0:e.absolutePath)||"";return N.filter(function(e){var n=e.value;return!n.startsWith($)&&n!==t});case"CREATE_NEW":return N;default:return[]}},[$,l,G,B,N]);return{editId:(null==l?void 0:l.groupId)||null,absoluteSlug:$,possibleParents:er,slug:Y,title:z,canConfirm:et,canMove:en,slugIsInUse:J,slugWasChanged:ee,parentSlug:K,selectionCount:R,setSlug:function(e){V(e),Q(!0)},setTitle:function(e){U(e),(e.length<2||!X)&&(Q(!1),V(b(e)))},setParentSlug:Z,confirm:function(){if(y(),et&&l){var e,n=(null==(e=B.find(function(e){return e.absolutePath===K}))?void 0:e.group.id)||"";if(l.groupId===x){if(!l.newGroupCover)return;var r=(0,v.z)();C({id:r,slug:Y,title:z,created:s()(Date.now()).format(c.i$),coverImage:l.newGroupCover,images:t,groups:[]},n),P(r)}else{if(!L.imageGroup)return;I((0,a._)((0,F._)({},L.imageGroup),{slug:Y,title:z}),n),P(l.groupId)}}},move:(0,r._)(function(){var e,n;return(0,o.YH)(this,function(r){return y(),en&&((n=(null==(e=B.find(function(e){return e.absolutePath===K}))?void 0:e.group.id)||"")?E(n,t):w(t),T(t[0])),[2]})}),cancelEditImageGroup:y}}},27299:(e,t,n)=>{"use strict";n.d(t,{E:()=>F});var r=n(693),F=function(e,t){return(0,r._)({flexGrow:0,flexShrink:1,wordBreak:"break-all",whiteSpace:"no-wrap",overflow:"hidden",width:"100%",borderRadius:"3px"},t)}},29032:(e,t,n)=>{"use strict";n.d(t,{j:()=>a});var r=n(35695),F=n(12115),a=function(){var e=(0,r.usePathname)(),t=(0,r.useSearchParams)(),n=(0,F.useMemo)(function(){return t.toString()},[t]);return{fullPath:(0,F.useMemo)(function(){return n?"".concat(e,"?").concat(n):e},[e,n]),pathname:e,query:n,searchParams:t}}},31204:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>rp});var r,F=n(693),a=n(60376),i=n(95155);n(40284),n(39141),n(49231);var o=n(59932),l=n(22548),s=n(7068),u=n(38309),c=n(51095),d=n(12115),f=n(46498),m=n(78538),h=n(69242),p=n(31747),g=n(9665),v=n(89880),x=n(3127),b=n(700),j=n(27299);let y=function(e){var t=e.dismiss,n=e.errorMessage,r=(0,m._)((0,d.useState)(!1),2),F=r[0],a=r[1];return(0,i.jsxs)(g.default,{severity:"error",variant:"filled",sx:{minWidth:300},action:(0,i.jsxs)(i.Fragment,{children:[n.error.stack&&!F&&(0,i.jsx)(x.default,{size:"small",title:"Show error stack","aria-label":"close",color:"inherit",onClick:function(){return a(!0)},children:(0,i.jsx)(p.A,{fontSize:"small"})}),(0,i.jsx)(x.default,{size:"small","aria-label":"close",color:"inherit",onClick:function(e,n){"clickaway"!==n&&t()},children:(0,i.jsx)(h.A,{fontSize:"small"})})]}),children:[(0,i.jsx)(v.default,{sx:{color:"inherit"},children:n.error.message}),F&&(0,i.jsx)(b.default,{variant:"caption",fontFamily:"monospace",component:"pre",sx:function(e){return(0,j.E)(e,{backgroundColor:"#FFFFFF22",maxHeight:"200px",overflow:"auto",p:1})},children:n.error.stack})]})},_=function(){var e=(0,f.A)(),t=e.errors,n=e.dismissError;return(0,i.jsx)(s.default,{direction:"column",gap:4,sx:function(e){return{position:"fixed",top:e.spacing(10),right:e.spacing(2),zIndex:10}},children:t.map(function(e,t){return(0,i.jsx)(y,{dismiss:function(){return n(t)},errorMessage:e},e.id)})})};var A=n(96253),C=n(19505),I=n(40117),E=n(44389),w=n(37713),S=n(44516),P=n(4420),T=n(71169),k=n(97482),D=n(7642),B=n(61487),N=n(74964),M=n(18987),R=n(63148),G=n(42850),L=n(22376),O=n(85222),z=n(30529),U=n(6874),H=n.n(U),Y=n(99999),V=n(45465),W=n(52166),X=n(24463),Q=n(53598),q=n(79356);let K=function(){var e=(0,X.A)(),t=e.gitStorage,n=e.dropboxStorage,r=n.autoDropboxSync||!1,F=!!(n.use||t.use&&t.owner&&t.repo&&t.branch&&t.throttle&&t.token),a=(0,f.A)(),i=a.syncBusy,o=a.setSyncSelect,l=a.setShowSerials,s=(0,W.A)().useSerials,u=(0,X.A)().syncLastUpdate;return{disableSerials:!q.A.enabled&&!Q.A.enabled,syncBusy:i,useSync:F,useSerials:s,syncLastUpdate:u,autoDropboxSync:r,selectSync:function(){return o(!0)},setShowSerials:function(){return l(!0)}}};var Z=n(29032),$=n(69077),J=n(577),ee=n(67069),et=n(86447),en=function(e){var t;return{styleOverrides:{root:(t={},(0,et._)(t,e.breakpoints.up("xs"),{minHeight:"var(--navigation-height)"}),(0,et._)(t,"justifyContent","end"),(0,et._)(t,"& .MuiButton-root",{height:"var(--navigation-height)",padding:"0 20px",fontSize:e.typography.body1.fontSize}),(0,et._)(t,"& .MuiButtonGroup-horizontal",{paddingRight:"8px"}),(0,et._)(t,"& .MuiSvgIcon-root",{fontSize:"1.8rem"}),t)}}},er=function(e){return{MuiAppBar:{variants:(0,J._)(["primary","secondary"].map(function(t){return{props:{color:t},style:{"--AppBar-background":e.palette[t].dark,"--AppBar-color":e.palette[t].contrastText,"& .MuiButton-root.active":{backgroundColor:e.palette["primary"===t?"secondary":"primary"].main},"& .MuiButton-root:hover":{backgroundColor:e.palette[t].light,color:e.palette[t].contrastText},"& .MuiIconButton-root:hover":{backgroundColor:e.palette[t].light,color:e.palette[t].contrastText}}}}))},MuiButton:{styleOverrides:{root:{fontSize:"13px",textTransform:"none",minHeight:"40px"}},variants:(0,J._)(["primary","secondary","tertiary"].map(function(t){return{props:{color:t},style:{"&.MuiButton-outlined":{color:e.palette[t].light,borderColor:e.palette[t].light}}}}))},MuiCardActionArea:{styleOverrides:{root:{height:"100%",".MuiCardActionArea-focusHighlight":{background:"transparent"}}}},MuiCardContent:{styleOverrides:{root:{padding:"24px 16px"}}},MuiDialogTitle:{styleOverrides:{root:{backgroundColor:e.palette.primary[e.palette.mode],color:e.palette.primary.contrastText,"&& + .MuiDialogContent-root":{padding:e.spacing(2)}}}},MuiFormControl:{styleOverrides:{root:{paddingTop:16,".MuiStack-root &:first-of-type":{marginTop:12}}}},MuiInputLabel:{styleOverrides:{root:{transform:"translate(14px, 25px) scale(1)","&.MuiInputLabel-shrink":{transform:"translate(2px, -12px) scale(1)"}}}},MuiLink:{styleOverrides:{root:{color:"inherit"}}},MuiList:{styleOverrides:{root:{".MuiListSubheader-root":{display:"flex",".MuiListItemIcon-root":{minWidth:32,flexDirection:"column",justifyContent:"center"}}}}},MuiMenuItem:{styleOverrides:{root:{"&.Mui-selected":{backgroundColor:(0,P.X4)(e.palette.secondary.main,.8),color:e.palette.secondary.contrastText,"&:hover,&.Mui-focusVisible":{backgroundColor:e.palette.secondary.main}}}}},MuiOutlinedInput:{styleOverrides:{root:{background:"dark"===e.palette.mode?"#000000":"#ffffff",color:"dark"===e.palette.mode?"#ffffff":"#000000",".MuiInputBase-inputMultiline":{fontSize:"13px",lineHeight:"16px",fontFamily:"monospace"},".MuiOutlinedInput-notchedOutline legend span":{display:"none"}}}},MuiPaper:{styleOverrides:{root:{backgroundImage:"none"}}},MuiSelect:{styleOverrides:{select:{display:"flex",".MuiListItemIcon-root":{minWidth:32,flexDirection:"column",justifyContent:"center"}}},defaultProps:{displayEmpty:!0}},MuiSwitch:{defaultProps:{color:"tertiary"}},MuiTab:{styleOverrides:{root:{fontSize:16,textTransform:"none",minHeight:60,"&.Mui-selected":{backgroundColor:(0,P.X4)(e.palette.primary.main,.2),color:"inherit"},"&:hover":{backgroundColor:(0,P.X4)(e.palette.secondary.main,.35)}}}},MuiTabs:{styleOverrides:{root:{"&~.MuiTabPanel-root":{padding:0,marginTop:e.spacing(2)},"& .MuiTabScrollButton-root.Mui-disabled":{opacity:.25}}},defaultProps:{scrollButtons:"auto",indicatorColor:"secondary",variant:"scrollable"}},MuiTextField:{defaultProps:{color:"tertiary",slotProps:ee.y}},MuiToggleButtonGroup:{styleOverrides:{grouped:{variants:(0,J._)(["primary","secondary","tertiary"].map(function(t){return{props:{color:t},style:{"&.Mui-selected":{background:e.palette[t].main,color:e.palette[t].contrastText,"&:hover":{backgroundColor:(0,P.X4)(e.palette[t].main,.7)}},"&:hover":{backgroundColor:(0,P.X4)(e.palette[t].main,.4)}}}}))}},defaultProps:{color:"tertiary"}},MuiToolbar:en(e)}},eF=function(e){var t=e.mode,n=e.colorPrimary,r=e.colorSecondary,F=e.colorTertiary,a=e.colorSuccess,i=e.colorWarn,o=e.colorError,l=e.colorPageBackground,s=e.colorText,u=(0,$.A)({shape:{borderRadius:0},breakpoints:{values:{xs:0,sm:570,md:768,lg:1024,xl:1264}},typography:{fontFamily:'"Trebuchet MS", Helvetica, sans-serif',body1:{fontSize:16},body2:{fontSize:13},h1:{fontSize:30,fontWeight:"bold"},h2:{fontSize:24,fontWeight:"bold"},h3:{fontSize:20,fontWeight:"bold"},h4:{fontSize:18,fontWeight:"bold"}},palette:{mode:t,primary:{main:n},secondary:{main:r},success:{main:a},warning:{main:i},error:{main:o},background:{default:l,paper:(0,P.a)(l,"light"===t?.6:.02)}}}),c=(0,$.A)(u,{palette:{tertiary:u.palette.augmentColor({color:{main:F},name:"tertiary"}),fgtext:u.palette.augmentColor({color:{main:s},name:"fgtext"}),bg:u.palette.augmentColor({color:{main:l},name:"bg"}),text:{primary:s,secondary:s}}}),d=(0,P.au)(c.palette.primary.main,s,.7);return(0,$.A)(c,{typography:{fontFamily:'"Trebuchet MS", Helvetica, sans-serif',body1:{color:s},body2:{color:s},h1:{color:d},h2:{color:d},h3:{color:d},h4:{color:d}},components:er(c)})},ea={colorInfo:"#3f769e",colorSuccess:"#3f9e7c",colorWarn:"#8b7b2c",colorError:"#cb0003",colorPrimary:"#503281",colorSecondary:"#455c63",colorTertiary:"#4a6959"},ei=eF((0,F._)({mode:"dark",colorPageBackground:"#2a292b",colorText:"#b2b2b2"},ea)),eo=eF((0,F._)({mode:"light",colorPageBackground:"#d6d3dc",colorText:"#333333"},ea)),el=n(99451);let es=function(){var e=(0,m._)((0,d.useState)(!1),2),t=e[0],n=e[1],r=(0,m._)((0,d.useState)(void 0),2),F=r[0],a=r[1],l=(0,Z.j)().fullPath,s=(0,W.A)(),c=s.themeName,p=s.setThemeName,g=(0,V.Y)(),v=g.lastGalleryLink,b=g.getUrl;(0,d.useEffect)(function(){a(document.body)},[]);var j=K(),y=j.disableSerials,_=j.syncBusy,U=j.useSync,X=j.useSerials,Q=j.syncLastUpdate,q=j.autoDropboxSync,$=j.selectSync,J=j.setShowSerials,ee=(0,f.A)(),et=ee.showTrashCount,en=ee.trashCount,er=(0,d.useMemo)(function(){return en.frames+en.images},[en]),eF=(0,d.useMemo)(function(){return q&&Q.local!==Q.dropbox},[q,Q]),ea=(0,d.useMemo)(function(){return[{label:"Home",route:"/",prefetch:!1},{label:"Gallery",route:v&&l!==v?v:b({pageIndex:0}),prefetch:!0},{label:"Import",route:"/import",prefetch:!1},{label:"Palettes",route:"/palettes",prefetch:!0},{label:"Frames",route:"/frames",prefetch:!0},{label:"Settings",route:"/settings/generic",prefetch:!1}].reduce(el.N,[])},[l,b,v]),ei=(0,d.useMemo)(function(){return[{title:"Trash",icon:(0,i.jsx)(C.A,{}),badgeContent:er>0?er.toString(10):null,disabled:!1,onClick:function(){return et(!0)}},U?{title:"Syncronize with remote service(s)",icon:(0,i.jsx)(w.A,{}),badgeContent:eF?"!":null,disabled:_,onClick:$}:null,{title:c===Y.V.BRIGHT?"Switch to dark mode":"Switch to bright mode",icon:c===Y.V.BRIGHT?(0,i.jsx)(I.A,{}):(0,i.jsx)(A.A,{}),badgeContent:null,disabled:!1,onClick:function(){return p(c===Y.V.BRIGHT?Y.V.DARK:Y.V.BRIGHT)}},X?{title:y?"USB devices are disabled":"WebUSB Serial devices",icon:(0,i.jsx)(S.A,{}),badgeContent:null,disabled:y,onClick:J}:null].reduce(el.N,[])},[y,$,J,p,et,_,eF,c,er,X,U]);return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(u.default,{theme:eo,children:(0,i.jsx)(T.default,{color:"primary",enableColorOnDark:!0,position:"sticky",children:(0,i.jsx)(o.default,{maxWidth:"xl",disableGutters:!0,children:(0,i.jsxs)(z.default,{disableGutters:!0,children:[(0,i.jsx)(B.default,{variant:"text",component:"nav",role:"navigation","aria-label":"Main Navigation",sx:{display:{xs:"none",md:"inline-flex"},width:"100%"},children:ea.map(function(e){var t=e.route,r=e.label,F=e.prefetch;return(0,i.jsx)(D.default,{href:t,prefetch:F,component:H(),color:"inherit",onClick:function(){return n(!1)},children:r},t)})}),(0,i.jsxs)(B.default,{variant:"text",role:"navigation","aria-label":"Utility Navigation",children:[ei.map(function(e){var t=e.title,n=e.icon,r=e.onClick,F=e.badgeContent;return(0,i.jsx)(x.default,{color:"inherit",title:t,onClick:r,children:(0,i.jsx)(k.default,{badgeContent:F,color:"error",anchorOrigin:{vertical:"bottom",horizontal:"right"},children:n})},t)}),(0,i.jsx)(x.default,{color:"inherit",title:"Open Main Navigation",onClick:function(){return n(!0)},sx:{display:{md:"none"}},children:(0,i.jsx)(E.A,{})})]})]})})})}),(0,i.jsxs)(M.default,{container:F,variant:"temporary",open:t,onClose:function(){return n(!1)},ModalProps:{keepMounted:!0},sx:function(e){return{display:{xs:"block",md:"none"},"& .MuiDrawer-paper":{width:{xs:"100%",sm:e.breakpoints.values.sm}}}},children:[(0,i.jsx)(z.default,{disableGutters:!0,children:(0,i.jsx)(B.default,{variant:"text",sx:{display:{md:"none"}},children:(0,i.jsx)(x.default,{color:"inherit",title:"Close Main Navigation",onClick:function(){return n(!1)},children:(0,i.jsx)(h.A,{})})})}),(0,i.jsx)(N.default,{}),(0,i.jsx)(R.default,{children:ea.map(function(e){var t=e.route,r=e.label;return(0,i.jsx)(G.default,{disablePadding:!0,children:(0,i.jsx)(L.default,{href:t,component:H(),onClick:function(){return n(!1)},sx:function(e){return{"&.active":{background:e.palette.secondary.light,color:e.palette.secondary.contrastText},"&:hover":{background:(0,P.X4)(e.palette.primary.main,.3)}}},children:(0,i.jsx)(O.default,{primary:r})})},t)})})]})]})},eu=function(){return(0,i.jsx)(u.default,{theme:eo,children:(0,i.jsx)(T.default,{color:"primary",enableColorOnDark:!0,position:"sticky",children:(0,i.jsx)(o.default,{maxWidth:"xl",disableGutters:!0,children:(0,i.jsx)(z.default,{disableGutters:!0})})})})};var ec=n(4915),ed=n(76380),ef=n(90835),em=n(78449),eh=n(55864),ep=n(70661);let eg=function(e){return Math.floor(e)===e&&!!(e&&!(e&e-1))},ev=function(e){var t=e.imageData,n=e.scaleFactor,r=e.width,F=e.height,a=e.fileName,o=e.palette,l=e.dither,u=e.contrastBaseValues,c=(0,d.useRef)(null),f=(0,d.useRef)(null);return(0,d.useEffect)(function(){c.current&&f.current&&(null==u?void 0:u.length)&&(0,ep.q)({targetCanvas:c.current,originalCanvas:f.current,imageData:t,palette:o,dither:l,contrastBaseValues:u})}),(0,i.jsxs)(s.default,{direction:"column",gap:1,children:[(0,i.jsxs)(s.default,{title:"".concat(a," - ").concat(n,"x"),direction:"row",gap:1,justifyContent:"space-between",alignItems:"center",children:[(0,i.jsx)("canvas",{width:r,height:F,ref:f}),(0,i.jsx)(eh.A,{fontSize:"large"}),(0,i.jsx)("canvas",{width:r,height:F,ref:c})]}),eg(n)?null:(0,i.jsx)(g.default,{severity:"warning",variant:"filled",children:"The scale factor of your image is ".concat(n.toPrecision(3),". To get a clean result without artifacts, try to import only images with it's dimensions being scaled by powers of two. (1, 2, 4, 8 ...)")})]})};var ex=n(15821),eb=n(39893),ej=n(48675),ey=n(85539);let e_=function(){var e=(0,ej.A)(),t=e.bitmapQueue,n=e.bitmapQueueCancel,r=e.importQueueAdd,F=(0,W.A)(),a=F.bitmapQueueDither,o=F.bitmapQueueSetting,l=F.setBitmapQueueDither,u=F.setBitmapQueueSetting,c=(0,d.useMemo)(function(){return(eb.C.find(function(e){return e.value===o})||eb.C[0]).baseValues},[o]);return(0,i.jsx)(ex.A,{header:"Prepare Bitmaps for import",confirm:function(){(0,ey._)({bitmapQueue:t,dither:a,contrastBaseValues:c,importQueueAdd:r})},deny:n,children:(0,i.jsxs)(s.default,{direction:"column",gap:4,children:[t.map(function(e,t){return(0,i.jsx)(ev,{imageData:e.imageData,scaleFactor:e.scaleFactor,width:e.width,height:e.height,fileName:e.fileName,dither:a,contrastBaseValues:c,palette:["#ffffff","#aaaaaa","#555555","#000000"]},t)}),(0,i.jsx)(ec.default,{label:"Enable Dither",control:(0,i.jsx)(ef.default,{checked:a,onChange:function(e){l(e.target.checked)}})}),(0,i.jsx)(em.default,{value:o,label:"Contrast preset",select:!0,size:"small",onChange:function(e){u(e.target.value)},children:eb.C.map(function(e){var t=e.value,n=e.name;return(0,i.jsx)(ed.default,{value:t,children:n},t)})})]})})};var eA=n(53267),eC=n(17976),eI=n(99776),eE=n(64263),ew=n(44296),eS=n(90404);let eP=function(e){var t=e.hash,n=e.hashes,r=e.meta,o=(0,a._)((0,F._)({},r),{hash:t}),l=Object.keys(o).reduce(function(e,t){var n="number"!=typeof o[t]&&"string"!=typeof o[t]?JSON.stringify(o[t]):o[t];return(0,J._)(e).concat([{key:t,value:n}])},[]);if(n){var s=Object.keys(n).reduce(function(e,t){var r={key:"hash ".concat(t),value:n[t]};return(0,J._)(e).concat([r])},[]);l.push.apply(l,(0,J._)(s))}return(0,i.jsx)(ew.default,{children:(0,i.jsx)(eC.default,{padding:"none",sx:{fontFamily:"monospace"},children:(0,i.jsx)(eI.default,{children:l.map(function(e){var t=e.key,n=e.value;return(0,i.jsxs)(eS.default,{children:[(0,i.jsx)(eE.default,{component:"th",scope:"row",children:t}),(0,i.jsx)(eE.default,{align:"right",children:n})]},t)})})})})};var eT=n(39630),ek=n(41186);let eD=function(){var e=(0,ek.A)().dialogs[0],t=e.questions,n=(0,m._)((0,d.useState)(t?t({}).reduce(function(e,t){var n,r,i,o=t.key;switch(t.type){case eT.V.SELECT:n=(null==(i=(0,F._)({},t).options)||null==(r=i.find(function(e){return e.selected}))?void 0:r.value)||"";break;case eT.V.CHECKBOX:n=!1;break;case eT.V.TEXT:n=t.initialValue||"";break;case eT.V.NUMBER:n=0;break;case eT.V.INFO:default:return e}return(0,a._)((0,F._)({},e),(0,et._)({},o,n))},{}):{}),2),r=n[0],i=n[1];return{message:e.message,confirm:function(){return e.confirm(r)},deny:e.deny,questions:t?t(r):[],values:r,setSelected:function(e){i((0,F._)({},r,e))}}},eB=function(){var e=eD(),t=e.message,n=e.questions,r=e.values,F=e.setSelected,a=e.confirm,o=e.deny;return(0,i.jsx)(ex.A,{confirm:a,deny:o,header:t,headerOnly:!n.length,children:(0,i.jsx)(s.default,{direction:"column",gap:2,children:n.map(function(e){switch(e.type){case eT.V.SELECT:var t=e.label,n=e.key,a=e.options,o=e.disabled;return(0,i.jsx)(em.default,{select:!0,disabled:void 0!==o&&o,size:"small",value:r[n]||"",label:t,onChange:function(e){return F((0,et._)({},n,e.target.value))},children:a.map(function(e){var t=e.value,n=e.name;return(0,i.jsx)(ed.default,{value:t,children:n},t)})},n);case eT.V.TEXT:var l=e.label,s=e.key,u=e.disabled;return(0,i.jsx)(em.default,{disabled:void 0!==u&&u,size:"small",value:r[s]||"",label:l,onChange:function(e){return F((0,et._)({},s,e.target.value))}},s);case eT.V.NUMBER:var c=e.label,d=e.key,f=e.min,m=e.max,h=e.disabled;return(0,i.jsx)(em.default,{disabled:void 0!==h&&h,size:"small",value:r[d]||"",type:"number",label:c,slotProps:{htmlInput:{min:f,max:m}},onChange:function(e){return F((0,et._)({},d,e.target.value))}},d);case eT.V.CHECKBOX:var p=e.label,v=e.key,x=e.disabled;return(0,i.jsx)(ec.default,{disabled:void 0!==x&&x,label:p,control:(0,i.jsx)(ef.default,{checked:r[v],onChange:function(e){var t=e.target;F((0,et._)({},v,t.checked))}})},v);case eT.V.INFO:var j=e.label,y=e.key,_=e.severity;return _?(0,i.jsx)(g.default,{severity:_,variant:"filled",children:j},y):(0,i.jsx)(b.default,{children:j},y);case eT.V.IMAGE:var A=e.label,C=e.key,I=e.src;return(0,i.jsx)(eA.default,{component:"img",src:I,alt:A,title:A,sx:{imageRendering:"pixelated"}},C);case eT.V.META:var E=e.key,w=e.meta;return(0,i.jsx)(eP,{hash:w.hash,meta:null==w?void 0:w.meta,hashes:null==w?void 0:w.hashes},E);default:return null}})})})};var eN=n(39250),eM=n(50086),eR=n(18407),eG=n(16324);let eL=function(){var e=(0,eG.default)();return(0,i.jsx)(s.default,{justifyContent:"center",alignItems:"center",sx:{position:"fixed",top:0,left:0,width:"100vw",height:"100vh",zIndex:30,background:(0,P.X4)(e.palette.background.paper,.6),backdropFilter:"blur(6px)"},children:(0,i.jsx)(eR.default,{elevation:12,sx:{px:{xs:6,md:10},py:{xs:4,md:9}},children:(0,i.jsxs)(s.default,{direction:"column",gap:4,alignItems:"center",color:e.palette.tertiary.main,children:[(0,i.jsx)(eM.A,{sx:{fontSize:64}}),(0,i.jsx)(b.default,{variant:"h5",fontWeight:"bold",children:"Drop your files here"}),(0,i.jsx)(b.default,{variant:"body2",sx:{maxWidth:"70vw"},textAlign:"center",children:"Printer hex-dumps, .sav savestates, JSON exports or even plain bitmaps."})]})})})};var eO=n(55734),ez=n(78868),eU=n(82691),eH=n(18096),eY=n(35478),eV=n(39489),eW=n(74641),eX=n(11760),eQ=n(44116);let eq=function(e){var t=e.frame,n=e.updateFrame,r=e.noFrameOption,F=e.updateFrameLock,a=e.lockFrame,o=e.selectLabel,l=(0,eX.h)(),u=l.frames,c=l.frameGroups,f=(0,d.useMemo)(function(){return c.map(function(e){var t=(0,eQ.d)(u,e.id);return 0===t.length?[]:[{id:e.id,name:e.name,isGroup:!0}].concat((0,J._)(t.map(function(e){return{id:e.id,name:e.name,isGroup:!1}})))}).flat()},[c,u]);return(0,i.jsxs)(s.default,{direction:"column",gap:2,children:[(0,i.jsxs)(em.default,{label:o||"Frame",select:!0,size:"small",value:t,onChange:function(e){n(e.target.value)},children:[(0,i.jsx)(ed.default,{value:"",children:r||"As imported / No frame"}),f.map(function(e){var t=e.id,n=e.name;return e.isGroup?(0,i.jsxs)(eW.default,{children:[(0,i.jsx)(eV.default,{children:(0,i.jsx)(eY.A,{})}),(0,i.jsx)(O.default,{children:"".concat(n," (").concat(t,")")})]},t):(0,i.jsx)(ed.default,{value:t,children:n},t)})]}),"function"==typeof F?(0,i.jsx)(ec.default,{label:"Use separate color settings for frame",control:(0,i.jsx)(ef.default,{checked:a,onChange:function(e){F(e.target.checked)}})}):null]})};var eK=n(23912),eZ=n(14596),e$=n(75602);let eJ=function(e){var t=e.color,n=e.onChange,r=e.values,F=(0,d.useMemo)(function(){switch(t){case"r":return"#ff0000";case"g":return"#00dd00";case"b":return"#0000ff";default:return"#888888"}},[t]);return(0,i.jsxs)(s.default,{direction:"row",gap:2,alignItems:"center",sx:{pr:2},children:[(0,i.jsx)(x.default,{title:"Reset",onClick:function(){n([0,85,170,255])},children:(0,i.jsx)(eZ.A,{})}),(0,i.jsx)(e$.default,{min:0,max:255,value:r,sx:{color:F},defaultValue:[0,85,170,255],onChange:function(e,t){n(t)},disableSwap:!0})]})};var e0=n(15905),e1=[{id:e0.Nx.NORMAL,label:"Normal (ignore neutral layer)"},{id:e0.Nx.NORMAL_S,label:"Normal ⇵ (only neutral layer)"},{id:e0.Nx.LIGHTEN,label:"Lighten"},{id:e0.Nx.SCREEN,label:"Screen"},{id:e0.Nx.DODGE,label:"Dodge"},{id:e0.Nx.ADDITION,label:"Addition"},{id:e0.Nx.DARKEN,label:"Darken"},{id:e0.Nx.MULTIPLY,label:"Multiply"},{id:e0.Nx.BURN,label:"Burn"},{id:e0.Nx.OVERLAY,label:"Overlay"},{id:e0.Nx.SOFTLIGHT,label:"Soft light"},{id:e0.Nx.HARDLIGHT,label:"Hard light"},{id:e0.Nx.DIFFERENCE,label:"Difference"},{id:e0.Nx.EXCLUSION,label:"Exclusion"}];let e2=function(e){var t=(0,m._)((0,d.useState)(e.values),2),n=t[0],r=t[1],o=(0,eK.A)(function(t){e.onChange(t,!0)},150,{leading:!0,trailing:!0}),l=function(e,t){var i=(0,a._)((0,F._)({},n),(0,et._)({},e,t));r(i),o.callback(i)},u=["r","g","b","n"].reduce(function(t,n){return e.useChannels[n]?(0,J._)(t).concat([n]):t},[]);return(0,i.jsx)(s.default,{direction:"column",gap:3,children:u.map(function(e){return(0,i.jsxs)(s.default,{direction:"column",gap:0,children:["n"===e?(0,i.jsx)(em.default,{value:n.blend,label:"Neutral Layer Blendmode",select:!0,size:"small",onChange:function(e){l("blend",e.target.value)},children:e1.map(function(e){var t=e.id,n=e.label;return(0,i.jsx)(ed.default,{value:t,children:n},t)})}):null,(0,i.jsx)(eJ,{color:e,values:n[e],onChange:function(t){l(e,t)}})]},"slider-".concat(e))})})};var e3=n(97004),e5=n(39249),e4=n(27088),e6=n(9943),e7=n(97644),e8=n(3856),e9=n(77952),te=n(86661),tt=n(9952),tn=n(30832),tr=n.n(tn),tF=n(5432);let ta=function(e){var t=e.children,n=(0,eG.default)(),r=(0,d.useMemo)(function(){if(!(null==(e=n.components)?void 0:e.MuiTextField))return n;var e,t,r,i=(0,F._)({},n.components.MuiTextField);return(null==(r=i.defaultProps)||null==(t=r.slotProps)?void 0:t.htmlInput)&&delete i.defaultProps.slotProps.htmlInput,(0,a._)((0,F._)({},n),{components:(0,a._)((0,F._)({},n.components),{MuiTextField:i})})},[n]);return(0,i.jsx)(u.default,{theme:r,children:t})};var ti=[e0.pL.DEG_0,e0.pL.DEG_90,e0.pL.DEG_180,e0.pL.DEG_270];let to=function(e){var t=e.created,r=e.hash,F=e.hashes,a=e.updateCreated,o=e.meta,l=e.rotation,u=e.updateRotation,c=(0,W.A)().preferredLocale,f=(0,m._)((0,d.useState)(void 0),2),h=f[0],p=f[1];return(0,d.useEffect)(function(){(0,e3._)(function(){var e,t;return(0,e5.YH)(this,function(r){switch(r.label){case 0:e=c.toLowerCase(),r.label=1;case 1:return r.trys.push([1,3,,8]),[4,n(16853)("./".concat(e,".js"))];case 2:return r.sent(),p(e),[3,8];case 3:r.sent(),r.label=4;case 4:return r.trys.push([4,6,,7]),t=e.split("-")[0],[4,n(16853)("./".concat(t,".js"))];case 5:return r.sent(),p(t),[3,7];case 6:return r.sent(),p(void 0),[3,7];case 7:return[3,8];case 8:return[2]}})})()},[c]),(0,i.jsxs)(s.default,{direction:"column",gap:4,children:[(0,i.jsx)(ta,{children:(0,i.jsx)(e9.$,{dateAdapter:tt.R,adapterLocale:h,children:(0,i.jsx)(te.K,{label:"Date / Time",closeOnSelect:!1,views:["year","month","day","hours","minutes","seconds"],value:tr()(t),onAccept:function(e){e&&a(e.format(tF.i$))}})})}),(0,i.jsxs)(e4.default,{children:[(0,i.jsx)(e6.default,{shrink:!0,children:"Edit Rotation"}),(0,i.jsx)(e8.default,{exclusive:!0,fullWidth:!0,value:l||e0.pL.DEG_0,onChange:function(e,t){u(t)},children:ti.map(function(e){return(0,i.jsx)(e7.default,{value:e,children:"".concat(90*e,"\xb0")},e)})})]}),(0,i.jsx)(eP,{meta:o,hash:r,hashes:F})]})};var tl=n(31829);let ts=function(e){var t=e.palette,n=e.fontSize;return(0,i.jsx)(eA.default,{sx:(0,a._)((0,F._)({display:"inline-block",fontSize:n||"2rem",width:"1em",height:"1em",lineHeight:"1em",verticalAlign:"middle",borderRadius:"50%"},(0,tl.O)(t,tl.h.CONIC)),{"&:hover":{animation:"spin 800ms infinite linear"}})})};var tu=n(806);let tc=function(e){var t=e.value,n=e.allowEmpty,r=e.invertPalette,F=e.noFancy,a=e.onChange,o=e.updateInvertPalette,l=(0,m._)((0,d.useState)(t),2),u=l[0],c=l[1],f=(0,eX.h)().palettes,h=(0,eG.default)(),p=(0,tu.A)().sortFn,g=(0,J._)(f).sort(p);return n&&g.unshift({shortName:"",name:"As selected per image",palette:[],isPredefined:!1,origin:""}),(0,i.jsxs)(s.default,{direction:"column",gap:2,children:[(0,i.jsx)(em.default,{value:t,label:"Palette",size:"small",select:!0,onChange:function(e){a(e.target.value,!0),c(e.target.value)},children:g.map(function(e){var t=e.shortName,n=e.name,r=e.palette;return(0,i.jsxs)(ed.default,{value:t,children:[(0,i.jsx)(eV.default,{children:(0,i.jsx)(ts,{palette:r,fontSize:"1.5rem"})}),(0,i.jsx)(O.default,{children:n})]},t)})}),o?(0,i.jsx)(ec.default,{label:"Invert Palette",control:(0,i.jsx)(ef.default,{checked:r,onChange:function(e){o(e.target.checked)}})}):null,F?null:(0,i.jsx)(eA.default,{component:"ul",sx:{display:"grid",gridTemplateColumns:"repeat(auto-fill, 2.5rem)",justifyContent:"center",gap:.25,button:{padding:0,cursor:"pointer",width:"2.5rem",height:"2.5rem",border:"none",borderRadius:"50%"}},children:g.map(function(e){var t=e.shortName,n=e.name,r=e.palette;return(0,i.jsx)(eA.default,{component:"li",children:(0,i.jsx)("button",{type:"button",title:n,style:{background:t===u?h.palette.tertiary.main:"transparent"},onMouseEnter:function(){a(t,!1)},onMouseLeave:function(){a(u,!1)},onClick:function(){a(t,!0),c(t)},children:(0,i.jsx)(ts,{palette:r})})},t)})})]})};var td=n(40857),tf=n(72502),tm=n(30576),th=n(25466),tp=n(41101),tg=n(19864),tv=function(e){return e.ADD="add",e.REMOVE="remove",e}({});let tx=function(e,t){var n=t.mode,r=t.tag;switch(n){case"add":return{add:(0,J._)(e.add).concat([r]),remove:(0,J._)(e.remove.filter(function(e){return e!==r}))};case"remove":return{remove:(0,J._)(e.remove).concat([r]),add:(0,J._)(e.add.filter(function(e){return e!==r}))};default:return e}};var tb=n(55685),tj=n(3084),ty=function(e){return(0,tb.A)(e.map(function(e){return e.tags}).flat()).filter(function(e){return e!==tg.X3.FILTER_FAVOURITE}).sort(function(e,t){return e.toLowerCase().localeCompare(t.toLowerCase())})},t_=function(){var e=(0,eX.h)().images,t=(0,m._)((0,d.useState)(ty(e)),2),n=t[0],r=t[1];return(0,d.useEffect)(function(){r(ty(e))},[e]),{availableTags:n}};let tA=function(e){var t=e.updateTags,n=e.selectedTags,r=t_().availableTags.filter(function(e){return!n.includes(e)}),o=(0,m._)((0,d.useState)(""),2),l=o[0],s=o[1];return(0,i.jsx)(ta,{children:(0,i.jsx)(tj.default,{options:r,fullWidth:!0,size:"small",inputValue:l,renderInput:function(e){return(0,i.jsx)(em.default,(0,a._)((0,F._)({},e),{label:"Tags"}))},clearOnBlur:!0,clearOnEscape:!0,freeSolo:!0,onInputChange:function(e,t,n){switch(n){case"input":s(t||"");break;case"reset":case"clear":case"blur":s("")}},onChange:function(e,n,r){switch(r){case"createOption":case"selectOption":t(tv.ADD,(n||"").trim())}}})})},tC=function(e){var t=e.tags,n=e.updateTags,r=e.resetTags,F=(0,tb.A)((0,J._)(t.initial).concat((0,J._)(t.add)));return(0,i.jsxs)(s.default,{direction:"column",gap:2,children:[(0,i.jsx)(tA,{updateTags:n,selectedTags:F}),F.length>0&&(0,i.jsxs)(s.default,{direction:"row",gap:1,flexWrap:"wrap",alignItems:"center",sx:{".MuiChip-root":{my:"1px"}},children:[F.map(function(e){var r,F=t.add.includes(e),a=t.remove.includes(e);return r=F?"success":a?"error":"default",(0,i.jsx)(tp.default,{label:(0,i.jsxs)(s.default,{direction:"row",gap:1,alignItems:"center",children:[e===tg.X3.FILTER_FAVOURITE?"❤️":e,(0,i.jsxs)(s.default,{direction:"row",gap:0,sx:{mr:-1,".MuiButtonBase-root":{opacity:.4,borderRadius:"50%","&:hover":{opacity:1},"&:focus-visible":{opacity:1,background:"color-mix(in srgb, currentColor 20%, transparent)"}}},children:[(0,i.jsx)(th.default,{onClick:function(){return n(tv.ADD,e)},children:(0,i.jsx)(td.A,{})}),(0,i.jsx)(th.default,{onClick:function(){return n(tv.REMOVE,e)},children:(0,i.jsx)(tf.A,{})})]})]}),color:r,variant:"filled"},e)}),t.add.length+t.remove.length>0&&(0,i.jsx)(x.default,{onClick:r,title:"Reset tags",size:"small",children:(0,i.jsx)(tm.A,{})})]})]})};var tI=function(e){return e.PALETTE="pal",e.FRAME="frame",e.TAGS="tags",e.MISC="misc",e}(tI||{}),tE=function(e,t){switch(e){case"frame":return"Frame";case"misc":return"Misc";case"pal":return t?"Colors":"Palette";case"tags":return"Tags";default:return""}};let tw=function(e){var t,n,r,F,a=(0,d.useMemo)(function(){var t=[];return e.mixedTypes||t.push("pal"),e.regularImage&&t.push("frame"),t.push("tags","misc"),t},[e.mixedTypes,e.regularImage]),o=(0,m._)((0,d.useState)(null),2),l=o[0],u=o[1];return(0,d.useEffect)(function(){u(a[0])},[a]),(0,i.jsx)(s.default,{direction:"column",spacing:1,children:(0,i.jsxs)(eO.Ay,{value:l||a[0],children:[(0,i.jsx)(ez.A,{variant:"fullWidth",indicatorColor:"secondary",allowScrollButtonsMobile:!1,children:a.map(function(t){return(0,i.jsx)(eH.default,{label:tE(t,!!e.paletteRGBN),value:t,onClick:function(){return u(t)}},t)})}),(0,i.jsx)(eU.A,{value:"pal",children:e.paletteRGBN?(0,i.jsx)(e2,{values:e.paletteRGBN,onChange:e.updatePalette,useChannels:{r:!!(null==(t=e.hashes)?void 0:t.r),g:!!(null==(n=e.hashes)?void 0:n.g),b:!!(null==(r=e.hashes)?void 0:r.b),n:!!(null==(F=e.hashes)?void 0:F.n)}}):(0,i.jsx)(tc,{value:e.paletteShort||"",invertPalette:e.invertPalette,onChange:e.updatePalette,updateInvertPalette:e.updateInvertPalette})}),(0,i.jsxs)(eU.A,{value:"frame",children:[(0,i.jsx)(eq,{updateFrame:e.updateFrame,updateFrameLock:e.updateFrameLock,frame:e.frame||"",lockFrame:e.lockFrame}),e.lockFrame&&!e.paletteRGBN?(0,i.jsx)(tc,{value:e.framePaletteShort||"",invertPalette:e.invertFramePalette,onChange:e.updateFramePalette,updateInvertPalette:e.updateInvertFramePalette}):null]}),(0,i.jsx)(eU.A,{value:"tags",children:(0,i.jsx)(tC,{updateTags:e.updateTags,resetTags:e.resetTags,tags:e.tags})}),(0,i.jsx)(eU.A,{value:"misc",children:(0,i.jsx)(to,{created:e.created,hash:e.hash,hashes:e.hashes,updateCreated:e.updateCreated,meta:e.meta,rotation:e.rotation,updateRotation:e.updateRotation})})]})})};var tS=n(40082),tP=n(75097),tT=n(633),tk=n(3381),tD=n(71620);let tB=function(e){var t=e.initial,n=e.add,r=e.remove;return(0,tb.A)((0,J._)(t).concat((0,J._)(n))).filter(function(e){return!r.includes(e)})};var tN=n(55364),tM=n(6456);let tR=function(){var e=(0,tk.A)(),t=e.editImages,n=e.cancelEditImages,r=(0,tD.A)().sortBy,i=(0,eX.h)().images,o=(0,tT.g)().updateImages;return{batchUpdateImages:(0,d.useCallback)(function(e){var l=e.shouldUpdate,s=e.updates,u=e.tagChanges,c=(0,tM.PM)(r),d=(null==t?void 0:t.batch)||[];l&&(null==d?void 0:d.length)&&o(d.reduce(function(e,t){var n=i.find(function(e){return e.hash===t});return n?(0,J._)(e).concat([n]):e},[]).map(tM.YZ).sort(c).map(tM.lt).map(function(e,t){return tP.RQ.reduce(function(e,n){if(!l[n])return e;switch(n){case tP.No.TITLE:return(0,a._)((0,F._)({},e),{title:s.title.replace(/%(n+)/gi,function(e,n){return(t+1).toString(10).padStart(n.length,"0")})});case tP.No.TAGS:var r=tB((0,a._)((0,F._)({},u),{initial:e.tags}));return(0,a._)((0,F._)({},e),{tags:r});case tP.No.ROTATION:case tP.No.LOCK_FRAME:case tP.No.FRAME:case tP.No.CREATED:return(0,a._)((0,F._)({},e),(0,et._)({},n,s[n]))}if((0,tN.pl)(e))return n===tP.No.PALETTE?(0,a._)((0,F._)({},e),{palette:s.palette}):e;switch(n){case tP.No.PALETTE:case tP.Q3.FRAME_PALETTE:case tP.Q3.INVERT_FRAME_PALETTE:case tP.Q3.INVERT_PALETTE:return(0,a._)((0,F._)({},e),(0,et._)({},n,s[n]));default:return e}},e)})),n()},[n,null==t?void 0:t.batch,i,r,o])}};var tG=n(98250),tL=n(5847),tO=function(){var e=(0,tk.A)(),t=e.editImages,n=e.cancelEditImages,r=(0,eX.h)(),i=r.palettes,o=r.frames,l=r.images,s=tR().batchUpdateImages,u=function(e){return i.find(function(t){return e===t.shortName})||tF.Fv},c=(0,tL.p)(l,o),f=(0,tG.h)(),h=(0,d.useMemo)(function(){if(t){var e=t.batch||[],n=t.tags||[];if(e[0]){var r=l.find(function(t){return t.hash===e[0]});if(r){var F=f.width<=600?f.height:Math.min(900,f.height),a=e.reduce(function(e,t){var n=l.find(function(e){return e.hash===t});if(!n)return e;var r=(0,tN.pl)(n);return{mono:e.mono||!r,rgb:e.rgb||r}},{mono:!1,rgb:!1}),i=a.mono&&a.rgb,o=(0,tN.pl)(r)?r.palette:void 0,s=(0,tN.pl)(r)?void 0:r.palette,u=(0,tN.pl)(r)?void 0:r.framePalette;return{created:r.created,hash:r.hash,height:F,imageCount:(null==e?void 0:e.length)||0,invertPalette:r.invertPalette||!1,invertFramePalette:r.invertFramePalette||!1,lockFrame:r.lockFrame||!1,mixedTypes:i,tags:n,title:r.title,frame:r.frame,hashes:(0,tN.pl)(r)?r.hashes:void 0,meta:r.meta,paletteRGBN:o,paletteShort:s,framePaletteShort:u,rotation:r.rotation}}}}},[t,l,f]),p=(0,m._)((0,d.useState)((null==h?void 0:h.title)||""),2),g=p[0],v=p[1],x=(0,m._)((0,d.useState)((null==h?void 0:h.created)||""),2),b=x[0],j=x[1],y=(0,m._)((0,d.useState)((null==h?void 0:h.frame)||""),2),_=y[0],A=y[1],C=(0,m._)((0,d.useState)(null==h?void 0:h.lockFrame),2),I=C[0],E=C[1],w=(0,m._)((0,d.useState)(null==h?void 0:h.rotation),2),S=w[0],P=w[1],T=(0,m._)((0,d.useState)(null==h?void 0:h.invertPalette),2),k=T[0],D=T[1],B=(0,m._)((0,d.useState)(null==h?void 0:h.invertFramePalette),2),N=B[0],M=B[1],R=(0,m._)((0,d.useState)((null==h?void 0:h.paletteShort)||""),2),G=R[0],L=R[1],O=(0,m._)((0,d.useState)((null==h?void 0:h.framePaletteShort)||""),2),z=O[0],U=O[1],H=(0,m._)((0,d.useState)(null==h?void 0:h.paletteRGBN),2),Y=H[0],V=H[1],W=(0,m._)((0,d.useState)(!1),2),X=W[0],Q=W[1],q=Y||u(G).palette,K=u(z).palette,Z=null==h?void 0:h.hash;(0,d.useEffect)(function(){var e;(e=(0,e3._)(function(){return(0,e5.YH)(this,function(e){switch(e.label){case 0:if(!Z)return[2];return[4,c(Z)];case 1:return Q(360===e.sent()),[2]}})}),function(){return e.apply(this,arguments)})()},[c,Z]);var $=(0,m._)((0,d.useState)({initial:(null==h?void 0:h.tags)||[],add:[],remove:[]}),2),J=$[0],ee=$[1],en=(0,m._)((0,d.useState)({created:!1,title:!1,frame:!1,lockFrame:!1,tags:!1,rotation:!1,palette:!1,invertPalette:!1,framePalette:!1,invertFramePalette:!1}),2),er=en[0],eF=en[1];return{toEdit:h,form:{title:g,created:b,frame:_,lockFrame:I,rotation:S,invertPalette:k,paletteShort:G,framePaletteShort:z,invertFramePalette:N,paletteRGBN:Y},isRegularImage:X,shouldUpdate:er,willUpdateBatch:[er.created?"Update date":"",er.title?"Update title":"",er.palette?"Update image palette colors":"",er.invertPalette?"Update invert image palette setting":"",er.frame?"Update frame":"",er.lockFrame?"Update separate frame settings":"",er.framePalette?"Update frame palette colors":"",er.invertFramePalette?"Update invert frame palette setting":"",er.tags?"Update tags":"",er.rotation?"Update rotation":""].filter(Boolean),tagChanges:J,usedPalette:q,usedFramePalette:K,updateForm:function(e){return function(t){switch(eF((0,a._)((0,F._)({},er),(0,et._)({},e,!0))),e){case"title":v(t);break;case"created":j(t);break;case"invertPalette":D(t);break;case"invertFramePalette":M(t);break;case"framePalette":U(t);break;case"frame":A(t);break;case"lockFrame":E(t);break;case"rotation":P(t)}}},updatePalette:function(e,t){e&&(t&&eF((0,a._)((0,F._)({},er),{palette:!0})),"string"==typeof e?L(e):V(e))},updateFramePalette:function(e,t){t&&eF((0,a._)((0,F._)({},er),{framePalette:!0})),U(e)},updateTags:function(e,t){eF((0,a._)((0,F._)({},er),{tags:!0})),ee((0,F._)({},J,tx(J,{mode:e,tag:t})))},resetTags:function(){eF((0,a._)((0,F._)({},er),{tags:!1})),ee(function(e){return{initial:e.initial,add:[],remove:[]}})},save:function(){s({shouldUpdate:er,updates:{title:g,created:b,frame:_,lockFrame:I,rotation:S,palette:Y||G,invertPalette:k||!1,framePalette:z,invertFramePalette:N||!1},tagChanges:J})},cancel:function(){return n()}}},tz=function(e){for(var t=e.parentElement;t;){var n=getComputedStyle(t),r=n.overflowY,F=n.overflowX,a=("auto"===r||"scroll"===r)&&t.scrollHeight>t.clientHeight,i=("auto"===F||"scroll"===F)&&t.scrollWidth>t.clientWidth;if(a||i)return t;t=t.parentElement}return document.scrollingElement||document.documentElement};let tU=function(){var e=tO(),t=e.toEdit,n=e.form,r=e.isRegularImage,F=e.willUpdateBatch,a=e.tagChanges,o=e.usedPalette,l=e.usedFramePalette,u=e.updateForm,c=e.updatePalette,f=e.updateFramePalette,h=e.updateTags,p=e.resetTags,x=e.save,j=e.cancel,y=(0,eG.default)(),_=(0,m._)((0,d.useState)(null),2),A=_[0],C=_[1],I=(0,m._)((0,d.useState)({top:y.spacing(-2)}),2),E=I[0],w=I[1];if((0,d.useEffect)(function(){if(!A)return function(){};var e,t=function(e){var t=A.getBoundingClientRect(),n=Math.min(1,Math.max(144/t.height,1-e.scrollTop/t.height)),r=Math.min(t.height-144,e.scrollTop);w({position:"sticky",zIndex:2,transition:"top ease-in-out 150ms",transform:"translateY(-16px)",top:"-".concat(Math.round(r),"px"),"& .gameboy-image":{transformOrigin:"center bottom",transition:"transform ease-in-out 150ms",transform:"scale(".concat(n.toPrecision(4),")")}})};t(A);var n=function(n){clearTimeout(e),e=setTimeout(function(){t(n.target)},50)},r=tz(A);return r.addEventListener("scroll",n),function(){clearTimeout(e),r.removeEventListener("scroll",n)}},[A]),!t)return console.warn('Editform should be open, but "toEdit" is undefined',t),null;var S=n.title,P=n.created,T=n.frame,k=n.lockFrame,D=n.rotation,B=n.invertPalette,N=n.invertFramePalette,M=n.framePaletteShort,R=n.paletteShort,G=n.paletteRGBN;return(0,i.jsx)(ex.A,{contentHeight:t.height,header:"Editing ".concat(t.imageCount," image(s)"),open:!0,confirm:x,deny:j,children:(0,i.jsxs)(s.default,{direction:"column",gap:4,children:[(0,i.jsx)(eA.default,{ref:C,sx:E,children:(0,i.jsxs)(eA.default,{sx:{mx:y.spacing(-2),position:"relative",backgroundColor:y.palette.background.default},children:[(0,i.jsx)(tS.A,{lockFrame:k,invertPalette:B,palette:o,invertFramePalette:N,framePalette:l,frameId:T,hash:t.hash,hashes:t.hashes,rotation:D}),t.imageCount>1?(0,i.jsxs)(g.default,{severity:"info",sx:{position:"absolute",width:"75%",top:"11%",left:"50%",transform:"translate(-50%, -50%)"},children:[(0,i.jsx)(v.default,{children:"You are editing ".concat(t.imageCount," images")}),F.length?(0,i.jsx)(eA.default,{component:"ul",children:F.map(function(e){return(0,i.jsx)(b.default,{component:"li",variant:"caption",children:e},e)})}):null]}):null]})}),(0,i.jsx)(em.default,{helperText:t.imageCount>1?"Use %n (or %nn, %nnn, ...) to add an index to the image titles":void 0,type:"text",label:"Edit title",value:S,onChange:function(e){var t=e.target.value;u("title")(t)}}),(0,i.jsx)(tw,{created:P,updateCreated:u("created"),regularImage:r,mixedTypes:t.mixedTypes,lockFrame:k,hash:t.hash,hashes:t.hashes,paletteShort:R,framePaletteShort:M,paletteRGBN:G,invertPalette:B,invertFramePalette:N,frame:T,tags:a,meta:t.meta,rotation:D,updatePalette:c,updateInvertPalette:u("invertPalette"),updateFramePalette:f,updateInvertFramePalette:u("invertFramePalette"),updateFrame:u("frame"),updateFrameLock:u("lockFrame"),updateRotation:u("rotation"),updateTags:h,resetTags:p})]})})};var tH=n(56491);let tY=function(e){var t,n,r=(null==e?void 0:e.id)||"",F=(0,tk.A)().cancelEditFrame,a=(0,eX.h)().frames,i=(0,eX.h)(),o=i.frameGroups,l=i.addFrames,s=(0,tT.g)().updateLastSyncLocalNow,u=(0,tH.A)(a,o),c=RegExp("^(?<groupName>[a-z]+)(?<id>[0-9]+)","g").exec(r),f=(null==c||null==(t=c.groups)?void 0:t.groupName)||"",h=(null==c||null==(n=c.groups)?void 0:n.id)||"0",p=(0,m._)((0,d.useState)(f),2),g=p[0],v=p[1],x=(0,m._)((0,d.useState)(parseInt(h,10)),2),b=x[0],j=x[1],y=(0,m._)((0,d.useState)((null==e?void 0:e.name)||""),2),_=y[0],A=y[1],C="".concat(g).concat(b.toString(10).padStart(2,"0")),I=C===r||!a.find(function(e){return C===e.id}),E=!!g.match(/^[a-z]{2,}$/g),w=b>0;return{groups:u,updateId:r,fullId:C,frameIndex:b,frameGroup:g,frameName:_,idValid:I,formValid:I&&E&&w,groupIdValid:E,frameIndexValid:w,setFrameIndex:j,setFrameGroup:v,setFrameName:A,saveFrame:function(){F(),s(),l([{hash:(null==e?void 0:e.hash)||"",id:C,name:_}])},cancelEdit:F}},tV=function(e){var t=e.frameIndex,n=e.frameName,r=e.idValid,F=e.groupIdValid,a=e.frameIndexValid,o=e.frameGroup,l=e.groups,u=e.fullId,c=e.frameGroupName,d=e.extraFields,f=e.setFrameGroupName,m=e.setFrameIndex,h=e.setFrameGroup,p=e.setFrameName,v=!!l.find(function(e){return o===e.id});return(0,i.jsxs)(s.default,{direction:"column",gap:4,children:[d,(0,i.jsxs)(em.default,{label:"Frame group",select:!0,size:"small",type:"text",value:o,onChange:function(e){h(e.target.value)},slotProps:{inputLabel:{shrink:!0},select:{renderValue:function(e){var t;return v?(null==(t=l.find(function(t){return t.id===e}))?void 0:t.name)||"Unknown":""===e?"Select frame group":"New frame group"}}},children:[(0,i.jsx)(ed.default,{value:"",children:v?"Select frame group":"New frame group"}),l.map(function(e){var t=e.id,n=e.name;return(0,i.jsx)(ed.default,{value:t,children:n},t)})]}),(0,i.jsx)(em.default,{label:v?"Frame group id":"New frame group id",size:"small",type:"text",value:o,onChange:function(e){h(e.target.value)},helperText:F?void 0:"Must have at least two characters, only lowercase"}),f?(0,i.jsx)(em.default,{label:"New frame group name",size:"small",type:"text",onChange:function(e){f(e.target.value)},value:v?"":c,disabled:v}):null,(0,i.jsx)(em.default,{label:"Frame Index",size:"small",type:"number",slotProps:{htmlInput:{min:1,max:99}},value:t,onChange:function(e){m(parseInt(e.target.value,10))},helperText:a?null:"Integer, must be greater than 0"}),(0,i.jsx)(em.default,{label:"Frame name",size:"small",type:"text",value:n,onChange:function(e){p(e.target.value)}}),!r&&(0,i.jsx)(g.default,{severity:"warning",variant:"filled",children:'Specified frame index/identifier "'.concat(u,'" is already in use, please try another one.')})]})},tW=function(){var e=(0,tk.A)().editFrame,t=(0,eX.h)().frames.find(function(t){return t.id===e}),n=tY(t),r=n.cancelEdit,F=n.saveFrame,a=n.updateId,o=n.fullId,l=n.formValid,s=n.groups,u=n.frameGroup,c=n.frameIndex,d=n.setFrameIndex,f=n.frameName,m=n.setFrameGroup,h=n.setFrameName,p=n.idValid,v=n.groupIdValid,x=n.frameIndexValid,b=a!==o?' -> "'.concat(o,'"'):"";return(0,i.jsx)(ex.A,{confirm:F,canConfirm:l,header:t?'Editing frame "'.concat(a,'"').concat(b):"Error editing '".concat(e,"'"),deny:r,children:t?(0,i.jsx)(tV,{groups:s,fullId:o,frameIndex:c,frameGroup:u,frameName:f,idValid:p,groupIdValid:v,frameIndexValid:x,setFrameIndex:d,setFrameGroup:m,setFrameName:h}):(0,i.jsx)(g.default,{severity:"error",variant:"filled",children:"A frame with the ID '".concat(e,"' does not exist!")})})};var tX=n(31936),tQ=n(23747);let tq=function(){var e=(0,tQ.Ay)(),t=e.editId,n=e.absoluteSlug,r=e.possibleParents,F=e.slug,a=e.title,o=e.canConfirm,l=e.canMove,u=e.slugIsInUse,c=e.slugWasChanged,d=e.parentSlug,f=e.selectionCount,m=e.setSlug,h=e.setTitle,p=e.setParentSlug,g=e.confirm,v=e.move,x=e.cancelEditImageGroup;return(0,i.jsx)(ex.A,{confirm:g,canConfirm:o,header:t!==tQ.Ll?"Editing group ".concat(a?'"'.concat(a,'"'):""):"Create new group with ".concat(f," images"),deny:x,contentWidth:"auto",actionButtons:r.length>1&&t===tQ.Ll&&(0,i.jsx)(D.default,{disabled:!l,onClick:v,variant:"contained",color:"secondary",children:"Move ".concat(f," selected images")}),children:(0,i.jsx)(s.default,{direction:"column",gap:4,children:t&&(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(em.default,{label:"Title",size:"small",type:"text",value:a,onChange:function(e){return h(e.target.value)}}),(0,i.jsx)(em.default,{label:"Pathsegment (identifier)",size:"small",type:"text",value:F,onChange:function(e){return m(e.target.value)},helperText:u?"Path".concat(c?" is already in use":"",': "').concat(n,'"'):'Path: "'.concat(n,'"'),error:!o}),r.length>1&&(0,i.jsx)(em.default,{label:"Parent group",size:"small",select:!0,onChange:function(e){return p(e.target.value)},value:d,children:r.map(function(e){var t=e.value,n=e.name;return(0,i.jsx)(ed.default,{value:t,children:n},t)})}),(0,i.jsx)(tX.A,{text:JSON.stringify({slug:F,parentSlug:d,canConfirm:o,slugIsInUse:u},null,2)})]})})})};var tK=n(63457),tZ=function(e){return/^#[0-9a-fA-F]{6}$/.test(e)};let t$=function(e){var t=e.value,n=e.onChange,r=e.label,F=(0,m._)((0,d.useState)(t),2),a=F[0],o=F[1],l=(0,m._)((0,d.useState)("id-".concat(Math.random().toString(16).split(".")[1])),1)[0];(0,d.useEffect)(function(){o(t)},[t]);var u=(0,d.useRef)(n);return(0,d.useEffect)(function(){u.current=n},[n]),(0,d.useEffect)(function(){var e=setTimeout(function(){tZ(a)&&u.current(a)},125);return function(){clearTimeout(e)}},[a]),(0,i.jsxs)(e4.default,{variant:"outlined",fullWidth:!0,size:"small",color:"tertiary",sx:{"--palette-color":tZ(a)?a:"#000000",".MuiOutlinedInput-notchedOutline":{inset:0},"[type=color]":{height:"100%",width:"100%",opacity:"0",cursor:"pointer"}},children:[(0,i.jsx)(e6.default,{shrink:!0,htmlFor:l,children:r}),(0,i.jsxs)(s.default,{direction:"row",gap:1,sx:{"& > *":{flexBasis:"auto",flexShrink:0,flexGrow:1},"& > *:first-of-type":{flexBasis:"40px",flexShrink:0,flexGrow:0,backgroundColor:"var(--palette-color)"}},children:[(0,i.jsx)(eR.default,{variant:"outlined",children:(0,i.jsx)("input",{type:"color",value:a,onChange:function(e){return o(e.target.value)},tabIndex:-1})}),(0,i.jsx)(tK.default,{id:l,type:"text",value:a,onChange:function(e){return o(e.target.value)},onBlur:function(e){return o(e.target.value.toLowerCase())}})]})]})};var tJ=n(66785),t0=(0,n(85546).A)("hash");let t1=function(){var e=(0,eX.h)().images,t=(0,tD.A)(),n=t.imageSelection,r=t.sortBy,F=t.filtersActiveTags,a=t.recentImports,i=(0,d.useMemo)(function(){return{sortBy:r,filtersActiveTags:F,recentImports:a}},[F,a,r]);return(0,d.useMemo)(function(){var t=n.map(function(t){return e.find(function(e){return e.hash===t})}).reduce(tN.iy,[]),r=t.length>1?[]:(0,tJ.S)(e,i).reduce(tN.iy,[]),F=t.length+r.length>1?[]:(0,J._)(e).map(tM.YZ).sort((0,tM.PM)(i.sortBy)).map(tM.lt).reduce(tN.iy,[]),a=t0([t.shift(),r.shift(),F.shift(),F.pop(),r.pop(),t.pop()].reduce(tN.iy,[]));return[a.shift(),a.pop()].reduce(tN.iy,[])},[i,n,e])};var t2=function(){var e=(0,tk.A)(),t=e.editPalette,n=e.cancelEditPalette,r=(0,eX.h)(),F=r.palettes,a=r.addPalettes,i=(0,tT.g)().updateLastSyncLocalNow,o=(null==t?void 0:t.shortName)||"",l=(null==t?void 0:t.palette)||[],s=(null==t?void 0:t.name)||"",u=(0,d.useCallback)(function(e){return!!e.match(/^[a-z]+[a-z0-9]*$/gi)&&-1===F.findIndex(function(t){return t.shortName===e})},[F]),c=o===tg.mI,f=(0,m._)((0,d.useState)(s),2),h=f[0],p=f[1],g=(0,m._)((0,d.useState)(l),2),v=g[0],x=g[1],b=(0,m._)((0,d.useState)(c?"":o),2),j=b[0],y=b[1],_=(0,d.useMemo)(function(){return(!c||u(j))&&h.length>0},[h,c,j,u]),A=t1(),C=(0,d.useCallback)(function(){a([{shortName:c?j:o,name:h,palette:v,origin:"Made with the webapp",isPredefined:!1}]),i(),n()},[a,c,n,h,j,v,o,i]);return(0,d.useEffect)(function(){var e=function(e){"Enter"===e.key&&e.ctrlKey&&_&&C()};return document.addEventListener("keydown",e),function(){return document.removeEventListener("keydown",e)}}),{canConfirm:_,canEditShortName:c,newName:h,newShortName:j,palette:v,previewImages:A,shortName:o,setNewName:p,setNewShortName:y,setPalette:x,save:C,cancelEditPalette:n}};let t3=function(){var e=t2(),t=e.canConfirm,n=e.canEditShortName,r=e.newName,F=e.newShortName,a=e.palette,o=e.previewImages,l=e.shortName,u=e.setNewName,c=e.setNewShortName,f=e.setPalette,m=e.save,h=e.cancelEditPalette,p=(0,d.useCallback)(function(e){u(e.target.value)},[u]),g=(0,d.useCallback)(function(e){c(e.target.value)},[c]),v=(0,d.useCallback)(function(e){c(e.target.value.toLowerCase())},[c]),x=(0,d.useCallback)(function(e,t){var n=(0,J._)(a);n[e]=t,f(n)},[a,f]);return l?(0,i.jsx)(ex.A,{confirm:m,canConfirm:t,deny:h,header:"Editing palette ".concat(r?'"'.concat(r,'"'):""),closeOnOverlayClick:!1,children:(0,i.jsxs)(s.default,{direction:"column",gap:4,children:[(0,i.jsx)(em.default,{label:"Edit Title",size:"small",type:"text",placeholder:"Add a title",value:r,onChange:p}),(0,i.jsx)(em.default,{label:"ID/Short name",size:"small",type:"text",value:F,disabled:!n,onChange:g,onBlur:v,required:!0}),(0,i.jsx)(s.default,{direction:"row",gap:2,component:"ul",justifyContent:"space-around",children:o.map(function(e){return(0,i.jsx)(eA.default,{component:"li",children:(0,i.jsx)(tS.A,{hash:e.hash,invertPalette:!1,invertFramePalette:!1,lockFrame:!1,palette:a,framePalette:a})},e.hash)})}),a.map(function(e,t){return(0,i.jsx)(t$,{label:"Color ".concat(t+1),value:e,onChange:function(e){return x(t,e)}},"color-".concat(t))})]})}):null};var t5=n(29584),t4=n(7585),t6=n(19690),t7=n(75401),t8=n(41218),t9=n(96490),ne=n(16632),nt=n(70682),nn=n(24103),nr=function(e){switch(e){case"r":return"#ff0000";case"g":return"#00aa00";case"b":return"#0000ff";default:return"#444444"}};let nF=function(e){var t=e.isR,n=e.isG,r=e.isB,F=e.isN,a=e.toggleChannel,o=(0,d.useMemo)(function(){return[{value:t,updateKey:"r"},{value:n,updateKey:"g"},{value:r,updateKey:"b"},{value:F,updateKey:"n"}]},[r,n,F,t]);return(0,i.jsx)(e8.default,{onChange:function(e,t){return a(t)},fullWidth:!0,sx:{".MuiToggleButton-root":{padding:"1px",border:"none"}},children:o.map(function(e){var t=e.value,n=e.updateKey;return(0,i.jsx)(e7.default,{value:n,sx:{"& svg":{color:nr(n)}},children:t?(0,i.jsx)(nt.A,{}):(0,i.jsx)(nn.A,{})},n)})})};var na=n(52491),ni=n.n(na),no=n(95939),nl=n(33782);let ns=function(){var e,t=(0,tD.A)().setImageSelection,r=(0,tT.g)().addImages;return{saveRGBNImage:(0,d.useCallback)((e=(0,e3._)(function(e){var F,a,i;return(0,e5.YH)(this,function(o){switch(o.label){case 0:return[4,Promise.resolve().then(n.t.bind(n,52491,23))];case 1:return F=o.sent().default,a=tr()(),r(i=e.map(function(e,t){return{palette:tF.YP,hashes:e,hash:F(e),created:a.add(t,"milliseconds").format(tF.i$),title:"",tags:[]}})),t(i.map(function(e){return e.hash})),[2]}})}),function(t){return e.apply(this,arguments)}),[r,t])}};var nu=n(80360),nc=function(e){return e.BY_COLOR="BY_COLOR",e.BY_IMAGE="BY_IMAGE",e.MANUAL="MANUAL",e}({}),nd=function(){var e,t,n,r,i=(0,nl.g)().navigateToGroup,o=(0,no.Z)().view,l=ns().saveRGBNImage,s=(0,tD.A)().sortBy,u=(0,tk.A)(),c=u.editRGBNImages,f=u.cancelEditRGBNImages,h=u.cancelEditImageGroup,p=(0,eX.h)(),g=p.addImageGroup,v=p.images,x=(0,m._)((0,d.useState)(c.length>5),2),b=x[0],j=x[1],y=s.split("_")[1],_=(0,d.useMemo)(function(){var e=(0,tJ.S)(v,{filtersActiveTags:[],sortBy:s,recentImports:[]});return"desc"===y&&e.reverse(),e.reduce(tN.iy,[]).reduce(function(e,t){return c.includes(t.hash)?(0,J._)(e).concat([t]):e},[])},[c,y,v,s]),A=(0,m._)((0,d.useState)(["r","g","b","s","n"]),2),C=A[0],I=A[1],E=(0,m._)((0,d.useState)(_.length<=4?"MANUAL":"BY_COLOR"),2),w=E[0],S=E[1],P=(0,m._)((0,d.useState)({r:(null==(t=_[0])?void 0:t.hash)||void 0,g:(null==(n=_[Math.floor(_.length/3)])?void 0:n.hash)||void 0,b:(null==(r=_[2*Math.floor(_.length/3)])?void 0:r.hash)||void 0}),2),T=P[0],k=P[1],D=C.findIndex(function(e){return"s"===e}),B=Math.ceil(c.length/D),N=D*B!==c.length,M=(0,d.useMemo)(function(){if("MANUAL"===w)return Object.keys(T).length?[T]:[];var e=C.slice(0,D),t=Array(B).fill("").map(function(t,n){return e.reduce(function(e,t,r){var i,o=null==(i=_["BY_COLOR"===w?n+B*r:r+D*n])?void 0:i.hash;return o?(0,a._)((0,F._)({},e),(0,et._)({},t,o)):e},{})});return"desc"===y&&t.reverse(),t},[B,y,w,T,C,_,D]),R=(e=(0,e3._)(function(){var e,t,n,r;return(0,e5.YH)(this,function(F){switch(F.label){case 0:return f(),[4,l(M)];case 1:return F.sent(),b&&(e="RGB ".concat(tr()().format(tF.fg)),t=(0,tQ.BF)(e),n=M.map(function(e){return ni()(e)}),h(),g({id:r=(0,nu.z)(),slug:t,title:e,created:tr()(Date.now()).format(tF.i$),coverImage:n[0],images:n,groups:[]},o.id),i(r)),[2]}})}),function(){return e.apply(this,arguments)}),G="MANUAL"===w;return{order:C,grouping:w,canConfirm:G?M.length>0:C.length>1,lengthWarning:!G&&N,rgbnHashes:M,sortedImages:_,createGroup:b,updateOrder:function(e,t){if(!(t<0)&&!(t>C.length)){var n=C.filter(function(t){return t!==e});n.splice(t,0,e).filter(Boolean),I(n)}},toggleSingleChannel:function(e,t){var n=(0,F._)({},T);n[e]===t?delete n[e]:n[e]=t,k(n)},setGrouping:S,save:R,setCreateGroup:j,cancelEditRGBNImages:f}};let nf=function(){var e=nd(),t=e.canConfirm,n=e.order,r=e.grouping,F=e.lengthWarning,a=e.rgbnHashes,o=e.sortedImages,l=e.createGroup,u=e.updateOrder,d=e.toggleSingleChannel,f=e.setGrouping,m=e.setCreateGroup,h=e.save,p=e.cancelEditRGBNImages,v=(0,eG.default)(),x=(0,c.A)(v.breakpoints.up("sm"));return(0,i.jsx)(ex.A,{confirm:h,deny:p,closeOnOverlayClick:!1,canConfirm:t&&!F,header:"Create RGBN images",contentWidth:"576px",children:(0,i.jsxs)(s.default,{direction:"column",gap:4,children:[(0,i.jsxs)(em.default,{label:"Grouping of your selection",select:!0,size:"small",value:r,onChange:function(e){return f(e.target.value)},children:[(0,i.jsx)(ed.default,{value:nc.BY_COLOR,children:"Selection is grouped by colors (RRR GGG BBB)"}),(0,i.jsx)(ed.default,{value:nc.BY_IMAGE,children:"Selection is grouped by image (RGB RGB RGB)"}),(0,i.jsx)(ed.default,{value:nc.MANUAL,children:"Manual channel selection for a single image"})]}),r===nc.MANUAL?(0,i.jsxs)(s.default,{direction:"column",gap:1,children:[(0,i.jsx)(b.default,{variant:"body2",children:"Manually select the channels to create a single RGBN image"}),(0,i.jsx)(s.default,{direction:"row",gap:2,component:"ul",justifyContent:"center",alignItems:"center",flexWrap:"wrap",sx:{"& .MuiCardContent-root":{padding:1}},children:o.map(function(e){var t,n,r,F,o,l,s,u,c=e.hash,f=(null==(o=a[0])?void 0:o.r)===c,m=(null==(l=a[0])?void 0:l.g)===c,h=(null==(s=a[0])?void 0:s.b)===c,p=(null==(u=a[0])?void 0:u.n)===c,g=(t=255*!!f,n=255*!!m,r=255*!!h,F=function(e,t,n,r){var F=function(e,t){return Math.floor(e*t).toString(16).padStart(2,"0")};return"#".concat(F(e,r)).concat(F(t,r)).concat(F(n,r))},f||m||h?[F(t,n,r,1),F(t,n,r,.66),F(t,n,r,.33),"#000000"]:p?["#ffffff","#aaaaaa","#555555","#000000"]:["#b2b2b2","#949494","#737373","#606060"]);return(0,i.jsxs)(t8.default,{className:"edit-rgbn__single-image-list-entry",variant:"outlined",children:[(0,i.jsx)(ne.default,{sx:{".gameboy-image":{width:"80px",margin:"0 auto",imageRendering:"auto"}},children:(0,i.jsx)(tS.A,{lockFrame:!1,invertPalette:!1,invertFramePalette:!1,palette:g,framePalette:g,hash:c})}),(0,i.jsx)(t9.default,{children:(0,i.jsx)(nF,{isR:f,isG:m,isB:h,isN:p,toggleChannel:function(e){return d(e,c)}})})]},c)})})]}):(0,i.jsxs)(s.default,{direction:"column",gap:1,children:[(0,i.jsx)(b.default,{variant:"body2",children:"Select the order of channels to be applied (in the order of images taken). Channels to the right of the separator will not be used."}),(0,i.jsx)(s.default,{direction:{xs:"column",sm:"row"},gap:{xs:1,sm:2},component:"ul",justifyContent:"center",alignItems:"center",children:n.map(function(e,t){return"s"===e?(0,i.jsx)(N.default,{orientation:x?"vertical":"horizontal",variant:"middle",flexItem:!0},e):(0,i.jsxs)(B.default,{component:"li",size:"small",sx:{backgroundColor:nr(e)},children:[(0,i.jsx)(D.default,{onClick:function(){return u(e,t-1)},sx:{svg:{color:"#ffffff"}},children:x?(0,i.jsx)(t4.A,{}):(0,i.jsx)(t7.A,{})}),(0,i.jsx)(D.default,{onClick:function(){return u(e,t+1)},sx:{svg:{color:"#ffffff"}},children:x?(0,i.jsx)(t6.A,{}):(0,i.jsx)(t5.A,{})})]},e)})}),F?(0,i.jsx)(g.default,{variant:"filled",severity:"error",children:"Your distribution of channels and number of selected images does not add up!"}):null]}),(0,i.jsxs)(s.default,{direction:"column",gap:1,children:[(0,i.jsx)(b.default,{variant:"body2",children:"Image preview"}),(0,i.jsx)(s.default,{direction:"row",component:"ul",sx:{overflowX:"auto","& > *":{flex:"160px 0 0",margin:"0 auto"}},gap:1,children:a.map(function(e,t){return(0,i.jsx)(eA.default,{component:"li",children:(0,i.jsx)(tS.A,{lockFrame:!1,invertPalette:!1,invertFramePalette:!1,palette:tF.YP,framePalette:[],hash:"newRGBN",hashes:e})},t)})})]}),(0,i.jsx)(ec.default,{label:"Create group from created images at current location",control:(0,i.jsx)(ef.default,{checked:l,onChange:function(e){m(e.target.checked)}})})]})})};var nm=function(e){return e.ADD="add",e.REMOVE="remove",e}({}),nh=function(){var e=(0,tD.A)(),t=e.filtersActiveTags,n=e.filtersVisible,r=e.setFiltersVisible,F=e.setFiltersActiveTags,a=(0,m._)((0,d.useState)(t),2),i=a[0],o=a[1],l=t_().availableTags;return(0,d.useEffect)(function(){o(t)},[t]),{visible:n,availableTags:l,activeTags:i,updateActiveTags:function(e,t){o("add"===t?(0,tb.A)((0,J._)(i).concat([e])):i.filter(function(t){return t!==e}))},clearTags:function(){return o([])},applyClearTags:function(){return F([])},confirm:function(){return F(i)},cancel:function(){return r(!1)}}};let np=function(e){var t=e.tagActive,n=e.toggleTag,r=e.title;return(0,i.jsx)(tp.default,{label:r,title:"".concat(t?"Remove":"Select",' "').concat(r,'"-tag'),size:"small",onClick:function(){return n(t?nm.REMOVE:nm.ADD)},color:t?"tertiary":"default"})},ng=function(){var e=nh(),t=e.visible,n=e.availableTags,r=e.activeTags,F=e.updateActiveTags,a=e.clearTags,o=e.applyClearTags,l=e.confirm,u=e.cancel;return t?(0,i.jsx)(ex.A,{confirm:l,deny:u,header:"Select Filters",contentWidth:"auto",actionButtons:(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(D.default,{disabled:!r.length,title:"Clear Filters",color:"secondary",variant:"outlined",onClick:a,children:"Clear"}),(0,i.jsx)(D.default,{disabled:!r.length,title:"Clear Filters and apply",color:"secondary",variant:"contained",onClick:o,children:"Clear and apply"})]}),children:(0,i.jsxs)(s.default,{direction:"column",gap:4,children:[(0,i.jsxs)(s.default,{direction:"column",gap:1,children:[(0,i.jsx)(b.default,{component:"span",variant:"body2",children:"If set, all must be met"}),(0,i.jsxs)(s.default,{direction:"row",gap:1,flexWrap:"wrap",alignItems:"center",sx:{".MuiChip-root":{my:"1px"}},children:[(0,i.jsx)(np,{title:"Untagged",tagActive:r.includes(tg.X3.FILTER_UNTAGGED),toggleTag:function(e){return F(tg.X3.FILTER_UNTAGGED,e)}}),(0,i.jsx)(np,{title:"❤️ Favourite",tagActive:r.includes(tg.X3.FILTER_FAVOURITE),toggleTag:function(e){return F(tg.X3.FILTER_FAVOURITE,e)}}),(0,i.jsx)(np,{title:"New",tagActive:r.includes(tg.X3.FILTER_NEW),toggleTag:function(e){return F(tg.X3.FILTER_NEW,e)}}),(0,i.jsx)(np,{title:"Monochrome",tagActive:r.includes(tg.X3.FILTER_MONOCHROME),toggleTag:function(e){return F(tg.X3.FILTER_MONOCHROME,e)}}),(0,i.jsx)(np,{title:"RGB",tagActive:r.includes(tg.X3.FILTER_RGB),toggleTag:function(e){return F(tg.X3.FILTER_RGB,e)}}),(0,i.jsx)(np,{title:"Recent Imports",tagActive:r.includes(tg.X3.FILTER_RECENT),toggleTag:function(e){return F(tg.X3.FILTER_RECENT,e)}}),(0,i.jsx)(np,{title:"Image has comments",tagActive:r.includes(tg.X3.FILTER_COMMENTS),toggleTag:function(e){return F(tg.X3.FILTER_COMMENTS,e)}}),(0,i.jsx)(np,{title:"Image has username",tagActive:r.includes(tg.X3.FILTER_USERNAME),toggleTag:function(e){return F(tg.X3.FILTER_USERNAME,e)}})]})]}),(0,i.jsxs)(s.default,{direction:"column",gap:1,children:[(0,i.jsx)(b.default,{component:"span",variant:"body2",children:"If set, one must be met"}),(0,i.jsx)(s.default,{direction:"row",gap:1,flexWrap:"wrap",alignItems:"center",sx:{".MuiChip-root":{my:"1px"}},children:n.map(function(e){return(0,i.jsx)(np,{title:e,tagActive:r.includes(e),toggleTag:function(t){return F(e,t)}},e)})})]})]})}):null};var nv=n(93370),nx=["FFFF8080BFBFA0A0A0A0A0A0A0A0A0A0","FFFF0000FFFF00000000010103030707","FFFF0000FFFF7F7FFFFFFFFFFFFFFFFF","FFFF0000FFFFFFFFFFFFFFFFFFFFFFFF","FFFF0000FFFFFFFFFFFFFFFFFFFFFFFF","FFFF0000FFFFFFFFFFFFFFFFFFFFFFFF","FFFF0000FFFFFFFFFFFFFFFFFFFFFFFF","FFFF0000FFFFFFFFFFFFFFFFFFFFFFFF","FFFF0000FFFFFFFFFFFFFFFFFFFFFFFF","FFFF0000FFFFFFFFFFFFFFFFFFFFFFFF","FFFF0000FFFFFFFFFFFFFFFFFFFFFFFF","FFFF0000FFFFFFFFFFFFFFFFFFFFFFFF","FFFF0000FFFFFFFFFFFFFFFFFFFFFFFF","FFFF0000FFFFFEFEFFFFFFFFFFFFFFFF","FFFF0000FFFF000000008080C0C0E0E0","FFFF0101FDFD05050505050505050505","A0A0A0A0A0A0A0A0A0A0A1A1A3A3A7A7","070703030101000000008080C0C0E0E0","FFFFFFFFFFFFFFFF7F7F3F3F1F1F0F0F","FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFF","FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFF","FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFF","FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFF","FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFF","FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFF","FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFF","FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFF","FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFF","FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFF","FFFFFFFFFFFFFFFFFEFEFCFCF8F8F0F0","E0E0C0C0808000000000010103030707","050505050505050505058585C5C5E5E5","AFAFBFBFBFBFBFBFBFBFBFBFBFBFBFBF","F0F0F8F8FCFCFEFEFFFFFFFFFFFFFFFF","070703030101000001018383C7C7EFEF","FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFF","FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFF","FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFF","FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFF","FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFF","FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFF","FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFF","FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFF","FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFF","FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFF","E0E0C0C0808000008080C1C1E3E3F7F7","0F0F1F1F3F3F7F7FFFFFFFFFFFFFFFFF","F5F5FDFDFDFDFDFDFDFDFDFDFDFDFDFD","BFBFBFBFBFBFBFBFBFBFBFBFBFBFBFBF","FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFF","FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFF","FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFF","FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFF","FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFF","FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFF","FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFF","FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFF","FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFF","FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFF","FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFF","FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFF","FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFF","FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFF","FDFDFDFDFDFDFDFDFDFDFDFDFDFDFDFD","BFBFBFBFBFBFBFBFBFBFBFBFBFBFBFBF","FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFF","FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFF","FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFF","FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFF","FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFF","FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFF","FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFF","FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFF","FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFF","FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFF","FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFF","FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFF","FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFF","FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFF","FDFDFDFDFDFDFDFDFDFDFDFDFDFDFDFD","BFBFBFBFBFBFBFBFBFBFBFBFBFBFBFBF","FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFF","FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFF","FFFFFFFFFFFFFFFFF0F0F0F0F0F0F0F0","FFFFFFFFFFFFFFFF3F3F3F3F3F3F3F3F","FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFF","FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFF","FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFF","FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFF","FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFF","FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFF","FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFF","FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFF","FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFF","FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFF","FDFDFDFDFDFDFDFDFDFDFDFDFDFDFDFD","BFBFBFBFBFBFBFBFBFBFBFBFBFBFBFBF","FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFF","FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFF","F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0","30303030303030303030303030303030","42214000000040206020602060206020","85C3800101000140C140C140C140C140","FCF0D0E0E0C080C181C1C181C181FEFC","1F0F0307070382038003800380030003","C4828000000004020602060206020602","0F070F070F060E060C060C060C060C06","A1C08000000008040804080400000000","FF7F5F3F3F1F0F1F1F0F1F0F1F0F1F0F","FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFF","FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFF","FDFDFDFDFDFDFDFDFDFDFDFDFDFDFDFD","BFBFBFBFBFBFBFBFBFBFBFBFBFBFBFBF","FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFF","FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFF","F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0","30303030303030303030303030303030","60206020602060206020602060206020","C140C140C140C140C140C140C140C140","E8F0E0C081C080C1C181C18180C180C0","00030003800380038003810381030103","0602060206020602060000008000C482","0C060C060C060C060C060C060E060F06","00000F070C040C040C040C0408040000","1F0FFFFF1F0F1F0F1F0F1F0F0F1F3F1F","FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFF","FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFF","FDFDFDFDFDFDFDFDFDFDFDFDFDFDFDFD","BFBFBFBFBFBFBFBFBFBFBFBFBFBFBFBF","FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFF","FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFF","F0F0F0F0FFFFFFFFFFFFFFFFFFFFFFFF","30303030FFFFFFFFFFFFFFFFFFFFFFFF","60206020FFFFFFFFFFFFFFFFFFFFFFFF","C140C140FFFFFFFFFFFFFFFFFFFFFFFF","C0C0D1E0FFFFFFFFFFFFFFFFFFFFFFFF","01030083FFFFFFFFFFFFFFFFFFFFFFFF","FEFE040200008000A0C0FFFFFFFFFFFF","0F070F07070F0F1F5F3FFFFFFFFFFFFF","8000A0C0FFFFFFFFFFFFFFFFFFFFFFFF","1F3FFF7FFFFFFFFFFFFFFFFFFFFFFFFF","FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFF","FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFF","FDFDFDFDFDFDFDFDFDFDFDFDFDFDFDFD","BFBFBFBFBFBFBFBFBFBFBFBFBFBFBFBF","FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFF","FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFF","FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFF","FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFF","FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFF","FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFF","FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFF","FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFF","FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFF","FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFF","FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFF","FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFF","FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFF","FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFF","FDFDFDFDFDFDFDFDFDFDFDFDFDFDFDFD","BFBFBFBFBFBFBFBFBFBFBFBFBFBFBFBF","FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFF","FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFF","FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFF","FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFF","FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFF","FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFF","FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFF","FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFF","FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFF","FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFF","FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFF","FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFF","FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFF","FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFF","FDFDFDFDFDFDFDFDFDFDFDFDFDFDFDFD","BFBFBFBFBFBFBFBFBFBFBFBFBFBFAFAF","FFFFFFFFFFFFFFFFFEFEFCFCF8F8F0F0","EFEFC7C7838301010000010103030707","FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFF","FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFF","FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFF","FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFF","FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFF","FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFF","FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFF","FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFF","FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFF","FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFF","F7F7E3E3C1C1808000008080C0C0E0E0","FFFFFFFFFFFFFFFF7F7F3F3F1F1F0F0F","FDFDFDFDFDFDFDFDFDFDFDFDFDFDF5F5","A7A7A3A3A1A1A0A0A0A0A0A0A0A0A0A0","E0E0C0C0808000000000010103030707","0F0F1F1F3F3F7F7FFFFFFFFFFFFFFFFF","FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFF","FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFF","FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFF","FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFF","FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFF","FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFF","FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFF","FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFF","FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFF","FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFF","F0F0F8F8FCFCFEFEFFFFFFFFFFFFFFFF","070703030101000000008080C0C0E0E0","E5E5C5C5858505050505050505050505","A0A0A0A0A0A0A0A0A0A0BFBF8080FFFF","07070303010100000000FFFF0000FFFF","FFFFFFFFFFFFFFFF7F7FFFFF0000FFFF","FFFFFFFFFFFFFFFFFFFFFFFF0000FFFF","FFFFFFFFFFFFFFFFFFFFFFFF0000FFFF","FFFFFFFFFFFFFFFFFFFFFFFF0000FFFF","FFFFFFFFFFFFFFFFFFFFFFFF0000FFFF","FFFFFFFFFFFFFFFFFFFFFFFF0000FFFF","FFFFFFFFFFFFFFFFFFFFFFFF0000FFFF","FFFFFFFFFFFFFFFFFFFFFFFF0000FFFF","FFFFFFFFFFFFFFFFFFFFFFFF0000FFFF","FFFFFFFFFFFFFFFFFFFFFFFF0000FFFF","FFFFFFFFFFFFFFFFFFFFFFFF0000FFFF","FFFFFFFFFFFFFFFFFEFEFFFF0000FFFF","E0E0C0C0808000000000FFFF0000FFFF","05050505050505050505FDFD0101FFFF"];let nb=function(e){var t,n=e.tiles,r=e.startLine,F=e.setStartLine,a=(0,W.A)().activePalette,o=null==(t=(0,eX.h)().palettes.find(function(e){return e.shortName===a}))?void 0:t.palette,l=(0,d.useMemo)(function(){var e=[];e.push.apply(e,(0,J._)(n.slice(0,20*r)));for(var t=0;t<14;t+=1){var F=(t+r)*20,a=F+18,i=16*t;e.push.apply(e,(0,J._)(n.slice(F,F+2)).concat((0,J._)(nx.slice(i,i+16)),(0,J._)(n.slice(a,a+2))))}return e.push.apply(e,(0,J._)(n.slice((r+14)*20))),e},[n,r]);return(0,i.jsxs)(s.default,{direction:"row",gap:3,justifyContent:"center",children:[(0,i.jsx)(nv.A,{tiles:l,palette:o,imageStartLine:r}),(0,i.jsx)(s.default,{direction:"column",justifyContent:"center",children:(0,i.jsxs)(B.default,{orientation:"vertical",variant:"contained",size:"large",color:"tertiary",fullWidth:!0,children:[(0,i.jsx)(D.default,{onClick:function(){return F(r-1)},disabled:r<=0,endIcon:(0,i.jsx)(t7.A,{}),children:"Move image up"}),(0,i.jsx)(D.default,{onClick:function(){return F(r+1)},disabled:r>=n.length/20-14,endIcon:(0,i.jsx)(t5.A,{}),children:"Move image down"})]})})]})};var nj=n(53982);let ny=function(){var e=(0,ek.A)().dismissDialog,t=(0,ej.A)(),n=t.frameQueue,r=t.frameQueueCancelOne,F=t.importQueueCancelOne,a=(0,tT.g)().updateLastSyncLocalNow,o=(0,eX.h)(),l=o.addFrames,s=o.updateFrameGroups,u=n[0],c=(0,m._)((0,d.useState)(""),2),f=c[0],h=c[1],p=(0,m._)((0,d.useState)(Math.floor((u.tiles.length-280)/40)),2),g=p[0],v=p[1],x=tY({id:"",hash:"",name:u.fileName}),b=x.fullId,j=x.formValid,y=x.groups,_=x.frameGroup,A=x.frameIndex,C=x.setFrameIndex,I=x.frameName,E=x.setFrameGroup,w=x.setFrameName,S=x.idValid,P=x.groupIdValid,T=x.frameIndexValid;return(0,i.jsx)(ex.A,{header:'Import new Frame as "'.concat(b,'"'),canConfirm:j,confirm:(0,e3._)(function(){var t;return(0,e5.YH)(this,function(n){switch(n.label){case 0:return[4,(0,nj.R_)(u.tiles,g)];case 1:return t=n.sent(),e(0),u.tempId&&(F(u.tempId),r(u.tempId)),l([{id:b,name:I,hash:t}]),(null==f?void 0:f.trim())&&s([{id:_,name:f}]),a(),[2]}})}),deny:function(){return r(u.tempId)},children:(0,i.jsx)(tV,{frameIndex:A,setFrameGroup:E,frameName:I,frameGroup:_,setFrameName:w,groupIdValid:P,idValid:S,frameIndexValid:T,setFrameIndex:C,groups:y,fullId:b,frameGroupName:f,setFrameGroupName:h,extraFields:(0,i.jsx)(nb,{tiles:u.tiles,startLine:g,setStartLine:v})})})};var n_=n(58617),nA=n.n(n_),nC="FF FF FF FF FF FF FF FF FF FF FF FF FF FF FF FF";let nI=function(e){for(;e.length%20;)e.push(nC);for(var t=Array(20).fill(nC);e.length<360;)e.push.apply(e,(0,J._)(t)),e.length<360&&e.unshift.apply(e,(0,J._)(t));return e};var nE=n(72623),nw=function(){var e=(0,e3._)(function(e){var t,n,r,F,a,i,o,l,s;return(0,e5.YH)(this,function(u){switch(u.label){case 0:return t=e.lines,n=e.filename,r=e.palette,F=e.frame,i=void 0===(a=e.tags)?[]:a,o=e.meta,s=void 0===(l=e.created)?tr()().format(tF.i$):l,[4,(0,nE.UN)(t)];case 1:return[2,{hash:u.sent(),created:s,title:n||"",lines:t.length,tags:i,palette:r,framePalette:r,invertFramePalette:!1,invertPalette:!1,frame:F,meta:o}]}})});return function(t){return e.apply(this,arguments)}}(),nS=n(87031),nP=(0,nS.A)("fileName");let nT=function(){var e,t=(0,W.A)(),n=t.importPad,r=t.setActivePalette,F=t.activePalette,a=(0,tk.A)().cancelEditImageGroup,i=(0,eX.h)().addImageGroup,o=(0,tD.A)().setImageSelection,l=(0,tT.g)(),s=l.addImages,u=l.importQueueCancel,c=new(nA())(1,1/0),f=(0,no.Z)().view,h=(0,nl.g)().navigateToGroup,p=(0,ej.A)().importQueue,g=(0,m._)((0,d.useState)(""),2),v=g[0],x=g[1],b=(0,m._)((0,d.useState)(p.length>3),2),j=b[0],y=b[1],_=(0,m._)((0,d.useState)({initial:[],add:[],remove:[]}),2),A=_[0],C=_[1],I=(e=(0,e3._)(function(){var e,t,r,l,u;return(0,e5.YH)(this,function(d){switch(d.label){case 0:return[4,Promise.all(nP(p).map(function(e,t){var r=e.tiles,a=e.fileName,i=e.meta,o=e.lastModified;return c.add(function(){return nw({lines:n?nI(r):r,filename:a,palette:F,frame:v,tags:A.add,created:tr()((o||Date.now())+t).format(tF.i$),meta:i})})}))];case 1:return t=(e=d.sent()).map(function(e){return e.hash}),s(e),j&&(r="Import ".concat(tr()().format(tF.fg)),l=(0,tQ.BF)(r),a(),i({id:u=(0,nu.z)(),slug:l,title:r,created:tr()(Date.now()).format(tF.i$),coverImage:e[0].hash,images:t,groups:[]},f.id),h(u)),o(t),[2]}})}),function(){return e.apply(this,arguments)});return{importQueue:p,importPad:n,palette:F,frame:v,tagChanges:A,createGroup:j,updateTagChanges:C,resetTagChanges:function(){C(function(e){return{initial:e.initial,add:[],remove:[]}})},setFrame:x,setCreateGroup:y,runImport:I,cancelImport:u,setActivePalette:r}};var nk=n(52466),nD=n(49967);let nB=function(e){var t=e.importItem,n=e.paletteShort,r=t.tiles,o=t.fileName,l=t.lastModified,u=t.imageHash,c=t.tempId,f=(0,eX.h)(),m=f.palettes,h=f.images,p=m.find(function(e){return e.shortName===n}),g=h.find(function(e){return e.hash===u}),v=(0,ej.A)().importQueue.filter(function(e){return e.imageHash===u}).length,j=(0,W.A)().preferredLocale,y=(0,ej.A)(),_=y.frameQueueAdd,A=y.importQueueCancelOne,I=(0,d.useMemo)(function(){return v>1?{color:"error",title:"This image exists multiple times within this queue",badgeContent:"D"}:g?{color:"warning",title:"This image has already been imported".concat(g.title?' as "'.concat(g.title,'"'):""),badgeContent:"I"}:{}},[v,g]);return(0,i.jsxs)(s.default,{direction:"row",gap:2,alignItems:"center",justifyContent:"space-between",component:"li",sx:{"--zoom-image-top":0,"--zoom-image-left":0,"--zoom-image-width":"60px","--zoom-image-z-index":"initial","& > *":{flexGrow:1}},children:[(0,i.jsxs)(s.default,{direction:"row",gap:2,alignItems:"center",justifyContent:"left",children:[(0,i.jsx)(eA.default,{sx:{height:"".concat(r.length/2.5/2.66,"px"),flex:"60px 0 0",position:"relative","& > *":{top:"var(--zoom-image-top)",left:"var(--zoom-image-left)",width:"var(--zoom-image-width)",zIndex:"var(--zoom-image-z-index)",transition:"width 150ms ease-in-out, left 150ms ease-in-out, top 150ms ease-in-out",position:"absolute",outline:"none","@media (any-hover: none)":{"&:focus":{"--zoom-image-top":-12,"--zoom-image-left":-12,"--zoom-image-width":"160px","--zoom-image-z-index":2}}},"@media (any-hover: hover)":{"& > *":{pointerEvents:"none"},"&:hover":{"--zoom-image-top":-12,"--zoom-image-left":-12,"--zoom-image-width":"160px","--zoom-image-z-index":2}}},children:(0,i.jsx)(eA.default,{tabIndex:window.matchMedia("(any-hover: none)").matches?0:void 0,children:(0,i.jsx)(nv.A,{tiles:r,invertPalette:!1,lockFrame:!1,palette:null==p?void 0:p.palette,imageStartLine:2,asThumb:!0})})}),(0,i.jsxs)(eA.default,{children:[(0,i.jsx)(b.default,{variant:"caption",component:"p",children:o}),l&&l>0&&(0,i.jsx)(b.default,{variant:"caption",component:"p",children:(0,nD.A)(tr()(l),j)})]})]}),(0,i.jsx)(s.default,{direction:"row",gap:2,alignItems:"center",justifyContent:"right",children:(0,i.jsx)(eA.default,{children:(0,i.jsxs)(B.default,{children:[(0,i.jsx)(x.default,{title:"Import image as frame",disabled:r.length/20<14,onClick:function(){return _([t])},children:(0,i.jsx)(nk.A,{})}),(0,i.jsx)(k.default,(0,a._)((0,F._)({},I),{anchorOrigin:{vertical:"bottom",horizontal:"right"},overlap:"circular",children:(0,i.jsx)(x.default,{title:"Remove image from queue",onClick:function(){return A(c)},children:(0,i.jsx)(C.A,{})})}))]})})})]})},nN=function(){var e=nT(),t=e.frame,n=e.palette,r=e.importQueue,a=e.tagChanges,o=e.createGroup,l=e.setFrame,u=e.setActivePalette,c=e.setCreateGroup,d=e.updateTagChanges,f=e.resetTagChanges,m=e.runImport,h=e.cancelImport;return(0,i.jsx)(ex.A,{header:"Image Import (".concat(r.length," images)"),confirm:m,deny:h,children:(0,i.jsxs)(s.default,{direction:"column",gap:4,children:[(0,i.jsx)(s.default,{direction:"column",component:"ul",gap:1,children:r.map(function(e){return(0,i.jsx)(nB,{paletteShort:n,importItem:e},e.tempId)})}),(0,i.jsx)(tc,{noFancy:!0,value:n,onChange:u}),(0,i.jsx)(eq,{selectLabel:"Modify Frame",frame:t,lockFrame:!1,noFrameOption:"No frame / import as is",updateFrame:l}),(0,i.jsx)(tC,{tags:a,resetTags:f,updateTags:function(e,t){d((0,F._)({},a,tx(a,{mode:e,tag:t})))}}),(0,i.jsx)(ec.default,{label:"Create group from images at current location",control:(0,i.jsx)(ef.default,{checked:o,onChange:function(e){c(e.target.checked)}})})]})})};var nM=n(66027),nR=n(27371),nG=n(9779),nL=n(18335),nO=n(86964),nz=function(e,t){var n,r=[];if(!(null==e?void 0:e.hash))return null;var F=(0,nL.s)(t,e),a=F.palette,i=F.framePalette;if(!a)throw Error("Palette missing?");var o=(0,nO.f)(e),l=o.invertPalette,s=o.invertFramePalette;return(0,tN.pl)(e)?n=a:(n=(a||tF.Fv).palette,r=(i||tF.Fv).palette),{title:(null==e?void 0:e.title)||"",created:(null==e?void 0:e.created)||"",frame:e.frame,hash:e.hash,hashes:e.hashes||void 0,tags:e.tags,palette:n,framePalette:r,lockFrame:e.lockFrame,invertPalette:l,invertFramePalette:s,rotation:e.rotation}},nU=function(){var e=(0,tD.A)(),t=(0,no.Z)(),n=t.view,r=t.covers,F=(0,f.A)(),a=F.isFullscreen,i=F.setLightboxImage,o=F.setLightboxImagePrev,l=F.setLightboxImageNext,s=F.setIsFullscreen,u=F.lightboxImage,c=(0,W.A)().preferredLocale,m=(0,eX.h)().palettes,h=(0,tJ.S)(n.images,e),p=(0,d.useMemo)(function(){return h.filter(function(e){var t=e.hash;return!r.includes(t)})},[r,h]),g=null!==u?nz(p[u],m):null;return(0,d.useEffect)(function(){var e=function(){s(!!nG.A.element)},t=function(e){switch(e.key){case"Esc":case"Escape":close(),e.preventDefault();break;case"Right":case"ArrowRight":case"d":l(p.length),e.preventDefault();break;case"Left":case"ArrowLeft":case"a":o(),e.preventDefault();break;case"Home":i(0),e.preventDefault();break;case"End":i(p.length-1),e.preventDefault()}};return document.addEventListener("keydown",t),nG.A.isEnabled&&nG.A.on("change",e),function(){document.removeEventListener("keydown",t),nG.A.off("change",e)}}),{image:g,isFullscreen:a,currentIndex:u||0,size:p.length,canPrev:null!==u&&u>0,canNext:null!==u&&u<p.length-1,preferredLocale:c,close:function(){return i(null)},prev:function(){return o()},next:function(){return l(p.length)},fullscreen:function(){nG.A.isEnabled&&(nG.A.element?nG.A.exit():nG.A.request(document.body))}}};let nH=function(){var e=nU(),t=e.image,n=e.isFullscreen,r=e.currentIndex,F=e.size,a=e.preferredLocale,o=e.canPrev,l=e.canNext,u=e.prev,c=e.next,d=e.fullscreen,f=e.close;return(0,i.jsx)(ex.A,{header:null==t?void 0:t.title,deny:f,contentWidth:"100%",contentHeight:"100%",fullSize:!0,headerActionButtons:(0,i.jsx)(x.default,{color:"inherit",onClick:d,title:n?"Leave fullscreen":"Enter fullscreen",children:n?(0,i.jsx)(nR.A,{}):(0,i.jsx)(nM.A,{})}),children:(0,i.jsxs)(s.default,{direction:"column",gap:2,sx:{width:"100%",height:"100%"},children:[(0,i.jsxs)(s.default,{direction:"row",gap:1,alignItems:"center",justifyContent:"center",sx:{height:"100%",overflow:"hidden",position:"relative","& > .MuiBox-root":{flexGrow:1}},children:[(0,i.jsx)(x.default,{size:"large",onClick:u,disabled:!o,children:(0,i.jsx)(t4.A,{})}),t&&(0,i.jsx)(eA.default,{sx:{width:"100%",height:"100%",flexBasis:"100%",flexGrow:1},children:(0,i.jsx)(tS.A,{lockFrame:t.lockFrame,invertPalette:t.invertPalette,invertFramePalette:t.invertFramePalette,palette:t.palette,framePalette:t.framePalette,frameId:t.frame,hash:t.hash,hashes:t.hashes,rotation:t.rotation})}),(0,i.jsx)(x.default,{size:"large",onClick:c,disabled:!l,children:(0,i.jsx)(t6.A,{})})]}),(0,i.jsxs)(s.default,{direction:"row",gap:{xs:4,md:12},alignItems:"center",justifyContent:"center",children:[(0,i.jsx)(b.default,{variant:"body2",children:"Image ".concat(r+1,"/").concat(F)}),(0,i.jsx)(b.default,{variant:"body2",children:(0,nD.A)(tr()(null==t?void 0:t.created,tF.i$),a)})]})]})})};var nY=n(74802),nV=n(13338),nW=n(62412);let nX=function(){var e=(0,tk.A)(),t=e.pickColors,n=e.setEditPalette,r=e.cancelEditPalette,F=e.cancelPickColors,a=(0,m._)((0,d.useState)([0,3,6,9]),2),o=a[0],l=a[1],u=t1(),c=(0,d.useMemo)(function(){return t?[,,,,].fill(null).map(function(e,n){var r=o[n],F=t.colors[r];return F?(0,nW.E)(F):"#000000"}):[]},[t,o]);return t?(0,i.jsx)(ex.A,{confirm:function(){n({name:"From file ".concat(t.fileName),shortName:tg.mI,palette:c,origin:"generated from file",isPredefined:!1})},canConfirm:4===o.length,deny:function(){F(),r()},header:'Pick colors from "'.concat(t.fileName,'"'),contentWidth:"auto",children:(0,i.jsxs)(s.default,{direction:"column",gap:4,children:[(0,i.jsx)(s.default,{direction:"row",gap:2,component:"ul",justifyContent:"space-around",children:u.map(function(e){return(0,i.jsx)(eA.default,{component:"li",children:(0,i.jsx)(tS.A,{hash:e.hash,invertPalette:!1,invertFramePalette:!1,lockFrame:!1,palette:c,framePalette:c})},e.hash)})}),(0,i.jsx)(e8.default,{value:o,onChange:function(e,t){return l((0,J._)(t).sort())},sx:{display:"flex",justifyContent:"space-around",gap:0},children:t.colors.map(function(e,t){return(0,i.jsx)(e7.default,{value:t,sx:{"--palette-color":"rgb(".concat(e.join(","),")"),color:"var(--palette-color)",borderRadius:0,width:48,height:48,padding:0,border:"none","&&.Mui-selected":{border:"none",background:"none",color:"var(--palette-color)"},"& > svg":{width:"inherit",height:"inherit"}},children:o.includes(t)?(0,i.jsx)(nY.A,{}):(0,i.jsx)(nV.A,{})},t)})}),(0,i.jsx)(s.default,{direction:"row",gap:0,sx:{"& > .MuiBox-root":{height:"32px",flexGrow:1}},children:c.map(function(e,t){return(0,i.jsx)(eA.default,{title:e,sx:{backgroundColor:e}},t)})})]})}):null};var nQ=n(77262),nq=function(){var e=(0,f.A)().progress;return e.gif?{progress:e.gif,message:"Creating GIF animation..."}:e.plugin?{progress:e.plugin,message:"Executing plugin..."}:e.printer?{progress:e.printer,message:"Fetching images from printer..."}:{progress:0,message:""}};let nK=function(){var e=nq(),t=e.message,n=e.progress;return n>0&&(0,i.jsx)(ex.A,{header:t,children:(0,i.jsx)(nQ.default,{variant:"determinate",value:100*n,color:"secondary"})})};var nZ=n(68893),n$=n(8963),nJ=n.n(n$),n0=function(){var e=(0,f.A)(),t=e.progressLog,n=e.resetProgressLog,r=(0,X.A)(),F=r.gitStorage,a=r.dropboxStorage;return{git:{messages:t.git||[],repoUrl:"https://github.com/".concat(F.owner,"/").concat(F.repo,"/tree/").concat(F.branch),repo:F.repo,branch:F.branch},dropbox:{messages:t.dropbox||[],path:a.path||""},confirm:n}};tr().extend(nJ());let n1=function(){var e=n0(),t=e.git,n=t.messages,r=t.repoUrl,F=t.repo,a=t.branch,o=e.dropbox,l=o.messages,u=o.path,c=e.confirm,f=(0,m._)((0,d.useState)(!0),2),h=f[0],p=f[1],g=n.length>0,v=l.length>0,x=(n[n.length-1]||{}).timestamp,j=n[0]||{},y=j.timestamp,_=j.message,A=(l[l.length-1]||{}).timestamp,C=l[0]||{},I=C.timestamp,E=C.message,w="."===_||"."===E,S=g?x:A,P=g?y:I,T=(0,d.useMemo)(function(){return(0,J._)(n).concat((0,J._)(l)).filter(function(e){return"."!==e.message})},[l,n]),k=(0,d.useMemo)(function(){return T.filter(function(e,t){return!h||t<15})},[h,T]);return n.length||l.length?(0,i.jsx)(ex.A,{header:"".concat(w?"✔️ Update done":"⏳ Updating..."," ").concat(g?' - "'.concat(F,"/").concat(a,'"'):""),confirm:w?c:void 0,children:(0,i.jsxs)(s.default,{direction:"column",gap:2,children:[(0,i.jsx)(eA.default,{component:"ul",sx:{overflowX:"hidden",overflowY:"auto",maxHeight:"30vh","& > .MuiTypography-root":{whiteSpace:"nowrap"}},children:k.map(function(e,t){var n=e.message,r=e.timestamp;return(0,i.jsx)(b.default,{variant:"caption",component:"li",title:tr().unix(r).format("HH:mm:ss"),children:n},t)})}),T.length>15&&(0,i.jsx)(D.default,{variant:"outlined",color:"secondary",onClick:function(){return p(!h)},endIcon:h?(0,i.jsx)(t5.A,{}):(0,i.jsx)(t7.A,{}),children:h?"Show all ".concat(T.length," messages"):"Reduce messages"}),(0,i.jsxs)(s.default,{direction:"column",gap:0,children:[(0,i.jsx)(b.default,{variant:"caption",children:"Started at: ".concat(tr().unix(S).format("HH:mm:ss"))}),(0,i.jsx)(b.default,{variant:"caption",children:"".concat(w?"Finished after":"Running for",": ").concat(tr().duration(P-S,"seconds").format("HH:mm:ss"))})]}),g&&(0,i.jsx)(D.default,{variant:"outlined",component:"a",color:"secondary",startIcon:(0,i.jsx)(nZ.A,{}),title:r,href:r,target:"_blank",rel:"noreferrer",children:"Open GitHub Repository"}),v&&(0,i.jsx)(D.default,{variant:"outlined",component:"a",color:"secondary",title:"Open Dropbox folder:\nhttps://www.dropbox.com/home/Apps/GameBoyPrinter/".concat(u),href:"https://www.dropbox.com/home/Apps/GameBoyPrinter/".concat(u),target:"_blank",rel:"noreferrer",children:"Open Dropbox folder"})]})}):null};var n2=function(){var e=(0,tD.A)(),t=e.setSortBy,n=e.setSortOptionsVisible,r=e.sortOptionsVisible,F=e.sortBy,a=(0,m._)(F.split("_"),2),i=a[0],o=a[1];return{visible:r,sortBy:void 0===i?"":i,sortOrder:void 0===o?"":o,setSortBy:t,hideSortForm:function(){return n(!1)}}},n3=[{title:"Title",key:"title"},{title:"Date",key:"created"},{title:"Palette",key:"palette"}];let n5=function(){var e=n2(),t=e.visible,n=e.sortBy,r=e.sortOrder,F=e.setSortBy,a=e.hideSortForm,o=(0,m._)((0,d.useState)(n),2),l=o[0],u=o[1],c=(0,m._)((0,d.useState)(r),2),f=c[0],h=c[1];if((0,d.useEffect)(function(){u(n),h(r)},[u,h,t,n,r]),!t)return null;var p=n3.find(function(e){return e.key===l})||n3[0],g=f===nS.U.ASC?"Ascending":"Descending";return(0,i.jsx)(ex.A,{header:"Sort by: ".concat(p.title,"/").concat(g),confirm:function(){return F("".concat(l,"_").concat(f))},deny:a,children:(0,i.jsxs)(s.default,{direction:"column",gap:4,children:[(0,i.jsx)(em.default,{label:"Sort by",size:"small",select:!0,value:l,onChange:function(e){return u(e.target.value)},children:n3.map(function(e){var t=e.key,n=e.title;return(0,i.jsx)(ed.default,{value:t,children:n},t)})}),(0,i.jsxs)(em.default,{label:"Sort direction",size:"small",select:!0,value:f,onChange:function(e){return h(e.target.value)},children:[(0,i.jsx)(ed.default,{value:nS.U.ASC,children:"Ascending"}),(0,i.jsx)(ed.default,{value:nS.U.DESC,children:"Descending"})]})]})})};var n4=n(39487),n6=n(83936),n7=n(933),n8=function(e){var t,F,a,i,o,l,s,u,c,d=(t=(0,e3._)(function(){var t,F,a;return(0,e5.YH)(this,function(i){switch(i.label){case 0:if(r)return[3,2];return[4,Promise.all([n.e(9268),n.e(5678),n.e(1753),n.e(1575)]).then(n.bind(n,10630))];case 1:F=(t=i.sent()).init,a=t.gitSyncTool,F(),r=r||a(e),i.label=2;case 2:return[2,r]}})}),function(){return t.apply(this,arguments)});return a=(F=X.A.getState().gitStorage).use,i=F.owner,o=F.repo,l=F.branch,s=F.token,a&&i&&o&&l&&s&&d(),{startSyncData:(u=(0,e3._)(function(e){return(0,e5.YH)(this,function(t){switch(t.label){case 0:return[4,d()];case 1:return[2,t.sent().startSyncData(e)]}})}),function(e){return u.apply(this,arguments)}),updateSettings:(c=(0,e3._)(function(e){return(0,e5.YH)(this,function(t){switch(t.label){case 0:return[4,d()];case 1:return[2,t.sent().updateSettings(e)]}})}),function(e){return c.apply(this,arguments)})}},n9=function(){var e=(0,tT.g)(),t=(0,n6.W)().remoteImport,n=(0,f.A)().setSyncSelect,r=(0,X.A)(),F=r.gitStorage,a=r.dropboxStorage,i=r.syncLastUpdate;return{repoUrl:"https://github.com/".concat(F.owner,"/").concat(F.repo,"/tree/").concat(F.branch),dropboxActive:!!(a.use&&a.accessToken),gitActive:!!(F.use&&F.owner&&F.repo&&F.branch&&F.throttle&&F.token),autoDropboxSync:a.autoDropboxSync||!1,syncLastUpdate:i,startSync:function(n,r){if("dropbox"===n)(0,n7.E)(e,t).startSyncData(r);else if("dropboximages"===n)(0,n7.E)(e,t).startSyncImages();else{if("diff"===r)throw Error("diff is invalid direction for github sync");n8(t).startSyncData(r)}},cancelSync:function(){return n(!1)}}},re=function(e,t){return e&&t?"error":"secondary"};let rt=function(){var e=n9(),t=e.repoUrl,n=e.dropboxActive,r=e.gitActive,F=e.syncLastUpdate,a=e.autoDropboxSync,o=e.startSync,l=e.cancelSync,u=a&&F.local!==F.dropbox;return(0,i.jsx)(ex.A,{deny:l,header:"Synchronize",children:(0,i.jsxs)(s.default,{direction:"column",gap:4,sx:{"& .MuiButton-endIcon svg":{fontSize:32}},children:[r&&(0,i.jsxs)(s.default,{direction:"column",gap:2,children:[(0,i.jsx)(D.default,{variant:"contained",color:"secondary",startIcon:(0,i.jsx)(nZ.A,{}),endIcon:(0,i.jsx)(eM.A,{}),title:"Synchronize to GitHub\n".concat(t),onClick:function(){o("git","up")},children:"Synchronize to GitHub"}),(0,i.jsx)(D.default,{variant:"contained",color:"secondary",startIcon:(0,i.jsx)(nZ.A,{}),endIcon:(0,i.jsx)(n4.A,{}),title:"Synchronize from GitHub\n".concat(t),onClick:function(){o("git","down")},children:"Synchronize from GitHub"})]}),n&&(0,i.jsxs)(s.default,{direction:"column",gap:2,children:[(0,i.jsxs)(s.default,{direction:"column",gap:1,children:[(0,i.jsx)(D.default,{variant:"contained",color:re(u,F.local<F.dropbox),endIcon:(0,i.jsx)(eM.A,{}),title:"Synchronize to Dropbox",onClick:function(){o("dropbox","up")},children:"Synchronize to Dropbox"}),u&&F.local<F.dropbox&&(0,i.jsx)(b.default,{variant:"caption",children:"There are pending remote changes. If you synchronize to dropbox now, these will be lost."})]}),(0,i.jsxs)(s.default,{direction:"column",gap:1,children:[(0,i.jsx)(D.default,{variant:"contained",color:re(u,F.local>F.dropbox),endIcon:(0,i.jsx)(n4.A,{}),title:"Synchronize from Dropbox",onClick:function(){o("dropbox","down")},children:"Synchronize from Dropbox"}),u&&F.local>F.dropbox&&(0,i.jsx)(b.default,{variant:"caption",children:"There are local changes not synched to dropbox yet. If you synchronize from dropbox now, these will be lost."})]}),(0,i.jsx)(D.default,{variant:"contained",color:"secondary",endIcon:(0,i.jsx)(eM.A,{}),title:"Synchronize images to Dropbox",onClick:function(){o("dropboximages","up")},children:"Synchronize images to Dropbox"})]})]})})};var rn=n(47457);let rr=function(){var e=(0,rn.A)(),t=e.showTrashCount,n=e.purgeTrash,r=e.downloadImages,F=e.downloadFrames,a=e.trashCount,o=a.frames+a.images;return(0,i.jsx)(ex.A,{deny:function(){t(!1)},header:"Trash (".concat(o," items)"),contentWidth:"auto",actionButtons:(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(D.default,{variant:"contained",color:"secondary",title:"Download deleted frames",disabled:0===a.frames,onClick:F,children:"Download frames"}),(0,i.jsx)(D.default,{variant:"contained",color:"secondary",title:"Download deleted images",disabled:0===a.images,onClick:r,children:"Download images"}),(0,i.jsx)(D.default,{variant:"contained",color:"error",title:"Purge all",disabled:0===o,onClick:n,children:"Purge all (".concat(o,")")})]}),children:(0,i.jsxs)(s.default,{direction:"column",gap:2,children:[(0,i.jsx)(b.default,{variant:"body2",children:"Deleted frames: ".concat(a.frames)}),(0,i.jsx)(b.default,{variant:"body2",children:"Deleted images: ".concat(a.images)})]})})};var rF=n(81543),ra=n(3899),ri=n.n(ra),ro=n(91540),rl=n(89222),rs=n(28952),ru=n(77683),rc=function(e){return{scaleFactor:e.scaleFactor||4,frameRate:e.frameRate||12,yoyo:e.yoyo||!1,reverse:e.reverse||!1,frame:e.frame||"",lockFrame:e.lockFrame||!1,invertPalette:e.invertPalette||!1,palette:e.palette||"",exportFrameMode:e.exportFrameMode||e0.H.FRAMEMODE_KEEP}},rd=function(){var e=(0,e3._)(function(){var e,t,n,r,i,o,l,s,u,c,d,h,p,g,v,x,b,j,y,_,A,C,I,E,w,S,P,T,k,D,B,N,M,R;return(0,e5.YH)(this,function(G){var L,O,z,U;switch(G.label){case 0:if(t=(e=f.A.getState()).setProgress,n=e.setError,r=e.videoSelection,o=(i=eX.h.getState()).frames,l=i.palettes,s=i.images,c=(u=W.A.getState()).videoParams,d=u.fileNameStyle,t("gif",.01),p=(h=rc(c)).scaleFactor,g=h.frameRate,v=h.yoyo,x=h.reverse,b=h.frame,j=h.lockFrame,y=h.invertPalette,_=h.palette,A=h.exportFrameMode,!r.length)return[2];return I=(C=r.map(function(e){return s.find(function(t){return t.hash===e})}).reduce(el.N,[])).reduce(function(e,t){if(!t)return e;var n=(0,tN.pl)(t)?(0,a._)((0,F._)({},t),{frame:b||t.frame}):(0,a._)((0,F._)({},t),{palette:_||t.palette});return(0,J._)(e).concat([n])},[]),E=(0,tL.T)(C,o),[4,Promise.all(I.map((L=(0,e3._)(function(e){var t,n,r,i,s,u,c,d,f,m,h,g,v,x,b,_,C,I,w;return(0,e5.YH)(this,function(S){switch(S.label){case 0:return[4,E(e.hash)];case 1:if(t=S.sent(),n=j||e.lockFrame||!1,r=e.rotation||0,s=(i=(0,nL.s)(l,(0,a._)((0,F._)({},e),{lockFrame:n}))).palette,u=i.framePalette,!(c=o.find(function(t){return t.id===e.frame})))return[3,3];return[4,(0,nj.mZ)(c.hash)];case 2:return f=S.sent(),[3,4];case 3:f=null,S.label=4;case 4:if(m=(d=f)?d.upper.length/20:2,!t||!s)throw Error("missing tiles or palette");if(!(0,tN.pl)(e))return[3,6];return[4,(0,e0.y1)({tiles:t,palette:s,lockFrame:n,imageStartLine:m,rotation:r,scaleFactor:p,handleExportFrame:A},"image/png")];case 5:return h=S.sent(),[3,8];case 6:return g=(null==s?void 0:s.palette)||e0.CU,v=(null==u?void 0:u.palette)||e0.CU,b=(x=(0,nO.f)(e)).invertPalette,_=x.invertFramePalette,C=(0,ru.C)({imagePalette:g,invertPalette:y||b,framePalette:n?v:g,invertFramePalette:y||_}),[4,(0,e0.Yn)((0,F._)({tiles:t,imageStartLine:m,rotation:r,scaleFactor:p,handleExportFrame:A},C),"image/png")];case 7:h=S.sent(),S.label=8;case 8:return[4,createImageBitmap(h)];case 9:return I=S.sent(),(w=document.createElement("canvas")).width=I.width,w.height=I.height,w.getContext("2d").drawImage(I,0,0),[2,w]}})}),function(e){return L.apply(this,arguments)})))];case 1:if(w=G.sent(),1!==(0,tb.A)(w.map(function(e){return"".concat(e.width,"*").concat(e.height)})).length)return t("gif",0),n(Error("All images need to have same dimensions")),[2];return S=[],P=new(nA())(1,1/0),T=new rl.e(S,w[0].width,w[0].height,{loop:65535}),v&&((D=(0,J._)(w).reverse()).shift(),D.pop(),(k=w).push.apply(k,(0,J._)(D))),x&&w.reverse(),O=T,z=g,U=w.length,B=function(e,t){return P.add(function(){return new Promise(function(n,r){var F=e.getContext("2d");if(!F)throw Error("missing context");for(var a=F.getImageData(0,0,e.width,e.height).data,i=ri()(a,4).reduce(function(e,t){var n=(0,m._)(t,3),r=(n[0]<<16)+(n[1]<<8)+n[2],F=e.palette.findIndex(function(e){return e===r});return -1===F&&(F=e.palette.length,e.palette.push(r)),e.pixels.push(F),e},{pixels:[],palette:[]}),o=i.palette,l=i.pixels;o.length<256;)o.push(0);try{f.A.getState().setProgress("gif",(t+1)/U),window.requestAnimationFrame(function(){O.addFrame(0,0,e.width,e.height,l,{delay:Math.round(100/z),palette:o}),n(null)})}catch(e){r(e)}})})},[4,Promise.all(w.map(B))];case 2:G.sent(),N=(0,rs.A)({useCurrentDate:!0,exportScaleFactor:p,frameRate:g,altTitle:"animated",frameName:b,paletteShort:_,fileNameStyle:d}),M=T.end();try{R=new File([new Uint8Array(S.slice(0,M)).buffer],"".concat(N,".gif"),{type:"image/gif"})}catch(e){R=new Blob([new Uint8Array(S.slice(0,M)).buffer])}return(0,ro.saveAs)(R,"".concat(N,".gif")),t("gif",0),[2]}})});return function(){return e.apply(this,arguments)}}(),rf=function(){var e=(0,W.A)(),t=e.videoParams,n=e.setVideoParams,r=(0,f.A)(),F=r.videoSelection,a=r.setVideoSelection,i=rc(t);return{imageCount:F.length||0,videoParams:i,update:n,cancel:function(){a([])},animate:function(){rd(),a([])}}};let rm=function(){var e=rf(),t=e.update,n=e.cancel,r=e.imageCount,F=e.animate,a=e.videoParams;return r?(0,i.jsx)(ex.A,{confirm:F,deny:n,header:"Create an animated GIF with ".concat(r," frames"),children:(0,i.jsxs)(s.default,{direction:"column",gap:4,children:[(0,i.jsx)(em.default,{label:"Framerate",size:"small",type:"number",slotProps:{htmlInput:{min:1,max:120}},value:a.frameRate,onChange:function(e){t({frameRate:parseInt(e.target.value,10)})}}),(0,i.jsx)(em.default,{label:"Scale GIF",size:"small",type:"number",slotProps:{htmlInput:{min:1,max:12}},value:a.scaleFactor,onChange:function(e){t({scaleFactor:parseInt(e.target.value,10)})}}),(0,i.jsx)(ec.default,{label:"Enable Yoyo-Effect (loop back to the beginning)",control:(0,i.jsx)(ef.default,{checked:a.yoyo,onChange:function(e){t({yoyo:e.target.checked})}})}),(0,i.jsx)(ec.default,{label:"Reverse animation direction",control:(0,i.jsx)(ef.default,{checked:a.reverse,onChange:function(e){t({reverse:e.target.checked})}})}),(0,i.jsx)(tc,{noFancy:!0,allowEmpty:!0,value:a.palette||"",invertPalette:a.invertPalette,onChange:function(e){t({palette:e})},updateInvertPalette:function(e){t({invertPalette:e})}}),(0,i.jsx)(em.default,{label:"How to handle frames when exporting images",size:"small",select:!0,value:a.exportFrameMode,onChange:function(e){t({exportFrameMode:e.target.value})},children:rF.A.map(function(e){var t=e.id,n=e.name;return(0,i.jsx)(ed.default,{value:t,children:n},t)})}),"crop"===a.exportFrameMode?null:(0,i.jsx)(eq,{frame:a.frame||"",lockFrame:a.lockFrame,noFrameOption:"As selected per image",updateFrame:function(e){t({frame:e})},updateFrameLock:function(e){t({lockFrame:e})}})]})}):null},rh=function(){var e,t=(0,W.A)().enableImageGroups,n=!!(0,ek.A)().dialogs.length,r=(0,tk.A)(),F=r.editFrame,a=r.editImageGroup,o=r.editImages,l=r.editPalette,s=r.editRGBNImages,u=r.pickColors,c=!!(null==o||null==(e=o.batch)?void 0:e.length),d=s.length>0,m=(0,tD.A)(),h=m.filtersVisible,p=m.sortOptionsVisible,g=(0,ej.A)(),v=g.bitmapQueue,x=g.importQueue,b=g.frameQueue,j=!!v.length,y=!!x.length,_=!!b.length,A=(0,f.A)(),C=A.lightboxImage,I=A.dragover,E=A.trashCount.show,w=A.progress,S=A.progressLog,P=A.syncSelect,T=A.videoSelection,k=!!S.git.length||!!S.dropbox.length,D=!!w.gif||!!w.printer||!!w.plugin,B=!!(null==T?void 0:T.length);switch(!0){case n:return(0,i.jsx)(eB,{});case _:return(0,i.jsx)(ny,{});case j:return(0,i.jsx)(e_,{});case y:return(0,i.jsx)(nN,{});case c:return(0,i.jsx)(tU,{});case!!a&&t:return(0,i.jsx)(tq,{});case!!F:return(0,i.jsx)(tW,{});case!!l:return(0,i.jsx)(t3,{});case d:return(0,i.jsx)(nf,{});case B:return(0,i.jsx)(rm,{});case!!u:return(0,i.jsx)(nX,{});case null!==C:return(0,i.jsx)(nH,{});case h:return(0,i.jsx)(ng,{});case p:return(0,i.jsx)(n5,{});case P:return(0,i.jsx)(rt,{});case E:return(0,i.jsx)(rr,{});case I:return(0,i.jsx)(eL,{});case k:return(0,i.jsx)(n1,{});case D:return(0,i.jsx)(nK,{});default:return(0,i.jsx)(eN.A,{})}};function rp(e){var t=e.children,n=(0,W.A)().themeName,r={"--ddpx":(0,tG.h)().ddpx};(0,d.useEffect)(function(){var e,t=null==(e=document.querySelector("html"))?void 0:e.classList;t&&[Y.V.BRIGHT,Y.V.DARK].forEach(function(e){e===n?t.add(n):t.remove(e)})},[n]);var f=(0,d.useMemo)(function(){return n===Y.V.DARK?ei:eo},[n]),m=(0,c.A)(f.breakpoints.down("md"));return(0,i.jsxs)(u.default,{theme:f,children:[(0,i.jsx)(l.default,{}),(0,i.jsx)(d.Suspense,{fallback:(0,i.jsx)(eu,{}),children:(0,i.jsx)(es,{})}),(0,i.jsx)(o.default,{maxWidth:"xl",sx:(0,a._)((0,F._)({},r),{p:m?2:3,minHeight:"calc(100dvh - var(--navigation-height))",display:"flex",flexDirection:"column"}),children:(0,i.jsx)(s.default,{direction:"column",gap:2,sx:{flexGrow:1},children:t})}),(0,i.jsx)(rh,{}),(0,i.jsx)(_,{})]})}},31829:(e,t,n)=>{"use strict";n.d(t,{h:()=>F,O:()=>a});var r=function(e){var t=e.replace("#","");if(!/^([0-9a-fA-F]{6})$/.test(t))throw Error("Invalid hex color");var n=parseInt(t.slice(0,2),16),r=parseInt(t.slice(2,4),16),F=parseInt(t.slice(4,6),16);return"".concat(n,", ").concat(r,", ").concat(F)},F=function(e){return e.HARD="HARD",e.SMOOTH="SMOOTH",e.CONIC="CONIC",e}({}),a=function(e,t){var n=r(e[0]||"#000000"),F=r(e[1]||"#000000"),a=r(e[2]||"#000000"),i=r(e[3]||"#000000");switch(t){case"SMOOTH":return{backgroundImage:"linear-gradient(to right,\n          rgba(".concat(n,", ").concat(.25,") 0%,\n          rgba(").concat(F,", ").concat(.25,") 33.3%,\n          rgba(").concat(a,", ").concat(.25,") 66.6%,\n          rgba(").concat(i,", ").concat(.25,") 100%\n      )")};case"HARD":return{backgroundImage:"linear-gradient(to right,\n          rgb(".concat(n,") 0% 25%,\n          rgb(").concat(F,") 25% 50%,\n          rgb(").concat(a,") 50% 75%,\n          rgb(").concat(i,") 75% 100%\n        )")};case"CONIC":return{background:"conic-gradient(\n          rgb(".concat(n,") 0% 25%,\n          rgb(").concat(F,") 25% 50%,\n          rgb(").concat(a,") 50% 75%,\n          rgb(").concat(i,") 75% 100%\n        )")};default:return{}}}},31936:(e,t,n)=>{"use strict";n.d(t,{A:()=>o});var r=n(95155),F=n(700);n(12115);var a=n(52166),i=n(27299);let o=function(e){var t=e.text;return(0,a.A)().enableDebug?(0,r.jsx)(F.default,{title:t,variant:"caption",fontFamily:"monospace",component:"pre",sx:function(e){return(0,i.E)(e,{px:.5,py:0,mt:1,mb:0,backgroundColor:e.palette.warning[e.palette.mode]})},children:t}):null}},32134:(e,t,n)=>{"use strict";n.d(t,{GalleryTreeContext:()=>d,K:()=>c});var r=n(78538),F=n(95155),a=n(12115),i=n(45465),o=n(46498),l=n(11760),s=n(52166),u=n(1470),c=(0,a.createContext)({root:(0,u.z)(),view:(0,u.z)(),images:[],covers:[],paths:[],pathsOptions:[]});function d(e){var t=e.children,d=(0,r._)((0,a.useState)(null),2),f=d[0],m=d[1],h=(0,r._)((0,a.useState)((0,u.z)()),2),p=h[0],g=h[1],v=(0,r._)((0,a.useState)([]),2),x=v[0],b=v[1],j=(0,r._)((0,a.useState)([]),2),y=j[0],_=j[1],A=(0,s.A)(),C=A.enableImageGroups,I=A.enableDebug,E=(0,o.A)().setError,w=(0,l.h)(),S=w.imageGroups,P=w.images,T=w.setImageGroups,k=(0,a.useMemo)(function(){return C?S:[]},[C,S]),D=(0,i.Y)().path;(0,a.useEffect)(function(){var e=new Worker(n.tu(new URL(n.p+n.u(2814),n.b)));return e.onmessage=function(e){if("result"===e.data.type){if(g(e.data.root),b(e.data.paths),_(e.data.pathsOptions),S.length>e.data.paths.length){var t=e.data.paths.map(function(e){return e.group.id});T(S.filter(function(e){var n=e.id;return t.includes(n)}))}I&&console.info("worker ran for ".concat(e.data.duration,"ms"))}else"error"===e.data.type&&E(Error(e.data.error))},e.onerror=function(e){E(Error(e.message))},m(e),function(){e.terminate(),m(null)}},[I,E,T,S]),(0,a.useEffect)(function(){f&&f.postMessage({imageGroups:k,stateImages:P})},[k,P,f]);var B=(0,a.useMemo)(function(){var e,t=(null==(e=x.find(function(e){return e.absolutePath===D}))?void 0:e.group)||p,n=t.groups.map(function(e){return e.coverImage}),r=t.images.filter(function(e){return!n.includes(e.hash)});return{view:t,covers:n,paths:x,images:r,pathsOptions:y,root:p}},[D,x,y,p]);return(0,F.jsx)(c.Provider,{value:B,children:t})}},33782:(e,t,n)=>{"use strict";n.d(t,{NavigationToolsProvider:()=>o,g:()=>l});var r=n(95155),F=n(12115),a=n(70940),i=(0,F.createContext)(null);function o(e){var t=e.children,n=(0,a.n)();return(0,r.jsx)(i.Provider,{value:n,children:t})}var l=function(){var e=(0,F.useContext)(i);if(!e)throw Error("useNavigationToolsContext must be used within an NavigationToolsProvider");return e}},39141:()=>{},39250:(e,t,n)=>{"use strict";n.d(t,{A:()=>x});var r=n(95155),F=n(7642),a=n(7068),i=n(700),o=n(12115),l=n(15821),s=n(78538),u=n(577),c=n(64768);let d=function(){var e=(0,c.A)().handleFileImport;return(0,o.useCallback)(function(t){e([new File((0,u._)(t),"Text input.txt",{type:"text/plain"})])},[e])};var f=n(53598);let m=function(e){var t=f.A.enabled,n=d(),r=(0,s._)((0,o.useState)([]),2),F=r[0],a=r[1],i=(0,s._)((0,o.useState)(!1),2),l=i[0],u=i[1],c=(0,o.useRef)(""),m=(0,o.useRef)(0);return(0,o.useEffect)(function(){if(!f.A.enabled)return function(){};var t=function(e){window.clearTimeout(m.current),m.current=window.setTimeout(function(){u(!1),n(c.current),c.current=""},1e3),u(!0),c.current="".concat(c.current).concat(e)};return a(f.A.getActivePorts()),f.A.addListener("activePortsChange",a),e||f.A.addListener("data",t),function(){f.A.removeListener("activePortsChange",a),f.A.removeListener("data",t)}},[n,e]),{activePorts:F,webSerialEnabled:t,openWebSerial:function(){f.A.enabled&&f.A.requestPort()},isReceiving:l}};var h=n(79356);let p=function(e){var t=h.A.enabled,n=d(),r=(0,s._)((0,o.useState)([]),2),F=r[0],a=r[1],i=(0,s._)((0,o.useState)(!1),2),l=i[0],u=i[1],c=(0,o.useRef)(""),f=(0,o.useRef)(0);return(0,o.useEffect)(function(){if(!h.A.enabled)return function(){};var t=function(e){window.clearTimeout(f.current),f.current=window.setTimeout(function(){u(!1),n(c.current),c.current=""},1e3),u(!0),c.current="".concat(c.current).concat(e)};return a(h.A.getActivePorts()),h.A.addListener("activePortsChange",a),e||h.A.addListener("data",t),function(){h.A.removeListener("activePortsChange",a),h.A.removeListener("data",t)}},[n,e]),{activePorts:F,webUSBEnabled:t,openWebUSBSerial:function(){h.A.enabled&&h.A.requestPort()},isReceiving:l}};var g=n(46498),v=n(52166);let x=function(e){var t=e.inline,n=e.passive,o=p(n||!1),s=o.activePorts,u=o.isReceiving,c=o.webUSBEnabled,d=o.openWebUSBSerial,f=m(n||!1),h=f.activePorts,x=f.isReceiving,b=f.webSerialEnabled,j=f.openWebSerial,y=(0,v.A)().useSerials,_=(0,g.A)(),A=_.showSerials,C=_.setShowSerials,I=(0,r.jsxs)(a.default,{direction:{xs:"column",md:t?"row":"column"},gap:4,sx:{"& > *":{flex:1}},children:[(0,r.jsxs)(a.default,{direction:"column",gap:1,children:[(0,r.jsxs)(F.default,{title:"Open WebUSB device",onClick:d,disabled:!c,loading:u,loadingPosition:"start",variant:"contained",color:"secondary",children:["Open WebUSB device",u?" (receiving)":null]}),(0,r.jsx)(i.default,{variant:"body2",children:"Connected devices (".concat(s.length,"):")}),(0,r.jsx)("ul",{children:s.map(function(e,t){var n=e.productName;return(0,r.jsx)("li",{children:n},t)})})]}),(0,r.jsxs)(a.default,{direction:"column",gap:1,children:[(0,r.jsxs)(F.default,{title:"Open Web Serial device",onClick:j,disabled:!b,loading:x,loadingPosition:"start",variant:"contained",color:"secondary",children:["Open Web Serial device",x?" (receiving)":null]}),(0,r.jsx)(i.default,{variant:"body2",children:"".concat(h.length," devices connected")})]})]});return t?I:A&&y||u||x?(0,r.jsx)(l.A,{header:"WebUSB / Serial devices",confirm:function(){return C(!1)},canConfirm:!u&&!x,children:I}):null}},40082:(e,t,n)=>{"use strict";n.d(t,{A:()=>v});var r=n(95155),F=n(12115),a=n(97004),i=n(78538),o=n(39249),l=n(5432),s=n(83936),u=n(633),c=n(11760),d=n(53982),f=n(933),m=n(5847),h=function(e){var t,n=e.hash,r=e.hashes,h=e.palette,p=e.invertPalette,g=e.framePalette,v=e.invertFramePalette,x=e.lockFrame,b=e.frameId,j=e.rotation,y=(0,i._)((0,F.useState)(null),2),_=y[0],A=y[1],C=(0,u.g)(),I=(0,s.W)().remoteImport,E=(0,c.h)(),w=E.frames,S=E.palettes,P=E.images,T=null==(t=w.find(function(e){return e.id===b}))?void 0:t.hash,k=(0,F.useCallback)(function(e,t,n){return(0,m.T)(P,w,function(){(0,f.E)(C,I).recoverImageData(e)})(e,t,n,r)},[P,w,r,C,I]),D=(0,F.useMemo)(function(){return"string"==typeof h?(S.find(function(e){return e.shortName===h})||l.Fv).palette:h},[S,h]);return(0,F.useEffect)(function(){var e,t=!1;return n||A(null),(e=(0,a._)(function(){var e,r,F,a;return(0,o.YH)(this,function(i){switch(i.label){case 0:if(t)return[2];return[4,k(n,!1,b)];case 1:if(e=i.sent(),!T)return[3,3];return[4,(0,d.mZ)(T)];case 2:return F=i.sent(),[3,4];case 3:F=null,i.label=4;case 4:if(a=(r=F)?r.upper.length/20:2,t)return[2];return e&&A({tiles:e,palette:D,invertPalette:p,imageStartLine:a,lockFrame:x,rotation:j,framePalette:x?g:h,invertFramePalette:x?v:p}),[2]}})}),function(){return e.apply(this,arguments)})(),function(){t=!0}},[k,n,b,h,p,x,j,D,T,g,v]),{gbImageProps:_}},p=n(93370),g=n(66564);let v=function(e){var t=e.hash,n=e.hashes,F=e.frameId,a=e.lockFrame,i=e.invertPalette,o=e.invertFramePalette,l=e.palette,s=e.framePalette,u=e.rotation,c=e.asThumb,d=h({hash:t,hashes:n,frameId:F,lockFrame:a,invertPalette:i,invertFramePalette:o,palette:l,framePalette:s,rotation:u}).gbImageProps;return d?(0,r.jsx)(p.A,{lockFrame:d.lockFrame,invertPalette:d.invertPalette,invertFramePalette:d.invertFramePalette,tiles:d.tiles,palette:d.palette,framePalette:d.framePalette,imageStartLine:d.imageStartLine,rotation:d.rotation,asThumb:c}):(0,r.jsx)(g.A,{})}},44116:(e,t,n)=>{"use strict";n.d(t,{d:()=>F});var r=n(577),F=function(e,t){return e.reduce(function(e,n){var F,a;return t===(null==(a=RegExp("^(?<group>[a-z]+)(?<id>[0-9]+)","g").exec(n.id))||null==(F=a.groups)?void 0:F.group)?(0,r._)(e).concat([n]):e},[])}},45465:(e,t,n)=>{"use strict";n.d(t,{Y:()=>o});var r=n(78538),F=n(12115),a=n(29032),i="/gallery",o=function(){var e,t=(0,a.j)(),n=t.searchParams,o=t.pathname,l=(0,r._)((0,F.useState)(""),2),s=l[0],u=l[1],c=parseInt(null!=(e=n.get("page"))?e:"1",10)-1,d=n.get("group")||"",f=(0,F.useCallback)(function(e){var t="number"==typeof e.pageIndex?e.pageIndex:c,n="string"==typeof e.group?e.group:d,r="".concat(i,"?page=").concat(t+1);return n.length&&(r="".concat(r,"&group=").concat(n)),r},[c,d]);return(0,F.useEffect)(function(){o===i&&u(f({pageIndex:c,group:d}))},[d,c,o,f]),{pageIndex:c,path:d,lastGalleryLink:s,getUrl:f}}},47457:(e,t,n)=>{"use strict";n.d(t,{A:()=>C});var r=n(97004),F=n(693),a=n(577),i=n(39249),o=n(30832),l=n.n(o),s=n(91540),u=n(12115),c=n(5432),d=n(46498),f=n(11760),m=n(75380),h=n(72623),p=function(e,t){return!!t.find(function(t){var n=t.hashes;return!!n&&Object.values(n).includes(e)})},g=function(e,t){return!!t.find(function(t){return t.hash===e})},v=function(){var e=(0,r._)(function(e){var t,n;return(0,i.YH)(this,function(r){var F,a;switch(r.label){case 0:return t=e.images,n=e.frames,[4,(0,m.ZU)()];case 1:return r.sent(),[4,m.mU.keys()];case 2:return r.sent().forEach((F=t,function(e){p(e,F)||g(e,F)||(0,h.yH)(e)})),[4,m.Uv.keys()];case 3:return r.sent().forEach((a=n,function(e){a.find(function(t){return t.hash===e})||(0,h.t9)(e)})),[2]}})});return function(t){return e.apply(this,arguments)}}(),x=function(){var e=(0,r._)(function(e){return(0,i.YH)(this,function(t){switch(t.label){case 0:return[4,(0,m.ZU)()];case 1:return t.sent(),[4,m.mU.keys()];case 2:return[2,t.sent().filter(function(e){return!e.startsWith("dummy")}).filter(function(t){return!p(t,e)&&!g(t,e)})]}})});return function(t){return e.apply(this,arguments)}}(),b=function(){var e=(0,r._)(function(e){return(0,i.YH)(this,function(t){switch(t.label){case 0:return[4,(0,m.ZU)()];case 1:return t.sent(),[4,m.Uv.keys()];case 2:return[2,t.sent().filter(function(e){return!e.startsWith("dummy")}).filter(function(t){return!e.find(function(e){return e.hash===t})})]}})});return function(t){return e.apply(this,arguments)}}(),j=n(55364),y=n(50263),_=n(99451),A=function(){var e=(0,r._)(function(e,t){return(0,i.YH)(this,function(n){switch(n.label){case 0:return[4,(0,m.ZU)()];case 1:var F;return n.sent(),[4,Promise.all(e.map((F=(0,r._)(function(e){var n;return(0,i.YH)(this,function(r){switch(r.label){case 0:return r.trys.push([0,3,,4]),[4,t.getItem(e)];case 1:if(!(n=r.sent()))return[2,null];return[4,(0,y.U)(n)];case 2:return[2,{hash:e,lines:r.sent().split("\n"),binary:n}];case 3:return r.sent(),[2,null];case 4:return[2]}})}),function(e){return F.apply(this,arguments)})))];case 2:return[2,n.sent().reduce(_.N,[])]}})});return function(t,n){return e.apply(this,arguments)}}();let C=function(){var e,t=(0,d.A)(),n=t.trashCount,o=t.showTrashCount,h=(0,f.h)(),p=h.frames,g=h.images,y=(0,d.A)().updateTrashCount,C=(e=(0,r._)(function(){var e,t,n;return(0,i.YH)(this,function(r){switch(r.label){case 0:return[4,x(g)];case 1:return[4,A(r.sent(),m.mU)];case 2:return e=r.sent(),t={},n={state:{images:e.map(function(e){try{return t[e.hash]=e.binary,{hash:e.hash,created:l()().format(c.i$),title:"Backup export ".concat(e.hash),lines:e.lines.length,tags:["backup"],palette:"bw",framePalette:"bw",invertPalette:!1,invertFramePalette:!1,frame:""}}catch(e){return null}}).reduce(j.iy,[]),lastUpdateUTC:Math.floor(new Date().getTime()/1e3),version:f.A}},(0,s.saveAs)(new Blob((0,a._)(JSON.stringify((0,F._)({},n,t),null,2))),"backup_images.json"),[2]}})}),function(){return e.apply(this,arguments)}),I=(0,u.useCallback)((0,r._)(function(){var e,t,n;return(0,i.YH)(this,function(r){switch(r.label){case 0:return[4,b(p)];case 1:return[4,A(r.sent(),m.Uv)];case 2:return e=r.sent(),t={},n={state:{frames:e.map(function(e,n){try{return t["frame-".concat(e.hash)]=e.binary,{hash:e.hash,name:"Backup export ".concat(e.hash),id:"bak".concat(n.toString(10).padStart(2,"0"))}}catch(e){return null}}).reduce(_.N,[]),frameGroups:[{id:"bak",name:"Re-imported trash frames"}],lastUpdateUTC:Math.floor(new Date().getTime()/1e3),version:f.A}},(0,s.saveAs)(new Blob((0,a._)(JSON.stringify((0,F._)({},n,t),null,2))),"backup_frames.json"),[2]}})}),[p]),E=(0,u.useCallback)((0,r._)(function(){var e,t;return(0,i.YH)(this,function(n){switch(n.label){case 0:return[4,b(p)];case 1:return e=n.sent().length,[4,x(g)];case 2:return t=n.sent().length,y(e,t),[2]}})}),[p,g,y]),w=(0,u.useCallback)((0,r._)(function(){return(0,i.YH)(this,function(e){switch(e.label){case 0:return[4,v({images:g,frames:p})];case 1:return e.sent(),o(!1),window.requestAnimationFrame(function(){E()}),[2]}})}),[E,p,g,o]);return{showTrashCount:o,purgeTrash:w,downloadImages:C,downloadFrames:I,checkUpdateTrashCount:E,trashCount:n}}},49231:()=>{},52324:(e,t,n)=>{"use strict";n.d(t,{g:()=>c,i:()=>d});var r=n(97004),F=n(693),a=n(60376),i=n(39249),o=n(52491),l=n.n(o),s=n(75380),u=function(e){return!!e.find(function(e){return!e.hash})},c=function(){var e=(0,r._)(function(e){return(0,i.YH)(this,function(t){var n;return u(e)?[2,Promise.all(e.map((n=(0,r._)(function(e){var t,n;return(0,i.YH)(this,function(r){switch(r.label){case 0:if(e.hash)return[2,e];return[4,s.Uv.getItem(e.id)];case 1:if(!(t=r.sent()))return console.warn("could not load frame data for hashing"),[2,e];return n=l()(t),[4,s.Uv.removeItem(e.id)];case 2:return r.sent(),[4,s.Uv.setItem(n,t)];case 3:return r.sent(),[2,(0,a._)((0,F._)({},e),{hash:n})]}})}),function(e){return n.apply(this,arguments)})))]:[2,e]})});return function(t){return e.apply(this,arguments)}}(),d=function(){var e=(0,r._)(function(e){var t,n;return(0,i.YH)(this,function(o){switch(o.label){case 0:var s;if(!(t=e).state.frames||!u(t.state.frames))return[2,e];return[4,Promise.all(t.state.frames.map((s=(0,r._)(function(e){var n,r,o;return(0,i.YH)(this,function(i){return e.hash?[2,e]:(r=t[n="frame-".concat(e.id)])?(o=l()(r),delete t[n],t["frame-".concat(o)]=r,[2,(0,a._)((0,F._)({},e),{hash:o})]):(console.warn("could not load ".concat(n," from json import")),[2,e])})}),function(e){return s.apply(this,arguments)})))];case 1:return n=o.sent(),[2,(0,a._)((0,F._)({},t),{state:(0,a._)((0,F._)({},t.state),{frames:n})})]}})});return function(t){return e.apply(this,arguments)}}()},53598:(e,t,n)=>{"use strict";n.d(t,{A:()=>u});var r=n(82666),F=n(65492),a=n(66214),i=n(577),o=n(40662),l=n.n(o),s=function(e){function t(e){var n,a=e.device,i=e.baudRate;(0,F._)(this,t),(n=(0,r._)(this,t)).device=a,n.baudRate=i;var o=a.getInfo(),l=o.usbProductId,s=o.usbVendorId;return n.usbProductId=l,n.usbVendorId=s,n.reader=null,n}return(0,a._)(t,e),t.prototype.connect=function(){var e=this,t=function(){var n;null==(n=e.reader)||n.read().then(function(n){var r=n.value;e.emit("data",r),t()}).catch(function(t){e.emit("error",t)})};return this.device.open({baudRate:this.baudRate}).then(function(){var n=new window.TextDecoderStream;e.device.readable.pipeTo(n.writable),e.reader=n.readable.getReader(),t()})},t}(l());let u=new(function(e){function t(){var e;return(0,F._)(this,t),(e=(0,r._)(this,t)).enabled="undefined"!=typeof navigator&&!!navigator.serial&&!!window.TextDecoderStream,e.activePorts=[],e.baudRate=115200,e.watchPorts(),e}(0,a._)(t,e);var n=t.prototype;return n.getPorts=function(){var e=this;return this.enabled?navigator.serial.getPorts().then(function(t){return t.filter(function(e){return!e.readable}).map(function(t){return new s({device:t,baudRate:e.baudRate})})}):Promise.resolve([])},n.getActivePorts=function(){return this.activePorts},n.watchPorts=function(){var e=this;window.setInterval(function(){e.getPorts().then(function(t){t.forEach(function(t){t.addListener("error",function(n){console.warn(n),e.activePorts=e.activePorts.filter(function(e){return e!==t}),e.emit("activePortsChange",(0,i._)(e.activePorts))}),t.addListener("data",function(t){e.emit("data",t)}),t.connect().then(function(){e.activePorts.push(t),e.emit("activePortsChange",(0,i._)(e.activePorts))}).catch(function(){})})})},1e3)},n.requestPort=function(){var e=this;this.enabled&&navigator.serial.requestPort().then(function(t){if(t.readable)throw Error("device already opened");return new s({device:t,baudRate:e.baudRate})}).catch(function(){return null}).then(function(t){t&&t.connect().then(function(){e.activePorts.push(t),e.emit("activePortsChange",(0,i._)(e.activePorts))})})},t}(l()))},55364:(e,t,n)=>{"use strict";n.d(t,{iy:()=>a,pl:()=>F});var r=n(577),F=function(e){return!!(e.hasOwnProperty("hashes")&&e.hashes)},a=function(e,t){return!t||F(t)?e:(0,r._)(e).concat([t])}},55685:(e,t,n)=>{"use strict";n.d(t,{A:()=>r});let r=function(e){return e.filter(function(t,n){return e.findIndex(function(e){return e===t})===n})}},62412:(e,t,n)=>{"use strict";n.d(t,{A:()=>v,E:()=>p});var r=n(97004),F=n(78538),a=n(577),i=n(39249),o=n(3899),l=n.n(o),s=n(27576),u=n(88274),c=n.n(u),d=n(12115),f=n(3381),m=n(46498),h=n(34687),p=function(e){var t=(0,F._)(e,3),n=t[0],r=t[1],a=t[2];return["#",Math.min(255,Math.max(0,n)).toString(16).padStart(2,"0"),Math.min(255,Math.max(0,r)).toString(16).padStart(2,"0"),Math.min(255,Math.max(0,a)).toString(16).padStart(2,"0")].join("")},g=function(e,t){var n=.299*e[0]+.587*e[1]+.114*e[2],r=.299*t[0]+.587*t[1]+.114*t[2];return n>r?-1:+(n<r)};let v=function(){var e,t=(0,F._)((0,d.useState)(!1),2),n=t[0],o=t[1],u=(0,m.A)().setError,p=(0,f.A)().setPickColors;return{onInputChange:(e=(0,r._)(function(e){var t,n,r,d,f,m;return(0,i.YH)(this,function(i){switch(i.label){case 0:if(!(null==(n=(t=e.target).files)?void 0:n[0]))return[3,2];return o(!0),[4,(0,h.A)(t.files[0],!0)];case 1:d=(r=i.sent()).imageData,f=r.fileName,m=l()(d.data,4).map(function(e){var t=(0,F._)(e,3);return[t[0],t[1],t[2]]}),s.clusterize(m,{k:6},function(e,t){if(e)u(e);else{var n=c()(m,4);p({colors:(0,a._)(n?n.palette():[]).concat((0,a._)(t?t.map(function(e){var t=(0,F._)(e.centroid,3);return[Math.round(t[0]),Math.round(t[1]),Math.round(t[2])]}):[])).filter(function(e,t,n){return n.findIndex(function(t){return t.join(",")===e.join(",")})===t}).sort(g),fileName:f})}o(!1)}),i.label=2;case 2:return t.value="",[2]}})}),function(t){return e.apply(this,arguments)}),busy:n}}},66564:(e,t,n)=>{"use strict";n.d(t,{A:()=>i});var r=n(95155),F=n(53267),a=n(14426);n(12115);let i=function(){return(0,r.jsx)(F.default,{sx:{width:"100%",paddingTop:"90%",height:0,display:"block",background:"transparent",position:"relative"},children:(0,r.jsx)(F.default,{sx:{position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)"},children:(0,r.jsx)(a.default,{color:"primary",size:40})})})}},66785:(e,t,n)=>{"use strict";n.d(t,{S:()=>o});var r=n(577),F=n(6456),a=n(77840),i=n(12360),o=function(e,t){var n=t.filtersActiveTags,o=t.sortBy,l=t.recentImports;return(0,r._)(e).map(F.YZ).sort((0,F.PM)(o)).map(F.lt).filter((0,a.A)(n,l)).filter((0,i.A)(n))}},67069:(e,t,n)=>{"use strict";n.d(t,{y:()=>r});var r={htmlInput:{autoComplete:"off",autoCorrect:"off",autoCapitalize:"off",spellCheck:!1},inputLabel:{shrink:!0},fullWidth:!0,size:"small"}},70940:(e,t,n)=>{"use strict";n.d(t,{n:()=>d});var r=n(78538),F=n(35695),a=n(12115),i=n(95939),o=n(45465),l=n(71620),s=n(52166),u=n(1470),c=n(66785),d=function(){var e=(0,F.useRouter)(),t=(0,i.Z)(),n=t.paths,d=t.root,f=(0,r._)((0,a.useState)({}),2),m=f[0],h=f[1],p=(0,l.A)(),g=p.sortBy,v=p.filtersActiveTags,x=p.recentImports,b=(0,s.A)().pageSize,j=(0,o.Y)(),y=j.path,_=j.getUrl,A=(0,a.useCallback)(function(e){return(0,c.S)(e,{filtersActiveTags:v,sortBy:g,recentImports:x})},[v,x,g]),C=(0,a.useCallback)(function(e,t){return Math.floor(A(t.images).findIndex(function(t){return t.hash===e})/b)},[A,b]),I=(0,a.useCallback)(function(e){var t;return e===u.t?_({pageIndex:0,group:""}):_({pageIndex:0,group:(null==(t=n.find(function(t){return e===t.group.id}))?void 0:t.absolutePath)||""})},[_,n]),E=(0,a.useMemo)(function(){var e;return(null==(e=n.find(function(e){return e.absolutePath===y}))?void 0:e.group)||d},[y,n,d]),w=(0,a.useCallback)(function(e){var t=n.find(function(t){return t.group.images.map(function(e){return e.hash}).includes(e)}),r=(null==t?void 0:t.absolutePath)||"";return _({pageIndex:C(e,(null==t?void 0:t.group)||d),group:r})},[C,_,n,d]);return(0,a.useEffect)(function(){m.imageHash?(e.push(w(m.imageHash)),h({})):m.groupId&&(e.push(I(m.groupId)),h({}))},[I,w,e,m]),{currentGroup:E,getGroupPath:I,getPagedImagePath:w,getImagePageIndexInGroup:C,navigateToGroup:function(e){h({groupId:e})},navigateToImage:function(e){h({imageHash:e})}}}},75097:(e,t,n)=>{"use strict";n.d(t,{No:()=>F,Q3:()=>a,RQ:()=>i,x6:()=>r});var r=function(e){return e.DELETE="delete",e.ANIMATE="animate",e.DOWNLOAD="download",e.EDIT="edit",e.RGB="rgb",e}({}),F=function(e){return e.LOCK_FRAME="lockFrame",e.FRAME="frame",e.PALETTE="palette",e.TITLE="title",e.TAGS="tags",e.CREATED="created",e.ROTATION="rotation",e}({}),a=function(e){return e.INVERT_PALETTE="invertPalette",e.FRAME_PALETTE="framePalette",e.INVERT_FRAME_PALETTE="invertFramePalette",e}({}),i=["lockFrame","frame","title","tags","created","rotation","palette","invertPalette","framePalette","invertFramePalette"]},75380:(e,t,n)=>{"use strict";n.d(t,{Uv:()=>u,mU:()=>s,ZU:()=>c});var r=n(97004),F=n(39249),a=n(77271),i=n.n(a),o="dummy".concat(new Date().getTime());let l=function(e){var t,n,a,l,s=i().createInstance(e),u=(t=(0,r._)(function(){return(0,F.YH)(this,function(e){switch(e.label){case 0:return[4,s.setItem(o,o)];case 1:return e.sent(),[4,s.removeItem(o)];case 2:return e.sent(),[2]}})}),function(){return t.apply(this,arguments)});return{ready:(0,r._)(function(){var t;return(0,F.YH)(this,function(n){switch(n.label){case 0:return n.trys.push([0,2,,3]),[4,s.ready()];case 1:return n.sent(),[2,u()];case 2:throw t=n.sent(),s=i().createInstance(e),t;case 3:return[2]}})}),keys:(0,r._)(function(){return(0,F.YH)(this,function(t){try{return[2,s.keys()]}catch(t){throw s=i().createInstance(e),t}})}),driver:(0,r._)(function(){var t;return(0,F.YH)(this,function(n){switch(n.label){case 0:return n.trys.push([0,2,,3]),[4,s.driver()];case 1:return[2,n.sent()];case 2:throw t=n.sent(),s=i().createInstance(e),t;case 3:return[2]}})}),setItem:(n=(0,r._)(function(t,n){var r;return(0,F.YH)(this,function(F){switch(F.label){case 0:return F.trys.push([0,2,,3]),[4,s.setItem(t,n)];case 1:return[2,F.sent()];case 2:throw r=F.sent(),s=i().createInstance(e),r;case 3:return[2]}})}),function(e,t){return n.apply(this,arguments)}),getItem:(a=(0,r._)(function(t){var n;return(0,F.YH)(this,function(r){switch(r.label){case 0:return r.trys.push([0,2,,3]),[4,s.getItem(t)];case 1:return[2,r.sent()];case 2:throw n=r.sent(),s=i().createInstance(e),n;case 3:return[2]}})}),function(e){return a.apply(this,arguments)}),removeItem:(l=(0,r._)(function(t){var n;return(0,F.YH)(this,function(r){switch(r.label){case 0:return r.trys.push([0,2,,3]),[4,s.removeItem(t)];case 1:return[2,r.sent()];case 2:throw n=r.sent(),s=i().createInstance(e),n;case 3:return[2]}})}),function(e){return l.apply(this,arguments)})}};var s=l({name:"GB Printer Web",storeName:"gb-printer-web-images"}),u=l({name:"GB Printer Web",storeName:"gb-printer-web-frames"});window.lfi=s,window.lff=u;var c=function(){var e=(0,r._)(function(){return(0,F.YH)(this,function(e){switch(e.label){case 0:return[4,u.ready()];case 1:return e.sent(),[4,s.ready()];case 2:return e.sent(),[4,new Promise(function(e){window.setTimeout(e,5)})];case 3:return e.sent(),[2]}})});return function(){return e.apply(this,arguments)}}()},77840:(e,t,n)=>{"use strict";n.d(t,{A:()=>s});var r=n(577),F=n(30832),a=n.n(F),i=n(5432),o=n(19864),l=n(55364);let s=function(e,t){return function(n){var F,s,u=e.reduce(function(e,t){return[o.X3.FILTER_MONOCHROME,o.X3.FILTER_NEW,o.X3.FILTER_RGB,o.X3.FILTER_UNTAGGED,o.X3.FILTER_RECENT,o.X3.FILTER_FAVOURITE,o.X3.FILTER_COMMENTS,o.X3.FILTER_USERNAME].includes(t)?(0,r._)(e).concat([t]):e},[]);if(u.length&&(u.includes(o.X3.FILTER_UNTAGGED)&&0!==n.tags.length||u.includes(o.X3.FILTER_NEW)&&a()(n.created,i.i$).unix()<=a()().subtract(1,"day").unix()||u.includes(o.X3.FILTER_RECENT)&&!t.map(function(e){return e.hash}).includes(n.hash)||u.includes(o.X3.FILTER_RGB)&&!(0,l.pl)(n)||u.includes(o.X3.FILTER_MONOCHROME)&&(0,l.pl)(n)||u.includes(o.X3.FILTER_FAVOURITE)&&!n.tags.includes(o.X3.FILTER_FAVOURITE)||u.includes(o.X3.FILTER_COMMENTS)&&!(null==(F=n.meta)?void 0:F.comment)||u.includes(o.X3.FILTER_USERNAME)&&!(null==(s=n.meta)?void 0:s.userName)))return!1;return!0}}},79356:(e,t,n)=>{"use strict";n.d(t,{A:()=>u});var r=n(82666),F=n(65492),a=n(66214),i=n(577),o=n(40662),l=n.n(o),s=function(e){function t(e){var n;return(0,F._)(this,t),(n=(0,r._)(this,t)).device=e,n.manufacturerName=e.manufacturerName||"",n.productName=e.productName||"",n.serialNumber=e.serialNumber||"",n.interfaceNumber=2,n.endpointIn=5,n.endpointOut=4,n.textDecoder=new TextDecoder,n}(0,a._)(t,e);var n=t.prototype;return n.connect=function(){var e=this,t=function(){e.device.transferIn(e.endpointIn,64).then(function(n){e.emit("data",e.textDecoder.decode(n.data)),t()}).catch(function(t){e.emit("error",t)})};return this.device.open().then(function(){var t,n;return null==(n=e.device)||null==(t=n.selectConfiguration)?void 0:t.call(n,1)}).then(function(){var t,n=null==(t=e.device.configuration)?void 0:t.interfaces;n&&n.forEach(function(t){t.alternates.forEach(function(n){255===n.interfaceClass&&(e.interfaceNumber=t.interfaceNumber,n.endpoints.forEach(function(t){"out"===t.direction&&(e.endpointOut=t.endpointNumber),"in"===t.direction&&(e.endpointIn=t.endpointNumber)}))})})}).then(function(){return e.device.claimInterface(e.interfaceNumber)}).then(function(){return e.device.selectAlternateInterface(e.interfaceNumber,0)}).then(function(){return e.device.controlTransferOut({requestType:"class",recipient:"interface",request:34,value:1,index:e.interfaceNumber})}).then(function(){t()})},n.disconnect=function(){var e=this;return this.device.controlTransferOut({requestType:"class",recipient:"interface",request:34,value:0,index:this.interfaceNumber}).then(function(){return e.device.close()})},n.send=function(e){return this.device.transferOut(this.endpointOut,e)},t}(l());let u=new(function(e){function t(){var e;return(0,F._)(this,t),(e=(0,r._)(this,t)).enabled="undefined"!=typeof navigator&&!!navigator.usb&&!!navigator.usb.getDevices,e.activePorts=[],e.watchPorts(),e}(0,a._)(t,e);var n=t.prototype;return n.getPorts=function(){return this.enabled?navigator.usb.getDevices().then(function(e){return e.filter(function(e){return!e.opened}).map(function(e){return new s(e)})}):Promise.resolve([])},n.getActivePorts=function(){return this.activePorts},n.watchPorts=function(){var e=this;window.setInterval(function(){e.getPorts().then(function(t){t.forEach(function(t){t.addListener("error",function(n){console.warn(n),e.activePorts=e.activePorts.filter(function(e){return e!==t}),e.emit("activePortsChange",(0,i._)(e.activePorts))}),t.addListener("data",function(t){e.emit("data",t)}),t.connect().then(function(){e.activePorts.push(t),e.emit("activePortsChange",(0,i._)(e.activePorts))})})})},1e3)},n.requestPort=function(){var e=this;this.enabled&&navigator.usb.requestDevice({filters:[{vendorId:9025,productId:32822},{vendorId:9025,productId:32823},{vendorId:9025,productId:32845},{vendorId:9025,productId:32846},{vendorId:9025,productId:32847},{vendorId:9025,productId:32848},{vendorId:9025,productId:32850},{vendorId:9025,productId:32851},{vendorId:9025,productId:32852},{vendorId:9025,productId:32853},{vendorId:9025,productId:32854},{vendorId:9025,productId:32855},{vendorId:9114}]}).then(function(e){if(e.opened)throw Error("device already opened");return new s(e)}).catch(function(){return null}).then(function(t){t&&t.connect().then(function(){e.activePorts.push(t),e.emit("activePortsChange",(0,i._)(e.activePorts))})})},t}(l()))},81543:(e,t,n)=>{"use strict";n.d(t,{A:()=>F});var r=n(15905);let F=[{id:r.H.FRAMEMODE_KEEP,name:"Keep frame"},{id:r.H.FRAMEMODE_CROP,name:"Crop frame"},{id:r.H.FRAMEMODE_SQUARE_BLACK,name:"Make image squared (add black)"},{id:r.H.FRAMEMODE_SQUARE_WHITE,name:"Make image squared (add white)"}]},85546:(e,t,n)=>{"use strict";n.d(t,{A:()=>r});let r=function(e){return function(t){return t.filter(function(n,r){return t.findIndex(function(t){return t[e]===n[e]})===r})}}},87031:(e,t,n)=>{"use strict";n.d(t,{A:()=>a,U:()=>F});var r=n(577),F=function(e){return e.ASC="asc",e.DESC="desc",e}({});let a=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"asc";return function(n){var F="desc"===t?-1:1;return(0,r._)(n).sort(function(t,n){return"string"==typeof t[e]?t[e].localeCompare(n[e]):t[e]>n[e]?F:t[e]<n[e]?-F:0})}}},93370:(e,t,n)=>{"use strict";n.d(t,{A:()=>d});var r=n(97004),F=n(693),a=n(78538),i=n(39249),o=n(95155),l=n(53267),s=n(15905),u=n(12115),c=n(77683);let d=function(e){var t=e.palette,n=e.tiles,d=e.imageStartLine,f=e.lockFrame,m=e.invertPalette,h=e.framePalette,p=e.invertFramePalette,g=e.asThumb,v=void 0!==g&&g,x=e.rotation,b=void 0===x?s.pL.DEG_0:x,j=!(t instanceof Array),y=(0,a._)((0,u.useState)(null),2),_=y[0],A=y[1],C=(0,a._)((0,u.useState)(""),2),I=C[0],E=C[1];(0,u.useEffect)(function(){if(t&&n){var e=setTimeout((0,r._)(function(){var e;return(0,i.YH)(this,function(r){switch(r.label){case 0:if(r.trys.push([0,5,,6]),!j)return[3,2];return[4,(0,s.uL)({tiles:n,palette:t,lockFrame:f||!1,rotation:b})];case 1:return A.apply(void 0,[r.sent()]),[3,4];case 2:if(!(null==n?void 0:n.length))return[3,4];return[4,(0,s.qO)((0,F._)({tiles:n,imageStartLine:d,rotation:b},(0,c.C)({imagePalette:t,framePalette:h,invertPalette:m,invertFramePalette:p})))];case 3:A.apply(void 0,[r.sent()]),r.label=4;case 4:return E(""),[3,6];case 5:return(e=r.sent())instanceof Error&&(console.error(e),E(e.message)),[3,6];case 6:return[2]}})}),1);return function(){clearTimeout(e)}}},[n,t,f,m,b,j,d,h,p]);var w=(0,u.useMemo)(function(){var e=b===s.pL.DEG_90||b===s.pL.DEG_270,t=(j?(0,s.EK)(n):n.length)<=360,r=e&&t;return{display:"block",imageRendering:v?"auto":"pixelated",margin:r?"0 5%":0,width:r?"90%":"100%",maxWidth:"100%",maxHeight:"100%",objectFit:"contain"}},[v,j,b,n]);return(0,o.jsx)(l.default,{className:"gameboy-image",sx:{display:"flex",width:"100%",height:"100%"},children:!I&&_&&(0,o.jsx)(l.default,{component:"img",width:160,src:_,sx:w,alt:""})})}},95939:(e,t,n)=>{"use strict";n.d(t,{Z:()=>a});var r=n(12115),F=n(32134),a=function(){return(0,r.useContext)(F.K)}},96396:(e,t,n)=>{Promise.resolve().then(n.bind(n,31204))},98250:(e,t,n)=>{"use strict";n.d(t,{h:()=>i});var r=n(78538),F=n(12115),a=function(){var e;return{width:window.innerWidth,height:window.innerHeight,ddpx:window.devicePixelRatio<=2?window.devicePixelRatio:window.devicePixelRatio/2,layoutWidth:(e=window.innerWidth)>1220?1155:e>1025?960:e>830?765:e>635?570:e>440?375:e-40}},i=function(){var e=(0,r._)((0,F.useState)(a()),2),t=e[0],n=e[1];return(0,F.useEffect)(function(){var e=function(){n(a())};return window.addEventListener("resize",e),function(){return window.removeEventListener("resize",e)}},[n]),t}}},e=>{var t=t=>e(e.s=t);e.O(0,[1090,4536,4453,700,7859,7271,4831,6139,5394,3313,7642,9758,8449,1487,9665,8681,6874,766,1287,3678,9740,1936,9018,5678,1539,5284,7246,3936,4768,8441,1684,7358],()=>t(96396)),_N_E=e.O()}]);