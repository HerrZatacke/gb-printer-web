(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[5862],{9718:(e,t,n)=>{"use strict";n.d(t,{_Y:()=>i,k4:()=>o,qt:()=>r});var r=function(e){return e.USB="USB",e.SERIAL="SERIAL",e}({}),i=function(e){return e.INACTIVE="inactive",e.PACKET_CAPTURE="packet_capture",e.SUPER_PRINTER_INTERFACE="super_printer_interface",e.GBXCART="gbxcart",e}({}),o=[{vendorId:9025,productId:32822},{vendorId:9025,productId:32823},{vendorId:9025,productId:32845},{vendorId:9025,productId:32846},{vendorId:9025,productId:32847},{vendorId:9025,productId:32848},{vendorId:9025,productId:32850},{vendorId:9025,productId:32851},{vendorId:9025,productId:32852},{vendorId:9025,productId:32853},{vendorId:9025,productId:32854},{vendorId:9025,productId:32855},{vendorId:9114}]},12199:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>Z});var r=n(95155),i=n(700),o=n(17652),s=n(78538),a=n(87025),c=n(7642),l=n(61487),u=n(71803),d=n(34991),p=n(12115),f=n(54581),m=n(14426),h=n(46498),v=n(52166);let g=function(e){var t=(0,v.A)(),n=t.printerUrl,r=t.printerParams,i=r?"#".concat(encodeURI(r)):"",o=n?"".concat(n,"remote.html").concat(i):void 0,a=(0,h.A)().printerFunctions.length>0,c=(0,s._)((0,p.useState)(!1),2),l=c[0],u=c[1],d=(0,s._)((0,p.useState)(!1),2),f=d[0],m=d[1],g=(0,p.useRef)(void 0);return(0,p.useEffect)(function(){return l||f||g.current||(g.current=window.setTimeout(function(){m(!0)},e)),function(){window.clearTimeout(g.current),g.current=void 0}},[f,l,e]),!l&&a&&(window.clearTimeout(g.current),g.current=void 0,u(!0)),{failed:f,loaded:l,printerUrl:o,printerConnected:a}};var A=function(e){if(!e)return!1;if(e.startsWith("/"))return!0;var t=new URL(e).protocol,n=new URL(window.location.href).protocol;return"http:"===n||n===t};let b=function(){var e=(0,o.c3)("ConnectPrinter"),t=g(3e4),n=t.printerUrl,i=t.failed,s=t.loaded,a=t.printerConnected;return A(n)&&!i?(0,r.jsxs)(f.A,{sx:{display:"flex",justifyContent:"center"},children:[(0,r.jsx)("iframe",{style:{position:"absolute",top:"80px",left:"-200vw",width:"480px",height:"90px"},src:n}),!s&&(0,r.jsx)(m.A,{color:"secondary"})]}):(!a||i)&&(0,r.jsx)(l.A,{variant:"contained",fullWidth:!0,children:(0,r.jsx)(c.A,{onClick:function(){window.open(n,"remoteprinter","width=480,height=400")},children:e("openPrinterPage")})})};var x=n(9665),I=n(18407),j=n(17976),C=n(99776),R=n(64263),E=n(44296),P=n(56033),M=n(90404),T=n(77260),_=n.n(T),w=n(45686),y=n(30891),N=function(){var e=(0,h.A)(),t=e.printerData,n=e.printerFunctions,r=e.printerBusy,i=(0,y.b)().callRemoteFunction,o=n.length>0;return{printerData:t,printerFunctions:n,printerBusy:r,printerConnected:o,callRemoteFunction:i}},B={testFile:"functions.printTestImage",checkPrinter:"functions.checkPrinter",fetchImages:"",clearPrinter:"functions.clearPrinter",tear:"functions.tear"};let S=function(){var e,t=(0,o.c3)("PrinterReport"),n=N(),i=n.printerData,s=n.printerFunctions,a=n.printerConnected,d=n.callRemoteFunction,f=n.printerBusy,m=(0,p.useMemo)(function(){var e,n=(null==i||null==(e=i.dumps)?void 0:e.length)||0;return s.includes(w.n.TEAR)||!n?t("functions.fetchImagesGeneric"):t("functions.fetchImagesCount",{count:n})},[null==i||null==(e=i.dumps)?void 0:e.length,s,t]);return a?(0,r.jsxs)(u.A,{direction:"column",gap:2,children:[(0,r.jsx)(l.A,{variant:"contained",fullWidth:!0,children:s.map(function(e){var n;return(0,r.jsx)(c.A,{disabled:f||[w.n.FETCHIMAGES,w.n.CLEARPRINTER,w.n.TEAR].includes(e)&&!(null==i||null==(n=i.dumps)?void 0:n.length),onClick:function(){return d(e)},children:e===w.n.FETCHIMAGES?m:t(B[e])},e)})}),(null==i?void 0:i.message)?(0,r.jsx)(x.A,{severity:"info",children:null==i?void 0:i.message}):null,(null==i?void 0:i.fs)&&(null==i?void 0:i.dumps)?(0,r.jsx)(E.A,{component:I.A,children:(0,r.jsxs)(j.A,{sx:{minWidth:650},size:"small","aria-label":"a dense table",children:[(0,r.jsx)(P.A,{children:(0,r.jsxs)(M.A,{children:[(0,r.jsx)(R.A,{align:"right",children:t("printerFilesystem")}),(0,r.jsx)(R.A,{align:"left"})]})}),(0,r.jsxs)(C.A,{children:[(0,r.jsxs)(M.A,{children:[(0,r.jsx)(R.A,{align:"right",children:t("total")}),(0,r.jsx)(R.A,{align:"left",children:_()(null==i?void 0:i.fs.total)})]}),(0,r.jsxs)(M.A,{children:[(0,r.jsx)(R.A,{align:"right",children:t("used")}),(0,r.jsx)(R.A,{align:"left",children:_()(null==i?void 0:i.fs.used)})]}),(0,r.jsxs)(M.A,{children:[(0,r.jsx)(R.A,{align:"right",children:t("free")}),(0,r.jsx)(R.A,{align:"left",children:t("freeImages",{count:Math.max(0,((null==i?void 0:i.fs.maximages)||0)-((null==i?void 0:i.dumps.length)||0))})})]}),(0,r.jsxs)(M.A,{children:[(0,r.jsx)(R.A,{align:"right",children:t("images")}),(0,r.jsx)(R.A,{align:"left",children:null==i?void 0:i.dumps.length})]})]})]})}):null]}):null};var k=n(69229),F=n(97004),O=n(39249),H=n(7062),L=n(9718),G=n(32521),U=n(83936),Y=n(41476),D=n(55988),W=function(){var e=(0,G.Z)().connectedDevices,t=(0,Y.A)(),n=t.setProgress,r=t.startProgress,i=t.stopProgress,o=(0,h.A)().setError,a=(0,U.W)().jsonImport,c=(0,p.useMemo)(function(){return(0,D.A)(a)},[a]),l=(0,s._)((0,p.useState)(!1),2),u=l[0],d=l[1],f=(0,s._)((0,p.useState)(!1),2),m=f[0],v=f[1],g=(0,p.useMemo)(function(){var t=e.find(function(e){return e.portDeviceType===L._Y.GBXCART});return t?t.device:null},[e]),A=!!g;return(0,p.useEffect)(function(){g&&(v(!0),g.readROMName().then(function(e){d("PHOTO"===e.trim()),v(!1)}))},[g]),(0,p.useEffect)(function(){var e;(e=(0,F._)(function(){return(0,O.YH)(this,function(e){switch(e.label){case 0:var t;if(!g)return[2];return[4,g.setup((0,H.BX)({setProgress:n,startProgress:(t=(0,F._)(function(e){return(0,O.YH)(this,function(t){return[2,r(e)]})}),function(e){return t.apply(this,arguments)}),stopProgress:i}))];case 1:return e.sent(),[2]}})}),function(){return e.apply(this,arguments)})()},[g,n,r,i]),{gbxCartAvailable:A,canReadPhotoRom:u,readRAMImage:(0,p.useCallback)((0,F._)(function(){var e,t,n;return(0,O.YH)(this,function(r){switch(r.label){case 0:if(!g)return[2];return v(!0),[4,g.readROMName()];case 1:switch(d("PHOTO"===(e=r.sent()).trim()),e){case"GAMEBOYCAMERA":case"GAMEBOYCAMERA G":t="int";break;case"POCKETCAMERA":t="jp";break;case"POCKETCAMERA_SN":t="hk";break;case"PHOTO":t="photo";break;case"PXLR":case"PXLR_SLSC":t="pxlr"}return[4,g.readRAMImage()];case 2:return n=r.sent(),v(!1),c([new File(n,"".concat(e.trim()||"dump",".sav"),{type:"application/octet-stream"})],{fromPrinter:!1,savFrameSet:t}),[2]}})}),[g,c]),readPhotoRom:(0,p.useCallback)((0,F._)(function(){var e,t;return(0,O.YH)(this,function(n){switch(n.label){case 0:if(!g)return[2];return v(!0),[4,g.readROMName()];case 1:if(d("PHOTO"===(e=n.sent()).trim()),"PHOTO"!==e)return o(Error("ROM is not PHOTO!")),[2];return[4,g.readPhotoAlbums()];case 2:return t=n.sent(),v(!1),c([new File(t,"".concat(e.trim()||"dump",".sav"),{type:"application/octet-stream"})],{fromPrinter:!1}),[2]}})}),[g,c,o]),readRomName:(0,p.useCallback)((0,F._)(function(){return(0,O.YH)(this,function(e){switch(e.label){case 0:if(!g)return[2];return[4,g.readROMName()];case 1:return console.log("ROM name",e.sent()),[2]}})}),[g]),busy:m}},K=n(86210);let X=function(){var e=(0,s._)((0,p.useState)(""),2),t=e[0],i=e[1],f=(0,o.c3)("Import"),m=(0,K.l)(),h=m.importPlainText,v=m.importFiles,g=m.printerUrl,A=m.exportJson,x=W(),I=x.gbxCartAvailable,j=x.readRAMImage,C=x.readPhotoRom,R=x.canReadPhotoRom,E=x.busy;return(0,p.useEffect)(function(){n.e(7963).then(n.bind(n,35796)).then(function(e){i(e.default.join("\n"))})},[]),(0,r.jsxs)(u.A,{direction:"column",gap:6,children:[g&&(0,r.jsx)(S,{}),g&&(0,r.jsx)(b,{}),(0,r.jsxs)(l.A,{variant:"contained",fullWidth:!0,children:[(0,r.jsxs)(c.A,{component:"label",variant:"contained",title:f("selectFiles"),children:[f("selectFiles"),(0,r.jsx)("input",{type:"file",tabIndex:-1,hidden:!0,multiple:!0,onChange:function(e){var t=e.target,n=t.files;n&&n.length&&v((0,a._)(n)),t.value=""}})]}),I&&(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(c.A,{onClick:j,title:f("importMemory"),disabled:E,children:f("importMemory")}),(0,r.jsx)(c.A,{onClick:C,disabled:!R||E,title:f("importAlbumRolls"),children:f("importAlbumRolls")})]})]}),(0,r.jsxs)(u.A,{flexDirection:"column",gap:1,justifyContent:"flex-end",justifyItems:"end",children:[(0,r.jsx)(d.A,{id:"import-plaintext",label:f("serialMonitorLabel"),multiline:!0,rows:20,value:t,onChange:function(e){i(e.target.value)}}),(0,r.jsx)(u.A,{direction:"row",justifyContent:"flex-end",children:(0,r.jsx)(c.A,{variant:"contained",onClick:function(){h(t)},children:f("import")})})]}),(0,r.jsxs)(l.A,{variant:"contained",fullWidth:!0,children:[(0,r.jsx)(c.A,{onClick:function(){return A(k.m.IMAGES)},title:f("exportImages"),children:f("exportImages")}),(0,r.jsx)(c.A,{onClick:function(){return A(k.m.SELECTED_IMAGES)},title:f("exportSelectedImages"),children:f("exportSelectedImages")})]})]})};function Z(){var e=(0,o.c3)("Navigation");return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(i.A,{component:"h1",variant:"h1",children:e("import")}),(0,r.jsx)(X,{})]})}},30891:(e,t,n)=>{"use strict";n.d(t,{G:()=>s,b:()=>a});var r=n(97004),i=n(39249),o=n(12115),s=(0,o.createContext)({callRemoteFunction:(0,r._)(function(){return(0,i.YH)(this,function(e){return[2]})})}),a=function(){return(0,o.useContext)(s)}},32521:(e,t,n)=>{"use strict";n.d(t,{U:()=>i,Z:()=>o});var r=n(12115),i=(0,r.createContext)({connectedDevices:[],isReceiving:!1,webSerialEnabled:!1,openWebSerial:function(){throw Error("PortsContext is missing")},webUSBEnabled:!1,openWebUSB:function(){throw Error("PortsContext is missing")},unknownDeviceResponse:null,hasInactiveDevices:!1}),o=function(){return(0,r.useContext)(i)}},41476:(e,t,n)=>{"use strict";n.d(t,{A:()=>c});var r=n(86447),i=n(693),o=n(60376),s=n(87025),a=n(51368);let c=(0,n(65453).v)(function(e,t){return{progress:[],progressLog:{git:[],dropbox:[]},resetProgressLog:function(){return e({progressLog:{git:[],dropbox:[]}})},startProgress:function(t){var n={id:(0,a.A)(),label:t,value:0};return e(function(e){var t=e.progress;return{progress:(0,s._)(t).concat([n])}}),n.id},setProgress:function(t,n){e(function(e){return{progress:e.progress.map(function(e){return e.id!==t?e:(0,o._)((0,i._)({},e),{value:n})})}})},stopProgress:function(t){e(function(e){return{progress:e.progress.filter(function(e){return e.id!==t})}})},setProgressLog:function(n,a){var c=t().progressLog;e({progressLog:(0,o._)((0,i._)({},c),(0,r._)({},n,[a].concat((0,s._)(c[n]))))})}}})},44296:(e,t,n)=>{"use strict";n.d(t,{A:()=>g});var r=n(693),i=n(60376),o=n(37414),s=n(12115),a=n(52596),c=n(17472),l=n(75955),u=n(10186),d=n(55170),p=n(90870);function f(e){return(0,p.Ay)("MuiTableContainer",e)}(0,d.A)("MuiTableContainer",["root"]);var m=n(95155),h=function(e){var t=e.classes;return(0,c.A)({root:["root"]},f,t)},v=(0,l.Ay)("div",{name:"MuiTableContainer",slot:"Root"})({width:"100%",overflowX:"auto"});let g=s.forwardRef(function(e,t){var n=(0,u.b)({props:e,name:"MuiTableContainer"}),s=n.className,c=n.component,l=void 0===c?"div":c,d=(0,o._)(n,["className","component"]),p=(0,i._)((0,r._)({},n),{component:l}),f=h(p);return(0,m.jsx)(v,(0,r._)({ref:t,as:l,className:(0,a.A)(f.root,s),ownerState:p},d))})},45686:(e,t,n)=>{"use strict";n.d(t,{n:()=>r});var r=function(e){return e.TESTFILE="testFile",e.CHECKPRINTER="checkPrinter",e.FETCHIMAGES="fetchImages",e.CLEARPRINTER="clearPrinter",e.TEAR="tear",e}({})},54581:(e,t,n)=>{"use strict";n.d(t,{A:()=>g});var r=n(693),i=n(37414),o=n(12115),s=n(52596),a=n(8302),c=n(13184),l=n(5300),u=n(64330),d=n(95155),p=n(34084),f=n(69077),m=n(54107),h=(0,n(55170).A)("MuiBox",["root"]),v=(0,f.A)();let g=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.themeId,n=e.defaultTheme,p=e.defaultClassName,f=void 0===p?"MuiBox-root":p,m=e.generateClassName,h=(0,a.Ay)("div",{shouldForwardProp:function(e){return"theme"!==e&&"sx"!==e&&"as"!==e}})(c.A);return o.forwardRef(function(e,o){var a=(0,u.A)(n),c=(0,l.A)(e),p=c.className,v=c.component,g=(0,i._)(c,["className","component"]);return(0,d.jsx)(h,(0,r._)({as:void 0===v?"div":v,ref:o,className:(0,s.A)(p,m?m(f):f),theme:t&&a[t]||a},g))})}({themeId:m.A,defaultTheme:v,defaultClassName:h.root,generateClassName:p.A.generate})},56033:(e,t,n)=>{"use strict";n.d(t,{A:()=>x});var r=n(693),i=n(60376),o=n(37414),s=n(12115),a=n(52596),c=n(17472),l=n(61391),u=n(75955),d=n(10186),p=n(55170),f=n(90870);function m(e){return(0,f.Ay)("MuiTableHead",e)}(0,p.A)("MuiTableHead",["root"]);var h=n(95155),v=function(e){var t=e.classes;return(0,c.A)({root:["root"]},m,t)},g=(0,u.Ay)("thead",{name:"MuiTableHead",slot:"Root"})({display:"table-header-group"}),A={variant:"head"},b="thead";let x=s.forwardRef(function(e,t){var n=(0,d.b)({props:e,name:"MuiTableHead"}),s=n.className,c=n.component,u=void 0===c?b:c,p=(0,o._)(n,["className","component"]),f=(0,i._)((0,r._)({},n),{component:u}),m=v(f);return(0,h.jsx)(l.A.Provider,{value:A,children:(0,h.jsx)(g,(0,r._)({as:u,className:(0,a.A)(m.root,s),ref:t,role:u===b?null:"rowgroup",ownerState:f},p))})})},77260:function(e){e.exports=function(){"use strict";var e=/^(b|B)$/,t={iec:{bits:["b","Kib","Mib","Gib","Tib","Pib","Eib","Zib","Yib"],bytes:["B","KiB","MiB","GiB","TiB","PiB","EiB","ZiB","YiB"]},jedec:{bits:["b","Kb","Mb","Gb","Tb","Pb","Eb","Zb","Yb"],bytes:["B","KB","MB","GB","TB","PB","EB","ZB","YB"]}},n={iec:["","kibi","mebi","gibi","tebi","pebi","exbi","zebi","yobi"],jedec:["","kilo","mega","giga","tera","peta","exa","zetta","yotta"]},r={floor:Math.floor,ceil:Math.ceil};function i(i){var o,s,a,c,l,u,d,p,f,m,h,v,g,A,b,x,I,j,C,R,E,P=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},M=[],T=0;if(isNaN(i))throw TypeError("Invalid number");if(a=!0===P.bits,b=!0===P.unix,v=!0===P.pad,s=P.base||2,g=void 0!==P.round?P.round:b?1:2,d=void 0!==P.locale?P.locale:"",p=P.localeOptions||{},x=void 0!==P.separator?P.separator:"",I=void 0!==P.spacer?P.spacer:b?"":" ",C=P.symbols||{},j=2===s&&P.standard||"jedec",h=P.output||"string",l=!0===P.fullform,u=P.fullforms instanceof Array?P.fullforms:[],o=void 0!==P.exponent?P.exponent:-1,R=r[P.roundingMethod]||Math.round,f=(m=Number(i))<0,c=s>2?1e3:1024,E=!1===isNaN(P.precision)?parseInt(P.precision,10):0,f&&(m=-m),(-1===o||isNaN(o))&&(o=Math.floor(Math.log(m)/Math.log(c)))<0&&(o=0),o>8&&(E>0&&(E+=8-o),o=8),"exponent"===h)return o;if(0===m)M[0]=0,A=M[1]=b?"":t[j][a?"bits":"bytes"][o];else{T=m/(2===s?Math.pow(2,10*o):Math.pow(1e3,o)),a&&(T*=8)>=c&&o<8&&(T/=c,o++);var _=Math.pow(10,o>0?g:0);M[0]=R(T*_)/_,M[0]===c&&o<8&&void 0===P.exponent&&(M[0]=1,o++),A=M[1]=10===s&&1===o?a?"kb":"kB":t[j][a?"bits":"bytes"][o],b&&(M[1]="jedec"===j?M[1].charAt(0):o>0?M[1].replace(/B$/,""):M[1],e.test(M[1])&&(M[0]=Math.floor(M[0]),M[1]=""))}if(f&&(M[0]=-M[0]),E>0&&(M[0]=M[0].toPrecision(E)),M[1]=C[M[1]]||M[1],!0===d?M[0]=M[0].toLocaleString():d.length>0?M[0]=M[0].toLocaleString(d,p):x.length>0&&(M[0]=M[0].toString().replace(".",x)),v&&!1===Number.isInteger(M[0])&&g>0){var w=x||".",y=M[0].toString().split(w),N=y[1]||"",B=N.length;M[0]="".concat(y[0]).concat(w).concat(N.padEnd(B+(g-B),"0"))}return l&&(M[1]=u[o]?u[o]:n[j][o]+(a?"bit":"byte")+(1===M[0]?"":"s")),"array"===h?M:"object"===h?{value:M[0],symbol:M[1],exponent:o,unit:A}:M.join(I)}return i.partial=function(e){return function(t){return i(t,e)}},i}()},86210:(e,t,n)=>{"use strict";n.d(t,{l:()=>c});var r=n(87025),i=n(83936),o=n(64768),s=n(46498),a=n(52166),c=function(){var e=(0,a.A)().printerUrl,t=(0,s.A)().printerFunctions,n=(0,i.W)().downloadSettings,c=t.length>0,l=(0,o.A)().handleFileImport;return{printerUrl:e?"".concat(e,"remote.html"):void 0,printerConnected:c,importPlainText:function(e){l([new File((0,r._)(e),"Text input.txt",{type:"text/plain"})])},importFiles:l,exportJson:function(e){return n(e)}}}},99513:(e,t,n)=>{Promise.resolve().then(n.bind(n,12199))}},e=>{var t=t=>e(e.s=t);e.O(0,[7652,4453,700,8250,5232,7271,2491,3701,3127,9710,7642,7890,6672,4991,1487,9665,1936,8348,1760,2973,4768,8441,1684,7358],()=>t(99513)),_N_E=e.O()}]);