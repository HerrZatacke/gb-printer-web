(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[5862],{9718:(e,t,n)=>{"use strict";n.d(t,{_Y:()=>i,k4:()=>o,qt:()=>r});var r=function(e){return e.USB="USB",e.SERIAL="SERIAL",e}({}),i=function(e){return e.INACTIVE="inactive",e.PACKET_CAPTURE="packet_capture",e.SUPER_PRINTER_INTERFACE="super_printer_interface",e.GBXCART="gbxcart",e}({}),o=[{vendorId:9025,productId:32822},{vendorId:9025,productId:32823},{vendorId:9025,productId:32845},{vendorId:9025,productId:32846},{vendorId:9025,productId:32847},{vendorId:9025,productId:32848},{vendorId:9025,productId:32850},{vendorId:9025,productId:32851},{vendorId:9025,productId:32852},{vendorId:9025,productId:32853},{vendorId:9025,productId:32854},{vendorId:9025,productId:32855},{vendorId:9114}]},12199:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>Z});var r=n(95155),i=n(700),o=n(17652),a=n(78538),s=n(87025),l=n(7642),u=n(61487),c=n(7068),d=n(78449),f=n(12115),p=n(53267),m=n(14426),h=n(46498),v=n(52166);let g=function(e){var t=(0,v.A)(),n=t.printerUrl,r=t.printerParams,i=r?"#".concat(encodeURI(r)):"",o=n?"".concat(n,"remote.html").concat(i):void 0,s=(0,h.A)().printerFunctions.length>0,l=(0,a._)((0,f.useState)(!1),2),u=l[0],c=l[1],d=(0,a._)((0,f.useState)(!1),2),p=d[0],m=d[1],g=(0,f.useRef)(void 0);return(0,f.useEffect)(function(){return u||p||g.current||(g.current=window.setTimeout(function(){m(!0)},e)),function(){window.clearTimeout(g.current),g.current=void 0}},[p,u,e]),!u&&s&&(window.clearTimeout(g.current),g.current=void 0,c(!0)),{failed:p,loaded:u,printerUrl:o,printerConnected:s}};var b=function(e){if(!e)return!1;if(e.startsWith("/"))return!0;var t=new URL(e).protocol,n=new URL(window.location.href).protocol;return"http:"===n||n===t};let x=function(){var e=(0,o.c3)("ConnectPrinter"),t=g(3e4),n=t.printerUrl,i=t.failed,a=t.loaded,s=t.printerConnected;return b(n)&&!i?(0,r.jsxs)(p.default,{sx:{display:"flex",justifyContent:"center"},children:[(0,r.jsx)("iframe",{style:{position:"absolute",top:"80px",left:"-200vw",width:"480px",height:"90px"},src:n}),!a&&(0,r.jsx)(m.default,{color:"secondary"})]}):(!s||i)&&(0,r.jsx)(u.default,{variant:"contained",fullWidth:!0,children:(0,r.jsx)(l.default,{onClick:function(){window.open(n,"remoteprinter","width=480,height=400")},children:e("openPrinterPage")})})};var A=n(9665),I=n(18407),j=n(17976),C=n(99776),R=n(64263),E=n(44296),P=n(56033),M=n(90404),T=n(77260),_=n.n(T),w=n(45686),y=n(30891),N=function(){var e=(0,h.A)(),t=e.printerData,n=e.printerFunctions,r=e.printerBusy,i=(0,y.b)().callRemoteFunction,o=n.length>0;return{printerData:t,printerFunctions:n,printerBusy:r,printerConnected:o,callRemoteFunction:i}},B={testFile:"functions.printTestImage",checkPrinter:"functions.checkPrinter",fetchImages:"",clearPrinter:"functions.clearPrinter",tear:"functions.tear"};let S=function(){var e,t=(0,o.c3)("PrinterReport"),n=N(),i=n.printerData,a=n.printerFunctions,s=n.printerConnected,d=n.callRemoteFunction,p=n.printerBusy,m=(0,f.useMemo)(function(){var e,n=(null==i||null==(e=i.dumps)?void 0:e.length)||0;return a.includes(w.n.TEAR)||!n?t("functions.fetchImagesGeneric"):t("functions.fetchImagesCount",{count:n})},[null==i||null==(e=i.dumps)?void 0:e.length,a,t]);return s?(0,r.jsxs)(c.default,{direction:"column",gap:2,children:[(0,r.jsx)(u.default,{variant:"contained",fullWidth:!0,children:a.map(function(e){var n;return(0,r.jsx)(l.default,{disabled:p||[w.n.FETCHIMAGES,w.n.CLEARPRINTER,w.n.TEAR].includes(e)&&!(null==i||null==(n=i.dumps)?void 0:n.length),onClick:function(){return d(e)},children:e===w.n.FETCHIMAGES?m:t(B[e])},e)})}),(null==i?void 0:i.message)?(0,r.jsx)(A.default,{severity:"info",children:null==i?void 0:i.message}):null,(null==i?void 0:i.fs)&&(null==i?void 0:i.dumps)?(0,r.jsx)(E.default,{component:I.default,children:(0,r.jsxs)(j.default,{sx:{minWidth:650},size:"small","aria-label":"a dense table",children:[(0,r.jsx)(P.default,{children:(0,r.jsxs)(M.default,{children:[(0,r.jsx)(R.default,{align:"right",children:t("printerFilesystem")}),(0,r.jsx)(R.default,{align:"left"})]})}),(0,r.jsxs)(C.default,{children:[(0,r.jsxs)(M.default,{children:[(0,r.jsx)(R.default,{align:"right",children:t("total")}),(0,r.jsx)(R.default,{align:"left",children:_()(null==i?void 0:i.fs.total)})]}),(0,r.jsxs)(M.default,{children:[(0,r.jsx)(R.default,{align:"right",children:t("used")}),(0,r.jsx)(R.default,{align:"left",children:_()(null==i?void 0:i.fs.used)})]}),(0,r.jsxs)(M.default,{children:[(0,r.jsx)(R.default,{align:"right",children:t("free")}),(0,r.jsx)(R.default,{align:"left",children:t("freeImages",{count:Math.max(0,((null==i?void 0:i.fs.maximages)||0)-((null==i?void 0:i.dumps.length)||0))})})]}),(0,r.jsxs)(M.default,{children:[(0,r.jsx)(R.default,{align:"right",children:t("images")}),(0,r.jsx)(R.default,{align:"left",children:null==i?void 0:i.dumps.length})]})]})]})}):null]}):null};var k=n(69229),F=n(97004),O=n(39249),H=n(7062),L=n(9718),G=n(32521),U=n(83936),Y=n(41476),D=n(55988),W=function(){var e=(0,G.Z)().connectedDevices,t=(0,Y.A)(),n=t.setProgress,r=t.startProgress,i=t.stopProgress,o=(0,h.A)().setError,s=(0,U.W)().jsonImport,l=(0,f.useMemo)(function(){return(0,D.A)(s)},[s]),u=(0,a._)((0,f.useState)(!1),2),c=u[0],d=u[1],p=(0,a._)((0,f.useState)(!1),2),m=p[0],v=p[1],g=(0,f.useMemo)(function(){var t=e.find(function(e){return e.portDeviceType===L._Y.GBXCART});return t?t.device:null},[e]),b=!!g;return(0,f.useEffect)(function(){g&&(v(!0),g.readROMName().then(function(e){d("PHOTO"===e.trim()),v(!1)}))},[g]),(0,f.useEffect)(function(){var e;(e=(0,F._)(function(){return(0,O.YH)(this,function(e){switch(e.label){case 0:var t;if(!g)return[2];return[4,g.setup((0,H.BX)({setProgress:n,startProgress:(t=(0,F._)(function(e){return(0,O.YH)(this,function(t){return[2,r(e)]})}),function(e){return t.apply(this,arguments)}),stopProgress:i}))];case 1:return e.sent(),[2]}})}),function(){return e.apply(this,arguments)})()},[g,n,r,i]),{gbxCartAvailable:b,canReadPhotoRom:c,readRAMImage:(0,f.useCallback)((0,F._)(function(){var e,t,n;return(0,O.YH)(this,function(r){switch(r.label){case 0:if(!g)return[2];return v(!0),[4,g.readROMName()];case 1:switch(d("PHOTO"===(e=r.sent()).trim()),e){case"GAMEBOYCAMERA":case"GAMEBOYCAMERA G":t="int";break;case"POCKETCAMERA":t="jp";break;case"POCKETCAMERA_SN":t="hk";break;case"PHOTO":t="photo";break;case"PXLR":case"PXLR_SLSC":t="pxlr"}return[4,g.readRAMImage()];case 2:return n=r.sent(),v(!1),l([new File(n,"".concat(e.trim()||"dump",".sav"),{type:"application/octet-stream"})],{fromPrinter:!1,savFrameSet:t}),[2]}})}),[g,l]),readPhotoRom:(0,f.useCallback)((0,F._)(function(){var e,t;return(0,O.YH)(this,function(n){switch(n.label){case 0:if(!g)return[2];return v(!0),[4,g.readROMName()];case 1:if(d("PHOTO"===(e=n.sent()).trim()),"PHOTO"!==e)return o(Error("ROM is not PHOTO!")),[2];return[4,g.readPhotoAlbums()];case 2:return t=n.sent(),v(!1),l([new File(t,"".concat(e.trim()||"dump",".sav"),{type:"application/octet-stream"})],{fromPrinter:!1}),[2]}})}),[g,l,o]),readRomName:(0,f.useCallback)((0,F._)(function(){return(0,O.YH)(this,function(e){switch(e.label){case 0:if(!g)return[2];return[4,g.readROMName()];case 1:return console.log("ROM name",e.sent()),[2]}})}),[g]),busy:m}},K=n(86210);let X=function(){var e=(0,a._)((0,f.useState)(""),2),t=e[0],i=e[1],p=(0,o.c3)("Import"),m=(0,K.l)(),h=m.importPlainText,v=m.importFiles,g=m.printerUrl,b=m.exportJson,A=W(),I=A.gbxCartAvailable,j=A.readRAMImage,C=A.readPhotoRom,R=A.canReadPhotoRom,E=A.busy;return(0,f.useEffect)(function(){n.e(7963).then(n.bind(n,35796)).then(function(e){i(e.default.join("\n"))})},[]),(0,r.jsxs)(c.default,{direction:"column",gap:6,children:[g&&(0,r.jsx)(S,{}),g&&(0,r.jsx)(x,{}),(0,r.jsxs)(u.default,{variant:"contained",fullWidth:!0,children:[(0,r.jsxs)(l.default,{component:"label",variant:"contained",title:p("selectFiles"),children:[p("selectFiles"),(0,r.jsx)("input",{type:"file",tabIndex:-1,hidden:!0,multiple:!0,onChange:function(e){var t=e.target,n=t.files;n&&n.length&&v((0,s._)(n)),t.value=""}})]}),I&&(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(l.default,{onClick:j,title:p("importMemory"),disabled:E,children:p("importMemory")}),(0,r.jsx)(l.default,{onClick:C,disabled:!R||E,title:p("importAlbumRolls"),children:p("importAlbumRolls")})]})]}),(0,r.jsxs)(c.default,{flexDirection:"column",gap:1,justifyContent:"flex-end",justifyItems:"end",children:[(0,r.jsx)(d.default,{id:"import-plaintext",label:p("serialMonitorLabel"),multiline:!0,rows:20,value:t,onChange:function(e){i(e.target.value)}}),(0,r.jsx)(c.default,{direction:"row",justifyContent:"flex-end",children:(0,r.jsx)(l.default,{variant:"contained",onClick:function(){h(t)},children:p("import")})})]}),(0,r.jsxs)(u.default,{variant:"contained",fullWidth:!0,children:[(0,r.jsx)(l.default,{onClick:function(){return b(k.m.IMAGES)},title:p("exportImages"),children:p("exportImages")}),(0,r.jsx)(l.default,{onClick:function(){return b(k.m.SELECTED_IMAGES)},title:p("exportSelectedImages"),children:p("exportSelectedImages")})]})]})};function Z(){var e=(0,o.c3)("Navigation");return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(i.default,{component:"h1",variant:"h1",children:e("import")}),(0,r.jsx)(X,{})]})}},30891:(e,t,n)=>{"use strict";n.d(t,{G:()=>a,b:()=>s});var r=n(97004),i=n(39249),o=n(12115),a=(0,o.createContext)({callRemoteFunction:(0,r._)(function(){return(0,i.YH)(this,function(e){return[2]})})}),s=function(){return(0,o.useContext)(a)}},32521:(e,t,n)=>{"use strict";n.d(t,{U:()=>i,Z:()=>o});var r=n(12115),i=(0,r.createContext)({connectedDevices:[],isReceiving:!1,webSerialEnabled:!1,openWebSerial:function(){throw Error("PortsContext is missing")},webUSBEnabled:!1,openWebUSB:function(){throw Error("PortsContext is missing")},unknownDeviceResponse:null,hasInactiveDevices:!1}),o=function(){return(0,r.useContext)(i)}},41476:(e,t,n)=>{"use strict";n.d(t,{A:()=>l});var r=n(86447),i=n(693),o=n(60376),a=n(87025),s=n(51368);let l=(0,n(65453).v)(function(e,t){return{progress:[],progressLog:{git:[],dropbox:[]},resetProgressLog:function(){return e({progressLog:{git:[],dropbox:[]}})},startProgress:function(t){var n={id:(0,s.A)(),label:t,value:0};return e(function(e){var t=e.progress;return{progress:(0,a._)(t).concat([n])}}),n.id},setProgress:function(t,n){e(function(e){return{progress:e.progress.map(function(e){return e.id!==t?e:(0,o._)((0,i._)({},e),{value:n})})}})},stopProgress:function(t){e(function(e){return{progress:e.progress.filter(function(e){return e.id!==t})}})},setProgressLog:function(n,s){var l=t().progressLog;e({progressLog:(0,o._)((0,i._)({},l),(0,r._)({},n,[s].concat((0,a._)(l[n]))))})}}})},44296:(e,t,n)=>{"use strict";n.d(t,{default:()=>g});var r=n(693),i=n(60376),o=n(37414),a=n(12115),s=n(52596),l=n(17472),u=n(75955),c=n(10186),d=n(55170),f=n(90870);function p(e){return(0,f.Ay)("MuiTableContainer",e)}(0,d.A)("MuiTableContainer",["root"]);var m=n(95155),h=function(e){var t=e.classes;return(0,l.A)({root:["root"]},p,t)},v=(0,u.default)("div",{name:"MuiTableContainer",slot:"Root"})({width:"100%",overflowX:"auto"});let g=a.forwardRef(function(e,t){var n=(0,c.b)({props:e,name:"MuiTableContainer"}),a=n.className,l=n.component,u=void 0===l?"div":l,d=(0,o._)(n,["className","component"]),f=(0,i._)((0,r._)({},n),{component:u}),p=h(f);return(0,m.jsx)(v,(0,r._)({ref:t,as:u,className:(0,s.A)(p.root,a),ownerState:f},d))})},45686:(e,t,n)=>{"use strict";n.d(t,{n:()=>r});var r=function(e){return e.TESTFILE="testFile",e.CHECKPRINTER="checkPrinter",e.FETCHIMAGES="fetchImages",e.CLEARPRINTER="clearPrinter",e.TEAR="tear",e}({})},53267:(e,t,n)=>{"use strict";n.d(t,{default:()=>u});var r=n(67908),i=n(34084),o=n(69077),a=n(54107),s=(0,n(55170).A)("MuiBox",["root"]),l=(0,o.A)();let u=(0,r.default)({themeId:a.A,defaultTheme:l,defaultClassName:s.root,generateClassName:i.A.generate})},56033:(e,t,n)=>{"use strict";n.d(t,{default:()=>A});var r=n(693),i=n(60376),o=n(37414),a=n(12115),s=n(52596),l=n(17472),u=n(61391),c=n(75955),d=n(10186),f=n(55170),p=n(90870);function m(e){return(0,p.Ay)("MuiTableHead",e)}(0,f.A)("MuiTableHead",["root"]);var h=n(95155),v=function(e){var t=e.classes;return(0,l.A)({root:["root"]},m,t)},g=(0,c.default)("thead",{name:"MuiTableHead",slot:"Root"})({display:"table-header-group"}),b={variant:"head"},x="thead";let A=a.forwardRef(function(e,t){var n=(0,d.b)({props:e,name:"MuiTableHead"}),a=n.className,l=n.component,c=void 0===l?x:l,f=(0,o._)(n,["className","component"]),p=(0,i._)((0,r._)({},n),{component:c}),m=v(p);return(0,h.jsx)(u.A.Provider,{value:b,children:(0,h.jsx)(g,(0,r._)({as:c,className:(0,s.A)(m.root,a),ref:t,role:c===x?null:"rowgroup",ownerState:p},f))})})},67908:(e,t,n)=>{"use strict";n.d(t,{default:()=>f});var r=n(693),i=n(37414),o=n(12115),a=n(52596),s=n(46879),l=n(13184),u=n(5300),c=n(64330),d=n(95155);function f(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.themeId,n=e.defaultTheme,f=e.defaultClassName,p=void 0===f?"MuiBox-root":f,m=e.generateClassName,h=(0,s.default)("div",{shouldForwardProp:function(e){return"theme"!==e&&"sx"!==e&&"as"!==e}})(l.A);return o.forwardRef(function(e,o){var s=(0,c.default)(n),l=(0,u.A)(e),f=l.className,v=l.component,g=(0,i._)(l,["className","component"]);return(0,d.jsx)(h,(0,r._)({as:void 0===v?"div":v,ref:o,className:(0,a.A)(f,m?m(p):p),theme:t&&s[t]||s},g))})}},77260:function(e){e.exports=function(){"use strict";var e=/^(b|B)$/,t={iec:{bits:["b","Kib","Mib","Gib","Tib","Pib","Eib","Zib","Yib"],bytes:["B","KiB","MiB","GiB","TiB","PiB","EiB","ZiB","YiB"]},jedec:{bits:["b","Kb","Mb","Gb","Tb","Pb","Eb","Zb","Yb"],bytes:["B","KB","MB","GB","TB","PB","EB","ZB","YB"]}},n={iec:["","kibi","mebi","gibi","tebi","pebi","exbi","zebi","yobi"],jedec:["","kilo","mega","giga","tera","peta","exa","zetta","yotta"]},r={floor:Math.floor,ceil:Math.ceil};function i(i){var o,a,s,l,u,c,d,f,p,m,h,v,g,b,x,A,I,j,C,R,E,P=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},M=[],T=0;if(isNaN(i))throw TypeError("Invalid number");if(s=!0===P.bits,x=!0===P.unix,v=!0===P.pad,a=P.base||2,g=void 0!==P.round?P.round:x?1:2,d=void 0!==P.locale?P.locale:"",f=P.localeOptions||{},A=void 0!==P.separator?P.separator:"",I=void 0!==P.spacer?P.spacer:x?"":" ",C=P.symbols||{},j=2===a&&P.standard||"jedec",h=P.output||"string",u=!0===P.fullform,c=P.fullforms instanceof Array?P.fullforms:[],o=void 0!==P.exponent?P.exponent:-1,R=r[P.roundingMethod]||Math.round,p=(m=Number(i))<0,l=a>2?1e3:1024,E=!1===isNaN(P.precision)?parseInt(P.precision,10):0,p&&(m=-m),(-1===o||isNaN(o))&&(o=Math.floor(Math.log(m)/Math.log(l)))<0&&(o=0),o>8&&(E>0&&(E+=8-o),o=8),"exponent"===h)return o;if(0===m)M[0]=0,b=M[1]=x?"":t[j][s?"bits":"bytes"][o];else{T=m/(2===a?Math.pow(2,10*o):Math.pow(1e3,o)),s&&(T*=8)>=l&&o<8&&(T/=l,o++);var _=Math.pow(10,o>0?g:0);M[0]=R(T*_)/_,M[0]===l&&o<8&&void 0===P.exponent&&(M[0]=1,o++),b=M[1]=10===a&&1===o?s?"kb":"kB":t[j][s?"bits":"bytes"][o],x&&(M[1]="jedec"===j?M[1].charAt(0):o>0?M[1].replace(/B$/,""):M[1],e.test(M[1])&&(M[0]=Math.floor(M[0]),M[1]=""))}if(p&&(M[0]=-M[0]),E>0&&(M[0]=M[0].toPrecision(E)),M[1]=C[M[1]]||M[1],!0===d?M[0]=M[0].toLocaleString():d.length>0?M[0]=M[0].toLocaleString(d,f):A.length>0&&(M[0]=M[0].toString().replace(".",A)),v&&!1===Number.isInteger(M[0])&&g>0){var w=A||".",y=M[0].toString().split(w),N=y[1]||"",B=N.length;M[0]="".concat(y[0]).concat(w).concat(N.padEnd(B+(g-B),"0"))}return u&&(M[1]=c[o]?c[o]:n[j][o]+(s?"bit":"byte")+(1===M[0]?"":"s")),"array"===h?M:"object"===h?{value:M[0],symbol:M[1],exponent:o,unit:b}:M.join(I)}return i.partial=function(e){return function(t){return i(t,e)}},i}()},86210:(e,t,n)=>{"use strict";n.d(t,{l:()=>l});var r=n(87025),i=n(83936),o=n(64768),a=n(46498),s=n(52166),l=function(){var e=(0,s.A)().printerUrl,t=(0,a.A)().printerFunctions,n=(0,i.W)().downloadSettings,l=t.length>0,u=(0,o.A)().handleFileImport;return{printerUrl:e?"".concat(e,"remote.html"):void 0,printerConnected:l,importPlainText:function(e){u([new File((0,r._)(e),"Text input.txt",{type:"text/plain"})])},importFiles:u,exportJson:function(e){return n(e)}}}},99513:(e,t,n)=>{Promise.resolve().then(n.bind(n,12199))}},e=>{var t=t=>e(e.s=t);e.O(0,[7652,4453,700,7859,7271,8250,2491,6139,3313,7642,7890,8449,1487,6672,9665,1936,8348,1760,3936,4768,8441,1684,7358],()=>t(99513)),_N_E=e.O()}]);