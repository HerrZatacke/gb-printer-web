(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[5862],{9718:(e,t,r)=>{"use strict";r.d(t,{_Y:()=>a,k4:()=>l,qt:()=>o,vK:()=>s});var n,i=r(86447),o=function(e){return e.USB="USB",e.SERIAL="SERIAL",e}({}),a=function(e){return e.UNKNOWN="unknown",e.INACTIVE="inactive",e.PACKET_CAPTURE="packet_capture",e.SUPER_PRINTER_INTERFACE="super_printer_interface",e.GBXCART="gbxcart",e}({}),s=(n={},(0,i._)(n,"unknown","Unknown Device"),(0,i._)(n,"inactive","Inactive Device"),(0,i._)(n,"packet_capture","Arduino Gameboy Printer Emulator"),(0,i._)(n,"super_printer_interface","Super Printer Interface"),(0,i._)(n,"gbxcart","Cartridge Reader (LK Firmware)"),n),l=[{vendorId:9025,productId:32822},{vendorId:9025,productId:32823},{vendorId:9025,productId:32845},{vendorId:9025,productId:32846},{vendorId:9025,productId:32847},{vendorId:9025,productId:32848},{vendorId:9025,productId:32850},{vendorId:9025,productId:32851},{vendorId:9025,productId:32852},{vendorId:9025,productId:32853},{vendorId:9025,productId:32854},{vendorId:9025,productId:32855},{vendorId:9114}]},30891:(e,t,r)=>{"use strict";r.d(t,{G:()=>a,b:()=>s});var n=r(97004),i=r(39249),o=r(12115),a=(0,o.createContext)({callRemoteFunction:(0,n._)(function(){return(0,i.YH)(this,function(e){return[2]})})}),s=function(){return(0,o.useContext)(a)}},32521:(e,t,r)=>{"use strict";r.d(t,{U:()=>i,Z:()=>o});var n=r(12115),i=(0,n.createContext)({connectedDevices:[],isReceiving:!1,webSerialEnabled:!1,openWebSerial:function(){throw Error("PortsContext is missing")},webUSBEnabled:!1,openWebUSB:function(){throw Error("PortsContext is missing")},unknownDeviceResponse:null,hasInactiveDevices:!1}),o=function(){return(0,n.useContext)(i)}},41476:(e,t,r)=>{"use strict";r.d(t,{A:()=>l});var n=r(86447),i=r(693),o=r(60376),a=r(87025),s=r(51368);let l=(0,r(65453).v)(function(e,t){return{progress:[],progressLog:{git:[],dropbox:[]},resetProgressLog:function(){return e({progressLog:{git:[],dropbox:[]}})},startProgress:function(t){var r={id:(0,s.A)(),label:t,value:0};return e(function(e){var t=e.progress;return{progress:(0,a._)(t).concat([r])}}),r.id},setProgress:function(t,r){e(function(e){return{progress:e.progress.map(function(e){return e.id!==t?e:(0,o._)((0,i._)({},e),{value:r})})}})},stopProgress:function(t){e(function(e){return{progress:e.progress.filter(function(e){return e.id!==t})}})},setProgressLog:function(r,s){var l=t().progressLog;e({progressLog:(0,o._)((0,i._)({},l),(0,n._)({},r,[s].concat((0,a._)(l[r]))))})}}})},44296:(e,t,r)=>{"use strict";r.d(t,{default:()=>g});var n=r(693),i=r(60376),o=r(37414),a=r(12115),s=r(52596),l=r(17472),u=r(75955),c=r(10186),d=r(55170),f=r(90870);function p(e){return(0,f.Ay)("MuiTableContainer",e)}(0,d.A)("MuiTableContainer",["root"]);var m=r(95155),h=function(e){var t=e.classes;return(0,l.A)({root:["root"]},p,t)},v=(0,u.default)("div",{name:"MuiTableContainer",slot:"Root"})({width:"100%",overflowX:"auto"});let g=a.forwardRef(function(e,t){var r=(0,c.b)({props:e,name:"MuiTableContainer"}),a=r.className,l=r.component,u=void 0===l?"div":l,d=(0,o._)(r,["className","component"]),f=(0,i._)((0,n._)({},r),{component:u}),p=h(f);return(0,m.jsx)(v,(0,n._)({ref:t,as:u,className:(0,s.A)(p.root,a),ownerState:f},d))})},45686:(e,t,r)=>{"use strict";r.d(t,{n:()=>n});var n=function(e){return e.TESTFILE="testFile",e.CHECKPRINTER="checkPrinter",e.FETCHIMAGES="fetchImages",e.CLEARPRINTER="clearPrinter",e.TEAR="tear",e}({})},53267:(e,t,r)=>{"use strict";r.d(t,{default:()=>u});var n=r(67908),i=r(34084),o=r(69077),a=r(54107),s=(0,r(55170).A)("MuiBox",["root"]),l=(0,o.A)();let u=(0,n.default)({themeId:a.A,defaultTheme:l,defaultClassName:s.root,generateClassName:i.A.generate})},56033:(e,t,r)=>{"use strict";r.d(t,{default:()=>A});var n=r(693),i=r(60376),o=r(37414),a=r(12115),s=r(52596),l=r(17472),u=r(61391),c=r(75955),d=r(10186),f=r(55170),p=r(90870);function m(e){return(0,p.Ay)("MuiTableHead",e)}(0,f.A)("MuiTableHead",["root"]);var h=r(95155),v=function(e){var t=e.classes;return(0,l.A)({root:["root"]},m,t)},g=(0,c.default)("thead",{name:"MuiTableHead",slot:"Root"})({display:"table-header-group"}),b={variant:"head"},x="thead";let A=a.forwardRef(function(e,t){var r=(0,d.b)({props:e,name:"MuiTableHead"}),a=r.className,l=r.component,c=void 0===l?x:l,f=(0,o._)(r,["className","component"]),p=(0,i._)((0,n._)({},r),{component:c}),m=v(p);return(0,h.jsx)(u.A.Provider,{value:b,children:(0,h.jsx)(g,(0,n._)({as:c,className:(0,s.A)(m.root,a),ref:t,role:c===x?null:"rowgroup",ownerState:p},f))})})},67908:(e,t,r)=>{"use strict";r.d(t,{default:()=>f});var n=r(693),i=r(37414),o=r(12115),a=r(52596),s=r(46879),l=r(13184),u=r(5300),c=r(64330),d=r(95155);function f(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.themeId,r=e.defaultTheme,f=e.defaultClassName,p=void 0===f?"MuiBox-root":f,m=e.generateClassName,h=(0,s.default)("div",{shouldForwardProp:function(e){return"theme"!==e&&"sx"!==e&&"as"!==e}})(l.A);return o.forwardRef(function(e,o){var s=(0,c.default)(r),l=(0,u.A)(e),f=l.className,v=l.component,g=(0,i._)(l,["className","component"]);return(0,d.jsx)(h,(0,n._)({as:void 0===v?"div":v,ref:o,className:(0,a.A)(f,m?m(p):p),theme:t&&s[t]||s},g))})}},77260:function(e){e.exports=function(){"use strict";var e=/^(b|B)$/,t={iec:{bits:["b","Kib","Mib","Gib","Tib","Pib","Eib","Zib","Yib"],bytes:["B","KiB","MiB","GiB","TiB","PiB","EiB","ZiB","YiB"]},jedec:{bits:["b","Kb","Mb","Gb","Tb","Pb","Eb","Zb","Yb"],bytes:["B","KB","MB","GB","TB","PB","EB","ZB","YB"]}},r={iec:["","kibi","mebi","gibi","tebi","pebi","exbi","zebi","yobi"],jedec:["","kilo","mega","giga","tera","peta","exa","zetta","yotta"]},n={floor:Math.floor,ceil:Math.ceil};function i(i){var o,a,s,l,u,c,d,f,p,m,h,v,g,b,x,A,E,C,R,I,j,P=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},_=[],T=0;if(isNaN(i))throw TypeError("Invalid number");if(s=!0===P.bits,x=!0===P.unix,v=!0===P.pad,a=P.base||2,g=void 0!==P.round?P.round:x?1:2,d=void 0!==P.locale?P.locale:"",f=P.localeOptions||{},A=void 0!==P.separator?P.separator:"",E=void 0!==P.spacer?P.spacer:x?"":" ",R=P.symbols||{},C=2===a&&P.standard||"jedec",h=P.output||"string",u=!0===P.fullform,c=P.fullforms instanceof Array?P.fullforms:[],o=void 0!==P.exponent?P.exponent:-1,I=n[P.roundingMethod]||Math.round,p=(m=Number(i))<0,l=a>2?1e3:1024,j=!1===isNaN(P.precision)?parseInt(P.precision,10):0,p&&(m=-m),(-1===o||isNaN(o))&&(o=Math.floor(Math.log(m)/Math.log(l)))<0&&(o=0),o>8&&(j>0&&(j+=8-o),o=8),"exponent"===h)return o;if(0===m)_[0]=0,b=_[1]=x?"":t[C][s?"bits":"bytes"][o];else{T=m/(2===a?Math.pow(2,10*o):Math.pow(1e3,o)),s&&(T*=8)>=l&&o<8&&(T/=l,o++);var w=Math.pow(10,o>0?g:0);_[0]=I(T*w)/w,_[0]===l&&o<8&&void 0===P.exponent&&(_[0]=1,o++),b=_[1]=10===a&&1===o?s?"kb":"kB":t[C][s?"bits":"bytes"][o],x&&(_[1]="jedec"===C?_[1].charAt(0):o>0?_[1].replace(/B$/,""):_[1],e.test(_[1])&&(_[0]=Math.floor(_[0]),_[1]=""))}if(p&&(_[0]=-_[0]),j>0&&(_[0]=_[0].toPrecision(j)),_[1]=R[_[1]]||_[1],!0===d?_[0]=_[0].toLocaleString():d.length>0?_[0]=_[0].toLocaleString(d,f):A.length>0&&(_[0]=_[0].toString().replace(".",A)),v&&!1===Number.isInteger(_[0])&&g>0){var M=A||".",y=_[0].toString().split(M),N=y[1]||"",S=N.length;_[0]="".concat(y[0]).concat(M).concat(N.padEnd(S+(g-S),"0"))}return u&&(_[1]=c[o]?c[o]:r[C][o]+(s?"bit":"byte")+(1===_[0]?"":"s")),"array"===h?_:"object"===h?{value:_[0],symbol:_[1],exponent:o,unit:b}:_.join(E)}return i.partial=function(e){return function(t){return i(t,e)}},i}()},81547:(e,t,r)=>{"use strict";r.d(t,{default:()=>K});var n=r(78538),i=r(87025),o=r(95155),a=r(7642),s=r(61487),l=r(7068),u=r(78449),c=r(12115),d=r(53267),f=r(14426),p=r(46498),m=r(52166);let h=function(e){var t=(0,m.A)(),r=t.printerUrl,i=t.printerParams,o=i?"#".concat(encodeURI(i)):"",a=r?"".concat(r,"remote.html").concat(o):void 0,s=(0,p.A)().printerFunctions.length>0,l=(0,n._)((0,c.useState)(!1),2),u=l[0],d=l[1],f=(0,n._)((0,c.useState)(!1),2),h=f[0],v=f[1],g=(0,c.useRef)(void 0);return(0,c.useEffect)(function(){return u||h||g.current||(g.current=window.setTimeout(function(){v(!0)},e)),function(){window.clearTimeout(g.current),g.current=void 0}},[h,u,e]),!u&&s&&(window.clearTimeout(g.current),g.current=void 0,d(!0)),{failed:h,loaded:u,printerUrl:a,printerConnected:s}};var v=function(e){if(!e)return!1;if(e.startsWith("/"))return!0;var t=new URL(e).protocol,r=new URL(window.location.href).protocol;return"http:"===r||r===t};let g=function(){var e=h(3e4),t=e.printerUrl,r=e.failed,n=e.loaded,i=e.printerConnected;return v(t)&&!r?(0,o.jsxs)(d.default,{sx:{display:"flex",justifyContent:"center"},children:[(0,o.jsx)("iframe",{style:{position:"absolute",top:"80px",left:"-200vw",width:"480px",height:"90px"},title:"Transfer window",src:t}),!n&&(0,o.jsx)(f.default,{color:"secondary"})]}):(!i||r)&&(0,o.jsx)(s.default,{variant:"contained",fullWidth:!0,children:(0,o.jsx)(a.default,{onClick:function(){window.open(t,"remoteprinter","width=480,height=400")},children:"Open printer page"})})};var b=r(9665),x=r(18407),A=r(17976),E=r(99776),C=r(64263),R=r(44296),I=r(56033),j=r(90404),P=r(77260),_=r.n(P),T=r(45686),w=r(30891),M=function(){var e=(0,p.A)(),t=e.printerData,r=e.printerFunctions,n=e.printerBusy,i=(0,w.b)().callRemoteFunction,o=r.length>0;return{printerData:t,printerFunctions:r,printerBusy:n,printerConnected:o,callRemoteFunction:i}},y={testFile:"Print test image",checkPrinter:"Check Printer",fetchImages:"",clearPrinter:"Clear Printer",tear:"Tear"};let N=function(){var e=M(),t=e.printerData,r=e.printerFunctions,n=e.printerConnected,i=e.callRemoteFunction,u=e.printerBusy;return n?(0,o.jsxs)(l.default,{direction:"column",gap:2,children:[(0,o.jsx)(s.default,{variant:"contained",fullWidth:!0,children:r.map(function(e){var n,s,l;return(0,o.jsx)(a.default,{disabled:u||[T.n.FETCHIMAGES,T.n.CLEARPRINTER,T.n.TEAR].includes(e)&&!(null==t||null==(n=t.dumps)?void 0:n.length),onClick:function(){return i(e)},children:e===T.n.FETCHIMAGES?(l=(null==t||null==(s=t.dumps)?void 0:s.length)||0,r.includes(T.n.TEAR)||!l?"Fetch images":"Fetch ".concat(l||0," images")):y[e]},e)})}),(null==t?void 0:t.message)?(0,o.jsx)(b.default,{severity:"info",children:null==t?void 0:t.message}):null,(null==t?void 0:t.fs)&&(null==t?void 0:t.dumps)?(0,o.jsx)(R.default,{component:x.default,children:(0,o.jsxs)(A.default,{sx:{minWidth:650},size:"small","aria-label":"a dense table",children:[(0,o.jsx)(I.default,{children:(0,o.jsxs)(j.default,{children:[(0,o.jsx)(C.default,{align:"right",children:"Printer Filesystem"}),(0,o.jsx)(C.default,{align:"left"})]})}),(0,o.jsxs)(E.default,{children:[(0,o.jsxs)(j.default,{children:[(0,o.jsx)(C.default,{align:"right",children:"Total"}),(0,o.jsx)(C.default,{align:"left",children:_()(null==t?void 0:t.fs.total)})]}),(0,o.jsxs)(j.default,{children:[(0,o.jsx)(C.default,{align:"right",children:"Used"}),(0,o.jsx)(C.default,{align:"left",children:_()(null==t?void 0:t.fs.used)})]}),(0,o.jsxs)(j.default,{children:[(0,o.jsx)(C.default,{align:"right",children:"Free"}),(0,o.jsx)(C.default,{align:"left",children:"".concat(Math.max(0,((null==t?void 0:t.fs.maximages)||0)-((null==t?void 0:t.dumps.length)||0))," images")})]}),(0,o.jsxs)(j.default,{children:[(0,o.jsx)(C.default,{align:"right",children:"Images"}),(0,o.jsx)(C.default,{align:"left",children:null==t?void 0:t.dumps.length})]})]})]})}):null]}):null};var S=r(69229),B=r(97004),k=r(39249),F=r(7062),O=r(9718),L=r(32521),H=r(83936),U=r(41476),G=r(55988),Y=function(){var e=(0,L.Z)().connectedDevices,t=(0,U.A)(),r=t.setProgress,i=t.startProgress,o=t.stopProgress,a=(0,p.A)().setError,s=(0,H.W)().jsonImport,l=(0,c.useMemo)(function(){return(0,G.A)(s)},[s]),u=(0,n._)((0,c.useState)(!1),2),d=u[0],f=u[1],m=(0,n._)((0,c.useState)(!1),2),h=m[0],v=m[1],g=(0,c.useMemo)(function(){var t=e.find(function(e){return e.portDeviceType===O._Y.GBXCART});return t?t.device:null},[e]),b=!!g;return(0,c.useEffect)(function(){g&&(v(!0),g.readROMName().then(function(e){f("PHOTO"===e.trim()),v(!1)}))},[g]),(0,c.useEffect)(function(){var e;(e=(0,B._)(function(){return(0,k.YH)(this,function(e){switch(e.label){case 0:var t;if(!g)return[2];return[4,g.setup((0,F.BX)({setProgress:r,startProgress:(t=(0,B._)(function(e){return(0,k.YH)(this,function(t){return[2,i(e)]})}),function(e){return t.apply(this,arguments)}),stopProgress:o}))];case 1:return e.sent(),[2]}})}),function(){return e.apply(this,arguments)})()},[g,r,i,o]),{gbxCartAvailable:b,canReadPhotoRom:d,readRAMImage:(0,c.useCallback)((0,B._)(function(){var e,t,r;return(0,k.YH)(this,function(n){switch(n.label){case 0:if(!g)return[2];return v(!0),[4,g.readROMName()];case 1:switch(f("PHOTO"===(e=n.sent()).trim()),e){case"GAMEBOYCAMERA":case"GAMEBOYCAMERA G":t="int";break;case"POCKETCAMERA":t="jp";break;case"POCKETCAMERA_SN":t="hk";break;case"PHOTO":t="photo";break;case"PXLR":case"PXLR_SLSC":t="pxlr"}return[4,g.readRAMImage()];case 2:return r=n.sent(),v(!1),l([new File(r,"".concat(e.trim()||"dump",".sav"),{type:"application/octet-stream"})],{fromPrinter:!1,savFrameSet:t}),[2]}})}),[g,l]),readPhotoRom:(0,c.useCallback)((0,B._)(function(){var e,t;return(0,k.YH)(this,function(r){switch(r.label){case 0:if(!g)return[2];return v(!0),[4,g.readROMName()];case 1:if(f("PHOTO"===(e=r.sent()).trim()),"PHOTO"!==e)return a(Error("ROM is not PHOTO!")),[2];return[4,g.readPhotoAlbums()];case 2:return t=r.sent(),v(!1),l([new File(t,"".concat(e.trim()||"dump",".sav"),{type:"application/octet-stream"})],{fromPrinter:!1}),[2]}})}),[g,l,a]),readRomName:(0,c.useCallback)((0,B._)(function(){return(0,k.YH)(this,function(e){switch(e.label){case 0:if(!g)return[2];return[4,g.readROMName()];case 1:return console.log("ROM name",e.sent()),[2]}})}),[g]),busy:h}},D=r(86210);let K=function(){var e=(0,n._)((0,c.useState)(""),2),t=e[0],d=e[1],f=(0,D.l)(),p=f.importPlainText,m=f.importFiles,h=f.printerUrl,v=f.exportJson,b=Y(),x=b.gbxCartAvailable,A=b.readRAMImage,E=b.readPhotoRom,C=b.canReadPhotoRom,R=b.busy;return(0,c.useEffect)(function(){r.e(7963).then(r.bind(r,35796)).then(function(e){d(e.default.join("\n"))})},[]),(0,o.jsxs)(l.default,{direction:"column",gap:6,children:[h&&(0,o.jsx)(N,{}),h&&(0,o.jsx)(g,{}),(0,o.jsxs)(s.default,{variant:"contained",fullWidth:!0,children:[(0,o.jsxs)(a.default,{component:"label",variant:"contained",title:"Select file(s) to import",children:["Select file(s) to import",(0,o.jsx)("input",{type:"file",tabIndex:-1,hidden:!0,multiple:!0,onChange:function(e){var t=e.target,r=t.files;r&&r.length&&m((0,i._)(r)),t.value=""}})]}),x&&(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(a.default,{onClick:A,title:"Import memory (RAM) from Cartridge Reader",disabled:R,children:"Import memory from Cartridge Reader"}),(0,o.jsx)(a.default,{onClick:E,disabled:!C||R,title:"Import Album Rolls from Photo! (ROM + Flash)",children:"Import Album Rolls from Photo!(ROM + Flash)"})]})]}),(0,o.jsxs)(l.default,{flexDirection:"column",gap:1,justifyContent:"flex-end",justifyItems:"end",children:[(0,o.jsx)(u.default,{id:"import-plaintext",label:"Enter data received through your serial monitor",multiline:!0,rows:20,value:t,onChange:function(e){d(e.target.value)}}),(0,o.jsx)(l.default,{direction:"row",justifyContent:"flex-end",children:(0,o.jsx)(a.default,{variant:"contained",onClick:function(){p(t)},children:"Import"})})]}),(0,o.jsxs)(s.default,{variant:"contained",fullWidth:!0,children:[(0,o.jsx)(a.default,{onClick:function(){return v(S.m.IMAGES)},title:"Export images",children:"Export images"}),(0,o.jsx)(a.default,{onClick:function(){return v(S.m.SELECTED_IMAGES)},title:"Export selected images",children:"Export selected images"}),(0,o.jsx)(a.default,{onClick:function(){return v(S.m.PALETTES)},title:"Export palettes",children:"Export palettes"})]})]})}},86210:(e,t,r)=>{"use strict";r.d(t,{l:()=>l});var n=r(87025),i=r(83936),o=r(64768),a=r(46498),s=r(52166),l=function(){var e=(0,s.A)().printerUrl,t=(0,a.A)().printerFunctions,r=(0,i.W)().downloadSettings,l=t.length>0,u=(0,o.A)().handleFileImport;return{printerUrl:e?"".concat(e,"remote.html"):void 0,printerConnected:l,importPlainText:function(e){u([new File((0,n._)(e),"Text input.txt",{type:"text/plain"})])},importFiles:u,exportJson:function(e){return r(e)}}}},98482:(e,t,r)=>{Promise.resolve().then(r.bind(r,700)),Promise.resolve().then(r.bind(r,81547))}},e=>{var t=t=>e(e.s=t);e.O(0,[4453,700,7859,7271,8250,2491,6139,3313,7642,7890,8449,1487,6672,9665,1936,8348,1760,3936,4768,8441,1684,7358],()=>t(98482)),_N_E=e.O()}]);