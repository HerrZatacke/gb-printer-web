(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[5862],{15015:(e,n,t)=>{"use strict";t.d(n,{_Y:()=>o,k4:()=>i,qt:()=>r});var r=function(e){return e.USB="USB",e.SERIAL="SERIAL",e}({}),o=function(e){return e.INACTIVE="inactive",e.PACKET_CAPTURE="packet_capture",e.SUPER_PRINTER_INTERFACE="super_printer_interface",e.GBXCART="gbxcart",e}({}),i=[{vendorId:9025,productId:32822},{vendorId:9025,productId:32823},{vendorId:9025,productId:32845},{vendorId:9025,productId:32846},{vendorId:9025,productId:32847},{vendorId:9025,productId:32848},{vendorId:9025,productId:32850},{vendorId:9025,productId:32851},{vendorId:9025,productId:32852},{vendorId:9025,productId:32853},{vendorId:9025,productId:32854},{vendorId:9025,productId:32855},{vendorId:9114}]},26213:(e,n,t)=>{"use strict";t.d(n,{A:()=>l,F:()=>u});var r=t(87922),o=t(82732),i=t(45849),s=t(45377),a=t(74879),c=t(25959),u=function(e){return e.ERROR="error",e.DONE="done",e.MESSAGE="message",e}({});let l=(0,c.v)(function(e,n){return{progress:[],progressLog:{git:[],dropbox:[]},resetProgressLog:function(){return e({progressLog:{git:[],dropbox:[]}})},startProgress:function(n){var t={id:(0,a.A)(),label:n,value:0};return e(function(e){var n=e.progress;return{progress:(0,s._)(n).concat([t])}}),t.id},setProgress:function(n,t){e(function(e){return{progress:e.progress.map(function(e){return e.id!==n?e:(0,i._)((0,o._)({},e),{value:t})})}})},stopProgress:function(n){e(function(e){return{progress:e.progress.filter(function(e){return e.id!==n})}})},setProgressLog:function(t,a){var c=n().progressLog;e({progressLog:(0,i._)((0,o._)({},c),(0,r._)({},t,[a].concat((0,s._)(c[t]))))})}}})},28425:(e,n,t)=>{"use strict";t.d(n,{l:()=>c});var r=t(45377),o=t(83231),i=t(30771),s=t(50751),a=t(15431),c=function(){var e=(0,a.A)().printerUrl,n=(0,s.A)().printerFunctions,t=(0,o.W)().downloadSettings,c=n.length>0,u=(0,i.A)().handleFileImport;return{printerUrl:e?"".concat(e,"remote.html"):void 0,printerConnected:c,importPlainText:function(e){u([new File((0,r._)(e),"Text input.txt",{type:"text/plain"})])},importFiles:u,exportJson:function(e){return t(e)}}}},34476:(e,n,t)=>{"use strict";t.d(n,{U:()=>o,Z:()=>i});var r=t(12115),o=(0,r.createContext)({connectedDevices:[],isReceiving:!1,webSerialEnabled:!1,openWebSerial:function(){throw Error("PortsContext is missing")},webUSBEnabled:!1,openWebUSB:function(){throw Error("PortsContext is missing")},unknownDeviceResponse:null,hasInactiveDevices:!1}),i=function(){return(0,r.useContext)(o)}},41574:(e,n,t)=>{"use strict";t.d(n,{A:()=>A});var r=t(82732),o=t(17389),i=t(12115),s=t(2821),a=t(72131),c=t(35885),u=t(47627),l=t(57915),d=t(95155),f=t(27923),p=t(65595),m=t(15370),h=(0,t(13053).A)("MuiBox",["root"]),v=(0,p.A)();let A=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=e.themeId,t=e.defaultTheme,f=e.defaultClassName,p=void 0===f?"MuiBox-root":f,m=e.generateClassName,h=(0,a.Ay)("div",{shouldForwardProp:function(e){return"theme"!==e&&"sx"!==e&&"as"!==e}})(c.A);return i.forwardRef(function(e,i){var a=(0,l.A)(t),c=(0,u.A)(e),f=c.className,v=c.component,A=(0,o._)(c,["className","component"]);return(0,d.jsx)(h,(0,r._)({as:void 0===v?"div":v,ref:i,className:(0,s.A)(f,m?m(p):p),theme:n&&a[n]||a},A))})}({themeId:m.A,defaultTheme:v,defaultClassName:h.root,generateClassName:f.A.generate})},45407:(e,n,t)=>{"use strict";t.d(n,{n:()=>r});var r=function(e){return e.TESTFILE="testFile",e.CHECKPRINTER="checkPrinter",e.FETCHIMAGES="fetchImages",e.CLEARPRINTER="clearPrinter",e.TEAR="tear",e}({})},46074:(e,n,t)=>{"use strict";t.d(n,{G:()=>s,b:()=>a});var r=t(61975),o=t(71450),i=t(12115),s=(0,i.createContext)({callRemoteFunction:function(){return(0,r._)(function(){return(0,o.YH)(this,function(e){return[2]})})()}}),a=function(){return(0,i.useContext)(s)}},80223:(e,n,t)=>{"use strict";t.d(n,{A:()=>R});var r=t(82732),o=t(45849),i=t(17389),s=t(12115),a=t(2821),c=t(37659),u=t(58784),l=t(49714),d=t(57179),f=t(13053),p=t(81421);function m(e){return(0,p.Ay)("MuiTableHead",e)}(0,f.A)("MuiTableHead",["root"]);var h=t(95155),v=function(e){var n=e.classes;return(0,c.A)({root:["root"]},m,n)},A=(0,l.Ay)("thead",{name:"MuiTableHead",slot:"Root"})({display:"table-header-group"}),g={variant:"head"},x="thead";let R=s.forwardRef(function(e,n){var t=(0,d.b)({props:e,name:"MuiTableHead"}),s=t.className,c=t.component,l=void 0===c?x:c,f=(0,i._)(t,["className","component"]),p=(0,o._)((0,r._)({},t),{component:l}),m=v(p);return(0,h.jsx)(u.A.Provider,{value:g,children:(0,h.jsx)(A,(0,r._)({as:l,className:(0,a.A)(m.root,s),ref:n,role:l===x?null:"rowgroup",ownerState:p},f))})})},80738:(e,n,t)=>{"use strict";t.r(n),t.d(n,{default:()=>J});var r=t(95155),o=t(80317),i=t(18955),s=t(22043),a=t(45377),c=t(64647),u=t(32968),l=t(41942),d=t(13802),f=t(12115),p=t(41574),m=t(98638),h=t(50751),v=t(15431);let A=function(e){var n=(0,v.A)(),t=n.printerUrl,r=n.printerParams,o=r?"#".concat(encodeURI(r)):"",i=t?"".concat(t,"remote.html").concat(o):void 0,a=(0,h.A)().printerFunctions.length>0,c=(0,s._)((0,f.useState)(!1),2),u=c[0],l=c[1],d=(0,s._)((0,f.useState)(!1),2),p=d[0],m=d[1],A=(0,f.useRef)(void 0);return(0,f.useEffect)(function(){return u||p||A.current||(A.current=window.setTimeout(function(){m(!0)},e)),function(){window.clearTimeout(A.current),A.current=void 0}},[p,u,e]),!u&&a&&(window.clearTimeout(A.current),A.current=void 0,l(!0)),{failed:p,loaded:u,printerUrl:i,printerConnected:a}};var g=function(e){if(!e)return!1;if(e.startsWith("/"))return!0;var n=new URL(e).protocol,t=new URL(window.location.href).protocol;return"http:"===t||t===n};let x=function(){var e=(0,i.c3)("ConnectPrinter"),n=A(3e4),t=n.printerUrl,o=n.failed,s=n.loaded,a=n.printerConnected;return g(t)&&!o?(0,r.jsxs)(p.A,{sx:{display:"flex",justifyContent:"center"},children:[(0,r.jsx)("iframe",{style:{position:"absolute",top:"80px",left:"-200vw",width:"480px",height:"90px"},src:t}),!s&&(0,r.jsx)(m.A,{color:"secondary"})]}):(!a||o)&&(0,r.jsx)(u.A,{variant:"contained",fullWidth:!0,children:(0,r.jsx)(c.A,{onClick:function(){window.open(t,"remoteprinter","width=480,height=400")},children:e("openPrinterPage")})})};var R=t(4615),I=t(75970),C=t(56120),j=t(6388),b=t(31512),E=t(98447),P=t(80223),_=t(54463),T=t(32893),w=t.n(T),M=t(45407),S=t(46074),F=function(){var e=(0,h.A)(),n=e.printerData,t=e.printerFunctions,r=e.printerBusy,o=(0,S.b)().callRemoteFunction,i=t.length>0;return{printerData:n,printerFunctions:t,printerBusy:r,printerConnected:i,callRemoteFunction:o}},N={testFile:"functions.printTestImage",checkPrinter:"functions.checkPrinter",fetchImages:"",clearPrinter:"functions.clearPrinter",tear:"functions.tear"};let y=function(){var e,n=(0,i.c3)("PrinterReport"),t=F(),o=t.printerData,s=t.printerFunctions,a=t.printerConnected,d=t.callRemoteFunction,p=t.printerBusy,m=(0,f.useMemo)(function(){var e,t=(null==o||null==(e=o.dumps)?void 0:e.length)||0;return s.includes(M.n.TEAR)||!t?n("functions.fetchImagesGeneric"):n("functions.fetchImagesCount",{count:t})},[null==o||null==(e=o.dumps)?void 0:e.length,s,n]);return a?(0,r.jsxs)(l.A,{direction:"column",gap:2,children:[(0,r.jsx)(u.A,{variant:"contained",fullWidth:!0,children:s.map(function(e){var t;return(0,r.jsx)(c.A,{disabled:p||[M.n.FETCHIMAGES,M.n.CLEARPRINTER,M.n.TEAR].includes(e)&&!(null==o||null==(t=o.dumps)?void 0:t.length),onClick:function(){return d(e)},children:e===M.n.FETCHIMAGES?m:n(N[e])},e)})}),(null==o?void 0:o.message)?(0,r.jsx)(R.A,{severity:"info",children:null==o?void 0:o.message}):null,(null==o?void 0:o.fs)&&(null==o?void 0:o.dumps)?(0,r.jsx)(E.A,{component:I.A,children:(0,r.jsxs)(C.A,{sx:{minWidth:650},size:"small","aria-label":"a dense table",children:[(0,r.jsx)(P.A,{children:(0,r.jsxs)(_.A,{children:[(0,r.jsx)(b.A,{align:"right",children:n("printerFilesystem")}),(0,r.jsx)(b.A,{align:"left"})]})}),(0,r.jsxs)(j.A,{children:[(0,r.jsxs)(_.A,{children:[(0,r.jsx)(b.A,{align:"right",children:n("total")}),(0,r.jsx)(b.A,{align:"left",children:w()(null==o?void 0:o.fs.total)})]}),(0,r.jsxs)(_.A,{children:[(0,r.jsx)(b.A,{align:"right",children:n("used")}),(0,r.jsx)(b.A,{align:"left",children:w()(null==o?void 0:o.fs.used)})]}),(0,r.jsxs)(_.A,{children:[(0,r.jsx)(b.A,{align:"right",children:n("free")}),(0,r.jsx)(b.A,{align:"left",children:n("freeImages",{count:Math.max(0,((null==o?void 0:o.fs.maximages)||0)-((null==o?void 0:o.dumps.length)||0))})})]}),(0,r.jsxs)(_.A,{children:[(0,r.jsx)(b.A,{align:"right",children:n("images")}),(0,r.jsx)(b.A,{align:"left",children:null==o?void 0:o.dumps.length})]})]})]})}):null]}):null};var O=t(46544),k=t(61975),H=t(71450),L=t(81863),U=t(15015),B=t(34476),G=t(83231),D=t(26213),W=t(45786),Y=function(){var e=(0,B.Z)().connectedDevices,n=(0,D.A)(),t=n.setProgress,r=n.startProgress,o=n.stopProgress,i=(0,h.A)().setError,a=(0,G.W)().jsonImport,c=(0,f.useMemo)(function(){return(0,W.A)(a)},[a]),u=(0,s._)((0,f.useState)(!1),2),l=u[0],d=u[1],p=(0,s._)((0,f.useState)(!1),2),m=p[0],v=p[1],A=(0,f.useMemo)(function(){var n=e.find(function(e){return e.portDeviceType===U._Y.GBXCART});return n?n.device:null},[e]),g=!!A;return(0,f.useEffect)(function(){A&&(v(!0),A.readROMName().then(function(e){d("PHOTO"===e.trim()),v(!1)}))},[A]),(0,f.useEffect)(function(){(0,k._)(function(){return(0,H.YH)(this,function(e){switch(e.label){case 0:if(!A)return[2];return[4,A.setup((0,L.BX)({setProgress:t,startProgress:function(e){return(0,k._)(function(){return(0,H.YH)(this,function(n){return[2,r(e)]})})()},stopProgress:o}))];case 1:return e.sent(),[2]}})})()},[A,t,r,o]),{gbxCartAvailable:g,canReadPhotoRom:l,readRAMImage:(0,f.useCallback)(function(){return(0,k._)(function(){var e,n,t;return(0,H.YH)(this,function(r){switch(r.label){case 0:if(!A)return[2];return v(!0),[4,A.readROMName()];case 1:switch(d("PHOTO"===(e=r.sent()).trim()),e){case"GAMEBOYCAMERA":case"GAMEBOYCAMERA G":n="int";break;case"POCKETCAMERA":n="jp";break;case"POCKETCAMERA_SN":n="hk";break;case"PHOTO":n="photo";break;case"PXLR":case"PXLR_SLSC":n="pxlr"}return[4,A.readRAMImage()];case 2:return t=r.sent(),v(!1),c([new File(t,"".concat(e.trim()||"dump",".sav"),{type:"application/octet-stream"})],{fromPrinter:!1,savFrameSet:n}),[2]}})})()},[A,c]),readPhotoRom:(0,f.useCallback)(function(){return(0,k._)(function(){var e,n;return(0,H.YH)(this,function(t){switch(t.label){case 0:if(!A)return[2];return v(!0),[4,A.readROMName()];case 1:if(d("PHOTO"===(e=t.sent()).trim()),"PHOTO"!==e)return i(Error("ROM is not PHOTO!")),[2];return[4,A.readPhotoAlbums()];case 2:return n=t.sent(),v(!1),c([new File(n,"".concat(e.trim()||"dump",".sav"),{type:"application/octet-stream"})],{fromPrinter:!1}),[2]}})})()},[A,c,i]),readRomName:(0,f.useCallback)(function(){return(0,k._)(function(){return(0,H.YH)(this,function(e){switch(e.label){case 0:if(!A)return[2];return[4,A.readROMName()];case 1:return console.log("ROM name",e.sent()),[2]}})})()},[A]),busy:m}},X=t(28425);let K=function(){var e=(0,s._)((0,f.useState)(""),2),n=e[0],o=e[1],p=(0,i.c3)("Import"),m=(0,X.l)(),h=m.importPlainText,v=m.importFiles,A=m.printerUrl,g=m.exportJson,R=Y(),I=R.gbxCartAvailable,C=R.readRAMImage,j=R.readPhotoRom,b=R.canReadPhotoRom,E=R.busy;return(0,f.useEffect)(function(){t.e(7963).then(t.bind(t,52467)).then(function(e){o(e.default.join("\n"))})},[]),(0,r.jsxs)(l.A,{direction:"column",gap:6,children:[A&&(0,r.jsx)(y,{}),A&&(0,r.jsx)(x,{}),(0,r.jsxs)(u.A,{variant:"contained",fullWidth:!0,children:[(0,r.jsxs)(c.A,{component:"label",variant:"contained",title:p("selectFiles"),children:[p("selectFiles"),(0,r.jsx)("input",{type:"file",tabIndex:-1,hidden:!0,multiple:!0,onChange:function(e){var n=e.target,t=n.files;t&&t.length&&v((0,a._)(t)),n.value=""}})]}),I&&(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(c.A,{onClick:C,title:p("importMemory"),disabled:E,children:p("importMemory")}),(0,r.jsx)(c.A,{onClick:j,disabled:!b||E,title:p("importAlbumRolls"),children:p("importAlbumRolls")})]})]}),(0,r.jsxs)(l.A,{flexDirection:"column",gap:1,justifyContent:"flex-end",justifyItems:"end",children:[(0,r.jsx)(d.A,{id:"import-plaintext",label:p("serialMonitorLabel"),multiline:!0,rows:20,value:n,onChange:function(e){o(e.target.value)}}),(0,r.jsx)(l.A,{direction:"row",justifyContent:"flex-end",children:(0,r.jsx)(c.A,{variant:"contained",onClick:function(){h(n)},children:p("import")})})]}),(0,r.jsxs)(u.A,{variant:"contained",fullWidth:!0,children:[(0,r.jsx)(c.A,{onClick:function(){return g(O.m.IMAGES)},title:p("exportImages"),children:p("exportImages")}),(0,r.jsx)(c.A,{onClick:function(){return g(O.m.SELECTED_IMAGES)},title:p("exportSelectedImages"),children:p("exportSelectedImages")})]})]})};function J(){var e=(0,i.c3)("Navigation");return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(o.A,{component:"h1",variant:"h1",children:e("import")}),(0,r.jsx)(K,{})]})}},98447:(e,n,t)=>{"use strict";t.d(n,{A:()=>A});var r=t(82732),o=t(45849),i=t(17389),s=t(12115),a=t(2821),c=t(37659),u=t(49714),l=t(57179),d=t(13053),f=t(81421);function p(e){return(0,f.Ay)("MuiTableContainer",e)}(0,d.A)("MuiTableContainer",["root"]);var m=t(95155),h=function(e){var n=e.classes;return(0,c.A)({root:["root"]},p,n)},v=(0,u.Ay)("div",{name:"MuiTableContainer",slot:"Root"})({width:"100%",overflowX:"auto"});let A=s.forwardRef(function(e,n){var t=(0,l.b)({props:e,name:"MuiTableContainer"}),s=t.className,c=t.component,u=void 0===c?"div":c,d=(0,i._)(t,["className","component"]),f=(0,o._)((0,r._)({},t),{component:u}),p=h(f);return(0,m.jsx)(v,(0,r._)({ref:n,as:u,className:(0,a.A)(p.root,s),ownerState:f},d))})},99513:(e,n,t)=>{Promise.resolve().then(t.bind(t,80738))}},e=>{e.O(0,[8955,3632,317,2545,5140,9832,9452,7588,1703,4288,3683,4647,3802,2345,2968,4615,9670,2565,2879,2517,771,8441,9342,1255,7358],()=>e(e.s=99513)),_N_E=e.O()}]);