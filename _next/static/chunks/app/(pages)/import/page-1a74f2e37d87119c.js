(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[5862],{15015:(e,n,t)=>{"use strict";t.d(n,{_Y:()=>i,k4:()=>o,qt:()=>r});var r=function(e){return e.USB="USB",e.SERIAL="SERIAL",e}({}),i=function(e){return e.INACTIVE="inactive",e.PACKET_CAPTURE="packet_capture",e.SUPER_PRINTER_INTERFACE="super_printer_interface",e.GBXCART="gbxcart",e}({}),o=[{vendorId:9025,productId:32822},{vendorId:9025,productId:32823},{vendorId:9025,productId:32845},{vendorId:9025,productId:32846},{vendorId:9025,productId:32847},{vendorId:9025,productId:32848},{vendorId:9025,productId:32850},{vendorId:9025,productId:32851},{vendorId:9025,productId:32852},{vendorId:9025,productId:32853},{vendorId:9025,productId:32854},{vendorId:9025,productId:32855},{vendorId:9114}]},26213:(e,n,t)=>{"use strict";t.d(n,{A:()=>l,F:()=>u});var r=t(87922),i=t(82732),o=t(45849),s=t(45377),c=t(74879),a=t(25959),u=function(e){return e.ERROR="error",e.DONE="done",e.MESSAGE="message",e}({});let l=(0,a.v)(function(e,n){return{progress:[],progressLog:{git:[],dropbox:[]},resetProgressLog:function(){return e({progressLog:{git:[],dropbox:[]}})},startProgress:function(n){var t={id:(0,c.A)(),label:n,value:0};return e(function(e){var n=e.progress;return{progress:(0,s._)(n).concat([t])}}),t.id},setProgress:function(n,t){e(function(e){return{progress:e.progress.map(function(e){return e.id!==n?e:(0,o._)((0,i._)({},e),{value:t})})}})},stopProgress:function(n){e(function(e){return{progress:e.progress.filter(function(e){return e.id!==n})}})},setProgressLog:function(t,c){var a=n().progressLog;e({progressLog:(0,o._)((0,i._)({},a),(0,r._)({},t,[c].concat((0,s._)(a[t]))))})}}})},28425:(e,n,t)=>{"use strict";t.d(n,{l:()=>a});var r=t(45377),i=t(83231),o=t(30771),s=t(50751),c=t(15431),a=function(){var e=(0,c.A)().printerUrl,n=(0,s.A)().printerFunctions,t=(0,i.W)().downloadSettings,a=n.length>0,u=(0,o.A)().handleFileImport;return{printerUrl:e?"".concat(e,"remote.html"):void 0,printerConnected:a,importPlainText:function(e){u([new File((0,r._)(e),"Text input.txt",{type:"text/plain"})])},importFiles:u,exportJson:function(e){return t(e)}}}},34476:(e,n,t)=>{"use strict";t.d(n,{U:()=>i,Z:()=>o});var r=t(12115),i=(0,r.createContext)({connectedDevices:[],isReceiving:!1,webSerialEnabled:!1,openWebSerial:function(){throw Error("PortsContext is missing")},webUSBEnabled:!1,openWebUSB:function(){throw Error("PortsContext is missing")},unknownDeviceResponse:null,hasInactiveDevices:!1}),o=function(){return(0,r.useContext)(i)}},41574:(e,n,t)=>{"use strict";t.d(n,{A:()=>A});var r=t(82732),i=t(17389),o=t(12115),s=t(2821),c=t(72131),a=t(35885),u=t(47627),l=t(57915),d=t(95155),f=t(27923),p=t(65595),m=t(15370),h=(0,t(13053).A)("MuiBox",["root"]),v=(0,p.A)();let A=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=e.themeId,t=e.defaultTheme,f=e.defaultClassName,p=void 0===f?"MuiBox-root":f,m=e.generateClassName,h=(0,c.Ay)("div",{shouldForwardProp:function(e){return"theme"!==e&&"sx"!==e&&"as"!==e}})(a.A);return o.forwardRef(function(e,o){var c=(0,l.A)(t),a=(0,u.A)(e),f=a.className,v=a.component,A=(0,i._)(a,["className","component"]);return(0,d.jsx)(h,(0,r._)({as:void 0===v?"div":v,ref:o,className:(0,s.A)(f,m?m(p):p),theme:n&&c[n]||c},A))})}({themeId:m.A,defaultTheme:v,defaultClassName:h.root,generateClassName:f.A.generate})},45407:(e,n,t)=>{"use strict";t.d(n,{n:()=>r});var r=function(e){return e.TESTFILE="testFile",e.CHECKPRINTER="checkPrinter",e.FETCHIMAGES="fetchImages",e.CLEARPRINTER="clearPrinter",e.TEAR="tear",e}({})},46074:(e,n,t)=>{"use strict";t.d(n,{G:()=>s,b:()=>c});var r=t(61975),i=t(71450),o=t(12115),s=(0,o.createContext)({callRemoteFunction:function(){return(0,r._)(function(){return(0,i.YH)(this,function(e){return[2]})})()}}),c=function(){return(0,o.useContext)(s)}},80738:(e,n,t)=>{"use strict";t.r(n),t.d(n,{default:()=>q});var r=t(95155),i=t(80317),o=t(18955),s=t(22043),c=t(45377),a=t(64647),u=t(32968),l=t(41942),d=t(13802),f=t(12115),p=t(41574),m=t(98638),h=t(50751),v=t(15431);let A=function(e){var n=(0,v.A)(),t=n.printerUrl,r=n.printerParams,i=r?"#".concat(encodeURI(r)):"",o=t?"".concat(t,"remote.html").concat(i):void 0,c=(0,h.A)().printerFunctions.length>0,a=(0,s._)((0,f.useState)(!1),2),u=a[0],l=a[1],d=(0,s._)((0,f.useState)(!1),2),p=d[0],m=d[1],A=(0,f.useRef)(void 0);return(0,f.useEffect)(function(){return u||p||A.current||(A.current=window.setTimeout(function(){m(!0)},e)),function(){window.clearTimeout(A.current),A.current=void 0}},[p,u,e]),!u&&c&&(window.clearTimeout(A.current),A.current=void 0,l(!0)),{failed:p,loaded:u,printerUrl:o,printerConnected:c}};var g=function(e){if(!e)return!1;if(e.startsWith("/"))return!0;var n=new URL(e).protocol,t=new URL(window.location.href).protocol;return"http:"===t||t===n};let x=function(){var e=(0,o.c3)("ConnectPrinter"),n=A(3e4),t=n.printerUrl,i=n.failed,s=n.loaded,c=n.printerConnected;return g(t)&&!i?(0,r.jsxs)(p.A,{sx:{display:"flex",justifyContent:"center"},children:[(0,r.jsx)("iframe",{style:{position:"absolute",top:"80px",left:"-200vw",width:"480px",height:"90px"},src:t}),!s&&(0,r.jsx)(m.A,{color:"secondary"})]}):(!c||i)&&(0,r.jsx)(u.A,{variant:"contained",fullWidth:!0,children:(0,r.jsx)(a.A,{onClick:function(){window.open(t,"remoteprinter","width=480,height=400")},children:e("openPrinterPage")})})};var C=t(4615),I=t(75970),R=t(56120),E=t(6388),j=t(31512),b=t(98447),P=t(80223),_=t(54463),T=t(32893),w=t.n(T),M=t(45407),S=t(46074),F=function(){var e=(0,h.A)(),n=e.printerData,t=e.printerFunctions,r=e.printerBusy,i=(0,S.b)().callRemoteFunction,o=t.length>0;return{printerData:n,printerFunctions:t,printerBusy:r,printerConnected:o,callRemoteFunction:i}},N={testFile:"functions.printTestImage",checkPrinter:"functions.checkPrinter",fetchImages:"",clearPrinter:"functions.clearPrinter",tear:"functions.tear"};let O=function(){var e,n=(0,o.c3)("PrinterReport"),t=F(),i=t.printerData,s=t.printerFunctions,c=t.printerConnected,d=t.callRemoteFunction,p=t.printerBusy,m=(0,f.useMemo)(function(){var e,t=(null==i||null==(e=i.dumps)?void 0:e.length)||0;return s.includes(M.n.TEAR)||!t?n("functions.fetchImagesGeneric"):n("functions.fetchImagesCount",{count:t})},[null==i||null==(e=i.dumps)?void 0:e.length,s,n]);return c?(0,r.jsxs)(l.A,{direction:"column",gap:2,children:[(0,r.jsx)(u.A,{variant:"contained",fullWidth:!0,children:s.map(function(e){var t;return(0,r.jsx)(a.A,{disabled:p||[M.n.FETCHIMAGES,M.n.CLEARPRINTER,M.n.TEAR].includes(e)&&!(null==i||null==(t=i.dumps)?void 0:t.length),onClick:function(){return d(e)},children:e===M.n.FETCHIMAGES?m:n(N[e])},e)})}),(null==i?void 0:i.message)?(0,r.jsx)(C.A,{severity:"info",children:null==i?void 0:i.message}):null,(null==i?void 0:i.fs)&&(null==i?void 0:i.dumps)?(0,r.jsx)(b.A,{component:I.A,children:(0,r.jsxs)(R.A,{sx:{minWidth:650},size:"small","aria-label":"a dense table",children:[(0,r.jsx)(P.A,{children:(0,r.jsxs)(_.A,{children:[(0,r.jsx)(j.A,{align:"right",children:n("printerFilesystem")}),(0,r.jsx)(j.A,{align:"left"})]})}),(0,r.jsxs)(E.A,{children:[(0,r.jsxs)(_.A,{children:[(0,r.jsx)(j.A,{align:"right",children:n("total")}),(0,r.jsx)(j.A,{align:"left",children:w()(null==i?void 0:i.fs.total)})]}),(0,r.jsxs)(_.A,{children:[(0,r.jsx)(j.A,{align:"right",children:n("used")}),(0,r.jsx)(j.A,{align:"left",children:w()(null==i?void 0:i.fs.used)})]}),(0,r.jsxs)(_.A,{children:[(0,r.jsx)(j.A,{align:"right",children:n("free")}),(0,r.jsx)(j.A,{align:"left",children:n("freeImages",{count:Math.max(0,((null==i?void 0:i.fs.maximages)||0)-((null==i?void 0:i.dumps.length)||0))})})]}),(0,r.jsxs)(_.A,{children:[(0,r.jsx)(j.A,{align:"right",children:n("images")}),(0,r.jsx)(j.A,{align:"left",children:null==i?void 0:i.dumps.length})]})]})]})}):null]}):null};var k=t(46544),y=t(61975),L=t(71450),H=t(81863),U=t(15015),B=t(34476),G=t(7766),D=t(83231),W=t(26213),Y=t(93657),X=t(60139),K=function(){var e=(0,B.Z)().connectedDevices,n=(0,W.A)(),t=n.setProgress,r=n.startProgress,i=n.stopProgress,o=(0,G.A)().sendEvent,c=(0,h.A)().setError,a=(0,D.W)().jsonImport,u=(0,f.useMemo)(function(){return(0,X.A)(a)},[a]),l=(0,s._)((0,f.useState)(!1),2),d=l[0],p=l[1],m=(0,s._)((0,f.useState)(!1),2),v=m[0],A=m[1],g=(0,f.useMemo)(function(){var n=e.find(function(e){return e.portDeviceType===U._Y.GBXCART});return n?n.device:null},[e]),x=!!g;return(0,f.useEffect)(function(){g&&(A(!0),g.readROMName().then(function(e){p("PHOTO"===e.trim()),A(!1)}))},[g]),(0,f.useEffect)(function(){(0,y._)(function(){return(0,L.YH)(this,function(e){switch(e.label){case 0:if(!g)return[2];return[4,g.setup((0,H.BX)({setProgress:t,startProgress:function(e){return(0,y._)(function(){return(0,L.YH)(this,function(n){return[2,r(e)]})})()},stopProgress:i}))];case 1:return e.sent(),[2]}})})()},[g,t,r,i]),{gbxCartAvailable:x,canReadPhotoRom:d,readRAMImage:(0,f.useCallback)(function(){return(0,y._)(function(){var e,n,t,r;return(0,L.YH)(this,function(i){switch(i.label){case 0:if(!g)return[2];return A(!0),[4,g.readROMName()];case 1:switch(p("PHOTO"===(e=i.sent()).trim()),e){case"GAMEBOYCAMERA":case"GAMEBOYCAMERA G":n="int";break;case"POCKETCAMERA":n="jp";break;case"POCKETCAMERA_SN":n="hk";break;case"PHOTO":n="photo";break;case"PXLR":case"PXLR_SLSC":n="pxlr"}return[4,g.readRAMImage()];case 2:return t=i.sent(),A(!1),[4,u([new File(t,"".concat(e.trim()||"dump",".sav"),{type:"application/octet-stream"})],{fromPrinter:!1,savFrameSet:n})];case 3:return r=i.sent(),o("importQueue",(0,Y.c)(r,"gbxCart")),[2]}})})()},[g,u,o]),readPhotoRom:(0,f.useCallback)(function(){return(0,y._)(function(){var e,n;return(0,L.YH)(this,function(t){switch(t.label){case 0:if(!g)return[2];return A(!0),[4,g.readROMName()];case 1:if(p("PHOTO"===(e=t.sent()).trim()),"PHOTO"!==e)return c(Error("ROM is not PHOTO!")),[2];return[4,g.readPhotoAlbums()];case 2:return n=t.sent(),A(!1),u([new File(n,"".concat(e.trim()||"dump",".sav"),{type:"application/octet-stream"})],{fromPrinter:!1}),[2]}})})()},[g,u,c]),readRomName:(0,f.useCallback)(function(){return(0,y._)(function(){return(0,L.YH)(this,function(e){switch(e.label){case 0:if(!g)return[2];return[4,g.readROMName()];case 1:return console.log("ROM name",e.sent()),[2]}})})()},[g]),busy:v}},J=t(28425);let Z=function(){var e=(0,s._)((0,f.useState)(""),2),n=e[0],i=e[1],p=(0,o.c3)("Import"),m=(0,J.l)(),h=m.importPlainText,v=m.importFiles,A=m.printerUrl,g=m.exportJson,C=K(),I=C.gbxCartAvailable,R=C.readRAMImage,E=C.readPhotoRom,j=C.canReadPhotoRom,b=C.busy;return(0,f.useEffect)(function(){t.e(7963).then(t.bind(t,52467)).then(function(e){i(e.default.join("\n"))})},[]),(0,r.jsxs)(l.A,{direction:"column",gap:6,children:[A&&(0,r.jsx)(O,{}),A&&(0,r.jsx)(x,{}),(0,r.jsxs)(u.A,{variant:"contained",fullWidth:!0,children:[(0,r.jsxs)(a.A,{component:"label",variant:"contained",title:p("selectFiles"),children:[p("selectFiles"),(0,r.jsx)("input",{type:"file",tabIndex:-1,hidden:!0,multiple:!0,onChange:function(e){var n=e.target,t=n.files;t&&t.length&&v((0,c._)(t)),n.value=""}})]}),I&&(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(a.A,{onClick:R,title:p("importMemory"),disabled:b,children:p("importMemory")}),(0,r.jsx)(a.A,{onClick:E,disabled:!j||b,title:p("importAlbumRolls"),children:p("importAlbumRolls")})]})]}),(0,r.jsxs)(l.A,{flexDirection:"column",gap:1,justifyContent:"flex-end",justifyItems:"end",children:[(0,r.jsx)(d.A,{id:"import-plaintext",label:p("serialMonitorLabel"),multiline:!0,rows:20,value:n,onChange:function(e){i(e.target.value)}}),(0,r.jsx)(l.A,{direction:"row",justifyContent:"flex-end",children:(0,r.jsx)(a.A,{variant:"contained",onClick:function(){h(n)},children:p("import")})})]}),(0,r.jsxs)(u.A,{variant:"contained",fullWidth:!0,children:[(0,r.jsx)(a.A,{onClick:function(){return g(k.m.IMAGES)},title:p("exportImages"),children:p("exportImages")}),(0,r.jsx)(a.A,{onClick:function(){return g(k.m.SELECTED_IMAGES)},title:p("exportSelectedImages"),children:p("exportSelectedImages")})]})]})};function q(){var e=(0,o.c3)("Navigation");return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(i.A,{component:"h1",variant:"h1",children:e("import")}),(0,r.jsx)(Z,{})]})}},98447:(e,n,t)=>{"use strict";t.d(n,{A:()=>A});var r=t(82732),i=t(45849),o=t(17389),s=t(12115),c=t(2821),a=t(37659),u=t(49714),l=t(57179),d=t(13053),f=t(81421);function p(e){return(0,f.Ay)("MuiTableContainer",e)}(0,d.A)("MuiTableContainer",["root"]);var m=t(95155),h=function(e){var n=e.classes;return(0,a.A)({root:["root"]},p,n)},v=(0,u.Ay)("div",{name:"MuiTableContainer",slot:"Root"})({width:"100%",overflowX:"auto"});let A=s.forwardRef(function(e,n){var t=(0,l.b)({props:e,name:"MuiTableContainer"}),s=t.className,a=t.component,u=void 0===a?"div":a,d=(0,o._)(t,["className","component"]),f=(0,i._)((0,r._)({},t),{component:u}),p=h(f);return(0,m.jsx)(v,(0,r._)({ref:n,as:u,className:(0,c.A)(p.root,s),ownerState:f},d))})},99513:(e,n,t)=>{Promise.resolve().then(t.bind(t,80738))}},e=>{e.O(0,[8955,3632,317,2545,4120,9832,9452,5513,1703,4647,3683,3802,7164,2968,4615,7922,1156,8248,2781,2517,771,8441,9342,1255,7358],()=>e(e.s=99513)),_N_E=e.O()}]);