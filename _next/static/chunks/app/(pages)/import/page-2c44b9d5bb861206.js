(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[5862],{9718:(e,t,n)=>{"use strict";n.d(t,{_Y:()=>i,k4:()=>o,qt:()=>r});var r=function(e){return e.USB="USB",e.SERIAL="SERIAL",e}({}),i=function(e){return e.INACTIVE="inactive",e.PACKET_CAPTURE="packet_capture",e.SUPER_PRINTER_INTERFACE="super_printer_interface",e.GBXCART="gbxcart",e}({}),o=[{vendorId:9025,productId:32822},{vendorId:9025,productId:32823},{vendorId:9025,productId:32845},{vendorId:9025,productId:32846},{vendorId:9025,productId:32847},{vendorId:9025,productId:32848},{vendorId:9025,productId:32850},{vendorId:9025,productId:32851},{vendorId:9025,productId:32852},{vendorId:9025,productId:32853},{vendorId:9025,productId:32854},{vendorId:9025,productId:32855},{vendorId:9114}]},30891:(e,t,n)=>{"use strict";n.d(t,{G:()=>a,b:()=>s});var r=n(97004),i=n(39249),o=n(12115),a=(0,o.createContext)({callRemoteFunction:(0,r._)(function(){return(0,i.YH)(this,function(e){return[2]})})}),s=function(){return(0,o.useContext)(a)}},32521:(e,t,n)=>{"use strict";n.d(t,{U:()=>i,Z:()=>o});var r=n(12115),i=(0,r.createContext)({connectedDevices:[],isReceiving:!1,webSerialEnabled:!1,openWebSerial:function(){throw Error("PortsContext is missing")},webUSBEnabled:!1,openWebUSB:function(){throw Error("PortsContext is missing")},unknownDeviceResponse:null,hasInactiveDevices:!1}),o=function(){return(0,r.useContext)(i)}},41476:(e,t,n)=>{"use strict";n.d(t,{A:()=>l});var r=n(86447),i=n(693),o=n(60376),a=n(87025),s=n(51368);let l=(0,n(65453).v)(function(e,t){return{progress:[],progressLog:{git:[],dropbox:[]},resetProgressLog:function(){return e({progressLog:{git:[],dropbox:[]}})},startProgress:function(t){var n={id:(0,s.A)(),label:t,value:0};return e(function(e){var t=e.progress;return{progress:(0,a._)(t).concat([n])}}),n.id},setProgress:function(t,n){e(function(e){return{progress:e.progress.map(function(e){return e.id!==t?e:(0,o._)((0,i._)({},e),{value:n})})}})},stopProgress:function(t){e(function(e){return{progress:e.progress.filter(function(e){return e.id!==t})}})},setProgressLog:function(n,s){var l=t().progressLog;e({progressLog:(0,o._)((0,i._)({},l),(0,r._)({},n,[s].concat((0,a._)(l[n]))))})}}})},44296:(e,t,n)=>{"use strict";n.d(t,{default:()=>g});var r=n(693),i=n(60376),o=n(37414),a=n(12115),s=n(52596),l=n(17472),u=n(75955),c=n(10186),d=n(55170),f=n(90870);function p(e){return(0,f.Ay)("MuiTableContainer",e)}(0,d.A)("MuiTableContainer",["root"]);var m=n(95155),h=function(e){var t=e.classes;return(0,l.A)({root:["root"]},p,t)},v=(0,u.default)("div",{name:"MuiTableContainer",slot:"Root"})({width:"100%",overflowX:"auto"});let g=a.forwardRef(function(e,t){var n=(0,c.b)({props:e,name:"MuiTableContainer"}),a=n.className,l=n.component,u=void 0===l?"div":l,d=(0,o._)(n,["className","component"]),f=(0,i._)((0,r._)({},n),{component:u}),p=h(f);return(0,m.jsx)(v,(0,r._)({ref:t,as:u,className:(0,s.A)(p.root,a),ownerState:f},d))})},45686:(e,t,n)=>{"use strict";n.d(t,{n:()=>r});var r=function(e){return e.TESTFILE="testFile",e.CHECKPRINTER="checkPrinter",e.FETCHIMAGES="fetchImages",e.CLEARPRINTER="clearPrinter",e.TEAR="tear",e}({})},53267:(e,t,n)=>{"use strict";n.d(t,{default:()=>u});var r=n(67908),i=n(34084),o=n(69077),a=n(54107),s=(0,n(55170).A)("MuiBox",["root"]),l=(0,o.A)();let u=(0,r.default)({themeId:a.A,defaultTheme:l,defaultClassName:s.root,generateClassName:i.A.generate})},56033:(e,t,n)=>{"use strict";n.d(t,{default:()=>A});var r=n(693),i=n(60376),o=n(37414),a=n(12115),s=n(52596),l=n(17472),u=n(61391),c=n(75955),d=n(10186),f=n(55170),p=n(90870);function m(e){return(0,p.Ay)("MuiTableHead",e)}(0,f.A)("MuiTableHead",["root"]);var h=n(95155),v=function(e){var t=e.classes;return(0,l.A)({root:["root"]},m,t)},g=(0,c.default)("thead",{name:"MuiTableHead",slot:"Root"})({display:"table-header-group"}),b={variant:"head"},x="thead";let A=a.forwardRef(function(e,t){var n=(0,d.b)({props:e,name:"MuiTableHead"}),a=n.className,l=n.component,c=void 0===l?x:l,f=(0,o._)(n,["className","component"]),p=(0,i._)((0,r._)({},n),{component:c}),m=v(p);return(0,h.jsx)(u.A.Provider,{value:b,children:(0,h.jsx)(g,(0,r._)({as:c,className:(0,s.A)(m.root,a),ref:t,role:c===x?null:"rowgroup",ownerState:p},f))})})},67908:(e,t,n)=>{"use strict";n.d(t,{default:()=>f});var r=n(693),i=n(37414),o=n(12115),a=n(52596),s=n(46879),l=n(13184),u=n(5300),c=n(64330),d=n(95155);function f(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.themeId,n=e.defaultTheme,f=e.defaultClassName,p=void 0===f?"MuiBox-root":f,m=e.generateClassName,h=(0,s.default)("div",{shouldForwardProp:function(e){return"theme"!==e&&"sx"!==e&&"as"!==e}})(l.A);return o.forwardRef(function(e,o){var s=(0,c.default)(n),l=(0,u.A)(e),f=l.className,v=l.component,g=(0,i._)(l,["className","component"]);return(0,d.jsx)(h,(0,r._)({as:void 0===v?"div":v,ref:o,className:(0,a.A)(f,m?m(p):p),theme:t&&s[t]||s},g))})}},77260:function(e){e.exports=function(){"use strict";var e=/^(b|B)$/,t={iec:{bits:["b","Kib","Mib","Gib","Tib","Pib","Eib","Zib","Yib"],bytes:["B","KiB","MiB","GiB","TiB","PiB","EiB","ZiB","YiB"]},jedec:{bits:["b","Kb","Mb","Gb","Tb","Pb","Eb","Zb","Yb"],bytes:["B","KB","MB","GB","TB","PB","EB","ZB","YB"]}},n={iec:["","kibi","mebi","gibi","tebi","pebi","exbi","zebi","yobi"],jedec:["","kilo","mega","giga","tera","peta","exa","zetta","yotta"]},r={floor:Math.floor,ceil:Math.ceil};function i(i){var o,a,s,l,u,c,d,f,p,m,h,v,g,b,x,A,I,j,C,R,P,E=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},M=[],T=0;if(isNaN(i))throw TypeError("Invalid number");if(s=!0===E.bits,x=!0===E.unix,v=!0===E.pad,a=E.base||2,g=void 0!==E.round?E.round:x?1:2,d=void 0!==E.locale?E.locale:"",f=E.localeOptions||{},A=void 0!==E.separator?E.separator:"",I=void 0!==E.spacer?E.spacer:x?"":" ",C=E.symbols||{},j=2===a&&E.standard||"jedec",h=E.output||"string",u=!0===E.fullform,c=E.fullforms instanceof Array?E.fullforms:[],o=void 0!==E.exponent?E.exponent:-1,R=r[E.roundingMethod]||Math.round,p=(m=Number(i))<0,l=a>2?1e3:1024,P=!1===isNaN(E.precision)?parseInt(E.precision,10):0,p&&(m=-m),(-1===o||isNaN(o))&&(o=Math.floor(Math.log(m)/Math.log(l)))<0&&(o=0),o>8&&(P>0&&(P+=8-o),o=8),"exponent"===h)return o;if(0===m)M[0]=0,b=M[1]=x?"":t[j][s?"bits":"bytes"][o];else{T=m/(2===a?Math.pow(2,10*o):Math.pow(1e3,o)),s&&(T*=8)>=l&&o<8&&(T/=l,o++);var _=Math.pow(10,o>0?g:0);M[0]=R(T*_)/_,M[0]===l&&o<8&&void 0===E.exponent&&(M[0]=1,o++),b=M[1]=10===a&&1===o?s?"kb":"kB":t[j][s?"bits":"bytes"][o],x&&(M[1]="jedec"===j?M[1].charAt(0):o>0?M[1].replace(/B$/,""):M[1],e.test(M[1])&&(M[0]=Math.floor(M[0]),M[1]=""))}if(p&&(M[0]=-M[0]),P>0&&(M[0]=M[0].toPrecision(P)),M[1]=C[M[1]]||M[1],!0===d?M[0]=M[0].toLocaleString():d.length>0?M[0]=M[0].toLocaleString(d,f):A.length>0&&(M[0]=M[0].toString().replace(".",A)),v&&!1===Number.isInteger(M[0])&&g>0){var w=A||".",y=M[0].toString().split(w),N=y[1]||"",B=N.length;M[0]="".concat(y[0]).concat(w).concat(N.padEnd(B+(g-B),"0"))}return u&&(M[1]=c[o]?c[o]:n[j][o]+(s?"bit":"byte")+(1===M[0]?"":"s")),"array"===h?M:"object"===h?{value:M[0],symbol:M[1],exponent:o,unit:b}:M.join(I)}return i.partial=function(e){return function(t){return i(t,e)}},i}()},81547:(e,t,n)=>{"use strict";n.d(t,{default:()=>K});var r=n(78538),i=n(87025),o=n(95155),a=n(7642),s=n(61487),l=n(7068),u=n(78449),c=n(17652),d=n(12115),f=n(53267),p=n(14426),m=n(46498),h=n(52166);let v=function(e){var t=(0,h.A)(),n=t.printerUrl,i=t.printerParams,o=i?"#".concat(encodeURI(i)):"",a=n?"".concat(n,"remote.html").concat(o):void 0,s=(0,m.A)().printerFunctions.length>0,l=(0,r._)((0,d.useState)(!1),2),u=l[0],c=l[1],f=(0,r._)((0,d.useState)(!1),2),p=f[0],v=f[1],g=(0,d.useRef)(void 0);return(0,d.useEffect)(function(){return u||p||g.current||(g.current=window.setTimeout(function(){v(!0)},e)),function(){window.clearTimeout(g.current),g.current=void 0}},[p,u,e]),!u&&s&&(window.clearTimeout(g.current),g.current=void 0,c(!0)),{failed:p,loaded:u,printerUrl:a,printerConnected:s}};var g=function(e){if(!e)return!1;if(e.startsWith("/"))return!0;var t=new URL(e).protocol,n=new URL(window.location.href).protocol;return"http:"===n||n===t};let b=function(){var e=(0,c.c3)("ConnectPrinter"),t=v(3e4),n=t.printerUrl,r=t.failed,i=t.loaded,l=t.printerConnected;return g(n)&&!r?(0,o.jsxs)(f.default,{sx:{display:"flex",justifyContent:"center"},children:[(0,o.jsx)("iframe",{style:{position:"absolute",top:"80px",left:"-200vw",width:"480px",height:"90px"},src:n}),!i&&(0,o.jsx)(p.default,{color:"secondary"})]}):(!l||r)&&(0,o.jsx)(s.default,{variant:"contained",fullWidth:!0,children:(0,o.jsx)(a.default,{onClick:function(){window.open(n,"remoteprinter","width=480,height=400")},children:e("openPrinterPage")})})};var x=n(9665),A=n(18407),I=n(17976),j=n(99776),C=n(64263),R=n(44296),P=n(56033),E=n(90404),M=n(77260),T=n.n(M),_=n(45686),w=n(30891),y=function(){var e=(0,m.A)(),t=e.printerData,n=e.printerFunctions,r=e.printerBusy,i=(0,w.b)().callRemoteFunction,o=n.length>0;return{printerData:t,printerFunctions:n,printerBusy:r,printerConnected:o,callRemoteFunction:i}},N={testFile:"functions.printTestImage",checkPrinter:"functions.checkPrinter",fetchImages:"",clearPrinter:"functions.clearPrinter",tear:"functions.tear"};let B=function(){var e,t=(0,c.c3)("PrinterReport"),n=y(),r=n.printerData,i=n.printerFunctions,u=n.printerConnected,f=n.callRemoteFunction,p=n.printerBusy,m=(0,d.useMemo)(function(){var e,n=(null==r||null==(e=r.dumps)?void 0:e.length)||0;return i.includes(_.n.TEAR)||!n?t("functions.fetchImagesGeneric"):t("functions.fetchImagesCount",{count:n})},[null==r||null==(e=r.dumps)?void 0:e.length,i,t]);return u?(0,o.jsxs)(l.default,{direction:"column",gap:2,children:[(0,o.jsx)(s.default,{variant:"contained",fullWidth:!0,children:i.map(function(e){var n;return(0,o.jsx)(a.default,{disabled:p||[_.n.FETCHIMAGES,_.n.CLEARPRINTER,_.n.TEAR].includes(e)&&!(null==r||null==(n=r.dumps)?void 0:n.length),onClick:function(){return f(e)},children:e===_.n.FETCHIMAGES?m:t(N[e])},e)})}),(null==r?void 0:r.message)?(0,o.jsx)(x.default,{severity:"info",children:null==r?void 0:r.message}):null,(null==r?void 0:r.fs)&&(null==r?void 0:r.dumps)?(0,o.jsx)(R.default,{component:A.default,children:(0,o.jsxs)(I.default,{sx:{minWidth:650},size:"small","aria-label":"a dense table",children:[(0,o.jsx)(P.default,{children:(0,o.jsxs)(E.default,{children:[(0,o.jsx)(C.default,{align:"right",children:t("printerFilesystem")}),(0,o.jsx)(C.default,{align:"left"})]})}),(0,o.jsxs)(j.default,{children:[(0,o.jsxs)(E.default,{children:[(0,o.jsx)(C.default,{align:"right",children:t("total")}),(0,o.jsx)(C.default,{align:"left",children:T()(null==r?void 0:r.fs.total)})]}),(0,o.jsxs)(E.default,{children:[(0,o.jsx)(C.default,{align:"right",children:t("used")}),(0,o.jsx)(C.default,{align:"left",children:T()(null==r?void 0:r.fs.used)})]}),(0,o.jsxs)(E.default,{children:[(0,o.jsx)(C.default,{align:"right",children:t("free")}),(0,o.jsx)(C.default,{align:"left",children:t("freeImages",{count:Math.max(0,((null==r?void 0:r.fs.maximages)||0)-((null==r?void 0:r.dumps.length)||0))})})]}),(0,o.jsxs)(E.default,{children:[(0,o.jsx)(C.default,{align:"right",children:t("images")}),(0,o.jsx)(C.default,{align:"left",children:null==r?void 0:r.dumps.length})]})]})]})}):null]}):null};var S=n(69229),k=n(97004),F=n(39249),O=n(7062),H=n(9718),L=n(32521),G=n(83936),U=n(41476),Y=n(55988),D=function(){var e=(0,L.Z)().connectedDevices,t=(0,U.A)(),n=t.setProgress,i=t.startProgress,o=t.stopProgress,a=(0,m.A)().setError,s=(0,G.W)().jsonImport,l=(0,d.useMemo)(function(){return(0,Y.A)(s)},[s]),u=(0,r._)((0,d.useState)(!1),2),c=u[0],f=u[1],p=(0,r._)((0,d.useState)(!1),2),h=p[0],v=p[1],g=(0,d.useMemo)(function(){var t=e.find(function(e){return e.portDeviceType===H._Y.GBXCART});return t?t.device:null},[e]),b=!!g;return(0,d.useEffect)(function(){g&&(v(!0),g.readROMName().then(function(e){f("PHOTO"===e.trim()),v(!1)}))},[g]),(0,d.useEffect)(function(){var e;(e=(0,k._)(function(){return(0,F.YH)(this,function(e){switch(e.label){case 0:var t;if(!g)return[2];return[4,g.setup((0,O.BX)({setProgress:n,startProgress:(t=(0,k._)(function(e){return(0,F.YH)(this,function(t){return[2,i(e)]})}),function(e){return t.apply(this,arguments)}),stopProgress:o}))];case 1:return e.sent(),[2]}})}),function(){return e.apply(this,arguments)})()},[g,n,i,o]),{gbxCartAvailable:b,canReadPhotoRom:c,readRAMImage:(0,d.useCallback)((0,k._)(function(){var e,t,n;return(0,F.YH)(this,function(r){switch(r.label){case 0:if(!g)return[2];return v(!0),[4,g.readROMName()];case 1:switch(f("PHOTO"===(e=r.sent()).trim()),e){case"GAMEBOYCAMERA":case"GAMEBOYCAMERA G":t="int";break;case"POCKETCAMERA":t="jp";break;case"POCKETCAMERA_SN":t="hk";break;case"PHOTO":t="photo";break;case"PXLR":case"PXLR_SLSC":t="pxlr"}return[4,g.readRAMImage()];case 2:return n=r.sent(),v(!1),l([new File(n,"".concat(e.trim()||"dump",".sav"),{type:"application/octet-stream"})],{fromPrinter:!1,savFrameSet:t}),[2]}})}),[g,l]),readPhotoRom:(0,d.useCallback)((0,k._)(function(){var e,t;return(0,F.YH)(this,function(n){switch(n.label){case 0:if(!g)return[2];return v(!0),[4,g.readROMName()];case 1:if(f("PHOTO"===(e=n.sent()).trim()),"PHOTO"!==e)return a(Error("ROM is not PHOTO!")),[2];return[4,g.readPhotoAlbums()];case 2:return t=n.sent(),v(!1),l([new File(t,"".concat(e.trim()||"dump",".sav"),{type:"application/octet-stream"})],{fromPrinter:!1}),[2]}})}),[g,l,a]),readRomName:(0,d.useCallback)((0,k._)(function(){return(0,F.YH)(this,function(e){switch(e.label){case 0:if(!g)return[2];return[4,g.readROMName()];case 1:return console.log("ROM name",e.sent()),[2]}})}),[g]),busy:h}},W=n(86210);let K=function(){var e=(0,r._)((0,d.useState)(""),2),t=e[0],f=e[1],p=(0,c.c3)("Import"),m=(0,W.l)(),h=m.importPlainText,v=m.importFiles,g=m.printerUrl,x=m.exportJson,A=D(),I=A.gbxCartAvailable,j=A.readRAMImage,C=A.readPhotoRom,R=A.canReadPhotoRom,P=A.busy;return(0,d.useEffect)(function(){n.e(7963).then(n.bind(n,35796)).then(function(e){f(e.default.join("\n"))})},[]),(0,o.jsxs)(l.default,{direction:"column",gap:6,children:[g&&(0,o.jsx)(B,{}),g&&(0,o.jsx)(b,{}),(0,o.jsxs)(s.default,{variant:"contained",fullWidth:!0,children:[(0,o.jsxs)(a.default,{component:"label",variant:"contained",title:p("selectFiles"),children:[p("selectFiles"),(0,o.jsx)("input",{type:"file",tabIndex:-1,hidden:!0,multiple:!0,onChange:function(e){var t=e.target,n=t.files;n&&n.length&&v((0,i._)(n)),t.value=""}})]}),I&&(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(a.default,{onClick:j,title:p("importMemory"),disabled:P,children:p("importMemory")}),(0,o.jsx)(a.default,{onClick:C,disabled:!R||P,title:p("importAlbumRolls"),children:p("importAlbumRolls")})]})]}),(0,o.jsxs)(l.default,{flexDirection:"column",gap:1,justifyContent:"flex-end",justifyItems:"end",children:[(0,o.jsx)(u.default,{id:"import-plaintext",label:p("serialMonitorLabel"),multiline:!0,rows:20,value:t,onChange:function(e){f(e.target.value)}}),(0,o.jsx)(l.default,{direction:"row",justifyContent:"flex-end",children:(0,o.jsx)(a.default,{variant:"contained",onClick:function(){h(t)},children:p("import")})})]}),(0,o.jsxs)(s.default,{variant:"contained",fullWidth:!0,children:[(0,o.jsx)(a.default,{onClick:function(){return x(S.m.IMAGES)},title:p("exportImages"),children:p("exportImages")}),(0,o.jsx)(a.default,{onClick:function(){return x(S.m.SELECTED_IMAGES)},title:p("exportSelectedImages"),children:p("exportSelectedImages")})]})]})}},86210:(e,t,n)=>{"use strict";n.d(t,{l:()=>l});var r=n(87025),i=n(83936),o=n(64768),a=n(46498),s=n(52166),l=function(){var e=(0,s.A)().printerUrl,t=(0,a.A)().printerFunctions,n=(0,i.W)().downloadSettings,l=t.length>0,u=(0,o.A)().handleFileImport;return{printerUrl:e?"".concat(e,"remote.html"):void 0,printerConnected:l,importPlainText:function(e){u([new File((0,r._)(e),"Text input.txt",{type:"text/plain"})])},importFiles:u,exportJson:function(e){return n(e)}}}},98482:(e,t,n)=>{Promise.resolve().then(n.bind(n,700)),Promise.resolve().then(n.bind(n,81547))}},e=>{var t=t=>e(e.s=t);e.O(0,[7652,4453,700,7859,7271,8250,2491,6139,3313,7642,7890,8449,1487,6672,9665,1936,8348,1760,3936,4768,8441,1684,7358],()=>t(98482)),_N_E=e.O()}]);