(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[2007],{12668:(e,t,n)=>{"use strict";n.d(t,{default:()=>o});var r=n(95155),i=n(7068);function o(e){var t=e.children;return(0,r.jsx)(i.default,{direction:"column",gap:1,sx:function(e){return{a:{color:e.palette.secondary.light,textDecorationColor:"currentColor","&:hover":{color:e.palette.secondary.main}},code:{fontFamily:"monospace"},ul:{listStyleType:"disc",paddingInlineStart:e.spacing(2)},"h1,h2,h3,h4,h5,h6,p":{marginBottom:"0.6em"}}},children:t})}},15821:(e,t,n)=>{"use strict";n.d(t,{A:()=>w});var r=n(78538),i=n(44054),o=n(95155),a=n(69242),c=n(53267),u=n(7642),d=n(36114),s=n(71977),l=n(99927),f=n(54492),v=n(3127),h=n(16324),p=n(51095),b=n(12115);let m=function(e){var t=e.confirm,n=e.canConfirm,r=e.deny;(0,b.useEffect)(function(){var e=function(e){"Escape"===e.key&&r&&r(),"Enter"===e.key&&e.ctrlKey&&t&&n&&t()};return document.addEventListener("keydown",e),function(){document.removeEventListener("keydown",e)}},[t,n,r])};var g=function(e,t,n,r){var o={};if(r?(o.padding="8px !important",o.overflowX="hidden",o.overflowY="hidden"):(o.scrollbarGutter="stable",o.overflowY="scroll"),n)return o;switch(void 0===t?"undefined":(0,i._)(t)){case"string":o.height=t;break;case"number":o.height="".concat(t,"px")}switch(void 0===e?"undefined":(0,i._)(e)){case"string":o.width=e;break;case"number":o.width="".concat(e,"px");break;default:o.width="440px"}return o};let w=function(e){var t=e.contentHeight,n=e.contentWidth,i=e.header,w=e.closeTitle,x=e.children,P=e.confirm,S=e.deny,y=e.canConfirm,A=e.headerOnly,I=e.fullSize,C=e.open,j=e.keepMounted,_=e.closeOnOverlayClick,W=e.headerActionButtons,k=e.actionButtons,E=(0,r._)((0,b.useState)(),2),N=E[0],B=E[1];m({confirm:P,canConfirm:y||!1,deny:S}),(0,b.useEffect)(function(){B(document.body)},[]);var R=(0,h.default)(),O=(0,p.A)(R.breakpoints.down("md")),U=g(n,t,O,I);return(0,o.jsxs)(d.default,{container:N,fullScreen:O||I,maxWidth:"lg",open:"boolean"!=typeof C||C,onClose:S,"aria-label":"string"==typeof i?i:void 0,keepMounted:"boolean"!=typeof j||j,disableEscapeKeyDown:!("boolean"!=typeof _||_),sx:{paddingRight:"10px"},children:[(0,o.jsxs)(f.default,{sx:{display:"flex",justifyContent:"space-between",gap:2,maxWidth:U.width},children:[(0,o.jsx)(c.default,{sx:{whiteSpace:"nowrap",textOverflow:"ellipsis",overflow:"hidden"},children:i}),(0,o.jsxs)(c.default,{sx:{my:-.5,mr:-2},children:[W,S?(0,o.jsx)(v.default,{title:w||"Close ".concat("string"==typeof i?i:""),color:"inherit",onClick:S,children:(0,o.jsx)(a.A,{})}):null]})]}),!A&&(0,o.jsx)(l.default,{sx:U,children:x}),(0,o.jsxs)(s.default,{children:[k,S?(0,o.jsx)(u.default,{onClick:S,color:"primary",variant:"outlined",children:"Cancel"}):null,P?(0,o.jsx)(u.default,{disabled:!1===y,color:"primary",variant:"contained",onClick:P,children:"Ok"}):null]})]})}},30461:(e,t,n)=>{"use strict";n.d(t,{A:()=>c});var r=n(95155),i=n(4915),o=n(90835);n(12115);var a=n(52166);let c=function(){var e=(0,a.A)(),t=e.useSerials,n=e.setUseSerials;return(0,r.jsx)(i.default,{label:"Enable WebUSB / Serial ports",control:(0,r.jsx)(o.default,{checked:t,onChange:function(e){n(e.target.checked)}})})}},39250:(e,t,n)=>{"use strict";n.d(t,{A:()=>w});var r=n(95155),i=n(7642),o=n(7068),a=n(700),c=n(12115),u=n(15821),d=n(78538),s=n(577),l=n(64768);let f=function(){var e=(0,l.A)().handleFileImport;return(0,c.useCallback)(function(t){e([new File((0,s._)(t),"Text input.txt",{type:"text/plain"})])},[e])};var v=n(53598);let h=function(e){var t=v.A.enabled,n=f(),r=(0,d._)((0,c.useState)([]),2),i=r[0],o=r[1],a=(0,d._)((0,c.useState)(!1),2),u=a[0],s=a[1],l=(0,c.useRef)(""),h=(0,c.useRef)(0);return(0,c.useEffect)(function(){if(!v.A.enabled)return function(){};var t=function(e){window.clearTimeout(h.current),h.current=window.setTimeout(function(){s(!1),n(l.current),l.current=""},1e3),s(!0),l.current="".concat(l.current).concat(e)};return o(v.A.getActivePorts()),v.A.addListener("activePortsChange",o),e||v.A.addListener("data",t),function(){v.A.removeListener("activePortsChange",o),v.A.removeListener("data",t)}},[n,e]),{activePorts:i,webSerialEnabled:t,openWebSerial:function(){v.A.enabled&&v.A.requestPort()},isReceiving:u}};var p=n(79356);let b=function(e){var t=p.A.enabled,n=f(),r=(0,d._)((0,c.useState)([]),2),i=r[0],o=r[1],a=(0,d._)((0,c.useState)(!1),2),u=a[0],s=a[1],l=(0,c.useRef)(""),v=(0,c.useRef)(0);return(0,c.useEffect)(function(){if(!p.A.enabled)return function(){};var t=function(e){window.clearTimeout(v.current),v.current=window.setTimeout(function(){s(!1),n(l.current),l.current=""},1e3),s(!0),l.current="".concat(l.current).concat(e)};return o(p.A.getActivePorts()),p.A.addListener("activePortsChange",o),e||p.A.addListener("data",t),function(){p.A.removeListener("activePortsChange",o),p.A.removeListener("data",t)}},[n,e]),{activePorts:i,webUSBEnabled:t,openWebUSBSerial:function(){p.A.enabled&&p.A.requestPort()},isReceiving:u}};var m=n(46498),g=n(52166);let w=function(e){var t=e.inline,n=e.passive,c=b(n||!1),d=c.activePorts,s=c.isReceiving,l=c.webUSBEnabled,f=c.openWebUSBSerial,v=h(n||!1),p=v.activePorts,w=v.isReceiving,x=v.webSerialEnabled,P=v.openWebSerial,S=(0,g.A)().useSerials,y=(0,m.A)(),A=y.showSerials,I=y.setShowSerials,C=(0,r.jsxs)(o.default,{direction:{xs:"column",md:t?"row":"column"},gap:4,sx:{"& > *":{flex:1}},children:[(0,r.jsxs)(o.default,{direction:"column",gap:1,children:[(0,r.jsxs)(i.default,{title:"Open WebUSB device",onClick:f,disabled:!l,loading:s,loadingPosition:"start",variant:"contained",color:"secondary",children:["Open WebUSB device",s?" (receiving)":null]}),(0,r.jsx)(a.default,{variant:"body2",children:"Connected devices (".concat(d.length,"):")}),(0,r.jsx)("ul",{children:d.map(function(e,t){var n=e.productName;return(0,r.jsx)("li",{children:n},t)})})]}),(0,r.jsxs)(o.default,{direction:"column",gap:1,children:[(0,r.jsxs)(i.default,{title:"Open Web Serial device",onClick:P,disabled:!x,loading:w,loadingPosition:"start",variant:"contained",color:"secondary",children:["Open Web Serial device",w?" (receiving)":null]}),(0,r.jsx)(a.default,{variant:"body2",children:"".concat(p.length," devices connected")})]})]});return t?C:A&&S||s||w?(0,r.jsx)(u.A,{header:"WebUSB / Serial devices",confirm:function(){return I(!1)},canConfirm:!s&&!w,children:C}):null}},51798:(e,t,n)=>{Promise.resolve().then(n.bind(n,82179))},53598:(e,t,n)=>{"use strict";n.d(t,{A:()=>s});var r=n(82666),i=n(65492),o=n(66214),a=n(577),c=n(40662),u=n.n(c),d=function(e){function t(e){var n,o=e.device,a=e.baudRate;(0,i._)(this,t),(n=(0,r._)(this,t)).device=o,n.baudRate=a;var c=o.getInfo(),u=c.usbProductId,d=c.usbVendorId;return n.usbProductId=u,n.usbVendorId=d,n.reader=null,n}return(0,o._)(t,e),t.prototype.connect=function(){var e=this,t=function(){var n;null==(n=e.reader)||n.read().then(function(n){var r=n.value;e.emit("data",r),t()}).catch(function(t){e.emit("error",t)})};return this.device.open({baudRate:this.baudRate}).then(function(){var n=new window.TextDecoderStream;e.device.readable.pipeTo(n.writable),e.reader=n.readable.getReader(),t()})},t}(u());let s=new(function(e){function t(){var e;return(0,i._)(this,t),(e=(0,r._)(this,t)).enabled="undefined"!=typeof navigator&&!!navigator.serial&&!!window.TextDecoderStream,e.activePorts=[],e.baudRate=115200,e.watchPorts(),e}(0,o._)(t,e);var n=t.prototype;return n.getPorts=function(){var e=this;return this.enabled?navigator.serial.getPorts().then(function(t){return t.filter(function(e){return!e.readable}).map(function(t){return new d({device:t,baudRate:e.baudRate})})}):Promise.resolve([])},n.getActivePorts=function(){return this.activePorts},n.watchPorts=function(){var e=this;window.setInterval(function(){e.getPorts().then(function(t){t.forEach(function(t){t.addListener("error",function(n){console.warn(n),e.activePorts=e.activePorts.filter(function(e){return e!==t}),e.emit("activePortsChange",(0,a._)(e.activePorts))}),t.addListener("data",function(t){e.emit("data",t)}),t.connect().then(function(){e.activePorts.push(t),e.emit("activePortsChange",(0,a._)(e.activePorts))}).catch(function(){})})})},1e3)},n.requestPort=function(){var e=this;this.enabled&&navigator.serial.requestPort().then(function(t){if(t.readable)throw Error("device already opened");return new d({device:t,baudRate:e.baudRate})}).catch(function(){return null}).then(function(t){t&&t.connect().then(function(){e.activePorts.push(t),e.emit("activePortsChange",(0,a._)(e.activePorts))})})},t}(u()))},79356:(e,t,n)=>{"use strict";n.d(t,{A:()=>s});var r=n(82666),i=n(65492),o=n(66214),a=n(577),c=n(40662),u=n.n(c),d=function(e){function t(e){var n;return(0,i._)(this,t),(n=(0,r._)(this,t)).device=e,n.manufacturerName=e.manufacturerName||"",n.productName=e.productName||"",n.serialNumber=e.serialNumber||"",n.interfaceNumber=2,n.endpointIn=5,n.endpointOut=4,n.textDecoder=new TextDecoder,n}(0,o._)(t,e);var n=t.prototype;return n.connect=function(){var e=this,t=function(){e.device.transferIn(e.endpointIn,64).then(function(n){e.emit("data",e.textDecoder.decode(n.data)),t()}).catch(function(t){e.emit("error",t)})};return this.device.open().then(function(){var t,n;return null==(n=e.device)||null==(t=n.selectConfiguration)?void 0:t.call(n,1)}).then(function(){var t,n=null==(t=e.device.configuration)?void 0:t.interfaces;n&&n.forEach(function(t){t.alternates.forEach(function(n){255===n.interfaceClass&&(e.interfaceNumber=t.interfaceNumber,n.endpoints.forEach(function(t){"out"===t.direction&&(e.endpointOut=t.endpointNumber),"in"===t.direction&&(e.endpointIn=t.endpointNumber)}))})})}).then(function(){return e.device.claimInterface(e.interfaceNumber)}).then(function(){return e.device.selectAlternateInterface(e.interfaceNumber,0)}).then(function(){return e.device.controlTransferOut({requestType:"class",recipient:"interface",request:34,value:1,index:e.interfaceNumber})}).then(function(){t()})},n.disconnect=function(){var e=this;return this.device.controlTransferOut({requestType:"class",recipient:"interface",request:34,value:0,index:this.interfaceNumber}).then(function(){return e.device.close()})},n.send=function(e){return this.device.transferOut(this.endpointOut,e)},t}(u());let s=new(function(e){function t(){var e;return(0,i._)(this,t),(e=(0,r._)(this,t)).enabled="undefined"!=typeof navigator&&!!navigator.usb&&!!navigator.usb.getDevices,e.activePorts=[],e.watchPorts(),e}(0,o._)(t,e);var n=t.prototype;return n.getPorts=function(){return this.enabled?navigator.usb.getDevices().then(function(e){return e.filter(function(e){return!e.opened}).map(function(e){return new d(e)})}):Promise.resolve([])},n.getActivePorts=function(){return this.activePorts},n.watchPorts=function(){var e=this;window.setInterval(function(){e.getPorts().then(function(t){t.forEach(function(t){t.addListener("error",function(n){console.warn(n),e.activePorts=e.activePorts.filter(function(e){return e!==t}),e.emit("activePortsChange",(0,a._)(e.activePorts))}),t.addListener("data",function(t){e.emit("data",t)}),t.connect().then(function(){e.activePorts.push(t),e.emit("activePortsChange",(0,a._)(e.activePorts))})})})},1e3)},n.requestPort=function(){var e=this;this.enabled&&navigator.usb.requestDevice({filters:[{vendorId:9025,productId:32822},{vendorId:9025,productId:32823},{vendorId:9025,productId:32845},{vendorId:9025,productId:32846},{vendorId:9025,productId:32847},{vendorId:9025,productId:32848},{vendorId:9025,productId:32850},{vendorId:9025,productId:32851},{vendorId:9025,productId:32852},{vendorId:9025,productId:32853},{vendorId:9025,productId:32854},{vendorId:9025,productId:32855},{vendorId:9114}]}).then(function(e){if(e.opened)throw Error("device already opened");return new d(e)}).catch(function(){return null}).then(function(t){t&&t.connect().then(function(){e.activePorts.push(t),e.emit("activePortsChange",(0,a._)(e.activePorts))})})},t}(u()))},82179:(e,t,n)=>{"use strict";n.d(t,{default:()=>v});var r=n(95155),i=n(9665),o=n(7068),a=n(61120);n(12115);var c=n(12668),u=n(39250),d=n(52166),s=n(53598),l=n(79356),f=n(30461);let v=function(){var e=(0,d.A)().useSerials;return(0,r.jsxs)(o.default,{direction:"column",gap:4,children:[(0,r.jsx)(a.Ay,{options:{wrapper:c.default},children:"## Using a WebUSB or WebSerial device:\nAfter connecting a WebUSB or WebSerial device, you can continue to the [Gallery Page](#/gallery) or [Home Page](#/home) now.  \nAn overlay will appear once you're receiving data.  \nYou can also access these options via the USB-Symbol in the navigation and the [Settings Page](#/settings).  \n\n## Note: WebUSB and Web Serial are similar but not the same:\n* While Web Serial has access to a regular COM-port and does not require special devices, the feature is not available on mobile devices.\n* WebUSB requires certain microcontrollers where the processor has direct access to the USB interface (e.g. an Arduino Leonardo). See [webusb for arduino on GitHub](https://github.com/webusb/arduino) for more information.\n"}),(0,r.jsx)(f.A,{}),e?(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(u.A,{inline:!0,passive:!0}),(0,r.jsxs)(o.default,{direction:{xs:"column",md:"row"},gap:4,sx:{"& > *":{flex:1}},children:[(0,r.jsx)(i.default,{severity:s.A.enabled?"success":"warning",variant:"filled",children:s.A.enabled?"Your current browser/device does support Web Serial":"Your current browser/device does not support Web Serial"}),(0,r.jsx)(i.default,{severity:l.A.enabled?"success":"warning",variant:"filled",children:l.A.enabled?"Your current browser/device does support WebUSB":"Your current browser/device does not support WebUSB"})]})]}):null]})}}},e=>{var t=t=>e(e.s=t);e.O(0,[4453,700,7859,7271,4831,6139,5394,7642,9758,9665,8681,9740,1936,5678,2136,1760,3936,4768,8441,1684,7358],()=>t(51798)),_N_E=e.O()}]);