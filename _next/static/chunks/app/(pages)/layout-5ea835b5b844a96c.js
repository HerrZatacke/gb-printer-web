(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[1760,7133],{806:(e,t,F)=>{"use strict";F.d(t,{A:()=>f});var n=F(86447),r=F(693),a=F(60376),i=F(78538),o=F(17652),l=F(12115),s=F(27803),u=F(11760),c=F(52166),d=F(55364);let f=function(){var e=(0,c.A)(),t=e.sortPalettes,F=e.setSortPalettes,f=(0,u.h)().images,m=(0,o.c3)("usePaletteSort"),h=(0,l.useMemo)(function(){return[{label:m("defaultAsc"),value:s.V.DEFAULT_ASC},{label:m("defaultDesc"),value:s.V.DEFAULT_DESC},{label:m("usageAsc"),value:s.V.USAGE_ASC},{label:m("usageDesc"),value:s.V.USAGE_DESC},{label:m("nameAsc"),value:s.V.NAME_ASC},{label:m("nameDesc"),value:s.V.NAME_DESC}]},[m]),p=(0,l.useMemo)(function(){return f.reduce(function(e,t){return(0,d.pl)(t)?e:(0,a._)((0,r._)({},e),(0,n._)({},t.palette,(e[t.palette]||0)+1))},{})},[f]),g=(0,l.useCallback)(function(e,F){var n=(0,i._)(t.split("_"),2),r=n[0],a="asc"===n[1]?1:-1;switch(r){case"usage":var o=p[e.shortName]||0,l=p[F.shortName]||0;if(o<l)return -1*a;if(o>l)return a;return 0;case"name":return e.name.localeCompare(F.name)*a;default:return a}},[p,t]);return{sortPalettes:t,setSortPalettes:F,paletteSortOptions:h,paletteUsages:p,sortFn:g}}},933:(e,t,F)=>{"use strict";F.d(t,{E:()=>o});var n,r=F(97004),a=F(39249),i=F(24463),o=function(e,t){var o,l,s,u,c=(o=(0,r._)(function(){var r;return(0,a.YH)(this,function(a){switch(a.label){case 0:if(n)return[3,2];return[4,Promise.all([F.e(9268),F.e(7431),F.e(340),F.e(1575)]).then(F.bind(F,94979))];case 1:r=a.sent().dropBoxSyncTool,n=n||r(e,t),a.label=2;case 2:return[2,n]}})}),function(){return o.apply(this,arguments)});return i.A.getState().dropboxStorage.use&&c(),{recoverImageData:(l=(0,r._)(function(e){return(0,a.YH)(this,function(t){switch(t.label){case 0:return[4,c()];case 1:return[2,t.sent().recoverImageData(e)]}})}),function(e){return l.apply(this,arguments)}),startAuth:(0,r._)(function(){return(0,a.YH)(this,function(e){switch(e.label){case 0:return[4,c()];case 1:return[2,e.sent().startAuth()]}})}),startSyncData:(s=(0,r._)(function(e){return(0,a.YH)(this,function(t){switch(t.label){case 0:return[4,c()];case 1:return[2,t.sent().startSyncData(e)]}})}),function(e){return s.apply(this,arguments)}),startSyncImages:(0,r._)(function(){return(0,a.YH)(this,function(e){switch(e.label){case 0:return[4,c()];case 1:return[2,e.sent().startSyncImages()]}})}),updateSettings:(u=(0,r._)(function(e){return(0,a.YH)(this,function(t){switch(t.label){case 0:return[4,c()];case 1:return[2,t.sent().updateSettings(e)]}})}),function(e){return u.apply(this,arguments)}),subscribe:function(){var e;return i.A.subscribe(function(e){return e.dropboxStorage},(e=(0,r._)(function(e){return(0,a.YH)(this,function(t){switch(t.label){case 0:return[4,c()];case 1:return t.sent().updateSettings(e),[2]}})}),function(t){return e.apply(this,arguments)}))}}}},5432:(e,t,F)=>{"use strict";F.d(t,{Fv:()=>u,R2:()=>o,YP:()=>s,Ys:()=>l,dm:()=>a,g0:()=>i});var n=F(15905),r=[0,85,170,255],a='{"command":"INIT"}',i='{"command":"DATA", "compressed":0, "more":1}',o='{"command":"DATA","compressed":0,"more":0}',l='{"command":"PRNT","sheets":1,"margin_upper":1,"margin_lower":3,"pallet":228,"density":64 }',s={r:r.slice(),g:r.slice(),b:r.slice(),n:r.slice(),blend:n.Nx.MULTIPLY},u={shortName:"-",name:"Missing Palette",palette:["#aaaaaa","#999999","#888888","#777777"],isPredefined:!0,origin:"technical"}},5672:(e,t,F)=>{"use strict";F.d(t,{A:()=>a,Z:()=>r});var n=F(49641).Buffer,r=function(e){return e.UINT8_ARRAY="uint8array",e.TEXT="text",e.DATA_URL="dataURL",e.BINARY_STRING="binaryString",e}({});let a=function(e,t){return new Promise(function(F,r){var a=new FileReader;switch(a.onload=function(e){var a=e.target;if(null==a?void 0:a.result)return"uint8array"===t?void F(n.from(a.result)):void F(a.result);r(Error("Filereader has no result"))},a.onerror=function(e){r(e)},t){case"uint8array":a.readAsArrayBuffer(e);break;case"text":a.readAsText(e);break;case"binaryString":a.readAsBinaryString(e);break;case"dataURL":a.readAsDataURL(e);break;default:r(Error('readAs param missing or unknown type "'.concat(t,'"')))}})}},9718:(e,t,F)=>{"use strict";F.d(t,{_Y:()=>i,k4:()=>l,qt:()=>a,vK:()=>o});var n,r=F(86447),a=function(e){return e.USB="USB",e.SERIAL="SERIAL",e}({}),i=function(e){return e.UNKNOWN="unknown",e.INACTIVE="inactive",e.PACKET_CAPTURE="packet_capture",e.SUPER_PRINTER_INTERFACE="super_printer_interface",e.GBXCART="gbxcart",e}({}),o=(n={},(0,r._)(n,"unknown","Unknown Device"),(0,r._)(n,"inactive","Inactive Device"),(0,r._)(n,"packet_capture","Arduino Gameboy Printer Emulator"),(0,r._)(n,"super_printer_interface","Super Printer Interface"),(0,r._)(n,"gbxcart","Cartridge Reader (LK Firmware)"),n),l=[{vendorId:9025,productId:32822},{vendorId:9025,productId:32823},{vendorId:9025,productId:32845},{vendorId:9025,productId:32846},{vendorId:9025,productId:32847},{vendorId:9025,productId:32848},{vendorId:9025,productId:32850},{vendorId:9025,productId:32851},{vendorId:9025,productId:32852},{vendorId:9025,productId:32853},{vendorId:9025,productId:32854},{vendorId:9025,productId:32855},{vendorId:9114}]},10746:(e,t,F)=>{"use strict";F.d(t,{z:()=>n});var n="gbp-z-web"},11760:(e,t,F)=>{"use strict";F.d(t,{A:()=>_,h:()=>N});var n=F(97004),r=F(86447),a=F(693),i=F(60376),o=F(87025),l=F(39249),s=F(36952),u=F.n(s),c=F(65453),d=F(46786),f=F(19864),m=F(87031),h=F(55685),p=F(85546),g=F(10746),v=F(15905),x=F(5432),b=F(55364),j=F(46594),y=F(52324),C=function(){var e=(0,n._)(function(e){var t,F,n,r,o,s,u,c;return(0,l.YH)(this,function(l){switch(l.label){case 0:if(c={},!(null==(t=(u=e).frames)?void 0:t.length))return[3,2];return[4,(0,y.g)(u.frames)];case 1:c.frames=l.sent(),l.label=2;case 2:return(null==(F=u.frameGroupNames)?void 0:F.length)&&(c.frameGroups=u.frameGroupNames),(null==(n=u.palettes)?void 0:n.length)&&(c.palettes=u.palettes),(null==(r=u.plugins)?void 0:r.length)&&(c.plugins=u.plugins),(null==(o=u.imageGroups)?void 0:o.length)&&(c.imageGroups=u.imageGroups),(null==(s=u.images)?void 0:s.length)&&(c.images=u.images.map(function(e){return(0,i._)((0,a._)({},e),{created:(0,j.J)(e.created)})}).map(function(e){return(0,i._)((0,a._)({},e),{tags:e.tags||[]})}).map(function(e){if((0,b.pl)(e)){var t=(0,a._)({},e);return t.palette||Object.assign(t,{palette:x.YP}),t.palette.blend||Object.assign(t.palette,{blend:v.Nx.MULTIPLY}),t.frame=e.frame||void 0,t}var F=(0,a._)({},e);return void 0===F.framePalette&&(F.lockFrame?F.framePalette="bw":F.framePalette=F.palette),void 0===F.lockFrame&&(F.lockFrame=!1),void 0===F.invertFramePalette&&(F.invertFramePalette=F.invertPalette),F.frame=e.frame||void 0,F})),[2,c]}})});return function(t){return e.apply(this,arguments)}}(),_=1,A=(0,p.A)("id"),w=(0,p.A)("id"),I=(0,p.A)("id"),S=(0,p.A)("url"),E=(0,m.A)("id"),k=(0,p.A)("shortName"),D=(0,m.A)("name"),B=(0,p.A)("hash"),P=function(e){return E(A(e))},T=function(e){return D(S(e))},M=function(e){return k((0,o._)(u().map(function(e){return(0,i._)((0,a._)({},e),{isPredefined:!0})})).concat((0,o._)(e)))};let N=(0,c.v)()((0,d.Zr)(function(e,t){return{frames:[],palettes:[],frameGroups:[],plugins:[],imageGroups:[],images:[],addFrames:function(t){return e(function(e){return{frames:P((0,o._)(t).concat((0,o._)(e.frames)))}})},addPalettes:function(F){var n=t().palettes,r=F.reduce(function(e,t){return n.find(function(e){return e.shortName===t.shortName})?{update:(0,o._)(e.update).concat([t]),add:e.add}:{update:e.update,add:(0,o._)(e.add).concat([t])}},{add:[],update:[]}),a=r.update,i=r.add;e({palettes:k((0,o._)(i).concat((0,o._)(n.map(function(e){return a.find(function(t){return t.shortName===e.shortName})||e}))))})},deleteFrame:function(t){return e(function(e){return{frames:P(e.frames.filter(function(e){return t!==e.id}))}})},deletePalette:function(t){return e(function(e){return{palettes:e.palettes.filter(function(e){return t!==e.shortName})}})},deletePlugin:function(t){return e(function(e){return{plugins:T(e.plugins.filter(function(e){return t!==e.url}))}})},updateFrameGroups:function(t){return e(function(e){return{frameGroups:w((0,o._)(t).concat((0,o._)(e.frameGroups)))}})},updatePluginConfig:function(F,n,o){var l=t().plugins,s=l.find(function(e){return e.url===F});if(!s)throw Error('Plugin "'.concat(F,'" not found'));var u=s,c=(0,i._)((0,a._)({},u.config||{}),(0,r._)({},n,o));return u=(0,i._)((0,a._)({},u),{config:c}),e({plugins:l.map(function(e){return e.url!==F?e:u})}),c},addUpdatePluginProperties:function(F){var n=t().plugins,r=(0,o._)(n);n.find(function(e){var t=e.url;return F.url===t})||r.push(F),e({plugins:T(r.map(function(e){return e.url!==F.url?e:(0,a._)({},e,F)}))})},addImageGroup:function(F,n){var r=t().imageGroups.map(function(e){var t=e.images.filter(function(e){return!F.images.includes(e)}),r=e.id===n?(0,o._)(e.groups).concat([F.id]):e.groups;return(0,i._)((0,a._)({},e),{groups:r,images:t})});e({imageGroups:I((0,o._)(r).concat([F]))})},deleteImageGroup:function(F){var n=t().imageGroups,r=n.find(function(e){return e.id===F});r&&e({imageGroups:n.reduce(function(e,t){return t.id===F?e:t.groups.includes(F)?(0,o._)(e).concat([(0,i._)((0,a._)({},t),{images:(0,o._)(t.images).concat((0,o._)(r.images)),groups:(0,o._)(t.groups).concat((0,o._)(r.groups)).filter(function(e){return e!==r.id})})]):(0,o._)(e).concat([t])},[])})},updateImageGroup:function(F,n){e({imageGroups:t().imageGroups.map(function(e){var t=(0,a._)({},e);return t.groups=t.groups.filter(function(e){return e!==F.id}),n===t.id&&(t.groups=(0,o._)(t.groups).concat([F.id])),t.id===F.id?F:t})})},groupImagesAdd:function(t,F){return e(function(e){return{imageGroups:e.imageGroups.map(function(e){return e.id===t?(0,i._)((0,a._)({},e),{images:(0,o._)(e.images).concat((0,o._)(F))}):(0,i._)((0,a._)({},e),{images:e.images.filter(function(e){return!F.includes(e)})})})}})},ungroupImages:function(t){return e(function(e){return{imageGroups:e.imageGroups.map(function(e){return(0,i._)((0,a._)({},e),{images:e.images.filter(function(e){return!t.includes(e)})})})}})},setImageGroups:function(t){return e({imageGroups:t})},addImages:function(t){return e(function(e){return{images:B((0,o._)(e.images).concat((0,o._)(t)))}})},deleteImages:function(t){return e(function(e){return{images:(0,o._)(e.images.filter(function(e){var F=e.hash;return!t.includes(F)}))}})},updateImageHash:function(t,F){return e(function(e){return{images:e.images.map(function(e){return e.hash===t?F:e})}})},updateImageFavouriteTag:function(t,F){return e(function(e){return{images:e.images.map(function(e){return e.hash===F?(0,i._)((0,a._)({},e),{tags:(0,h.A)(t?[f.X3.FILTER_FAVOURITE].concat((0,o._)(e.tags)):e.tags.filter(function(e){return e!==f.X3.FILTER_FAVOURITE}))}):e})}})},updateImages:function(t){return e(function(e){return{images:e.images.map(function(e){return t.find(function(t){return t.hash===e.hash})||e})}})},setFrames:function(t){return e({frames:A(t)})},setImages:function(t){return e({images:B(t)})},setPalettes:function(t){return e({palettes:M(t)})}}},{name:"".concat(g.z,"-items"),storage:(0,d.KU)(function(){return localStorage}),merge:function(e,t){var F=(0,a._)({},t,e);return(0,i._)((0,a._)({},F),{palettes:M(F.palettes),plugins:F.plugins.map(function(e){return(0,i._)((0,a._)({},e),{loading:!1})})})},partialize:function(e){return{frames:e.frames,frameGroups:e.frameGroups,imageGroups:e.imageGroups,images:e.images,plugins:e.plugins.map(function(e){return(0,i._)((0,a._)({},e),{loading:void 0,error:void 0})}),palettes:e.palettes.filter(function(e){return!e.isPredefined})}},version:_,migrate:function(){var e=(0,n._)(function(e,t){var F;return(0,l.YH)(this,function(n){switch(n.label){case 0:if(0!==t)return[3,2];return[4,C(e)];case 1:F=n.sent(),n.label=2;case 2:return[2,F]}})});return function(t,F){return e.apply(this,arguments)}}()}))},15821:(e,t,F)=>{"use strict";F.d(t,{A:()=>x});var n=F(78538),r=F(44054),a=F(95155),i=F(69242),o=F(53267),l=F(7642),s=F(36114),u=F(71977),c=F(99927),d=F(54492),f=F(3127),m=F(16324),h=F(51095),p=F(12115);let g=function(e){var t=e.confirm,F=e.canConfirm,n=e.deny;(0,p.useEffect)(function(){var e=function(e){"Escape"===e.key&&n&&n(),"Enter"===e.key&&e.ctrlKey&&t&&F&&t()};return document.addEventListener("keydown",e),function(){document.removeEventListener("keydown",e)}},[t,F,n])};var v=function(e,t,F,n){var a={};if(n?(a.padding="8px !important",a.overflowX="hidden",a.overflowY="hidden"):(a.scrollbarGutter="stable",a.overflowY="scroll"),F)return a;switch(void 0===t?"undefined":(0,r._)(t)){case"string":a.height=t;break;case"number":a.height="".concat(t,"px")}switch(void 0===e?"undefined":(0,r._)(e)){case"string":a.width=e;break;case"number":a.width="".concat(e,"px");break;default:a.width="440px"}return a};let x=function(e){var t=e.contentHeight,F=e.contentWidth,r=e.header,x=e.closeTitle,b=e.children,j=e.confirm,y=e.deny,C=e.canConfirm,_=e.headerOnly,A=e.fullSize,w=e.open,I=e.keepMounted,S=e.closeOnOverlayClick,E=e.headerActionButtons,k=e.actionButtons,D=(0,n._)((0,p.useState)(),2),B=D[0],P=D[1];g({confirm:j,canConfirm:C||!1,deny:y}),(0,p.useEffect)(function(){P(document.body)},[]);var T=(0,m.default)(),M=(0,h.A)(T.breakpoints.down("md")),N=v(F,t,M,A),R=j?"Cancel":"Close";return(0,a.jsxs)(s.default,{container:B,fullScreen:M||A,maxWidth:"lg",open:"boolean"!=typeof w||w,onClose:y,"aria-label":"string"==typeof r?r:void 0,keepMounted:"boolean"!=typeof I||I,disableEscapeKeyDown:!("boolean"!=typeof S||S),sx:{paddingRight:"10px"},children:[(0,a.jsxs)(d.default,{sx:{display:"flex",justifyContent:"space-between",gap:2,maxWidth:N.width},children:[(0,a.jsx)(o.default,{sx:{whiteSpace:"nowrap",textOverflow:"ellipsis",overflow:"hidden"},children:r}),(0,a.jsxs)(o.default,{sx:{my:-.5,mr:-2},children:[E,y?(0,a.jsx)(f.default,{title:x||"Close ".concat("string"==typeof r?r:""),color:"inherit",onClick:y,children:(0,a.jsx)(i.A,{})}):null]})]}),!_&&(0,a.jsx)(c.default,{sx:N,children:b}),(0,a.jsxs)(u.default,{children:[k,y?(0,a.jsx)(l.default,{onClick:y,color:"primary",variant:"outlined",children:R}):null,j?(0,a.jsx)(l.default,{disabled:!1===C,color:"primary",variant:"contained",onClick:j,children:"Ok"}):null]})]})}},16853:(e,t,F)=>{var n={"./af.js":[30639,639],"./am.js":[39218,9218],"./ar-dz.js":[83291,5672],"./ar-iq.js":[64228,4228],"./ar-kw.js":[36568,6568],"./ar-ly.js":[58265,8265],"./ar-ma.js":[9592,9592],"./ar-sa.js":[42562,2562],"./ar-tn.js":[99148,9148],"./ar.js":[82091,4472],"./az.js":[29139,9139],"./be.js":[33821,3821],"./bg.js":[5543,5543],"./bi.js":[1313,1313],"./bm.js":[55989,5989],"./bn-bd.js":[73705,3705],"./bn.js":[21484,1484],"./bo.js":[97087,7087],"./br.js":[32608,2608],"./bs.js":[11235,1235],"./ca.js":[75648,5648],"./cs.js":[67950,7950],"./cv.js":[1437,1437],"./cy.js":[11400,1400],"./da.js":[89315,9315],"./de-at.js":[90575,575],"./de-ch.js":[42321,2321],"./de.js":[65847,5847],"./dv.js":[29474,9474],"./el.js":[3361,3361],"./en-au.js":[81419,3800],"./en-ca.js":[81458,1458],"./en-gb.js":[37329,2091],"./en-ie.js":[36080,6080],"./en-il.js":[12651,2651],"./en-in.js":[78753,8753],"./en-nz.js":[43410,3410],"./en-sg.js":[18704,8704],"./en-tt.js":[21490,1490],"./en.js":[32107,2107],"./eo.js":[64200,4200],"./es-do.js":[35506,5506],"./es-mx.js":[70918,918],"./es-pr.js":[67005,7005],"./es-us.js":[38827,8827],"./es.js":[37060,7060],"./et.js":[43961,3961],"./eu.js":[93566,3566],"./fa.js":[58133,8133],"./fi.js":[46781,6781],"./fo.js":[53107,3107],"./fr-ca.js":[74579,4579],"./fr-ch.js":[67944,7944],"./fr.js":[1308,1308],"./fy.js":[67661,7661],"./ga.js":[47260,7260],"./gd.js":[58107,8107],"./gl.js":[23459,3459],"./gom-latn.js":[76197,6197],"./gu.js":[78600,8600],"./he.js":[29243,9243],"./hi.js":[94871,4871],"./hr.js":[38650,8650],"./ht.js":[24552,4552],"./hu.js":[84139,4139],"./hy-am.js":[23812,3812],"./id.js":[69965,9965],"./is.js":[73968,3968],"./it-ch.js":[25415,5415],"./it.js":[36317,6317],"./ja.js":[60241,241],"./jv.js":[70028,28],"./ka.js":[21064,1064],"./kk.js":[77614,7614],"./km.js":[95412,5412],"./kn.js":[11101,1101],"./ko.js":[39810,9810],"./ku.js":[87804,7804],"./ky.js":[1664,1664],"./lb.js":[44006,4006],"./lo.js":[37917,7917],"./lt.js":[14524,4524],"./lv.js":[17770,7770],"./me.js":[71318,1318],"./mi.js":[66994,6994],"./mk.js":[57092,7092],"./ml.js":[45689,5689],"./mn.js":[78595,8595],"./mr.js":[32511,2511],"./ms-my.js":[60265,265],"./ms.js":[72076,2076],"./mt.js":[54593,4593],"./my.js":[17890,5509],"./nb.js":[18452,8452],"./ne.js":[60393,393],"./nl-be.js":[28672,8672],"./nl.js":[69030,9030],"./nn.js":[64296,4296],"./oc-lnc.js":[82472,2472],"./pa-in.js":[741,741],"./pl.js":[45624,5624],"./pt-br.js":[10683,683],"./pt.js":[63088,3088],"./rn.js":[57468,7468],"./ro.js":[11087,1087],"./ru.js":[68445,8445],"./rw.js":[92775,2775],"./sd.js":[16743,6743],"./se.js":[50580,580],"./si.js":[96424,6424],"./sk.js":[1158,1158],"./sl.js":[58271,8271],"./sq.js":[4992,4992],"./sr-cyrl.js":[74798,4798],"./sr.js":[21977,1977],"./ss.js":[37502,7502],"./sv-fi.js":[12481,2481],"./sv.js":[9709,9709],"./sw.js":[43090,3090],"./ta.js":[49011,9011],"./te.js":[97543,7543],"./tet.js":[35321,5321],"./tg.js":[59037,9037],"./th.js":[42376,2376],"./tk.js":[45377,5377],"./tl-ph.js":[15879,5879],"./tlh.js":[46288,6288],"./tr.js":[27742,7742],"./tzl.js":[80834,834],"./tzm-latn.js":[88893,8893],"./tzm.js":[69469,9469],"./ug-cn.js":[12326,2326],"./uk.js":[59516,9516],"./ur.js":[94823,4823],"./uz-latn.js":[2367,2367],"./uz.js":[19999,9999],"./vi.js":[6477,6477],"./x-pseudo.js":[9217,9217],"./yo.js":[6252,6252],"./zh-cn.js":[38464,8464],"./zh-hk.js":[2068,2068],"./zh-tw.js":[77932,7932],"./zh.js":[70350,350]};function r(e){if(!F.o(n,e))return Promise.resolve().then(()=>{var t=Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t});var t=n[e],r=t[0];return F.e(t[1]).then(()=>F.t(r,23))}r.keys=()=>Object.keys(n),r.id=16853,e.exports=r},19707:(e,t,F)=>{"use strict";F.r(t),F.d(t,{default:()=>nb});var n,r=F(693),a=F(60376),i=F(95155);F(40284),F(39141),F(49231);var o=F(59932),l=F(22548),s=F(7068),u=F(38309),c=F(51095),d=F(12115),f=F(46498),m=F(78538),h=F(69242),p=F(31747),g=F(9665),v=F(89880),x=F(3127),b=F(700),j=F(27299);let y=function(e){var t=e.dismiss,F=e.errorMessage,n=(0,m._)((0,d.useState)(!1),2),r=n[0],a=n[1];return(0,i.jsxs)(g.default,{severity:"error",variant:"filled",sx:{minWidth:300},action:(0,i.jsxs)(i.Fragment,{children:[F.error.stack&&!r&&(0,i.jsx)(x.default,{size:"small",title:"Show error stack","aria-label":"close",color:"inherit",onClick:function(){return a(!0)},children:(0,i.jsx)(p.A,{fontSize:"small"})}),(0,i.jsx)(x.default,{size:"small","aria-label":"close",color:"inherit",onClick:function(e,F){"clickaway"!==F&&t()},children:(0,i.jsx)(h.A,{fontSize:"small"})})]}),children:[(0,i.jsx)(v.default,{sx:{color:"inherit",whiteSpace:"pre"},children:F.error.message}),r&&(0,i.jsx)(b.default,{variant:"caption",fontFamily:"monospace",component:"pre",sx:function(e){return(0,j.E)(e,{backgroundColor:"#FFFFFF22",maxHeight:"200px",overflow:"auto",p:1})},children:F.error.stack})]})},C=function(){var e=(0,f.A)(),t=e.errors,F=e.dismissError;return(0,i.jsx)(s.default,{direction:"column",gap:4,sx:function(e){return{position:"fixed",top:e.spacing(10),right:e.spacing(2),zIndex:30}},children:t.map(function(e,t){return(0,i.jsx)(y,{dismiss:function(){return F(t)},errorMessage:e},e.id)})})};var _=F(96253),A=F(19505),w=F(40117),I=F(44389),S=F(37713),E=F(44516),k=F(4420),D=F(71169),B=F(97482),P=F(7642),T=F(61487),M=F(74964),N=F(18987),R=F(63148),L=F(42850),G=F(22376),O=F(85222),U=F(30529),H=F(6874),z=F.n(H),V=F(99999),Y=F(95939),W=F(32521),Q=F(52166),X=F(24463);let K=function(){var e=(0,X.A)(),t=e.gitStorage,F=e.dropboxStorage,n=F.autoDropboxSync||!1,r=!!(F.use||t.use&&t.owner&&t.repo&&t.branch&&t.throttle&&t.token),a=(0,f.A)(),i=a.syncBusy,o=a.setSyncSelect,l=a.setShowSerials,s=(0,Q.A)().useSerials,u=(0,X.A)().syncLastUpdate,c=(0,W.Z)(),d=c.webUSBEnabled,m=c.webSerialEnabled,h=c.hasInactiveDevices,p=c.unknownDeviceResponse;return{disableSerials:!d&&!m,serialWarning:!!(h&&p),portCount:c.connectedDevices.length,syncBusy:i,useSync:r,useSerials:s,syncLastUpdate:u,autoDropboxSync:n,selectSync:function(){return o(!0)},setShowSerials:function(){return l(!0)}}};var q=F(29032),Z=F(69077),J=F(87025),$=F(67069),ee=F(86447),et=function(e){var t;return{styleOverrides:{root:(t={},(0,ee._)(t,e.breakpoints.up("xs"),{minHeight:"var(--navigation-height)"}),(0,ee._)(t,"justifyContent","end"),(0,ee._)(t,"& .MuiButton-root",{height:"var(--navigation-height)",padding:"0 20px",fontSize:e.typography.body1.fontSize}),(0,ee._)(t,"& .MuiButtonGroup-horizontal",{paddingRight:"8px"}),(0,ee._)(t,"& .MuiSvgIcon-root",{fontSize:"1.8rem"}),t)}}},eF=function(e){return{MuiAppBar:{variants:(0,J._)(["primary","secondary"].map(function(t){return{props:{color:t},style:{"--AppBar-background":e.palette[t].dark,"--AppBar-color":e.palette[t].contrastText,"& .MuiButton-root.active":{backgroundColor:e.palette["primary"===t?"secondary":"primary"].main},"& .MuiButton-root:hover":{backgroundColor:e.palette[t].light,color:e.palette[t].contrastText},"& .MuiIconButton-root:hover":{backgroundColor:e.palette[t].light,color:e.palette[t].contrastText}}}}))},MuiButton:{styleOverrides:{root:{fontSize:"13px",textTransform:"none",minHeight:"40px"}},variants:(0,J._)(["primary","secondary","tertiary"].map(function(t){return{props:{color:t},style:{"&.MuiButton-outlined":{color:e.palette[t].light,borderColor:e.palette[t].light}}}}))},MuiCardActionArea:{styleOverrides:{root:{height:"100%",".MuiCardActionArea-focusHighlight":{background:"transparent"}}}},MuiCardContent:{styleOverrides:{root:{padding:"24px 16px"}}},MuiDialogTitle:{styleOverrides:{root:{backgroundColor:e.palette.primary[e.palette.mode],color:e.palette.primary.contrastText,"&& + .MuiDialogContent-root":{padding:e.spacing(2)}}}},MuiFormControl:{styleOverrides:{root:{paddingTop:16,".MuiStack-root &:first-of-type":{marginTop:12}}}},MuiInputLabel:{styleOverrides:{root:{transform:"translate(14px, 25px) scale(1)","&.MuiInputLabel-shrink":{transform:"translate(2px, -12px) scale(1)"}}}},MuiLink:{styleOverrides:{root:{color:"inherit"}}},MuiList:{styleOverrides:{root:{".MuiListSubheader-root":{display:"flex",".MuiListItemIcon-root":{minWidth:32,flexDirection:"column",justifyContent:"center"}}}}},MuiMenuItem:{styleOverrides:{root:{"&.Mui-selected":{backgroundColor:(0,k.X4)(e.palette.secondary.main,.8),color:e.palette.secondary.contrastText,"&:hover,&.Mui-focusVisible":{backgroundColor:e.palette.secondary.main}}}}},MuiOutlinedInput:{styleOverrides:{root:{background:"dark"===e.palette.mode?"#000000":"#ffffff",color:"dark"===e.palette.mode?"#ffffff":"#000000",".MuiInputBase-inputMultiline":{fontSize:"13px",lineHeight:"16px",fontFamily:"monospace"},".MuiOutlinedInput-notchedOutline legend span":{display:"none"}}}},MuiPaper:{styleOverrides:{root:{backgroundImage:"none"}}},MuiSelect:{styleOverrides:{select:{display:"flex",".MuiListItemIcon-root":{minWidth:32,flexDirection:"column",justifyContent:"center"}}},defaultProps:{displayEmpty:!0}},MuiSwitch:{defaultProps:{color:"tertiary"}},MuiTab:{styleOverrides:{root:{fontSize:16,textTransform:"none",minHeight:60,"&.Mui-selected":{backgroundColor:(0,k.X4)(e.palette.primary.main,.2),color:"inherit"},"&:hover":{backgroundColor:(0,k.X4)(e.palette.secondary.main,.35)}}}},MuiTabs:{styleOverrides:{root:{"&~.MuiTabPanel-root":{padding:0,marginTop:e.spacing(2)},"& .MuiTabScrollButton-root.Mui-disabled":{opacity:.25}}},defaultProps:{scrollButtons:"auto",indicatorColor:"secondary",variant:"scrollable"}},MuiTextField:{defaultProps:{color:"tertiary",slotProps:$.y}},MuiToggleButtonGroup:{styleOverrides:{grouped:{variants:(0,J._)(["primary","secondary","tertiary"].map(function(t){return{props:{color:t},style:{"&.Mui-selected":{background:e.palette[t].main,color:e.palette[t].contrastText,"&:hover":{backgroundColor:(0,k.X4)(e.palette[t].main,.7)}},"&:hover":{backgroundColor:(0,k.X4)(e.palette[t].main,.4)}}}}))}},defaultProps:{color:"tertiary"}},MuiToolbar:et(e)}},en=function(e){var t=e.mode,F=e.colorPrimary,n=e.colorSecondary,r=e.colorTertiary,a=e.colorSuccess,i=e.colorWarn,o=e.colorError,l=e.colorPageBackground,s=e.colorText,u=(0,Z.A)({shape:{borderRadius:0},breakpoints:{values:{xs:0,sm:570,md:768,lg:1024,xl:1264}},typography:{fontFamily:'"Trebuchet MS", Helvetica, sans-serif',body1:{fontSize:16},body2:{fontSize:13},h1:{fontSize:30,fontWeight:"bold"},h2:{fontSize:24,fontWeight:"bold"},h3:{fontSize:20,fontWeight:"bold"},h4:{fontSize:18,fontWeight:"bold"}},palette:{mode:t,primary:{main:F},secondary:{main:n},success:{main:a},warning:{main:i},error:{main:o},background:{default:l,paper:(0,k.a)(l,"light"===t?.6:.02)}}}),c=(0,Z.A)(u,{palette:{tertiary:u.palette.augmentColor({color:{main:r},name:"tertiary"}),fgtext:u.palette.augmentColor({color:{main:s},name:"fgtext"}),bg:u.palette.augmentColor({color:{main:l},name:"bg"}),text:{primary:s,secondary:s}}}),d=(0,k.au)(c.palette.primary.main,s,.7);return(0,Z.A)(c,{typography:{fontFamily:'"Trebuchet MS", Helvetica, sans-serif',body1:{color:s},body2:{color:s},h1:{color:d},h2:{color:d},h3:{color:d},h4:{color:d}},components:eF(c)})},er={colorInfo:"#3f769e",colorSuccess:"#3f9e7c",colorWarn:"#8b7b2c",colorError:"#cb0003",colorPrimary:"#503281",colorSecondary:"#455c63",colorTertiary:"#4a6959"},ea=en((0,r._)({mode:"dark",colorPageBackground:"#2a292b",colorText:"#b2b2b2"},er)),ei=en((0,r._)({mode:"light",colorPageBackground:"#d6d3dc",colorText:"#333333"},er)),eo=F(99451),el=function(e){return e.ERROR="error",e.INFO="info",e.DEFAULT="default",e}(el||{});let es=function(){var e=(0,m._)((0,d.useState)(!1),2),t=e[0],F=e[1],n=(0,m._)((0,d.useState)(void 0),2),r=n[0],a=n[1],l=(0,q.j)().fullPath,s=(0,Q.A)(),c=s.themeName,p=s.setThemeName,g=(0,f.A)(),v=g.showTrashCount,b=g.trashCount,j=(0,Y.Z)(),y=j.lastGalleryLink,C=j.getUrl,H=(0,m._)((0,d.useState)(C({pageIndex:0,group:""})),2),X=H[0],Z=H[1];(0,d.useEffect)(function(){Z(y&&l!==y?y:C({pageIndex:0,group:""}))},[l,C,y]),(0,d.useEffect)(function(){a(document.body)},[]);var J=K(),$=J.disableSerials,ee=J.serialWarning,et=J.portCount,eF=J.syncBusy,en=J.useSync,er=J.useSerials,ea=J.syncLastUpdate,el=J.autoDropboxSync,es=J.selectSync,eu=J.setShowSerials,ec=(0,W.Z)().isReceiving,ed=(0,d.useMemo)(function(){return b.frames+b.images},[b]),ef=(0,d.useMemo)(function(){return el&&ea.local!==ea.dropbox},[el,ea]),em=(0,d.useMemo)(function(){return[{label:"Home",route:"/",prefetch:!1},{label:"Gallery",route:X,prefetch:!0},{label:"Import",route:"/import",prefetch:!1},{label:"Palettes",route:"/palettes",prefetch:!0},{label:"Frames",route:"/frames",prefetch:!0},{label:"Settings",route:"/settings/generic",prefetch:!1}].reduce(eo.N,[])},[X]),eh=(0,d.useMemo)(function(){return[{title:"Trash",icon:(0,i.jsx)(A.A,{}),badgeContent:ed>0?ed.toString(10):null,badgeColor:"error",disabled:!1,isBusy:!1,onClick:function(){return v(!0)}},en?{title:"Syncronize with remote service(s)",icon:(0,i.jsx)(S.A,{}),badgeContent:ef?"!":null,badgeColor:"error",disabled:eF,isBusy:!1,onClick:es}:null,{title:c===V.V.BRIGHT?"Switch to dark mode":"Switch to bright mode",icon:c===V.V.BRIGHT?(0,i.jsx)(w.A,{}):(0,i.jsx)(_.A,{}),badgeContent:null,badgeColor:"default",disabled:!1,isBusy:!1,onClick:function(){return p(c===V.V.BRIGHT?V.V.DARK:V.V.BRIGHT)}},er?{title:$?"USB devices are disabled":"WebUSB Serial devices",icon:(0,i.jsx)(E.A,{}),badgeContent:ee&&"!"||et&&et.toString(10)||null,badgeColor:ee?"error":"info",disabled:$,isBusy:ec,onClick:eu}:null].reduce(eo.N,[])},[$,et,es,ee,eu,p,v,eF,ef,c,ed,er,en,ec]);return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(u.default,{theme:ei,children:(0,i.jsx)(D.default,{color:"primary",enableColorOnDark:!0,position:"sticky",children:(0,i.jsx)(o.default,{maxWidth:"xl",disableGutters:!0,children:(0,i.jsxs)(U.default,{disableGutters:!0,children:[(0,i.jsx)(T.default,{variant:"text",component:"nav",role:"navigation","aria-label":"Main Navigation",sx:{display:{xs:"none",md:"inline-flex"},width:"100%"},children:em.map(function(e){var t=e.route,n=e.label,r=e.prefetch;return(0,i.jsx)(P.default,{href:t,prefetch:r,component:z(),color:"inherit",onClick:function(){return F(!1)},children:n},t)})}),(0,i.jsxs)(T.default,{variant:"text",role:"navigation","aria-label":"Utility Navigation",children:[eh.map(function(e){var t=e.title,F=e.icon,n=e.onClick,r=e.badgeContent,a=e.badgeColor,o=e.isBusy;return(0,i.jsx)(x.default,{color:"inherit",title:t,onClick:n,sx:o?{animation:"pulse-bg 600ms infinite"}:void 0,children:(0,i.jsx)(B.default,{badgeContent:r,color:a,anchorOrigin:{vertical:"bottom",horizontal:"right"},children:F})},t)}),(0,i.jsx)(x.default,{color:"inherit",title:"Open Main Navigation",onClick:function(){return F(!0)},sx:{display:{md:"none"}},children:(0,i.jsx)(I.A,{})})]})]})})})}),(0,i.jsxs)(N.default,{container:r,variant:"temporary",open:t,onClose:function(){return F(!1)},ModalProps:{keepMounted:!0},sx:function(e){return{display:{xs:"block",md:"none"},"& .MuiDrawer-paper":{width:{xs:"100%",sm:e.breakpoints.values.sm}}}},children:[(0,i.jsx)(U.default,{disableGutters:!0,children:(0,i.jsx)(T.default,{variant:"text",sx:{display:{md:"none"}},children:(0,i.jsx)(x.default,{color:"inherit",title:"Close Main Navigation",onClick:function(){return F(!1)},children:(0,i.jsx)(h.A,{})})})}),(0,i.jsx)(M.default,{}),(0,i.jsx)(R.default,{children:em.map(function(e){var t=e.route,n=e.label;return(0,i.jsx)(L.default,{disablePadding:!0,children:(0,i.jsx)(G.default,{href:t,component:z(),onClick:function(){return F(!1)},sx:function(e){return{"&.active":{background:e.palette.secondary.light,color:e.palette.secondary.contrastText},"&:hover":{background:(0,k.X4)(e.palette.primary.main,.3)}}},children:(0,i.jsx)(O.default,{primary:n})})},t)})})]})]})},eu=function(){return(0,i.jsx)(u.default,{theme:ei,children:(0,i.jsx)(D.default,{color:"primary",enableColorOnDark:!0,position:"sticky",children:(0,i.jsx)(o.default,{maxWidth:"xl",disableGutters:!0,children:(0,i.jsx)(U.default,{disableGutters:!0})})})})};var ec=F(4915),ed=F(76380),ef=F(90835),em=F(78449),eh=F(55864),ep=F(70661);let eg=function(e){return Math.floor(e)===e&&!!(e&&!(e&e-1))},ev=function(e){var t=e.imageData,F=e.scaleFactor,n=e.width,r=e.height,a=e.fileName,o=e.palette,l=e.dither,u=e.contrastBaseValues,c=(0,d.useRef)(null),f=(0,d.useRef)(null);return(0,d.useEffect)(function(){c.current&&f.current&&(null==u?void 0:u.length)&&(0,ep.q)({targetCanvas:c.current,originalCanvas:f.current,imageData:t,palette:o,dither:l,contrastBaseValues:u})}),(0,i.jsxs)(s.default,{direction:"column",gap:1,children:[(0,i.jsxs)(s.default,{title:"".concat(a," - ").concat(F,"x"),direction:"row",gap:1,justifyContent:"space-between",alignItems:"center",children:[(0,i.jsx)("canvas",{width:n,height:r,ref:f}),(0,i.jsx)(eh.A,{fontSize:"large"}),(0,i.jsx)("canvas",{width:n,height:r,ref:c})]}),eg(F)?null:(0,i.jsx)(g.default,{severity:"warning",variant:"filled",children:"The scale factor of your image is ".concat(F.toPrecision(3),". To get a clean result without artifacts, try to import only images with it's dimensions being scaled by powers of two. (1, 2, 4, 8 ...)")})]})};var ex=F(15821),eb=F(39893),ej=F(48675),ey=F(85539);let eC=function(){var e=(0,ej.A)(),t=e.bitmapQueue,F=e.bitmapQueueCancel,n=e.importQueueAdd,r=(0,Q.A)(),a=r.bitmapQueueDither,o=r.bitmapQueueSetting,l=r.setBitmapQueueDither,u=r.setBitmapQueueSetting,c=(0,d.useMemo)(function(){return(eb.C.find(function(e){return e.value===o})||eb.C[0]).baseValues},[o]);return(0,i.jsx)(ex.A,{header:"Prepare Bitmaps for import",confirm:function(){(0,ey._)({bitmapQueue:t,dither:a,contrastBaseValues:c,importQueueAdd:n})},deny:F,children:(0,i.jsxs)(s.default,{direction:"column",gap:4,children:[t.map(function(e,t){return(0,i.jsx)(ev,{imageData:e.imageData,scaleFactor:e.scaleFactor,width:e.width,height:e.height,fileName:e.fileName,dither:a,contrastBaseValues:c,palette:["#ffffff","#aaaaaa","#555555","#000000"]},t)}),(0,i.jsx)(ec.default,{label:"Enable Dither",control:(0,i.jsx)(ef.default,{checked:a,onChange:function(e){l(e.target.checked)}})}),(0,i.jsx)(em.default,{value:o,label:"Contrast preset",select:!0,size:"small",onChange:function(e){u(e.target.value)},children:eb.C.map(function(e){var t=e.value,F=e.name;return(0,i.jsx)(ed.default,{value:t,children:F},t)})})]})})};var e_=F(53267),eA=F(17976),ew=F(99776),eI=F(64263),eS=F(44296),eE=F(90404);let ek=function(e){var t=e.hash,F=e.hashes,n=e.meta,o=(0,a._)((0,r._)({},n),{hash:t}),l=Object.keys(o).reduce(function(e,t){var F="number"!=typeof o[t]&&"string"!=typeof o[t]?JSON.stringify(o[t]):o[t];return(0,J._)(e).concat([{key:t,value:F}])},[]);if(F){var s=Object.keys(F).reduce(function(e,t){var n={key:"hash ".concat(t),value:F[t]};return(0,J._)(e).concat([n])},[]);l.push.apply(l,(0,J._)(s))}return(0,i.jsx)(eS.default,{children:(0,i.jsx)(eA.default,{padding:"none",sx:{fontFamily:"monospace"},children:(0,i.jsx)(ew.default,{children:l.map(function(e){var t=e.key,F=e.value;return(0,i.jsxs)(eE.default,{children:[(0,i.jsx)(eI.default,{component:"th",scope:"row",children:t}),(0,i.jsx)(eI.default,{align:"right",children:F})]},t)})})})})};var eD=F(39630),eB=F(41186);let eP=function(){var e=(0,eB.A)().dialogs[0],t=e.questions,F=(0,m._)((0,d.useState)(t?t({}).reduce(function(e,t){var F,n,i,o=t.key;switch(t.type){case eD.V.SELECT:F=(null==(i=(0,r._)({},t).options)||null==(n=i.find(function(e){return e.selected}))?void 0:n.value)||"";break;case eD.V.CHECKBOX:F=!1;break;case eD.V.TEXT:F=t.initialValue||"";break;case eD.V.NUMBER:F=0;break;case eD.V.INFO:default:return e}return(0,a._)((0,r._)({},e),(0,ee._)({},o,F))},{}):{}),2),n=F[0],i=F[1];return{message:e.message,confirm:function(){return e.confirm(n)},deny:e.deny,questions:t?t(n):[],values:n,setSelected:function(e){i((0,r._)({},n,e))}}},eT=function(){var e=eP(),t=e.message,F=e.questions,n=e.values,r=e.setSelected,a=e.confirm,o=e.deny;return(0,i.jsx)(ex.A,{confirm:a,deny:o,header:t,headerOnly:!F.length,children:(0,i.jsx)(s.default,{direction:"column",gap:2,children:F.map(function(e){switch(e.type){case eD.V.SELECT:var t=e.label,F=e.key,a=e.options,o=e.disabled;return(0,i.jsx)(em.default,{select:!0,disabled:void 0!==o&&o,size:"small",value:n[F]||"",label:t,onChange:function(e){return r((0,ee._)({},F,e.target.value))},children:a.map(function(e){var t=e.value,F=e.name;return(0,i.jsx)(ed.default,{value:t,children:F},t)})},F);case eD.V.TEXT:var l=e.label,s=e.key,u=e.disabled;return(0,i.jsx)(em.default,{disabled:void 0!==u&&u,size:"small",value:n[s]||"",label:l,onChange:function(e){return r((0,ee._)({},s,e.target.value))}},s);case eD.V.NUMBER:var c=e.label,d=e.key,f=e.min,m=e.max,h=e.disabled;return(0,i.jsx)(em.default,{disabled:void 0!==h&&h,size:"small",value:n[d]||"",type:"number",label:c,slotProps:{htmlInput:{min:f,max:m}},onChange:function(e){return r((0,ee._)({},d,e.target.value))}},d);case eD.V.CHECKBOX:var p=e.label,v=e.key,x=e.disabled;return(0,i.jsx)(ec.default,{disabled:void 0!==x&&x,label:p,control:(0,i.jsx)(ef.default,{checked:n[v],onChange:function(e){var t=e.target;r((0,ee._)({},v,t.checked))}})},v);case eD.V.INFO:var j=e.label,y=e.key,C=e.severity;return C?(0,i.jsx)(g.default,{severity:C,variant:"filled",children:j},y):(0,i.jsx)(b.default,{children:j},y);case eD.V.IMAGE:var _=e.label,A=e.key,w=e.src;return(0,i.jsx)(e_.default,{component:"img",src:w,alt:_,title:_,sx:{imageRendering:"pixelated"}},A);case eD.V.META:var I=e.key,S=e.meta;return(0,i.jsx)(ek,{hash:S.hash,meta:null==S?void 0:S.meta,hashes:null==S?void 0:S.hashes},I);default:return null}})})})};var eM=F(50086),eN=F(18407),eR=F(16324);let eL=function(){var e=(0,eR.default)();return(0,i.jsx)(s.default,{justifyContent:"center",alignItems:"center",sx:{position:"fixed",top:0,left:0,width:"100vw",height:"100vh",zIndex:30,background:(0,k.X4)(e.palette.background.paper,.6),backdropFilter:"blur(6px)"},children:(0,i.jsx)(eN.default,{elevation:12,sx:{px:{xs:6,md:10},py:{xs:4,md:9}},children:(0,i.jsxs)(s.default,{direction:"column",gap:4,alignItems:"center",color:e.palette.tertiary.main,children:[(0,i.jsx)(eM.A,{sx:{fontSize:64}}),(0,i.jsx)(b.default,{variant:"h5",fontWeight:"bold",children:"Drop your files here"}),(0,i.jsx)(b.default,{variant:"body2",sx:{maxWidth:"70vw"},textAlign:"center",children:"Printer hex-dumps, .sav savestates, JSON exports or even plain bitmaps."})]})})})};var eG=F(55734),eO=F(78868),eU=F(82691),eH=F(18096),ez=F(35478),eV=F(39489),eY=F(74641),eW=F(11760),eQ=F(44116);let eX=function(e){var t=e.frame,F=e.updateFrame,n=e.noFrameOption,r=e.updateFrameLock,a=e.lockFrame,o=e.selectLabel,l=(0,eW.h)(),u=l.frames,c=l.frameGroups,f=(0,d.useMemo)(function(){return c.map(function(e){var t=(0,eQ.d)(u,e.id);return 0===t.length?[]:[{id:e.id,name:e.name,isGroup:!0}].concat((0,J._)(t.map(function(e){return{id:e.id,name:e.name,isGroup:!1}})))}).flat()},[c,u]);return(0,i.jsxs)(s.default,{direction:"column",gap:2,children:[(0,i.jsxs)(em.default,{label:o||"Frame",select:!0,size:"small",value:t,onChange:function(e){F(e.target.value)},children:[(0,i.jsx)(ed.default,{value:"",children:n||"As imported / No frame"}),f.map(function(e){var t=e.id,F=e.name;return e.isGroup?(0,i.jsxs)(eY.default,{children:[(0,i.jsx)(eV.default,{children:(0,i.jsx)(ez.A,{})}),(0,i.jsx)(O.default,{children:"".concat(F," (").concat(t,")")})]},t):(0,i.jsx)(ed.default,{value:t,children:F},t)})]}),"function"==typeof r?(0,i.jsx)(ec.default,{label:"Use separate color settings for frame",control:(0,i.jsx)(ef.default,{checked:a,onChange:function(e){r(e.target.checked)}})}):null]})};var eK=F(23912),eq=F(14596),eZ=F(75602);let eJ=function(e){var t=e.color,F=e.onChange,n=e.values,r=(0,d.useMemo)(function(){switch(t){case"r":return"#ff0000";case"g":return"#00dd00";case"b":return"#0000ff";default:return"#888888"}},[t]);return(0,i.jsxs)(s.default,{direction:"row",gap:2,alignItems:"center",sx:{pr:2},children:[(0,i.jsx)(x.default,{title:"Reset",onClick:function(){F([0,85,170,255])},children:(0,i.jsx)(eq.A,{})}),(0,i.jsx)(eZ.default,{min:0,max:255,value:n,sx:{color:r},defaultValue:[0,85,170,255],onChange:function(e,t){F(t)},disableSwap:!0})]})};var e$=F(15905),e0=[{id:e$.Nx.NORMAL,label:"Normal (ignore neutral layer)"},{id:e$.Nx.NORMAL_S,label:"Normal ⇵ (only neutral layer)"},{id:e$.Nx.LIGHTEN,label:"Lighten"},{id:e$.Nx.SCREEN,label:"Screen"},{id:e$.Nx.DODGE,label:"Dodge"},{id:e$.Nx.ADDITION,label:"Addition"},{id:e$.Nx.DARKEN,label:"Darken"},{id:e$.Nx.MULTIPLY,label:"Multiply"},{id:e$.Nx.BURN,label:"Burn"},{id:e$.Nx.OVERLAY,label:"Overlay"},{id:e$.Nx.SOFTLIGHT,label:"Soft light"},{id:e$.Nx.HARDLIGHT,label:"Hard light"},{id:e$.Nx.DIFFERENCE,label:"Difference"},{id:e$.Nx.EXCLUSION,label:"Exclusion"}];let e1=function(e){var t=(0,m._)((0,d.useState)(e.values),2),F=t[0],n=t[1],o=(0,eK.A)(function(t){e.onChange(t,!0)},150,{leading:!0,trailing:!0}),l=function(e,t){var i=(0,a._)((0,r._)({},F),(0,ee._)({},e,t));n(i),o.callback(i)},u=["r","g","b","n"].reduce(function(t,F){return e.useChannels[F]?(0,J._)(t).concat([F]):t},[]);return(0,i.jsx)(s.default,{direction:"column",gap:3,children:u.map(function(e){return(0,i.jsxs)(s.default,{direction:"column",gap:0,children:["n"===e?(0,i.jsx)(em.default,{value:F.blend,label:"Neutral Layer Blendmode",select:!0,size:"small",onChange:function(e){l("blend",e.target.value)},children:e0.map(function(e){var t=e.id,F=e.label;return(0,i.jsx)(ed.default,{value:t,children:F},t)})}):null,(0,i.jsx)(eJ,{color:e,values:F[e],onChange:function(t){l(e,t)}})]},"slider-".concat(e))})})};var e2=F(97004),e3=F(39249),e4=F(27088),e5=F(9943),e6=F(97644),e8=F(3856),e7=F(77952),e9=F(86661),te=F(9952),tt=F(30832),tF=F.n(tt),tn=F(46594);let tr=function(e){var t=e.children,F=(0,eR.default)(),n=(0,d.useMemo)(function(){if(!(null==(e=F.components)?void 0:e.MuiTextField))return F;var e,t,n,i=(0,r._)({},F.components.MuiTextField);return(null==(n=i.defaultProps)||null==(t=n.slotProps)?void 0:t.htmlInput)&&delete i.defaultProps.slotProps.htmlInput,(0,a._)((0,r._)({},F),{components:(0,a._)((0,r._)({},F.components),{MuiTextField:i})})},[F]);return(0,i.jsx)(u.default,{theme:n,children:t})};var ta=[e$.pL.DEG_0,e$.pL.DEG_90,e$.pL.DEG_180,e$.pL.DEG_270];let ti=function(e){var t=e.created,n=e.hash,r=e.hashes,a=e.updateCreated,o=e.meta,l=e.rotation,u=e.updateRotation,c=(0,Q.A)().preferredLocale,f=(0,m._)((0,d.useState)(void 0),2),h=f[0],p=f[1];return(0,d.useEffect)(function(){(0,e2._)(function(){var e,t;return(0,e3.YH)(this,function(n){switch(n.label){case 0:e=c.toLowerCase(),n.label=1;case 1:return n.trys.push([1,3,,8]),[4,F(16853)("./".concat(e,".js"))];case 2:return n.sent(),p(e),[3,8];case 3:n.sent(),n.label=4;case 4:return n.trys.push([4,6,,7]),t=e.split("-")[0],[4,F(16853)("./".concat(t,".js"))];case 5:return n.sent(),p(t),[3,7];case 6:return n.sent(),p(void 0),[3,7];case 7:return[3,8];case 8:return[2]}})})()},[c]),(0,i.jsxs)(s.default,{direction:"column",gap:4,children:[(0,i.jsx)(tr,{children:(0,i.jsx)(e7.$,{dateAdapter:te.R,adapterLocale:h,children:(0,i.jsx)(e9.K,{label:"Date / Time",closeOnSelect:!1,views:["year","month","day","hours","minutes","seconds"],value:tF()(t),onChange:function(e){e&&a((0,tn.J)(e.toDate()))}})})}),(0,i.jsxs)(e4.default,{children:[(0,i.jsx)(e5.default,{shrink:!0,children:"Edit Rotation"}),(0,i.jsx)(e8.default,{exclusive:!0,fullWidth:!0,value:l||e$.pL.DEG_0,onChange:function(e,t){u(t)},children:ta.map(function(e){return(0,i.jsx)(e6.default,{value:e,children:"".concat(90*e,"\xb0")},e)})})]}),(0,i.jsx)(ek,{meta:o,hash:n,hashes:r})]})};var to=F(31829);let tl=function(e){var t=e.palette,F=e.fontSize;return(0,i.jsx)(e_.default,{sx:(0,a._)((0,r._)({display:"inline-block",fontSize:F||"2rem",width:"1em",height:"1em",lineHeight:"1em",verticalAlign:"middle",borderRadius:"50%"},(0,to.O)(t,to.h.CONIC)),{"&:hover":{animation:"spin 800ms infinite linear"}})})};var ts=F(806);let tu=function(e){var t=e.value,F=e.allowEmpty,n=e.invertPalette,r=e.noFancy,a=e.onChange,o=e.updateInvertPalette,l=(0,m._)((0,d.useState)(t),2),u=l[0],c=l[1],f=(0,eW.h)().palettes,h=(0,eR.default)(),p=(0,ts.A)().sortFn,g=(0,J._)(f).sort(p);return F&&g.unshift({shortName:"",name:"As selected per image",palette:[],isPredefined:!1,origin:""}),(0,i.jsxs)(s.default,{direction:"column",gap:2,children:[(0,i.jsx)(em.default,{value:t,label:"Palette",size:"small",select:!0,onChange:function(e){a(e.target.value,!0),c(e.target.value)},children:g.map(function(e){var t=e.shortName,F=e.name,n=e.palette;return(0,i.jsxs)(ed.default,{value:t,children:[(0,i.jsx)(eV.default,{children:(0,i.jsx)(tl,{palette:n,fontSize:"1.5rem"})}),(0,i.jsx)(O.default,{children:F})]},t)})}),o?(0,i.jsx)(ec.default,{label:"Invert Palette",control:(0,i.jsx)(ef.default,{checked:n,onChange:function(e){o(e.target.checked)}})}):null,r?null:(0,i.jsx)(e_.default,{component:"ul",sx:{display:"grid",gridTemplateColumns:"repeat(auto-fill, 2.5rem)",justifyContent:"center",gap:.25,button:{padding:0,cursor:"pointer",width:"2.5rem",height:"2.5rem",border:"none",borderRadius:"50%"}},children:g.map(function(e){var t=e.shortName,F=e.name,n=e.palette;return(0,i.jsx)(e_.default,{component:"li",children:(0,i.jsx)("button",{type:"button",title:F,style:{background:t===u?h.palette.tertiary.main:"transparent"},onMouseEnter:function(){a(t,!1)},onMouseLeave:function(){a(u,!1)},onClick:function(){a(t,!0),c(t)},children:(0,i.jsx)(tl,{palette:n})})},t)})})]})};var tc=F(40857),td=F(72502),tf=F(30576),tm=F(25466),th=F(41101),tp=F(19864),tg=function(e){return e.ADD="add",e.REMOVE="remove",e}({});let tv=function(e,t){var F=t.mode,n=t.tag;switch(F){case"add":return{add:(0,J._)(e.add).concat([n]),remove:(0,J._)(e.remove.filter(function(e){return e!==n}))};case"remove":return{remove:(0,J._)(e.remove).concat([n]),add:(0,J._)(e.add.filter(function(e){return e!==n}))};default:return e}};var tx=F(55685),tb=F(3084),tj=function(e){var t=new Set,F=!0,n=!1,r=void 0;try{for(var a,i=e[Symbol.iterator]();!(F=(a=i.next()).done);F=!0){var o=a.value.tags,l=!0,s=!1,u=void 0;try{for(var c,d=o[Symbol.iterator]();!(l=(c=d.next()).done);l=!0){var f=c.value;f!==tp.X3.FILTER_FAVOURITE&&t.add(f)}}catch(e){s=!0,u=e}finally{try{l||null==d.return||d.return()}finally{if(s)throw u}}}}catch(e){n=!0,r=e}finally{try{F||null==i.return||i.return()}finally{if(n)throw r}}return Array.from(t).sort(function(e,t){return e.toLowerCase().localeCompare(t.toLowerCase())})},ty=function(){var e=(0,eW.h)().images,t=(0,m._)((0,d.useState)(tj(e)),2),F=t[0],n=t[1];return(0,d.useEffect)(function(){n(tj(e))},[e]),{availableTags:F}};let tC=function(e){var t=e.updateTags,F=e.selectedTags,n=ty().availableTags.filter(function(e){return!F.includes(e)}),o=(0,m._)((0,d.useState)(""),2),l=o[0],s=o[1];return(0,i.jsx)(tr,{children:(0,i.jsx)(tb.default,{options:n,fullWidth:!0,size:"small",inputValue:l,renderInput:function(e){return(0,i.jsx)(em.default,(0,a._)((0,r._)({},e),{label:"Tags"}))},clearOnBlur:!0,clearOnEscape:!0,freeSolo:!0,onInputChange:function(e,t,F){switch(F){case"input":s(t||"");break;case"reset":case"clear":case"blur":s("")}},onChange:function(e,F,n){switch(n){case"createOption":case"selectOption":t(tg.ADD,(F||"").trim())}}})})},t_=function(e){var t=e.tags,F=e.updateTags,n=e.resetTags,r=(0,tx.A)((0,J._)(t.initial).concat((0,J._)(t.add)));return(0,i.jsxs)(s.default,{direction:"column",gap:2,children:[(0,i.jsx)(tC,{updateTags:F,selectedTags:r}),r.length>0&&(0,i.jsxs)(s.default,{direction:"row",gap:1,flexWrap:"wrap",alignItems:"center",sx:{".MuiChip-root":{my:"1px"}},children:[r.map(function(e){var n,r=t.add.includes(e),a=t.remove.includes(e);return n=r?"success":a?"error":"default",(0,i.jsx)(th.default,{label:(0,i.jsxs)(s.default,{direction:"row",gap:1,alignItems:"center",children:[e===tp.X3.FILTER_FAVOURITE?"❤️":e,(0,i.jsxs)(s.default,{direction:"row",gap:0,sx:{mr:-1,".MuiButtonBase-root":{opacity:.4,borderRadius:"50%","&:hover":{opacity:1},"&:focus-visible":{opacity:1,background:"color-mix(in srgb, currentColor 20%, transparent)"}}},children:[(0,i.jsx)(tm.default,{onClick:function(){return F(tg.ADD,e)},children:(0,i.jsx)(tc.A,{})}),(0,i.jsx)(tm.default,{onClick:function(){return F(tg.REMOVE,e)},children:(0,i.jsx)(td.A,{})})]})]}),color:n,variant:"filled"},e)}),t.add.length+t.remove.length>0&&(0,i.jsx)(x.default,{onClick:n,title:"Reset tags",size:"small",children:(0,i.jsx)(tf.A,{})})]})]})};var tA=function(e){return e.PALETTE="pal",e.FRAME="frame",e.TAGS="tags",e.MISC="misc",e}(tA||{}),tw=function(e,t){switch(e){case"frame":return"Frame";case"misc":return"Misc";case"pal":return t?"Colors":"Palette";case"tags":return"Tags";default:return""}};let tI=function(e){var t,F,n,r,a=(0,d.useMemo)(function(){var t=[];return e.mixedTypes||t.push("pal"),e.regularImage&&t.push("frame"),t.push("tags","misc"),t},[e.mixedTypes,e.regularImage]),o=(0,m._)((0,d.useState)(null),2),l=o[0],u=o[1];return(0,d.useEffect)(function(){u(a[0])},[a]),(0,i.jsx)(s.default,{direction:"column",spacing:1,children:(0,i.jsxs)(eG.Ay,{value:l||a[0],children:[(0,i.jsx)(eO.A,{variant:"fullWidth",indicatorColor:"secondary",allowScrollButtonsMobile:!1,children:a.map(function(t){return(0,i.jsx)(eH.default,{label:tw(t,!!e.paletteRGBN),value:t,onClick:function(){return u(t)}},t)})}),(0,i.jsx)(eU.A,{value:"pal",children:e.paletteRGBN?(0,i.jsx)(e1,{values:e.paletteRGBN,onChange:e.updatePalette,useChannels:{r:!!(null==(t=e.hashes)?void 0:t.r),g:!!(null==(F=e.hashes)?void 0:F.g),b:!!(null==(n=e.hashes)?void 0:n.b),n:!!(null==(r=e.hashes)?void 0:r.n)}}):(0,i.jsx)(tu,{value:e.paletteShort||"",invertPalette:e.invertPalette,onChange:e.updatePalette,updateInvertPalette:e.updateInvertPalette})}),(0,i.jsxs)(eU.A,{value:"frame",children:[(0,i.jsx)(eX,{updateFrame:e.updateFrame,updateFrameLock:e.updateFrameLock,frame:e.frame||"",lockFrame:e.lockFrame}),e.lockFrame&&!e.paletteRGBN?(0,i.jsx)(tu,{value:e.framePaletteShort||"",invertPalette:e.invertFramePalette,onChange:e.updateFramePalette,updateInvertPalette:e.updateInvertFramePalette}):null]}),(0,i.jsx)(eU.A,{value:"tags",children:(0,i.jsx)(t_,{updateTags:e.updateTags,resetTags:e.resetTags,tags:e.tags})}),(0,i.jsx)(eU.A,{value:"misc",children:(0,i.jsx)(ti,{created:e.created,hash:e.hash,hashes:e.hashes,updateCreated:e.updateCreated,meta:e.meta,rotation:e.rotation,updateRotation:e.updateRotation})})]})})};var tS=F(40082),tE=F(5432),tk=F(75097),tD=F(633),tB=F(3381),tP=F(71620);let tT=function(e){var t=e.initial,F=e.add,n=e.remove;return(0,tx.A)((0,J._)(t).concat((0,J._)(F))).filter(function(e){return!n.includes(e)})};var tM=F(55364),tN=F(6456);let tR=function(){var e=(0,tB.A)(),t=e.editImages,F=e.cancelEditImages,n=(0,tP.A)().sortBy,i=(0,eW.h)().images,o=(0,tD.g)().updateImages;return{batchUpdateImages:(0,d.useCallback)(function(e){var l=e.shouldUpdate,s=e.updates,u=e.tagChanges,c=(0,tN.PM)(n),d=(null==t?void 0:t.batch)||[];l&&(null==d?void 0:d.length)&&o(d.reduce(function(e,t){var F=i.find(function(e){return e.hash===t});return F?(0,J._)(e).concat([F]):e},[]).map(tN.YZ).sort(c).map(tN.lt).map(function(e,t){return tk.RQ.reduce(function(e,F){if(!l[F])return e;switch(F){case tk.No.TITLE:return(0,a._)((0,r._)({},e),{title:s.title.replace(/%(n+)/gi,function(e,F){return(t+1).toString(10).padStart(F.length,"0")})});case tk.No.TAGS:var n=tT((0,a._)((0,r._)({},u),{initial:e.tags}));return(0,a._)((0,r._)({},e),{tags:n});case tk.No.ROTATION:case tk.No.LOCK_FRAME:case tk.No.FRAME:case tk.No.CREATED:return(0,a._)((0,r._)({},e),(0,ee._)({},F,s[F]))}if((0,tM.pl)(e))return F===tk.No.PALETTE?(0,a._)((0,r._)({},e),{palette:s.palette}):e;switch(F){case tk.No.PALETTE:case tk.Q3.FRAME_PALETTE:case tk.Q3.INVERT_FRAME_PALETTE:case tk.Q3.INVERT_PALETTE:return(0,a._)((0,r._)({},e),(0,ee._)({},F,s[F]));default:return e}},e)})),F()},[F,null==t?void 0:t.batch,i,n,o])}};var tL=F(98250),tG=F(5847),tO=function(){var e=(0,tB.A)(),t=e.editImages,F=e.cancelEditImages,n=(0,eW.h)(),i=n.palettes,o=n.frames,l=n.images,s=tR().batchUpdateImages,u=function(e){return i.find(function(t){return e===t.shortName})||tE.Fv},c=(0,tG.p)(l,o),f=(0,tL.h)(),h=(0,d.useMemo)(function(){if(t){var e=t.batch||[],F=t.tags||[];if(e[0]){var n=l.find(function(t){return t.hash===e[0]});if(n){var r=f.width<=600?f.height:Math.min(900,f.height),a=e.reduce(function(e,t){var F=l.find(function(e){return e.hash===t});if(!F)return e;var n=(0,tM.pl)(F);return{mono:e.mono||!n,rgb:e.rgb||n}},{mono:!1,rgb:!1}),i=a.mono&&a.rgb,o=(0,tM.pl)(n)?n.palette:void 0,s=(0,tM.pl)(n)?void 0:n.palette,u=(0,tM.pl)(n)?void 0:n.framePalette;return{created:n.created,hash:n.hash,height:r,imageCount:(null==e?void 0:e.length)||0,invertPalette:n.invertPalette||!1,invertFramePalette:n.invertFramePalette||!1,lockFrame:n.lockFrame||!1,mixedTypes:i,tags:F,title:n.title,frame:n.frame,hashes:(0,tM.pl)(n)?n.hashes:void 0,meta:n.meta,paletteRGBN:o,paletteShort:s,framePaletteShort:u,rotation:n.rotation}}}}},[t,l,f]),p=(0,m._)((0,d.useState)((null==h?void 0:h.title)||""),2),g=p[0],v=p[1],x=(0,m._)((0,d.useState)((null==h?void 0:h.created)||""),2),b=x[0],j=x[1],y=(0,m._)((0,d.useState)((null==h?void 0:h.frame)||""),2),C=y[0],_=y[1],A=(0,m._)((0,d.useState)(null==h?void 0:h.lockFrame),2),w=A[0],I=A[1],S=(0,m._)((0,d.useState)(null==h?void 0:h.rotation),2),E=S[0],k=S[1],D=(0,m._)((0,d.useState)(null==h?void 0:h.invertPalette),2),B=D[0],P=D[1],T=(0,m._)((0,d.useState)(null==h?void 0:h.invertFramePalette),2),M=T[0],N=T[1],R=(0,m._)((0,d.useState)((null==h?void 0:h.paletteShort)||""),2),L=R[0],G=R[1],O=(0,m._)((0,d.useState)((null==h?void 0:h.framePaletteShort)||""),2),U=O[0],H=O[1],z=(0,m._)((0,d.useState)(null==h?void 0:h.paletteRGBN),2),V=z[0],Y=z[1],W=(0,m._)((0,d.useState)(!1),2),Q=W[0],X=W[1],K=V||u(L).palette,q=u(U).palette,Z=null==h?void 0:h.hash;(0,d.useEffect)(function(){var e;(e=(0,e2._)(function(){return(0,e3.YH)(this,function(e){switch(e.label){case 0:if(!Z)return[2];return[4,c(Z)];case 1:return X(360===e.sent()),[2]}})}),function(){return e.apply(this,arguments)})()},[c,Z]);var J=(0,m._)((0,d.useState)({initial:(null==h?void 0:h.tags)||[],add:[],remove:[]}),2),$=J[0],et=J[1],eF=(0,m._)((0,d.useState)({created:!1,title:!1,frame:!1,lockFrame:!1,tags:!1,rotation:!1,palette:!1,invertPalette:!1,framePalette:!1,invertFramePalette:!1}),2),en=eF[0],er=eF[1];return{toEdit:h,form:{title:g,created:b,frame:C,lockFrame:w,rotation:E,invertPalette:B,paletteShort:L,framePaletteShort:U,invertFramePalette:M,paletteRGBN:V},isRegularImage:Q,shouldUpdate:en,willUpdateBatch:[en.created?"Update date":"",en.title?"Update title":"",en.palette?"Update image palette colors":"",en.invertPalette?"Update invert image palette setting":"",en.frame?"Update frame":"",en.lockFrame?"Update separate frame settings":"",en.framePalette?"Update frame palette colors":"",en.invertFramePalette?"Update invert frame palette setting":"",en.tags?"Update tags":"",en.rotation?"Update rotation":""].filter(Boolean),tagChanges:$,usedPalette:K,usedFramePalette:q,updateForm:function(e){return function(t){switch(er((0,a._)((0,r._)({},en),(0,ee._)({},e,!0))),e){case"title":v(t);break;case"created":j(t);break;case"invertPalette":P(t);break;case"invertFramePalette":N(t);break;case"framePalette":H(t);break;case"frame":_(t);break;case"lockFrame":I(t);break;case"rotation":k(t)}}},updatePalette:function(e,t){e&&(t&&er((0,a._)((0,r._)({},en),{palette:!0})),"string"==typeof e?G(e):Y(e))},updateFramePalette:function(e,t){t&&er((0,a._)((0,r._)({},en),{framePalette:!0})),H(e)},updateTags:function(e,t){er((0,a._)((0,r._)({},en),{tags:!0})),et((0,r._)({},$,tv($,{mode:e,tag:t})))},resetTags:function(){er((0,a._)((0,r._)({},en),{tags:!1})),et(function(e){return{initial:e.initial,add:[],remove:[]}})},save:function(){s({shouldUpdate:en,updates:{title:g,created:b,frame:C,lockFrame:w,rotation:E,palette:V||L,invertPalette:B||!1,framePalette:U,invertFramePalette:M||!1},tagChanges:$})},cancel:function(){return F()}}},tU=function(e){for(var t=e.parentElement;t;){var F=getComputedStyle(t),n=F.overflowY,r=F.overflowX,a=("auto"===n||"scroll"===n)&&t.scrollHeight>t.clientHeight,i=("auto"===r||"scroll"===r)&&t.scrollWidth>t.clientWidth;if(a||i)return t;t=t.parentElement}return document.scrollingElement||document.documentElement};let tH=function(){var e=tO(),t=e.toEdit,F=e.form,n=e.isRegularImage,r=e.willUpdateBatch,a=e.tagChanges,o=e.usedPalette,l=e.usedFramePalette,u=e.updateForm,c=e.updatePalette,f=e.updateFramePalette,h=e.updateTags,p=e.resetTags,x=e.save,j=e.cancel,y=(0,eR.default)(),C=(0,m._)((0,d.useState)(null),2),_=C[0],A=C[1],w=(0,m._)((0,d.useState)({top:y.spacing(-2)}),2),I=w[0],S=w[1];if((0,d.useEffect)(function(){if(!_)return function(){};var e,t=function(e){var t=_.getBoundingClientRect(),F=Math.min(1,Math.max(144/t.height,1-e.scrollTop/t.height)),n=Math.min(t.height-144,e.scrollTop);S({position:"sticky",zIndex:2,transition:"top ease-in-out 150ms",transform:"translateY(-16px)",top:"-".concat(Math.round(n),"px"),"& .gameboy-image":{transformOrigin:"center bottom",transition:"transform ease-in-out 150ms",transform:"scale(".concat(F.toPrecision(4),")")}})};t(_);var F=function(F){clearTimeout(e),e=setTimeout(function(){t(F.target)},50)},n=tU(_);return n.addEventListener("scroll",F),function(){clearTimeout(e),n.removeEventListener("scroll",F)}},[_]),!t)return console.warn('Editform should be open, but "toEdit" is undefined',t),null;var E=F.title,k=F.created,D=F.frame,B=F.lockFrame,P=F.rotation,T=F.invertPalette,M=F.invertFramePalette,N=F.framePaletteShort,R=F.paletteShort,L=F.paletteRGBN;return(0,i.jsx)(ex.A,{contentHeight:t.height,header:"Editing ".concat(t.imageCount," image(s)"),open:!0,confirm:x,deny:j,children:(0,i.jsxs)(s.default,{direction:"column",gap:4,children:[(0,i.jsx)(e_.default,{ref:A,sx:I,children:(0,i.jsxs)(e_.default,{sx:{mx:y.spacing(-2),position:"relative",backgroundColor:y.palette.background.default},children:[(0,i.jsx)(tS.A,{lockFrame:B,invertPalette:T,palette:o,invertFramePalette:M,framePalette:l,frameId:D,hash:t.hash,hashes:t.hashes,rotation:P}),t.imageCount>1?(0,i.jsxs)(g.default,{severity:"info",sx:{position:"absolute",width:"75%",top:"11%",left:"50%",transform:"translate(-50%, -50%)"},children:[(0,i.jsx)(v.default,{children:"You are editing ".concat(t.imageCount," images")}),r.length?(0,i.jsx)(e_.default,{component:"ul",children:r.map(function(e){return(0,i.jsx)(b.default,{component:"li",variant:"caption",children:e},e)})}):null]}):null]})}),(0,i.jsx)(em.default,{helperText:t.imageCount>1?"Use %n (or %nn, %nnn, ...) to add an index to the image titles":void 0,type:"text",label:"Edit title",value:E,onChange:function(e){var t=e.target.value;u("title")(t)}}),(0,i.jsx)(tI,{created:k,updateCreated:u("created"),regularImage:n,mixedTypes:t.mixedTypes,lockFrame:B,hash:t.hash,hashes:t.hashes,paletteShort:R,framePaletteShort:N,paletteRGBN:L,invertPalette:T,invertFramePalette:M,frame:D,tags:a,meta:t.meta,rotation:P,updatePalette:c,updateInvertPalette:u("invertPalette"),updateFramePalette:f,updateInvertFramePalette:u("invertFramePalette"),updateFrame:u("frame"),updateFrameLock:u("lockFrame"),updateRotation:u("rotation"),updateTags:h,resetTags:p})]})})};var tz=F(56491);let tV=function(e){var t,F,n=(null==e?void 0:e.id)||"",r=(0,tB.A)().cancelEditFrame,a=(0,eW.h)().frames,i=(0,eW.h)(),o=i.frameGroups,l=i.addFrames,s=(0,tD.g)().updateLastSyncLocalNow,u=(0,tz.A)(a,o),c=RegExp("^(?<groupName>[a-z]+)(?<id>[0-9]+)","g").exec(n),f=(null==c||null==(t=c.groups)?void 0:t.groupName)||"",h=(null==c||null==(F=c.groups)?void 0:F.id)||"0",p=(0,m._)((0,d.useState)(f),2),g=p[0],v=p[1],x=(0,m._)((0,d.useState)(parseInt(h,10)),2),b=x[0],j=x[1],y=(0,m._)((0,d.useState)((null==e?void 0:e.name)||""),2),C=y[0],_=y[1],A="".concat(g).concat(b.toString(10).padStart(2,"0")),w=A===n||!a.find(function(e){return A===e.id}),I=!!g.match(/^[a-z]{2,}$/g),S=b>0;return{groups:u,updateId:n,fullId:A,frameIndex:b,frameGroup:g,frameName:C,idValid:w,formValid:w&&I&&S,groupIdValid:I,frameIndexValid:S,setFrameIndex:j,setFrameGroup:v,setFrameName:_,saveFrame:function(){r(),s(),l([{hash:(null==e?void 0:e.hash)||"",id:A,name:C}])},cancelEdit:r}},tY=function(e){var t=e.frameIndex,F=e.frameName,n=e.idValid,r=e.groupIdValid,a=e.frameIndexValid,o=e.frameGroup,l=e.groups,u=e.fullId,c=e.frameGroupName,d=e.extraFields,f=e.setFrameGroupName,m=e.setFrameIndex,h=e.setFrameGroup,p=e.setFrameName,v=!!l.find(function(e){return o===e.id});return(0,i.jsxs)(s.default,{direction:"column",gap:4,children:[d,(0,i.jsxs)(em.default,{label:"Frame group",select:!0,size:"small",type:"text",value:o,onChange:function(e){h(e.target.value)},slotProps:{inputLabel:{shrink:!0},select:{renderValue:function(e){var t;return v?(null==(t=l.find(function(t){return t.id===e}))?void 0:t.name)||"Unknown":""===e?"Select frame group":"New frame group"}}},children:[(0,i.jsx)(ed.default,{value:"",children:v?"Select frame group":"New frame group"}),l.map(function(e){var t=e.id,F=e.name;return(0,i.jsx)(ed.default,{value:t,children:F},t)})]}),(0,i.jsx)(em.default,{label:v?"Frame group id":"New frame group id",size:"small",type:"text",value:o,onChange:function(e){h(e.target.value)},helperText:r?void 0:"Must have at least two characters, only lowercase"}),f?(0,i.jsx)(em.default,{label:"New frame group name",size:"small",type:"text",onChange:function(e){f(e.target.value)},value:v?"":c,disabled:v}):null,(0,i.jsx)(em.default,{label:"Frame Index",size:"small",type:"number",slotProps:{htmlInput:{min:1,max:99}},value:t,onChange:function(e){m(parseInt(e.target.value,10))},helperText:a?null:"Integer, must be greater than 0"}),(0,i.jsx)(em.default,{label:"Frame name",size:"small",type:"text",value:F,onChange:function(e){p(e.target.value)}}),!n&&(0,i.jsx)(g.default,{severity:"warning",variant:"filled",children:'Specified frame index/identifier "'.concat(u,'" is already in use, please try another one.')})]})},tW=function(){var e=(0,tB.A)().editFrame,t=(0,eW.h)().frames.find(function(t){return t.id===e}),F=tV(t),n=F.cancelEdit,r=F.saveFrame,a=F.updateId,o=F.fullId,l=F.formValid,s=F.groups,u=F.frameGroup,c=F.frameIndex,d=F.setFrameIndex,f=F.frameName,m=F.setFrameGroup,h=F.setFrameName,p=F.idValid,v=F.groupIdValid,x=F.frameIndexValid,b=a!==o?' -> "'.concat(o,'"'):"";return(0,i.jsx)(ex.A,{confirm:r,canConfirm:l,header:t?'Editing frame "'.concat(a,'"').concat(b):"Error editing '".concat(e,"'"),deny:n,children:t?(0,i.jsx)(tY,{groups:s,fullId:o,frameIndex:c,frameGroup:u,frameName:f,idValid:p,groupIdValid:v,frameIndexValid:x,setFrameIndex:d,setFrameGroup:m,setFrameName:h}):(0,i.jsx)(g.default,{severity:"error",variant:"filled",children:"A frame with the ID '".concat(e,"' does not exist!")})})};var tQ=F(31936),tX=F(23747);let tK=function(){var e=(0,tX.Ay)(),t=e.editId,F=e.absoluteSlug,n=e.possibleParents,r=e.slug,a=e.title,o=e.canConfirm,l=e.canMove,u=e.slugIsInUse,c=e.slugWasChanged,d=e.parentSlug,f=e.selectionCount,m=e.setSlug,h=e.setTitle,p=e.setParentSlug,g=e.confirm,v=e.move,x=e.cancelEditImageGroup;return(0,i.jsx)(ex.A,{confirm:g,canConfirm:o,header:t!==tX.Ll?"Editing group ".concat(a?'"'.concat(a,'"'):""):"Create new group with ".concat(f," images"),deny:x,contentWidth:"auto",actionButtons:n.length>1&&t===tX.Ll&&(0,i.jsx)(P.default,{disabled:!l,onClick:v,variant:"contained",color:"secondary",children:"Move ".concat(f," selected images")}),children:(0,i.jsx)(s.default,{direction:"column",gap:4,children:t&&(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(em.default,{label:"Title",size:"small",type:"text",value:a,onChange:function(e){return h(e.target.value)}}),(0,i.jsx)(em.default,{label:"Pathsegment (identifier)",size:"small",type:"text",value:r,onChange:function(e){return m(e.target.value)},helperText:u?"Path".concat(c?" is already in use":"",': "').concat(F,'"'):'Path: "'.concat(F,'"'),error:!o}),n.length>1&&(0,i.jsx)(em.default,{label:"Parent group",size:"small",select:!0,onChange:function(e){return p(e.target.value)},value:d,children:n.map(function(e){var t=e.value,F=e.name;return(0,i.jsx)(ed.default,{value:t,children:F},t)})}),(0,i.jsx)(tQ.A,{text:JSON.stringify({slug:r,parentSlug:d,canConfirm:o,slugIsInUse:u},null,2)})]})})})};var tq=F(63457),tZ=function(e){return/^#[0-9a-fA-F]{6}$/.test(e)};let tJ=function(e){var t=e.value,F=e.onChange,n=e.label,r=(0,m._)((0,d.useState)(t),2),a=r[0],o=r[1],l=(0,m._)((0,d.useState)("id-".concat(Math.random().toString(16).split(".")[1])),1)[0];(0,d.useEffect)(function(){o(t)},[t]);var u=(0,d.useRef)(F);return(0,d.useEffect)(function(){u.current=F},[F]),(0,d.useEffect)(function(){var e=setTimeout(function(){tZ(a)&&u.current(a)},125);return function(){clearTimeout(e)}},[a]),(0,i.jsxs)(e4.default,{variant:"outlined",fullWidth:!0,size:"small",color:"tertiary",sx:{"--palette-color":tZ(a)?a:"#000000",".MuiOutlinedInput-notchedOutline":{inset:0},"[type=color]":{height:"100%",width:"100%",opacity:"0",cursor:"pointer"}},children:[(0,i.jsx)(e5.default,{shrink:!0,htmlFor:l,children:n}),(0,i.jsxs)(s.default,{direction:"row",gap:1,sx:{"& > *":{flexBasis:"auto",flexShrink:0,flexGrow:1},"& > *:first-of-type":{flexBasis:"40px",flexShrink:0,flexGrow:0,backgroundColor:"var(--palette-color)"}},children:[(0,i.jsx)(eN.default,{variant:"outlined",children:(0,i.jsx)("input",{type:"color",value:a,onChange:function(e){return o(e.target.value)},tabIndex:-1})}),(0,i.jsx)(tq.default,{id:l,type:"text",value:a,onChange:function(e){return o(e.target.value)},onBlur:function(e){return o(e.target.value.toLowerCase())}})]})]})};var t$=F(66785),t0=(0,F(85546).A)("hash");let t1=function(){var e=(0,eW.h)().images,t=(0,tP.A)(),F=t.imageSelection,n=t.sortBy,r=t.filtersActiveTags,a=t.recentImports,i=(0,d.useMemo)(function(){return{sortBy:n,filtersActiveTags:r,recentImports:a}},[r,a,n]);return(0,d.useMemo)(function(){var t=F.map(function(t){return e.find(function(e){return e.hash===t})}).reduce(tM.iy,[]),n=t.length>1?[]:(0,t$.S)(e,i).reduce(tM.iy,[]),r=t.length+n.length>1?[]:(0,J._)(e).map(tN.YZ).sort((0,tN.PM)(i.sortBy)).map(tN.lt).reduce(tM.iy,[]),a=t0([t.shift(),n.shift(),r.shift(),r.pop(),n.pop(),t.pop()].reduce(tM.iy,[]));return[a.shift(),a.pop()].reduce(tM.iy,[])},[i,F,e])};var t2=function(){var e=(0,tB.A)(),t=e.editPalette,F=e.cancelEditPalette,n=(0,eW.h)(),r=n.palettes,a=n.addPalettes,i=(0,tD.g)().updateLastSyncLocalNow,o=(null==t?void 0:t.shortName)||"",l=(null==t?void 0:t.palette)||[],s=(null==t?void 0:t.name)||"",u=(0,d.useCallback)(function(e){return!!e.match(/^[a-z]+[a-z0-9]*$/gi)&&-1===r.findIndex(function(t){return t.shortName===e})},[r]),c=o===tp.mI,f=(0,m._)((0,d.useState)(s),2),h=f[0],p=f[1],g=(0,m._)((0,d.useState)(l),2),v=g[0],x=g[1],b=(0,m._)((0,d.useState)(c?"":o),2),j=b[0],y=b[1],C=(0,d.useMemo)(function(){return(!c||u(j))&&h.length>0},[h,c,j,u]),_=t1(),A=(0,d.useCallback)(function(){a([{shortName:c?j:o,name:h,palette:v,origin:"Made with the webapp",isPredefined:!1}]),i(),F()},[a,c,F,h,j,v,o,i]);return(0,d.useEffect)(function(){var e=function(e){"Enter"===e.key&&e.ctrlKey&&C&&A()};return document.addEventListener("keydown",e),function(){return document.removeEventListener("keydown",e)}}),{canConfirm:C,canEditShortName:c,newName:h,newShortName:j,palette:v,previewImages:_,shortName:o,setNewName:p,setNewShortName:y,setPalette:x,save:A,cancelEditPalette:F}};let t3=function(){var e=t2(),t=e.canConfirm,F=e.canEditShortName,n=e.newName,r=e.newShortName,a=e.palette,o=e.previewImages,l=e.shortName,u=e.setNewName,c=e.setNewShortName,f=e.setPalette,m=e.save,h=e.cancelEditPalette,p=(0,d.useCallback)(function(e){u(e.target.value)},[u]),g=(0,d.useCallback)(function(e){c(e.target.value)},[c]),v=(0,d.useCallback)(function(e){c(e.target.value.toLowerCase())},[c]),x=(0,d.useCallback)(function(e,t){var F=(0,J._)(a);F[e]=t,f(F)},[a,f]);return l?(0,i.jsx)(ex.A,{confirm:m,canConfirm:t,deny:h,header:"Editing palette ".concat(n?'"'.concat(n,'"'):""),closeOnOverlayClick:!1,children:(0,i.jsxs)(s.default,{direction:"column",gap:4,children:[(0,i.jsx)(em.default,{label:"Edit Title",size:"small",type:"text",placeholder:"Add a title",value:n,onChange:p}),(0,i.jsx)(em.default,{label:"ID/Short name",size:"small",type:"text",value:r,disabled:!F,onChange:g,onBlur:v,required:!0}),(0,i.jsx)(s.default,{direction:"row",gap:2,component:"ul",justifyContent:"space-around",children:o.map(function(e){return(0,i.jsx)(e_.default,{component:"li",children:(0,i.jsx)(tS.A,{hash:e.hash,invertPalette:!1,invertFramePalette:!1,lockFrame:!1,palette:a,framePalette:a})},e.hash)})}),a.map(function(e,t){return(0,i.jsx)(tJ,{label:"Color ".concat(t+1),value:e,onChange:function(e){return x(t,e)}},"color-".concat(t))})]})}):null};var t4=F(29584),t5=F(7585),t6=F(19690),t8=F(75401),t7=F(41218),t9=F(96490),Fe=F(16632),Ft=F(70682),FF=F(24103),Fn=function(e){switch(e){case"r":return"#ff0000";case"g":return"#00aa00";case"b":return"#0000ff";default:return"#444444"}};let Fr=function(e){var t=e.isR,F=e.isG,n=e.isB,r=e.isN,a=e.toggleChannel,o=(0,d.useMemo)(function(){return[{value:t,updateKey:"r"},{value:F,updateKey:"g"},{value:n,updateKey:"b"},{value:r,updateKey:"n"}]},[n,F,r,t]);return(0,i.jsx)(e8.default,{onChange:function(e,t){return a(t)},fullWidth:!0,sx:{".MuiToggleButton-root":{padding:"1px",border:"none"}},children:o.map(function(e){var t=e.value,F=e.updateKey;return(0,i.jsx)(e6.default,{value:F,sx:{"& svg":{color:Fn(F)}},children:t?(0,i.jsx)(Ft.A,{}):(0,i.jsx)(FF.A,{})},F)})})};var Fa=F(52491),Fi=F.n(Fa),Fo=F(7119),Fl=F(85812);let Fs=function(){var e,t=(0,tP.A)().setImageSelection,n=(0,tD.g)().addImages;return{saveRGBNImage:(0,d.useCallback)((e=(0,e2._)(function(e){var r,a,i;return(0,e3.YH)(this,function(o){switch(o.label){case 0:return[4,Promise.resolve().then(F.t.bind(F,52491,23))];case 1:return r=o.sent().default,a=Date.now(),n(i=e.map(function(e,t){return{palette:tE.YP,hashes:e,hash:r(e),created:(0,tn.J)(a+t),title:"",tags:[]}})),t(i.map(function(e){return e.hash})),[2]}})}),function(t){return e.apply(this,arguments)}),[n,t])}};var Fu=F(80360),Fc=function(e){return e.BY_COLOR="BY_COLOR",e.BY_IMAGE="BY_IMAGE",e.MANUAL="MANUAL",e}({}),Fd=function(){var e,t,F,n=(0,Fo.g)().navigateToGroup,i=(0,Y.Z)().view,o=Fs().saveRGBNImage,l=(0,tP.A)().sortBy,s=(0,tB.A)(),u=s.editRGBNImages,c=s.cancelEditRGBNImages,f=s.cancelEditImageGroup,h=(0,eW.h)(),p=h.addImageGroup,g=h.images,v=(0,m._)((0,d.useState)(u.length>5),2),x=v[0],b=v[1],j=l.split("_")[1],y=(0,d.useMemo)(function(){var e=(0,t$.S)(g,{filtersActiveTags:[],sortBy:l,recentImports:[]});return"desc"===j&&e.reverse(),e.reduce(tM.iy,[]).reduce(function(e,t){return u.includes(t.hash)?(0,J._)(e).concat([t]):e},[])},[u,j,g,l]),C=(0,m._)((0,d.useState)(["r","g","b","s","n"]),2),_=C[0],A=C[1],w=(0,m._)((0,d.useState)(y.length<=4?"MANUAL":"BY_COLOR"),2),I=w[0],S=w[1],E=(0,m._)((0,d.useState)({r:(null==(e=y[0])?void 0:e.hash)||void 0,g:(null==(t=y[Math.floor(y.length/3)])?void 0:t.hash)||void 0,b:(null==(F=y[2*Math.floor(y.length/3)])?void 0:F.hash)||void 0}),2),k=E[0],D=E[1],B=_.findIndex(function(e){return"s"===e}),P=Math.ceil(u.length/B),T=B*P!==u.length,M=(0,d.useMemo)(function(){if("MANUAL"===I)return Object.keys(k).length?[k]:[];var e=_.slice(0,B),t=Array(P).fill("").map(function(t,F){return e.reduce(function(e,t,n){var i,o=null==(i=y["BY_COLOR"===I?F+P*n:n+B*F])?void 0:i.hash;return o?(0,a._)((0,r._)({},e),(0,ee._)({},t,o)):e},{})});return"desc"===j&&t.reverse(),t},[P,j,I,k,_,y,B]),N=(0,Fl.N)().formatter,R=(0,d.useCallback)((0,e2._)(function(){var e,t,F,r;return(0,e3.YH)(this,function(a){switch(a.label){case 0:return c(),[4,o(M)];case 1:return a.sent(),x&&(e="RGB ".concat(N(new Date)),t=(0,tX.BF)(e),F=M.map(function(e){return Fi()(e)}),f(),p({id:r=(0,Fu.z)(),slug:t,title:e,created:(0,tn.J)(),coverImage:F[0],images:F,groups:[]},i.id),n(r,0)),[2]}})}),[p,f,c,x,N,n,M,o,i.id]),L="MANUAL"===I;return{order:_,grouping:I,canConfirm:L?M.length>0:_.length>1,lengthWarning:!L&&T,rgbnHashes:M,sortedImages:y,createGroup:x,updateOrder:function(e,t){if(!(t<0)&&!(t>_.length)){var F=_.filter(function(t){return t!==e});F.splice(t,0,e).filter(Boolean),A(F)}},toggleSingleChannel:function(e,t){var F=(0,r._)({},k);F[e]===t?delete F[e]:F[e]=t,D(F)},setGrouping:S,save:R,setCreateGroup:b,cancelEditRGBNImages:c}};let Ff=function(){var e=Fd(),t=e.canConfirm,F=e.order,n=e.grouping,r=e.lengthWarning,a=e.rgbnHashes,o=e.sortedImages,l=e.createGroup,u=e.updateOrder,d=e.toggleSingleChannel,f=e.setGrouping,m=e.setCreateGroup,h=e.save,p=e.cancelEditRGBNImages,v=(0,eR.default)(),x=(0,c.A)(v.breakpoints.up("sm"));return(0,i.jsx)(ex.A,{confirm:h,deny:p,closeOnOverlayClick:!1,canConfirm:t&&!r,header:"Create RGBN images",contentWidth:"576px",children:(0,i.jsxs)(s.default,{direction:"column",gap:4,children:[(0,i.jsxs)(em.default,{label:"Grouping of your selection",select:!0,size:"small",value:n,onChange:function(e){return f(e.target.value)},children:[(0,i.jsx)(ed.default,{value:Fc.BY_COLOR,children:"Selection is grouped by colors (RRR GGG BBB)"}),(0,i.jsx)(ed.default,{value:Fc.BY_IMAGE,children:"Selection is grouped by image (RGB RGB RGB)"}),(0,i.jsx)(ed.default,{value:Fc.MANUAL,children:"Manual channel selection for a single image"})]}),n===Fc.MANUAL?(0,i.jsxs)(s.default,{direction:"column",gap:1,children:[(0,i.jsx)(b.default,{variant:"body2",children:"Manually select the channels to create a single RGBN image"}),(0,i.jsx)(s.default,{direction:"row",gap:2,component:"ul",justifyContent:"center",alignItems:"center",flexWrap:"wrap",sx:{"& .MuiCardContent-root":{padding:1}},children:o.map(function(e){var t,F,n,r,o,l,s,u,c=e.hash,f=(null==(o=a[0])?void 0:o.r)===c,m=(null==(l=a[0])?void 0:l.g)===c,h=(null==(s=a[0])?void 0:s.b)===c,p=(null==(u=a[0])?void 0:u.n)===c,g=(t=255*!!f,F=255*!!m,n=255*!!h,r=function(e,t,F,n){var r=function(e,t){return Math.floor(e*t).toString(16).padStart(2,"0")};return"#".concat(r(e,n)).concat(r(t,n)).concat(r(F,n))},f||m||h?[r(t,F,n,1),r(t,F,n,.66),r(t,F,n,.33),"#000000"]:p?["#ffffff","#aaaaaa","#555555","#000000"]:["#b2b2b2","#949494","#737373","#606060"]);return(0,i.jsxs)(t7.default,{className:"edit-rgbn__single-image-list-entry",variant:"outlined",children:[(0,i.jsx)(Fe.default,{sx:{".gameboy-image":{width:"80px",margin:"0 auto",imageRendering:"auto"}},children:(0,i.jsx)(tS.A,{lockFrame:!1,invertPalette:!1,invertFramePalette:!1,palette:g,framePalette:g,hash:c})}),(0,i.jsx)(t9.default,{children:(0,i.jsx)(Fr,{isR:f,isG:m,isB:h,isN:p,toggleChannel:function(e){return d(e,c)}})})]},c)})})]}):(0,i.jsxs)(s.default,{direction:"column",gap:1,children:[(0,i.jsx)(b.default,{variant:"body2",children:"Select the order of channels to be applied (in the order of images taken). Channels to the right of the separator will not be used."}),(0,i.jsx)(s.default,{direction:{xs:"column",sm:"row"},gap:{xs:1,sm:2},component:"ul",justifyContent:"center",alignItems:"center",children:F.map(function(e,t){return"s"===e?(0,i.jsx)(M.default,{orientation:x?"vertical":"horizontal",variant:"middle",flexItem:!0},e):(0,i.jsxs)(T.default,{component:"li",size:"small",sx:{backgroundColor:Fn(e)},children:[(0,i.jsx)(P.default,{onClick:function(){return u(e,t-1)},sx:{svg:{color:"#ffffff"}},children:x?(0,i.jsx)(t5.A,{}):(0,i.jsx)(t8.A,{})}),(0,i.jsx)(P.default,{onClick:function(){return u(e,t+1)},sx:{svg:{color:"#ffffff"}},children:x?(0,i.jsx)(t6.A,{}):(0,i.jsx)(t4.A,{})})]},e)})}),r?(0,i.jsx)(g.default,{variant:"filled",severity:"error",children:"Your distribution of channels and number of selected images does not add up!"}):null]}),(0,i.jsxs)(s.default,{direction:"column",gap:1,children:[(0,i.jsx)(b.default,{variant:"body2",children:"Image preview"}),(0,i.jsx)(s.default,{direction:"row",component:"ul",sx:{overflowX:"auto","& > *":{flex:"160px 0 0",margin:"0 auto"}},gap:1,children:a.map(function(e,t){return(0,i.jsx)(e_.default,{component:"li",children:(0,i.jsx)(tS.A,{lockFrame:!1,invertPalette:!1,invertFramePalette:!1,palette:tE.YP,framePalette:[],hash:"newRGBN",hashes:e})},t)})})]}),(0,i.jsx)(ec.default,{label:"Create group from created images at current location",control:(0,i.jsx)(ef.default,{checked:l,onChange:function(e){m(e.target.checked)}})})]})})};var Fm=function(e){return e.ADD="add",e.REMOVE="remove",e}({}),Fh=function(){var e=(0,tP.A)(),t=e.filtersActiveTags,F=e.filtersVisible,n=e.setFiltersVisible,r=e.setFiltersActiveTags,a=(0,m._)((0,d.useState)(t),2),i=a[0],o=a[1],l=ty().availableTags;return(0,d.useEffect)(function(){o(t)},[t]),{visible:F,availableTags:l,activeTags:i,updateActiveTags:function(e,t){o("add"===t?(0,tx.A)((0,J._)(i).concat([e])):i.filter(function(t){return t!==e}))},clearTags:function(){return o([])},applyClearTags:function(){return r([])},confirm:function(){return r(i)},cancel:function(){return n(!1)}}};let Fp=function(e){var t=e.tagActive,F=e.toggleTag,n=e.title;return(0,i.jsx)(th.default,{label:n,title:"".concat(t?"Remove":"Select",' "').concat(n,'"-tag'),size:"small",onClick:function(){return F(t?Fm.REMOVE:Fm.ADD)},color:t?"tertiary":"default"})},Fg=function(){var e=Fh(),t=e.visible,F=e.availableTags,n=e.activeTags,r=e.updateActiveTags,a=e.clearTags,o=e.applyClearTags,l=e.confirm,u=e.cancel;return t?(0,i.jsx)(ex.A,{confirm:l,deny:u,header:"Select Filters",contentWidth:"auto",actionButtons:(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(P.default,{disabled:!n.length,title:"Clear Filters",color:"secondary",variant:"outlined",onClick:a,children:"Clear"}),(0,i.jsx)(P.default,{disabled:!n.length,title:"Clear Filters and apply",color:"secondary",variant:"contained",onClick:o,children:"Clear and apply"})]}),children:(0,i.jsxs)(s.default,{direction:"column",gap:4,children:[(0,i.jsxs)(s.default,{direction:"column",gap:1,children:[(0,i.jsx)(b.default,{component:"span",variant:"body2",children:"If set, all must be met"}),(0,i.jsxs)(s.default,{direction:"row",gap:1,flexWrap:"wrap",alignItems:"center",sx:{".MuiChip-root":{my:"1px"}},children:[(0,i.jsx)(Fp,{title:"Untagged",tagActive:n.includes(tp.X3.FILTER_UNTAGGED),toggleTag:function(e){return r(tp.X3.FILTER_UNTAGGED,e)}}),(0,i.jsx)(Fp,{title:"❤️ Favourite",tagActive:n.includes(tp.X3.FILTER_FAVOURITE),toggleTag:function(e){return r(tp.X3.FILTER_FAVOURITE,e)}}),(0,i.jsx)(Fp,{title:"New",tagActive:n.includes(tp.X3.FILTER_NEW),toggleTag:function(e){return r(tp.X3.FILTER_NEW,e)}}),(0,i.jsx)(Fp,{title:"Monochrome",tagActive:n.includes(tp.X3.FILTER_MONOCHROME),toggleTag:function(e){return r(tp.X3.FILTER_MONOCHROME,e)}}),(0,i.jsx)(Fp,{title:"RGB",tagActive:n.includes(tp.X3.FILTER_RGB),toggleTag:function(e){return r(tp.X3.FILTER_RGB,e)}}),(0,i.jsx)(Fp,{title:"Recent Imports",tagActive:n.includes(tp.X3.FILTER_RECENT),toggleTag:function(e){return r(tp.X3.FILTER_RECENT,e)}}),(0,i.jsx)(Fp,{title:"Image has comments",tagActive:n.includes(tp.X3.FILTER_COMMENTS),toggleTag:function(e){return r(tp.X3.FILTER_COMMENTS,e)}}),(0,i.jsx)(Fp,{title:"Image has username",tagActive:n.includes(tp.X3.FILTER_USERNAME),toggleTag:function(e){return r(tp.X3.FILTER_USERNAME,e)}})]})]}),(0,i.jsxs)(s.default,{direction:"column",gap:1,children:[(0,i.jsx)(b.default,{component:"span",variant:"body2",children:"If set, one must be met"}),(0,i.jsx)(s.default,{direction:"row",gap:1,flexWrap:"wrap",alignItems:"center",sx:{".MuiChip-root":{my:"1px"}},children:F.map(function(e){return(0,i.jsx)(Fp,{title:e,tagActive:n.includes(e),toggleTag:function(t){return r(e,t)}},e)})})]})]})}):null};var Fv=F(93370),Fx=["FFFF8080BFBFA0A0A0A0A0A0A0A0A0A0","FFFF0000FFFF00000000010103030707","FFFF0000FFFF7F7FFFFFFFFFFFFFFFFF","FFFF0000FFFFFFFFFFFFFFFFFFFFFFFF","FFFF0000FFFFFFFFFFFFFFFFFFFFFFFF","FFFF0000FFFFFFFFFFFFFFFFFFFFFFFF","FFFF0000FFFFFFFFFFFFFFFFFFFFFFFF","FFFF0000FFFFFFFFFFFFFFFFFFFFFFFF","FFFF0000FFFFFFFFFFFFFFFFFFFFFFFF","FFFF0000FFFFFFFFFFFFFFFFFFFFFFFF","FFFF0000FFFFFFFFFFFFFFFFFFFFFFFF","FFFF0000FFFFFFFFFFFFFFFFFFFFFFFF","FFFF0000FFFFFFFFFFFFFFFFFFFFFFFF","FFFF0000FFFFFEFEFFFFFFFFFFFFFFFF","FFFF0000FFFF000000008080C0C0E0E0","FFFF0101FDFD05050505050505050505","A0A0A0A0A0A0A0A0A0A0A1A1A3A3A7A7","070703030101000000008080C0C0E0E0","FFFFFFFFFFFFFFFF7F7F3F3F1F1F0F0F","FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFF","FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFF","FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFF","FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFF","FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFF","FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFF","FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFF","FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFF","FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFF","FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFF","FFFFFFFFFFFFFFFFFEFEFCFCF8F8F0F0","E0E0C0C0808000000000010103030707","050505050505050505058585C5C5E5E5","AFAFBFBFBFBFBFBFBFBFBFBFBFBFBFBF","F0F0F8F8FCFCFEFEFFFFFFFFFFFFFFFF","070703030101000001018383C7C7EFEF","FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFF","FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFF","FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFF","FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFF","FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFF","FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFF","FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFF","FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFF","FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFF","FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFF","E0E0C0C0808000008080C1C1E3E3F7F7","0F0F1F1F3F3F7F7FFFFFFFFFFFFFFFFF","F5F5FDFDFDFDFDFDFDFDFDFDFDFDFDFD","BFBFBFBFBFBFBFBFBFBFBFBFBFBFBFBF","FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFF","FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFF","FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFF","FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFF","FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFF","FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFF","FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFF","FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFF","FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFF","FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFF","FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFF","FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFF","FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFF","FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFF","FDFDFDFDFDFDFDFDFDFDFDFDFDFDFDFD","BFBFBFBFBFBFBFBFBFBFBFBFBFBFBFBF","FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFF","FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFF","FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFF","FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFF","FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFF","FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFF","FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFF","FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFF","FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFF","FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFF","FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFF","FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFF","FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFF","FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFF","FDFDFDFDFDFDFDFDFDFDFDFDFDFDFDFD","BFBFBFBFBFBFBFBFBFBFBFBFBFBFBFBF","FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFF","FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFF","FFFFFFFFFFFFFFFFF0F0F0F0F0F0F0F0","FFFFFFFFFFFFFFFF3F3F3F3F3F3F3F3F","FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFF","FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFF","FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFF","FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFF","FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFF","FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFF","FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFF","FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFF","FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFF","FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFF","FDFDFDFDFDFDFDFDFDFDFDFDFDFDFDFD","BFBFBFBFBFBFBFBFBFBFBFBFBFBFBFBF","FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFF","FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFF","F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0","30303030303030303030303030303030","42214000000040206020602060206020","85C3800101000140C140C140C140C140","FCF0D0E0E0C080C181C1C181C181FEFC","1F0F0307070382038003800380030003","C4828000000004020602060206020602","0F070F070F060E060C060C060C060C06","A1C08000000008040804080400000000","FF7F5F3F3F1F0F1F1F0F1F0F1F0F1F0F","FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFF","FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFF","FDFDFDFDFDFDFDFDFDFDFDFDFDFDFDFD","BFBFBFBFBFBFBFBFBFBFBFBFBFBFBFBF","FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFF","FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFF","F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0F0","30303030303030303030303030303030","60206020602060206020602060206020","C140C140C140C140C140C140C140C140","E8F0E0C081C080C1C181C18180C180C0","00030003800380038003810381030103","0602060206020602060000008000C482","0C060C060C060C060C060C060E060F06","00000F070C040C040C040C0408040000","1F0FFFFF1F0F1F0F1F0F1F0F0F1F3F1F","FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFF","FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFF","FDFDFDFDFDFDFDFDFDFDFDFDFDFDFDFD","BFBFBFBFBFBFBFBFBFBFBFBFBFBFBFBF","FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFF","FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFF","F0F0F0F0FFFFFFFFFFFFFFFFFFFFFFFF","30303030FFFFFFFFFFFFFFFFFFFFFFFF","60206020FFFFFFFFFFFFFFFFFFFFFFFF","C140C140FFFFFFFFFFFFFFFFFFFFFFFF","C0C0D1E0FFFFFFFFFFFFFFFFFFFFFFFF","01030083FFFFFFFFFFFFFFFFFFFFFFFF","FEFE040200008000A0C0FFFFFFFFFFFF","0F070F07070F0F1F5F3FFFFFFFFFFFFF","8000A0C0FFFFFFFFFFFFFFFFFFFFFFFF","1F3FFF7FFFFFFFFFFFFFFFFFFFFFFFFF","FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFF","FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFF","FDFDFDFDFDFDFDFDFDFDFDFDFDFDFDFD","BFBFBFBFBFBFBFBFBFBFBFBFBFBFBFBF","FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFF","FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFF","FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFF","FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFF","FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFF","FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFF","FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFF","FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFF","FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFF","FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFF","FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFF","FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFF","FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFF","FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFF","FDFDFDFDFDFDFDFDFDFDFDFDFDFDFDFD","BFBFBFBFBFBFBFBFBFBFBFBFBFBFBFBF","FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFF","FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFF","FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFF","FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFF","FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFF","FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFF","FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFF","FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFF","FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFF","FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFF","FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFF","FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFF","FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFF","FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFF","FDFDFDFDFDFDFDFDFDFDFDFDFDFDFDFD","BFBFBFBFBFBFBFBFBFBFBFBFBFBFAFAF","FFFFFFFFFFFFFFFFFEFEFCFCF8F8F0F0","EFEFC7C7838301010000010103030707","FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFF","FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFF","FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFF","FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFF","FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFF","FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFF","FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFF","FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFF","FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFF","FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFF","F7F7E3E3C1C1808000008080C0C0E0E0","FFFFFFFFFFFFFFFF7F7F3F3F1F1F0F0F","FDFDFDFDFDFDFDFDFDFDFDFDFDFDF5F5","A7A7A3A3A1A1A0A0A0A0A0A0A0A0A0A0","E0E0C0C0808000000000010103030707","0F0F1F1F3F3F7F7FFFFFFFFFFFFFFFFF","FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFF","FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFF","FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFF","FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFF","FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFF","FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFF","FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFF","FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFF","FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFF","FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFF","F0F0F8F8FCFCFEFEFFFFFFFFFFFFFFFF","070703030101000000008080C0C0E0E0","E5E5C5C5858505050505050505050505","A0A0A0A0A0A0A0A0A0A0BFBF8080FFFF","07070303010100000000FFFF0000FFFF","FFFFFFFFFFFFFFFF7F7FFFFF0000FFFF","FFFFFFFFFFFFFFFFFFFFFFFF0000FFFF","FFFFFFFFFFFFFFFFFFFFFFFF0000FFFF","FFFFFFFFFFFFFFFFFFFFFFFF0000FFFF","FFFFFFFFFFFFFFFFFFFFFFFF0000FFFF","FFFFFFFFFFFFFFFFFFFFFFFF0000FFFF","FFFFFFFFFFFFFFFFFFFFFFFF0000FFFF","FFFFFFFFFFFFFFFFFFFFFFFF0000FFFF","FFFFFFFFFFFFFFFFFFFFFFFF0000FFFF","FFFFFFFFFFFFFFFFFFFFFFFF0000FFFF","FFFFFFFFFFFFFFFFFFFFFFFF0000FFFF","FFFFFFFFFFFFFFFFFEFEFFFF0000FFFF","E0E0C0C0808000000000FFFF0000FFFF","05050505050505050505FDFD0101FFFF"];let Fb=function(e){var t,F=e.tiles,n=e.startLine,r=e.setStartLine,a=(0,Q.A)().activePalette,o=null==(t=(0,eW.h)().palettes.find(function(e){return e.shortName===a}))?void 0:t.palette,l=(0,d.useMemo)(function(){var e=[];e.push.apply(e,(0,J._)(F.slice(0,20*n)));for(var t=0;t<14;t+=1){var r=(t+n)*20,a=r+18,i=16*t;e.push.apply(e,(0,J._)(F.slice(r,r+2)).concat((0,J._)(Fx.slice(i,i+16)),(0,J._)(F.slice(a,a+2))))}return e.push.apply(e,(0,J._)(F.slice((n+14)*20))),e},[F,n]);return(0,i.jsxs)(s.default,{direction:"row",gap:3,justifyContent:"center",children:[(0,i.jsx)(Fv.A,{tiles:l,palette:o,imageStartLine:n}),(0,i.jsx)(s.default,{direction:"column",justifyContent:"center",children:(0,i.jsxs)(T.default,{orientation:"vertical",variant:"contained",size:"large",color:"tertiary",fullWidth:!0,children:[(0,i.jsx)(P.default,{onClick:function(){return r(n-1)},disabled:n<=0,endIcon:(0,i.jsx)(t8.A,{}),children:"Move image up"}),(0,i.jsx)(P.default,{onClick:function(){return r(n+1)},disabled:n>=F.length/20-14,endIcon:(0,i.jsx)(t4.A,{}),children:"Move image down"})]})})]})};var Fj=F(53982);let Fy=function(){var e=(0,eB.A)().dismissDialog,t=(0,ej.A)(),F=t.frameQueue,n=t.frameQueueCancelOne,r=t.importQueueCancelOne,a=(0,tD.g)().updateLastSyncLocalNow,o=(0,eW.h)(),l=o.addFrames,s=o.updateFrameGroups,u=F[0],c=(0,m._)((0,d.useState)(""),2),f=c[0],h=c[1],p=(0,m._)((0,d.useState)(Math.floor((u.tiles.length-280)/40)),2),g=p[0],v=p[1],x=tV({id:"",hash:"",name:u.fileName}),b=x.fullId,j=x.formValid,y=x.groups,C=x.frameGroup,_=x.frameIndex,A=x.setFrameIndex,w=x.frameName,I=x.setFrameGroup,S=x.setFrameName,E=x.idValid,k=x.groupIdValid,D=x.frameIndexValid;return(0,i.jsx)(ex.A,{header:'Import new Frame as "'.concat(b,'"'),canConfirm:j,confirm:(0,e2._)(function(){var t;return(0,e3.YH)(this,function(F){switch(F.label){case 0:return[4,(0,Fj.R_)(u.tiles,g)];case 1:return t=F.sent(),e(0),u.tempId&&(r(u.tempId),n(u.tempId)),l([{id:b,name:w,hash:t}]),(null==f?void 0:f.trim())&&s([{id:C,name:f}]),a(),[2]}})}),deny:function(){return n(u.tempId)},children:(0,i.jsx)(tY,{frameIndex:_,setFrameGroup:I,frameName:w,frameGroup:C,setFrameName:S,groupIdValid:k,idValid:E,frameIndexValid:D,setFrameIndex:A,groups:y,fullId:b,frameGroupName:f,setFrameGroupName:h,extraFields:(0,i.jsx)(Fb,{tiles:u.tiles,startLine:g,setStartLine:v})})})};var FC=F(99475),F_=F(58617),FA=F.n(F_),Fw="FF FF FF FF FF FF FF FF FF FF FF FF FF FF FF FF";let FI=function(e){for(;e.length%20;)e.push(Fw);for(var t=Array(20).fill(Fw);e.length<360;)e.push.apply(e,(0,J._)(t)),e.length<360&&e.unshift.apply(e,(0,J._)(t));return e};var FS=F(72623),FE=function(){var e=(0,e2._)(function(e){var t,F,n,r,a,i,o,l,s;return(0,e3.YH)(this,function(u){switch(u.label){case 0:return t=e.lines,F=e.filename,n=e.palette,r=e.frame,i=void 0===(a=e.tags)?[]:a,o=e.meta,s=void 0===(l=e.created)?(0,tn.J)():l,[4,(0,FS.UN)(t)];case 1:return[2,{hash:u.sent(),created:s,title:F||"",lines:t.length,tags:i,palette:n,framePalette:n,invertFramePalette:!1,invertPalette:!1,frame:r,meta:o}]}})});return function(t){return e.apply(this,arguments)}}(),Fk=F(87031),FD=(0,Fk.A)("fileName");let FB=function(){var e=(0,Q.A)(),t=e.importPad,F=e.setActivePalette,n=e.activePalette,i=(0,tB.A)().cancelEditImageGroup,o=(0,eW.h)(),l=o.addImageGroup,s=o.palettes,u=o.images,c=(0,tP.A)().setImageSelection,f=(0,ej.A)(),h=f.importQueue,p=f.importQueueSet,g=f.frameQueueAdd,v=f.importQueueCancelOne,x=(0,tD.g)(),b=x.addImages,j=x.importQueueCancel,y=(0,Y.Z)().view,C=(0,Fo.g)().navigateToGroup,_=(0,m._)((0,d.useState)(""),2),A=_[0],w=_[1],I=(0,m._)((0,d.useState)(h.length>3),2),S=I[0],E=I[1],k=(0,m._)((0,d.useState)({initial:[],add:[],remove:[]}),2),D=k[0],B=k[1],P=(0,d.useCallback)(function(e){g(ej.A.getState().importQueue.filter(function(t){return t.tempId===e}))},[g]),T=(0,d.useCallback)(function(e){v(e)},[v]),M=(0,Fl.N)().formatter,N=(0,d.useCallback)(function(){B(function(e){return{initial:e.initial,add:[],remove:[]}})},[]),R=(0,d.useCallback)((0,e2._)(function(){var e,F,r,a,o,s,u,d;return(0,e3.YH)(this,function(f){switch(f.label){case 0:return e=ej.A.getState().importQueue,F=new(FA())(1,1/0),r=Date.now(),[4,Promise.all(FD(e).map(function(e,a){var i=e.tiles,o=e.fileName,l=e.meta,s=e.lastModified,u=D.add,c=s||r;return F.add(function(){return FE({lines:t?FI(i):i,filename:o,palette:n,frame:A,tags:u,created:(0,tn.J)(c+a),meta:l})})}))];case 1:return o=(a=f.sent()).map(function(e){return e.hash}),b(a),S&&(s="Import ".concat(M(new Date)),u=(0,tX.BF)(s),i(),l({id:d=(0,Fu.z)(),slug:u,title:s,created:(0,tn.J)(),coverImage:a[0].hash,images:o,groups:[]},y.id),C(d,0)),c(o),[2]}})}),[n,l,b,i,S,M,A,t,C,c,D,y.id]),L=(0,d.useMemo)(function(){return s.find(function(e){return e.shortName===n})||tE.Fv},[n,s]),G=(0,d.useMemo)(function(){return new Map(u.map(function(e){return[e.hash,e]}))},[u]),O=(0,d.useMemo)(function(){var e=new Set;return h.map(function(t){var F=G.get(t.imageHash)||null,n=e.has(t.imageHash);return e.add(t.imageHash),(0,a._)((0,r._)({},t),{isDuplicateInQueue:n,alreadyImported:F})})},[h,G]),U=(0,d.useMemo)(function(){return h.filter(function(e){return -1!==e.fileName.indexOf("[last seen]")}).length},[h]),H=(0,d.useMemo)(function(){return h.filter(function(e){return -1!==e.fileName.indexOf("[deleted]")}).length},[h]),z=(0,d.useMemo)(function(){return O.filter(function(e){return e.isDuplicateInQueue}).length},[O]),V=(0,d.useMemo)(function(){return O.filter(function(e){return e.alreadyImported}).length},[O]),W=(0,d.useCallback)(function(){p(h.filter(function(e){return -1===e.fileName.indexOf("[last seen]")}))},[p,h]),X=(0,d.useCallback)(function(){p(h.filter(function(e){return -1===e.fileName.indexOf("[deleted]")}))},[p,h]),K=(0,d.useCallback)(function(){var e=new Set;p(h.filter(function(t){var F=e.has(t.imageHash);return e.add(t.imageHash),!F}))},[p,h]);return{importQueue:O,importPad:t,palette:L,activePalette:n,frame:A,tagChanges:D,createGroup:S,updateTagChanges:B,resetTagChanges:N,setFrame:w,setCreateGroup:E,runImport:R,cancelImport:j,importAsFrame:P,cancelItemImport:T,setActivePalette:F,lastSeenCount:U,importedDuplicatesCount:V,queueDuplicatesCount:z,deletedCount:H,removeLastSeen:W,removeDeleted:X,removeImportedDuplicates:(0,d.useCallback)(function(){p(h.filter(function(e){return!G.has(e.imageHash)}))},[p,h,G]),removeQueueDuplicates:K}};var FP=F(52466);let FT=(0,d.memo)(function(e){var t=e.importItem,F=e.palette,n=e.importAsFrame,o=e.cancelItemImport,l=e.windowStyle,u=t.tiles,c=t.fileName,f=t.lastModified,m=t.alreadyImported,h=t.isDuplicateInQueue,p=(0,d.useMemo)(function(){return h?{color:"error",title:"This image exists multiple times within this queue",badgeContent:"D"}:m?{color:"warning",title:"This image has already been imported".concat(m.title?' as "'.concat(m.title,'"'):""),badgeContent:"I"}:{}},[m,h]),g=(0,Fl.N)().formatter;return(0,i.jsxs)(s.default,{direction:"row",gap:1,alignItems:"stretch",justifyContent:"left",sx:l,children:[(0,i.jsx)(e_.default,{sx:{flex:"160px 0 0"},children:(0,i.jsx)(Fv.A,{tiles:u,invertPalette:!1,lockFrame:!1,palette:null==F?void 0:F.palette,imageStartLine:2,asThumb:!0})}),(0,i.jsxs)(s.default,{sx:{flex:"auto 1 1",my:1},direction:"column",gap:2,justifyContent:"space-between",alignContent:"space-between",children:[(0,i.jsxs)(T.default,{fullWidth:!0,sx:{justifyContent:"flex-end",display:"flex"},children:[(0,i.jsx)(x.default,{title:"Import image as frame",disabled:u.length/20<14,onClick:n,children:(0,i.jsx)(FP.A,{})}),(0,i.jsx)(B.default,(0,a._)((0,r._)({},p),{anchorOrigin:{vertical:"bottom",horizontal:"left"},overlap:"circular",children:(0,i.jsx)(x.default,{title:"Remove image from queue",onClick:function(){return setTimeout(o,1)},children:(0,i.jsx)(A.A,{})})}))]}),(0,i.jsxs)(s.default,{sx:{pr:1},gap:1,direction:"column",children:[(0,i.jsx)(b.default,{variant:"caption",component:"p",sx:{wordBreak:"break-word"},children:c}),f&&f>0&&(0,i.jsx)(b.default,{variant:"caption",component:"p",children:g(f)})]})]})]})}),FM=function(){var e=FB(),t=e.frame,F=e.palette,n=e.activePalette,a=e.importQueue,o=e.tagChanges,l=e.createGroup,u=e.setFrame,c=e.setActivePalette,d=e.setCreateGroup,f=e.updateTagChanges,m=e.resetTagChanges,h=e.runImport,p=e.cancelImport,g=e.importAsFrame,v=e.cancelItemImport,x=e.lastSeenCount,b=e.importedDuplicatesCount,j=e.queueDuplicatesCount,y=e.deletedCount,C=e.removeLastSeen,_=e.removeDeleted,A=e.removeImportedDuplicates,w=e.removeQueueDuplicates,I=(0,tL.h)().height;return(0,i.jsx)(ex.A,{header:"Image Import (".concat(a.length," images)"),confirm:h,deny:p,children:(0,i.jsxs)(s.default,{direction:"column",gap:4,children:[(0,i.jsx)(FC.Y1,{height:Math.min(152*a.length,I/2),itemCount:a.length,itemSize:152,overscanCount:5,width:"100%",children:function(e){var t=e.index,n=e.style;return(0,i.jsx)(FT,{windowStyle:n,palette:F,importItem:a[t],importAsFrame:function(){return g(a[t].tempId)},cancelItemImport:function(){return v(a[t].tempId)}})}}),(0,i.jsxs)(T.default,{variant:"contained",color:"secondary",fullWidth:!0,children:[(0,i.jsx)(P.default,{disabled:!x,onClick:C,title:"Remove last seen",children:"Remove last seen ".concat(x?"(".concat(x,")"):"")}),(0,i.jsx)(P.default,{disabled:!y,onClick:_,title:"Remove deleted",children:"Remove deleted ".concat(y?"(".concat(y,")"):"")}),(0,i.jsx)(P.default,{disabled:!j,onClick:w,title:"Remove duplicates in queue",children:"Remove duplicates in queue ".concat(j?"(".concat(j,")"):"")}),(0,i.jsx)(P.default,{disabled:!b,onClick:A,title:"Remove already imported",children:"Remove already imported ".concat(b?"(".concat(b,")"):"")})]}),(0,i.jsx)(tu,{noFancy:!0,value:n,onChange:c}),(0,i.jsx)(eX,{selectLabel:"Modify Frame",frame:t,lockFrame:!1,noFrameOption:"No frame / import as is",updateFrame:u}),(0,i.jsx)(t_,{tags:o,resetTags:m,updateTags:function(e,t){f((0,r._)({},o,tv(o,{mode:e,tag:t})))}}),(0,i.jsx)(ec.default,{label:"Create group from images at current location",control:(0,i.jsx)(ef.default,{checked:l,onChange:function(e){d(e.target.checked)}})})]})})};var FN=F(66027),FR=F(27371),FL=F(9779),FG=F(18335),FO=F(86964),FU=function(e,t){var F,n=[];if(!(null==e?void 0:e.hash))return null;var r=(0,FG.s)(t,e),a=r.palette,i=r.framePalette;if(!a)throw Error("Palette missing?");var o=(0,FO.f)(e),l=o.invertPalette,s=o.invertFramePalette;return(0,tM.pl)(e)?F=a:(F=(a||tE.Fv).palette,n=(i||tE.Fv).palette),{title:(null==e?void 0:e.title)||"",created:(null==e?void 0:e.created)||"",frame:e.frame,hash:e.hash,hashes:e.hashes||void 0,tags:e.tags,palette:F,framePalette:n,lockFrame:e.lockFrame,invertPalette:l,invertFramePalette:s,rotation:e.rotation}},FH=function(){var e=(0,tP.A)(),t=(0,Y.Z)(),F=t.view,n=t.covers,r=(0,f.A)(),a=r.isFullscreen,i=r.setLightboxImage,o=r.setLightboxImagePrev,l=r.setLightboxImageNext,s=r.setIsFullscreen,u=r.lightboxImage,c=(0,eW.h)().palettes,m=(0,t$.S)(F.images,e),h=(0,d.useMemo)(function(){return m.filter(function(e){var t=e.hash;return!n.includes(t)})},[n,m]),p=null!==u?FU(h[u],c):null;return(0,d.useEffect)(function(){var e=function(){s(!!FL.A.element)},t=function(e){switch(e.key){case"Esc":case"Escape":close(),e.preventDefault();break;case"Right":case"ArrowRight":case"d":l(h.length),e.preventDefault();break;case"Left":case"ArrowLeft":case"a":o(),e.preventDefault();break;case"Home":i(0),e.preventDefault();break;case"End":i(h.length-1),e.preventDefault()}};return document.addEventListener("keydown",t),FL.A.isEnabled&&FL.A.on("change",e),function(){document.removeEventListener("keydown",t),FL.A.off("change",e)}}),{image:p,isFullscreen:a,currentIndex:u||0,size:h.length,canPrev:null!==u&&u>0,canNext:null!==u&&u<h.length-1,close:function(){return i(null)},prev:function(){return o()},next:function(){return l(h.length)},fullscreen:function(){FL.A.isEnabled&&(FL.A.element?FL.A.exit():FL.A.request(document.body))}}};let Fz=function(){var e=FH(),t=e.image,F=e.isFullscreen,n=e.currentIndex,r=e.size,a=e.canPrev,o=e.canNext,l=e.prev,u=e.next,c=e.fullscreen,d=e.close,f=(0,Fl.N)().formatter;return(0,i.jsx)(ex.A,{header:null==t?void 0:t.title,deny:d,contentWidth:"100%",contentHeight:"100%",fullSize:!0,headerActionButtons:(0,i.jsx)(x.default,{color:"inherit",onClick:c,title:F?"Leave fullscreen":"Enter fullscreen",children:F?(0,i.jsx)(FR.A,{}):(0,i.jsx)(FN.A,{})}),children:(0,i.jsxs)(s.default,{direction:"column",gap:2,sx:{width:"100%",height:"100%"},children:[(0,i.jsxs)(s.default,{direction:"row",gap:1,alignItems:"center",justifyContent:"center",sx:{height:"100%",overflow:"hidden",position:"relative","& > .MuiBox-root":{flexGrow:1}},children:[(0,i.jsx)(x.default,{size:"large",onClick:l,disabled:!a,children:(0,i.jsx)(t5.A,{})}),t&&(0,i.jsx)(e_.default,{sx:{width:"100%",height:"100%",flexBasis:"100%",flexGrow:1},children:(0,i.jsx)(tS.A,{lockFrame:t.lockFrame,invertPalette:t.invertPalette,invertFramePalette:t.invertFramePalette,palette:t.palette,framePalette:t.framePalette,frameId:t.frame,hash:t.hash,hashes:t.hashes,rotation:t.rotation})}),(0,i.jsx)(x.default,{size:"large",onClick:u,disabled:!o,children:(0,i.jsx)(t6.A,{})})]}),(0,i.jsxs)(s.default,{direction:"row",gap:{xs:4,md:12},alignItems:"center",justifyContent:"center",children:[(0,i.jsx)(b.default,{variant:"body2",children:"Image ".concat(n+1,"/").concat(r)}),(null==t?void 0:t.created)&&(0,i.jsx)(b.default,{variant:"body2",children:f(t.created)})]})]})})};var FV=F(74802),FY=F(13338),FW=F(62412);let FQ=function(){var e=(0,tB.A)(),t=e.pickColors,F=e.setEditPalette,n=e.cancelEditPalette,r=e.cancelPickColors,a=(0,m._)((0,d.useState)([0,3,6,9]),2),o=a[0],l=a[1],u=t1(),c=(0,d.useMemo)(function(){return t?[,,,,].fill(null).map(function(e,F){var n=o[F],r=t.colors[n];return r?(0,FW.E)(r):"#000000"}):[]},[t,o]);return t?(0,i.jsx)(ex.A,{confirm:function(){F({name:"From file ".concat(t.fileName),shortName:tp.mI,palette:c,origin:"generated from file",isPredefined:!1})},canConfirm:4===o.length,deny:function(){r(),n()},header:'Pick colors from "'.concat(t.fileName,'"'),contentWidth:"auto",children:(0,i.jsxs)(s.default,{direction:"column",gap:4,children:[(0,i.jsx)(s.default,{direction:"row",gap:2,component:"ul",justifyContent:"space-around",children:u.map(function(e){return(0,i.jsx)(e_.default,{component:"li",children:(0,i.jsx)(tS.A,{hash:e.hash,invertPalette:!1,invertFramePalette:!1,lockFrame:!1,palette:c,framePalette:c})},e.hash)})}),(0,i.jsx)(e8.default,{value:o,onChange:function(e,t){return l((0,J._)(t).sort())},sx:{display:"flex",justifyContent:"space-around",gap:0},children:t.colors.map(function(e,t){return(0,i.jsx)(e6.default,{value:t,sx:{"--palette-color":"rgb(".concat(e.join(","),")"),color:"var(--palette-color)",borderRadius:0,width:48,height:48,padding:0,border:"none","&&.Mui-selected":{border:"none",background:"none",color:"var(--palette-color)"},"& > svg":{width:"inherit",height:"inherit"}},children:o.includes(t)?(0,i.jsx)(FV.A,{}):(0,i.jsx)(FY.A,{})},t)})}),(0,i.jsx)(s.default,{direction:"row",gap:0,sx:{"& > .MuiBox-root":{height:"32px",flexGrow:1}},children:c.map(function(e,t){return(0,i.jsx)(e_.default,{title:e,sx:{backgroundColor:e}},t)})})]})}):null};var FX=F(77262),FK=F(41476);let Fq=function(){var e=(0,FK.A)().progress;return(0,i.jsx)(ex.A,{header:"Working...",children:(0,i.jsx)(s.default,{direction:"column",gap:2,children:e.map(function(e){return(0,i.jsxs)(s.default,{direction:"column",gap:1,children:[(0,i.jsx)(b.default,{children:e.label}),(0,i.jsx)(FX.default,{variant:"determinate",value:100*e.value,color:"secondary"})]},e.id)})})})};var FZ=F(68893),FJ=F(8963),F$=F.n(FJ),F0=function(){var e=(0,FK.A)(),t=e.progressLog,F=e.resetProgressLog,n=(0,X.A)(),r=n.gitStorage,a=n.dropboxStorage;return{git:{messages:t.git||[],repoUrl:"https://github.com/".concat(r.owner,"/").concat(r.repo,"/tree/").concat(r.branch),repo:r.repo,branch:r.branch},dropbox:{messages:t.dropbox||[],path:a.path||""},confirm:F}};tF().extend(F$());let F1=function(){var e=F0(),t=e.git,F=t.messages,n=t.repoUrl,r=t.repo,a=t.branch,o=e.dropbox,l=o.messages,u=o.path,c=e.confirm,f=(0,m._)((0,d.useState)(!0),2),h=f[0],p=f[1],g=F.length>0,v=l.length>0,x=(F[F.length-1]||{}).timestamp,j=F[0]||{},y=j.timestamp,C=j.message,_=(l[l.length-1]||{}).timestamp,A=l[0]||{},w=A.timestamp,I=A.message,S="."===C||"."===I,E=g?x:_,k=g?y:w,D=(0,d.useMemo)(function(){return(0,J._)(F).concat((0,J._)(l)).filter(function(e){return"."!==e.message})},[l,F]),B=(0,d.useMemo)(function(){return D.filter(function(e,t){return!h||t<15})},[h,D]);return F.length||l.length?(0,i.jsx)(ex.A,{header:"".concat(S?"✔️ Update done":"⏳ Updating..."," ").concat(g?' - "'.concat(r,"/").concat(a,'"'):""),confirm:S?c:void 0,children:(0,i.jsxs)(s.default,{direction:"column",gap:2,children:[(0,i.jsx)(e_.default,{component:"ul",sx:{overflowX:"hidden",overflowY:"auto",maxHeight:"30vh","& > .MuiTypography-root":{whiteSpace:"nowrap"}},children:B.map(function(e,t){var F=e.message,n=e.timestamp;return(0,i.jsx)(b.default,{variant:"caption",component:"li",title:tF().unix(n).format("HH:mm:ss"),children:F},t)})}),D.length>15&&(0,i.jsx)(P.default,{variant:"outlined",color:"secondary",onClick:function(){return p(!h)},endIcon:h?(0,i.jsx)(t4.A,{}):(0,i.jsx)(t8.A,{}),children:h?"Show all ".concat(D.length," messages"):"Reduce messages"}),(0,i.jsxs)(s.default,{direction:"column",gap:0,children:[(0,i.jsx)(b.default,{variant:"caption",children:"Started at: ".concat(tF().unix(E).format("HH:mm:ss"))}),(0,i.jsx)(b.default,{variant:"caption",children:"".concat(S?"Finished after":"Running for",": ").concat(tF().duration(k-E,"seconds").format("HH:mm:ss"))})]}),g&&(0,i.jsx)(P.default,{variant:"outlined",component:"a",color:"secondary",startIcon:(0,i.jsx)(FZ.A,{}),title:n,href:n,target:"_blank",rel:"noreferrer",children:"Open GitHub Repository"}),v&&(0,i.jsx)(P.default,{variant:"outlined",component:"a",color:"secondary",title:"Open Dropbox folder:\nhttps://www.dropbox.com/home/Apps/GameBoyPrinter/".concat(u),href:"https://www.dropbox.com/home/Apps/GameBoyPrinter/".concat(u),target:"_blank",rel:"noreferrer",children:"Open Dropbox folder"})]})}):null};var F2=F(53081);let F3=function(){var e=(0,f.A)().setShowSerials;return(0,i.jsx)(ex.A,{header:"WebUSB / Serial devices",deny:function(){return e(!1)},children:(0,i.jsx)(F2.A,{})})};var F4=function(){var e=(0,tP.A)(),t=e.setSortBy,F=e.setSortOptionsVisible,n=e.sortOptionsVisible,r=e.sortBy,a=(0,m._)(r.split("_"),2),i=a[0],o=a[1];return{visible:n,sortBy:void 0===i?"":i,sortOrder:void 0===o?"":o,setSortBy:t,hideSortForm:function(){return F(!1)}}},F5=[{title:"Title",key:"title"},{title:"Date",key:"created"},{title:"Palette",key:"palette"}];let F6=function(){var e=F4(),t=e.visible,F=e.sortBy,n=e.sortOrder,r=e.setSortBy,a=e.hideSortForm,o=(0,m._)((0,d.useState)(F),2),l=o[0],u=o[1],c=(0,m._)((0,d.useState)(n),2),f=c[0],h=c[1];if((0,d.useEffect)(function(){u(F),h(n)},[u,h,t,F,n]),!t)return null;var p=F5.find(function(e){return e.key===l})||F5[0],g=f===Fk.U.ASC?"Ascending":"Descending";return(0,i.jsx)(ex.A,{header:"Sort by: ".concat(p.title,"/").concat(g),confirm:function(){return r("".concat(l,"_").concat(f))},deny:a,children:(0,i.jsxs)(s.default,{direction:"column",gap:4,children:[(0,i.jsx)(em.default,{label:"Sort by",size:"small",select:!0,value:l,onChange:function(e){return u(e.target.value)},children:F5.map(function(e){var t=e.key,F=e.title;return(0,i.jsx)(ed.default,{value:t,children:F},t)})}),(0,i.jsxs)(em.default,{label:"Sort direction",size:"small",select:!0,value:f,onChange:function(e){return h(e.target.value)},children:[(0,i.jsx)(ed.default,{value:Fk.U.ASC,children:"Ascending"}),(0,i.jsx)(ed.default,{value:Fk.U.DESC,children:"Descending"})]})]})})};var F8=F(39487),F7=F(83936),F9=F(933),ne=function(e){var t,r,a,i,o,l,s,u,c,d=(t=(0,e2._)(function(){var t,r,a;return(0,e3.YH)(this,function(i){switch(i.label){case 0:if(n)return[3,2];return[4,Promise.all([F.e(9268),F.e(7431),F.e(340),F.e(1575)]).then(F.bind(F,10630))];case 1:r=(t=i.sent()).init,a=t.gitSyncTool,r(),n=n||a(e),i.label=2;case 2:return[2,n]}})}),function(){return t.apply(this,arguments)});return a=(r=X.A.getState().gitStorage).use,i=r.owner,o=r.repo,l=r.branch,s=r.token,a&&i&&o&&l&&s&&d(),{startSyncData:(u=(0,e2._)(function(e){return(0,e3.YH)(this,function(t){switch(t.label){case 0:return[4,d()];case 1:return[2,t.sent().startSyncData(e)]}})}),function(e){return u.apply(this,arguments)}),updateSettings:(c=(0,e2._)(function(e){return(0,e3.YH)(this,function(t){switch(t.label){case 0:return[4,d()];case 1:return[2,t.sent().updateSettings(e)]}})}),function(e){return c.apply(this,arguments)})}},nt=function(){var e=(0,tD.g)(),t=(0,F7.W)().remoteImport,F=(0,f.A)().setSyncSelect,n=(0,X.A)(),r=n.gitStorage,a=n.dropboxStorage,i=n.syncLastUpdate;return{repoUrl:"https://github.com/".concat(r.owner,"/").concat(r.repo,"/tree/").concat(r.branch),dropboxActive:!!(a.use&&a.accessToken),gitActive:!!(r.use&&r.owner&&r.repo&&r.branch&&r.throttle&&r.token),autoDropboxSync:a.autoDropboxSync||!1,syncLastUpdate:i,startSync:function(F,n){if("dropbox"===F)(0,F9.E)(e,t).startSyncData(n);else if("dropboximages"===F)(0,F9.E)(e,t).startSyncImages();else{if("diff"===n)throw Error("diff is invalid direction for github sync");ne(t).startSyncData(n)}},cancelSync:function(){return F(!1)}}},nF=function(e,t){return e&&t?"error":"secondary"};let nn=function(){var e=nt(),t=e.repoUrl,F=e.dropboxActive,n=e.gitActive,r=e.syncLastUpdate,a=e.autoDropboxSync,o=e.startSync,l=e.cancelSync,u=a&&r.local!==r.dropbox;return(0,i.jsx)(ex.A,{deny:l,header:"Synchronize",children:(0,i.jsxs)(s.default,{direction:"column",gap:4,sx:{"& .MuiButton-endIcon svg":{fontSize:32}},children:[n&&(0,i.jsxs)(s.default,{direction:"column",gap:2,children:[(0,i.jsx)(P.default,{variant:"contained",color:"secondary",startIcon:(0,i.jsx)(FZ.A,{}),endIcon:(0,i.jsx)(eM.A,{}),title:"Synchronize to GitHub\n".concat(t),onClick:function(){o("git","up")},children:"Synchronize to GitHub"}),(0,i.jsx)(P.default,{variant:"contained",color:"secondary",startIcon:(0,i.jsx)(FZ.A,{}),endIcon:(0,i.jsx)(F8.A,{}),title:"Synchronize from GitHub\n".concat(t),onClick:function(){o("git","down")},children:"Synchronize from GitHub"})]}),F&&(0,i.jsxs)(s.default,{direction:"column",gap:2,children:[(0,i.jsxs)(s.default,{direction:"column",gap:1,children:[(0,i.jsx)(P.default,{variant:"contained",color:nF(u,r.local<r.dropbox),endIcon:(0,i.jsx)(eM.A,{}),title:"Synchronize to Dropbox",onClick:function(){o("dropbox","up")},children:"Synchronize to Dropbox"}),u&&r.local<r.dropbox&&(0,i.jsx)(b.default,{variant:"caption",children:"There are pending remote changes. If you synchronize to dropbox now, these will be lost."})]}),(0,i.jsxs)(s.default,{direction:"column",gap:1,children:[(0,i.jsx)(P.default,{variant:"contained",color:nF(u,r.local>r.dropbox),endIcon:(0,i.jsx)(F8.A,{}),title:"Synchronize from Dropbox",onClick:function(){o("dropbox","down")},children:"Synchronize from Dropbox"}),u&&r.local>r.dropbox&&(0,i.jsx)(b.default,{variant:"caption",children:"There are local changes not synched to dropbox yet. If you synchronize from dropbox now, these will be lost."})]}),(0,i.jsx)(P.default,{variant:"contained",color:"secondary",endIcon:(0,i.jsx)(eM.A,{}),title:"Synchronize images to Dropbox",onClick:function(){o("dropboximages","up")},children:"Synchronize images to Dropbox"})]})]})})};var nr=F(47457);let na=function(){var e=(0,nr.A)(),t=e.showTrashCount,F=e.purgeTrash,n=e.downloadImages,r=e.downloadFrames,a=e.trashCount,o=a.frames+a.images;return(0,i.jsx)(ex.A,{deny:function(){t(!1)},header:"Trash (".concat(o," items)"),contentWidth:"auto",actionButtons:(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(P.default,{variant:"contained",color:"secondary",title:"Download deleted frames",disabled:0===a.frames,onClick:r,children:"Download frames"}),(0,i.jsx)(P.default,{variant:"contained",color:"secondary",title:"Download deleted images",disabled:0===a.images,onClick:n,children:"Download images"}),(0,i.jsx)(P.default,{variant:"contained",color:"error",title:"Purge all",disabled:0===o,onClick:F,children:"Purge all (".concat(o,")")})]}),children:(0,i.jsxs)(s.default,{direction:"column",gap:2,children:[(0,i.jsx)(b.default,{variant:"body2",children:"Deleted frames: ".concat(a.frames)}),(0,i.jsx)(b.default,{variant:"body2",children:"Deleted images: ".concat(a.images)})]})})};var ni=F(81543),no=F(3899),nl=F.n(no),ns=F(91540),nu=F(89222),nc=F(74335),nd=F(28952),nf=F(77683),nm=function(e){var t=e.gifWriter,F=e.queue,n=e.frameRate,r=e.total,a=e.setProgress;return function(e,i){return F.add(function(){return new Promise(function(F,o){var l=e.getContext("2d");if(!l)throw Error("missing context");for(var s=l.getImageData(0,0,e.width,e.height).data,u=nl()(s,4).reduce(function(e,t){var F=(0,m._)(t,3),n=(F[0]<<16)+(F[1]<<8)+F[2],r=e.palette.findIndex(function(e){return e===n});return -1===r&&(r=e.palette.length,e.palette.push(n)),e.pixels.push(r),e},{pixels:[],palette:[]}),c=u.palette,d=u.pixels;c.length<256;)c.push(0);try{a((i+1)/r),window.requestAnimationFrame(function(){t.addFrame(0,0,e.width,e.height,d,{delay:Math.round(100/n),palette:c}),F(null)})}catch(e){o(e)}})})}},nh=function(e){return{scaleFactor:e.scaleFactor||4,frameRate:e.frameRate||12,yoyo:e.yoyo||!1,reverse:e.reverse||!1,frame:e.frame||"",lockFrame:e.lockFrame||!1,invertPalette:e.invertPalette||!1,palette:e.palette||"",exportFrameMode:e.exportFrameMode||e$.H.FRAMEMODE_KEEP}},np=function(){var e=(0,e2._)(function(){var e,t,F,n,i,o,l,s,u,c,d,m,h,p,g,v,x,b,j,y,C,_,A,w,I,S,E,k,D,B,P,T,M,N,R,L,G,O;return(0,e3.YH)(this,function(U){switch(U.label){case 0:return t=(e=f.A.getState()).setError,F=e.videoSelection,i=(n=FK.A.getState()).startProgress,o=n.setProgress,l=n.stopProgress,u=(s=eW.h.getState()).frames,c=s.palettes,d=s.images,h=(m=Q.A.getState()).videoParams,p=m.fileNameStyle,g=i("Creating Animation"),[4,(0,nc.c)(10)];case 1:var H;if(U.sent(),x=(v=nh(h)).scaleFactor,b=v.frameRate,j=v.yoyo,y=v.reverse,C=v.frame,_=v.lockFrame,A=v.invertPalette,w=v.palette,I=v.exportFrameMode,!F.length)return[2];return E=(S=F.map(function(e){return d.find(function(t){return t.hash===e})}).reduce(eo.N,[])).reduce(function(e,t){if(!t)return e;var F=(0,tM.pl)(t)?(0,a._)((0,r._)({},t),{frame:C||t.frame}):(0,a._)((0,r._)({},t),{palette:w||t.palette});return(0,J._)(e).concat([F])},[]),k=(0,tG.T)(S,u),[4,Promise.all(E.map((H=(0,e2._)(function(e){var t,F,n,i,o,l,s,d,f,m,h,p,g,v,b,j,y,C,w;return(0,e3.YH)(this,function(S){switch(S.label){case 0:return[4,k(e.hash)];case 1:if(t=S.sent(),F=_||e.lockFrame||!1,n=e.rotation||0,o=(i=(0,FG.s)(c,(0,a._)((0,r._)({},e),{lockFrame:F}))).palette,l=i.framePalette,!(s=u.find(function(t){return t.id===e.frame})))return[3,3];return[4,(0,Fj.mZ)(s.hash)];case 2:return f=S.sent(),[3,4];case 3:f=null,S.label=4;case 4:if(m=(d=f)?d.upper.length/20:2,!t||!o)throw Error("missing tiles or palette");if(!(0,tM.pl)(e))return[3,6];return[4,(0,e$.y1)({tiles:t,palette:o,lockFrame:F,imageStartLine:m,rotation:n,scaleFactor:x,handleExportFrame:I},"image/png")];case 5:return h=S.sent(),[3,8];case 6:return p=(null==o?void 0:o.palette)||e$.CU,g=(null==l?void 0:l.palette)||e$.CU,b=(v=(0,FO.f)(e)).invertPalette,j=v.invertFramePalette,y=(0,nf.C)({imagePalette:p,invertPalette:A||b,framePalette:F?g:p,invertFramePalette:A||j}),[4,(0,e$.Yn)((0,r._)({tiles:t,imageStartLine:m,rotation:n,scaleFactor:x,handleExportFrame:I},y),"image/png")];case 7:h=S.sent(),S.label=8;case 8:return[4,createImageBitmap(h)];case 9:return C=S.sent(),(w=document.createElement("canvas")).width=C.width,w.height=C.height,w.getContext("2d").drawImage(C,0,0),[2,w]}})}),function(e){return H.apply(this,arguments)})))];case 2:if(D=U.sent(),1!==(0,tx.A)(D.map(function(e){return"".concat(e.width,"*").concat(e.height)})).length)return l(g),t(Error("All images need to have same dimensions")),[2];return B=[],P=new(FA())(1,1/0),T=new nu.e(B,D[0].width,D[0].height,{loop:65535}),j&&((N=(0,J._)(D).reverse()).shift(),N.pop(),(M=D).push.apply(M,(0,J._)(N))),y&&D.reverse(),R=nm({frameRate:b,gifWriter:T,queue:P,total:D.length,setProgress:function(e){console.log(e),o(g,e)}}),[4,Promise.all(D.map(R))];case 3:U.sent(),L=(0,nd.A)({useCurrentDate:!0,exportScaleFactor:x,frameRate:b,altTitle:"animated",frameName:C,paletteShort:w,fileNameStyle:p}),G=T.end();try{O=new File([new Uint8Array(B.slice(0,G)).buffer],"".concat(L,".gif"),{type:"image/gif"})}catch(e){O=new Blob([new Uint8Array(B.slice(0,G)).buffer])}return(0,ns.saveAs)(O,"".concat(L,".gif")),l(g),[2]}})});return function(){return e.apply(this,arguments)}}(),ng=function(){var e=(0,Q.A)(),t=e.videoParams,F=e.setVideoParams,n=(0,f.A)(),r=n.videoSelection,a=n.setVideoSelection,i=nh(t);return{imageCount:r.length||0,videoParams:i,update:F,cancel:function(){a([])},animate:function(){np(),a([])}}};let nv=function(){var e=ng(),t=e.update,F=e.cancel,n=e.imageCount,r=e.animate,a=e.videoParams;return n?(0,i.jsx)(ex.A,{confirm:r,deny:F,header:"Create an animated GIF with ".concat(n," frames"),children:(0,i.jsxs)(s.default,{direction:"column",gap:4,children:[(0,i.jsx)(em.default,{label:"Framerate",size:"small",type:"number",slotProps:{htmlInput:{min:1,max:120}},value:a.frameRate,onChange:function(e){t({frameRate:parseInt(e.target.value,10)})}}),(0,i.jsx)(em.default,{label:"Scale GIF",size:"small",type:"number",slotProps:{htmlInput:{min:1,max:12}},value:a.scaleFactor,onChange:function(e){t({scaleFactor:parseInt(e.target.value,10)})}}),(0,i.jsx)(ec.default,{label:"Enable Yoyo-Effect (loop back to the beginning)",control:(0,i.jsx)(ef.default,{checked:a.yoyo,onChange:function(e){t({yoyo:e.target.checked})}})}),(0,i.jsx)(ec.default,{label:"Reverse animation direction",control:(0,i.jsx)(ef.default,{checked:a.reverse,onChange:function(e){t({reverse:e.target.checked})}})}),(0,i.jsx)(tu,{noFancy:!0,allowEmpty:!0,value:a.palette||"",invertPalette:a.invertPalette,onChange:function(e){t({palette:e})},updateInvertPalette:function(e){t({invertPalette:e})}}),(0,i.jsx)(em.default,{label:"How to handle frames when exporting images",size:"small",select:!0,value:a.exportFrameMode,onChange:function(e){t({exportFrameMode:e.target.value})},children:ni.A.map(function(e){var t=e.id,F=e.name;return(0,i.jsx)(ed.default,{value:t,children:F},t)})}),"crop"===a.exportFrameMode?null:(0,i.jsx)(eX,{frame:a.frame||"",lockFrame:a.lockFrame,noFrameOption:"As selected per image",updateFrame:function(e){t({frame:e})},updateFrameLock:function(e){t({lockFrame:e})}})]})}):null},nx=function(){var e,t=(0,Q.A)(),F=t.enableImageGroups,n=t.useSerials,r=!!(0,eB.A)().dialogs.length,a=(0,tB.A)(),o=a.editFrame,l=a.editImageGroup,s=a.editImages,u=a.editPalette,c=a.editRGBNImages,d=a.pickColors,m=!!(null==s||null==(e=s.batch)?void 0:e.length),h=c.length>0,p=(0,tP.A)(),g=p.filtersVisible,v=p.sortOptionsVisible,x=(0,ej.A)(),b=x.bitmapQueue,j=x.importQueue,y=x.frameQueue,C=!!b.length,_=!!j.length,A=!!y.length,w=(0,f.A)(),I=w.lightboxImage,S=w.dragover,E=w.trashCount.show,k=w.syncSelect,D=w.videoSelection,B=w.showSerials,P=(0,FK.A)(),T=P.progress,M=P.progressLog,N=!!M.git.length||!!M.dropbox.length,R=!!T.length,L=!!(null==D?void 0:D.length);switch(!0){case r:return(0,i.jsx)(eT,{});case A:return(0,i.jsx)(Fy,{});case C:return(0,i.jsx)(eC,{});case _:return(0,i.jsx)(FM,{});case m:return(0,i.jsx)(tH,{});case!!l&&F:return(0,i.jsx)(tK,{});case!!o:return(0,i.jsx)(tW,{});case!!u:return(0,i.jsx)(t3,{});case h:return(0,i.jsx)(Ff,{});case L:return(0,i.jsx)(nv,{});case!!d:return(0,i.jsx)(FQ,{});case null!==I:return(0,i.jsx)(Fz,{});case g:return(0,i.jsx)(Fg,{});case v:return(0,i.jsx)(F6,{});case k:return(0,i.jsx)(nn,{});case E:return(0,i.jsx)(na,{});case B&&n:return(0,i.jsx)(F3,{});case S:return(0,i.jsx)(eL,{});case N:return(0,i.jsx)(F1,{});case R:return(0,i.jsx)(Fq,{});default:return null}};function nb(e){var t=e.children,F=(0,Q.A)().themeName,n={"--ddpx":(0,tL.h)().ddpx};(0,d.useEffect)(function(){var e,t=null==(e=document.querySelector("html"))?void 0:e.classList;t&&[V.V.BRIGHT,V.V.DARK].forEach(function(e){e===F?t.add(F):t.remove(e)})},[F]);var f=(0,d.useMemo)(function(){return F===V.V.DARK?ea:ei},[F]),m=(0,c.A)(f.breakpoints.down("md"));return(0,i.jsxs)(u.default,{theme:f,children:[(0,i.jsx)(l.default,{}),(0,i.jsx)(d.Suspense,{fallback:(0,i.jsx)(eu,{}),children:(0,i.jsx)(es,{})}),(0,i.jsx)(o.default,{maxWidth:"xl",sx:(0,a._)((0,r._)({},n),{p:m?2:3,minHeight:"calc(100dvh - var(--navigation-height))",display:"flex",flexDirection:"column"}),children:(0,i.jsx)(s.default,{direction:"column",gap:2,sx:{flexGrow:1},children:t})}),(0,i.jsx)(nx,{}),(0,i.jsx)(C,{})]})}},19864:(e,t,F)=>{"use strict";F.d(t,{X3:()=>n,mI:()=>a,rx:()=>r});var n=function(e){return e.FILTER_UNTAGGED="__filter:untagged__",e.FILTER_NEW="__filter:new__",e.FILTER_MONOCHROME="__filter:mono__",e.FILTER_RGB="__filter:rgb__",e.FILTER_RECENT="__filter:recent__",e.FILTER_FAVOURITE="__filter:favourite__",e.FILTER_COMMENTS="__filter:comments__",e.FILTER_USERNAME="__filter:username__",e}({}),r=["__filter:untagged__","__filter:new__","__filter:mono__","__filter:rgb__","__filter:recent__","__filter:favourite__","__filter:comments__","__filter:username__"],a="__new:palette__"},27299:(e,t,F)=>{"use strict";F.d(t,{E:()=>r});var n=F(693),r=function(e,t){return(0,n._)({flexGrow:0,flexShrink:1,wordBreak:"break-all",whiteSpace:"no-wrap",overflow:"hidden",width:"100%",borderRadius:"3px"},t)}},31829:(e,t,F)=>{"use strict";F.d(t,{h:()=>r,O:()=>a});var n=function(e){var t=e.replace("#","");if(!/^([0-9a-fA-F]{6})$/.test(t))throw Error("Invalid hex color");var F=parseInt(t.slice(0,2),16),n=parseInt(t.slice(2,4),16),r=parseInt(t.slice(4,6),16);return"".concat(F,", ").concat(n,", ").concat(r)},r=function(e){return e.HARD="HARD",e.SMOOTH="SMOOTH",e.CONIC="CONIC",e}({}),a=function(e,t){var F=n(e[0]||"#000000"),r=n(e[1]||"#000000"),a=n(e[2]||"#000000"),i=n(e[3]||"#000000");switch(t){case"SMOOTH":return{backgroundImage:"linear-gradient(to right,\n          rgba(".concat(F,", ").concat(.25,") 0%,\n          rgba(").concat(r,", ").concat(.25,") 33.3%,\n          rgba(").concat(a,", ").concat(.25,") 66.6%,\n          rgba(").concat(i,", ").concat(.25,") 100%\n      )")};case"HARD":return{backgroundImage:"linear-gradient(to right,\n          rgb(".concat(F,") 0% 25%,\n          rgb(").concat(r,") 25% 50%,\n          rgb(").concat(a,") 50% 75%,\n          rgb(").concat(i,") 75% 100%\n        )")};case"CONIC":return{background:"conic-gradient(\n          rgb(".concat(F,") 0% 25%,\n          rgb(").concat(r,") 25% 50%,\n          rgb(").concat(a,") 50% 75%,\n          rgb(").concat(i,") 75% 100%\n        )")};default:return{}}}},31936:(e,t,F)=>{"use strict";F.d(t,{A:()=>o});var n=F(95155),r=F(700);F(12115);var a=F(52166),i=F(27299);let o=function(e){var t=e.text;return(0,a.A)().enableDebug?(0,n.jsx)(r.default,{title:t,variant:"caption",fontFamily:"monospace",component:"pre",sx:function(e){return(0,i.E)(e,{px:.5,py:0,mt:1,mb:0,backgroundColor:e.palette.warning[e.palette.mode]})},children:t}):null}},32521:(e,t,F)=>{"use strict";F.d(t,{U:()=>r,Z:()=>a});var n=F(12115),r=(0,n.createContext)({connectedDevices:[],isReceiving:!1,webSerialEnabled:!1,openWebSerial:function(){throw Error("PortsContext is missing")},webUSBEnabled:!1,openWebUSB:function(){throw Error("PortsContext is missing")},unknownDeviceResponse:null,hasInactiveDevices:!1}),a=function(){return(0,n.useContext)(r)}},34687:(e,t,F)=>{"use strict";F.d(t,{A:()=>a});var n=F(5672),r=function(e){e.fillStyle="#000",e.fillRect(0,0,e.canvas.width,e.canvas.height),e.filter="grayscale(1)",e.imageSmoothingEnabled=!1};let a=function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return new Promise(function(F,a){var i=document.createElement("img"),o=document.createElement("canvas");o.width=160;var l=o.getContext("2d");if(!l)return void a(Error("No canvas context"));i.onerror=a,i.onload=function(){var n,a=i.naturalWidth,s=i.naturalHeight;.875==s/a?(o.height=144,n=i.naturalWidth/128,t||r(l),l.drawImage(i,0,0,a,s,16,16,o.width-32,o.height-32)):(o.height=o.width*s/a,n=a/160,t||r(l),l.drawImage(i,0,0,a,s,0,0,o.width,o.height)),F({imageData:l.getImageData(0,0,o.width,o.height),scaleFactor:n,width:o.width,height:o.height,fileName:e.name,lastModified:e.lastModified||null})},(0,n.A)(e,n.Z.DATA_URL).then(function(e){i.src=e})})}},39141:()=>{},40082:(e,t,F)=>{"use strict";F.d(t,{A:()=>v});var n=F(95155),r=F(12115),a=F(97004),i=F(78538),o=F(39249),l=F(5432),s=F(83936),u=F(633),c=F(11760),d=F(53982),f=F(933),m=F(5847),h=function(e){var t,F=e.hash,n=e.hashes,h=e.palette,p=e.invertPalette,g=e.framePalette,v=e.invertFramePalette,x=e.lockFrame,b=e.frameId,j=e.rotation,y=(0,i._)((0,r.useState)(null),2),C=y[0],_=y[1],A=(0,u.g)(),w=(0,s.W)().remoteImport,I=(0,c.h)(),S=I.frames,E=I.palettes,k=I.images,D=null==(t=S.find(function(e){return e.id===b}))?void 0:t.hash,B=(0,r.useCallback)(function(e,t,F){return(0,m.T)(k,S,function(){(0,f.E)(A,w).recoverImageData(e)})(e,t,F,n)},[k,S,n,A,w]),P=(0,r.useMemo)(function(){return"string"==typeof h?(E.find(function(e){return e.shortName===h})||l.Fv).palette:h},[E,h]);return(0,r.useEffect)(function(){var e,t=!1;return F||_(null),(e=(0,a._)(function(){var e,n,r,a;return(0,o.YH)(this,function(i){switch(i.label){case 0:if(t)return[2];return[4,B(F,!1,b)];case 1:if(e=i.sent(),!D)return[3,3];return[4,(0,d.mZ)(D)];case 2:return r=i.sent(),[3,4];case 3:r=null,i.label=4;case 4:if(a=(n=r)?n.upper.length/20:2,t)return[2];return e&&_({tiles:e,palette:P,invertPalette:p,imageStartLine:a,lockFrame:x,rotation:j,framePalette:x?g:h,invertFramePalette:x?v:p}),[2]}})}),function(){return e.apply(this,arguments)})(),function(){t=!0}},[B,F,b,h,p,x,j,P,D,g,v]),{gbImageProps:C}},p=F(93370),g=F(66564);let v=function(e){var t=e.hash,F=e.hashes,r=e.frameId,a=e.lockFrame,i=e.invertPalette,o=e.invertFramePalette,l=e.palette,s=e.framePalette,u=e.rotation,c=e.asThumb,d=h({hash:t,hashes:F,frameId:r,lockFrame:a,invertPalette:i,invertFramePalette:o,palette:l,framePalette:s,rotation:u}).gbImageProps;return d?(0,n.jsx)(p.A,{lockFrame:d.lockFrame,invertPalette:d.invertPalette,invertFramePalette:d.invertFramePalette,tiles:d.tiles,palette:d.palette,framePalette:d.framePalette,imageStartLine:d.imageStartLine,rotation:d.rotation,asThumb:c}):(0,n.jsx)(g.A,{})}},41476:(e,t,F)=>{"use strict";F.d(t,{A:()=>l});var n=F(86447),r=F(693),a=F(60376),i=F(87025),o=F(51368);let l=(0,F(65453).v)(function(e,t){return{progress:[],progressLog:{git:[],dropbox:[]},resetProgressLog:function(){return e({progressLog:{git:[],dropbox:[]}})},startProgress:function(t){var F={id:(0,o.A)(),label:t,value:0};return e(function(e){var t=e.progress;return{progress:(0,i._)(t).concat([F])}}),F.id},setProgress:function(t,F){e(function(e){return{progress:e.progress.map(function(e){return e.id!==t?e:(0,a._)((0,r._)({},e),{value:F})})}})},stopProgress:function(t){e(function(e){return{progress:e.progress.filter(function(e){return e.id!==t})}})},setProgressLog:function(F,o){var l=t().progressLog;e({progressLog:(0,a._)((0,r._)({},l),(0,n._)({},F,[o].concat((0,i._)(l[F]))))})}}})},44116:(e,t,F)=>{"use strict";F.d(t,{d:()=>r});var n=F(87025),r=function(e,t){return e.reduce(function(e,F){var r,a;return t===(null==(a=RegExp("^(?<group>[a-z]+)(?<id>[0-9]+)","g").exec(F.id))||null==(r=a.groups)?void 0:r.group)?(0,n._)(e).concat([F]):e},[])}},46594:(e,t,F)=>{"use strict";F.d(t,{J:()=>n});var n=function(e){var t=e?new Date(e):new Date,F=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2;return String(e).padStart(t,"0")};return[t.getFullYear(),"-",F(t.getMonth()+1),"-",F(t.getDate())," ",F(t.getHours()),":",F(t.getMinutes()),":",F(t.getSeconds()),":",F(t.getMilliseconds(),3)].join("")}},47457:(e,t,F)=>{"use strict";F.d(t,{A:()=>C});var n=F(97004),r=F(693),a=F(87025),i=F(39249),o=F(91540),l=F(12115),s=F(46498),u=F(11760),c=F(75380),d=F(72623),f=function(e,t){return!!t.find(function(t){var F=t.hashes;return!!F&&Object.values(F).includes(e)})},m=function(e,t){return!!t.find(function(t){return t.hash===e})},h=function(){var e=(0,n._)(function(e){var t,F;return(0,i.YH)(this,function(n){var r,a;switch(n.label){case 0:return t=e.images,F=e.frames,[4,(0,c.ZU)()];case 1:return n.sent(),[4,c.mU.keys()];case 2:return n.sent().forEach((r=t,function(e){f(e,r)||m(e,r)||(0,d.yH)(e)})),[4,c.Uv.keys()];case 3:return n.sent().forEach((a=F,function(e){a.find(function(t){return t.hash===e})||(0,d.t9)(e)})),[2]}})});return function(t){return e.apply(this,arguments)}}(),p=function(){var e=(0,n._)(function(e){return(0,i.YH)(this,function(t){switch(t.label){case 0:return[4,(0,c.ZU)()];case 1:return t.sent(),[4,c.mU.keys()];case 2:return[2,t.sent().filter(function(e){return!e.startsWith("dummy")}).filter(function(t){return!f(t,e)&&!m(t,e)})]}})});return function(t){return e.apply(this,arguments)}}(),g=function(){var e=(0,n._)(function(e){return(0,i.YH)(this,function(t){switch(t.label){case 0:return[4,(0,c.ZU)()];case 1:return t.sent(),[4,c.Uv.keys()];case 2:return[2,t.sent().filter(function(e){return!e.startsWith("dummy")}).filter(function(t){return!e.find(function(e){return e.hash===t})})]}})});return function(t){return e.apply(this,arguments)}}(),v=F(55364),x=F(50263),b=F(99451),j=F(46594),y=function(){var e=(0,n._)(function(e,t){return(0,i.YH)(this,function(F){switch(F.label){case 0:return[4,(0,c.ZU)()];case 1:var r;return F.sent(),[4,Promise.all(e.map((r=(0,n._)(function(e){var F;return(0,i.YH)(this,function(n){switch(n.label){case 0:return n.trys.push([0,3,,4]),[4,t.getItem(e)];case 1:if(!(F=n.sent()))return[2,null];return[4,(0,x.U)(F)];case 2:return[2,{hash:e,lines:n.sent().split("\n"),binary:F}];case 3:return n.sent(),[2,null];case 4:return[2]}})}),function(e){return r.apply(this,arguments)})))];case 2:return[2,F.sent().reduce(b.N,[])]}})});return function(t,F){return e.apply(this,arguments)}}();let C=function(){var e,t=(0,s.A)(),F=t.trashCount,d=t.showTrashCount,f=(0,u.h)(),m=f.frames,x=f.images,C=(0,s.A)().updateTrashCount,_=(e=(0,n._)(function(){var e,t,F;return(0,i.YH)(this,function(n){switch(n.label){case 0:return[4,p(x)];case 1:return[4,y(n.sent(),c.mU)];case 2:return e=n.sent(),t={},F={state:{images:e.map(function(e){try{return t[e.hash]=e.binary,{hash:e.hash,created:(0,j.J)(),title:"Backup export ".concat(e.hash),lines:e.lines.length,tags:["backup"],palette:"bw",framePalette:"bw",invertPalette:!1,invertFramePalette:!1,frame:""}}catch(e){return null}}).reduce(v.iy,[]),lastUpdateUTC:Math.floor(new Date().getTime()/1e3),version:u.A}},(0,o.saveAs)(new Blob((0,a._)(JSON.stringify((0,r._)({},F,t),null,2))),"backup_images.json"),[2]}})}),function(){return e.apply(this,arguments)}),A=(0,l.useCallback)((0,n._)(function(){var e,t,F;return(0,i.YH)(this,function(n){switch(n.label){case 0:return[4,g(m)];case 1:return[4,y(n.sent(),c.Uv)];case 2:return e=n.sent(),t={},F={state:{frames:e.map(function(e,F){try{return t["frame-".concat(e.hash)]=e.binary,{hash:e.hash,name:"Backup export ".concat(e.hash),id:"bak".concat(F.toString(10).padStart(2,"0"))}}catch(e){return null}}).reduce(b.N,[]),frameGroups:[{id:"bak",name:"Re-imported trash frames"}],lastUpdateUTC:Math.floor(new Date().getTime()/1e3),version:u.A}},(0,o.saveAs)(new Blob((0,a._)(JSON.stringify((0,r._)({},F,t),null,2))),"backup_frames.json"),[2]}})}),[m]),w=(0,l.useCallback)((0,n._)(function(){var e,t;return(0,i.YH)(this,function(F){switch(F.label){case 0:return[4,g(m)];case 1:return e=F.sent().length,[4,p(x)];case 2:return t=F.sent().length,C(e,t),[2]}})}),[m,x,C]),I=(0,l.useCallback)((0,n._)(function(){return(0,i.YH)(this,function(e){switch(e.label){case 0:return[4,h({images:x,frames:m})];case 1:return e.sent(),d(!1),window.requestAnimationFrame(function(){w()}),[2]}})}),[w,m,x,d]);return{showTrashCount:d,purgeTrash:I,downloadImages:_,downloadFrames:A,checkUpdateTrashCount:w,trashCount:F}}},49231:()=>{},52324:(e,t,F)=>{"use strict";F.d(t,{g:()=>c,i:()=>d});var n=F(97004),r=F(693),a=F(60376),i=F(39249),o=F(52491),l=F.n(o),s=F(75380),u=function(e){return!!e.find(function(e){return!e.hash})},c=function(){var e=(0,n._)(function(e){return(0,i.YH)(this,function(t){var F;return u(e)?[2,Promise.all(e.map((F=(0,n._)(function(e){var t,F;return(0,i.YH)(this,function(n){switch(n.label){case 0:if(e.hash)return[2,e];return[4,s.Uv.getItem(e.id)];case 1:if(!(t=n.sent()))return console.warn("could not load frame data for hashing"),[2,e];return F=l()(t),[4,s.Uv.removeItem(e.id)];case 2:return n.sent(),[4,s.Uv.setItem(F,t)];case 3:return n.sent(),[2,(0,a._)((0,r._)({},e),{hash:F})]}})}),function(e){return F.apply(this,arguments)})))]:[2,e]})});return function(t){return e.apply(this,arguments)}}(),d=function(){var e=(0,n._)(function(e){var t,F;return(0,i.YH)(this,function(o){switch(o.label){case 0:var s;if(!(t=e).state.frames||!u(t.state.frames))return[2,e];return[4,Promise.all(t.state.frames.map((s=(0,n._)(function(e){var F,n,o;return(0,i.YH)(this,function(i){return e.hash?[2,e]:(n=t[F="frame-".concat(e.id)])?(o=l()(n),delete t[F],t["frame-".concat(o)]=n,[2,(0,a._)((0,r._)({},e),{hash:o})]):(console.warn("could not load ".concat(F," from json import")),[2,e])})}),function(e){return s.apply(this,arguments)})))];case 1:return F=o.sent(),[2,(0,a._)((0,r._)({},t),{state:(0,a._)((0,r._)({},t.state),{frames:F})})]}})});return function(t){return e.apply(this,arguments)}}()},53081:(e,t,F)=>{"use strict";F.d(t,{A:()=>j});var n=F(78538),r=F(87025),a=F(95155),i=F(62170),o=F(11279),l=F(44516),s=F(7642),u=F(3127),c=F(7068),d=F(700),f=F(17652),m=F(52491),h=F.n(m),p=F(12115),g=F(15821),v=F(9718),x=F(32521),b=F(52166);let j=function(e){var t=e.inline,F=(0,x.Z)(),m=F.connectedDevices,j=F.webUSBEnabled,y=F.openWebUSB,C=F.webSerialEnabled,_=F.openWebSerial,A=F.unknownDeviceResponse,w=F.hasInactiveDevices,I=(0,b.A)().enableDebug,S=(0,f.c3)("ConnectSerial"),E=(0,n._)((0,p.useState)(!1),2),k=E[0],D=E[1],B=(0,p.useMemo)(function(){if(!A||!A.length)return[];var e=(0,r._)(A).some(function(e){return e<32&&9!==e&&10!==e&&13!==e});return[A.byteLength<50?(0,r._)(A).join(","):"",e?"":new TextDecoder().decode(A),h()((0,r._)(A))].filter(Boolean)},[A]);return(0,a.jsxs)(c.default,{direction:"column",gap:4,children:[(0,a.jsxs)(c.default,{direction:{xs:"column",md:t?"row":"column"},gap:4,sx:{"& > *":{flex:1}},children:[(0,a.jsx)(c.default,{direction:"column",gap:1,children:(0,a.jsx)(s.default,{title:S("openWebUSB"),onClick:y,disabled:!j,loadingPosition:"start",variant:"contained",color:"secondary",children:S("openWebUSB")})}),(0,a.jsx)(c.default,{direction:"column",gap:1,children:(0,a.jsx)(s.default,{title:S("openWebSerial"),onClick:_,disabled:!C,loadingPosition:"start",variant:"contained",color:"secondary",children:S("openWebSerial")})})]}),(0,a.jsx)(d.default,{variant:"body2",children:S("connectedDevices",{deviceCount:m.length})}),(0,a.jsx)(c.default,{component:"ul",direction:"column",gap:2,children:m.map(function(e){var F=e.id,n=e.portType,r=e.portDeviceType,i=e.description,s=n===v.qt.SERIAL?o.A:l.A;return(0,a.jsxs)(c.default,{gap:1,direction:"row",alignItems:"center",children:[(0,a.jsx)(s,{}),(0,a.jsxs)(c.default,{component:"li",direction:t?"row":"column",gap:2*!!t,alignItems:"baseline",children:[(0,a.jsx)(d.default,{variant:"body1",component:"span",children:v.vK[r]}),(0,a.jsx)(d.default,{variant:"caption",component:"span",children:I?"".concat(i," - ").concat(F):i})]})]},F)})}),(0,a.jsx)(s.default,{title:S("showUnknownResponse"),onClick:function(){A&&D(!0)},disabled:!(w&&A),variant:"contained",color:"error",children:S("showUnknownResponse")}),(0,a.jsx)(g.A,{header:S("unknownDeviceInfo"),deny:function(){return D(!1)},open:k&&!!(null==A?void 0:A.length),children:(0,a.jsx)(c.default,{direction:"column",gap:2,children:B.map(function(e,t){return(0,a.jsxs)(c.default,{direction:"row",alignItems:"center",justifyContent:"space-between",children:[(0,a.jsx)(d.default,{children:e}),(0,a.jsx)(u.default,{onClick:function(){return navigator.clipboard.writeText(e)},title:S("copyToClipboard"),children:(0,a.jsx)(i.A,{})})]},t)})})})]})}},55364:(e,t,F)=>{"use strict";F.d(t,{iy:()=>a,pl:()=>r});var n=F(87025),r=function(e){return!!(e.hasOwnProperty("hashes")&&e.hashes)},a=function(e,t){return!t||r(t)?e:(0,n._)(e).concat([t])}},55685:(e,t,F)=>{"use strict";F.d(t,{A:()=>n});let n=function(e){return Array.from(new Set(e))}},62412:(e,t,F)=>{"use strict";F.d(t,{A:()=>v,E:()=>p});var n=F(97004),r=F(78538),a=F(87025),i=F(39249),o=F(3899),l=F.n(o),s=F(27576),u=F(88274),c=F.n(u),d=F(12115),f=F(3381),m=F(46498),h=F(34687),p=function(e){var t=(0,r._)(e,3),F=t[0],n=t[1],a=t[2];return["#",Math.min(255,Math.max(0,F)).toString(16).padStart(2,"0"),Math.min(255,Math.max(0,n)).toString(16).padStart(2,"0"),Math.min(255,Math.max(0,a)).toString(16).padStart(2,"0")].join("")},g=function(e,t){var F=.299*e[0]+.587*e[1]+.114*e[2],n=.299*t[0]+.587*t[1]+.114*t[2];return F>n?-1:+(F<n)};let v=function(){var e,t=(0,r._)((0,d.useState)(!1),2),F=t[0],o=t[1],u=(0,m.A)().setError,p=(0,f.A)().setPickColors;return{onInputChange:(e=(0,n._)(function(e){var t,F,n,d,f,m;return(0,i.YH)(this,function(i){switch(i.label){case 0:if(!(null==(F=(t=e.target).files)?void 0:F[0]))return[3,2];return o(!0),[4,(0,h.A)(t.files[0],!0)];case 1:d=(n=i.sent()).imageData,f=n.fileName,m=l()(d.data,4).map(function(e){var t=(0,r._)(e,3);return[t[0],t[1],t[2]]}),s.clusterize(m,{k:6},function(e,t){if(e)u(e);else{var F=c()(m,4);p({colors:(0,a._)(F?F.palette():[]).concat((0,a._)(t?t.map(function(e){var t=(0,r._)(e.centroid,3);return[Math.round(t[0]),Math.round(t[1]),Math.round(t[2])]}):[])).filter(function(e,t,F){return F.findIndex(function(t){return t.join(",")===e.join(",")})===t}).sort(g),fileName:f})}o(!1)}),i.label=2;case 2:return t.value="",[2]}})}),function(t){return e.apply(this,arguments)}),busy:F}}},66564:(e,t,F)=>{"use strict";F.d(t,{A:()=>i});var n=F(95155),r=F(53267),a=F(14426);F(12115);let i=function(){return(0,n.jsx)(r.default,{sx:{width:"100%",paddingTop:"90%",height:0,display:"block",background:"transparent",position:"relative"},children:(0,n.jsx)(r.default,{sx:{position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)"},children:(0,n.jsx)(a.default,{color:"primary",size:40})})})}},67069:(e,t,F)=>{"use strict";F.d(t,{y:()=>n});var n={htmlInput:{autoComplete:"off",autoCorrect:"off",autoCapitalize:"off",spellCheck:!1},inputLabel:{shrink:!0},fullWidth:!0,size:"small"}},70661:(e,t,F)=>{"use strict";F.d(t,{q:()=>u,$:()=>s});let n=function(e,t){var F=(t-e)/16;return Array(16).fill(null).map(function(t,n){return Math.floor(e+F*n)})},r=function(e){var t="number"==typeof e[0]?e[0]:0,F="number"==typeof e[1]?e[1]:85,r="number"==typeof e[2]?e[2]:170,a="number"==typeof e[3]?e[3]:255;return[n(t,F),n(F,r),n(r,a)]},a=function(e){for(var t=e.baseValues,F=e.orderPatterns,n=[],r=0;r<4;r+=1){var a=[];n.push(a);for(var i=0;i<4;i+=1){var o=[];a.push(o);for(var l=0;l<3;l+=1)o.push(t[l][F[l][4*r+i]])}}return n};var i=[0,12,3,15,8,4,11,7,2,14,1,13,10,6,9,5],o=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],l=0,s=function(e){for(var t=e.imageData,F=e.contrastBaseValues,n=e.dither,s=e.colors,u=new ImageData(t.width,t.height),c=a({baseValues:r(F),orderPatterns:[n?i:o,n?i:o,n?i:o]}),d=t.width,f=t.data,m=0;m<f.length;m+=4){var h=l%d%4,p=Math.ceil(l/d)%4,g=f[m],v=void 0,x=c[h][p];v=g<=x[0]?s[3]:g<=x[1]?s[2]:g<=x[2]?s[1]:s[0],u.data[m]=v.r,u.data[m+1]=v.g,u.data[m+2]=v.b,u.data[m+3]=255,l+=1}return u},u=function(e){var t=e.targetCanvas,F=e.originalCanvas,n=e.imageData,r=e.palette,a=e.dither,i=e.contrastBaseValues,o=r.map(function(e){return{r:parseInt(e.slice(1,3),16),g:parseInt(e.slice(3,5),16),b:parseInt(e.slice(5,7),16)}}),l=t.getContext("2d"),u=F.getContext("2d");if(!l||!u)return void console.error("canvas context is missing");l.putImageData(s({imageData:n,contrastBaseValues:i,dither:a,colors:o}),0,0),u.putImageData(n,0,0)}},74335:(e,t,F)=>{"use strict";F.d(t,{c:()=>a});var n=F(97004),r=F(39249),a=function(){var e=(0,n._)(function(e){return(0,r.YH)(this,function(t){return[2,new Promise(function(t){self.setTimeout(t,e)})]})});return function(t){return e.apply(this,arguments)}}()},75097:(e,t,F)=>{"use strict";F.d(t,{No:()=>r,Q3:()=>a,RQ:()=>i,x6:()=>n});var n=function(e){return e.DELETE="delete",e.ANIMATE="animate",e.DOWNLOAD="download",e.EDIT="edit",e.RGB="rgb",e}({}),r=function(e){return e.LOCK_FRAME="lockFrame",e.FRAME="frame",e.PALETTE="palette",e.TITLE="title",e.TAGS="tags",e.CREATED="created",e.ROTATION="rotation",e}({}),a=function(e){return e.INVERT_PALETTE="invertPalette",e.FRAME_PALETTE="framePalette",e.INVERT_FRAME_PALETTE="invertFramePalette",e}({}),i=["lockFrame","frame","title","tags","created","rotation","palette","invertPalette","framePalette","invertFramePalette"]},75380:(e,t,F)=>{"use strict";F.d(t,{Uv:()=>u,mU:()=>s,ZU:()=>c});var n=F(97004),r=F(39249),a=F(77271),i=F.n(a),o="dummy".concat(new Date().getTime());let l=function(e){var t,F,a,l,s=i().createInstance(e),u=(t=(0,n._)(function(){return(0,r.YH)(this,function(e){switch(e.label){case 0:return[4,s.setItem(o,o)];case 1:return e.sent(),[4,s.removeItem(o)];case 2:return e.sent(),[2]}})}),function(){return t.apply(this,arguments)});return{ready:(0,n._)(function(){var t;return(0,r.YH)(this,function(F){switch(F.label){case 0:return F.trys.push([0,2,,3]),[4,s.ready()];case 1:return F.sent(),[2,u()];case 2:throw t=F.sent(),s=i().createInstance(e),t;case 3:return[2]}})}),keys:(0,n._)(function(){return(0,r.YH)(this,function(t){try{return[2,s.keys()]}catch(t){throw s=i().createInstance(e),t}})}),driver:(0,n._)(function(){var t;return(0,r.YH)(this,function(F){switch(F.label){case 0:return F.trys.push([0,2,,3]),[4,s.driver()];case 1:return[2,F.sent()];case 2:throw t=F.sent(),s=i().createInstance(e),t;case 3:return[2]}})}),setItem:(F=(0,n._)(function(t,F){var n;return(0,r.YH)(this,function(r){switch(r.label){case 0:return r.trys.push([0,2,,3]),[4,s.setItem(t,F)];case 1:return[2,r.sent()];case 2:throw n=r.sent(),s=i().createInstance(e),n;case 3:return[2]}})}),function(e,t){return F.apply(this,arguments)}),getItem:(a=(0,n._)(function(t){var F;return(0,r.YH)(this,function(n){switch(n.label){case 0:return n.trys.push([0,2,,3]),[4,s.getItem(t)];case 1:return[2,n.sent()];case 2:throw F=n.sent(),s=i().createInstance(e),F;case 3:return[2]}})}),function(e){return a.apply(this,arguments)}),removeItem:(l=(0,n._)(function(t){var F;return(0,r.YH)(this,function(n){switch(n.label){case 0:return n.trys.push([0,2,,3]),[4,s.removeItem(t)];case 1:return[2,n.sent()];case 2:throw F=n.sent(),s=i().createInstance(e),F;case 3:return[2]}})}),function(e){return l.apply(this,arguments)})}};var s=l({name:"GB Printer Web",storeName:"gb-printer-web-images"}),u=l({name:"GB Printer Web",storeName:"gb-printer-web-frames"});window.lfi=s,window.lff=u;var c=function(){var e=(0,n._)(function(){return(0,r.YH)(this,function(e){switch(e.label){case 0:return[4,u.ready()];case 1:return e.sent(),[4,s.ready()];case 2:return e.sent(),[4,new Promise(function(e){window.setTimeout(e,5)})];case 3:return e.sent(),[2]}})});return function(){return e.apply(this,arguments)}}()},81543:(e,t,F)=>{"use strict";F.d(t,{A:()=>r});var n=F(15905);let r=[{id:n.H.FRAMEMODE_KEEP,name:"frameModes.keepFrame"},{id:n.H.FRAMEMODE_CROP,name:"frameModes.cropFrame"},{id:n.H.FRAMEMODE_SQUARE_BLACK,name:"frameModes.squareBlack"},{id:n.H.FRAMEMODE_SQUARE_WHITE,name:"frameModes.squareWhite"}]},85539:(e,t,F)=>{"use strict";F.d(t,{_:()=>u});var n=F(97004),r=F(39249),a=F(70661),i=F(80360),o=F(72623),l=[0,256,1,257],s=function(e){for(var t=[],F=0;F<8;F+=1){for(var n=0,r=0;r<8;r+=1)n+=l[e[8*F+r]]<<7-r;t.push((n>>8).toString(16).padStart(2,"0"),(255&n).toString(16).padStart(2,"0"))}return t.join(" ").toUpperCase()},u=function(e){var t,F=e.bitmapQueue,l=e.dither,u=e.contrastBaseValues,c=e.importQueueAdd;F.forEach((t=(0,n._)(function(e){var t,F,n,d,f,m,h,p,g;return(0,r.YH)(this,function(r){switch(r.label){case 0:return t=e.imageData,F=e.height,n=e.fileName,d=e.lastModified,f=Array.from((0,a.$)({imageData:t,contrastBaseValues:u,dither:l,colors:[{r:0,g:0,b:0},{r:1,g:0,b:0},{r:2,g:0,b:0},{r:3,g:0,b:0}]}).data).filter(function(e,t){return!(t%4)}),m=20*Math.ceil(F/8),h=function(e){var t=Math.floor(e/20),F=e%20*8,n=8*t;return Array(8).fill(null).map(function(e,t){return f.slice(F+(n+t)*160).slice(0,8)}).flat(1)},p=Array(m).fill(null).map(function(e,t){return h(t)}).map(s),[4,(0,o.cg)(p)];case 1:return g=r.sent().dataHash,c([{fileName:n,imageHash:g,tiles:p,lastModified:d,tempId:(0,i.z)()}]),[2]}})}),function(e){return t.apply(this,arguments)}))}},85546:(e,t,F)=>{"use strict";F.d(t,{A:()=>n});let n=function(e){return function(t){var F=new Set;return t.filter(function(t){var n=t[e];return!F.has(n)&&(F.add(n),!0)})}}},85812:(e,t,F)=>{"use strict";F.d(t,{N:()=>i});var n=F(17652),r=F(12115),a=F(52166),i=function(){var e=(0,a.A)().hideDates,t=(0,n.kc)(),F=(0,r.useCallback)(function(e){return t.dateTime(new Date(e),"short")},[t]);return{formatterGallery:(0,r.useCallback)(function(t){return e||!t?null:F(t)},[F,e]),formatter:F}}},87031:(e,t,F)=>{"use strict";F.d(t,{A:()=>a,U:()=>r});var n=F(87025),r=function(e){return e.ASC="asc",e.DESC="desc",e}({});let a=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"asc";return function(F){var r="desc"===t?-1:1;return(0,n._)(F).sort(function(t,F){return"string"==typeof t[e]?t[e].localeCompare(F[e]):t[e]>F[e]?r:t[e]<F[e]?-r:0})}}},93370:(e,t,F)=>{"use strict";F.d(t,{A:()=>d});var n=F(97004),r=F(693),a=F(78538),i=F(39249),o=F(95155),l=F(53267),s=F(15905),u=F(12115),c=F(77683);let d=function(e){var t=e.palette,F=e.tiles,d=e.imageStartLine,f=e.lockFrame,m=e.invertPalette,h=e.framePalette,p=e.invertFramePalette,g=e.asThumb,v=void 0!==g&&g,x=e.rotation,b=void 0===x?s.pL.DEG_0:x,j=!(t instanceof Array),y=(0,a._)((0,u.useState)(null),2),C=y[0],_=y[1],A=(0,a._)((0,u.useState)(""),2),w=A[0],I=A[1];(0,u.useEffect)(function(){if(t&&F){var e=setTimeout((0,n._)(function(){var e;return(0,i.YH)(this,function(n){switch(n.label){case 0:if(n.trys.push([0,5,,6]),!j)return[3,2];return[4,(0,s.uL)({tiles:F,palette:t,lockFrame:f||!1,rotation:b})];case 1:return _.apply(void 0,[n.sent()]),[3,4];case 2:if(!(null==F?void 0:F.length))return[3,4];return[4,(0,s.qO)((0,r._)({tiles:F,imageStartLine:d,rotation:b},(0,c.C)({imagePalette:t,framePalette:h,invertPalette:m,invertFramePalette:p})))];case 3:_.apply(void 0,[n.sent()]),n.label=4;case 4:return I(""),[3,6];case 5:return(e=n.sent())instanceof Error&&(console.error(e),I(e.message)),[3,6];case 6:return[2]}})}),1);return function(){clearTimeout(e)}}},[F,t,f,m,b,j,d,h,p]);var S=(0,u.useMemo)(function(){var e=b===s.pL.DEG_90||b===s.pL.DEG_270,t=(j?(0,s.EK)(F):F.length)<=360,n=e&&t;return{display:"block",imageRendering:v?"auto":"pixelated",margin:n?"0 5%":0,width:n?"90%":"100%",maxWidth:"100%",maxHeight:"100%",objectFit:"contain"}},[v,j,b,F]);return(0,o.jsx)(l.default,{className:"gameboy-image",sx:{display:"flex",width:"100%",height:"100%"},children:!w&&C&&(0,o.jsx)(l.default,{component:"img",width:160,src:C,sx:S,alt:""})})}},96396:(e,t,F)=>{Promise.resolve().then(F.bind(F,19707))},98250:(e,t,F)=>{"use strict";F.d(t,{h:()=>i});var n=F(78538),r=F(12115),a=function(){var e;return{width:window.innerWidth,height:window.innerHeight,ddpx:window.devicePixelRatio<=2?window.devicePixelRatio:window.devicePixelRatio/2,layoutWidth:(e=window.innerWidth)>1220?1155:e>1025?960:e>830?765:e>635?570:e>440?375:e-40}},i=function(){var e=(0,n._)((0,r.useState)(a()),2),t=e[0],F=e[1];return(0,r.useEffect)(function(){var e=function(){F(a())};return window.addEventListener("resize",e),function(){return window.removeEventListener("resize",e)}},[F]),t}},99451:(e,t,F)=>{"use strict";F.d(t,{N:()=>r});var n=F(87025),r=function(e,t){return t?(0,n._)(e).concat([t]):e}}},e=>{var t=t=>e(e.s=t);e.O(0,[1090,4536,4453,700,7859,7271,8250,2491,6139,2797,3313,7642,7890,8449,1487,6672,9665,8681,5123,6874,3611,3678,9740,1936,5849,1539,6193,4720,3936,283,8441,1684,7358],()=>t(96396)),_N_E=e.O()}]);