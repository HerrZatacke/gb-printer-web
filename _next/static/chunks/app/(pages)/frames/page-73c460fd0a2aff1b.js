(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[1345],{3127:(e,t,n)=>{"use strict";n.d(t,{default:()=>S});var r=n(86447),a=n(693),o=n(60376),i=n(37414),s=n(78538),l=n(577),c=n(12115),u=n(52596),d=n(17472),h=n(4420),f=n(74739),p=n(75955),m=n(40680),v=n(98963),g=n(10186),H=n(25466),_=n(14426),A=n(13209),b=n(55170),x=n(90870);function z(e){return(0,x.Ay)("MuiIconButton",e)}var y=(0,b.A)("MuiIconButton",["root","disabled","colorInherit","colorPrimary","colorSecondary","colorError","colorInfo","colorSuccess","colorWarning","edgeStart","edgeEnd","sizeSmall","sizeMedium","sizeLarge","loading","loadingIndicator","loadingWrapper"]),j=n(95155),F=function(e){var t=e.classes,n=e.disabled,r=e.color,a=e.edge,o=e.size,i={root:["root",e.loading&&"loading",n&&"disabled","default"!==r&&"color".concat((0,A.A)(r)),a&&"edge".concat((0,A.A)(a)),"size".concat((0,A.A)(o))],loadingIndicator:["loadingIndicator"],loadingWrapper:["loadingWrapper"]};return(0,d.A)(i,z,t)},w=(0,p.default)(H.default,{name:"MuiIconButton",slot:"Root",overridesResolver:function(e,t){var n=e.ownerState;return[t.root,n.loading&&t.loading,"default"!==n.color&&t["color".concat((0,A.A)(n.color))],n.edge&&t["edge".concat((0,A.A)(n.edge))],t["size".concat((0,A.A)(n.size))]]}})((0,m.A)(function(e){var t=e.theme;return{textAlign:"center",flex:"0 0 auto",fontSize:t.typography.pxToRem(24),padding:8,borderRadius:"50%",color:(t.vars||t).palette.action.active,transition:t.transitions.create("background-color",{duration:t.transitions.duration.shortest}),variants:[{props:function(e){return!e.disableRipple},style:{"--IconButton-hoverBg":t.vars?"rgba(".concat(t.vars.palette.action.activeChannel," / ").concat(t.vars.palette.action.hoverOpacity,")"):(0,h.X4)(t.palette.action.active,t.palette.action.hoverOpacity),"&:hover":{backgroundColor:"var(--IconButton-hoverBg)","@media (hover: none)":{backgroundColor:"transparent"}}}},{props:{edge:"start"},style:{marginLeft:-12}},{props:{edge:"start",size:"small"},style:{marginLeft:-3}},{props:{edge:"end"},style:{marginRight:-12}},{props:{edge:"end",size:"small"},style:{marginRight:-3}}]}}),(0,m.A)(function(e){var t,n=e.theme;return t={variants:[{props:{color:"inherit"},style:{color:"inherit"}}].concat((0,l._)(Object.entries(n.palette).filter((0,v.A)()).map(function(e){var t=(0,s._)(e,1)[0];return{props:{color:t},style:{color:(n.vars||n).palette[t].main}}})),(0,l._)(Object.entries(n.palette).filter((0,v.A)()).map(function(e){var t=(0,s._)(e,1)[0];return{props:{color:t},style:{"--IconButton-hoverBg":n.vars?"rgba(".concat((n.vars||n).palette[t].mainChannel," / ").concat(n.vars.palette.action.hoverOpacity,")"):(0,h.X4)((n.vars||n).palette[t].main,n.palette.action.hoverOpacity)}}})),[{props:{size:"small"},style:{padding:5,fontSize:n.typography.pxToRem(18)}},{props:{size:"large"},style:{padding:12,fontSize:n.typography.pxToRem(28)}}])},(0,r._)(t,"&.".concat(y.disabled),{backgroundColor:"transparent",color:(n.vars||n).palette.action.disabled}),(0,r._)(t,"&.".concat(y.loading),{color:"transparent"}),t})),M=(0,p.default)("span",{name:"MuiIconButton",slot:"LoadingIndicator"})(function(e){var t=e.theme;return{display:"none",position:"absolute",visibility:"visible",top:"50%",left:"50%",transform:"translate(-50%, -50%)",color:(t.vars||t).palette.action.disabled,variants:[{props:{loading:!0},style:{display:"flex"}}]}});let S=c.forwardRef(function(e,t){var n=(0,g.b)({props:e,name:"MuiIconButton"}),r=n.edge,s=n.children,l=n.className,c=n.color,d=n.disabled,h=void 0!==d&&d,p=n.disableFocusRipple,m=void 0!==p&&p,v=n.size,H=n.id,A=n.loading,b=void 0===A?null:A,x=n.loadingIndicator,z=(0,i._)(n,["edge","children","className","color","disabled","disableFocusRipple","size","id","loading","loadingIndicator"]),y=(0,f.A)(H),S=null!=x?x:(0,j.jsx)(_.default,{"aria-labelledby":y,color:"inherit",size:16}),I=(0,o._)((0,a._)({},n),{edge:void 0!==r&&r,color:void 0===c?"default":c,disabled:h,disableFocusRipple:m,loading:b,loadingIndicator:S,size:void 0===v?"medium":v}),R=F(I);return(0,j.jsxs)(w,(0,o._)((0,a._)({id:b?y:H,className:(0,u.A)(R.root,l),centerRipple:!0,focusRipple:!m,disabled:h||b,ref:t},z),{ownerState:I,children:["boolean"==typeof b&&(0,j.jsx)("span",{className:R.loadingWrapper,style:{display:"contents"},children:(0,j.jsx)(M,{className:R.loadingIndicator,ownerState:I,children:b&&S})}),s]}))})},17419:(e,t,n)=>{"use strict";n.d(t,{Ay:()=>m,L2:()=>f,_K:()=>h});var r=n(97004),a=n(693),o=n(60376),i=n(577),s=n(39249),l=n(53982),c=n(55364),u=n(99451),d=n(72623),h=function(){var e=(0,r._)(function(e){var t;return(0,s.YH)(this,function(n){return t=e.split("\n").filter(function(e){return e.match(/^[0-9a-f ]+$/gi)}),[2,(0,d.UN)(t)]})});return function(t){return e.apply(this,arguments)}}(),f=function(e){var t=Array(32).fill("f").join(""),n=Array(16).fill(t);return(0,i._)(e.upper).concat((0,i._)(Array(14).fill("").map(function(t,r){return(0,i._)(e.left[r]).concat((0,i._)(n),(0,i._)(e.right[r]))}).flat()),(0,i._)(e.lower))},p=function(){var e=(0,r._)(function(e){var t,n,r;return(0,s.YH)(this,function(a){return n=(t=JSON.parse(e)).upper.length/20,r=f(t),[2,(0,l.R_)(r,n)]})});return function(t){return e.apply(this,arguments)}}();let m=function(){var e=(0,r._)(function(e){var t,n,i,f,m,v,g,H,_;return(0,s.YH)(this,function(A){var b,x;switch(A.label){case 0:return t=e.images,n=e.frames,f=(i=e.settings).state.images||[],m=i.state.frames||[],[4,Promise.all(t.map((b=(0,r._)(function(e){var t,n;return(0,s.YH)(this,function(r){switch(r.label){case 0:return[4,(0,d.Hh)(e.hash,void 0,!0)];case 1:if(null==(t=r.sent())?void 0:t.length)return[2,void 0];return[4,e.getFileContent()];case 2:return[4,h(r.sent())];case 3:if(n=r.sent(),e.hash!==n)return[2,{oldHash:e.hash,newHash:n}];return[2,void 0]}})}),function(e){return b.apply(this,arguments)})))];case 1:return v=A.sent().reduce(u.N,[]),[4,Promise.all(n.map((x=(0,r._)(function(e){var t;return(0,s.YH)(this,function(n){switch(n.label){case 0:return[4,(0,l.mZ)(e.hash)];case 1:if(n.sent())return[2,void 0];return[4,e.getFileContent()];case 2:return[4,p(n.sent())];case 3:if(t=n.sent(),e.hash!==t)return[2,{oldHash:e.hash,newHash:t}];return[2,void 0]}})}),function(e){return x.apply(this,arguments)})))];case 2:return g=A.sent().reduce(u.N,[]),H=f.map(function(e){if((0,c.pl)(e)){var t=(0,a._)({},e.hashes),n=v.find(function(t){return t.oldHash===e.hashes.r}),r=v.find(function(t){return t.oldHash===e.hashes.g}),i=v.find(function(t){return t.oldHash===e.hashes.b}),s=v.find(function(t){return t.oldHash===e.hashes.n});return(null==n?void 0:n.newHash)&&(t.r=null==n?void 0:n.newHash),(null==r?void 0:r.newHash)&&(t.g=null==r?void 0:r.newHash),(null==i?void 0:i.newHash)&&(t.b=null==i?void 0:i.newHash),(null==s?void 0:s.newHash)&&(t.n=null==s?void 0:s.newHash),(0,o._)((0,a._)({},e),{hashes:t})}var l=v.find(function(t){return t.oldHash===e.hash});return(0,o._)((0,a._)({},e),{hash:(null==l?void 0:l.newHash)||e.hash})}),_=m.map(function(e){var t=g.find(function(t){return t.oldHash===e.hash});return t?(0,o._)((0,a._)({},e),{hash:t.newHash}):e}),[2,(0,o._)((0,a._)({},i),{state:(0,o._)((0,a._)({},i.state),{images:H,frames:_})})]}})});return function(t){return e.apply(this,arguments)}}()},19505:(e,t,n)=>{"use strict";n.d(t,{A:()=>o});var r=n(31418),a=n(95155);let o=(0,r.A)((0,a.jsx)("path",{d:"M6 19c0 1.1.9 2 2 2h8c1.1 0 2-.9 2-2V7H6zM19 4h-3.5l-1-1h-5l-1 1H5v2h14z"}),"Delete")},26795:(e,t,n)=>{Promise.resolve().then(n.bind(n,700)),Promise.resolve().then(n.bind(n,94508))},28890:(e,t,n)=>{"use strict";n.d(t,{A:()=>o});var r=n(31418),a=n(95155);let o=(0,r.A)((0,a.jsx)("path",{d:"M3 17.25V21h3.75L17.81 9.94l-3.75-3.75zM20.71 7.04c.39-.39.39-1.02 0-1.41l-2.34-2.34a.996.996 0 0 0-1.41 0l-1.83 1.83 3.75 3.75z"}),"Edit")},44116:(e,t,n)=>{"use strict";n.d(t,{d:()=>a});var r=n(577),a=function(e,t){return e.reduce(function(e,n){var a,o;return t===(null==(o=RegExp("^(?<group>[a-z]+)(?<id>[0-9]+)","g").exec(n.id))||null==(a=o.groups)?void 0:a.group)?(0,r._)(e).concat([n]):e},[])}},61046:(e,t,n)=>{"use strict";n.d(t,{A:()=>o});var r=n(31418),a=n(95155);let o=(0,r.A)((0,a.jsx)("path",{d:"M4 8h4V4H4zm6 12h4v-4h-4zm-6 0h4v-4H4zm0-6h4v-4H4zm6 0h4v-4h-4zm6-10v4h4V4zm-6 4h4V4h-4zm6 6h4v-4h-4zm0 6h4v-4h-4z"}),"Apps")},69008:(e,t,n)=>{"use strict";n.d(t,{A:()=>o});var r=n(31418),a=n(95155);let o=(0,r.A)((0,a.jsx)("path",{d:"M12 8c1.1 0 2-.9 2-2s-.9-2-2-2-2 .9-2 2 .9 2 2 2m0 2c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2m0 6c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2"}),"MoreVert")},70340:(e,t,n)=>{"use strict";n.d(t,{A:()=>o});var r=n(31418),a=n(95155);let o=(0,r.A)((0,a.jsx)("path",{d:"M4 18h2.5v-2.5H4zm0-4.75h2.5v-2.5H4zM4 8.5h2.5V6H4zM17.5 6v2.5H20V6zM13 8.5h2.5V6H13zm4.5 9.5H20v-2.5h-2.5zm0-4.75H20v-2.5h-2.5zM8.5 18H11v-2.5H8.5zm4.5 0h2.5v-2.5H13zM8.5 8.5H11V6H8.5zm4.5 4.75h2.5v-2.5H13zm-4.5 0H11v-2.5H8.5z"}),"ViewCompact")},84585:(e,t,n)=>{"use strict";n.d(t,{A:()=>o});var r=n(31418),a=n(95155);let o=(0,r.A)((0,a.jsx)("path",{d:"M3 3h8v8H3zm10 0h8v8h-8zM3 13h8v8H3zm10 0h8v8h-8z"}),"WindowSharp")},87741:(e,t,n)=>{"use strict";n.d(t,{A:()=>o});var r=n(31418),a=n(95155);let o=(0,r.A)((0,a.jsx)("path",{d:"M3 3h18v18H3z"}),"Square")},94508:(e,t,n)=>{"use strict";n.d(t,{default:()=>T});var r=n(95155),a=n(7642),o=n(61487),i=n(76380),s=n(7068),l=n(78449),c=n(12115),u=n(31936),d=n(19505),h=n(28890),f=n(39489),p=n(85222),m=n(13313);let v=function(e){var t=e.deleteFrame,n=e.editFrame,a=e.menuAnchor,o=e.onClose;return a?(0,r.jsxs)(m.default,{open:!!a,anchorEl:a,onClose:o,onClick:function(e){e.stopPropagation(),o()},children:[(0,r.jsxs)(i.default,{onClick:n,title:"Edit",children:[(0,r.jsx)(f.default,{children:(0,r.jsx)(h.A,{})}),(0,r.jsx)(p.default,{children:"Edit"})]}),(0,r.jsxs)(i.default,{onClick:t,title:"Delete",children:[(0,r.jsx)(f.default,{children:(0,r.jsx)(d.A,{})}),(0,r.jsx)(p.default,{children:"Delete"})]})]}):null};var g=n(74666),H=n(93370),_=n(66564),A=n(97004),b=n(78538),x=n(39249),z=n(633),y=n(41186),j=n(3381),F=n(11760),w=n(47639),M=n(53982),S=n(6732),I=function(e){var t=e.frameId,n=e.frameHash,r=e.name,a="\n  frameId: ".concat(t,"\n\n  ").concat(r,"\n\n").concat(n);return(0,w.A)((0,S.A)(a),n)};let R=function(e){var t,n=e.frameId,r=e.name,a=(0,b._)((0,c.useState)([]),2),o=a[0],i=a[1],s=(0,b._)((0,c.useState)(2),2),l=s[0],u=s[1],d=(0,j.A)().setEditFrame,h=(0,y.A)(),f=h.dismissDialog,p=h.setDialog,m=(0,F.h)(),v=m.frames,g=m.deleteFrame,H=m.images,_=(0,z.g)().updateLastSyncLocalNow,w=(null==(t=v.find(function(e){return e.id===n}))?void 0:t.hash)||"",S=H.filter(function(e){return e.frame===n}).length;return(0,c.useEffect)(function(){var e;u(2),i([]),(e=(0,A._)(function(){var e,t;return(0,x.YH)(this,function(a){switch(a.label){case 0:if(!w)return[2];return[4,(0,M.mZ)(w)];case 1:return e=a.sent(),[4,I({frameId:n,frameHash:w,name:r})];case 2:return t=a.sent(),u(e?e.upper.length/20:2),i(t),[2]}})}),function(){return e.apply(this,arguments)})()},[n,w,r]),{frameHash:w,tiles:o,imageStartLine:l,usage:S,setTiles:i,deleteFrame:function(){p({message:'Delete frame "'.concat(r,'" (').concat(n,")?"),confirm:(0,A._)(function(){return(0,x.YH)(this,function(e){return f(0),_(),g(n),[2]})}),deny:(0,A._)(function(){return(0,x.YH)(this,function(e){return[2,f(0)]})})})},editFrame:function(){return d(n)}}};var C=n(52166);let E=function(e){var t=e.frameId,n=e.name,a=e.palette,o=(0,C.A)().enableDebug,i=R({frameId:t,name:n}),s=i.tiles,l=i.deleteFrame,c=i.editFrame,d=i.frameHash,h=i.imageStartLine,f=i.usage;return s?(0,r.jsx)(g.A,{selectionText:"",title:n,subheader:"(".concat(t,") ").concat(f?"Used ".concat(f," times"):"Not used"),wrapperProps:{onClick:c,disableRipple:!0,sx:{display:"block",width:"100%",textAlign:"left"}},contextMenuComponent:v,contextMenuProps:{deleteFrame:l,editFrame:c},media:s.length?(0,r.jsx)(H.A,{lockFrame:!1,invertPalette:!1,palette:a,imageStartLine:h,tiles:s}):(0,r.jsx)(_.A,{}),content:o&&(0,r.jsx)(u.A,{text:d})}):null};var N=n(84131),k=n(53664),L=n(69229),G=n(693),B=n(60376),P=n(56491),V=n(44116),D=n(17419),O=n(83936),Y=function(e,t){var n,r=e.find(function(e){return e.id===t});return r?r.id:(null==(n=e[0])?void 0:n.id)||""};let W=function(){var e,t=(0,C.A)(),n=t.enableDebug,r=t.savFrameTypes,a=t.activePalette,o=(0,F.h)(),i=o.frames,s=o.palettes,l=o.frameGroups,u=o.addFrames,d=o.updateFrameGroups,h=(0,z.g)().updateLastSyncLocalNow,f=(0,O.W)().downloadSettings,p=s.find(function(e){return e.shortName===a})||s[0],m=(0,P.A)(i,l),v=(0,b._)((0,c.useState)([]),2),g=v[0],H=v[1],_=(0,b._)((0,c.useState)(Y(m,r)),2),y=_[0],j=_[1];(0,c.useEffect)(function(){y?H((0,V.d)(i,y)):H([])},[i,y]),(0,c.useEffect)(function(){if(""===y){var e=Y(m,r);""!==e&&j(e)}},[m,i,r,y]);var w=m.find(function(e){return e.id===y})||m[0],S=(e=(0,A._)(function(){return(0,x.YH)(this,function(e){switch(e.label){case 0:var t;return[4,Promise.all(i.map((t=(0,A._)(function(e){var t,n,r,a,o;return(0,x.YH)(this,function(i){switch(i.label){case 0:return[4,(0,M.mZ)(e.hash)];case 1:if(!(t=i.sent()))return[2,e];return n=t.upper.length/20,r=(0,D.L2)(t),[4,(0,M.Bf)(r,n)];case 2:if(a=i.sent().dataHash,e.hash===a)return[2,e];return[4,(0,M.R_)(r,n)];case 3:return o=i.sent(),[2,(0,B._)((0,G._)({},e),{hash:o})]}})}),function(e){return t.apply(this,arguments)})))];case 1:return u(e.sent()),[2]}})}),function(){return e.apply(this,arguments)});return{selectedFrameGroup:y,groupFrames:g,setSelectedFrameGroup:j,frameGroups:m,exportJson:function(e){return f(e,y)},palette:null==p?void 0:p.palette,setActiveFrameGroupName:function(e){d([(0,B._)((0,G._)({},w),{name:e})]),h()},activeFrameGroup:w,convertFormat:S,enableDebug:n}},T=function(){var e=W(),t=e.frameGroups,n=e.selectedFrameGroup,c=e.setSelectedFrameGroup,u=e.palette,d=e.groupFrames,h=e.exportJson,f=e.setActiveFrameGroupName,p=e.activeFrameGroup,m=e.convertFormat,v=e.enableDebug;return(0,r.jsxs)(s.default,{direction:"column",gap:4,children:[(0,r.jsx)(l.default,{label:"Edit Framegroup",size:"small",select:!0,value:n,onChange:function(e){c(e.target.value)},children:t.map(function(e){var t=e.id,n=e.name;return(0,r.jsx)(i.default,{value:t,children:n},t)})}),p&&(0,r.jsx)(l.default,{label:"Rename Framegroup",size:"small",type:"text",onChange:function(e){return f(e.target.value)},value:p.name||""}),(0,r.jsxs)(s.default,{direction:"column",gap:2,children:[(0,r.jsx)(k.A,{}),(0,r.jsx)(N.A,{children:null==d?void 0:d.map(function(e){return(0,r.jsx)(E,{frameId:e.id,name:e.name,palette:u},"frame-".concat(e.id))})})]}),(0,r.jsxs)(o.default,{variant:"contained",fullWidth:!0,children:[(0,r.jsx)(a.default,{onClick:function(){return h(L.m.FRAMES)},children:"Export frames"}),(0,r.jsx)(a.default,{onClick:function(){return h(L.m.CURRENT_FRAMEGROUP)},children:"Export current framegroup (".concat(n,")")}),v?(0,r.jsx)(a.default,{onClick:m,children:"Convert frames to new format"}):null]})]})}},99451:(e,t,n)=>{"use strict";n.d(t,{N:()=>a});var r=n(577),a=function(e,t){return t?(0,r._)(e).concat([t]):e}}},e=>{var t=t=>e(e.s=t);e.O(0,[4453,700,7859,7271,4831,6139,5394,3313,7642,9758,8449,1487,5123,3611,4766,1760,3936,3416,8441,1684,7358],()=>t(26795)),_N_E=e.O()}]);