(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[7437],{1470:(e,t,n)=>{"use strict";n.d(t,{t:()=>r,z:()=>u});var r="ROOT",u=function(){return{id:r,slug:"",created:"",title:"Home",coverImage:"",images:[],groups:[],tags:[]}}},1607:(e,t,n)=>{"use strict";n.d(t,{D:()=>p,EnvProvider:()=>g});var r=n(97004),u=n(693),o=n(60376),i=n(62570),a=n(39249),s=n(95155),l=n(12115),c=n(52166),f=n(75380),d=(0,l.createContext)(null),p=function(){return(0,l.useContext)(d)},g=function(e){var t=e.children,n=(0,i._)((0,l.useState)(null),2),p=n[0],g=n[1],h=(0,c.A)().setPrinterUrl;return(0,l.useEffect)(function(){var e=["/gb-printer-web","/env.json"].filter(Boolean).join("/");e&&(0,r._)(function(){var t,n,r,i;return(0,a.YH)(this,function(a){switch(a.label){case 0:return a.trys.push([0,5,,6]),[4,(0,f.ZU)()];case 1:return a.sent(),[4,fetch(e)];case 2:return[4,a.sent().json()];case 3:return t=a.sent(),r=[(0,u._)({},t)],i={},[4,f.mU.driver()];case 4:return"esp8266"===(n=o._.apply(void 0,r.concat([(i.localforage=a.sent(),i)]))).env&&h("/"),g(n),[3,6];case 5:return a.sent(),g({version:"0.0.0",maximages:0,localforage:"error",env:"error",fstype:"-",bootmode:"-",oled:!1}),[3,6];case 6:return[2]}})})()},[h]),(0,s.jsx)(d.Provider,{value:p,children:t})}},5687:(e,t,n)=>{"use strict";n.d(t,{A:()=>r});let r=n(14810).A},7119:(e,t,n)=>{"use strict";n.d(t,{NavigationToolsProvider:()=>g,g:()=>h});var r=n(95155),u=n(12115),o=n(62570),i=n(35695),a=n(95939),s=n(71620),l=n(52166),c=n(1470),f=n(66785),d=function(){var e=(0,i.useRouter)(),t=(0,a.Z)(),n=t.paths,r=t.root,d=t.isWorking,p=t.path,g=t.getUrl,h=(0,o._)((0,u.useState)(!1),2),v=h[0],m=h[1],I=(0,s.A)(),_=I.sortBy,w=I.filtersActiveTags,E=I.recentImports,T=(0,l.A)().pageSize,b=(0,u.useCallback)(function(e){return(0,f.S)(e,{filtersActiveTags:w,sortBy:_,recentImports:E})},[w,E,_]),x=(0,u.useCallback)(function(e,t){return Math.floor(b(t.images).findIndex(function(t){return t.hash===e})/T)},[b,T]),S=(0,u.useCallback)(function(e,t){var r;return e===c.t?g({pageIndex:t,group:""}):g({pageIndex:t,group:(null==(r=n.find(function(t){return e===t.group.id}))?void 0:r.absolutePath)||""})},[g,n]),P=(0,u.useMemo)(function(){var e;return(null==(e=n.find(function(e){return e.absolutePath===p}))?void 0:e.group)||r},[p,n,r]),A=(0,u.useCallback)(function(e){var t=n.find(function(t){return t.group.images.map(function(e){return e.hash}).includes(e)}),u=(null==t?void 0:t.absolutePath)||"";return g({pageIndex:x(e,(null==t?void 0:t.group)||r),group:u})},[x,g,n,r]),C=(0,u.useCallback)(function(e,t){d||window.setTimeout(function(){m({group:{id:e,pageIndex:t}})},1)},[d]),G=(0,u.useCallback)(function(e){window.setTimeout(function(){m({imageHash:e})},1)},[]);return(0,u.useEffect)(function(){if(!d&&v){var t=window.setTimeout(function(){v.imageHash?(e.push(A(v.imageHash)),m(!1)):v.group&&(e.push(S(v.group.id,v.group.pageIndex)),m(!1))},1);return function(){window.clearTimeout(t)}}},[S,A,d,e,v]),{currentGroup:P,getGroupPath:S,getImagePageIndexInGroup:x,navigateToGroup:C,navigateToImage:G}},p=(0,u.createContext)(null);function g(e){var t=e.children,n=d();return(0,r.jsx)(p.Provider,{value:n,children:t})}var h=function(){var e=(0,u.useContext)(p);if(!e)throw Error("useNavigationToolsContext must be used within an NavigationToolsProvider");return e}},9700:(e,t,n)=>{"use strict";n.d(t,{A:()=>r});let r=n(22550).A},14810:(e,t,n)=>{"use strict";function r(e){return e&&e.ownerDocument||document}n.d(t,{A:()=>r})},21329:(e,t,n)=>{"use strict";n.d(t,{A:()=>r});let r=n(43430).A},22550:(e,t,n)=>{"use strict";function r(e,t=166){let n;function u(...r){clearTimeout(n),n=setTimeout(()=>{e.apply(this,r)},t)}return u.clear=()=>{clearTimeout(n)},u}n.d(t,{A:()=>r})},23747:(e,t,n)=>{"use strict";n.d(t,{Ay:()=>T,BF:()=>_,Ll:()=>I});var r=n(97004),u=n(693),o=n(60376),i=n(62570),a=n(39249),s=n(30832),l=n.n(s),c=n(12115),f=n(5432),d=n(95939),p=n(7119),g=n(3381),h=n(71620),v=n(11760),m=n(80360),I="NEW_GROUP",_=function(e){return e.trim().replace(/[^A-Z0-9_-]+/gi,"_").toLowerCase()},w=function(e,t){return e.find(function(e){return e.group.groups.find(function(e){return e.id===t})})||null},E=function(e){return e.CREATE_NEW="CREATE_NEW",e.EDIT_EXISTING="EDIT_EXISTING",e.NOT_EDITING="NOT_EDITING",e}(E||{});let T=function(){var e,t=(0,h.A)().imageSelection,n=(0,g.A)(),s=n.editImageGroup,E=n.cancelEditImageGroup,T=(0,v.h)(),b=T.imageGroups,x=T.addImageGroup,S=T.updateImageGroup,P=T.groupImagesAdd,A=T.ungroupImages,C=(0,p.g)(),G=C.navigateToGroup,y=C.navigateToImage,N=(0,d.Z)(),k=N.path,j=N.view,M=N.paths,D=N.pathsOptions,R=t.length,H=(null==s?void 0:s.groupId)?s.groupId===I?"CREATE_NEW":"EDIT_EXISTING":"NOT_EDITING",O=(0,c.useMemo)(function(){switch(H){case"CREATE_NEW":var e=(null==s?void 0:s.newGroupTitle)||"";return{imageGroup:null,parentPathMap:M.find(function(e){return e.group.id===j.id})||null,title:e,slug:_(e),slugTouched:!1};case"EDIT_EXISTING":var t=b.find(function(e){return e.id===(null==s?void 0:s.groupId)})||null;return{imageGroup:t,parentPathMap:(null==s?void 0:s.groupId)?w(M,s.groupId):null,title:(null==t?void 0:t.title)||"",slug:(null==t?void 0:t.slug)||"",slugTouched:!0};default:return{imageGroup:null,parentPathMap:null,title:"",slug:"",slugTouched:!1}}},[s,H,b,M,j]),L=(0,i._)((0,c.useState)(O.title),2),W=L[0],U=L[1],Y=(0,i._)((0,c.useState)(O.slug),2),B=Y[0],F=Y[1],q=(0,i._)((0,c.useState)(O.slugTouched),2),z=q[0],X=q[1],Z=(0,i._)((0,c.useState)((null==(e=O.parentPathMap)?void 0:e.absolutePath)||""),2),V=Z[0],K=Z[1],$=(0,c.useMemo)(function(){if(!(null==s?void 0:s.groupId))return"";if((null==s?void 0:s.groupId)===I)return"".concat(k).concat(B,"/");var e=w(M,s.groupId),t=(null==e?void 0:e.absolutePath)||"";return"".concat(t).concat(B,"/")},[s,M,k,B]),J=(0,c.useMemo)(function(){return!!M.find(function(e){return e.absolutePath===$})},[$,M]),Q=(0,c.useMemo)(function(){var e;return B!==(null==(e=O.imageGroup)?void 0:e.slug)},[O,B]),ee=(0,c.useMemo)(function(){return!!B&&("CREATE_NEW"===H?!J:"EDIT_EXISTING"===H&&(!Q||!J))},[H,B,J,Q]),et=(0,c.useMemo)(function(){var e,t,n=(null==(e=M.find(function(e){return e.absolutePath===V}))?void 0:e.group.id)||"";return((null==(t=O.parentPathMap)?void 0:t.group.id)||"")!==n},[O,V,M]),en=(0,c.useMemo)(function(){switch(H){case"EDIT_EXISTING":var e,t=(null==(e=M.find(function(e){return e.group.id===(null==s?void 0:s.groupId)}))?void 0:e.absolutePath)||"";return D.filter(function(e){var n=e.value;return!n.startsWith($)&&n!==t});case"CREATE_NEW":return D;default:return[]}},[$,s,H,M,D]);return{editId:(null==s?void 0:s.groupId)||null,absoluteSlug:$,possibleParents:en,slug:B,title:W,canConfirm:ee,canMove:et,slugIsInUse:J,slugWasChanged:Q,parentSlug:V,selectionCount:R,setSlug:function(e){F(e),X(!0)},setTitle:function(e){U(e),(e.length<2||!z)&&(X(!1),F(_(e)))},setParentSlug:K,confirm:function(){if(E(),ee&&s){var e,n=(null==(e=M.find(function(e){return e.absolutePath===V}))?void 0:e.group.id)||"";if(s.groupId===I){if(!s.newGroupCover)return;var r=(0,m.z)();x({id:r,slug:B,title:W,created:l()(Date.now()).format(f.i$),coverImage:s.newGroupCover,images:t,groups:[]},n),G(r,0)}else{if(!O.imageGroup)return;S((0,o._)((0,u._)({},O.imageGroup),{slug:B,title:W}),n),G(s.groupId,0)}}},move:(0,r._)(function(){var e,n;return(0,a.YH)(this,function(r){return E(),et&&((n=(null==(e=M.find(function(e){return e.absolutePath===V}))?void 0:e.group.id)||"")?P(n,t):A(t),y(t[0])),[2]})}),cancelEditImageGroup:E}}},29032:(e,t,n)=>{"use strict";n.d(t,{j:()=>i});var r=n(62570),u=n(35695),o=n(12115),i=function(){var e=(0,u.usePathname)(),t=(0,r._)((0,o.useState)(window.location.search),2),n=t[0],i=t[1],a=(0,o.useMemo)(function(){return new URLSearchParams(n)},[n]);(0,o.useEffect)(function(){var e=function(){window.setTimeout(function(){i(function(e){return window.location.search!==e?window.location.search:e})},1)};e(),window.addEventListener("popstate",e);var t=history.pushState,n=history.replaceState;return history.pushState=function(){for(var n=arguments.length,r=Array(n),u=0;u<n;u++)r[u]=arguments[u];t.apply(this,r),e()},history.replaceState=function(){for(var t=arguments.length,r=Array(t),u=0;u<t;u++)r[u]=arguments[u];n.apply(this,r),e()},function(){window.removeEventListener("popstate",e),history.pushState=t,history.replaceState=n}},[a,e]);var s=(0,o.useMemo)(function(){return a.toString()},[a]);return{fullPath:(0,o.useMemo)(function(){return s?"".concat(e,"?").concat(s):e},[e,s]),pathname:e,query:s,searchParams:a}}},31178:(e,t,n)=>{"use strict";n.d(t,{A:()=>u});var r=n(14810);function u(e){return(0,r.A)(e).defaultView||window}},32134:(e,t,n)=>{"use strict";n.d(t,{GalleryTreeContext:()=>g,K:()=>p});var r=n(62570),u=n(95155),o=n(7062),i=n(12115),a=n(29032),s=n(46498),l=n(11760),c=n(52166),f=n(1470),d="/gallery/",p=(0,i.createContext)({root:(0,f.z)(),view:(0,f.z)(),images:[],covers:[],paths:[],pathsOptions:[],isWorking:!1,pageIndex:0,path:"",lastGalleryLink:"",getUrl:function(){return"".concat(d,"?page=1")}});function g(e){var t=e.children,g=(0,r._)((0,i.useState)(!0),2),h=g[0],v=g[1],m=(0,r._)((0,i.useState)((0,f.z)()),2),I=m[0],_=m[1],w=(0,r._)((0,i.useState)([]),2),E=w[0],T=w[1],b=(0,r._)((0,i.useState)([]),2),x=b[0],S=b[1],P=(0,a.j)(),A=P.searchParams,C=P.pathname,G=(0,r._)((0,i.useState)(""),2),y=G[0],N=G[1],k=(0,c.A)(),j=k.enableImageGroups,M=k.enableDebug,D=(0,s.A)().setError,R=(0,l.h)(),H=R.imageGroups,O=R.images,L=R.setImageGroups,W=(0,i.useMemo)(function(){return j?H:[]},[j,H]);(0,i.useEffect)(function(){var e=new Worker(n.tu(new URL(n.p+n.u(2819),n.b)),{type:void 0}),t=(0,o.LV)(e),r=[],u=(0,o.BX)(function(e){r.push(e)});return v(!0),t.calculate({imageGroups:W,stateImages:O},u).then(function(e){if(_(e.root),T(e.paths),S(e.pathsOptions),r.length&&D(Error(r.join("\n"))),j&&H.length>e.paths.length){var t=e.paths.map(function(e){return e.group.id});L(H.filter(function(e){var n=e.id;return t.includes(n)}))}M&&console.info("worker ran for ".concat(e.duration.toFixed(2),"ms"))}).catch(function(e){console.error(e),D(e)}).finally(function(){v(!1),e.terminate()}),function(){e.terminate(),v(!1)}},[M,j,W,D,L,H,O]);var U=(0,i.useMemo)(function(){var e;return parseInt(null!=(e=A.get("page"))?e:"1",10)-1},[A]),Y=(0,i.useMemo)(function(){return A.get("group")||""},[A]),B=(0,i.useCallback)(function(e){var t="number"==typeof e.pageIndex?e.pageIndex:U,n="string"==typeof e.group?e.group:Y,r="".concat(d,"?page=").concat(t+1);return n.length&&(r="".concat(r,"&group=").concat(encodeURIComponent(n))),r},[U,Y]);(0,i.useEffect)(function(){C===d&&N(B({pageIndex:U,group:Y}))},[Y,U,C,B]);var F=(0,i.useMemo)(function(){var e,t=(null==(e=E.find(function(e){return e.absolutePath===Y}))?void 0:e.group)||I,n=t.groups.map(function(e){return e.coverImage}),r=t.images.filter(function(e){return!n.includes(e.hash)});return{view:t,covers:n,paths:E,images:r,pathsOptions:x,root:I,isWorking:h,pageIndex:U,path:Y,lastGalleryLink:y,getUrl:B}},[E,I,x,h,U,Y,y,B]);return(0,u.jsx)(p.Provider,{value:F,children:t})}},32299:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>l,useRtl:()=>s});var r=n(693),u=n(37414),o=n(12115),i=n(95155),a=o.createContext(),s=function(){var e=o.useContext(a);return null!=e&&e};let l=function(e){var t=e.value,n=(0,u._)(e,["value"]);return(0,i.jsx)(a.Provider,(0,r._)({value:null==t||t},n))}},34742:(e,t,n)=>{"use strict";n.d(t,{A:()=>r});let r=n(31178).A},38584:(e,t,n)=>{Promise.resolve().then(n.bind(n,91128))},50422:(e,t,n)=>{"use strict";n.d(t,{A:()=>c});var r=n(693),u=n(60376),o=n(37414),i=n(81616),a=n(13051),s=n(56501),l=n(89602);let c=function(e){var t,n=e.elementType,c=e.externalSlotProps,f=e.ownerState,d=e.skipResolvingSlotProps,p=(0,o._)(e,["elementType","externalSlotProps","ownerState","skipResolvingSlotProps"]),g=void 0!==d&&d?{}:(0,l.A)(c,f),h=(0,s.A)((0,u._)((0,r._)({},p),{externalSlotProps:g})),v=h.props,m=h.internalRef,I=(0,i.A)(m,null==g?void 0:g.ref,null==(t=e.additionalProps)?void 0:t.ref);return(0,a.A)(n,(0,u._)((0,r._)({},v),{ref:I}),f)}},53267:(e,t,n)=>{"use strict";n.d(t,{default:()=>l});var r=n(67908),u=n(34084),o=n(69077),i=n(54107),a=(0,n(55170).A)("MuiBox",["root"]),s=(0,o.A)();let l=(0,r.default)({themeId:i.A,defaultTheme:s,defaultClassName:a.root,generateClassName:u.A.generate})},61564:(e,t,n)=>{"use strict";n.d(t,{t:()=>g});var r=n(97004),u=n(39249),o=n(12115),i=n(33236),a=n(39630),s=n(95939),l=n(23747),c=n(41186),f=n(3381),d=n(71620),p=n(11760),g=function(){var e=(0,s.Z)().view,t=(0,c.A)(),n=t.dismissDialog,g=t.setDialog,h=(0,f.A)().setEditImageGroup,v=(0,p.h)(),m=v.deleteImageGroup,I=v.setImageGroups,_=v.images,w=(0,d.A)().imageSelection,E=(0,o.useMemo)(function(){if(!w.length)return"";var e,t=_.filter(function(e){var t=e.hash;return w.includes(t)}).map(function(e){return e.title}).filter(function(e){return e.length>3}),n=null==(e=(0,i.Hg)(t).filter(function(e){return e.length>3})[0])?void 0:e.trim();return n?n.replace(/[_-]/g," ").replace(/^\s*\d+\s+|\s+\d+\s*$/g,"").trim():"New Group"},[w,_]);return{resetGroups:function(){g({message:"Reset image groups?",questions:function(){return[{key:"info",type:a.V.INFO,label:"This will remove ALL your created groups and all existing images will be moved to the top level."}]},confirm:(0,r._)(function(){return(0,u.YH)(this,function(e){return n(0),I([]),[2]})}),deny:(0,r._)(function(){return(0,u.YH)(this,function(e){return n(0),[2]})})})},createGroup:function(e){h({groupId:l.Ll,newGroupCover:e,newGroupTitle:E})},editGroup:function(e){h({groupId:e})},deleteGroup:function(t){var o=e.groups.find(function(e){return e.id===t});o&&g({message:"Delete image group?",questions:function(){return[{key:"info",type:a.V.INFO,label:'This will delete this group "'.concat(o.title||o.slug,'" and move all children (images & groups) to the current level.')}]},confirm:(0,r._)(function(){return(0,u.YH)(this,function(e){return n(0),m(t),[2]})}),deny:(0,r._)(function(){return(0,u.YH)(this,function(e){return n(0),[2]})})})}}}},67908:(e,t,n)=>{"use strict";n.d(t,{default:()=>d});var r=n(693),u=n(37414),o=n(12115),i=n(52596),a=n(46879),s=n(13184),l=n(5300),c=n(64330),f=n(95155);function d(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.themeId,n=e.defaultTheme,d=e.defaultClassName,p=void 0===d?"MuiBox-root":d,g=e.generateClassName,h=(0,a.default)("div",{shouldForwardProp:function(e){return"theme"!==e&&"sx"!==e&&"as"!==e}})(s.A);return o.forwardRef(function(e,o){var a=(0,c.default)(n),s=(0,l.A)(e),d=s.className,v=s.component,m=(0,u._)(s,["className","component"]);return(0,f.jsx)(h,(0,r._)({as:void 0===v?"div":v,ref:o,className:(0,i.A)(d,g?g(p):p),theme:t&&a[t]||a},m))})}},80360:(e,t,n)=>{"use strict";n.d(t,{z:()=>r});var r=n(51368).A},91128:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>Y});var r=n(95155),u=n(53267),o=n(7068),i=n(700),a=n(12115),s=n(1607);let l=function(){var e=(0,s.D)(),t=(0,a.useMemo)(function(){return e?["Web-App version: ".concat("master"),"Web-App branch: ".concat("1.49.1"),"Printer version: ".concat(e.version),"Max Images: ".concat(e.maximages),"Localforage driver: ".concat(e.localforage),"Environment type: ".concat(e.env),"Compiled Filesystem: ".concat(e.fstype),"Compiled Bootmode: ".concat(e.bootmode),"Compiled for OLED: ".concat(e.oled?"yes":"no")]:[]},[e]);return(0,r.jsx)(o.default,{component:"ul",direction:"column",children:t.map(function(e){return(0,r.jsx)(i.default,{component:"li",variant:"caption",color:"textDisabled",align:"right",lineHeight:1.25,children:e},e)})})};var c=n(7642),f=n(61487),d=n(69229),p=n(61564),g=n(83936),h=n(97004),v=n(62570),m=n(39249),I=function(e){return e.PERSISTED="persisted",e.NOT_PERSISTED="not-persisted",e.FAILED="failed",e.NO_API="no_api",e}({}),_=!!("undefined"!=typeof navigator&&navigator.storage&&navigator.storage.persist),w=function(){var e=(0,h._)(function(e){return(0,m.YH)(this,function(t){switch(t.label){case 0:if(!_)return[3,2];return[4,navigator.storage.persisted()];case 1:return e(t.sent()?"persisted":"not-persisted"),[3,3];case 2:e("no_api"),t.label=3;case 3:return[2]}})});return function(t){return e.apply(this,arguments)}}(),E=function(){var e=(0,h._)(function(e){return(0,m.YH)(this,function(t){switch(t.label){case 0:if(!_)return[3,2];return[4,navigator.storage.persist()];case 1:return e(t.sent()?"persisted":"failed"),[3,3];case 2:e("no_api"),t.label=3;case 3:return[2]}})});return function(t){return e.apply(this,arguments)}}();let T=function(){var e,t=(0,v._)((0,a.useState)("not-persisted"),2),n=t[0],r=t[1];return(0,a.useEffect)(function(){w(r)},[]),{persistAPIAvailable:_,persisted:n,requestPersist:(e=(0,h._)(function(){return(0,m.YH)(this,function(e){return E(r),[2]})}),function(){return e.apply(this,arguments)})}};var b=n(86447),x=n(693),S=n(60376),P=n(633),A=n(11760),C=n(55364),G=n(5847),y=n(72623),N=function(){var e=(0,h._)(function(e,t,n){var r;return(0,m.YH)(this,function(u){switch(u.label){case 0:return[4,(0,G.T)(e,t)(n,!1)];case 1:if(!(r=u.sent()))return[2,null];return[4,(0,y.cg)(r)];case 2:if(u.sent().dataHash!==n)return[2,(0,y.UN)(r)];return[2,null]}})});return function(t,n,r){return e.apply(this,arguments)}}();let k=function(){var e=(0,A.h)(),t=e.frames,r=e.images,u=(0,P.g)().updateImageHash,o=(0,v._)((0,a.useState)(!0),2),i=o[0],s=o[1];return window.enableHashCleanup=function(){return s(!1)},{cleanupBusy:i,hashCleanup:(0,h._)(function(){var e,o,i;return(0,m.YH)(this,function(a){switch(a.label){case 0:return s(!0),e=0,o=0,[4,Promise.resolve().then(n.t.bind(n,52491,23))];case 1:var l;return i=a.sent().default,[4,Promise.all(r.map((l=(0,h._)(function(n){var a,s,l,c,f;return(0,m.YH)(this,function(d){switch(d.label){case 0:var p;if(a=n.hash,!(0,C.pl)(n))return[3,2];return[4,Promise.all(Object.keys(s=n.hashes).map((p=(0,h._)(function(e){var n,u;return(0,m.YH)(this,function(o){switch(o.label){case 0:if(n=s[e],u=null,!n)return[3,2];return[4,N(r,t,n)];case 1:u=o.sent(),o.label=2;case 2:return[2,(0,b._)({},e,u||n)]}})}),function(e){return p.apply(this,arguments)})))];case 1:return(c=i(l=d.sent().reduce(function(e,t){return(0,x._)({},e,t)},{})))!==a&&(e+=1,u(a,(0,S._)((0,x._)({},n),{hash:c,hashes:l}))),[3,4];case 2:return[4,N(r,t,a)];case 3:(f=d.sent())&&(o+=1,u(a,(0,S._)((0,x._)({},n),{hash:f}))),d.label=4;case 4:return[2]}})}),function(e){return l.apply(this,arguments)})))];case 2:return a.sent(),s(!1),console.info({iCounterRGBN:e,iCounterMono:o}),[2]}})})}};var j=function(e){switch(e){case I.PERSISTED:return"Storage is persistent";case I.NOT_PERSISTED:return"Request storage persistence";case I.NO_API:return"Persistance API not available";case I.FAILED:default:return"Failed to persist storage"}};let M=function(){var e=k(),t=e.hashCleanup,n=e.cleanupBusy,u=(0,g.W)().downloadSettings,o=(0,p.t)().resetGroups,i=function(e){return u(e)},a=T(),s=a.persisted,l=a.requestPersist;return(0,r.jsxs)(f.default,{variant:"contained",fullWidth:!0,children:[(0,r.jsx)(c.default,{disabled:s!==I.NOT_PERSISTED,onClick:l,children:j(s)}),(0,r.jsx)(c.default,{onClick:o,children:"Reset image groups"}),(0,r.jsx)(c.default,{onClick:function(){return i(d.m.ALL)},children:"Export Everything"}),(0,r.jsx)(c.default,{onClick:function(){return i(d.m.PLUGINS)},children:"Export Plugins"}),(0,r.jsx)(c.default,{disabled:n,onClick:t,children:"Hash Cleanup"})]})};var D=n(18096),R=n(53369),H=n(6874),O=n.n(H),L=n(35695),W=n(99451);let U=function(){var e=(0,L.usePathname)(),t=(0,s.D)(),n=(0,a.useMemo)(function(){return[{path:"/settings/generic/",headline:"Generic Settings",prefetch:!0},{path:"/settings/dropbox/",headline:"Dropbox Settings",prefetch:!1},(null==t?void 0:t.env)==="esp8266"||(null==t?void 0:t.env)==="webpack-dev"?{path:"/settings/wifi/",headline:"WiFi Settings",prefetch:!1}:null,{path:"/settings/plugins/",headline:"Plugin Settings",prefetch:!1},{path:"/settings/git/",headline:"Git Settings",prefetch:!1}].reduce(W.N,[])},[t]),u=(0,a.useMemo)(function(){return n.length&&"/settings"!==e?e:null},[e,n]);return u?(0,r.jsx)(R.default,{value:u,children:n.map(function(e){var t=e.headline,n=e.path,u=e.prefetch;return(0,r.jsx)(D.default,{label:t,component:O(),href:n,prefetch:u,value:n},n)})}):null};function Y(e){var t,n,s,c=e.children,f=(n=(t=(0,v._)((0,a.useState)(!1),2))[0],s=t[1],(0,a.useEffect)(function(){if("function"==typeof window.requestIdleCallback){var e=requestIdleCallback(function(){return s(!0)});return function(){window.cancelIdleCallback(e)}}var t=window.setTimeout(function(){return s(!0)},1e3);return function(){window.clearTimeout(t)}},[]),n);return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(i.default,{component:"h1",variant:"h1",children:"Settings"}),f&&(0,r.jsxs)(o.default,{direction:"column",gap:4,justifyContent:"space-between",sx:{flexGrow:1},children:[(0,r.jsxs)(o.default,{direction:"column",gap:6,children:[(0,r.jsx)(U,{}),(0,r.jsx)(u.default,{children:c}),(0,r.jsx)(M,{})]}),(0,r.jsx)(l,{})]})]})}},95939:(e,t,n)=>{"use strict";n.d(t,{Z:()=>o});var r=n(12115),u=n(32134),o=function(){return(0,r.useContext)(u.K)}},99451:(e,t,n)=>{"use strict";n.d(t,{N:()=>u});var r=n(577),u=function(e,t){return t?(0,r._)(e).concat([t]):e}}},e=>{var t=t=>e(e.s=t);e.O(0,[4453,700,7859,7271,4831,2491,7642,1487,7103,6874,3678,4297,1760,3936,6950,8441,5955,1684,7358],()=>t(38584)),_N_E=e.O()}]);