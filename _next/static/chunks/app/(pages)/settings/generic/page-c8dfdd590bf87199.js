(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[7500],{806:(e,t,a)=>{"use strict";a.d(t,{A:()=>f});var n=a(86447),r=a(693),l=a(60376),i=a(62570),u=a(12115),s=a(27803),c=a(11760),o=a(52166),d=a(55364);let f=function(){var e=(0,o.A)(),t=e.sortPalettes,a=e.setSortPalettes,f=(0,c.h)().images,m=[{label:"Default (ascending)",value:s.V.DEFAULT_ASC},{label:"Default (descending)",value:s.V.DEFAULT_DESC},{label:"Usage (ascending)",value:s.V.USAGE_ASC},{label:"Usage (descending)",value:s.V.USAGE_DESC},{label:"Name (ascending)",value:s.V.NAME_ASC},{label:"Name (descending)",value:s.V.NAME_DESC}],p=(0,u.useMemo)(function(){return f.reduce(function(e,t){return(0,d.pl)(t)?e:(0,l._)((0,r._)({},e),(0,n._)({},t.palette,(e[t.palette]||0)+1))},{})},[f]),g=(0,u.useCallback)(function(e,a){var n=(0,i._)(t.split("_"),2),r=n[0],l="asc"===n[1]?1:-1;switch(r){case"usage":var u=p[e.shortName]||0,s=p[a.shortName]||0;if(u<s)return -1*l;if(u>s)return l;return 0;case"name":return e.name.localeCompare(a.name)*l;default:return l}},[p,t]);return{sortPalettes:t,setSortPalettes:a,paletteSortOptions:m,paletteUsages:p,sortFn:g}}},1607:(e,t,a)=>{"use strict";a.d(t,{D:()=>m,EnvProvider:()=>p});var n=a(97004),r=a(693),l=a(60376),i=a(62570),u=a(39249),s=a(95155),c=a(12115),o=a(52166),d=a(75380),f=(0,c.createContext)(null),m=function(){return(0,c.useContext)(f)},p=function(e){var t=e.children,a=(0,i._)((0,c.useState)(null),2),m=a[0],p=a[1],g=(0,o.A)().setPrinterUrl;return(0,c.useEffect)(function(){var e=["/gb-printer-web","/env.json"].filter(Boolean).join("/");e&&(0,n._)(function(){var t,a,n,i;return(0,u.YH)(this,function(u){switch(u.label){case 0:return u.trys.push([0,5,,6]),[4,(0,d.ZU)()];case 1:return u.sent(),[4,fetch(e)];case 2:return[4,u.sent().json()];case 3:return t=u.sent(),n=[(0,r._)({},t)],i={},[4,d.mU.driver()];case 4:return"esp8266"===(a=l._.apply(void 0,n.concat([(i.localforage=u.sent(),i)]))).env&&g("/"),p(a),[3,6];case 5:return u.sent(),p({version:"0.0.0",maximages:0,localforage:"error",env:"error",fstype:"-",bootmode:"-",oled:!1}),[3,6];case 6:return[2]}})})()},[g]),(0,s.jsx)(f.Provider,{value:m,children:t})}},4862:(e,t,a)=>{"use strict";a.d(t,{j:()=>n});var n=function(e){return e.GALLERY_VIEW_SMALL="small",e.GALLERY_VIEW_1X="1x",e.GALLERY_VIEW_2X="2x",e.GALLERY_VIEW_MAX="max",e.PALETTE_VIEW="res2x",e}({})},27803:(e,t,a)=>{"use strict";a.d(t,{V:()=>n});var n=function(e){return e.DEFAULT_ASC="default_asc",e.DEFAULT_DESC="default_desc",e.USAGE_ASC="usage_asc",e.USAGE_DESC="usage_desc",e.NAME_ASC="name_asc",e.NAME_DESC="name_desc",e}({})},30461:(e,t,a)=>{"use strict";a.d(t,{A:()=>u});var n=a(95155),r=a(4915),l=a(90835);a(12115);var i=a(52166);let u=function(){var e=(0,i.A)(),t=e.useSerials,a=e.setUseSerials;return(0,n.jsx)(r.default,{label:"Enable WebUSB / Serial ports",control:(0,n.jsx)(l.default,{checked:t,onChange:function(e){a(e.target.checked)}})})}},39893:(e,t,a)=>{"use strict";a.d(t,{C:()=>r,f:()=>n});var n=function(e){return e.WIDER="wider",e.WIDE="wide",e.NORMAL="normal",e.NARROW="narrow",e.NARROWER="narrower",e.EMULATOR="emulator",e}({}),r=[{name:"Wider",baseValues:[0,68,187,255],value:"wider"},{name:"Wide",baseValues:[0,85,170,255],value:"wide"},{name:"Normal",baseValues:[51,102,153,204],value:"normal"},{name:"Narrow",baseValues:[69,115,162,208],value:"narrow"},{name:"Narrower",baseValues:[85,113,141,170],value:"narrower"},{name:"From Emulator",baseValues:[64,144,224,255],value:"emulator"}]},46914:(e,t,a)=>{"use strict";a.d(t,{default:()=>N});var n=a(97004),r=a(62570),l=a(577),i=a(39249),u=a(95155),s=a(27088),c=a(4915),o=a(9943),d=a(31960),f=a(76380),m=a(7068),p=a(90835),g=a(78449),h=a(97644),v=a(3856),E=a(30832),x=a.n(E),b=a(6874),S=a.n(b),_=a(12115),A=a(30461),C=a(81543),y=a(81445),L=a(80498),j=a(1607),k=a(806),D=a(11760),P=a(52166),F=a(49432),T=a(49967),w=a(56491),I={},U=function(e){if("undefined"==typeof document)return!1;if(void 0!==I[e])return I[e];var t=document.createElement("canvas");t.width=2,t.height=2;var a=t.toDataURL("image/".concat(e));return I[e]=0===a.indexOf("data:image/".concat(e,";base64")),I[e]};let N=function(){var e=(0,P.A)(),t=e.enableDebug,E=e.enableImageGroups,b=e.exportFileTypes,I=e.exportScaleFactors,N=e.fileNameStyle,R=e.forceMagicCheck,V=e.galleryClickAction,M=e.handleExportFrame,G=e.hideDates,W=e.importDeleted,O=e.importLastSeen,B=e.importPad,H=e.pageSize,z=e.preferredLocale,Y=e.printerParams,K=e.printerUrl,Q=e.savFrameTypes,X=e.setExportFileTypes,q=e.setExportScaleFactors,Z=e.setEnableDebug,J=e.setEnableImageGroups,$=e.setFileNameStyle,ee=e.setForceMagicCheck,et=e.setGalleryClickAction,ea=e.setHandleExportFrame,en=e.setHideDates,er=e.setImportDeleted,el=e.setImportLastSeen,ei=e.setImportPad,eu=e.setPageSize,es=e.setPreferredLocale,ec=e.setSavFrameTypes,eo=e.setPrinterParams,ed=e.setPrinterUrl,ef=(0,j.D)(),em=(0,D.h)(),ep=em.frames,eg=em.frameGroups,eh=em.imageGroups,ev=(0,w.A)(ep,eg),eE=(0,r._)((0,_.useState)(H.toString(10)),2),ex=eE[0],eb=eE[1],eS=(0,r._)((0,_.useState)(K),2),e_=eS[0],eA=eS[1],eC=(0,r._)((0,_.useState)(Y),2),ey=eC[0],eL=eC[1],ej=(0,r._)((0,_.useState)(["txt","pgm"]),2),ek=ej[0],eD=ej[1],eP=(0,r._)((0,_.useState)("Example date format:"),2),eF=eP[0],eT=eP[1],ew=(0,r._)((0,_.useState)([]),2),eI=ew[0],eU=ew[1],eN=(0,r._)((0,_.useState)(x()()),1)[0],eR=(0,k.A)(),eV=eR.sortPalettes,eM=eR.setSortPalettes,eG=eR.paletteSortOptions;return(0,_.useEffect)(function(){var e;eD((0,l._)(["jpeg","jpg","png","webp","bmp","gif"].filter(function(e){return U(e)})).concat(["txt","pgm"])),(e=(0,n._)(function(){return(0,i.YH)(this,function(e){switch(e.label){case 0:return[4,a.e(7543).then(a.t.bind(a,72761,23))];case 1:return eU(e.sent().default.all.filter(function(e){var t=e.tag;try{return(0,T.A)(x()(),t),!0}catch(e){return!1}})),[2]}})}),function(){return e.apply(this,arguments)})()},[]),(0,_.useEffect)(function(){eT("Example date format: ".concat((0,T.A)(eN,z)))},[eN,z]),(0,u.jsxs)(m.default,{direction:"column",gap:6,children:[(0,u.jsx)(g.default,{id:"settings-pagesize",label:"Gallery page size",type:"text",helperText:"Set to 0 to disable pagination - might cause performance issues on large sets of images",value:ex,onChange:function(e){return eb(e.target.value)},onBlur:function(){var e=Math.abs(parseInt(ex,10)||0);eu(e),eb(e.toString(10))}}),(0,u.jsx)(g.default,{value:V,label:"Click behaviour for gallery images",select:!0,helperText:"Ctrl+Click and Shift+Click will always select/range-select",onChange:function(e){et(e.target.value)},children:L.s.map(function(e){var t=e.value,a=e.label;return(0,u.jsx)(f.default,{value:t,children:a},t)})}),(0,u.jsxs)(s.default,{children:[(0,u.jsx)(o.default,{shrink:!0,children:"Image export dimensions"}),(0,u.jsx)(v.default,{fullWidth:!0,value:I,onChange:function(e,t){q(t)},children:[1,2,3,4,5,6,8,10].map(function(e){return(0,u.jsx)(h.default,{value:e,title:"".concat(160*e,"\xd7").concat(144*e),children:"".concat(e,"\xd7")},e)})})]}),(0,u.jsxs)(s.default,{children:[(0,u.jsx)(o.default,{shrink:!0,children:"Image export filetypes"}),(0,u.jsx)(v.default,{fullWidth:!0,value:b,onChange:function(e,t){X(t)},children:ek.map(function(e){return(0,u.jsx)(h.default,{value:e,title:e,children:e},e)})})]}),(0,u.jsx)(g.default,{id:"settings-handle-export-frames",value:M,label:"How to handle frames when exporting images",select:!0,onChange:function(e){ea(e.target.value)},children:C.A.map(function(e){var t=e.id,a=e.name;return(0,u.jsx)(f.default,{value:t,children:a},t)})}),(0,u.jsx)(g.default,{id:"settings-filename-style",value:N,label:"Filename style",select:!0,onChange:function(e){$(e.target.value)},children:y.y.map(function(e){var t=e.id,a=e.name;return(0,u.jsx)(f.default,{value:t,children:a},t)})}),(0,u.jsxs)(g.default,{id:"settings-sav-frames",value:ev.length?Q:"",disabled:!ev.length,label:"Frames to be applied when importing Cartridge dumps",select:!0,slotProps:{inputLabel:{shrink:!0},select:{renderValue:function(e){var t;return""===e?"None":(null==(t=ev.find(function(t){return t.id===e}))?void 0:t.name)||"Unknown"}}},onChange:function(e){ec(e.target.value)},placeholder:"None",children:[(0,u.jsx)(f.default,{value:"",selected:!Q,children:"None"}),ev.map(function(e){var t=e.id,a=e.name;return(0,u.jsx)(f.default,{value:t,children:a},t)})]}),(0,u.jsx)(c.default,{label:"Import ‘last seen’ image when importing Cartridge dumps",control:(0,u.jsx)(p.default,{checked:O,onChange:function(e){el(e.target.checked)}})}),(0,u.jsx)(c.default,{label:"Import deleted images when importing Cartridge dumps",control:(0,u.jsx)(p.default,{checked:W,onChange:function(e){er(e.target.checked)}})}),(0,u.jsx)(c.default,{label:"Force valid .sav file when importing",control:(0,u.jsx)(p.default,{checked:R,onChange:function(e){ee(e.target.checked)}})}),(0,u.jsx)(c.default,{label:"Pad images up to 144px height on import",control:(0,u.jsx)(p.default,{checked:B,onChange:function(e){ei(e.target.checked)}})}),(0,u.jsx)(c.default,{label:"Hide dates in gallery",control:(0,u.jsx)(p.default,{checked:G,onChange:function(e){en(e.target.checked)}})}),(0,u.jsx)(g.default,{id:"settings-filename-style",value:eV,label:"Sort Palettes",select:!0,onChange:function(e){eM(e.target.value)},children:eG.map(function(e){var t=e.value,a=e.label;return(0,u.jsx)(f.default,{value:t,children:a},t)})}),(0,u.jsx)(g.default,{id:"settings-filename-style",value:eI.length?z:"",label:"Preferred locale",helperText:eF,select:!0,onChange:function(e){es(e.target.value)},children:eI.map(function(e){var t=e.name,a=e.local,n=e.location,r=e.tag;return(0,u.jsx)(f.default,{value:r,children:"".concat(a||t).concat(n?" - ".concat(n):""," (").concat(r,")")},r)})}),(0,u.jsx)(A.A,{}),(null==ef?void 0:ef.env)==="esp8266"?null:(0,u.jsx)(g.default,{id:"settings-printer-url",label:"Printer URL",type:"text",helperText:(0,u.jsxs)(u.Fragment,{children:["If you own a physical wifi-printer, you can add it's URL here and check the ",(0,u.jsx)(d.default,{component:S(),href:"/import",children:"Import-tab"})]}),value:e_,onChange:function(e){return eA(e.target.value)},onBlur:function(){var e=(0,F.A)(e_,"http");eA(e),ed(e)},onKeyUp:function(e){switch(e.key){case"Enter":var t=(0,F.A)(e_,"http");eA(t),ed(t);break;case"Escape":eA(K)}}}),(null==ef?void 0:ef.env)==="esp8266"||K?(0,u.jsx)(g.default,{id:"settings-printer-settings",label:"Additional printer settings",type:"text",value:ey,onChange:function(e){return eL(e.target.value)},onBlur:function(){eo(ey)},onKeyUp:function(e){switch(e.key){case"Enter":eo(ey);break;case"Escape":eL(Y)}}}):null,(0,u.jsx)(c.default,{label:"Show debug info",control:(0,u.jsx)(p.default,{checked:t,onChange:function(e){Z(e.target.checked)}})}),(0,u.jsx)(c.default,{label:"Enable Image Groups ".concat(eh.length?"(".concat(eh.length," groups)"):""),control:(0,u.jsx)(p.default,{checked:E,onChange:function(e){J(e.target.checked)}})})]})}},49432:(e,t,a)=>{"use strict";a.d(t,{A:()=>n});let n=function(e,t){if(!e.trim())return"";if("/"===e&&"ws"!==t)return e;var a=!!e.match(RegExp("^".concat(t,"(s)?:\\/\\/"),"gi"));return"".concat(a?"":"".concat(t,"://")).concat(e).concat(e.endsWith("/")?"":"/")}},49967:(e,t,a)=>{"use strict";a.d(t,{A:()=>r});var n={weekday:void 0,year:"numeric",month:"numeric",day:"numeric",hour:"numeric",minute:"numeric"};let r=function(e,t){return e.toDate().toLocaleString(t,n)}},51055:(e,t,a)=>{Promise.resolve().then(a.bind(a,46914))},52166:(e,t,a)=>{"use strict";a.d(t,{A:()=>b});var n=a(693),r=a(62570),l=a(30832),i=a.n(l),u=a(15905),s=a(65453),c=a(46786),o=a(39893),d=a(81445),f=a(80498),m=a(4862),p=a(27803),g=a(99999),h=a(49432),v=a(49967),E=a(10746),x=function(){if("undefined"!=typeof navigator){var e=(0,r._)(navigator.language.split("-"),2);return[e[0],e[1]].filter(Boolean).join("-")}return""};let b=(0,s.v)((0,c.Zr)(function(e){return{activePalette:"bw",bitmapQueueDither:!0,bitmapQueueSetting:o.f.WIDE,enableDebug:!1,exportFileTypes:["png"],exportScaleFactors:[4],fileNameStyle:d.B.FULL,forceMagicCheck:!0,galleryView:m.j.GALLERY_VIEW_1X,galleryClickAction:f.n.SELECT,handleExportFrame:u.H.FRAMEMODE_KEEP,hideDates:!1,importDeleted:!0,importLastSeen:!0,importPad:!1,lastBaudRate:115200,pageSize:30,preferredLocale:x(),printerParams:"",printerUrl:"/",savFrameTypes:"int",themeName:g.V.BRIGHT,enableImageGroups:!1,sortPalettes:p.V.DEFAULT_DESC,useSerials:!1,videoParams:{},setActivePalette:function(t){return e({activePalette:t})},setBitmapQueueDither:function(t){return e({bitmapQueueDither:t})},setBitmapQueueSetting:function(t){return e({bitmapQueueSetting:t})},setEnableDebug:function(t){return e({enableDebug:t})},setFileNameStyle:function(t){return e({fileNameStyle:t})},setForceMagicCheck:function(t){return e({forceMagicCheck:t})},setGalleryView:function(t){return e({galleryView:t})},setGalleryClickAction:function(t){return e({galleryClickAction:t})},setHandleExportFrame:function(t){return e({handleExportFrame:t})},setHideDates:function(t){return e({hideDates:t})},setImportDeleted:function(t){return e({importDeleted:t})},setImportLastSeen:function(t){return e({importLastSeen:t})},setImportPad:function(t){return e({importPad:t})},setLastBaudRate:function(t){return e({lastBaudRate:t})},setPageSize:function(t){return e({pageSize:t})},setPrinterParams:function(t){return e({printerParams:t})},setPrinterUrl:function(t){return e({printerUrl:(0,h.A)(t,"http")})},setSavFrameTypes:function(t){return e({savFrameTypes:t})},setThemeName:function(t){return e({themeName:t})},setEnableImageGroups:function(t){return e({enableImageGroups:t})},setSortPalettes:function(t){return e({sortPalettes:t})},setUseSerials:function(t){return e({useSerials:t})},setVideoParams:function(t){return e(function(e){return{videoParams:(0,n._)({},e.videoParams,t)}})},setExportScaleFactors:function(t){return e({exportScaleFactors:t})},setExportFileTypes:function(t){return e({exportFileTypes:t})},setPreferredLocale:function(t){try{(0,v.A)(i()(),t),e({preferredLocale:t})}catch(e){console.error(e)}}}},{name:"".concat(E.z,"-settings"),storage:(0,c.KU)(function(){return localStorage})}))},56491:(e,t,a)=>{"use strict";a.d(t,{A:()=>l});var n=function(e,t,a){var n=a.find(function(t){return t.id===e});if(n)return n.name;switch(e){case"hk":return"Hallo Katze!";case"int":return"International Frames (GameBoy Camera)";case"jp":return"Japanese Frames (Pocket Camera)";default:return t}},r=function(e){switch(e){case"int":return"_1";case"jp":return"_2";case"hk":return"_3";default:return e}};let l=function(e,t){return e.reduce(function(e,a){var r=a.id,l=a.name;try{var i,u=null==(i=r.match(/^[a-z]+/g))?void 0:i[0];if(!u)return e;return e.find(function(e){return e.id===u})||e.push({id:u,name:n(u,l,t)}),e}catch(t){return e}},[]).sort(function(e,t){var a=e.id,n=t.id,l=r(a),i=r(n);return l>i?1:l<i?-1:0})}},80498:(e,t,a)=>{"use strict";a.d(t,{n:()=>n,s:()=>r});var n=function(e){return e.SELECT="select",e.EDIT="edit",e.VIEW="view",e}({}),r=[{label:"Click selects the item",value:"select"},{label:"Click opens edit dialog",value:"edit"},{label:"Click opens the item in lightbox",value:"view"}]},81445:(e,t,a)=>{"use strict";a.d(t,{B:()=>n,y:()=>r});var n=function(e){return e.FULL="FULL",e.TITLE_ONLY="TITLE_ONLY",e.DATE_TITLE="DATE_TITLE",e}({}),r=[{id:"FULL",name:"Full Title"},{id:"DATE_TITLE",name:"Date and Title"},{id:"TITLE_ONLY",name:"Title only"}]},81543:(e,t,a)=>{"use strict";a.d(t,{A:()=>r});var n=a(15905);let r=[{id:n.H.FRAMEMODE_KEEP,name:"Keep frame"},{id:n.H.FRAMEMODE_CROP,name:"Crop frame"},{id:n.H.FRAMEMODE_SQUARE_BLACK,name:"Make image squared (add black)"},{id:n.H.FRAMEMODE_SQUARE_WHITE,name:"Make image squared (add white)"}]},99999:(e,t,a)=>{"use strict";a.d(t,{V:()=>n});var n=function(e){return e.BRIGHT="theme-bright",e.DARK="theme-dark",e}({})}},e=>{var t=t=>e(e.s=t);e.O(0,[4453,700,7859,7271,4831,3313,5394,8449,8681,6874,3611,2776,1760,8441,5955,1684,7358],()=>t(51055)),_N_E=e.O()}]);