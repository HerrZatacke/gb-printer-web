(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[7500],{806:(e,t,r)=>{"use strict";r.d(t,{A:()=>m});var n=r(86447),a=r(693),l=r(60376),i=r(78538),s=r(17652),o=r(12115),c=r(27803),u=r(78948),d=r(52166),f=r(55364);let m=function(){var e=(0,d.A)(),t=e.sortPalettes,r=e.setSortPalettes,m=(0,u.h)().images,p=(0,s.c3)("usePaletteSort"),v=(0,o.useMemo)(function(){return[{label:p("defaultAsc"),value:c.V.DEFAULT_ASC},{label:p("defaultDesc"),value:c.V.DEFAULT_DESC},{label:p("usageAsc"),value:c.V.USAGE_ASC},{label:p("usageDesc"),value:c.V.USAGE_DESC},{label:p("nameAsc"),value:c.V.NAME_ASC},{label:p("nameDesc"),value:c.V.NAME_DESC}]},[p]),h=(0,o.useMemo)(function(){return m.reduce(function(e,t){return(0,f.pl)(t)?e:(0,l._)((0,a._)({},e),(0,n._)({},t.palette,(e[t.palette]||0)+1))},{})},[m]),g=(0,o.useCallback)(function(e,r){var n=(0,i._)(t.split("_"),2),a=n[0],l="asc"===n[1]?1:-1;switch(a){case"usage":var s=h[e.shortName]||0,o=h[r.shortName]||0;if(s<o)return -1*l;if(s>o)return l;return 0;case"name":return e.name.localeCompare(r.name)*l;default:return l}},[h,t]);return{sortPalettes:t,setSortPalettes:r,paletteSortOptions:v,paletteUsages:h,sortFn:g}}},1607:(e,t,r)=>{"use strict";r.d(t,{D:()=>m,EnvProvider:()=>p});var n=r(97004),a=r(693),l=r(60376),i=r(78538),s=r(39249),o=r(95155),c=r(12115),u=r(52166),d=r(75380),f=(0,c.createContext)(null),m=function(){return(0,c.useContext)(f)},p=function(e){var t=e.children,r=(0,i._)((0,c.useState)(null),2),m=r[0],p=r[1],v=(0,u.A)().setPrinterUrl;return(0,c.useEffect)(function(){var e=["/gb-printer-web","/env.json"].filter(Boolean).join("/");e&&(0,n._)(function(){var t,r,n,i;return(0,s.YH)(this,function(s){switch(s.label){case 0:return s.trys.push([0,5,,6]),[4,(0,d.ZU)()];case 1:return s.sent(),[4,fetch(e)];case 2:return[4,s.sent().json()];case 3:return t=s.sent(),n=[(0,a._)({},t)],i={},[4,d.mU.driver()];case 4:return"esp8266"===(r=l._.apply(void 0,n.concat([(i.localforage=s.sent(),i)]))).env&&v("/"),p(r),[3,6];case 5:return s.sent(),p({version:"0.0.0",maximages:0,localforage:"error",env:"error",fstype:"-",bootmode:"-",oled:!1}),[3,6];case 6:return[2]}})})()},[v]),(0,o.jsx)(f.Provider,{value:m,children:t})}},4862:(e,t,r)=>{"use strict";r.d(t,{j:()=>n});var n=function(e){return e.GALLERY_VIEW_SMALL="small",e.GALLERY_VIEW_1X="1x",e.GALLERY_VIEW_2X="2x",e.GALLERY_VIEW_MAX="max",e.PALETTE_VIEW="res2x",e}({})},16257:(e,t,r)=>{"use strict";r.d(t,{A:()=>y});var n=r(78538),a=r(87025),l=r(95155),i=r(54581),s=r(27088),o=r(4915),c=r(17348),u=r(76380),d=r(90835),f=r(34991),m=r(97644),p=r(3856),v=r(700),h=r(17652),g=r(12115),A=r(81543),E=r(81445),S=r(52166),x={},D=function(e){if("undefined"==typeof document)return!1;if(void 0!==x[e])return x[e];var t=document.createElement("canvas");t.width=2,t.height=2;var r=t.toDataURL("image/".concat(e));return x[e]=0===r.indexOf("data:image/".concat(e,";base64")),x[e]};let y=function(e){var t=e.inDialog,r=(0,h.c3)("DownloadOptionsForm"),x=(0,S.A)(),y=x.alwaysShowDownloadDialog,_=x.exportFileTypes,b=x.exportScaleFactors,C=x.fileNameStyle,j=x.handleExportFrame,w=x.setAlwaysShowDownloadDialog,k=x.setExportFileTypes,L=x.setExportScaleFactors,T=x.setFileNameStyle,F=x.setHandleExportFrame,I=(0,n._)((0,g.useState)(["txt","pgm"]),2),P=I[0],N=I[1];return(0,g.useEffect)(function(){N((0,a._)(["jpeg","jpg","png","webp","bmp","gif"].filter(function(e){return D(e)})).concat(["txt","pgm"]))},[]),(0,l.jsxs)(l.Fragment,{children:[(0,l.jsxs)(s.A,{children:[(0,l.jsx)(c.A,{shrink:!0,children:r("exportDimensions")}),(0,l.jsx)(p.A,{fullWidth:!0,value:b,onChange:function(e,t){L(t)},children:[1,2,3,4,5,6,8,10].map(function(e){return(0,l.jsx)(m.A,{value:e,title:"".concat(160*e,"\xd7").concat(144*e),children:"".concat(e,"\xd7")},e)})})]}),(0,l.jsxs)(s.A,{children:[(0,l.jsx)(c.A,{shrink:!0,children:r("exportFiletypes")}),(0,l.jsx)(p.A,{fullWidth:!0,value:_,onChange:function(e,t){k(t)},children:P.map(function(e){return(0,l.jsx)(m.A,{value:e,title:e,children:e},e)})})]}),(0,l.jsx)(f.A,{value:j,label:r("exportHandleFrame"),select:!0,onChange:function(e){F(e.target.value)},children:A.A.map(function(e){var t=e.id,n=e.name;return(0,l.jsx)(u.A,{value:t,children:r(n)},t)})}),(0,l.jsx)(f.A,{value:C,label:r("filenameStyle"),select:!0,onChange:function(e){T(e.target.value)},children:E.y.map(function(e){var t=e.id,n=e.name;return(0,l.jsx)(u.A,{value:t,children:r(n)},t)})}),(0,l.jsxs)(i.A,{children:[(0,l.jsx)(o.A,{label:r(t?"alwaysShowDownloadDialogInDialog":"alwaysShowDownloadDialogInForm"),control:(0,l.jsx)(d.A,{checked:y,onChange:function(e){w(e.target.checked)}})}),t&&(0,l.jsx)(v.A,{variant:"caption",component:"p",children:r("alwaysShowDownloadDialogHelper")})]})]})}},27803:(e,t,r)=>{"use strict";r.d(t,{V:()=>n});var n=function(e){return e.DEFAULT_ASC="default_asc",e.DEFAULT_DESC="default_desc",e.USAGE_ASC="usage_asc",e.USAGE_DESC="usage_desc",e.NAME_ASC="name_asc",e.NAME_DESC="name_desc",e}({})},30461:(e,t,r)=>{"use strict";r.d(t,{A:()=>o});var n=r(95155),a=r(4915),l=r(90835),i=r(17652);r(12115);var s=r(52166);let o=function(){var e=(0,s.A)(),t=e.useSerials,r=e.setUseSerials,o=(0,i.c3)("WebUSBGreeting");return(0,n.jsx)(a.A,{label:o("enableWebUsb"),control:(0,n.jsx)(l.A,{checked:t,onChange:function(e){r(e.target.checked)}})})}},37547:(e,t,r)=>{"use strict";r.d(t,{K:()=>n,o:()=>a});var n=function(e){return e.CART_INDEX="CART_INDEX",e.RAM_INDEX="RAM_INDEX",e}({}),a=[{translationKey:"importOrders.cartIndex",value:"CART_INDEX"},{translationKey:"importOrders.ramIndex",value:"RAM_INDEX"}]},39893:(e,t,r)=>{"use strict";r.d(t,{C:()=>a,f:()=>n});var n=function(e){return e.WIDER="wider",e.WIDE="wide",e.NORMAL="normal",e.NARROW="narrow",e.NARROWER="narrower",e.EMULATOR="emulator",e}({}),a=[{translationKey:"contrastSettings.wider",baseValues:[0,68,187,255],value:"wider"},{translationKey:"contrastSettings.wide",baseValues:[0,85,170,255],value:"wide"},{translationKey:"contrastSettings.normal",baseValues:[51,102,153,204],value:"normal"},{translationKey:"contrastSettings.narrow",baseValues:[69,115,162,208],value:"narrow"},{translationKey:"contrastSettings.narrower",baseValues:[85,113,141,170],value:"narrower"},{translationKey:"contrastSettings.emulator",baseValues:[64,144,224,255],value:"emulator"}]},44965:(e,t,r)=>{"use strict";r.d(t,{Gw:()=>i,IB:()=>l,q:()=>a});var n=r(55685),a="en-GB",l=["de-DE","en-CA",a,"en-US","fr-FR"],i=(0,n.A)(l.map(function(e){return e.split("-")[0]}))},49432:(e,t,r)=>{"use strict";r.d(t,{A:()=>n});let n=function(e,t){if(!e.trim())return"";if("/"===e&&"ws"!==t)return e;var r=!!e.match(RegExp("^".concat(t,"(s)?:\\/\\/"),"gi"));return"".concat(r?"":"".concat(t,"://")).concat(e).concat(e.endsWith("/")?"":"/")}},51055:(e,t,r)=>{Promise.resolve().then(r.bind(r,59935))},52166:(e,t,r)=>{"use strict";r.d(t,{A:()=>E});var n=r(693),a=r(78538),l=r(15905),i=r(65453),s=r(46786),o=r(39893),c=r(81445),u=r(80498),d=r(4862),f=r(27803),m=r(37547),p=r(99999),v=r(44965),h=r(49432),g=r(10746),A=function(){var e="";if("undefined"!=typeof navigator){var t=(0,a._)(navigator.language.split("-"),2);e=[t[0],t[1]].filter(Boolean).join("-")}return v.IB.includes(e)?e:v.q};let E=(0,i.v)((0,s.Zr)(function(e){return{activePalette:"bw",alwaysShowDownloadDialog:!0,bitmapQueueDither:!0,bitmapQueueSetting:o.f.WIDE,enableDebug:!1,exportFileTypes:["png"],exportScaleFactors:[4],fileNameStyle:c.B.FULL,forceMagicCheck:!1,galleryView:d.j.GALLERY_VIEW_1X,galleryClickAction:u.n.SELECT,handleExportFrame:l.H.FRAMEMODE_KEEP,hideDates:!1,importDeleted:!0,importLastSeen:!0,importPad:!1,lastBaudRate:115200,pageSize:30,preferredLocale:A(),printerParams:"",printerUrl:"",savFrameTypes:"int",savImportOrder:m.K.CART_INDEX,themeName:p.V.BRIGHT,sortPalettes:f.V.DEFAULT_DESC,useSerials:!1,videoParams:{},setActivePalette:function(t){return e({activePalette:t})},setAlwaysShowDownloadDialog:function(t){return e({alwaysShowDownloadDialog:t})},setBitmapQueueDither:function(t){return e({bitmapQueueDither:t})},setBitmapQueueSetting:function(t){return e({bitmapQueueSetting:t})},setEnableDebug:function(t){return e({enableDebug:t})},setFileNameStyle:function(t){return e({fileNameStyle:t})},setForceMagicCheck:function(t){return e({forceMagicCheck:t})},setGalleryView:function(t){return e({galleryView:t})},setGalleryClickAction:function(t){return e({galleryClickAction:t})},setHandleExportFrame:function(t){return e({handleExportFrame:t})},setHideDates:function(t){return e({hideDates:t})},setImportDeleted:function(t){return e({importDeleted:t})},setImportLastSeen:function(t){return e({importLastSeen:t})},setImportPad:function(t){return e({importPad:t})},setLastBaudRate:function(t){return e({lastBaudRate:t})},setPageSize:function(t){return e({pageSize:t})},setPrinterParams:function(t){return e({printerParams:t})},setPrinterUrl:function(t){return e({printerUrl:(0,h.A)(t,"http")})},setSavFrameTypes:function(t){return e({savFrameTypes:t})},setSavImportOrder:function(t){return e({savImportOrder:t})},setThemeName:function(t){return e({themeName:t})},setSortPalettes:function(t){return e({sortPalettes:t})},setUseSerials:function(t){return e({useSerials:t})},setVideoParams:function(t){return e(function(e){return{videoParams:(0,n._)({},e.videoParams,t)}})},setExportScaleFactors:function(t){return e({exportScaleFactors:t})},setExportFileTypes:function(t){return e({exportFileTypes:t})},setPreferredLocale:function(t){v.IB.includes(t)?e({preferredLocale:t}):console.log('unknown locale "'.concat(t,'"'))}}},{name:"".concat(g.z,"-settings"),storage:(0,s.KU)(function(){return localStorage})}))},56491:(e,t,r)=>{"use strict";r.d(t,{A:()=>l});var n=function(e,t,r){var n=r.find(function(t){return t.id===e});if(n)return n.name;switch(e){case"hk":return"Hallo Katze!";case"int":return"International Frames (GameBoy Camera)";case"jp":return"Japanese Frames (Pocket Camera)";default:return t}},a=function(e){switch(e){case"int":return"_1";case"jp":return"_2";case"hk":return"_3";default:return e}};let l=function(e,t){return e.reduce(function(e,r){var a=r.id,l=r.name;try{var i,s=null==(i=a.match(/^[a-z]+/g))?void 0:i[0];if(!s)return e;return e.find(function(e){return e.id===s})||e.push({id:s,name:n(s,l,t)}),e}catch(t){return e}},[]).sort(function(e,t){var r=e.id,n=t.id,l=a(r),i=a(n);return l>i?1:l<i?-1:0})}},59935:(e,t,r)=>{"use strict";r.d(t,{default:()=>w});var n=r(78538),a=r(95155),l=r(4915),i=r(31960),s=r(76380),o=r(71803),c=r(90835),u=r(34991),d=r(6874),f=r.n(d),m=r(17652),p=r(12115),v=r(16257),h=r(30461),g=r(80498),A=r(37547),E=r(1607),S=r(85812),x=r(806),D=r(44965),y=r(78948),_=r(52166),b=r(49432),C=r(56491),j=[{translationKey:"galleryClickActions.clickSelectsItem",value:g.n.SELECT},{translationKey:"galleryClickActions.clickOpensEditDialog",value:g.n.EDIT},{translationKey:"galleryClickActions.clickOpensLightbox",value:g.n.VIEW}];let w=function(){var e=(0,_.A)(),t=e.enableDebug,r=e.forceMagicCheck,d=e.galleryClickAction,g=e.hideDates,w=e.importDeleted,k=e.importLastSeen,L=e.importPad,T=e.pageSize,F=e.preferredLocale,I=e.printerParams,P=e.printerUrl,N=e.savFrameTypes,R=e.savImportOrder,U=e.setEnableDebug,M=e.setForceMagicCheck,O=e.setGalleryClickAction,V=e.setHideDates,B=e.setImportDeleted,K=e.setImportLastSeen,G=e.setImportPad,W=e.setPageSize,H=e.setPreferredLocale,z=e.setSavFrameTypes,X=e.setSavImportOrder,Y=e.setPrinterParams,Q=e.setPrinterUrl,q=(0,E.D)(),$=(0,y.h)(),Z=$.frames,J=$.frameGroups,ee=(0,C.A)(Z,J),et=(0,n._)((0,p.useState)(T.toString(10)),2),er=et[0],en=et[1],ea=(0,n._)((0,p.useState)(P),2),el=ea[0],ei=ea[1],es=(0,n._)((0,p.useState)(I),2),eo=es[0],ec=es[1],eu=(0,n._)((0,p.useState)(""),2),ed=eu[0],ef=eu[1],em=(0,S.N)().formatter,ep=(0,m.c3)("SettingsGeneric"),ev=(0,x.A)(),eh=ev.sortPalettes,eg=ev.setSortPalettes,eA=ev.paletteSortOptions;return(0,p.useEffect)(function(){ef(ep("exampleDateFormat",{format:em(new Date)}))},[em,ep]),(0,a.jsxs)(o.A,{direction:"column",gap:6,children:[(0,a.jsx)(u.A,{id:"settings-pagesize",label:ep("galleryPageSize"),type:"text",helperText:ep("galleryPageSizeHelper"),value:er,onChange:function(e){return en(e.target.value)},onBlur:function(){var e=Math.abs(parseInt(er,10)||0);W(e),en(e.toString(10))}}),(0,a.jsx)(u.A,{value:d,label:ep("galleryClickAction"),select:!0,helperText:ep("galleryClickActionHelper"),onChange:function(e){O(e.target.value)},children:j.map(function(e){var t=e.value,r=e.translationKey;return(0,a.jsx)(s.A,{value:t,children:ep(r)},t)})}),(0,a.jsx)(v.A,{inDialog:!1}),(0,a.jsxs)(u.A,{id:"settings-sav-frames",value:ee.length?N:"",disabled:!ee.length,label:ep("importSavFrames"),select:!0,slotProps:{inputLabel:{shrink:!0},select:{renderValue:function(e){var t;return""===e?ep("importSavFramesNone"):(null==(t=ee.find(function(t){return t.id===e}))?void 0:t.name)||ep("importSavFramesUnknown")}}},onChange:function(e){z(e.target.value)},placeholder:ep("importSavFramesNone"),children:[(0,a.jsx)(s.A,{value:"",selected:!N,children:"None"}),ee.map(function(e){var t=e.id,r=e.name;return(0,a.jsx)(s.A,{value:t,children:r},t)})]}),(0,a.jsx)(u.A,{id:"settings-sav-order",value:R,label:ep("importSavOrder"),select:!0,onChange:function(e){X(e.target.value)},children:A.o.map(function(e){var t=e.value,r=e.translationKey;return(0,a.jsx)(s.A,{value:t,children:ep(r)},t)})}),(0,a.jsx)(l.A,{label:ep("importLastSeen"),control:(0,a.jsx)(c.A,{checked:k,onChange:function(e){K(e.target.checked)}})}),(0,a.jsx)(l.A,{label:ep("importDeleted"),control:(0,a.jsx)(c.A,{checked:w,onChange:function(e){B(e.target.checked)}})}),(0,a.jsx)(l.A,{label:ep("forceMagicCheck"),control:(0,a.jsx)(c.A,{checked:r,onChange:function(e){M(e.target.checked)}})}),(0,a.jsx)(l.A,{label:ep("importPad"),control:(0,a.jsx)(c.A,{checked:L,onChange:function(e){G(e.target.checked)}})}),(0,a.jsx)(l.A,{label:ep("hideDates"),control:(0,a.jsx)(c.A,{checked:g,onChange:function(e){V(e.target.checked)}})}),(0,a.jsx)(u.A,{id:"settings-filename-style",value:eh,label:ep("sortPalettes"),select:!0,onChange:function(e){eg(e.target.value)},children:eA.map(function(e){var t=e.value,r=e.label;return(0,a.jsx)(s.A,{value:t,children:r},t)})}),(0,a.jsx)(u.A,{id:"settings-filename-style",value:F,label:ep("preferredLocale"),helperText:ed,select:!0,onChange:function(e){H(e.target.value)},children:D.IB.map(function(e){return(0,a.jsx)(s.A,{value:e,children:ep("locales.".concat(e))},e)})}),(0,a.jsx)(h.A,{}),(null==q?void 0:q.env)==="esp8266"?null:(0,a.jsx)(u.A,{id:"settings-printer-url",label:ep("printerUrl"),type:"text",helperText:ep.rich("printerUrlHelper",{link:function(e){return(0,a.jsx)(i.A,{component:f(),href:"/import",children:e})}}),value:el,onChange:function(e){return ei(e.target.value)},onBlur:function(){var e=(0,b.A)(el,"http");ei(e),Q(e)},onKeyUp:function(e){switch(e.key){case"Enter":var t=(0,b.A)(el,"http");ei(t),Q(t);break;case"Escape":ei(P)}}}),(null==q?void 0:q.env)==="esp8266"||P?(0,a.jsx)(u.A,{id:"settings-printer-settings",label:ep("printerParams"),type:"text",value:eo,onChange:function(e){return ec(e.target.value)},onBlur:function(){Y(eo)},onKeyUp:function(e){switch(e.key){case"Enter":Y(eo);break;case"Escape":ec(I)}}}):null,(0,a.jsx)(l.A,{label:ep("enableDebug"),control:(0,a.jsx)(c.A,{checked:t,onChange:function(e){U(e.target.checked)}})})]})}},80498:(e,t,r)=>{"use strict";r.d(t,{n:()=>n});var n=function(e){return e.SELECT="select",e.EDIT="edit",e.VIEW="view",e}({})},81445:(e,t,r)=>{"use strict";r.d(t,{B:()=>n,y:()=>a});var n=function(e){return e.FULL="FULL",e.TITLE_ONLY="TITLE_ONLY",e.DATE_TITLE="DATE_TITLE",e}({}),a=[{id:"FULL",name:"filenameStyles.fullTitle"},{id:"DATE_TITLE",name:"filenameStyles.dateTitle"},{id:"TITLE_ONLY",name:"filenameStyles.titleOnly"}]},81543:(e,t,r)=>{"use strict";r.d(t,{A:()=>a});var n=r(15905);let a=[{id:n.H.FRAMEMODE_KEEP,name:"frameModes.keepFrame"},{id:n.H.FRAMEMODE_CROP,name:"frameModes.cropFrame"},{id:n.H.FRAMEMODE_SQUARE_BLACK,name:"frameModes.squareBlack"},{id:n.H.FRAMEMODE_SQUARE_WHITE,name:"frameModes.squareWhite"}]},85812:(e,t,r)=>{"use strict";r.d(t,{N:()=>i});var n=r(17652),a=r(12115),l=r(52166),i=function(){var e=(0,l.A)().hideDates,t=(0,n.kc)(),r=(0,a.useCallback)(function(e){var r=new Date(e);return"string"==typeof e&&isNaN(r.getTime())&&(r=new Date(e.replace(/(\d{4}-\d{2}-\d{2}) (\d{2}:\d{2}:\d{2}):(\d{3})/,"$1T$2.$3"))),t.dateTime(r,"short")},[t]);return{formatterGallery:(0,a.useCallback)(function(t){return e||!t?null:r(t)},[r,e]),formatter:r}}},99999:(e,t,r)=>{"use strict";r.d(t,{V:()=>n});var n=function(e){return e.BRIGHT="theme-bright",e.DARK="theme-dark",e}({})}},e=>{var t=t=>e(e.s=t);e.O(0,[5271,4453,700,8250,5232,7271,2491,3568,3701,9710,4991,4556,8681,3611,2776,8948,8441,1684,7358],()=>t(51055)),_N_E=e.O()}]);