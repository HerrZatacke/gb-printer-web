(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[7500],{806:(e,t,a)=>{"use strict";a.d(t,{A:()=>m});var r=a(86447),n=a(693),l=a(60376),u=a(78538),s=a(17652),i=a(12115),c=a(27803),o=a(11760),d=a(52166),f=a(55364);let m=function(){var e=(0,d.A)(),t=e.sortPalettes,a=e.setSortPalettes,m=(0,o.h)().images,p=(0,s.c3)("usePaletteSort"),h=(0,i.useMemo)(function(){return[{label:p("defaultAsc"),value:c.V.DEFAULT_ASC},{label:p("defaultDesc"),value:c.V.DEFAULT_DESC},{label:p("usageAsc"),value:c.V.USAGE_ASC},{label:p("usageDesc"),value:c.V.USAGE_DESC},{label:p("nameAsc"),value:c.V.NAME_ASC},{label:p("nameDesc"),value:c.V.NAME_DESC}]},[p]),v=(0,i.useMemo)(function(){return m.reduce(function(e,t){return(0,f.pl)(t)?e:(0,l._)((0,n._)({},e),(0,r._)({},t.palette,(e[t.palette]||0)+1))},{})},[m]),g=(0,i.useCallback)(function(e,a){var r=(0,u._)(t.split("_"),2),n=r[0],l="asc"===r[1]?1:-1;switch(n){case"usage":var s=v[e.shortName]||0,i=v[a.shortName]||0;if(s<i)return -1*l;if(s>i)return l;return 0;case"name":return e.name.localeCompare(a.name)*l;default:return l}},[v,t]);return{sortPalettes:t,setSortPalettes:a,paletteSortOptions:h,paletteUsages:v,sortFn:g}}},1607:(e,t,a)=>{"use strict";a.d(t,{D:()=>m,EnvProvider:()=>p});var r=a(97004),n=a(693),l=a(60376),u=a(78538),s=a(39249),i=a(95155),c=a(12115),o=a(52166),d=a(75380),f=(0,c.createContext)(null),m=function(){return(0,c.useContext)(f)},p=function(e){var t=e.children,a=(0,u._)((0,c.useState)(null),2),m=a[0],p=a[1],h=(0,o.A)().setPrinterUrl;return(0,c.useEffect)(function(){var e=["/gb-printer-web","/env.json"].filter(Boolean).join("/");e&&(0,r._)(function(){var t,a,r,u;return(0,s.YH)(this,function(s){switch(s.label){case 0:return s.trys.push([0,5,,6]),[4,(0,d.ZU)()];case 1:return s.sent(),[4,fetch(e)];case 2:return[4,s.sent().json()];case 3:return t=s.sent(),r=[(0,n._)({},t)],u={},[4,d.mU.driver()];case 4:return"esp8266"===(a=l._.apply(void 0,r.concat([(u.localforage=s.sent(),u)]))).env&&h("/"),p(a),[3,6];case 5:return s.sent(),p({version:"0.0.0",maximages:0,localforage:"error",env:"error",fstype:"-",bootmode:"-",oled:!1}),[3,6];case 6:return[2]}})})()},[h]),(0,i.jsx)(f.Provider,{value:m,children:t})}},4862:(e,t,a)=>{"use strict";a.d(t,{j:()=>r});var r=function(e){return e.GALLERY_VIEW_SMALL="small",e.GALLERY_VIEW_1X="1x",e.GALLERY_VIEW_2X="2x",e.GALLERY_VIEW_MAX="max",e.PALETTE_VIEW="res2x",e}({})},27803:(e,t,a)=>{"use strict";a.d(t,{V:()=>r});var r=function(e){return e.DEFAULT_ASC="default_asc",e.DEFAULT_DESC="default_desc",e.USAGE_ASC="usage_asc",e.USAGE_DESC="usage_desc",e.NAME_ASC="name_asc",e.NAME_DESC="name_desc",e}({})},30461:(e,t,a)=>{"use strict";a.d(t,{A:()=>i});var r=a(95155),n=a(4915),l=a(90835),u=a(17652);a(12115);var s=a(52166);let i=function(){var e=(0,s.A)(),t=e.useSerials,a=e.setUseSerials,i=(0,u.c3)("WebUSBGreeting");return(0,r.jsx)(n.default,{label:i("enableWebUsb"),control:(0,r.jsx)(l.default,{checked:t,onChange:function(e){a(e.target.checked)}})})}},39893:(e,t,a)=>{"use strict";a.d(t,{C:()=>n,f:()=>r});var r=function(e){return e.WIDER="wider",e.WIDE="wide",e.NORMAL="normal",e.NARROW="narrow",e.NARROWER="narrower",e.EMULATOR="emulator",e}({}),n=[{name:"Wider",baseValues:[0,68,187,255],value:"wider"},{name:"Wide",baseValues:[0,85,170,255],value:"wide"},{name:"Normal",baseValues:[51,102,153,204],value:"normal"},{name:"Narrow",baseValues:[69,115,162,208],value:"narrow"},{name:"Narrower",baseValues:[85,113,141,170],value:"narrower"},{name:"From Emulator",baseValues:[64,144,224,255],value:"emulator"}]},44965:(e,t,a)=>{"use strict";a.d(t,{I:()=>r});var r=["en-GB","en-CA","en-US","de-DE"]},46914:(e,t,a)=>{"use strict";a.d(t,{default:()=>U});var r=a(78538),n=a(87025),l=a(95155),u=a(27088),s=a(4915),i=a(9943),c=a(31960),o=a(76380),d=a(7068),f=a(90835),m=a(78449),p=a(97644),h=a(3856),v=a(6874),g=a.n(v),E=a(17652),x=a(12115),S=a(30461),b=a(81543),A=a(81445),_=a(80498),C=a(1607),D=a(85812),k=a(806),L=a(44965),j=a(11760),y=a(52166),F=a(49432),P=a(56491),T={},I=function(e){if("undefined"==typeof document)return!1;if(void 0!==T[e])return T[e];var t=document.createElement("canvas");t.width=2,t.height=2;var a=t.toDataURL("image/".concat(e));return T[e]=0===a.indexOf("data:image/".concat(e,";base64")),T[e]};let U=function(){var e=(0,y.A)(),t=e.enableDebug,a=e.enableImageGroups,v=e.exportFileTypes,T=e.exportScaleFactors,U=e.fileNameStyle,w=e.forceMagicCheck,N=e.galleryClickAction,M=e.handleExportFrame,R=e.hideDates,V=e.importDeleted,G=e.importLastSeen,W=e.importPad,B=e.pageSize,O=e.preferredLocale,H=e.printerParams,z=e.printerUrl,Y=e.savFrameTypes,K=e.setExportFileTypes,Q=e.setExportScaleFactors,X=e.setEnableDebug,$=e.setEnableImageGroups,q=e.setFileNameStyle,Z=e.setForceMagicCheck,J=e.setGalleryClickAction,ee=e.setHandleExportFrame,et=e.setHideDates,ea=e.setImportDeleted,er=e.setImportLastSeen,en=e.setImportPad,el=e.setPageSize,eu=e.setPreferredLocale,es=e.setSavFrameTypes,ei=e.setPrinterParams,ec=e.setPrinterUrl,eo=(0,C.D)(),ed=(0,j.h)(),ef=ed.frames,em=ed.frameGroups,ep=ed.imageGroups,eh=(0,P.A)(ef,em),ev=(0,r._)((0,x.useState)(B.toString(10)),2),eg=ev[0],eE=ev[1],ex=(0,r._)((0,x.useState)(z),2),eS=ex[0],eb=ex[1],eA=(0,r._)((0,x.useState)(H),2),e_=eA[0],eC=eA[1],eD=(0,r._)((0,x.useState)(["txt","pgm"]),2),ek=eD[0],eL=eD[1],ej=(0,r._)((0,x.useState)(""),2),ey=ej[0],eF=ej[1],eP=(0,D.N)().formatter,eT=(0,E.c3)("SettingsGeneric"),eI=(0,k.A)(),eU=eI.sortPalettes,ew=eI.setSortPalettes,eN=eI.paletteSortOptions;return(0,x.useEffect)(function(){eL((0,n._)(["jpeg","jpg","png","webp","bmp","gif"].filter(function(e){return I(e)})).concat(["txt","pgm"]))},[]),(0,x.useEffect)(function(){eF(eT("exampleDateFormat",{format:eP(new Date)}))},[eP]),(0,l.jsxs)(d.default,{direction:"column",gap:6,children:[(0,l.jsx)(m.default,{id:"settings-pagesize",label:eT("galleryPageSize"),type:"text",helperText:eT("galleryPageSizeHelper"),value:eg,onChange:function(e){return eE(e.target.value)},onBlur:function(){var e=Math.abs(parseInt(eg,10)||0);el(e),eE(e.toString(10))}}),(0,l.jsx)(m.default,{value:N,label:eT("galleryClickAction"),select:!0,helperText:eT("galleryClickActionHelper"),onChange:function(e){J(e.target.value)},children:_.s.map(function(e){var t=e.value,a=e.label;return(0,l.jsx)(o.default,{value:t,children:a},t)})}),(0,l.jsxs)(u.default,{children:[(0,l.jsx)(i.default,{shrink:!0,children:eT("exportDimensions")}),(0,l.jsx)(h.default,{fullWidth:!0,value:T,onChange:function(e,t){Q(t)},children:[1,2,3,4,5,6,8,10].map(function(e){return(0,l.jsx)(p.default,{value:e,title:"".concat(160*e,"\xd7").concat(144*e),children:"".concat(e,"\xd7")},e)})})]}),(0,l.jsxs)(u.default,{children:[(0,l.jsx)(i.default,{shrink:!0,children:eT("exportFiletypes")}),(0,l.jsx)(h.default,{fullWidth:!0,value:v,onChange:function(e,t){K(t)},children:ek.map(function(e){return(0,l.jsx)(p.default,{value:e,title:e,children:e},e)})})]}),(0,l.jsx)(m.default,{id:"settings-handle-export-frames",value:M,label:eT("exportHandleFrame"),select:!0,onChange:function(e){ee(e.target.value)},children:b.A.map(function(e){var t=e.id,a=e.name;return(0,l.jsx)(o.default,{value:t,children:eT(a)},t)})}),(0,l.jsx)(m.default,{id:"settings-filename-style",value:U,label:eT("filenameStyle"),select:!0,onChange:function(e){q(e.target.value)},children:A.y.map(function(e){var t=e.id,a=e.name;return(0,l.jsx)(o.default,{value:t,children:eT(a)},t)})}),(0,l.jsxs)(m.default,{id:"settings-sav-frames",value:eh.length?Y:"",disabled:!eh.length,label:eT("importSavFrames"),select:!0,slotProps:{inputLabel:{shrink:!0},select:{renderValue:function(e){var t;return""===e?eT("importSavFramesNone"):(null==(t=eh.find(function(t){return t.id===e}))?void 0:t.name)||eT("importSavFramesUnknown")}}},onChange:function(e){es(e.target.value)},placeholder:eT("importSavFramesNone"),children:[(0,l.jsx)(o.default,{value:"",selected:!Y,children:"None"}),eh.map(function(e){var t=e.id,a=e.name;return(0,l.jsx)(o.default,{value:t,children:a},t)})]}),(0,l.jsx)(s.default,{label:eT("importLastSeen"),control:(0,l.jsx)(f.default,{checked:G,onChange:function(e){er(e.target.checked)}})}),(0,l.jsx)(s.default,{label:eT("importDeleted"),control:(0,l.jsx)(f.default,{checked:V,onChange:function(e){ea(e.target.checked)}})}),(0,l.jsx)(s.default,{label:eT("forceMagicCheck"),control:(0,l.jsx)(f.default,{checked:w,onChange:function(e){Z(e.target.checked)}})}),(0,l.jsx)(s.default,{label:eT("importPad"),control:(0,l.jsx)(f.default,{checked:W,onChange:function(e){en(e.target.checked)}})}),(0,l.jsx)(s.default,{label:eT("hideDates"),control:(0,l.jsx)(f.default,{checked:R,onChange:function(e){et(e.target.checked)}})}),(0,l.jsx)(m.default,{id:"settings-filename-style",value:eU,label:eT("sortPalettes"),select:!0,onChange:function(e){ew(e.target.value)},children:eN.map(function(e){var t=e.value,a=e.label;return(0,l.jsx)(o.default,{value:t,children:a},t)})}),(0,l.jsx)(m.default,{id:"settings-filename-style",value:O,label:eT("preferredLocale"),helperText:ey,select:!0,onChange:function(e){eu(e.target.value)},children:L.I.map(function(e){return(0,l.jsx)(o.default,{value:e,children:eT("locales.".concat(e))},e)})}),(0,l.jsx)(S.A,{}),(null==eo?void 0:eo.env)==="esp8266"?null:(0,l.jsx)(m.default,{id:"settings-printer-url",label:eT("printerUrl"),type:"text",helperText:eT.rich("printerUrlHelper",{link:function(e){return(0,l.jsxs)(c.default,{component:g(),href:"/import",children:["\uD83D\uDD17",e]})}}),value:eS,onChange:function(e){return eb(e.target.value)},onBlur:function(){var e=(0,F.A)(eS,"http");eb(e),ec(e)},onKeyUp:function(e){switch(e.key){case"Enter":var t=(0,F.A)(eS,"http");eb(t),ec(t);break;case"Escape":eb(z)}}}),(null==eo?void 0:eo.env)==="esp8266"||z?(0,l.jsx)(m.default,{id:"settings-printer-settings",label:eT("printerParams"),type:"text",value:e_,onChange:function(e){return eC(e.target.value)},onBlur:function(){ei(e_)},onKeyUp:function(e){switch(e.key){case"Enter":ei(e_);break;case"Escape":eC(H)}}}):null,(0,l.jsx)(s.default,{label:eT("enableDebug"),control:(0,l.jsx)(f.default,{checked:t,onChange:function(e){X(e.target.checked)}})}),(0,l.jsx)(s.default,{label:eT("enableImageGroups",{groupCount:ep.length}),control:(0,l.jsx)(f.default,{checked:a,onChange:function(e){$(e.target.checked)}})})]})}},49432:(e,t,a)=>{"use strict";a.d(t,{A:()=>r});let r=function(e,t){if(!e.trim())return"";if("/"===e&&"ws"!==t)return e;var a=!!e.match(RegExp("^".concat(t,"(s)?:\\/\\/"),"gi"));return"".concat(a?"":"".concat(t,"://")).concat(e).concat(e.endsWith("/")?"":"/")}},51055:(e,t,a)=>{Promise.resolve().then(a.bind(a,46914))},52166:(e,t,a)=>{"use strict";a.d(t,{A:()=>E});var r=a(693),n=a(78538),l=a(15905),u=a(65453),s=a(46786),i=a(39893),c=a(81445),o=a(80498),d=a(4862),f=a(27803),m=a(99999),p=a(44965),h=a(49432),v=a(10746),g=function(){var e="";if("undefined"!=typeof navigator){var t=(0,n._)(navigator.language.split("-"),2);e=[t[0],t[1]].filter(Boolean).join("-")}return p.I.includes(e)?e:p.I[0]};let E=(0,u.v)((0,s.Zr)(function(e){return{activePalette:"bw",bitmapQueueDither:!0,bitmapQueueSetting:i.f.WIDE,enableDebug:!1,exportFileTypes:["png"],exportScaleFactors:[4],fileNameStyle:c.B.FULL,forceMagicCheck:!0,galleryView:d.j.GALLERY_VIEW_1X,galleryClickAction:o.n.SELECT,handleExportFrame:l.H.FRAMEMODE_KEEP,hideDates:!1,importDeleted:!0,importLastSeen:!0,importPad:!1,lastBaudRate:115200,pageSize:30,preferredLocale:g(),printerParams:"",printerUrl:"",savFrameTypes:"int",themeName:m.V.BRIGHT,enableImageGroups:!1,sortPalettes:f.V.DEFAULT_DESC,useSerials:!1,videoParams:{},setActivePalette:function(t){return e({activePalette:t})},setBitmapQueueDither:function(t){return e({bitmapQueueDither:t})},setBitmapQueueSetting:function(t){return e({bitmapQueueSetting:t})},setEnableDebug:function(t){return e({enableDebug:t})},setFileNameStyle:function(t){return e({fileNameStyle:t})},setForceMagicCheck:function(t){return e({forceMagicCheck:t})},setGalleryView:function(t){return e({galleryView:t})},setGalleryClickAction:function(t){return e({galleryClickAction:t})},setHandleExportFrame:function(t){return e({handleExportFrame:t})},setHideDates:function(t){return e({hideDates:t})},setImportDeleted:function(t){return e({importDeleted:t})},setImportLastSeen:function(t){return e({importLastSeen:t})},setImportPad:function(t){return e({importPad:t})},setLastBaudRate:function(t){return e({lastBaudRate:t})},setPageSize:function(t){return e({pageSize:t})},setPrinterParams:function(t){return e({printerParams:t})},setPrinterUrl:function(t){return e({printerUrl:(0,h.A)(t,"http")})},setSavFrameTypes:function(t){return e({savFrameTypes:t})},setThemeName:function(t){return e({themeName:t})},setEnableImageGroups:function(t){return e({enableImageGroups:t})},setSortPalettes:function(t){return e({sortPalettes:t})},setUseSerials:function(t){return e({useSerials:t})},setVideoParams:function(t){return e(function(e){return{videoParams:(0,r._)({},e.videoParams,t)}})},setExportScaleFactors:function(t){return e({exportScaleFactors:t})},setExportFileTypes:function(t){return e({exportFileTypes:t})},setPreferredLocale:function(t){p.I.includes(t)?e({preferredLocale:t}):console.log('unknown locale "'.concat(t,'"'))}}},{name:"".concat(v.z,"-settings"),storage:(0,s.KU)(function(){return localStorage})}))},56491:(e,t,a)=>{"use strict";a.d(t,{A:()=>l});var r=function(e,t,a){var r=a.find(function(t){return t.id===e});if(r)return r.name;switch(e){case"hk":return"Hallo Katze!";case"int":return"International Frames (GameBoy Camera)";case"jp":return"Japanese Frames (Pocket Camera)";default:return t}},n=function(e){switch(e){case"int":return"_1";case"jp":return"_2";case"hk":return"_3";default:return e}};let l=function(e,t){return e.reduce(function(e,a){var n=a.id,l=a.name;try{var u,s=null==(u=n.match(/^[a-z]+/g))?void 0:u[0];if(!s)return e;return e.find(function(e){return e.id===s})||e.push({id:s,name:r(s,l,t)}),e}catch(t){return e}},[]).sort(function(e,t){var a=e.id,r=t.id,l=n(a),u=n(r);return l>u?1:l<u?-1:0})}},80498:(e,t,a)=>{"use strict";a.d(t,{n:()=>r,s:()=>n});var r=function(e){return e.SELECT="select",e.EDIT="edit",e.VIEW="view",e}({}),n=[{label:"Click selects the item",value:"select"},{label:"Click opens edit dialog",value:"edit"},{label:"Click opens the item in lightbox",value:"view"}]},81445:(e,t,a)=>{"use strict";a.d(t,{B:()=>r,y:()=>n});var r=function(e){return e.FULL="FULL",e.TITLE_ONLY="TITLE_ONLY",e.DATE_TITLE="DATE_TITLE",e}({}),n=[{id:"FULL",name:"filenameStyles.fullTitle"},{id:"DATE_TITLE",name:"filenameStyles.dateTitle"},{id:"TITLE_ONLY",name:"filenameStyles.titleOnly"}]},81543:(e,t,a)=>{"use strict";a.d(t,{A:()=>n});var r=a(15905);let n=[{id:r.H.FRAMEMODE_KEEP,name:"frameModes.keepFrame"},{id:r.H.FRAMEMODE_CROP,name:"frameModes.cropFrame"},{id:r.H.FRAMEMODE_SQUARE_BLACK,name:"frameModes.squareBlack"},{id:r.H.FRAMEMODE_SQUARE_WHITE,name:"frameModes.squareWhite"}]},85812:(e,t,a)=>{"use strict";a.d(t,{N:()=>u});var r=a(17652),n=a(12115),l=a(52166),u=function(){var e=(0,l.A)().hideDates,t=(0,r.kc)(),a=(0,n.useCallback)(function(e){var a=new Date(e);return"string"==typeof e&&isNaN(a.getTime())&&(a=new Date(e.replace(/(\d{4}-\d{2}-\d{2}) (\d{2}:\d{2}:\d{2}):(\d{3})/,"$1T$2.$3"))),t.dateTime(a,"short")},[t]);return{formatterGallery:(0,n.useCallback)(function(t){return e||!t?null:a(t)},[a,e]),formatter:a}}},99999:(e,t,a)=>{"use strict";a.d(t,{V:()=>r});var r=function(e){return e.BRIGHT="theme-bright",e.DARK="theme-dark",e}({})}},e=>{var t=t=>e(e.s=t);e.O(0,[4453,700,7859,7271,8250,2491,6139,2797,3313,8449,8681,6874,3611,3790,1760,8441,1684,7358],()=>t(51055)),_N_E=e.O()}]);