(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[7500],{806:(e,t,a)=>{"use strict";a.d(t,{A:()=>f});var n=a(86447),r=a(693),l=a(60376),i=a(78538),s=a(12115),u=a(27803),o=a(11760),c=a(52166),d=a(55364);let f=function(){var e=(0,c.A)(),t=e.sortPalettes,a=e.setSortPalettes,f=(0,o.h)().images,m=[{label:"Default (ascending)",value:u.V.DEFAULT_ASC},{label:"Default (descending)",value:u.V.DEFAULT_DESC},{label:"Usage (ascending)",value:u.V.USAGE_ASC},{label:"Usage (descending)",value:u.V.USAGE_DESC},{label:"Name (ascending)",value:u.V.NAME_ASC},{label:"Name (descending)",value:u.V.NAME_DESC}],p=(0,s.useMemo)(function(){return f.reduce(function(e,t){return(0,d.pl)(t)?e:(0,l._)((0,r._)({},e),(0,n._)({},t.palette,(e[t.palette]||0)+1))},{})},[f]),g=(0,s.useCallback)(function(e,a){var n=(0,i._)(t.split("_"),2),r=n[0],l="asc"===n[1]?1:-1;switch(r){case"usage":var s=p[e.shortName]||0,u=p[a.shortName]||0;if(s<u)return -1*l;if(s>u)return l;return 0;case"name":return e.name.localeCompare(a.name)*l;default:return l}},[p,t]);return{sortPalettes:t,setSortPalettes:a,paletteSortOptions:m,paletteUsages:p,sortFn:g}}},1607:(e,t,a)=>{"use strict";a.d(t,{D:()=>m,EnvProvider:()=>p});var n=a(97004),r=a(693),l=a(60376),i=a(78538),s=a(39249),u=a(95155),o=a(12115),c=a(52166),d=a(75380),f=(0,o.createContext)(null),m=function(){return(0,o.useContext)(f)},p=function(e){var t=e.children,a=(0,i._)((0,o.useState)(null),2),m=a[0],p=a[1],g=(0,c.A)().setPrinterUrl;return(0,o.useEffect)(function(){var e=["/gb-printer-web","/env.json"].filter(Boolean).join("/");e&&(0,n._)(function(){var t,a,n,i;return(0,s.YH)(this,function(s){switch(s.label){case 0:return s.trys.push([0,5,,6]),[4,(0,d.ZU)()];case 1:return s.sent(),[4,fetch(e)];case 2:return[4,s.sent().json()];case 3:return t=s.sent(),n=[(0,r._)({},t)],i={},[4,d.mU.driver()];case 4:return"esp8266"===(a=l._.apply(void 0,n.concat([(i.localforage=s.sent(),i)]))).env&&g("/"),p(a),[3,6];case 5:return s.sent(),p({version:"0.0.0",maximages:0,localforage:"error",env:"error",fstype:"-",bootmode:"-",oled:!1}),[3,6];case 6:return[2]}})})()},[g]),(0,u.jsx)(f.Provider,{value:m,children:t})}},4862:(e,t,a)=>{"use strict";a.d(t,{j:()=>n});var n=function(e){return e.GALLERY_VIEW_SMALL="small",e.GALLERY_VIEW_1X="1x",e.GALLERY_VIEW_2X="2x",e.GALLERY_VIEW_MAX="max",e.PALETTE_VIEW="res2x",e}({})},27803:(e,t,a)=>{"use strict";a.d(t,{V:()=>n});var n=function(e){return e.DEFAULT_ASC="default_asc",e.DEFAULT_DESC="default_desc",e.USAGE_ASC="usage_asc",e.USAGE_DESC="usage_desc",e.NAME_ASC="name_asc",e.NAME_DESC="name_desc",e}({})},30461:(e,t,a)=>{"use strict";a.d(t,{A:()=>s});var n=a(95155),r=a(4915),l=a(90835);a(12115);var i=a(52166);let s=function(){var e=(0,i.A)(),t=e.useSerials,a=e.setUseSerials;return(0,n.jsx)(r.default,{label:"Enable WebUSB / Serial ports",control:(0,n.jsx)(l.default,{checked:t,onChange:function(e){a(e.target.checked)}})})}},39893:(e,t,a)=>{"use strict";a.d(t,{C:()=>r,f:()=>n});var n=function(e){return e.WIDER="wider",e.WIDE="wide",e.NORMAL="normal",e.NARROW="narrow",e.NARROWER="narrower",e.EMULATOR="emulator",e}({}),r=[{name:"Wider",baseValues:[0,68,187,255],value:"wider"},{name:"Wide",baseValues:[0,85,170,255],value:"wide"},{name:"Normal",baseValues:[51,102,153,204],value:"normal"},{name:"Narrow",baseValues:[69,115,162,208],value:"narrow"},{name:"Narrower",baseValues:[85,113,141,170],value:"narrower"},{name:"From Emulator",baseValues:[64,144,224,255],value:"emulator"}]},44965:(e,t,a)=>{"use strict";a.d(t,{I:()=>n});var n=["en-GB","en-US","de-DE"]},46914:(e,t,a)=>{"use strict";a.d(t,{default:()=>w});var n=a(78538),r=a(87025),l=a(95155),i=a(27088),s=a(4915),u=a(9943),o=a(31960),c=a(76380),d=a(7068),f=a(90835),m=a(78449),p=a(97644),g=a(3856),h=a(6874),v=a.n(h),E=a(17652),x=a(12115),b=a(30461),S=a(81543),_=a(81445),A=a(80498),C=a(1607),k=a(85812),L=a(806),j=a(44965),y=a(11760),D=a(52166),P=a(49432),T=a(56491),F={},I=function(e){if("undefined"==typeof document)return!1;if(void 0!==F[e])return F[e];var t=document.createElement("canvas");t.width=2,t.height=2;var a=t.toDataURL("image/".concat(e));return F[e]=0===a.indexOf("data:image/".concat(e,";base64")),F[e]};let w=function(){var e=(0,D.A)(),t=e.enableDebug,a=e.enableImageGroups,h=e.exportFileTypes,F=e.exportScaleFactors,w=e.fileNameStyle,U=e.forceMagicCheck,N=e.galleryClickAction,R=e.handleExportFrame,V=e.hideDates,M=e.importDeleted,G=e.importLastSeen,W=e.importPad,B=e.pageSize,O=e.preferredLocale,H=e.printerParams,z=e.printerUrl,K=e.savFrameTypes,Y=e.setExportFileTypes,Q=e.setExportScaleFactors,X=e.setEnableDebug,q=e.setEnableImageGroups,Z=e.setFileNameStyle,J=e.setForceMagicCheck,$=e.setGalleryClickAction,ee=e.setHandleExportFrame,et=e.setHideDates,ea=e.setImportDeleted,en=e.setImportLastSeen,er=e.setImportPad,el=e.setPageSize,ei=e.setPreferredLocale,es=e.setSavFrameTypes,eu=e.setPrinterParams,eo=e.setPrinterUrl,ec=(0,C.D)(),ed=(0,y.h)(),ef=ed.frames,em=ed.frameGroups,ep=ed.imageGroups,eg=(0,T.A)(ef,em),eh=(0,n._)((0,x.useState)(B.toString(10)),2),ev=eh[0],eE=eh[1],ex=(0,n._)((0,x.useState)(z),2),eb=ex[0],eS=ex[1],e_=(0,n._)((0,x.useState)(H),2),eA=e_[0],eC=e_[1],ek=(0,n._)((0,x.useState)(["txt","pgm"]),2),eL=ek[0],ej=ek[1],ey=(0,n._)((0,x.useState)("Example date format:"),2),eD=ey[0],eP=ey[1],eT=(0,k.N)().formatter,eF=(0,E.c3)("Locales"),eI=(0,L.A)(),ew=eI.sortPalettes,eU=eI.setSortPalettes,eN=eI.paletteSortOptions;return(0,x.useEffect)(function(){ej((0,r._)(["jpeg","jpg","png","webp","bmp","gif"].filter(function(e){return I(e)})).concat(["txt","pgm"]))},[]),(0,x.useEffect)(function(){eP("Example date format: ".concat(eT(new Date)))},[eT]),(0,l.jsxs)(d.default,{direction:"column",gap:6,children:[(0,l.jsx)(m.default,{id:"settings-pagesize",label:"Gallery page size",type:"text",helperText:"Set to 0 to disable pagination - might cause performance issues on large sets of images",value:ev,onChange:function(e){return eE(e.target.value)},onBlur:function(){var e=Math.abs(parseInt(ev,10)||0);el(e),eE(e.toString(10))}}),(0,l.jsx)(m.default,{value:N,label:"Click behaviour for gallery images",select:!0,helperText:"Ctrl+Click and Shift+Click will always select/range-select",onChange:function(e){$(e.target.value)},children:A.s.map(function(e){var t=e.value,a=e.label;return(0,l.jsx)(c.default,{value:t,children:a},t)})}),(0,l.jsxs)(i.default,{children:[(0,l.jsx)(u.default,{shrink:!0,children:"Image export dimensions"}),(0,l.jsx)(g.default,{fullWidth:!0,value:F,onChange:function(e,t){Q(t)},children:[1,2,3,4,5,6,8,10].map(function(e){return(0,l.jsx)(p.default,{value:e,title:"".concat(160*e,"\xd7").concat(144*e),children:"".concat(e,"\xd7")},e)})})]}),(0,l.jsxs)(i.default,{children:[(0,l.jsx)(u.default,{shrink:!0,children:"Image export filetypes"}),(0,l.jsx)(g.default,{fullWidth:!0,value:h,onChange:function(e,t){Y(t)},children:eL.map(function(e){return(0,l.jsx)(p.default,{value:e,title:e,children:e},e)})})]}),(0,l.jsx)(m.default,{id:"settings-handle-export-frames",value:R,label:"How to handle frames when exporting images",select:!0,onChange:function(e){ee(e.target.value)},children:S.A.map(function(e){var t=e.id,a=e.name;return(0,l.jsx)(c.default,{value:t,children:a},t)})}),(0,l.jsx)(m.default,{id:"settings-filename-style",value:w,label:"Filename style",select:!0,onChange:function(e){Z(e.target.value)},children:_.y.map(function(e){var t=e.id,a=e.name;return(0,l.jsx)(c.default,{value:t,children:a},t)})}),(0,l.jsxs)(m.default,{id:"settings-sav-frames",value:eg.length?K:"",disabled:!eg.length,label:"Frames to be applied when importing Cartridge dumps",select:!0,slotProps:{inputLabel:{shrink:!0},select:{renderValue:function(e){var t;return""===e?"None":(null==(t=eg.find(function(t){return t.id===e}))?void 0:t.name)||"Unknown"}}},onChange:function(e){es(e.target.value)},placeholder:"None",children:[(0,l.jsx)(c.default,{value:"",selected:!K,children:"None"}),eg.map(function(e){var t=e.id,a=e.name;return(0,l.jsx)(c.default,{value:t,children:a},t)})]}),(0,l.jsx)(s.default,{label:"Import ‘last seen’ image when importing Cartridge dumps",control:(0,l.jsx)(f.default,{checked:G,onChange:function(e){en(e.target.checked)}})}),(0,l.jsx)(s.default,{label:"Import deleted images when importing Cartridge dumps",control:(0,l.jsx)(f.default,{checked:M,onChange:function(e){ea(e.target.checked)}})}),(0,l.jsx)(s.default,{label:"Force valid .sav file when importing",control:(0,l.jsx)(f.default,{checked:U,onChange:function(e){J(e.target.checked)}})}),(0,l.jsx)(s.default,{label:"Pad images up to 144px height on import",control:(0,l.jsx)(f.default,{checked:W,onChange:function(e){er(e.target.checked)}})}),(0,l.jsx)(s.default,{label:"Hide dates in gallery",control:(0,l.jsx)(f.default,{checked:V,onChange:function(e){et(e.target.checked)}})}),(0,l.jsx)(m.default,{id:"settings-filename-style",value:ew,label:"Sort Palettes",select:!0,onChange:function(e){eU(e.target.value)},children:eN.map(function(e){var t=e.value,a=e.label;return(0,l.jsx)(c.default,{value:t,children:a},t)})}),(0,l.jsx)(m.default,{id:"settings-filename-style",value:O,label:"Preferred locale",helperText:eD,select:!0,onChange:function(e){ei(e.target.value)},children:j.I.map(function(e){return(0,l.jsx)(c.default,{value:e,children:eF(e)},e)})}),(0,l.jsx)(b.A,{}),(null==ec?void 0:ec.env)==="esp8266"?null:(0,l.jsx)(m.default,{id:"settings-printer-url",label:"Printer URL",type:"text",helperText:(0,l.jsxs)(l.Fragment,{children:["If you own a physical wifi-printer, you can add it's URL here and check the ",(0,l.jsx)(o.default,{component:v(),href:"/import",children:"Import-tab"})]}),value:eb,onChange:function(e){return eS(e.target.value)},onBlur:function(){var e=(0,P.A)(eb,"http");eS(e),eo(e)},onKeyUp:function(e){switch(e.key){case"Enter":var t=(0,P.A)(eb,"http");eS(t),eo(t);break;case"Escape":eS(z)}}}),(null==ec?void 0:ec.env)==="esp8266"||z?(0,l.jsx)(m.default,{id:"settings-printer-settings",label:"Additional printer settings",type:"text",value:eA,onChange:function(e){return eC(e.target.value)},onBlur:function(){eu(eA)},onKeyUp:function(e){switch(e.key){case"Enter":eu(eA);break;case"Escape":eC(H)}}}):null,(0,l.jsx)(s.default,{label:"Show debug info",control:(0,l.jsx)(f.default,{checked:t,onChange:function(e){X(e.target.checked)}})}),(0,l.jsx)(s.default,{label:"Enable Image Groups ".concat(ep.length?"(".concat(ep.length," groups)"):""),control:(0,l.jsx)(f.default,{checked:a,onChange:function(e){q(e.target.checked)}})})]})}},49432:(e,t,a)=>{"use strict";a.d(t,{A:()=>n});let n=function(e,t){if(!e.trim())return"";if("/"===e&&"ws"!==t)return e;var a=!!e.match(RegExp("^".concat(t,"(s)?:\\/\\/"),"gi"));return"".concat(a?"":"".concat(t,"://")).concat(e).concat(e.endsWith("/")?"":"/")}},51055:(e,t,a)=>{Promise.resolve().then(a.bind(a,46914))},52166:(e,t,a)=>{"use strict";a.d(t,{A:()=>E});var n=a(693),r=a(78538),l=a(15905),i=a(65453),s=a(46786),u=a(39893),o=a(81445),c=a(80498),d=a(4862),f=a(27803),m=a(99999),p=a(44965),g=a(49432),h=a(10746),v=function(){var e="";if("undefined"!=typeof navigator){var t=(0,r._)(navigator.language.split("-"),2);e=[t[0],t[1]].filter(Boolean).join("-")}return p.I.includes(e)?e:p.I[0]};let E=(0,i.v)((0,s.Zr)(function(e){return{activePalette:"bw",bitmapQueueDither:!0,bitmapQueueSetting:u.f.WIDE,enableDebug:!1,exportFileTypes:["png"],exportScaleFactors:[4],fileNameStyle:o.B.FULL,forceMagicCheck:!0,galleryView:d.j.GALLERY_VIEW_1X,galleryClickAction:c.n.SELECT,handleExportFrame:l.H.FRAMEMODE_KEEP,hideDates:!1,importDeleted:!0,importLastSeen:!0,importPad:!1,lastBaudRate:115200,pageSize:30,preferredLocale:v(),printerParams:"",printerUrl:"",savFrameTypes:"int",themeName:m.V.BRIGHT,enableImageGroups:!1,sortPalettes:f.V.DEFAULT_DESC,useSerials:!1,videoParams:{},setActivePalette:function(t){return e({activePalette:t})},setBitmapQueueDither:function(t){return e({bitmapQueueDither:t})},setBitmapQueueSetting:function(t){return e({bitmapQueueSetting:t})},setEnableDebug:function(t){return e({enableDebug:t})},setFileNameStyle:function(t){return e({fileNameStyle:t})},setForceMagicCheck:function(t){return e({forceMagicCheck:t})},setGalleryView:function(t){return e({galleryView:t})},setGalleryClickAction:function(t){return e({galleryClickAction:t})},setHandleExportFrame:function(t){return e({handleExportFrame:t})},setHideDates:function(t){return e({hideDates:t})},setImportDeleted:function(t){return e({importDeleted:t})},setImportLastSeen:function(t){return e({importLastSeen:t})},setImportPad:function(t){return e({importPad:t})},setLastBaudRate:function(t){return e({lastBaudRate:t})},setPageSize:function(t){return e({pageSize:t})},setPrinterParams:function(t){return e({printerParams:t})},setPrinterUrl:function(t){return e({printerUrl:(0,g.A)(t,"http")})},setSavFrameTypes:function(t){return e({savFrameTypes:t})},setThemeName:function(t){return e({themeName:t})},setEnableImageGroups:function(t){return e({enableImageGroups:t})},setSortPalettes:function(t){return e({sortPalettes:t})},setUseSerials:function(t){return e({useSerials:t})},setVideoParams:function(t){return e(function(e){return{videoParams:(0,n._)({},e.videoParams,t)}})},setExportScaleFactors:function(t){return e({exportScaleFactors:t})},setExportFileTypes:function(t){return e({exportFileTypes:t})},setPreferredLocale:function(t){p.I.includes(t)?e({preferredLocale:t}):console.log('unknown locale "'.concat(t,'"'))}}},{name:"".concat(h.z,"-settings"),storage:(0,s.KU)(function(){return localStorage})}))},56491:(e,t,a)=>{"use strict";a.d(t,{A:()=>l});var n=function(e,t,a){var n=a.find(function(t){return t.id===e});if(n)return n.name;switch(e){case"hk":return"Hallo Katze!";case"int":return"International Frames (GameBoy Camera)";case"jp":return"Japanese Frames (Pocket Camera)";default:return t}},r=function(e){switch(e){case"int":return"_1";case"jp":return"_2";case"hk":return"_3";default:return e}};let l=function(e,t){return e.reduce(function(e,a){var r=a.id,l=a.name;try{var i,s=null==(i=r.match(/^[a-z]+/g))?void 0:i[0];if(!s)return e;return e.find(function(e){return e.id===s})||e.push({id:s,name:n(s,l,t)}),e}catch(t){return e}},[]).sort(function(e,t){var a=e.id,n=t.id,l=r(a),i=r(n);return l>i?1:l<i?-1:0})}},80498:(e,t,a)=>{"use strict";a.d(t,{n:()=>n,s:()=>r});var n=function(e){return e.SELECT="select",e.EDIT="edit",e.VIEW="view",e}({}),r=[{label:"Click selects the item",value:"select"},{label:"Click opens edit dialog",value:"edit"},{label:"Click opens the item in lightbox",value:"view"}]},81445:(e,t,a)=>{"use strict";a.d(t,{B:()=>n,y:()=>r});var n=function(e){return e.FULL="FULL",e.TITLE_ONLY="TITLE_ONLY",e.DATE_TITLE="DATE_TITLE",e}({}),r=[{id:"FULL",name:"Full Title"},{id:"DATE_TITLE",name:"Date and Title"},{id:"TITLE_ONLY",name:"Title only"}]},81543:(e,t,a)=>{"use strict";a.d(t,{A:()=>r});var n=a(15905);let r=[{id:n.H.FRAMEMODE_KEEP,name:"Keep frame"},{id:n.H.FRAMEMODE_CROP,name:"Crop frame"},{id:n.H.FRAMEMODE_SQUARE_BLACK,name:"Make image squared (add black)"},{id:n.H.FRAMEMODE_SQUARE_WHITE,name:"Make image squared (add white)"}]},85812:(e,t,a)=>{"use strict";a.d(t,{N:()=>i});var n=a(17652),r=a(12115),l=a(52166),i=function(){var e=(0,l.A)().hideDates,t=(0,n.kc)(),a=(0,r.useCallback)(function(e){return t.dateTime(new Date(e),"short")},[t]);return{formatterGallery:(0,r.useCallback)(function(t){return e||!t?null:a(t)},[a,e]),formatter:a}}},99999:(e,t,a)=>{"use strict";a.d(t,{V:()=>n});var n=function(e){return e.BRIGHT="theme-bright",e.DARK="theme-dark",e}({})}},e=>{var t=t=>e(e.s=t);e.O(0,[4453,700,7859,7271,8250,2491,6139,3313,8449,8681,6874,3611,2797,3790,1760,8441,1684,7358],()=>t(51055)),_N_E=e.O()}]);