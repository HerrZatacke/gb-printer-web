(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[7500],{806:(e,t,n)=>{"use strict";n.d(t,{A:()=>m});var a=n(86447),r=n(693),l=n(60376),s=n(78538),i=n(17652),u=n(12115),c=n(27803),o=n(11760),d=n(52166),f=n(55364);let m=function(){var e=(0,d.A)(),t=e.sortPalettes,n=e.setSortPalettes,m=(0,o.h)().images,p=(0,i.c3)("usePaletteSort"),g=(0,u.useMemo)(function(){return[{label:p("defaultAsc"),value:c.V.DEFAULT_ASC},{label:p("defaultDesc"),value:c.V.DEFAULT_DESC},{label:p("usageAsc"),value:c.V.USAGE_ASC},{label:p("usageDesc"),value:c.V.USAGE_DESC},{label:p("nameAsc"),value:c.V.NAME_ASC},{label:p("nameDesc"),value:c.V.NAME_DESC}]},[p]),h=(0,u.useMemo)(function(){return m.reduce(function(e,t){return(0,f.pl)(t)?e:(0,l._)((0,r._)({},e),(0,a._)({},t.palette,(e[t.palette]||0)+1))},{})},[m]),v=(0,u.useCallback)(function(e,n){var a=(0,s._)(t.split("_"),2),r=a[0],l="asc"===a[1]?1:-1;switch(r){case"usage":var i=h[e.shortName]||0,u=h[n.shortName]||0;if(i<u)return -1*l;if(i>u)return l;return 0;case"name":return e.name.localeCompare(n.name)*l;default:return l}},[h,t]);return{sortPalettes:t,setSortPalettes:n,paletteSortOptions:g,paletteUsages:h,sortFn:v}}},1607:(e,t,n)=>{"use strict";n.d(t,{D:()=>m,EnvProvider:()=>p});var a=n(97004),r=n(693),l=n(60376),s=n(78538),i=n(39249),u=n(95155),c=n(12115),o=n(52166),d=n(75380),f=(0,c.createContext)(null),m=function(){return(0,c.useContext)(f)},p=function(e){var t=e.children,n=(0,s._)((0,c.useState)(null),2),m=n[0],p=n[1],g=(0,o.A)().setPrinterUrl;return(0,c.useEffect)(function(){var e=["/gb-printer-web","/env.json"].filter(Boolean).join("/");e&&(0,a._)(function(){var t,n,a,s;return(0,i.YH)(this,function(i){switch(i.label){case 0:return i.trys.push([0,5,,6]),[4,(0,d.ZU)()];case 1:return i.sent(),[4,fetch(e)];case 2:return[4,i.sent().json()];case 3:return t=i.sent(),a=[(0,r._)({},t)],s={},[4,d.mU.driver()];case 4:return"esp8266"===(n=l._.apply(void 0,a.concat([(s.localforage=i.sent(),s)]))).env&&g("/"),p(n),[3,6];case 5:return i.sent(),p({version:"0.0.0",maximages:0,localforage:"error",env:"error",fstype:"-",bootmode:"-",oled:!1}),[3,6];case 6:return[2]}})})()},[g]),(0,u.jsx)(f.Provider,{value:m,children:t})}},4862:(e,t,n)=>{"use strict";n.d(t,{j:()=>a});var a=function(e){return e.GALLERY_VIEW_SMALL="small",e.GALLERY_VIEW_1X="1x",e.GALLERY_VIEW_2X="2x",e.GALLERY_VIEW_MAX="max",e.PALETTE_VIEW="res2x",e}({})},27803:(e,t,n)=>{"use strict";n.d(t,{V:()=>a});var a=function(e){return e.DEFAULT_ASC="default_asc",e.DEFAULT_DESC="default_desc",e.USAGE_ASC="usage_asc",e.USAGE_DESC="usage_desc",e.NAME_ASC="name_asc",e.NAME_DESC="name_desc",e}({})},30461:(e,t,n)=>{"use strict";n.d(t,{A:()=>u});var a=n(95155),r=n(4915),l=n(90835),s=n(17652);n(12115);var i=n(52166);let u=function(){var e=(0,i.A)(),t=e.useSerials,n=e.setUseSerials,u=(0,s.c3)("WebUSBGreeting");return(0,a.jsx)(r.default,{label:u("enableWebUsb"),control:(0,a.jsx)(l.default,{checked:t,onChange:function(e){n(e.target.checked)}})})}},39893:(e,t,n)=>{"use strict";n.d(t,{C:()=>r,f:()=>a});var a=function(e){return e.WIDER="wider",e.WIDE="wide",e.NORMAL="normal",e.NARROW="narrow",e.NARROWER="narrower",e.EMULATOR="emulator",e}({}),r=[{translationKey:"contrastSettings.wider",baseValues:[0,68,187,255],value:"wider"},{translationKey:"contrastSettings.wide",baseValues:[0,85,170,255],value:"wide"},{translationKey:"contrastSettings.normal",baseValues:[51,102,153,204],value:"normal"},{translationKey:"contrastSettings.narrow",baseValues:[69,115,162,208],value:"narrow"},{translationKey:"contrastSettings.narrower",baseValues:[85,113,141,170],value:"narrower"},{translationKey:"contrastSettings.emulator",baseValues:[64,144,224,255],value:"emulator"}]},44965:(e,t,n)=>{"use strict";n.d(t,{I:()=>a});var a=["en-GB","en-CA","en-US","de-DE"]},46914:(e,t,n)=>{"use strict";n.d(t,{default:()=>w});var a=n(78538),r=n(87025),l=n(95155),s=n(27088),i=n(4915),u=n(9943),c=n(31960),o=n(76380),d=n(7068),f=n(90835),m=n(78449),p=n(97644),g=n(3856),h=n(6874),v=n.n(h),E=n(17652),S=n(12115),x=n(30461),b=n(81543),A=n(81445),_=n(80498),y=n(1607),C=n(85812),D=n(806),k=n(44965),L=n(11760),j=n(52166),T=n(49432),F=n(56491),P={},I=function(e){if("undefined"==typeof document)return!1;if(void 0!==P[e])return P[e];var t=document.createElement("canvas");t.width=2,t.height=2;var n=t.toDataURL("image/".concat(e));return P[e]=0===n.indexOf("data:image/".concat(e,";base64")),P[e]},U=[{translationKey:"galleryClickActions.clickSelectsItem",value:_.n.SELECT},{translationKey:"galleryClickActions.clickOpensEditDialog",value:_.n.EDIT},{translationKey:"galleryClickActions.clickOpensLightbox",value:_.n.VIEW}];let w=function(){var e=(0,j.A)(),t=e.enableDebug,n=e.enableImageGroups,h=e.exportFileTypes,_=e.exportScaleFactors,P=e.fileNameStyle,w=e.forceMagicCheck,M=e.galleryClickAction,N=e.handleExportFrame,R=e.hideDates,V=e.importDeleted,G=e.importLastSeen,O=e.importPad,W=e.pageSize,B=e.preferredLocale,H=e.printerParams,K=e.printerUrl,z=e.savFrameTypes,Y=e.setExportFileTypes,Q=e.setExportScaleFactors,X=e.setEnableDebug,$=e.setEnableImageGroups,q=e.setFileNameStyle,Z=e.setForceMagicCheck,J=e.setGalleryClickAction,ee=e.setHandleExportFrame,et=e.setHideDates,en=e.setImportDeleted,ea=e.setImportLastSeen,er=e.setImportPad,el=e.setPageSize,es=e.setPreferredLocale,ei=e.setSavFrameTypes,eu=e.setPrinterParams,ec=e.setPrinterUrl,eo=(0,y.D)(),ed=(0,L.h)(),ef=ed.frames,em=ed.frameGroups,ep=ed.imageGroups,eg=(0,F.A)(ef,em),eh=(0,a._)((0,S.useState)(W.toString(10)),2),ev=eh[0],eE=eh[1],eS=(0,a._)((0,S.useState)(K),2),ex=eS[0],eb=eS[1],eA=(0,a._)((0,S.useState)(H),2),e_=eA[0],ey=eA[1],eC=(0,a._)((0,S.useState)(["txt","pgm"]),2),eD=eC[0],ek=eC[1],eL=(0,a._)((0,S.useState)(""),2),ej=eL[0],eT=eL[1],eF=(0,C.N)().formatter,eP=(0,E.c3)("SettingsGeneric"),eI=(0,D.A)(),eU=eI.sortPalettes,ew=eI.setSortPalettes,eM=eI.paletteSortOptions;return(0,S.useEffect)(function(){ek((0,r._)(["jpeg","jpg","png","webp","bmp","gif"].filter(function(e){return I(e)})).concat(["txt","pgm"]))},[]),(0,S.useEffect)(function(){eT(eP("exampleDateFormat",{format:eF(new Date)}))},[eF,eP]),(0,l.jsxs)(d.default,{direction:"column",gap:6,children:[(0,l.jsx)(m.default,{id:"settings-pagesize",label:eP("galleryPageSize"),type:"text",helperText:eP("galleryPageSizeHelper"),value:ev,onChange:function(e){return eE(e.target.value)},onBlur:function(){var e=Math.abs(parseInt(ev,10)||0);el(e),eE(e.toString(10))}}),(0,l.jsx)(m.default,{value:M,label:eP("galleryClickAction"),select:!0,helperText:eP("galleryClickActionHelper"),onChange:function(e){J(e.target.value)},children:U.map(function(e){var t=e.value,n=e.translationKey;return(0,l.jsx)(o.default,{value:t,children:eP(n)},t)})}),(0,l.jsxs)(s.default,{children:[(0,l.jsx)(u.default,{shrink:!0,children:eP("exportDimensions")}),(0,l.jsx)(g.default,{fullWidth:!0,value:_,onChange:function(e,t){Q(t)},children:[1,2,3,4,5,6,8,10].map(function(e){return(0,l.jsx)(p.default,{value:e,title:"".concat(160*e,"\xd7").concat(144*e),children:"".concat(e,"\xd7")},e)})})]}),(0,l.jsxs)(s.default,{children:[(0,l.jsx)(u.default,{shrink:!0,children:eP("exportFiletypes")}),(0,l.jsx)(g.default,{fullWidth:!0,value:h,onChange:function(e,t){Y(t)},children:eD.map(function(e){return(0,l.jsx)(p.default,{value:e,title:e,children:e},e)})})]}),(0,l.jsx)(m.default,{id:"settings-handle-export-frames",value:N,label:eP("exportHandleFrame"),select:!0,onChange:function(e){ee(e.target.value)},children:b.A.map(function(e){var t=e.id,n=e.name;return(0,l.jsx)(o.default,{value:t,children:eP(n)},t)})}),(0,l.jsx)(m.default,{id:"settings-filename-style",value:P,label:eP("filenameStyle"),select:!0,onChange:function(e){q(e.target.value)},children:A.y.map(function(e){var t=e.id,n=e.name;return(0,l.jsx)(o.default,{value:t,children:eP(n)},t)})}),(0,l.jsxs)(m.default,{id:"settings-sav-frames",value:eg.length?z:"",disabled:!eg.length,label:eP("importSavFrames"),select:!0,slotProps:{inputLabel:{shrink:!0},select:{renderValue:function(e){var t;return""===e?eP("importSavFramesNone"):(null==(t=eg.find(function(t){return t.id===e}))?void 0:t.name)||eP("importSavFramesUnknown")}}},onChange:function(e){ei(e.target.value)},placeholder:eP("importSavFramesNone"),children:[(0,l.jsx)(o.default,{value:"",selected:!z,children:"None"}),eg.map(function(e){var t=e.id,n=e.name;return(0,l.jsx)(o.default,{value:t,children:n},t)})]}),(0,l.jsx)(i.default,{label:eP("importLastSeen"),control:(0,l.jsx)(f.default,{checked:G,onChange:function(e){ea(e.target.checked)}})}),(0,l.jsx)(i.default,{label:eP("importDeleted"),control:(0,l.jsx)(f.default,{checked:V,onChange:function(e){en(e.target.checked)}})}),(0,l.jsx)(i.default,{label:eP("forceMagicCheck"),control:(0,l.jsx)(f.default,{checked:w,onChange:function(e){Z(e.target.checked)}})}),(0,l.jsx)(i.default,{label:eP("importPad"),control:(0,l.jsx)(f.default,{checked:O,onChange:function(e){er(e.target.checked)}})}),(0,l.jsx)(i.default,{label:eP("hideDates"),control:(0,l.jsx)(f.default,{checked:R,onChange:function(e){et(e.target.checked)}})}),(0,l.jsx)(m.default,{id:"settings-filename-style",value:eU,label:eP("sortPalettes"),select:!0,onChange:function(e){ew(e.target.value)},children:eM.map(function(e){var t=e.value,n=e.label;return(0,l.jsx)(o.default,{value:t,children:n},t)})}),(0,l.jsx)(m.default,{id:"settings-filename-style",value:B,label:eP("preferredLocale"),helperText:ej,select:!0,onChange:function(e){es(e.target.value)},children:k.I.map(function(e){return(0,l.jsx)(o.default,{value:e,children:eP("locales.".concat(e))},e)})}),(0,l.jsx)(x.A,{}),(null==eo?void 0:eo.env)==="esp8266"?null:(0,l.jsx)(m.default,{id:"settings-printer-url",label:eP("printerUrl"),type:"text",helperText:eP.rich("printerUrlHelper",{link:function(e){return(0,l.jsx)(c.default,{component:v(),href:"/import",children:e})}}),value:ex,onChange:function(e){return eb(e.target.value)},onBlur:function(){var e=(0,T.A)(ex,"http");eb(e),ec(e)},onKeyUp:function(e){switch(e.key){case"Enter":var t=(0,T.A)(ex,"http");eb(t),ec(t);break;case"Escape":eb(K)}}}),(null==eo?void 0:eo.env)==="esp8266"||K?(0,l.jsx)(m.default,{id:"settings-printer-settings",label:eP("printerParams"),type:"text",value:e_,onChange:function(e){return ey(e.target.value)},onBlur:function(){eu(e_)},onKeyUp:function(e){switch(e.key){case"Enter":eu(e_);break;case"Escape":ey(H)}}}):null,(0,l.jsx)(i.default,{label:eP("enableDebug"),control:(0,l.jsx)(f.default,{checked:t,onChange:function(e){X(e.target.checked)}})}),(0,l.jsx)(i.default,{label:eP("enableImageGroups",{groupCount:ep.length}),control:(0,l.jsx)(f.default,{checked:n,onChange:function(e){$(e.target.checked)}})})]})}},49432:(e,t,n)=>{"use strict";n.d(t,{A:()=>a});let a=function(e,t){if(!e.trim())return"";if("/"===e&&"ws"!==t)return e;var n=!!e.match(RegExp("^".concat(t,"(s)?:\\/\\/"),"gi"));return"".concat(n?"":"".concat(t,"://")).concat(e).concat(e.endsWith("/")?"":"/")}},51055:(e,t,n)=>{Promise.resolve().then(n.bind(n,46914))},52166:(e,t,n)=>{"use strict";n.d(t,{A:()=>E});var a=n(693),r=n(78538),l=n(15905),s=n(65453),i=n(46786),u=n(39893),c=n(81445),o=n(80498),d=n(4862),f=n(27803),m=n(99999),p=n(44965),g=n(49432),h=n(10746),v=function(){var e="";if("undefined"!=typeof navigator){var t=(0,r._)(navigator.language.split("-"),2);e=[t[0],t[1]].filter(Boolean).join("-")}return p.I.includes(e)?e:p.I[0]};let E=(0,s.v)((0,i.Zr)(function(e){return{activePalette:"bw",bitmapQueueDither:!0,bitmapQueueSetting:u.f.WIDE,enableDebug:!1,exportFileTypes:["png"],exportScaleFactors:[4],fileNameStyle:c.B.FULL,forceMagicCheck:!0,galleryView:d.j.GALLERY_VIEW_1X,galleryClickAction:o.n.SELECT,handleExportFrame:l.H.FRAMEMODE_KEEP,hideDates:!1,importDeleted:!0,importLastSeen:!0,importPad:!1,lastBaudRate:115200,pageSize:30,preferredLocale:v(),printerParams:"",printerUrl:"",savFrameTypes:"int",themeName:m.V.BRIGHT,enableImageGroups:!1,sortPalettes:f.V.DEFAULT_DESC,useSerials:!1,videoParams:{},setActivePalette:function(t){return e({activePalette:t})},setBitmapQueueDither:function(t){return e({bitmapQueueDither:t})},setBitmapQueueSetting:function(t){return e({bitmapQueueSetting:t})},setEnableDebug:function(t){return e({enableDebug:t})},setFileNameStyle:function(t){return e({fileNameStyle:t})},setForceMagicCheck:function(t){return e({forceMagicCheck:t})},setGalleryView:function(t){return e({galleryView:t})},setGalleryClickAction:function(t){return e({galleryClickAction:t})},setHandleExportFrame:function(t){return e({handleExportFrame:t})},setHideDates:function(t){return e({hideDates:t})},setImportDeleted:function(t){return e({importDeleted:t})},setImportLastSeen:function(t){return e({importLastSeen:t})},setImportPad:function(t){return e({importPad:t})},setLastBaudRate:function(t){return e({lastBaudRate:t})},setPageSize:function(t){return e({pageSize:t})},setPrinterParams:function(t){return e({printerParams:t})},setPrinterUrl:function(t){return e({printerUrl:(0,g.A)(t,"http")})},setSavFrameTypes:function(t){return e({savFrameTypes:t})},setThemeName:function(t){return e({themeName:t})},setEnableImageGroups:function(t){return e({enableImageGroups:t})},setSortPalettes:function(t){return e({sortPalettes:t})},setUseSerials:function(t){return e({useSerials:t})},setVideoParams:function(t){return e(function(e){return{videoParams:(0,a._)({},e.videoParams,t)}})},setExportScaleFactors:function(t){return e({exportScaleFactors:t})},setExportFileTypes:function(t){return e({exportFileTypes:t})},setPreferredLocale:function(t){p.I.includes(t)?e({preferredLocale:t}):console.log('unknown locale "'.concat(t,'"'))}}},{name:"".concat(h.z,"-settings"),storage:(0,i.KU)(function(){return localStorage})}))},56491:(e,t,n)=>{"use strict";n.d(t,{A:()=>l});var a=function(e,t,n){var a=n.find(function(t){return t.id===e});if(a)return a.name;switch(e){case"hk":return"Hallo Katze!";case"int":return"International Frames (GameBoy Camera)";case"jp":return"Japanese Frames (Pocket Camera)";default:return t}},r=function(e){switch(e){case"int":return"_1";case"jp":return"_2";case"hk":return"_3";default:return e}};let l=function(e,t){return e.reduce(function(e,n){var r=n.id,l=n.name;try{var s,i=null==(s=r.match(/^[a-z]+/g))?void 0:s[0];if(!i)return e;return e.find(function(e){return e.id===i})||e.push({id:i,name:a(i,l,t)}),e}catch(t){return e}},[]).sort(function(e,t){var n=e.id,a=t.id,l=r(n),s=r(a);return l>s?1:l<s?-1:0})}},80498:(e,t,n)=>{"use strict";n.d(t,{n:()=>a});var a=function(e){return e.SELECT="select",e.EDIT="edit",e.VIEW="view",e}({})},81445:(e,t,n)=>{"use strict";n.d(t,{B:()=>a,y:()=>r});var a=function(e){return e.FULL="FULL",e.TITLE_ONLY="TITLE_ONLY",e.DATE_TITLE="DATE_TITLE",e}({}),r=[{id:"FULL",name:"filenameStyles.fullTitle"},{id:"DATE_TITLE",name:"filenameStyles.dateTitle"},{id:"TITLE_ONLY",name:"filenameStyles.titleOnly"}]},81543:(e,t,n)=>{"use strict";n.d(t,{A:()=>r});var a=n(15905);let r=[{id:a.H.FRAMEMODE_KEEP,name:"frameModes.keepFrame"},{id:a.H.FRAMEMODE_CROP,name:"frameModes.cropFrame"},{id:a.H.FRAMEMODE_SQUARE_BLACK,name:"frameModes.squareBlack"},{id:a.H.FRAMEMODE_SQUARE_WHITE,name:"frameModes.squareWhite"}]},85812:(e,t,n)=>{"use strict";n.d(t,{N:()=>s});var a=n(17652),r=n(12115),l=n(52166),s=function(){var e=(0,l.A)().hideDates,t=(0,a.kc)(),n=(0,r.useCallback)(function(e){var n=new Date(e);return"string"==typeof e&&isNaN(n.getTime())&&(n=new Date(e.replace(/(\d{4}-\d{2}-\d{2}) (\d{2}:\d{2}:\d{2}):(\d{3})/,"$1T$2.$3"))),t.dateTime(n,"short")},[t]);return{formatterGallery:(0,r.useCallback)(function(t){return e||!t?null:n(t)},[n,e]),formatter:n}}},99999:(e,t,n)=>{"use strict";n.d(t,{V:()=>a});var a=function(e){return e.BRIGHT="theme-bright",e.DARK="theme-dark",e}({})}},e=>{var t=t=>e(e.s=t);e.O(0,[7652,4453,700,7859,7271,8250,2491,6139,3313,8449,8681,6874,3611,1559,1760,8441,1684,7358],()=>t(51055)),_N_E=e.O()}]);