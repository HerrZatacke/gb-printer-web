(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[7437],{1607:(e,t,n)=>{"use strict";n.d(t,{D:()=>p,EnvProvider:()=>h});var r=n(97004),s=n(693),u=n(60376),i=n(78538),a=n(39249),o=n(95155),l=n(12115),c=n(52166),f=n(75380),d=(0,l.createContext)(null),p=function(){return(0,l.useContext)(d)},h=function(e){var t=e.children,n=(0,i._)((0,l.useState)(null),2),p=n[0],h=n[1],v=(0,c.A)().setPrinterUrl;return(0,l.useEffect)(function(){var e=["/gb-printer-web","/env.json"].filter(Boolean).join("/");e&&(0,r._)(function(){var t,n,r,i;return(0,a.YH)(this,function(a){switch(a.label){case 0:return a.trys.push([0,5,,6]),[4,(0,f.ZU)()];case 1:return a.sent(),[4,fetch(e)];case 2:return[4,a.sent().json()];case 3:return t=a.sent(),r=[(0,s._)({},t)],i={},[4,f.mU.driver()];case 4:return"esp8266"===(n=u._.apply(void 0,r.concat([(i.localforage=a.sent(),i)]))).env&&v("/"),h(n),[3,6];case 5:return a.sent(),h({version:"0.0.0",maximages:0,localforage:"error",env:"error",fstype:"-",bootmode:"-",oled:!1}),[3,6];case 6:return[2]}})})()},[v]),(0,o.jsx)(d.Provider,{value:p,children:t})}},5687:(e,t,n)=>{"use strict";n.d(t,{A:()=>r});let r=n(14810).A},9700:(e,t,n)=>{"use strict";n.d(t,{A:()=>r});let r=n(22550).A},14810:(e,t,n)=>{"use strict";function r(e){return e&&e.ownerDocument||document}n.d(t,{A:()=>r})},21329:(e,t,n)=>{"use strict";n.d(t,{A:()=>r});let r=n(43430).A},22550:(e,t,n)=>{"use strict";function r(e,t=166){let n;function s(...r){clearTimeout(n),n=setTimeout(()=>{e.apply(this,r)},t)}return s.clear=()=>{clearTimeout(n)},s}n.d(t,{A:()=>r})},31178:(e,t,n)=>{"use strict";n.d(t,{A:()=>s});var r=n(14810);function s(e){return(0,r.A)(e).defaultView||window}},32299:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>l,useRtl:()=>o});var r=n(693),s=n(37414),u=n(12115),i=n(95155),a=u.createContext(),o=function(){var e=u.useContext(a);return null!=e&&e};let l=function(e){var t=e.value,n=(0,s._)(e,["value"]);return(0,i.jsx)(a.Provider,(0,r._)({value:null==t||t},n))}},34742:(e,t,n)=>{"use strict";n.d(t,{A:()=>r});let r=n(31178).A},38584:(e,t,n)=>{Promise.resolve().then(n.bind(n,91128))},50422:(e,t,n)=>{"use strict";n.d(t,{A:()=>c});var r=n(693),s=n(60376),u=n(37414),i=n(81616),a=n(13051),o=n(56501),l=n(89602);let c=function(e){var t,n=e.elementType,c=e.externalSlotProps,f=e.ownerState,d=e.skipResolvingSlotProps,p=(0,u._)(e,["elementType","externalSlotProps","ownerState","skipResolvingSlotProps"]),h=void 0!==d&&d?{}:(0,l.A)(c,f),v=(0,o.A)((0,s._)((0,r._)({},p),{externalSlotProps:h})),g=v.props,m=v.internalRef,_=(0,i.A)(m,null==h?void 0:h.ref,null==(t=e.additionalProps)?void 0:t.ref);return(0,a.A)(n,(0,s._)((0,r._)({},g),{ref:_}),f)}},53267:(e,t,n)=>{"use strict";n.d(t,{default:()=>l});var r=n(67908),s=n(34084),u=n(69077),i=n(54107),a=(0,n(55170).A)("MuiBox",["root"]),o=(0,u.A)();let l=(0,r.default)({themeId:i.A,defaultTheme:o,defaultClassName:a.root,generateClassName:s.A.generate})},61564:(e,t,n)=>{"use strict";n.d(t,{t:()=>v});var r=n(97004),s=n(39249),u=n(17652),i=n(12115),a=n(33236),o=n(39630),l=n(95939),c=n(23747),f=n(41186),d=n(3381),p=n(71620),h=n(11760),v=function(){var e=(0,u.c3)("useImageGroups"),t=(0,l.Z)().view,n=(0,f.A)(),v=n.dismissDialog,g=n.setDialog,m=(0,d.A)().setEditImageGroup,_=(0,h.h)(),x=_.deleteImageGroup,w=_.setImageGroups,b=_.images,A=(0,p.A)().imageSelection,S=(0,i.useMemo)(function(){if(!A.length)return"";var t,n=b.filter(function(e){var t=e.hash;return A.includes(t)}).map(function(e){return e.title}).filter(function(e){return e.length>3}),r=null==(t=(0,a.Hg)(n).filter(function(e){return e.length>3})[0])?void 0:t.trim();return r?r.replace(/[_-]/g," ").replace(/^\s*\d+\s+|\s+\d+\s*$/g,"").trim():e("newGroupDefault")},[A,b,e]);return{resetGroups:function(){g({message:e("resetGroupsMessage"),questions:function(){return[{key:"info",type:o.V.INFO,label:e("resetGroupsInfo")}]},confirm:(0,r._)(function(){return(0,s.YH)(this,function(e){return v(0),w([]),[2]})}),deny:(0,r._)(function(){return(0,s.YH)(this,function(e){return v(0),[2]})})})},createGroup:function(e){m({groupId:c.Ll,newGroupCover:e,newGroupTitle:S})},editGroup:function(e){m({groupId:e})},deleteGroup:function(n){var u=t.groups.find(function(e){return e.id===n});u&&g({message:e("deleteGroupMessage"),questions:function(){return[{key:"info",type:o.V.INFO,label:e("deleteGroupInfo",{groupTitle:u.title||u.slug})}]},confirm:(0,r._)(function(){return(0,s.YH)(this,function(e){return v(0),x(n),[2]})}),deny:(0,r._)(function(){return(0,s.YH)(this,function(e){return v(0),[2]})})})}}}},67908:(e,t,n)=>{"use strict";n.d(t,{default:()=>d});var r=n(693),s=n(37414),u=n(12115),i=n(52596),a=n(46879),o=n(13184),l=n(5300),c=n(64330),f=n(95155);function d(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.themeId,n=e.defaultTheme,d=e.defaultClassName,p=void 0===d?"MuiBox-root":d,h=e.generateClassName,v=(0,a.default)("div",{shouldForwardProp:function(e){return"theme"!==e&&"sx"!==e&&"as"!==e}})(o.A);return u.forwardRef(function(e,u){var a=(0,c.default)(n),o=(0,l.A)(e),d=o.className,g=o.component,m=(0,s._)(o,["className","component"]);return(0,f.jsx)(v,(0,r._)({as:void 0===g?"div":g,ref:u,className:(0,i.A)(d,h?h(p):p),theme:t&&a[t]||a},m))})}},91128:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>L});var r=n(95155),s=n(53267),u=n(7068),i=n(700),a=n(17652),o=n(12115),l=n(1607);let c=function(){var e=(0,l.D)(),t=(0,a.c3)("EnvInfo"),n=(0,o.useMemo)(function(){return e?[t("appVersion",{value:"1.49.8"}),t("appBranch",{value:"master"}),t("printerVersion",{value:e.version}),t("maxImages",{value:e.maximages}),t("storageDriver",{value:e.localforage}),t("envType",{value:e.env}),t("filesystem",{value:e.fstype}),t("bootmode",{value:e.bootmode}),t("hasOled",{value:e.oled?t("yes"):t("no")})]:[]},[e,t]);return(0,r.jsx)(u.default,{component:"ul",direction:"column",children:n.map(function(e){return(0,r.jsx)(i.default,{component:"li",variant:"caption",color:"textDisabled",align:"right",lineHeight:1.25,children:e},e)})})};var f=n(7642),d=n(61487),p=n(69229),h=n(61564),v=n(83936),g=n(97004),m=n(78538),_=n(39249),x=function(e){return e.PERSISTED="persisted",e.NOT_PERSISTED="not-persisted",e.FAILED="failed",e.NO_API="no_api",e}({}),w=!!("undefined"!=typeof navigator&&navigator.storage&&navigator.storage.persist),b=function(){var e=(0,g._)(function(e){return(0,_.YH)(this,function(t){switch(t.label){case 0:if(!w)return[3,2];return[4,navigator.storage.persisted()];case 1:return e(t.sent()?"persisted":"not-persisted"),[3,3];case 2:e("no_api"),t.label=3;case 3:return[2]}})});return function(t){return e.apply(this,arguments)}}(),A=function(){var e=(0,g._)(function(e){return(0,_.YH)(this,function(t){switch(t.label){case 0:if(!w)return[3,2];return[4,navigator.storage.persist()];case 1:return e(t.sent()?"persisted":"failed"),[3,3];case 2:e("no_api"),t.label=3;case 3:return[2]}})});return function(t){return e.apply(this,arguments)}}();let S=function(){var e,t=(0,m._)((0,o.useState)("not-persisted"),2),n=t[0],r=t[1];return(0,o.useEffect)(function(){b(r)},[]),{persistAPIAvailable:w,persisted:n,requestPersist:(e=(0,g._)(function(){return(0,_.YH)(this,function(e){return A(r),[2]})}),function(){return e.apply(this,arguments)})}};var P=n(86447),I=n(693),y=n(60376),C=n(633),j=n(11760),N=n(55364),E=n(5847),T=n(72623),G=function(){var e=(0,g._)(function(e,t,n){var r;return(0,_.YH)(this,function(s){switch(s.label){case 0:return[4,(0,E.T)(e,t)(n,!1)];case 1:if(!(r=s.sent()))return[2,null];return[4,(0,T.cg)(r)];case 2:if(s.sent().dataHash!==n)return[2,(0,T.UN)(r)];return[2,null]}})});return function(t,n,r){return e.apply(this,arguments)}}();let k=function(){var e=(0,j.h)(),t=e.frames,r=e.images,s=(0,C.g)().updateImageHash,u=(0,m._)((0,o.useState)(!0),2),i=u[0],a=u[1];return window.enableHashCleanup=function(){return a(!1)},{cleanupBusy:i,hashCleanup:(0,g._)(function(){var e,u,i;return(0,_.YH)(this,function(o){switch(o.label){case 0:return a(!0),e=0,u=0,[4,Promise.resolve().then(n.t.bind(n,52491,23))];case 1:var l;return i=o.sent().default,[4,Promise.all(r.map((l=(0,g._)(function(n){var a,o,l,c,f;return(0,_.YH)(this,function(d){switch(d.label){case 0:var p;if(a=n.hash,!(0,N.pl)(n))return[3,2];return[4,Promise.all(Object.keys(o=n.hashes).map((p=(0,g._)(function(e){var n,s;return(0,_.YH)(this,function(u){switch(u.label){case 0:if(n=o[e],s=null,!n)return[3,2];return[4,G(r,t,n)];case 1:s=u.sent(),u.label=2;case 2:return[2,(0,P._)({},e,s||n)]}})}),function(e){return p.apply(this,arguments)})))];case 1:return(c=i(l=d.sent().reduce(function(e,t){return(0,I._)({},e,t)},{})))!==a&&(e+=1,s(a,(0,y._)((0,I._)({},n),{hash:c,hashes:l}))),[3,4];case 2:return[4,G(r,t,a)];case 3:(f=d.sent())&&(u+=1,s(a,(0,y._)((0,I._)({},n),{hash:f}))),d.label=4;case 4:return[2]}})}),function(e){return l.apply(this,arguments)})))];case 2:return o.sent(),a(!1),console.info({iCounterRGBN:e,iCounterMono:u}),[2]}})})}};var H=function(e){switch(e){case x.PERSISTED:return"persistState.isPersistent";case x.NOT_PERSISTED:return"persistState.requestPersistence";case x.NO_API:return"persistState.apiUnavailable";case x.FAILED:default:return"persistState.failed"}};let D=function(){var e=k(),t=e.hashCleanup,n=e.cleanupBusy,s=(0,v.W)().downloadSettings,u=(0,a.c3)("ExportSettings"),i=(0,h.t)().resetGroups,o=function(e){return s(e)},l=S(),c=l.persisted,g=l.requestPersist;return(0,r.jsxs)(d.default,{variant:"contained",fullWidth:!0,children:[(0,r.jsx)(f.default,{title:u(H(c)),disabled:c!==x.NOT_PERSISTED,onClick:g,children:u(H(c))}),(0,r.jsx)(f.default,{title:u("resetGroups"),onClick:i,children:u("resetGroups")}),(0,r.jsx)(f.default,{title:u("exportAll"),onClick:function(){return o(p.m.ALL)},children:u("exportAll")}),(0,r.jsx)(f.default,{title:u("exportPlugins"),onClick:function(){return o(p.m.PLUGINS)},children:u("exportPlugins")}),(0,r.jsx)(f.default,{title:u("hashCleanup"),disabled:n,onClick:t,children:u("hashCleanup")})]})};var Y=n(18096),O=n(53369),R=n(6874),M=n.n(R),q=n(35695),B=n(99451);let F=function(){var e=(0,q.usePathname)(),t=(0,l.D)(),n=(0,a.c3)("SettingsTabs"),s=(0,o.useMemo)(function(){return[{path:"/settings/generic/",headline:n("genericSettings"),prefetch:!0},{path:"/settings/dropbox/",headline:n("dropboxSettings"),prefetch:!1},(null==t?void 0:t.env)==="esp8266"||(null==t?void 0:t.env)==="webpack-dev"?{path:"/settings/wifi/",headline:n("wifiSettings"),prefetch:!1}:null,{path:"/settings/plugins/",headline:n("pluginSettings"),prefetch:!1},{path:"/settings/git/",headline:n("gitSettings"),prefetch:!1}].reduce(B.N,[])},[n,t]),u=(0,o.useMemo)(function(){return s.length&&"/settings"!==e?e:null},[e,s]);return u?(0,r.jsx)(O.default,{value:u,children:s.map(function(e){var t=e.headline,n=e.path,s=e.prefetch;return(0,r.jsx)(Y.default,{label:t,component:M(),href:n,prefetch:s,value:n},n)})}):null};function L(e){var t,n,l,f=e.children,d=(0,a.c3)("Navigation"),p=(n=(t=(0,m._)((0,o.useState)(!1),2))[0],l=t[1],(0,o.useEffect)(function(){if("function"==typeof window.requestIdleCallback){var e=requestIdleCallback(function(){return l(!0)});return function(){window.cancelIdleCallback(e)}}var t=window.setTimeout(function(){return l(!0)},1e3);return function(){window.clearTimeout(t)}},[]),n);return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(i.default,{component:"h1",variant:"h1",children:d("settings")}),p&&(0,r.jsxs)(u.default,{direction:"column",gap:4,justifyContent:"space-between",sx:{flexGrow:1},children:[(0,r.jsxs)(u.default,{direction:"column",gap:6,children:[(0,r.jsx)(F,{}),(0,r.jsx)(s.default,{children:f}),(0,r.jsx)(D,{})]}),(0,r.jsx)(c,{})]})]})}},99451:(e,t,n)=>{"use strict";n.d(t,{N:()=>s});var r=n(87025),s=function(e,t){return t?(0,r._)(e).concat([t]):e}}},e=>{var t=t=>e(e.s=t);e.O(0,[7652,4453,700,7859,7271,8250,2491,7642,7890,1487,6672,6874,3678,4297,1760,3936,283,8441,1684,7358],()=>t(38584)),_N_E=e.O()}]);