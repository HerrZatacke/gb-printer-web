(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[7437],{1470:(e,t,n)=>{"use strict";n.d(t,{t:()=>r,z:()=>u});var r="ROOT",u=function(){return{id:r,slug:"",created:"",title:"Home",coverImage:"",images:[],groups:[],tags:[]}}},1607:(e,t,n)=>{"use strict";n.d(t,{D:()=>p,EnvProvider:()=>g});var r=n(97004),u=n(693),o=n(60376),a=n(62570),i=n(39249),s=n(95155),l=n(12115),c=n(52166),f=n(75380),d=(0,l.createContext)(null),p=function(){return(0,l.useContext)(d)},g=function(e){var t=e.children,n=(0,a._)((0,l.useState)(null),2),p=n[0],g=n[1],h=(0,c.A)().setPrinterUrl;return(0,l.useEffect)(function(){var e=["/gb-printer-web","/env.json"].filter(Boolean).join("/");e&&(0,r._)(function(){var t,n,r,a;return(0,i.YH)(this,function(i){switch(i.label){case 0:return i.trys.push([0,5,,6]),[4,(0,f.ZU)()];case 1:return i.sent(),[4,fetch(e)];case 2:return[4,i.sent().json()];case 3:return t=i.sent(),r=[(0,u._)({},t)],a={},[4,f.mU.driver()];case 4:return"esp8266"===(n=o._.apply(void 0,r.concat([(a.localforage=i.sent(),a)]))).env&&h("/"),g(n),[3,6];case 5:return i.sent(),g({version:"0.0.0",maximages:0,localforage:"error",env:"error",fstype:"-",bootmode:"-",oled:!1}),[3,6];case 6:return[2]}})})()},[h]),(0,s.jsx)(d.Provider,{value:p,children:t})}},5687:(e,t,n)=>{"use strict";n.d(t,{A:()=>r});let r=n(14810).A},7119:(e,t,n)=>{"use strict";n.d(t,{NavigationToolsProvider:()=>h,g:()=>v});var r=n(95155),u=n(12115),o=n(62570),a=n(35695),i=n(95939),s=n(45465),l=n(71620),c=n(52166),f=n(1470),d=n(66785),p=function(){var e=(0,a.useRouter)(),t=(0,i.Z)(),n=t.paths,r=t.root,p=t.isWorking,g=(0,o._)((0,u.useState)(!1),2),h=g[0],v=g[1],m=(0,l.A)(),I=m.sortBy,_=m.filtersActiveTags,w=m.recentImports,E=(0,c.A)().pageSize,T=(0,s.Y)(),b=T.path,S=T.getUrl,P=(0,u.useCallback)(function(e){return(0,d.S)(e,{filtersActiveTags:_,sortBy:I,recentImports:w})},[_,w,I]),x=(0,u.useCallback)(function(e,t){return Math.floor(P(t.images).findIndex(function(t){return t.hash===e})/E)},[P,E]),A=(0,u.useCallback)(function(e,t){var r;return e===f.t?S({pageIndex:t,group:""}):S({pageIndex:t,group:(null==(r=n.find(function(t){return e===t.group.id}))?void 0:r.absolutePath)||""})},[S,n]),C=(0,u.useMemo)(function(){var e;return(null==(e=n.find(function(e){return e.absolutePath===b}))?void 0:e.group)||r},[b,n,r]),G=(0,u.useCallback)(function(e){var t=n.find(function(t){return t.group.images.map(function(e){return e.hash}).includes(e)}),u=(null==t?void 0:t.absolutePath)||"";return S({pageIndex:x(e,(null==t?void 0:t.group)||r),group:u})},[x,S,n,r]),y=(0,u.useCallback)(function(e,t){p||window.setTimeout(function(){v({group:{id:e,pageIndex:t}})},1)},[p]),N=(0,u.useCallback)(function(e){window.setTimeout(function(){v({imageHash:e})},1)},[]);return(0,u.useEffect)(function(){if(!p&&h){var t=window.setTimeout(function(){h.imageHash?(e.push(G(h.imageHash)),v(!1)):h.group&&(e.push(A(h.group.id,h.group.pageIndex)),v(!1))},1);return function(){window.clearTimeout(t)}}},[A,G,p,e,h]),{currentGroup:C,getGroupPath:A,getImagePageIndexInGroup:x,navigateToGroup:y,navigateToImage:N}},g=(0,u.createContext)(null);function h(e){var t=e.children,n=p();return(0,r.jsx)(g.Provider,{value:n,children:t})}var v=function(){var e=(0,u.useContext)(g);if(!e)throw Error("useNavigationToolsContext must be used within an NavigationToolsProvider");return e}},9700:(e,t,n)=>{"use strict";n.d(t,{A:()=>r});let r=n(22550).A},14810:(e,t,n)=>{"use strict";function r(e){return e&&e.ownerDocument||document}n.d(t,{A:()=>r})},21329:(e,t,n)=>{"use strict";n.d(t,{A:()=>r});let r=n(43430).A},22550:(e,t,n)=>{"use strict";function r(e,t=166){let n;function u(...r){clearTimeout(n),n=setTimeout(()=>{e.apply(this,r)},t)}return u.clear=()=>{clearTimeout(n)},u}n.d(t,{A:()=>r})},23747:(e,t,n)=>{"use strict";n.d(t,{Ay:()=>b,BF:()=>w,Ll:()=>_});var r=n(97004),u=n(693),o=n(60376),a=n(62570),i=n(39249),s=n(30832),l=n.n(s),c=n(12115),f=n(5432),d=n(95939),p=n(7119),g=n(45465),h=n(3381),v=n(71620),m=n(11760),I=n(80360),_="NEW_GROUP",w=function(e){return e.trim().replace(/[^A-Z0-9_-]+/gi,"_").toLowerCase()},E=function(e,t){return e.find(function(e){return e.group.groups.find(function(e){return e.id===t})})||null},T=function(e){return e.CREATE_NEW="CREATE_NEW",e.EDIT_EXISTING="EDIT_EXISTING",e.NOT_EDITING="NOT_EDITING",e}(T||{});let b=function(){var e,t=(0,v.A)().imageSelection,n=(0,h.A)(),s=n.editImageGroup,T=n.cancelEditImageGroup,b=(0,m.h)(),S=b.imageGroups,P=b.addImageGroup,x=b.updateImageGroup,A=b.groupImagesAdd,C=b.ungroupImages,G=(0,p.g)(),y=G.navigateToGroup,N=G.navigateToImage,j=(0,d.Z)(),k=j.view,D=j.paths,M=j.pathsOptions,R=(0,g.Y)().path,H=t.length,O=(null==s?void 0:s.groupId)?s.groupId===_?"CREATE_NEW":"EDIT_EXISTING":"NOT_EDITING",L=(0,c.useMemo)(function(){switch(O){case"CREATE_NEW":var e=(null==s?void 0:s.newGroupTitle)||"";return{imageGroup:null,parentPathMap:D.find(function(e){return e.group.id===k.id})||null,title:e,slug:w(e),slugTouched:!1};case"EDIT_EXISTING":var t=S.find(function(e){return e.id===(null==s?void 0:s.groupId)})||null;return{imageGroup:t,parentPathMap:(null==s?void 0:s.groupId)?E(D,s.groupId):null,title:(null==t?void 0:t.title)||"",slug:(null==t?void 0:t.slug)||"",slugTouched:!0};default:return{imageGroup:null,parentPathMap:null,title:"",slug:"",slugTouched:!1}}},[s,O,S,D,k]),W=(0,a._)((0,c.useState)(L.title),2),Y=W[0],U=W[1],B=(0,a._)((0,c.useState)(L.slug),2),F=B[0],q=B[1],z=(0,a._)((0,c.useState)(L.slugTouched),2),X=z[0],Z=z[1],V=(0,a._)((0,c.useState)((null==(e=L.parentPathMap)?void 0:e.absolutePath)||""),2),K=V[0],$=V[1],J=(0,c.useMemo)(function(){if(!(null==s?void 0:s.groupId))return"";if((null==s?void 0:s.groupId)===_)return"".concat(R).concat(F,"/");var e=E(D,s.groupId),t=(null==e?void 0:e.absolutePath)||"";return"".concat(t).concat(F,"/")},[s,D,R,F]),Q=(0,c.useMemo)(function(){return!!D.find(function(e){return e.absolutePath===J})},[J,D]),ee=(0,c.useMemo)(function(){var e;return F!==(null==(e=L.imageGroup)?void 0:e.slug)},[L,F]),et=(0,c.useMemo)(function(){return!!F&&("CREATE_NEW"===O?!Q:"EDIT_EXISTING"===O&&(!ee||!Q))},[O,F,Q,ee]),en=(0,c.useMemo)(function(){var e,t,n=(null==(e=D.find(function(e){return e.absolutePath===K}))?void 0:e.group.id)||"";return((null==(t=L.parentPathMap)?void 0:t.group.id)||"")!==n},[L,K,D]),er=(0,c.useMemo)(function(){switch(O){case"EDIT_EXISTING":var e,t=(null==(e=D.find(function(e){return e.group.id===(null==s?void 0:s.groupId)}))?void 0:e.absolutePath)||"";return M.filter(function(e){var n=e.value;return!n.startsWith(J)&&n!==t});case"CREATE_NEW":return M;default:return[]}},[J,s,O,D,M]);return{editId:(null==s?void 0:s.groupId)||null,absoluteSlug:J,possibleParents:er,slug:F,title:Y,canConfirm:et,canMove:en,slugIsInUse:Q,slugWasChanged:ee,parentSlug:K,selectionCount:H,setSlug:function(e){q(e),Z(!0)},setTitle:function(e){U(e),(e.length<2||!X)&&(Z(!1),q(w(e)))},setParentSlug:$,confirm:function(){if(T(),et&&s){var e,n=(null==(e=D.find(function(e){return e.absolutePath===K}))?void 0:e.group.id)||"";if(s.groupId===_){if(!s.newGroupCover)return;var r=(0,I.z)();P({id:r,slug:F,title:Y,created:l()(Date.now()).format(f.i$),coverImage:s.newGroupCover,images:t,groups:[]},n),y(r,0)}else{if(!L.imageGroup)return;x((0,o._)((0,u._)({},L.imageGroup),{slug:F,title:Y}),n),y(s.groupId,0)}}},move:(0,r._)(function(){var e,n;return(0,i.YH)(this,function(r){return T(),en&&((n=(null==(e=D.find(function(e){return e.absolutePath===K}))?void 0:e.group.id)||"")?A(n,t):C(t),N(t[0])),[2]})}),cancelEditImageGroup:T}}},29032:(e,t,n)=>{"use strict";n.d(t,{j:()=>a});var r=n(62570),u=n(35695),o=n(12115),a=function(){var e=(0,u.usePathname)(),t=(0,r._)((0,o.useState)(new URLSearchParams),2),n=t[0],a=t[1];(0,o.useEffect)(function(){var e=function(){window.setTimeout(function(){a(new URLSearchParams(window.location.search))},1)};e(),window.addEventListener("popstate",e);var t=history.pushState,n=history.replaceState;return history.pushState=function(){for(var n=arguments.length,r=Array(n),u=0;u<n;u++)r[u]=arguments[u];t.apply(this,r),e()},history.replaceState=function(){for(var t=arguments.length,r=Array(t),u=0;u<t;u++)r[u]=arguments[u];n.apply(this,r),e()},function(){window.removeEventListener("popstate",e),history.pushState=t,history.replaceState=n}},[e]);var i=(0,o.useMemo)(function(){return n.toString()},[n]);return{fullPath:(0,o.useMemo)(function(){return i?"".concat(e,"?").concat(i):e},[e,i]),pathname:e,query:i,searchParams:n}}},31178:(e,t,n)=>{"use strict";n.d(t,{A:()=>u});var r=n(14810);function u(e){return(0,r.A)(e).defaultView||window}},32134:(e,t,n)=>{"use strict";n.d(t,{GalleryTreeContext:()=>p,K:()=>d});var r=n(62570),u=n(95155),o=n(7062),a=n(12115),i=n(45465),s=n(46498),l=n(11760),c=n(52166),f=n(1470),d=(0,a.createContext)({root:(0,f.z)(),view:(0,f.z)(),images:[],covers:[],paths:[],pathsOptions:[],isWorking:!1});function p(e){var t=e.children,p=(0,r._)((0,a.useState)(!0),2),g=p[0],h=p[1],v=(0,r._)((0,a.useState)((0,f.z)()),2),m=v[0],I=v[1],_=(0,r._)((0,a.useState)([]),2),w=_[0],E=_[1],T=(0,r._)((0,a.useState)([]),2),b=T[0],S=T[1],P=(0,c.A)(),x=P.enableImageGroups,A=P.enableDebug,C=(0,s.A)().setError,G=(0,l.h)(),y=G.imageGroups,N=G.images,j=G.setImageGroups,k=(0,a.useMemo)(function(){return x?y:[]},[x,y]),D=(0,i.Y)().path;(0,a.useEffect)(function(){var e=new Worker(n.tu(new URL(n.p+n.u(2819),n.b)),{type:void 0}),t=(0,o.LV)(e),r=[],u=(0,o.BX)(function(e){r.push(e)});return h(!0),t.calculate({imageGroups:k,stateImages:N},u).then(function(e){if(I(e.root),E(e.paths),S(e.pathsOptions),r.length&&C(Error(r.join("\n"))),x&&(console.log(1,y.length,e.paths.length),y.length>e.paths.length)){console.log(2);var t=e.paths.map(function(e){return e.group.id});j(y.filter(function(e){var n=e.id;return t.includes(n)}))}A&&console.info("worker ran for ".concat(e.duration.toFixed(2),"ms"))}).catch(function(e){console.error(e),C(e)}).finally(function(){h(!1),e.terminate()}),function(){e.terminate(),h(!1)}},[A,x,k,C,j,y,N]);var M=(0,a.useMemo)(function(){var e,t=(null==(e=w.find(function(e){return e.absolutePath===D}))?void 0:e.group)||m,n=t.groups.map(function(e){return e.coverImage}),r=t.images.filter(function(e){return!n.includes(e.hash)});return{view:t,covers:n,paths:w,images:r,pathsOptions:b,root:m,isWorking:g}},[D,w,b,m,g]);return(0,u.jsx)(d.Provider,{value:M,children:t})}},32299:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>l,useRtl:()=>s});var r=n(693),u=n(37414),o=n(12115),a=n(95155),i=o.createContext(),s=function(){var e=o.useContext(i);return null!=e&&e};let l=function(e){var t=e.value,n=(0,u._)(e,["value"]);return(0,a.jsx)(i.Provider,(0,r._)({value:null==t||t},n))}},34742:(e,t,n)=>{"use strict";n.d(t,{A:()=>r});let r=n(31178).A},38584:(e,t,n)=>{Promise.resolve().then(n.bind(n,91128))},45465:(e,t,n)=>{"use strict";n.d(t,{Y:()=>i});var r=n(62570),u=n(12115),o=n(29032),a="/gallery/",i=function(){var e,t=(0,o.j)(),n=t.searchParams,i=t.pathname,s=(0,r._)((0,u.useState)(""),2),l=s[0],c=s[1],f=parseInt(null!=(e=n.get("page"))?e:"1",10)-1,d=n.get("group")||"",p=(0,u.useCallback)(function(e){var t="number"==typeof e.pageIndex?e.pageIndex:f,n="string"==typeof e.group?e.group:d,r="".concat(a,"?page=").concat(t+1);return n.length&&(r="".concat(r,"&group=").concat(n)),r},[f,d]);return(0,u.useEffect)(function(){i===a&&c(p({pageIndex:f,group:d}))},[d,f,i,p]),{pageIndex:f,path:d,lastGalleryLink:l,getUrl:p}}},50422:(e,t,n)=>{"use strict";n.d(t,{A:()=>c});var r=n(693),u=n(60376),o=n(37414),a=n(81616),i=n(13051),s=n(56501),l=n(89602);let c=function(e){var t,n=e.elementType,c=e.externalSlotProps,f=e.ownerState,d=e.skipResolvingSlotProps,p=(0,o._)(e,["elementType","externalSlotProps","ownerState","skipResolvingSlotProps"]),g=void 0!==d&&d?{}:(0,l.A)(c,f),h=(0,s.A)((0,u._)((0,r._)({},p),{externalSlotProps:g})),v=h.props,m=h.internalRef,I=(0,a.A)(m,null==g?void 0:g.ref,null==(t=e.additionalProps)?void 0:t.ref);return(0,i.A)(n,(0,u._)((0,r._)({},v),{ref:I}),f)}},53267:(e,t,n)=>{"use strict";n.d(t,{default:()=>l});var r=n(67908),u=n(34084),o=n(69077),a=n(54107),i=(0,n(55170).A)("MuiBox",["root"]),s=(0,o.A)();let l=(0,r.default)({themeId:a.A,defaultTheme:s,defaultClassName:i.root,generateClassName:u.A.generate})},61564:(e,t,n)=>{"use strict";n.d(t,{t:()=>g});var r=n(97004),u=n(39249),o=n(12115),a=n(33236),i=n(39630),s=n(95939),l=n(23747),c=n(41186),f=n(3381),d=n(71620),p=n(11760),g=function(){var e=(0,s.Z)().view,t=(0,c.A)(),n=t.dismissDialog,g=t.setDialog,h=(0,f.A)().setEditImageGroup,v=(0,p.h)(),m=v.deleteImageGroup,I=v.setImageGroups,_=v.images,w=(0,d.A)().imageSelection,E=(0,o.useMemo)(function(){if(!w.length)return"";var e,t=_.filter(function(e){var t=e.hash;return w.includes(t)}).map(function(e){return e.title}).filter(function(e){return e.length>3}),n=null==(e=(0,a.Hg)(t).filter(function(e){return e.length>3})[0])?void 0:e.trim();return n?n.replace(/[_-]/g," ").replace(/^\s*\d+\s+|\s+\d+\s*$/g,"").trim():"New Group"},[w,_]);return{resetGroups:function(){g({message:"Reset image groups?",questions:function(){return[{key:"info",type:i.V.INFO,label:"This will remove ALL your created groups and all existing images will be moved to the top level."}]},confirm:(0,r._)(function(){return(0,u.YH)(this,function(e){return n(0),I([]),[2]})}),deny:(0,r._)(function(){return(0,u.YH)(this,function(e){return n(0),[2]})})})},createGroup:function(e){h({groupId:l.Ll,newGroupCover:e,newGroupTitle:E})},editGroup:function(e){h({groupId:e})},deleteGroup:function(t){var o=e.groups.find(function(e){return e.id===t});o&&g({message:"Delete image group?",questions:function(){return[{key:"info",type:i.V.INFO,label:'This will delete this group "'.concat(o.title||o.slug,'" and move all children (images & groups) to the current level.')}]},confirm:(0,r._)(function(){return(0,u.YH)(this,function(e){return n(0),m(t),[2]})}),deny:(0,r._)(function(){return(0,u.YH)(this,function(e){return n(0),[2]})})})}}}},67908:(e,t,n)=>{"use strict";n.d(t,{default:()=>d});var r=n(693),u=n(37414),o=n(12115),a=n(52596),i=n(46879),s=n(13184),l=n(5300),c=n(64330),f=n(95155);function d(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.themeId,n=e.defaultTheme,d=e.defaultClassName,p=void 0===d?"MuiBox-root":d,g=e.generateClassName,h=(0,i.default)("div",{shouldForwardProp:function(e){return"theme"!==e&&"sx"!==e&&"as"!==e}})(s.A);return o.forwardRef(function(e,o){var i=(0,c.default)(n),s=(0,l.A)(e),d=s.className,v=s.component,m=(0,u._)(s,["className","component"]);return(0,f.jsx)(h,(0,r._)({as:void 0===v?"div":v,ref:o,className:(0,a.A)(d,g?g(p):p),theme:t&&i[t]||i},m))})}},80360:(e,t,n)=>{"use strict";n.d(t,{z:()=>r});var r=n(51368).A},91128:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>U});var r=n(95155),u=n(53267),o=n(7068),a=n(700),i=n(12115),s=n(1607);let l=function(){var e=(0,s.D)(),t=(0,i.useMemo)(function(){return e?["Web-App version: ".concat("master"),"Web-App branch: ".concat("1.48.2"),"Printer version: ".concat(e.version),"Max Images: ".concat(e.maximages),"Localforage driver: ".concat(e.localforage),"Environment type: ".concat(e.env),"Compiled Filesystem: ".concat(e.fstype),"Compiled Bootmode: ".concat(e.bootmode),"Compiled for OLED: ".concat(e.oled?"yes":"no")]:[]},[e]);return(0,r.jsx)(o.default,{component:"ul",direction:"column",children:t.map(function(e){return(0,r.jsx)(a.default,{component:"li",variant:"caption",color:"textDisabled",align:"right",lineHeight:1.25,children:e},e)})})};var c=n(7642),f=n(61487),d=n(69229),p=n(61564),g=n(83936),h=n(97004),v=n(62570),m=n(39249),I=function(e){return e.PERSISTED="persisted",e.NOT_PERSISTED="not-persisted",e.FAILED="failed",e.NO_API="no_api",e}({}),_=!!("undefined"!=typeof navigator&&navigator.storage&&navigator.storage.persist),w=function(){var e=(0,h._)(function(e){return(0,m.YH)(this,function(t){switch(t.label){case 0:if(!_)return[3,2];return[4,navigator.storage.persisted()];case 1:return e(t.sent()?"persisted":"not-persisted"),[3,3];case 2:e("no_api"),t.label=3;case 3:return[2]}})});return function(t){return e.apply(this,arguments)}}(),E=function(){var e=(0,h._)(function(e){return(0,m.YH)(this,function(t){switch(t.label){case 0:if(!_)return[3,2];return[4,navigator.storage.persist()];case 1:return e(t.sent()?"persisted":"failed"),[3,3];case 2:e("no_api"),t.label=3;case 3:return[2]}})});return function(t){return e.apply(this,arguments)}}();let T=function(){var e,t=(0,v._)((0,i.useState)("not-persisted"),2),n=t[0],r=t[1];return(0,i.useEffect)(function(){w(r)},[]),{persistAPIAvailable:_,persisted:n,requestPersist:(e=(0,h._)(function(){return(0,m.YH)(this,function(e){return E(r),[2]})}),function(){return e.apply(this,arguments)})}};var b=n(86447),S=n(693),P=n(60376),x=n(633),A=n(11760),C=n(55364),G=n(5847),y=n(72623),N=function(){var e=(0,h._)(function(e,t,n){var r;return(0,m.YH)(this,function(u){switch(u.label){case 0:return[4,(0,G.T)(e,t)(n,!1)];case 1:if(!(r=u.sent()))return[2,null];return[4,(0,y.cg)(r)];case 2:if(u.sent().dataHash!==n)return[2,(0,y.UN)(r)];return[2,null]}})});return function(t,n,r){return e.apply(this,arguments)}}();let j=function(){var e=(0,A.h)(),t=e.frames,r=e.images,u=(0,x.g)().updateImageHash,o=(0,v._)((0,i.useState)(!0),2),a=o[0],s=o[1];return window.enableHashCleanup=function(){return s(!1)},{cleanupBusy:a,hashCleanup:(0,h._)(function(){var e,o,a;return(0,m.YH)(this,function(i){switch(i.label){case 0:return s(!0),e=0,o=0,[4,Promise.resolve().then(n.t.bind(n,52491,23))];case 1:var l;return a=i.sent().default,[4,Promise.all(r.map((l=(0,h._)(function(n){var i,s,l,c,f;return(0,m.YH)(this,function(d){switch(d.label){case 0:var p;if(i=n.hash,!(0,C.pl)(n))return[3,2];return[4,Promise.all(Object.keys(s=n.hashes).map((p=(0,h._)(function(e){var n,u;return(0,m.YH)(this,function(o){switch(o.label){case 0:if(n=s[e],u=null,!n)return[3,2];return[4,N(r,t,n)];case 1:u=o.sent(),o.label=2;case 2:return[2,(0,b._)({},e,u||n)]}})}),function(e){return p.apply(this,arguments)})))];case 1:return(c=a(l=d.sent().reduce(function(e,t){return(0,S._)({},e,t)},{})))!==i&&(e+=1,u(i,(0,P._)((0,S._)({},n),{hash:c,hashes:l}))),[3,4];case 2:return[4,N(r,t,i)];case 3:(f=d.sent())&&(o+=1,u(i,(0,P._)((0,S._)({},n),{hash:f}))),d.label=4;case 4:return[2]}})}),function(e){return l.apply(this,arguments)})))];case 2:return i.sent(),s(!1),console.info({iCounterRGBN:e,iCounterMono:o}),[2]}})})}};var k=function(e){switch(e){case I.PERSISTED:return"Storage is persistent";case I.NOT_PERSISTED:return"Request storage persistence";case I.NO_API:return"Persistance API not available";case I.FAILED:default:return"Failed to persist storage"}};let D=function(){var e=j(),t=e.hashCleanup,n=e.cleanupBusy,u=(0,g.W)().downloadSettings,o=(0,p.t)().resetGroups,a=function(e){return u(e)},i=T(),s=i.persisted,l=i.requestPersist;return(0,r.jsxs)(f.default,{variant:"contained",fullWidth:!0,children:[(0,r.jsx)(c.default,{disabled:s!==I.NOT_PERSISTED,onClick:l,children:k(s)}),(0,r.jsx)(c.default,{onClick:o,children:"Reset image groups"}),(0,r.jsx)(c.default,{onClick:function(){return a(d.m.ALL)},children:"Export Everything"}),(0,r.jsx)(c.default,{onClick:function(){return a(d.m.PLUGINS)},children:"Export Plugins"}),(0,r.jsx)(c.default,{disabled:n,onClick:t,children:"Hash Cleanup"})]})};var M=n(18096),R=n(53369),H=n(6874),O=n.n(H),L=n(35695),W=n(99451);let Y=function(){var e=(0,L.usePathname)(),t=(0,s.D)(),n=(0,i.useMemo)(function(){return[{path:"/settings/generic/",headline:"Generic Settings",prefetch:!0},{path:"/settings/dropbox/",headline:"Dropbox Settings",prefetch:!1},(null==t?void 0:t.env)==="esp8266"||(null==t?void 0:t.env)==="webpack-dev"?{path:"/settings/wifi/",headline:"WiFi Settings",prefetch:!1}:null,{path:"/settings/plugins/",headline:"Plugin Settings",prefetch:!1},{path:"/settings/git/",headline:"Git Settings",prefetch:!1}].reduce(W.N,[])},[t]),u=(0,i.useMemo)(function(){return n.length&&"/settings"!==e?e:null},[e,n]);return u?(0,r.jsx)(R.default,{value:u,children:n.map(function(e){var t=e.headline,n=e.path,u=e.prefetch;return(0,r.jsx)(M.default,{label:t,component:O(),href:n,prefetch:u,value:n},n)})}):null};function U(e){var t,n,s,c=e.children,f=(n=(t=(0,v._)((0,i.useState)(!1),2))[0],s=t[1],(0,i.useEffect)(function(){if("function"==typeof window.requestIdleCallback){var e=requestIdleCallback(function(){return s(!0)});return function(){window.cancelIdleCallback(e)}}var t=window.setTimeout(function(){return s(!0)},1e3);return function(){window.clearTimeout(t)}},[]),n);return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(a.default,{component:"h1",variant:"h1",children:"Settings"}),f&&(0,r.jsxs)(o.default,{direction:"column",gap:4,justifyContent:"space-between",sx:{flexGrow:1},children:[(0,r.jsxs)(o.default,{direction:"column",gap:6,children:[(0,r.jsx)(Y,{}),(0,r.jsx)(u.default,{children:c}),(0,r.jsx)(D,{})]}),(0,r.jsx)(l,{})]})]})}},95939:(e,t,n)=>{"use strict";n.d(t,{Z:()=>o});var r=n(12115),u=n(32134),o=function(){return(0,r.useContext)(u.K)}},99451:(e,t,n)=>{"use strict";n.d(t,{N:()=>u});var r=n(577),u=function(e,t){return t?(0,r._)(e).concat([t]):e}}},e=>{var t=t=>e(e.s=t);e.O(0,[4453,700,7859,7271,4831,5394,7642,1487,9758,6874,3678,4297,1760,3936,6950,8441,5955,1684,7358],()=>t(38584)),_N_E=e.O()}]);