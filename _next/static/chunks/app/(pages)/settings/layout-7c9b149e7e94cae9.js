(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[7437],{7745:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>B});var r=n(95155),u=n(41574),i=n(41942),a=n(80317),o=n(18955),s=n(45377),l=n(32893),c=n.n(l),f=n(12115),d=n(32614),p=n(40433);let g=function(){var e=(0,d.D)(),t=(0,o.c3)("EnvInfo"),n=(0,p.j)().storageEstimate,u=(0,f.useMemo)(function(){return e?[t("appVersion",{value:"1.52.0"}),t("appBranch",{value:"master"}),t("printerVersion",{value:e.version}),t("maxImages",{value:e.maximages}),t("storageDriver",{value:e.localforage})].concat((0,s._)(n.map(function(e){return t("storageEstimate",{type:e.type,total:c()(e.total),used:c()(e.used),percentage:e.percentage.toFixed(2)})})),[t("envType",{value:e.env}),t("filesystem",{value:e.fstype}),t("bootmode",{value:e.bootmode}),t("hasOled",{value:e.oled?t("yes"):t("no")})]):[]},[e,n,t]);return(0,r.jsx)(i.A,{component:"ul",direction:"column",children:u.map(function(e){return(0,r.jsx)(a.A,{component:"li",variant:"caption",color:"textDisabled",align:"right",lineHeight:1.25,children:e},e)})})};var h=n(64647),v=n(32968),m=n(46544),E=n(65301),I=n(83231),_=n(61975),S=n(22043),b=n(71450),T=function(e){return e.PERSISTED="persisted",e.NOT_PERSISTED="not-persisted",e.FAILED="failed",e.NO_API="no_api",e}({}),A=!!("undefined"!=typeof navigator&&navigator.storage&&navigator.storage.persist);let y=function(){var e=(0,S._)((0,f.useState)("not-persisted"),2),t=e[0],n=e[1];return(0,f.useEffect)(function(){(0,_._)(function(){return(0,b.YH)(this,function(e){switch(e.label){case 0:if(!A)return[3,2];return[4,navigator.storage.persisted()];case 1:return n(e.sent()?"persisted":"not-persisted"),[3,3];case 2:n("no_api"),e.label=3;case 3:return[2]}})})()},[]),{persistAPIAvailable:A,persisted:t,requestPersist:function(){return(0,_._)(function(){return(0,b.YH)(this,function(e){return(0,_._)(function(){return(0,b.YH)(this,function(e){switch(e.label){case 0:if(!A)return[3,2];return[4,navigator.storage.persist()];case 1:return n(e.sent()?"persisted":"failed"),[3,3];case 2:n("no_api"),e.label=3;case 3:return[2]}})})(),[2]})})()}}};var w=n(87922),P=n(82732),x=n(45849),G=n(55382),C=n(72879),N=n(17403),M=n(24849),j=n(75036),R=function(e,t,n){return(0,_._)(function(){var r;return(0,b.YH)(this,function(u){switch(u.label){case 0:return[4,(0,M.T)(e,t)(n,!1)];case 1:if(!(r=u.sent()))return[2,null];return[4,(0,j.cg)(r)];case 2:if(u.sent().dataHash!==n)return[2,(0,j.UN)(r)];return[2,null]}})})()};let k=function(){var e=(0,C.h)(),t=e.frames,r=e.images,u=(0,G.g)().updateImageHash,i=(0,S._)((0,f.useState)(!0),2),a=i[0],o=i[1];return window.enableHashCleanup=function(){return o(!1)},{cleanupBusy:a,hashCleanup:function(){return(0,_._)(function(){var e,i,a;return(0,b.YH)(this,function(s){switch(s.label){case 0:return o(!0),e=0,i=0,[4,Promise.resolve().then(n.t.bind(n,79452,23))];case 1:return a=s.sent().default,[4,Promise.all(r.map(function(n){return(0,_._)(function(){var o,s,l,c,f;return(0,b.YH)(this,function(d){switch(d.label){case 0:if(o=n.hash,!(0,N.pl)(n))return[3,2];return[4,Promise.all(Object.keys(s=n.hashes).map(function(e){return(0,_._)(function(){var n,u;return(0,b.YH)(this,function(i){switch(i.label){case 0:if(n=s[e],u=null,!n)return[3,2];return[4,R(r,t,n)];case 1:u=i.sent(),i.label=2;case 2:return[2,(0,w._)({},e,u||n)]}})})()}))];case 1:return(c=a(l=d.sent().reduce(function(e,t){return(0,P._)({},e,t)},{})))!==o&&(e+=1,u(o,(0,x._)((0,P._)({},n),{hash:c,hashes:l}))),[3,4];case 2:return[4,R(r,t,o)];case 3:(f=d.sent())&&(i+=1,u(o,(0,x._)((0,P._)({},n),{hash:f}))),d.label=4;case 4:return[2]}})})()}))];case 2:return s.sent(),o(!1),console.info({iCounterRGBN:e,iCounterMono:i}),[2]}})})()}}};var D=function(e){switch(e){case T.PERSISTED:return"persistState.isPersistent";case T.NOT_PERSISTED:return"persistState.requestPersistence";case T.NO_API:return"persistState.apiUnavailable";case T.FAILED:default:return"persistState.failed"}};let O=function(){var e=k(),t=e.hashCleanup,n=e.cleanupBusy,u=(0,I.W)().downloadSettings,i=(0,o.c3)("ExportSettings"),a=(0,E.t)().resetGroups,s=function(e){return u(e)},l=y(),c=l.persisted,f=l.requestPersist;return(0,r.jsxs)(v.A,{variant:"contained",fullWidth:!0,children:[(0,r.jsx)(h.A,{title:i(D(c)),disabled:c!==T.NOT_PERSISTED,onClick:f,children:i(D(c))}),(0,r.jsx)(h.A,{title:i("resetGroups"),onClick:a,children:i("resetGroups")}),(0,r.jsx)(h.A,{title:i("exportAll"),onClick:function(){return s(m.m.ALL)},children:i("exportAll")}),(0,r.jsx)(h.A,{title:i("exportPlugins"),onClick:function(){return s(m.m.PLUGINS)},children:i("exportPlugins")}),(0,r.jsx)(h.A,{title:i("hashCleanup"),disabled:n,onClick:t,children:i("hashCleanup")})]})};var H=n(75416),L=n(86586),Y=n(52619),W=n.n(Y),U=n(20063),z=n(81200);let F=function(){var e=(0,U.usePathname)(),t=(0,d.D)(),n=(0,o.c3)("SettingsTabs"),u=(0,f.useMemo)(function(){return[{path:"/settings/generic/",headline:n("genericSettings"),prefetch:!0},{path:"/settings/dropbox/",headline:n("dropboxSettings"),prefetch:!1},(null==t?void 0:t.env)==="esp8266"||(null==t?void 0:t.env)==="webpack-dev"?{path:"/settings/wifi/",headline:n("wifiSettings"),prefetch:!1}:null,{path:"/settings/plugins/",headline:n("pluginSettings"),prefetch:!1},{path:"/settings/git/",headline:n("gitSettings"),prefetch:!1}].reduce(z.N,[])},[n,t]),i=(0,f.useMemo)(function(){return u.length&&"/settings"!==e?e:null},[e,u]);return i?(0,r.jsx)(L.A,{value:i,children:u.map(function(e){var t=e.headline,n=e.path,u=e.prefetch;return(0,r.jsx)(H.A,{label:t,component:W(),href:n,prefetch:u,value:n},n)})}):null};function B(e){var t,n,s,l=e.children,c=(0,o.c3)("Navigation"),d=(n=(t=(0,S._)((0,f.useState)(!1),2))[0],s=t[1],(0,f.useEffect)(function(){if("function"==typeof window.requestIdleCallback){var e=requestIdleCallback(function(){return s(!0)});return function(){window.cancelIdleCallback(e)}}var t=window.setTimeout(function(){return s(!0)},1e3);return function(){window.clearTimeout(t)}},[]),n);return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(a.A,{component:"h1",variant:"h1",children:c("settings")}),d&&(0,r.jsxs)(i.A,{direction:"column",gap:4,justifyContent:"space-between",sx:{flexGrow:1},children:[(0,r.jsxs)(i.A,{direction:"column",gap:6,children:[(0,r.jsx)(F,{}),(0,r.jsx)(u.A,{children:l}),(0,r.jsx)(O,{})]}),(0,r.jsx)(g,{})]})]})}},11081:(e,t,n)=>{"use strict";n.d(t,{V:()=>r});var r=function(e){return e.CHECKBOX="checkbox",e.SELECT="select",e.TEXT="text",e.NUMBER="number",e.INFO="info",e.IMAGE="image",e.META="meta",e}({})},14217:(e,t,n)=>{"use strict";n.d(t,{z:()=>r});var r=n(74879).A},20063:(e,t,n)=>{"use strict";var r=n(47260);n.o(r,"RedirectType")&&n.d(t,{RedirectType:function(){return r.RedirectType}}),n.o(r,"redirect")&&n.d(t,{redirect:function(){return r.redirect}}),n.o(r,"usePathname")&&n.d(t,{usePathname:function(){return r.usePathname}}),n.o(r,"useRouter")&&n.d(t,{useRouter:function(){return r.useRouter}}),n.o(r,"useServerInsertedHTML")&&n.d(t,{useServerInsertedHTML:function(){return r.useServerInsertedHTML}})},22101:(e,t,n)=>{"use strict";n.d(t,{A:()=>c});var r=n(82732),u=n(45849),i=n(17389),a=n(59007),o=n(69159),s=n(4349),l=n(48989);let c=function(e){var t,n=e.elementType,c=e.externalSlotProps,f=e.ownerState,d=e.skipResolvingSlotProps,p=(0,i._)(e,["elementType","externalSlotProps","ownerState","skipResolvingSlotProps"]),g=void 0!==d&&d?{}:(0,l.A)(c,f),h=(0,s.A)((0,u._)((0,r._)({},p),{externalSlotProps:g})),v=h.props,m=h.internalRef,E=(0,a.A)(m,null==g?void 0:g.ref,null==(t=e.additionalProps)?void 0:t.ref);return(0,o.A)(n,(0,u._)((0,r._)({},v),{ref:E}),f)}},28614:(e,t,n)=>{"use strict";n.d(t,{A:()=>r});let r=n(34141).A},30837:(e,t,n)=>{"use strict";function r(e,t=166){let n;function u(...r){let i=()=>{e.apply(this,r)};clearTimeout(n),n=setTimeout(i,t)}return u.clear=()=>{clearTimeout(n)},u}n.d(t,{A:()=>r})},31643:(e,t,n)=>{"use strict";n.d(t,{A:()=>r});let r=n(46189).A},32614:(e,t,n)=>{"use strict";n.d(t,{D:()=>p,EnvProvider:()=>g});var r=n(61975),u=n(82732),i=n(45849),a=n(22043),o=n(71450),s=n(95155),l=n(12115),c=n(15431),f=n(94468),d=(0,l.createContext)(null),p=function(){return(0,l.useContext)(d)},g=function(e){var t=e.children,n=(0,a._)((0,l.useState)(null),2),p=n[0],g=n[1],h=(0,c.A)().setPrinterUrl;return(0,l.useEffect)(function(){var e=["/gb-printer-web","/env.json"].filter(Boolean).join("/");e&&(0,r._)(function(){var t,n,r,a;return(0,o.YH)(this,function(o){switch(o.label){case 0:return o.trys.push([0,5,,6]),[4,(0,f.ZU)()];case 1:return o.sent(),[4,fetch(e)];case 2:return[4,o.sent().json()];case 3:return t=o.sent(),r=[(0,u._)({},t)],a={},[4,f.mU.driver()];case 4:return"esp8266"===(n=i._.apply(void 0,r.concat([(a.localforage=o.sent(),a)]))).env&&h("/"),g(n),[3,6];case 5:return o.sent(),g({version:"0.0.0",maximages:0,localforage:"error",env:"error",fstype:"-",bootmode:"-",oled:!1}),[3,6];case 6:return[2]}})})()},[h]),(0,s.jsx)(d.Provider,{value:p,children:t})}},34141:(e,t,n)=>{"use strict";function r(e){return e&&e.ownerDocument||document}n.d(t,{A:()=>r})},36786:(e,t,n)=>{"use strict";n.d(t,{A:()=>l,I:()=>s});var r=n(82732),u=n(17389),i=n(12115),a=n(95155),o=i.createContext(),s=function(){var e=i.useContext(o);return null!=e&&e};let l=function(e){var t=e.value,n=(0,u._)(e,["value"]);return(0,a.jsx)(o.Provider,(0,r._)({value:null==t||t},n))}},38584:(e,t,n)=>{Promise.resolve().then(n.bind(n,7745))},40433:(e,t,n)=>{"use strict";n.d(t,{j:()=>f});var r=n(61975),u=n(22043),i=n(71450),a=n(12115),o=n(30986),s=(0,o.A)("percentage",o.U.DESC),l=function(){var e=0;for(var t in localStorage)if(localStorage.hasOwnProperty(t)){var n=localStorage.getItem(t);null!==n&&(e+=t.length+n.length)}return e},c=function(){var e="__test_localStorage_limit__",t=0,n=0xf00000,r=0;try{for(;t<=n;){var u=Math.floor((t+n)/2),i="A".repeat(u);try{localStorage.setItem(e,i),r=u,t=u+1}catch(e){n=u-1}}}finally{localStorage.removeItem(e)}return r},f=function(){var e=(0,u._)((0,a.useState)([]),2),t=e[0],n=e[1];return(0,a.useEffect)(function(){window.setTimeout(function(){return(0,r._)(function(){var e,t,r,u;return(0,i.YH)(this,function(i){switch(i.label){case 0:return[4,null==(e=navigator.storage)?void 0:e.estimate()];case 1:return t=i.sent()||null,n([{type:"localStorage",total:u=(r=l())+c(),used:r,percentage:r/u*100},{type:"indexedDB",total:(null==t?void 0:t.quota)||0,used:(null==t?void 0:t.usage)||0,percentage:u?((null==t?void 0:t.usage)||0)/((null==t?void 0:t.quota)||1)*100:100}]),[2]}})})()},10)},[]),{criticalStorageEstimate:s(t.filter(function(e){return e.percentage>75}))[0]||null,storageEstimate:t}}},46189:(e,t,n)=>{"use strict";n.d(t,{A:()=>u});var r=n(34141);function u(e){return(0,r.A)(e).defaultView||window}},54851:(e,t,n)=>{"use strict";n.d(t,{A:()=>r});let r=n(30837).A},65301:(e,t,n)=>{"use strict";n.d(t,{t:()=>h});var r=n(61975),u=n(71450),i=n(18955),a=n(12115),o=n(56265),s=n(11081),l=n(89386),c=n(96112),f=n(34093),d=n(86072),p=n(57203),g=n(72879),h=function(){var e=(0,i.c3)("useImageGroups"),t=(0,l.Z)().view,n=(0,f.A)(),h=n.dismissDialog,v=n.setDialog,m=(0,d.A)().setEditImageGroup,E=(0,g.h)(),I=E.deleteImageGroup,_=E.setImageGroups,S=E.images,b=(0,p.A)().imageSelection,T=(0,a.useMemo)(function(){if(!b.length)return"";var t,n=S.filter(function(e){var t=e.hash;return b.includes(t)}).map(function(e){return e.title}).filter(function(e){return e.length>3}),r=null==(t=(0,o.Hg)(n).filter(function(e){return e.length>3})[0])?void 0:t.trim();return r?r.replace(/[_-]/g," ").replace(/^\s*\d+\s+|\s+\d+\s*$/g,"").trim():e("newGroupDefault")},[b,S,e]);return{resetGroups:function(){v({message:e("resetGroupsMessage"),questions:function(){return[{key:"info",type:s.V.INFO,label:e("resetGroupsInfo")}]},confirm:function(){return(0,r._)(function(){return(0,u.YH)(this,function(e){return h(0),_([]),[2]})})()},deny:function(){return(0,r._)(function(){return(0,u.YH)(this,function(e){return h(0),[2]})})()}})},createGroup:function(e){m({groupId:c.Ll,newGroupCover:e,newGroupTitle:T})},editGroup:function(e){m({groupId:e})},deleteGroup:function(n){var i=t.groups.find(function(e){return e.id===n});i&&v({message:e("deleteGroupMessage"),questions:function(){return[{key:"info",type:s.V.INFO,label:e("deleteGroupInfo",{groupTitle:i.title||i.slug})}]},confirm:function(){return(0,r._)(function(){return(0,u.YH)(this,function(e){return h(0),I(n),[2]})})()},deny:function(){return(0,r._)(function(){return(0,u.YH)(this,function(e){return h(0),[2]})})()}})}}}},72496:(e,t,n)=>{"use strict";n.d(t,{A:()=>r});let r=n(82177).A},81200:(e,t,n)=>{"use strict";n.d(t,{N:()=>u});var r=n(45377),u=function(e,t){return t?(0,r._)(e).concat([t]):e}},81863:(e,t,n)=>{"use strict";n.d(t,{BX:()=>E,LV:()=>f});let r=Symbol("Comlink.proxy"),u=Symbol("Comlink.endpoint"),i=Symbol("Comlink.releaseProxy"),a=Symbol("Comlink.finalizer"),o=Symbol("Comlink.thrown"),s=e=>"object"==typeof e&&null!==e||"function"==typeof e,l=new Map([["proxy",{canHandle:e=>s(e)&&e[r],serialize(e){let{port1:t,port2:n}=new MessageChannel;return function e(t,n=globalThis,r=["*"]){n.addEventListener("message",function u(i){let s;if(!i||!i.data)return;if(!function(e,t){for(let n of e)if(t===n||"*"===n||n instanceof RegExp&&n.test(t))return!0;return!1}(r,i.origin))return void console.warn(`Invalid origin '${i.origin}' for comlink proxy`);let{id:l,type:f,path:d}=Object.assign({path:[]},i.data),p=(i.data.argumentList||[]).map(_);try{let n=d.slice(0,-1).reduce((e,t)=>e[t],t),r=d.reduce((e,t)=>e[t],t);switch(f){case"GET":s=r;break;case"SET":n[d.slice(-1)[0]]=_(i.data.value),s=!0;break;case"APPLY":s=r.apply(n,p);break;case"CONSTRUCT":{let e=new r(...p);s=E(e)}break;case"ENDPOINT":{var g,h;let{port1:n,port2:r}=new MessageChannel;e(t,r),g=n,h=[n],m.set(g,h),s=g}break;case"RELEASE":s=void 0;break;default:return}}catch(e){s={value:e,[o]:0}}Promise.resolve(s).catch(e=>({value:e,[o]:0})).then(e=>{let[r,i]=I(e);n.postMessage(Object.assign(Object.assign({},r),{id:l}),i),"RELEASE"===f&&(n.removeEventListener("message",u),c(n),a in t&&"function"==typeof t[a]&&t[a]())}).catch(e=>{let[t,r]=I({value:TypeError("Unserializable return value"),[o]:0});n.postMessage(Object.assign(Object.assign({},t),{id:l}),r)})}),n.start&&n.start()}(e,t),[n,[n]]},deserialize:e=>(e.start(),f(e))}],["throw",{canHandle:e=>s(e)&&o in e,serialize:({value:e})=>[e instanceof Error?{isError:!0,value:{message:e.message,name:e.name,stack:e.stack}}:{isError:!1,value:e},[]],deserialize(e){if(e.isError)throw Object.assign(Error(e.value.message),e.value);throw e.value}}]]);function c(e){"MessagePort"===e.constructor.name&&e.close()}function f(e,t){let n=new Map;return e.addEventListener("message",function(e){let{data:t}=e;if(!t||!t.id)return;let r=n.get(t.id);if(r)try{r(t)}finally{n.delete(t.id)}}),function e(t,n,r=[],a=function(){}){let o=!1,s=new Proxy(a,{get(u,a){if(d(o),a===i)return()=>{h&&h.unregister(s),p(t),n.clear(),o=!0};if("then"===a){if(0===r.length)return{then:()=>s};let e=S(t,n,{type:"GET",path:r.map(e=>e.toString())}).then(_);return e.then.bind(e)}return e(t,n,[...r,a])},set(e,u,i){d(o);let[a,s]=I(i);return S(t,n,{type:"SET",path:[...r,u].map(e=>e.toString()),value:a},s).then(_)},apply(i,a,s){d(o);let l=r[r.length-1];if(l===u)return S(t,n,{type:"ENDPOINT"}).then(_);if("bind"===l)return e(t,n,r.slice(0,-1));let[c,f]=v(s);return S(t,n,{type:"APPLY",path:r.map(e=>e.toString()),argumentList:c},f).then(_)},construct(e,u){d(o);let[i,a]=v(u);return S(t,n,{type:"CONSTRUCT",path:r.map(e=>e.toString()),argumentList:i},a).then(_)}}),l=(g.get(t)||0)+1;return g.set(t,l),h&&h.register(s,t,s),s}(e,n,[],t)}function d(e){if(e)throw Error("Proxy has been released and is not useable")}function p(e){return S(e,new Map,{type:"RELEASE"}).then(()=>{c(e)})}let g=new WeakMap,h="FinalizationRegistry"in globalThis&&new FinalizationRegistry(e=>{let t=(g.get(e)||0)-1;g.set(e,t),0===t&&p(e)});function v(e){var t;let n=e.map(I);return[n.map(e=>e[0]),(t=n.map(e=>e[1]),Array.prototype.concat.apply([],t))]}let m=new WeakMap;function E(e){return Object.assign(e,{[r]:!0})}function I(e){for(let[t,n]of l)if(n.canHandle(e)){let[r,u]=n.serialize(e);return[{type:"HANDLER",name:t,value:r},u]}return[{type:"RAW",value:e},m.get(e)||[]]}function _(e){switch(e.type){case"HANDLER":return l.get(e.name).deserialize(e.value);case"RAW":return e.value}}function S(e,t,n,r){return new Promise(u=>{let i=[,,,,].fill(0).map(()=>Math.floor(Math.random()*Number.MAX_SAFE_INTEGER).toString(16)).join("-");t.set(i,u),e.start&&e.start(),e.postMessage(Object.assign({id:i},n),r)})}},96112:(e,t,n)=>{"use strict";n.d(t,{Ay:()=>_,BF:()=>m,Ll:()=>v});var r=n(61975),u=n(82732),i=n(45849),a=n(22043),o=n(71450),s=n(12115),l=n(89386),c=n(4599),f=n(86072),d=n(57203),p=n(72879),g=n(14217),h=n(71667),v="NEW_GROUP",m=function(e){return e.trim().replace(/[^A-Z0-9_-]+/gi,"_").toLowerCase()},E=function(e,t){return e.find(function(e){return e.group.groups.find(function(e){return e.id===t})})||null},I=function(e){return e.CREATE_NEW="CREATE_NEW",e.EDIT_EXISTING="EDIT_EXISTING",e.NOT_EDITING="NOT_EDITING",e}(I||{});let _=function(){var e,t=(0,d.A)().imageSelection,n=(0,f.A)(),I=n.editImageGroup,_=n.cancelEditImageGroup,S=(0,p.h)(),b=S.imageGroups,T=S.addImageGroup,A=S.updateImageGroup,y=S.groupImagesAdd,w=S.ungroupImages,P=(0,c.g)(),x=P.navigateToGroup,G=P.navigateToImage,C=(0,l.Z)(),N=C.path,M=C.view,j=C.paths,R=C.pathsOptions,k=t.length,D=(null==I?void 0:I.groupId)?I.groupId===v?"CREATE_NEW":"EDIT_EXISTING":"NOT_EDITING",O=(0,s.useMemo)(function(){switch(D){case"CREATE_NEW":var e=(null==I?void 0:I.newGroupTitle)||"";return{imageGroup:null,parentPathMap:j.find(function(e){return e.group.id===M.id})||null,title:e,slug:m(e),slugTouched:!1};case"EDIT_EXISTING":var t=b.find(function(e){return e.id===(null==I?void 0:I.groupId)})||null;return{imageGroup:t,parentPathMap:(null==I?void 0:I.groupId)?E(j,I.groupId):null,title:(null==t?void 0:t.title)||"",slug:(null==t?void 0:t.slug)||"",slugTouched:!0};default:return{imageGroup:null,parentPathMap:null,title:"",slug:"",slugTouched:!1}}},[I,D,b,j,M]),H=(0,a._)((0,s.useState)(O.title),2),L=H[0],Y=H[1],W=(0,a._)((0,s.useState)(O.slug),2),U=W[0],z=W[1],F=(0,a._)((0,s.useState)(O.slugTouched),2),B=F[0],X=F[1],q=(0,a._)((0,s.useState)((null==(e=O.parentPathMap)?void 0:e.absolutePath)||""),2),V=q[0],Z=q[1],$=(0,s.useMemo)(function(){if(!(null==I?void 0:I.groupId))return"";if((null==I?void 0:I.groupId)===v)return"".concat(N).concat(U,"/");var e=E(j,I.groupId),t=(null==e?void 0:e.absolutePath)||"";return"".concat(t).concat(U,"/")},[I,j,N,U]),J=(0,s.useMemo)(function(){return!!j.find(function(e){return e.absolutePath===$})},[$,j]),K=(0,s.useMemo)(function(){var e;return U!==(null==(e=O.imageGroup)?void 0:e.slug)},[O,U]),Q=(0,s.useMemo)(function(){return!!U&&("CREATE_NEW"===D?!J:"EDIT_EXISTING"===D&&(!K||!J))},[D,U,J,K]),ee=(0,s.useMemo)(function(){var e,t,n=(null==(e=j.find(function(e){return e.absolutePath===V}))?void 0:e.group.id)||"";return((null==(t=O.parentPathMap)?void 0:t.group.id)||"")!==n},[O,V,j]),et=(0,s.useMemo)(function(){switch(D){case"EDIT_EXISTING":var e,t=(null==(e=j.find(function(e){return e.group.id===(null==I?void 0:I.groupId)}))?void 0:e.absolutePath)||"";return R.filter(function(e){var n=e.value;return!n.startsWith($)&&n!==t});case"CREATE_NEW":return R;default:return[]}},[$,I,D,j,R]);return{editId:(null==I?void 0:I.groupId)||null,absoluteSlug:$,possibleParents:et,slug:U,title:L,canConfirm:Q,canMove:ee,slugIsInUse:J,slugWasChanged:K,parentSlug:V,selectionCount:k,setSlug:function(e){z(e),X(!0)},setTitle:function(e){Y(e),(e.length<2||!B)&&(X(!1),z(m(e)))},setParentSlug:Z,confirm:function(){if(_(),Q&&I){var e,n=(null==(e=j.find(function(e){return e.absolutePath===V}))?void 0:e.group.id)||"";if(I.groupId===v){if(!I.newGroupCover)return;var r=(0,g.z)();T({id:r,slug:U,title:L,created:(0,h.J)(),coverImage:I.newGroupCover,images:t,groups:[]},n),x(r,0)}else{if(!O.imageGroup)return;A((0,i._)((0,u._)({},O.imageGroup),{slug:U,title:L}),n),x(I.groupId,0)}}},move:function(){return(0,r._)(function(){var e,n;return(0,o.YH)(this,function(r){return _(),ee&&((n=(null==(e=j.find(function(e){return e.absolutePath===V}))?void 0:e.group.id)||"")?y(n,t):w(t),G(t[0])),[2]})})()},cancelEditImageGroup:_}}}},e=>{e.O(0,[8955,3632,317,2545,4120,9832,9452,5513,4647,7164,2968,8428,6685,6265,2781,2517,6147,8441,9342,1255,7358],()=>e(e.s=38584)),_N_E=e.O()}]);