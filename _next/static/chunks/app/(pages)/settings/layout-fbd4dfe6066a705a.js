(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[7437],{1470:(e,t,n)=>{"use strict";n.d(t,{t:()=>r,z:()=>u});var r="ROOT",u=function(e){return{id:r,slug:"",created:"",title:"Home",coverImage:"",images:[],groups:[],tags:[],allImages:e}}},1607:(e,t,n)=>{"use strict";n.d(t,{D:()=>d,EnvProvider:()=>g});var r=n(97004),u=n(693),i=n(60376),o=n(78538),a=n(39249),s=n(95155),l=n(12115),c=n(52166),f=n(75380),p=(0,l.createContext)(null),d=function(){return(0,l.useContext)(p)},g=function(e){var t=e.children,n=(0,o._)((0,l.useState)(null),2),d=n[0],g=n[1],h=(0,c.A)().setPrinterUrl;return(0,l.useEffect)(function(){var e=["/gb-printer-web","/env.json"].filter(Boolean).join("/");e&&(0,r._)(function(){var t,n,r,o;return(0,a.YH)(this,function(a){switch(a.label){case 0:return a.trys.push([0,5,,6]),[4,(0,f.ZU)()];case 1:return a.sent(),[4,fetch(e)];case 2:return[4,a.sent().json()];case 3:return t=a.sent(),r=[(0,u._)({},t)],o={},[4,f.mU.driver()];case 4:return"esp8266"===(n=i._.apply(void 0,r.concat([(o.localforage=a.sent(),o)]))).env&&h("/"),g(n),[3,6];case 5:return a.sent(),g({version:"0.0.0",maximages:0,localforage:"error",env:"error",fstype:"-",bootmode:"-",oled:!1}),[3,6];case 6:return[2]}})})()},[h]),(0,s.jsx)(p.Provider,{value:d,children:t})}},5687:(e,t,n)=>{"use strict";n.d(t,{A:()=>r});let r=n(14810).A},7119:(e,t,n)=>{"use strict";n.d(t,{NavigationToolsProvider:()=>g,g:()=>h});var r=n(95155),u=n(12115),i=n(78538),o=n(35695),a=n(95939),s=n(71620),l=n(52166),c=n(1470),f=n(66785),p=function(){var e=(0,o.useRouter)(),t=(0,a.Z)(),n=t.paths,r=t.root,p=t.isWorking,d=t.path,g=t.getUrl,h=(0,i._)((0,u.useState)(!1),2),v=h[0],m=h[1],I=(0,s.A)(),_=I.sortBy,A=I.filtersActiveTags,w=I.recentImports,E=(0,l.A)().pageSize,T=(0,u.useCallback)(function(e){return(0,f.S)(e,{filtersActiveTags:A,sortBy:_,recentImports:w})},[A,w,_]),S=(0,u.useCallback)(function(e,t){return Math.floor(T(t).findIndex(function(t){return t.hash===e})/E)},[T,E]),x=(0,u.useCallback)(function(e,t){var r;return e===c.t?g({pageIndex:t,group:""}):g({pageIndex:t,group:(null==(r=n.find(function(t){return e===t.group.id}))?void 0:r.absolutePath)||""})},[g,n]),b=(0,u.useMemo)(function(){var e;return(null==(e=n.find(function(e){return e.absolutePath===d}))?void 0:e.group)||r},[d,n,r]),P=(0,u.useCallback)(function(e){var t=n.find(function(t){return t.group.images.map(function(e){return e.hash}).includes(e)}),u=(null==t?void 0:t.absolutePath)||"";return g({pageIndex:S(e,(null==t?void 0:t.group)||r),group:u})},[S,g,n,r]),G=(0,u.useCallback)(function(e,t){p||window.setTimeout(function(){m({group:{id:e,pageIndex:t}})},1)},[p]),C=(0,u.useCallback)(function(e){window.setTimeout(function(){m({imageHash:e})},1)},[]);return(0,u.useEffect)(function(){if(!p&&v){var t=window.setTimeout(function(){v.imageHash?(e.push(P(v.imageHash)),m(!1)):v.group&&(e.push(x(v.group.id,v.group.pageIndex)),m(!1))},1);return function(){window.clearTimeout(t)}}},[x,P,p,e,v]),{currentGroup:b,getGroupPath:x,getImagePageIndexInGroup:S,navigateToGroup:G,navigateToImage:C}},d=(0,u.createContext)(null);function g(e){var t=e.children,n=p();return(0,r.jsx)(d.Provider,{value:n,children:t})}var h=function(){var e=(0,u.useContext)(d);if(!e)throw Error("useNavigationToolsContext must be used within an NavigationToolsProvider");return e}},9700:(e,t,n)=>{"use strict";n.d(t,{A:()=>r});let r=n(22550).A},14810:(e,t,n)=>{"use strict";function r(e){return e&&e.ownerDocument||document}n.d(t,{A:()=>r})},21329:(e,t,n)=>{"use strict";n.d(t,{A:()=>r});let r=n(43430).A},22550:(e,t,n)=>{"use strict";function r(e,t=166){let n;function u(...r){clearTimeout(n),n=setTimeout(()=>{e.apply(this,r)},t)}return u.clear=()=>{clearTimeout(n)},u}n.d(t,{A:()=>r})},23747:(e,t,n)=>{"use strict";n.d(t,{Ay:()=>A,BF:()=>m,Ll:()=>v});var r=n(97004),u=n(693),i=n(60376),o=n(78538),a=n(39249),s=n(12115),l=n(95939),c=n(7119),f=n(3381),p=n(71620),d=n(11760),g=n(80360),h=n(46594),v="NEW_GROUP",m=function(e){return e.trim().replace(/[^A-Z0-9_-]+/gi,"_").toLowerCase()},I=function(e,t){return e.find(function(e){return e.group.groups.find(function(e){return e.id===t})})||null},_=function(e){return e.CREATE_NEW="CREATE_NEW",e.EDIT_EXISTING="EDIT_EXISTING",e.NOT_EDITING="NOT_EDITING",e}(_||{});let A=function(){var e,t=(0,p.A)().imageSelection,n=(0,f.A)(),_=n.editImageGroup,A=n.cancelEditImageGroup,w=(0,d.h)(),E=w.imageGroups,T=w.addImageGroup,S=w.updateImageGroup,x=w.groupImagesAdd,b=w.ungroupImages,P=(0,c.g)(),G=P.navigateToGroup,C=P.navigateToImage,y=(0,l.Z)(),N=y.path,k=y.view,M=y.paths,j=y.pathsOptions,D=t.length,H=(null==_?void 0:_.groupId)?_.groupId===v?"CREATE_NEW":"EDIT_EXISTING":"NOT_EDITING",O=(0,s.useMemo)(function(){switch(H){case"CREATE_NEW":var e=(null==_?void 0:_.newGroupTitle)||"";return{imageGroup:null,parentPathMap:M.find(function(e){return e.group.id===k.id})||null,title:e,slug:m(e),slugTouched:!1};case"EDIT_EXISTING":var t=E.find(function(e){return e.id===(null==_?void 0:_.groupId)})||null;return{imageGroup:t,parentPathMap:(null==_?void 0:_.groupId)?I(M,_.groupId):null,title:(null==t?void 0:t.title)||"",slug:(null==t?void 0:t.slug)||"",slugTouched:!0};default:return{imageGroup:null,parentPathMap:null,title:"",slug:"",slugTouched:!1}}},[_,H,E,M,k]),R=(0,o._)((0,s.useState)(O.title),2),L=R[0],U=R[1],W=(0,o._)((0,s.useState)(O.slug),2),B=W[0],Y=W[1],F=(0,o._)((0,s.useState)(O.slugTouched),2),X=F[0],q=F[1],z=(0,o._)((0,s.useState)((null==(e=O.parentPathMap)?void 0:e.absolutePath)||""),2),V=z[0],Z=z[1],K=(0,s.useMemo)(function(){if(!(null==_?void 0:_.groupId))return"";if((null==_?void 0:_.groupId)===v)return"".concat(N).concat(B,"/");var e=I(M,_.groupId),t=(null==e?void 0:e.absolutePath)||"";return"".concat(t).concat(B,"/")},[_,M,N,B]),J=(0,s.useMemo)(function(){return!!M.find(function(e){return e.absolutePath===K})},[K,M]),$=(0,s.useMemo)(function(){var e;return B!==(null==(e=O.imageGroup)?void 0:e.slug)},[O,B]),Q=(0,s.useMemo)(function(){return!!B&&("CREATE_NEW"===H?!J:"EDIT_EXISTING"===H&&(!$||!J))},[H,B,J,$]),ee=(0,s.useMemo)(function(){var e,t,n=(null==(e=M.find(function(e){return e.absolutePath===V}))?void 0:e.group.id)||"";return((null==(t=O.parentPathMap)?void 0:t.group.id)||"")!==n},[O,V,M]),et=(0,s.useMemo)(function(){switch(H){case"EDIT_EXISTING":var e,t=(null==(e=M.find(function(e){return e.group.id===(null==_?void 0:_.groupId)}))?void 0:e.absolutePath)||"";return j.filter(function(e){var n=e.value;return!n.startsWith(K)&&n!==t});case"CREATE_NEW":return j;default:return[]}},[K,_,H,M,j]);return{editId:(null==_?void 0:_.groupId)||null,absoluteSlug:K,possibleParents:et,slug:B,title:L,canConfirm:Q,canMove:ee,slugIsInUse:J,slugWasChanged:$,parentSlug:V,selectionCount:D,setSlug:function(e){Y(e),q(!0)},setTitle:function(e){U(e),(e.length<2||!X)&&(q(!1),Y(m(e)))},setParentSlug:Z,confirm:function(){if(A(),Q&&_){var e,n=(null==(e=M.find(function(e){return e.absolutePath===V}))?void 0:e.group.id)||"";if(_.groupId===v){if(!_.newGroupCover)return;var r=(0,g.z)();T({id:r,slug:B,title:L,created:(0,h.J)(),coverImage:_.newGroupCover,images:t,groups:[]},n),G(r,0)}else{if(!O.imageGroup)return;S((0,i._)((0,u._)({},O.imageGroup),{slug:B,title:L}),n),G(_.groupId,0)}}},move:(0,r._)(function(){var e,n;return(0,a.YH)(this,function(r){return A(),ee&&((n=(null==(e=M.find(function(e){return e.absolutePath===V}))?void 0:e.group.id)||"")?x(n,t):b(t),C(t[0])),[2]})}),cancelEditImageGroup:A}}},29032:(e,t,n)=>{"use strict";n.d(t,{j:()=>o});var r=n(78538),u=n(35695),i=n(12115),o=function(){var e=(0,u.usePathname)(),t=(0,r._)((0,i.useState)(window.location.search),2),n=t[0],o=t[1],a=(0,i.useMemo)(function(){return new URLSearchParams(n)},[n]);(0,i.useEffect)(function(){var e=function(){window.setTimeout(function(){o(function(e){return window.location.search!==e?window.location.search:e})},1)};e(),window.addEventListener("popstate",e);var t=history.pushState,n=history.replaceState;return history.pushState=function(){for(var n=arguments.length,r=Array(n),u=0;u<n;u++)r[u]=arguments[u];t.apply(this,r),e()},history.replaceState=function(){for(var t=arguments.length,r=Array(t),u=0;u<t;u++)r[u]=arguments[u];n.apply(this,r),e()},function(){window.removeEventListener("popstate",e),history.pushState=t,history.replaceState=n}},[a,e]);var s=(0,i.useMemo)(function(){return a.toString()},[a]);return{fullPath:(0,i.useMemo)(function(){return s?"".concat(e,"?").concat(s):e},[e,s]),pathname:e,query:s,searchParams:a}}},31178:(e,t,n)=>{"use strict";n.d(t,{A:()=>u});var r=n(14810);function u(e){return(0,r.A)(e).defaultView||window}},32134:(e,t,n)=>{"use strict";n.d(t,{GalleryTreeContext:()=>g,K:()=>d});var r=n(78538),u=n(95155),i=n(7062),o=n(12115),a=n(29032),s=n(46498),l=n(11760),c=n(52166),f=n(1470),p="/gallery/",d=(0,o.createContext)({root:(0,f.z)([]),view:(0,f.z)([]),images:[],covers:[],paths:[],pathsOptions:[],isWorking:!1,pageIndex:0,path:"",lastGalleryLink:"",getUrl:function(){return"".concat(p,"?page=1")}});function g(e){var t=e.children,g=(0,l.h)(),h=g.imageGroups,v=g.images,m=g.setImageGroups,I=(0,r._)((0,o.useState)(!0),2),_=I[0],A=I[1],w=(0,r._)((0,o.useState)((0,f.z)(v)),2),E=w[0],T=w[1],S=(0,r._)((0,o.useState)([]),2),x=S[0],b=S[1],P=(0,r._)((0,o.useState)([]),2),G=P[0],C=P[1],y=(0,a.j)(),N=y.searchParams,k=y.pathname,M=(0,r._)((0,o.useState)(""),2),j=M[0],D=M[1],H=(0,c.A)().enableDebug,O=(0,s.A)().setError;(0,o.useEffect)(function(){var e=new Worker(n.tu(new URL(n.p+n.u(8274),n.b)),{type:void 0}),t=(0,i.LV)(e),r=[],u=(0,i.BX)(function(e){r.push(e)});return A(!0),t.calculate({imageGroups:h,stateImages:v},u).then(function(e){if(T(e.root),b(e.paths),C(e.pathsOptions),r.length&&O(Error(r.join("\n"))),h.length>e.paths.length){var t=e.paths.map(function(e){return e.group.id});m(h.filter(function(e){var n=e.id;return t.includes(n)}))}H&&console.info("worker ran for ".concat(e.duration.toFixed(2),"ms"))}).catch(function(e){console.error(e),O(e)}).finally(function(){A(!1),e.terminate()}),function(){e.terminate(),A(!1)}},[H,h,O,m,v]);var R=(0,o.useMemo)(function(){var e;return parseInt(null!=(e=N.get("page"))?e:"1",10)-1},[N]),L=(0,o.useMemo)(function(){return N.get("group")||""},[N]),U=(0,o.useCallback)(function(e){var t="number"==typeof e.pageIndex?e.pageIndex:R,n="string"==typeof e.group?e.group:L,r="".concat(p,"?page=").concat(t+1);return n.length&&(r="".concat(r,"&group=").concat(encodeURIComponent(n))),r},[R,L]);(0,o.useEffect)(function(){k===p&&D(U({pageIndex:R,group:L}))},[L,R,k,U]);var W=(0,o.useMemo)(function(){var e,t=(null==(e=x.find(function(e){return e.absolutePath===L}))?void 0:e.group)||E,n=t.groups.map(function(e){return e.coverImage}),r=t.images.filter(function(e){return!n.includes(e.hash)});return{view:t,covers:n,paths:x,images:r,pathsOptions:G,root:E,isWorking:_,pageIndex:R,path:L,lastGalleryLink:j,getUrl:U}},[x,E,G,_,R,L,j,U]);return(0,u.jsx)(d.Provider,{value:W,children:t})}},32299:(e,t,n)=>{"use strict";n.d(t,{A:()=>l,I:()=>s});var r=n(693),u=n(37414),i=n(12115),o=n(95155),a=i.createContext(),s=function(){var e=i.useContext(a);return null!=e&&e};let l=function(e){var t=e.value,n=(0,u._)(e,["value"]);return(0,o.jsx)(a.Provider,(0,r._)({value:null==t||t},n))}},34742:(e,t,n)=>{"use strict";n.d(t,{A:()=>r});let r=n(31178).A},38584:(e,t,n)=>{Promise.resolve().then(n.bind(n,91128))},39630:(e,t,n)=>{"use strict";n.d(t,{V:()=>r});var r=function(e){return e.CHECKBOX="checkbox",e.SELECT="select",e.TEXT="text",e.NUMBER="number",e.INFO="info",e.IMAGE="image",e.META="meta",e}({})},50422:(e,t,n)=>{"use strict";n.d(t,{A:()=>c});var r=n(693),u=n(60376),i=n(37414),o=n(81616),a=n(13051),s=n(56501),l=n(89602);let c=function(e){var t,n=e.elementType,c=e.externalSlotProps,f=e.ownerState,p=e.skipResolvingSlotProps,d=(0,i._)(e,["elementType","externalSlotProps","ownerState","skipResolvingSlotProps"]),g=void 0!==p&&p?{}:(0,l.A)(c,f),h=(0,s.A)((0,u._)((0,r._)({},d),{externalSlotProps:g})),v=h.props,m=h.internalRef,I=(0,o.A)(m,null==g?void 0:g.ref,null==(t=e.additionalProps)?void 0:t.ref);return(0,a.A)(n,(0,u._)((0,r._)({},v),{ref:I}),f)}},54581:(e,t,n)=>{"use strict";n.d(t,{A:()=>m});var r=n(693),u=n(37414),i=n(12115),o=n(52596),a=n(8302),s=n(13184),l=n(5300),c=n(64330),f=n(95155),p=n(34084),d=n(69077),g=n(54107),h=(0,n(55170).A)("MuiBox",["root"]),v=(0,d.A)();let m=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.themeId,n=e.defaultTheme,p=e.defaultClassName,d=void 0===p?"MuiBox-root":p,g=e.generateClassName,h=(0,a.Ay)("div",{shouldForwardProp:function(e){return"theme"!==e&&"sx"!==e&&"as"!==e}})(s.A);return i.forwardRef(function(e,i){var a=(0,c.A)(n),s=(0,l.A)(e),p=s.className,v=s.component,m=(0,u._)(s,["className","component"]);return(0,f.jsx)(h,(0,r._)({as:void 0===v?"div":v,ref:i,className:(0,o.A)(p,g?g(d):d),theme:t&&a[t]||a},m))})}({themeId:g.A,defaultTheme:v,defaultClassName:h.root,generateClassName:p.A.generate})},61564:(e,t,n)=>{"use strict";n.d(t,{t:()=>h});var r=n(97004),u=n(39249),i=n(17652),o=n(12115),a=n(33236),s=n(39630),l=n(95939),c=n(23747),f=n(41186),p=n(3381),d=n(71620),g=n(11760),h=function(){var e=(0,i.c3)("useImageGroups"),t=(0,l.Z)().view,n=(0,f.A)(),h=n.dismissDialog,v=n.setDialog,m=(0,p.A)().setEditImageGroup,I=(0,g.h)(),_=I.deleteImageGroup,A=I.setImageGroups,w=I.images,E=(0,d.A)().imageSelection,T=(0,o.useMemo)(function(){if(!E.length)return"";var t,n=w.filter(function(e){var t=e.hash;return E.includes(t)}).map(function(e){return e.title}).filter(function(e){return e.length>3}),r=null==(t=(0,a.Hg)(n).filter(function(e){return e.length>3})[0])?void 0:t.trim();return r?r.replace(/[_-]/g," ").replace(/^\s*\d+\s+|\s+\d+\s*$/g,"").trim():e("newGroupDefault")},[E,w,e]);return{resetGroups:function(){v({message:e("resetGroupsMessage"),questions:function(){return[{key:"info",type:s.V.INFO,label:e("resetGroupsInfo")}]},confirm:(0,r._)(function(){return(0,u.YH)(this,function(e){return h(0),A([]),[2]})}),deny:(0,r._)(function(){return(0,u.YH)(this,function(e){return h(0),[2]})})})},createGroup:function(e){m({groupId:c.Ll,newGroupCover:e,newGroupTitle:T})},editGroup:function(e){m({groupId:e})},deleteGroup:function(n){var i=t.groups.find(function(e){return e.id===n});i&&v({message:e("deleteGroupMessage"),questions:function(){return[{key:"info",type:s.V.INFO,label:e("deleteGroupInfo",{groupTitle:i.title||i.slug})}]},confirm:(0,r._)(function(){return(0,u.YH)(this,function(e){return h(0),_(n),[2]})}),deny:(0,r._)(function(){return(0,u.YH)(this,function(e){return h(0),[2]})})})}}}},80360:(e,t,n)=>{"use strict";n.d(t,{z:()=>r});var r=n(51368).A},91128:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>Y});var r=n(95155),u=n(54581),i=n(71803),o=n(700),a=n(17652),s=n(12115),l=n(1607);let c=function(){var e=(0,l.D)(),t=(0,a.c3)("EnvInfo"),n=(0,s.useMemo)(function(){return e?[t("appVersion",{value:"1.49.16"}),t("appBranch",{value:"master"}),t("printerVersion",{value:e.version}),t("maxImages",{value:e.maximages}),t("storageDriver",{value:e.localforage}),t("envType",{value:e.env}),t("filesystem",{value:e.fstype}),t("bootmode",{value:e.bootmode}),t("hasOled",{value:e.oled?t("yes"):t("no")})]:[]},[e,t]);return(0,r.jsx)(i.A,{component:"ul",direction:"column",children:n.map(function(e){return(0,r.jsx)(o.A,{component:"li",variant:"caption",color:"textDisabled",align:"right",lineHeight:1.25,children:e},e)})})};var f=n(7642),p=n(61487),d=n(69229),g=n(61564),h=n(83936),v=n(97004),m=n(78538),I=n(39249),_=function(e){return e.PERSISTED="persisted",e.NOT_PERSISTED="not-persisted",e.FAILED="failed",e.NO_API="no_api",e}({}),A=!!("undefined"!=typeof navigator&&navigator.storage&&navigator.storage.persist),w=function(){var e=(0,v._)(function(e){return(0,I.YH)(this,function(t){switch(t.label){case 0:if(!A)return[3,2];return[4,navigator.storage.persisted()];case 1:return e(t.sent()?"persisted":"not-persisted"),[3,3];case 2:e("no_api"),t.label=3;case 3:return[2]}})});return function(t){return e.apply(this,arguments)}}(),E=function(){var e=(0,v._)(function(e){return(0,I.YH)(this,function(t){switch(t.label){case 0:if(!A)return[3,2];return[4,navigator.storage.persist()];case 1:return e(t.sent()?"persisted":"failed"),[3,3];case 2:e("no_api"),t.label=3;case 3:return[2]}})});return function(t){return e.apply(this,arguments)}}();let T=function(){var e,t=(0,m._)((0,s.useState)("not-persisted"),2),n=t[0],r=t[1];return(0,s.useEffect)(function(){w(r)},[]),{persistAPIAvailable:A,persisted:n,requestPersist:(e=(0,v._)(function(){return(0,I.YH)(this,function(e){return E(r),[2]})}),function(){return e.apply(this,arguments)})}};var S=n(86447),x=n(693),b=n(60376),P=n(633),G=n(11760),C=n(55364),y=n(5847),N=n(72623),k=function(){var e=(0,v._)(function(e,t,n){var r;return(0,I.YH)(this,function(u){switch(u.label){case 0:return[4,(0,y.T)(e,t)(n,!1)];case 1:if(!(r=u.sent()))return[2,null];return[4,(0,N.cg)(r)];case 2:if(u.sent().dataHash!==n)return[2,(0,N.UN)(r)];return[2,null]}})});return function(t,n,r){return e.apply(this,arguments)}}();let M=function(){var e=(0,G.h)(),t=e.frames,r=e.images,u=(0,P.g)().updateImageHash,i=(0,m._)((0,s.useState)(!0),2),o=i[0],a=i[1];return window.enableHashCleanup=function(){return a(!1)},{cleanupBusy:o,hashCleanup:(0,v._)(function(){var e,i,o;return(0,I.YH)(this,function(s){switch(s.label){case 0:return a(!0),e=0,i=0,[4,Promise.resolve().then(n.t.bind(n,52491,23))];case 1:var l;return o=s.sent().default,[4,Promise.all(r.map((l=(0,v._)(function(n){var a,s,l,c,f;return(0,I.YH)(this,function(p){switch(p.label){case 0:var d;if(a=n.hash,!(0,C.pl)(n))return[3,2];return[4,Promise.all(Object.keys(s=n.hashes).map((d=(0,v._)(function(e){var n,u;return(0,I.YH)(this,function(i){switch(i.label){case 0:if(n=s[e],u=null,!n)return[3,2];return[4,k(r,t,n)];case 1:u=i.sent(),i.label=2;case 2:return[2,(0,S._)({},e,u||n)]}})}),function(e){return d.apply(this,arguments)})))];case 1:return(c=o(l=p.sent().reduce(function(e,t){return(0,x._)({},e,t)},{})))!==a&&(e+=1,u(a,(0,b._)((0,x._)({},n),{hash:c,hashes:l}))),[3,4];case 2:return[4,k(r,t,a)];case 3:(f=p.sent())&&(i+=1,u(a,(0,b._)((0,x._)({},n),{hash:f}))),p.label=4;case 4:return[2]}})}),function(e){return l.apply(this,arguments)})))];case 2:return s.sent(),a(!1),console.info({iCounterRGBN:e,iCounterMono:i}),[2]}})})}};var j=function(e){switch(e){case _.PERSISTED:return"persistState.isPersistent";case _.NOT_PERSISTED:return"persistState.requestPersistence";case _.NO_API:return"persistState.apiUnavailable";case _.FAILED:default:return"persistState.failed"}};let D=function(){var e=M(),t=e.hashCleanup,n=e.cleanupBusy,u=(0,h.W)().downloadSettings,i=(0,a.c3)("ExportSettings"),o=(0,g.t)().resetGroups,s=function(e){return u(e)},l=T(),c=l.persisted,v=l.requestPersist;return(0,r.jsxs)(p.A,{variant:"contained",fullWidth:!0,children:[(0,r.jsx)(f.A,{title:i(j(c)),disabled:c!==_.NOT_PERSISTED,onClick:v,children:i(j(c))}),(0,r.jsx)(f.A,{title:i("resetGroups"),onClick:o,children:i("resetGroups")}),(0,r.jsx)(f.A,{title:i("exportAll"),onClick:function(){return s(d.m.ALL)},children:i("exportAll")}),(0,r.jsx)(f.A,{title:i("exportPlugins"),onClick:function(){return s(d.m.PLUGINS)},children:i("exportPlugins")}),(0,r.jsx)(f.A,{title:i("hashCleanup"),disabled:n,onClick:t,children:i("hashCleanup")})]})};var H=n(18096),O=n(70541),R=n(6874),L=n.n(R),U=n(35695),W=n(99451);let B=function(){var e=(0,U.usePathname)(),t=(0,l.D)(),n=(0,a.c3)("SettingsTabs"),u=(0,s.useMemo)(function(){return[{path:"/settings/generic/",headline:n("genericSettings"),prefetch:!0},{path:"/settings/dropbox/",headline:n("dropboxSettings"),prefetch:!1},(null==t?void 0:t.env)==="esp8266"||(null==t?void 0:t.env)==="webpack-dev"?{path:"/settings/wifi/",headline:n("wifiSettings"),prefetch:!1}:null,{path:"/settings/plugins/",headline:n("pluginSettings"),prefetch:!1},{path:"/settings/git/",headline:n("gitSettings"),prefetch:!1}].reduce(W.N,[])},[n,t]),i=(0,s.useMemo)(function(){return u.length&&"/settings"!==e?e:null},[e,u]);return i?(0,r.jsx)(O.A,{value:i,children:u.map(function(e){var t=e.headline,n=e.path,u=e.prefetch;return(0,r.jsx)(H.A,{label:t,component:L(),href:n,prefetch:u,value:n},n)})}):null};function Y(e){var t,n,l,f=e.children,p=(0,a.c3)("Navigation"),d=(n=(t=(0,m._)((0,s.useState)(!1),2))[0],l=t[1],(0,s.useEffect)(function(){if("function"==typeof window.requestIdleCallback){var e=requestIdleCallback(function(){return l(!0)});return function(){window.cancelIdleCallback(e)}}var t=window.setTimeout(function(){return l(!0)},1e3);return function(){window.clearTimeout(t)}},[]),n);return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(o.A,{component:"h1",variant:"h1",children:p("settings")}),d&&(0,r.jsxs)(i.A,{direction:"column",gap:4,justifyContent:"space-between",sx:{flexGrow:1},children:[(0,r.jsxs)(i.A,{direction:"column",gap:6,children:[(0,r.jsx)(B,{}),(0,r.jsx)(u.A,{children:f}),(0,r.jsx)(D,{})]}),(0,r.jsx)(c,{})]})]})}},95939:(e,t,n)=>{"use strict";n.d(t,{Z:()=>i});var r=n(12115),u=n(32134),i=function(){return(0,r.useContext)(u.K)}},99451:(e,t,n)=>{"use strict";n.d(t,{N:()=>u});var r=n(87025),u=function(e,t){return t?(0,r._)(e).concat([t]):e}}},e=>{var t=t=>e(e.s=t);e.O(0,[7652,4453,700,8250,5232,7271,2491,7642,7890,6672,1487,6874,1190,4297,1760,3936,8945,8441,1684,7358],()=>t(38584)),_N_E=e.O()}]);