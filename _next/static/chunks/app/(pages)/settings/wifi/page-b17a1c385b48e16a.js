(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[9106],{9516:(e,t,n)=>{"use strict";n.d(t,{f:()=>l});var r=n(62570),s=n(95155),a=n(58674),i=n(81787),o=n(3127),d=n(12115),l=function(){var e=(0,r._)((0,d.useState)(!1),2),t=e[0],n=e[1],l=(0,d.useMemo)(function(){return(0,s.jsx)(o.default,{title:t?"Hide Password":"Show Password","aria-label":t?"hide the password":"display the password",color:"primary",onClick:function(){n(!t)},children:t?(0,s.jsx)(i.A,{}):(0,s.jsx)(a.A,{})})},[t]);return{type:(0,d.useMemo)(function(){return t?"text":"password"},[t]),button:l,setShowPassword:n}}},16632:(e,t,n)=>{"use strict";n.d(t,{default:()=>w});var r=n(693),s=n(60376),a=n(37414),i=n(12115),o=n(52596),d=n(17472),l=n(75955),u=n(10186),c=n(55170),f=n(90870);function p(e){return(0,f.Ay)("MuiCardContent",e)}(0,c.A)("MuiCardContent",["root"]);var h=n(95155),v=function(e){var t=e.classes;return(0,d.A)({root:["root"]},p,t)},m=(0,l.default)("div",{name:"MuiCardContent",slot:"Root"})({padding:16,"&:last-child":{paddingBottom:24}});let w=i.forwardRef(function(e,t){var n=(0,u.b)({props:e,name:"MuiCardContent"}),i=n.className,d=n.component,l=void 0===d?"div":d,c=(0,a._)(n,["className","component"]),f=(0,s._)((0,r._)({},n),{component:l}),p=v(f);return(0,h.jsx)(m,(0,r._)({as:l,className:(0,o.A)(p.root,i),ownerState:f,ref:t},c))})},19505:(e,t,n)=>{"use strict";n.d(t,{A:()=>a});var r=n(31418),s=n(95155);let a=(0,r.A)((0,s.jsx)("path",{d:"M6 19c0 1.1.9 2 2 2h8c1.1 0 2-.9 2-2V7H6zM19 4h-3.5l-1-1h-5l-1 1H5v2h14z"}),"Delete")},22750:(e,t,n)=>{"use strict";n.d(t,{default:()=>S});var r=n(97004),s=n(693),a=n(60376),i=n(62570),o=n(577),d=n(39249),l=n(95155),u=n(89786),c=n(53267),f=n(7642),p=n(61487),h=n(41218),v=n(16632),m=n(14426),w=n(7068),x=n(78449),_=n(700),j=n(12115),g=n(67069),k=n(9516),A=n(19505),C=n(9665),b=n(3127);let N=function(e){var t=(0,k.f)(),n=t.type,r=t.button;return(0,l.jsx)(h.default,{raised:!0,component:"li",children:(0,l.jsx)(v.default,{children:(0,l.jsxs)(w.default,{direction:"column",gap:4,children:[(0,l.jsx)(x.default,{id:"".concat(e.id,"-settings-ap-ssid"),label:"Network SSID",type:"text",value:e.ssid,slotProps:(0,a._)((0,s._)({},g.y),{input:{endAdornment:(0,l.jsx)(b.default,{title:"Delete Network",color:"primary",onClick:function(){e.update({delete:!e.delete})},children:(0,l.jsx)(A.A,{})})}}),disabled:!e.isNew||e.disabled,onChange:function(t){var n=t.target.value;e.update({ssid:n})}}),(0,l.jsx)(x.default,{id:"".concat(e.id,"-settings-ap-psk"),label:"Network Password",type:n,slotProps:(0,a._)((0,s._)({},g.y),{input:{endAdornment:r}}),value:e.psk,disabled:e.disabled,onChange:function(t){var n=t.target.value;e.update({psk:n})}}),e.delete&&(0,l.jsx)(C.default,{severity:"error",icon:(0,l.jsx)(A.A,{fontSize:"inherit"}),children:"Network will be deleted"})]})})})};var y=function(e,t){t("loading");var n,s=new AbortController,a=s.signal;return(n=(0,r._)(function(){var n;return(0,d.YH)(this,function(r){switch(r.label){case 0:return r.trys.push([0,3,,4]),[4,fetch("/wificonfig/get",{signal:a})];case 1:return[4,r.sent().json()];case 2:return(n=r.sent()).mdns=n.mdns||"",n.ap=n.ap||{ssid:"",psk:""},n.networks=n.networks||[],t(""),e(n),[3,4];case 3:return r.sent(),a.aborted||(t("error"),e(void 0)),[3,4];case 4:return[2]}})}),function(){return n.apply(this,arguments)})(),function(){s.abort("Navigated while getting wifi settings")}},M=function(){var e=(0,r._)(function(e,t,n){var r,i;return(0,d.YH)(this,function(o){switch(o.label){case 0:r=(0,a._)((0,s._)({},n),{networks:n.networks.filter(function(e){return!0===e.delete||e.psk}).filter(function(e){return e.ssid}).filter(function(e){return!(e.delete&&e.isNew)}).map(function(e){var t=e.ssid,n=e.psk;return{delete:e.delete,ssid:t,psk:n}})}),t("loading"),o.label=1;case 1:return o.trys.push([1,4,,5]),[4,fetch("/wificonfig/set",{method:"post",body:JSON.stringify(r)})];case 2:return[4,o.sent().json()];case 3:if((i=o.sent()).error)throw Error(i.error);return[3,5];case 4:return alert(o.sent()),t("error"),e(void 0),[3,5];case 5:return y(e,t),[2]}})});return function(t,n,r){return e.apply(this,arguments)}}();let S=function(){var e=(0,i._)((0,j.useState)(),2),t=e[0],n=e[1],r=(0,i._)((0,j.useState)("loading"),2),d=r[0],A=r[1],C=(0,k.f)(),b=C.type,S=C.button;if((0,j.useEffect)(function(){return y(n,A)},[n,A]),"loading"===d||!t)return(0,l.jsx)(c.default,{sx:{display:"flex",justifyContent:"center"},children:(0,l.jsx)(m.default,{color:"secondary"})});var P=""!==d&&"updated"!==d;return(0,l.jsxs)(w.default,{direction:"column",gap:6,children:[(0,l.jsxs)(w.default,{direction:"column",gap:1,children:[(0,l.jsx)(_.default,{component:"h3",variant:"h3",children:"Host Settings"}),(0,l.jsx)(h.default,{raised:!0,children:(0,l.jsx)(v.default,{children:(0,l.jsxs)(w.default,{direction:"column",gap:4,children:[(0,l.jsx)(x.default,{id:"settings-mdns",label:"mDNS Name (Bonjour/Avahi)",type:"text",disabled:P,value:t.mdns||"",onChange:function(e){var r=e.target.value;A("updated"),n((0,a._)((0,s._)({},t),{mdns:r.trim()}))}}),(0,l.jsx)(x.default,{id:"settings-ap-ssid",label:"Accesspoint SSID",type:"text",disabled:P,value:t.ap.ssid||"",onChange:function(e){var r=e.target.value;A("updated"),n((0,a._)((0,s._)({},t),{ap:(0,a._)((0,s._)({},t.ap),{ssid:r.trim()})}))}}),(0,l.jsx)(x.default,{id:"settings-ap-psk",label:"Accesspoint Password",type:b,slotProps:(0,a._)((0,s._)({},g.y),{input:{endAdornment:S}}),disabled:P,value:t.ap.psk||"",onChange:function(e){var r=e.target.value;A("updated"),n((0,a._)((0,s._)({},t),{ap:(0,a._)((0,s._)({},t.ap),{psk:r.trim()})}))}})]})})})]}),(0,l.jsxs)(w.default,{direction:"column",gap:1,children:[(0,l.jsx)(_.default,{component:"h3",variant:"h3",children:"Networks"}),(0,l.jsxs)(w.default,{direction:"column",gap:2,component:"ul",children:[t.networks.map(function(e,r){var i=e.ssid,o=e.psk,d=e.delete,u=e.isNew;return(0,l.jsx)(N,{id:"apconf-".concat(r),ssid:i,psk:void 0===o?"":o,disabled:P,isNew:void 0!==u&&u,delete:void 0!==d&&d,update:function(i){var o=t.networks;o[r]=(0,s._)({},e,i),A("updated"),n((0,a._)((0,s._)({},t),{networks:o}))}},"apconf-".concat(r))}),(0,l.jsx)(w.default,{component:"li",direction:"row",justifyContent:"flex-end",children:(0,l.jsx)(f.default,{disabled:P,title:"Add Network",color:"primary",variant:"contained",startIcon:(0,l.jsx)(u.A,{}),onClick:function(){n((0,a._)((0,s._)({},t),{networks:(0,o._)((null==t?void 0:t.networks)||[]).concat([{ssid:"",psk:"",delete:!1,isNew:!0}])}))},children:"Add Network"})})]})]}),(0,l.jsx)(p.default,{fullWidth:!0,variant:"contained",children:(0,l.jsx)(f.default,{disabled:"updated"!==d,onClick:function(){return M(n,A,t)},children:"Save WiFi-Settings"})})]})}},30127:(e,t,n)=>{Promise.resolve().then(n.bind(n,22750))},41218:(e,t,n)=>{"use strict";n.d(t,{default:()=>x});var r=n(693),s=n(60376),a=n(37414),i=n(12115),o=n(52596),d=n(17472),l=n(75955),u=n(10186),c=n(18407),f=n(55170),p=n(90870);function h(e){return(0,p.Ay)("MuiCard",e)}(0,f.A)("MuiCard",["root"]);var v=n(95155),m=function(e){var t=e.classes;return(0,d.A)({root:["root"]},h,t)},w=(0,l.default)(c.default,{name:"MuiCard",slot:"Root"})({overflow:"hidden"});let x=i.forwardRef(function(e,t){var n=(0,u.b)({props:e,name:"MuiCard"}),i=n.className,d=n.raised,l=void 0!==d&&d,c=(0,a._)(n,["className","raised"]),f=(0,s._)((0,r._)({},n),{raised:l}),p=m(f);return(0,v.jsx)(w,(0,r._)({className:(0,o.A)(p.root,i),elevation:l?8:void 0,ref:t,ownerState:f},c))})},53267:(e,t,n)=>{"use strict";n.d(t,{default:()=>l});var r=n(67908),s=n(34084),a=n(69077),i=n(54107),o=(0,n(55170).A)("MuiBox",["root"]),d=(0,a.A)();let l=(0,r.default)({themeId:i.A,defaultTheme:d,defaultClassName:o.root,generateClassName:s.A.generate})},58674:(e,t,n)=>{"use strict";n.d(t,{A:()=>a});var r=n(31418),s=n(95155);let a=(0,r.A)((0,s.jsx)("path",{d:"M12 4.5C7 4.5 2.73 7.61 1 12c1.73 4.39 6 7.5 11 7.5s9.27-3.11 11-7.5c-1.73-4.39-6-7.5-11-7.5M12 17c-2.76 0-5-2.24-5-5s2.24-5 5-5 5 2.24 5 5-2.24 5-5 5m0-8c-1.66 0-3 1.34-3 3s1.34 3 3 3 3-1.34 3-3-1.34-3-3-3"}),"Visibility")},67069:(e,t,n)=>{"use strict";n.d(t,{y:()=>r});var r={htmlInput:{autoComplete:"off",autoCorrect:"off",autoCapitalize:"off",spellCheck:!1},inputLabel:{shrink:!0},fullWidth:!0,size:"small"}},67908:(e,t,n)=>{"use strict";n.d(t,{default:()=>f});var r=n(693),s=n(37414),a=n(12115),i=n(52596),o=n(46879),d=n(13184),l=n(5300),u=n(64330),c=n(95155);function f(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.themeId,n=e.defaultTheme,f=e.defaultClassName,p=void 0===f?"MuiBox-root":f,h=e.generateClassName,v=(0,o.default)("div",{shouldForwardProp:function(e){return"theme"!==e&&"sx"!==e&&"as"!==e}})(d.A);return a.forwardRef(function(e,a){var o=(0,u.default)(n),d=(0,l.A)(e),f=d.className,m=d.component,w=(0,s._)(d,["className","component"]);return(0,c.jsx)(v,(0,r._)({as:void 0===m?"div":m,ref:a,className:(0,i.A)(f,h?h(p):p),theme:t&&o[t]||o},w))})}},81787:(e,t,n)=>{"use strict";n.d(t,{A:()=>a});var r=n(31418),s=n(95155);let a=(0,r.A)((0,s.jsx)("path",{d:"M12 7c2.76 0 5 2.24 5 5 0 .65-.13 1.26-.36 1.83l2.92 2.92c1.51-1.26 2.7-2.89 3.43-4.75-1.73-4.39-6-7.5-11-7.5-1.4 0-2.74.25-3.98.7l2.16 2.16C10.74 7.13 11.35 7 12 7M2 4.27l2.28 2.28.46.46C3.08 8.3 1.78 10.02 1 12c1.73 4.39 6 7.5 11 7.5 1.55 0 3.03-.3 4.38-.84l.42.42L19.73 22 21 20.73 3.27 3zM7.53 9.8l1.55 1.55c-.05.21-.08.43-.08.65 0 1.66 1.34 3 3 3 .22 0 .44-.03.65-.08l1.55 1.55c-.67.33-1.41.53-2.2.53-2.76 0-5-2.24-5-5 0-.79.2-1.53.53-2.2m4.31-.78 3.15 3.15.02-.16c0-1.66-1.34-3-3-3z"}),"VisibilityOff")},89786:(e,t,n)=>{"use strict";n.d(t,{A:()=>a});var r=n(31418),s=n(95155);let a=(0,r.A)((0,s.jsx)("path",{d:"M19 3H5c-1.11 0-2 .9-2 2v14c0 1.1.89 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2m-2 10h-4v4h-2v-4H7v-2h4V7h2v4h4z"}),"AddBox")}},e=>{var t=t=>e(e.s=t);e.O(0,[4453,700,7859,6139,3313,7642,8449,1487,9665,8441,5955,1684,7358],()=>t(30127)),_N_E=e.O()}]);