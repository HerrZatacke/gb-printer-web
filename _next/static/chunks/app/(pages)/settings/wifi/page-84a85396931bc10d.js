(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[9106],{9516:(e,t,n)=>{"use strict";n.d(t,{f:()=>c});var s=n(78538),r=n(95155),a=n(58674),i=n(81787),o=n(3127),d=n(17652),l=n(12115),c=function(){var e=(0,s._)((0,l.useState)(!1),2),t=e[0],n=e[1],c=(0,d.c3)("useAsPasswordField"),u=(0,l.useMemo)(function(){return(0,r.jsx)(o.A,{title:c(t?"hidePassword":"showPassword"),"aria-label":c(t?"hidePassword":"showPassword"),color:"primary",onClick:function(){n(!t)},children:t?(0,r.jsx)(i.A,{}):(0,r.jsx)(a.A,{})})},[c,t]);return{type:(0,l.useMemo)(function(){return t?"text":"password"},[t]),button:u,setShowPassword:n}}},16632:(e,t,n)=>{"use strict";n.d(t,{A:()=>A});var s=n(693),r=n(60376),a=n(37414),i=n(12115),o=n(52596),d=n(17472),l=n(75955),c=n(10186),u=n(55170),p=n(90870);function f(e){return(0,p.Ay)("MuiCardContent",e)}(0,u.A)("MuiCardContent",["root"]);var h=n(95155),v=function(e){var t=e.classes;return(0,d.A)({root:["root"]},f,t)},m=(0,l.Ay)("div",{name:"MuiCardContent",slot:"Root"})({padding:16,"&:last-child":{paddingBottom:24}});let A=i.forwardRef(function(e,t){var n=(0,c.b)({props:e,name:"MuiCardContent"}),i=n.className,d=n.component,l=void 0===d?"div":d,u=(0,a._)(n,["className","component"]),p=(0,r._)((0,s._)({},n),{component:l}),f=v(p);return(0,h.jsx)(m,(0,s._)({as:l,className:(0,o.A)(f.root,i),ownerState:p,ref:t},u))})},19505:(e,t,n)=>{"use strict";n.d(t,{A:()=>a});var s=n(31418),r=n(95155);let a=(0,s.A)((0,r.jsx)("path",{d:"M6 19c0 1.1.9 2 2 2h8c1.1 0 2-.9 2-2V7H6zM19 4h-3.5l-1-1h-5l-1 1H5v2h14z"}),"Delete")},22750:(e,t,n)=>{"use strict";n.d(t,{default:()=>P});var s=n(97004),r=n(693),a=n(60376),i=n(78538),o=n(87025),d=n(39249),l=n(95155),c=n(89786),u=n(54581),p=n(7642),f=n(61487),h=n(41218),v=n(16632),m=n(14426),A=n(71803),w=n(34991),x=n(700),_=n(17652),j=n(12115),g=n(67069),k=n(9516),C=n(19505),b=n(9665),y=n(3127);let N=function(e){var t=(0,k.f)(),n=t.type,s=t.button,i=(0,_.c3)("SettingsWiFi");return(0,l.jsx)(h.A,{raised:!0,component:"li",children:(0,l.jsx)(v.A,{children:(0,l.jsxs)(A.A,{direction:"column",gap:4,children:[(0,l.jsx)(w.A,{id:"".concat(e.id,"-settings-ap-ssid"),label:i("networkSSID"),type:"text",value:e.ssid,slotProps:(0,a._)((0,r._)({},g.y),{input:{endAdornment:(0,l.jsx)(y.A,{title:i("deleteNetwork"),color:"primary",onClick:function(){e.update({delete:!e.delete})},children:(0,l.jsx)(C.A,{})})}}),disabled:!e.isNew||e.disabled,onChange:function(t){var n=t.target.value;e.update({ssid:n})}}),(0,l.jsx)(w.A,{id:"".concat(e.id,"-settings-ap-psk"),label:i("networkPassword"),type:n,slotProps:(0,a._)((0,r._)({},g.y),{input:{endAdornment:s}}),value:e.psk,disabled:e.disabled,onChange:function(t){var n=t.target.value;e.update({psk:n})}}),e.delete&&(0,l.jsx)(b.A,{severity:"error",icon:(0,l.jsx)(C.A,{fontSize:"inherit"}),children:i("willDeleteNetwork")})]})})})};var M=function(e,t){t("loading");var n,r=new AbortController,a=r.signal;return(n=(0,s._)(function(){var n;return(0,d.YH)(this,function(s){switch(s.label){case 0:return s.trys.push([0,3,,4]),[4,fetch("/wificonfig/get",{signal:a})];case 1:return[4,s.sent().json()];case 2:return(n=s.sent()).mdns=n.mdns||"",n.ap=n.ap||{ssid:"",psk:""},n.networks=n.networks||[],t(""),e(n),[3,4];case 3:return s.sent(),a.aborted||(t("error"),e(void 0)),[3,4];case 4:return[2]}})}),function(){return n.apply(this,arguments)})(),function(){r.abort()}},S=function(){var e=(0,s._)(function(e,t,n){var s,i;return(0,d.YH)(this,function(o){switch(o.label){case 0:s=(0,a._)((0,r._)({},n),{networks:n.networks.filter(function(e){return!0===e.delete||e.psk}).filter(function(e){return e.ssid}).filter(function(e){return!(e.delete&&e.isNew)}).map(function(e){var t=e.ssid,n=e.psk;return{delete:e.delete,ssid:t,psk:n}})}),t("loading"),o.label=1;case 1:return o.trys.push([1,4,,5]),[4,fetch("/wificonfig/set",{method:"post",body:JSON.stringify(s)})];case 2:return[4,o.sent().json()];case 3:if((i=o.sent()).error)throw Error(i.error);return[3,5];case 4:return alert(o.sent()),t("error"),e(void 0),[3,5];case 5:return M(e,t),[2]}})});return function(t,n,s){return e.apply(this,arguments)}}();let P=function(){var e=(0,i._)((0,j.useState)(),2),t=e[0],n=e[1],s=(0,i._)((0,j.useState)("loading"),2),d=s[0],C=s[1],b=(0,k.f)(),y=b.type,P=b.button,z=(0,_.c3)("SettingsWiFi");if((0,j.useEffect)(function(){return M(n,C)},[n,C]),"loading"===d||!t)return(0,l.jsx)(u.A,{sx:{display:"flex",justifyContent:"center"},children:(0,l.jsx)(m.A,{color:"secondary"})});var H=""!==d&&"updated"!==d;return(0,l.jsxs)(A.A,{direction:"column",gap:6,children:[(0,l.jsxs)(A.A,{direction:"column",gap:1,children:[(0,l.jsx)(x.A,{component:"h3",variant:"h3",children:z("hostSettings")}),(0,l.jsx)(h.A,{raised:!0,children:(0,l.jsx)(v.A,{children:(0,l.jsxs)(A.A,{direction:"column",gap:4,children:[(0,l.jsx)(w.A,{id:"settings-mdns",label:z("mdnsName"),type:"text",disabled:H,value:t.mdns||"",onChange:function(e){var s=e.target.value;C("updated"),n((0,a._)((0,r._)({},t),{mdns:s.trim()}))}}),(0,l.jsx)(w.A,{id:"settings-ap-ssid",label:z("accesspointSSID"),type:"text",disabled:H,value:t.ap.ssid||"",onChange:function(e){var s=e.target.value;C("updated"),n((0,a._)((0,r._)({},t),{ap:(0,a._)((0,r._)({},t.ap),{ssid:s.trim()})}))}}),(0,l.jsx)(w.A,{id:"settings-ap-psk",label:z("accesspointPassword"),type:y,slotProps:(0,a._)((0,r._)({},g.y),{input:{endAdornment:P}}),disabled:H,value:t.ap.psk||"",onChange:function(e){var s=e.target.value;C("updated"),n((0,a._)((0,r._)({},t),{ap:(0,a._)((0,r._)({},t.ap),{psk:s.trim()})}))}})]})})})]}),(0,l.jsxs)(A.A,{direction:"column",gap:1,children:[(0,l.jsx)(x.A,{component:"h3",variant:"h3",children:z("networks")}),(0,l.jsxs)(A.A,{direction:"column",gap:2,component:"ul",children:[t.networks.map(function(e,s){var i=e.ssid,o=e.psk,d=e.delete,c=e.isNew;return(0,l.jsx)(N,{id:"apconf-".concat(s),ssid:i,psk:void 0===o?"":o,disabled:H,isNew:void 0!==c&&c,delete:void 0!==d&&d,update:function(i){var o=t.networks;o[s]=(0,r._)({},e,i),C("updated"),n((0,a._)((0,r._)({},t),{networks:o}))}},"apconf-".concat(s))}),(0,l.jsx)(A.A,{component:"li",direction:"row",justifyContent:"flex-end",children:(0,l.jsx)(p.A,{disabled:H,title:z("addNetwork"),color:"primary",variant:"contained",startIcon:(0,l.jsx)(c.A,{}),onClick:function(){n((0,a._)((0,r._)({},t),{networks:(0,o._)((null==t?void 0:t.networks)||[]).concat([{ssid:"",psk:"",delete:!1,isNew:!0}])}))},children:z("addNetwork")})})]})]}),(0,l.jsx)(f.A,{fullWidth:!0,variant:"contained",children:(0,l.jsx)(p.A,{disabled:"updated"!==d,onClick:function(){return S(n,C,t)},children:z("saveSettings")})})]})}},30127:(e,t,n)=>{Promise.resolve().then(n.bind(n,22750))},41218:(e,t,n)=>{"use strict";n.d(t,{A:()=>w});var s=n(693),r=n(60376),a=n(37414),i=n(12115),o=n(52596),d=n(17472),l=n(75955),c=n(10186),u=n(18407),p=n(55170),f=n(90870);function h(e){return(0,f.Ay)("MuiCard",e)}(0,p.A)("MuiCard",["root"]);var v=n(95155),m=function(e){var t=e.classes;return(0,d.A)({root:["root"]},h,t)},A=(0,l.Ay)(u.A,{name:"MuiCard",slot:"Root"})({overflow:"hidden"});let w=i.forwardRef(function(e,t){var n=(0,c.b)({props:e,name:"MuiCard"}),i=n.className,d=n.raised,l=void 0!==d&&d,u=(0,a._)(n,["className","raised"]),p=(0,r._)((0,s._)({},n),{raised:l}),f=m(p);return(0,v.jsx)(A,(0,s._)({className:(0,o.A)(f.root,i),elevation:l?8:void 0,ref:t,ownerState:p},u))})},54581:(e,t,n)=>{"use strict";n.d(t,{A:()=>A});var s=n(693),r=n(37414),a=n(12115),i=n(52596),o=n(8302),d=n(13184),l=n(5300),c=n(64330),u=n(95155),p=n(34084),f=n(69077),h=n(54107),v=(0,n(55170).A)("MuiBox",["root"]),m=(0,f.A)();let A=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.themeId,n=e.defaultTheme,p=e.defaultClassName,f=void 0===p?"MuiBox-root":p,h=e.generateClassName,v=(0,o.Ay)("div",{shouldForwardProp:function(e){return"theme"!==e&&"sx"!==e&&"as"!==e}})(d.A);return a.forwardRef(function(e,a){var o=(0,c.A)(n),d=(0,l.A)(e),p=d.className,m=d.component,A=(0,r._)(d,["className","component"]);return(0,u.jsx)(v,(0,s._)({as:void 0===m?"div":m,ref:a,className:(0,i.A)(p,h?h(f):f),theme:t&&o[t]||o},A))})}({themeId:h.A,defaultTheme:m,defaultClassName:v.root,generateClassName:p.A.generate})},58674:(e,t,n)=>{"use strict";n.d(t,{A:()=>a});var s=n(31418),r=n(95155);let a=(0,s.A)((0,r.jsx)("path",{d:"M12 4.5C7 4.5 2.73 7.61 1 12c1.73 4.39 6 7.5 11 7.5s9.27-3.11 11-7.5c-1.73-4.39-6-7.5-11-7.5M12 17c-2.76 0-5-2.24-5-5s2.24-5 5-5 5 2.24 5 5-2.24 5-5 5m0-8c-1.66 0-3 1.34-3 3s1.34 3 3 3 3-1.34 3-3-1.34-3-3-3"}),"Visibility")},67069:(e,t,n)=>{"use strict";n.d(t,{y:()=>s});var s={htmlInput:{autoComplete:"off",autoCorrect:"off",autoCapitalize:"off",spellCheck:!1},inputLabel:{shrink:!0},fullWidth:!0,size:"small"}},81787:(e,t,n)=>{"use strict";n.d(t,{A:()=>a});var s=n(31418),r=n(95155);let a=(0,s.A)((0,r.jsx)("path",{d:"M12 7c2.76 0 5 2.24 5 5 0 .65-.13 1.26-.36 1.83l2.92 2.92c1.51-1.26 2.7-2.89 3.43-4.75-1.73-4.39-6-7.5-11-7.5-1.4 0-2.74.25-3.98.7l2.16 2.16C10.74 7.13 11.35 7 12 7M2 4.27l2.28 2.28.46.46C3.08 8.3 1.78 10.02 1 12c1.73 4.39 6 7.5 11 7.5 1.55 0 3.03-.3 4.38-.84l.42.42L19.73 22 21 20.73 3.27 3zM7.53 9.8l1.55 1.55c-.05.21-.08.43-.08.65 0 1.66 1.34 3 3 3 .22 0 .44-.03.65-.08l1.55 1.55c-.67.33-1.41.53-2.2.53-2.76 0-5-2.24-5-5 0-.79.2-1.53.53-2.2m4.31-.78 3.15 3.15.02-.16c0-1.66-1.34-3-3-3z"}),"VisibilityOff")},89786:(e,t,n)=>{"use strict";n.d(t,{A:()=>a});var s=n(31418),r=n(95155);let a=(0,s.A)((0,r.jsx)("path",{d:"M19 3H5c-1.11 0-2 .9-2 2v14c0 1.1.89 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2m-2 10h-4v4h-2v-4H7v-2h4V7h2v4h4z"}),"AddBox")}},e=>{var t=t=>e(e.s=t);e.O(0,[7652,4453,700,5232,3701,9710,7642,4991,1487,9665,8441,1684,7358],()=>t(30127)),_N_E=e.O()}]);