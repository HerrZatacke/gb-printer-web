(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[7437],{1607:(e,t,n)=>{"use strict";n.d(t,{D:()=>p,EnvProvider:()=>h});var r=n(97004),i=n(693),s=n(60376),u=n(78538),a=n(39249),l=n(95155),o=n(12115),c=n(52166),f=n(75380),d=(0,o.createContext)(null),p=function(){return(0,o.useContext)(d)},h=function(e){var t=e.children,n=(0,u._)((0,o.useState)(null),2),p=n[0],h=n[1],v=(0,c.A)().setPrinterUrl;return(0,o.useEffect)(function(){var e=["/gb-printer-web","/env.json"].filter(Boolean).join("/");e&&(0,r._)(function(){var t,n,r,u;return(0,a.YH)(this,function(a){switch(a.label){case 0:return a.trys.push([0,5,,6]),[4,(0,f.ZU)()];case 1:return a.sent(),[4,fetch(e)];case 2:return[4,a.sent().json()];case 3:return t=a.sent(),r=[(0,i._)({},t)],u={},[4,f.mU.driver()];case 4:return"esp8266"===(n=s._.apply(void 0,r.concat([(u.localforage=a.sent(),u)]))).env&&v("/"),h(n),[3,6];case 5:return a.sent(),h({version:"0.0.0",maximages:0,localforage:"error",env:"error",fstype:"-",bootmode:"-",oled:!1}),[3,6];case 6:return[2]}})})()},[v]),(0,l.jsx)(d.Provider,{value:p,children:t})}},5687:(e,t,n)=>{"use strict";n.d(t,{A:()=>r});let r=n(14810).A},9700:(e,t,n)=>{"use strict";n.d(t,{A:()=>r});let r=n(22550).A},14810:(e,t,n)=>{"use strict";function r(e){return e&&e.ownerDocument||document}n.d(t,{A:()=>r})},21329:(e,t,n)=>{"use strict";n.d(t,{A:()=>r});let r=n(43430).A},22550:(e,t,n)=>{"use strict";function r(e,t=166){let n;function i(...r){clearTimeout(n),n=setTimeout(()=>{e.apply(this,r)},t)}return i.clear=()=>{clearTimeout(n)},i}n.d(t,{A:()=>r})},31178:(e,t,n)=>{"use strict";n.d(t,{A:()=>i});var r=n(14810);function i(e){return(0,r.A)(e).defaultView||window}},32299:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>o,useRtl:()=>l});var r=n(693),i=n(37414),s=n(12115),u=n(95155),a=s.createContext(),l=function(){var e=s.useContext(a);return null!=e&&e};let o=function(e){var t=e.value,n=(0,i._)(e,["value"]);return(0,u.jsx)(a.Provider,(0,r._)({value:null==t||t},n))}},34742:(e,t,n)=>{"use strict";n.d(t,{A:()=>r});let r=n(31178).A},38584:(e,t,n)=>{Promise.resolve().then(n.bind(n,91128))},50422:(e,t,n)=>{"use strict";n.d(t,{A:()=>c});var r=n(693),i=n(60376),s=n(37414),u=n(81616),a=n(13051),l=n(56501),o=n(89602);let c=function(e){var t,n=e.elementType,c=e.externalSlotProps,f=e.ownerState,d=e.skipResolvingSlotProps,p=(0,s._)(e,["elementType","externalSlotProps","ownerState","skipResolvingSlotProps"]),h=void 0!==d&&d?{}:(0,o.A)(c,f),v=(0,l.A)((0,i._)((0,r._)({},p),{externalSlotProps:h})),g=v.props,m=v.internalRef,_=(0,u.A)(m,null==h?void 0:h.ref,null==(t=e.additionalProps)?void 0:t.ref);return(0,a.A)(n,(0,i._)((0,r._)({},g),{ref:_}),f)}},53267:(e,t,n)=>{"use strict";n.d(t,{default:()=>o});var r=n(67908),i=n(34084),s=n(69077),u=n(54107),a=(0,n(55170).A)("MuiBox",["root"]),l=(0,s.A)();let o=(0,r.default)({themeId:u.A,defaultTheme:l,defaultClassName:a.root,generateClassName:i.A.generate})},61564:(e,t,n)=>{"use strict";n.d(t,{t:()=>h});var r=n(97004),i=n(39249),s=n(12115),u=n(33236),a=n(39630),l=n(95939),o=n(23747),c=n(41186),f=n(3381),d=n(71620),p=n(11760),h=function(){var e=(0,l.Z)().view,t=(0,c.A)(),n=t.dismissDialog,h=t.setDialog,v=(0,f.A)().setEditImageGroup,g=(0,p.h)(),m=g.deleteImageGroup,_=g.setImageGroups,x=g.images,w=(0,d.A)().imageSelection,b=(0,s.useMemo)(function(){if(!w.length)return"";var e,t=x.filter(function(e){var t=e.hash;return w.includes(t)}).map(function(e){return e.title}).filter(function(e){return e.length>3}),n=null==(e=(0,u.Hg)(t).filter(function(e){return e.length>3})[0])?void 0:e.trim();return n?n.replace(/[_-]/g," ").replace(/^\s*\d+\s+|\s+\d+\s*$/g,"").trim():"New Group"},[w,x]);return{resetGroups:function(){h({message:"Reset image groups?",questions:function(){return[{key:"info",type:a.V.INFO,label:"This will remove ALL your created groups and all existing images will be moved to the top level."}]},confirm:(0,r._)(function(){return(0,i.YH)(this,function(e){return n(0),_([]),[2]})}),deny:(0,r._)(function(){return(0,i.YH)(this,function(e){return n(0),[2]})})})},createGroup:function(e){v({groupId:o.Ll,newGroupCover:e,newGroupTitle:b})},editGroup:function(e){v({groupId:e})},deleteGroup:function(t){var s=e.groups.find(function(e){return e.id===t});s&&h({message:"Delete image group?",questions:function(){return[{key:"info",type:a.V.INFO,label:'This will delete this group "'.concat(s.title||s.slug,'" and move all children (images & groups) to the current level.')}]},confirm:(0,r._)(function(){return(0,i.YH)(this,function(e){return n(0),m(t),[2]})}),deny:(0,r._)(function(){return(0,i.YH)(this,function(e){return n(0),[2]})})})}}}},67908:(e,t,n)=>{"use strict";n.d(t,{default:()=>d});var r=n(693),i=n(37414),s=n(12115),u=n(52596),a=n(46879),l=n(13184),o=n(5300),c=n(64330),f=n(95155);function d(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.themeId,n=e.defaultTheme,d=e.defaultClassName,p=void 0===d?"MuiBox-root":d,h=e.generateClassName,v=(0,a.default)("div",{shouldForwardProp:function(e){return"theme"!==e&&"sx"!==e&&"as"!==e}})(l.A);return s.forwardRef(function(e,s){var a=(0,c.default)(n),l=(0,o.A)(e),d=l.className,g=l.component,m=(0,i._)(l,["className","component"]);return(0,f.jsx)(v,(0,r._)({as:void 0===g?"div":g,ref:s,className:(0,u.A)(d,h?h(p):p),theme:t&&a[t]||a},m))})}},91128:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>F});var r=n(95155),i=n(53267),s=n(7068),u=n(700),a=n(17652),l=n(12115),o=n(1607);let c=function(){var e=(0,o.D)(),t=(0,a.c3)("EnvInfo"),n=(0,l.useMemo)(function(){return e?[t("appVersion",{value:"1.49.5"}),t("appBranch",{value:"master"}),t("printerVersion",{value:e.version}),t("maxImages",{value:e.maximages}),t("storageDriver",{value:e.localforage}),t("envType",{value:e.env}),t("filesystem",{value:e.fstype}),t("bootmode",{value:e.bootmode}),t("hasOled",{value:e.oled?t("yes"):t("no")})]:[]},[e,t]);return(0,r.jsx)(s.default,{component:"ul",direction:"column",children:n.map(function(e){return(0,r.jsx)(u.default,{component:"li",variant:"caption",color:"textDisabled",align:"right",lineHeight:1.25,children:e},e)})})};var f=n(7642),d=n(61487),p=n(69229),h=n(61564),v=n(83936),g=n(97004),m=n(78538),_=n(39249),x=function(e){return e.PERSISTED="persisted",e.NOT_PERSISTED="not-persisted",e.FAILED="failed",e.NO_API="no_api",e}({}),w=!!("undefined"!=typeof navigator&&navigator.storage&&navigator.storage.persist),b=function(){var e=(0,g._)(function(e){return(0,_.YH)(this,function(t){switch(t.label){case 0:if(!w)return[3,2];return[4,navigator.storage.persisted()];case 1:return e(t.sent()?"persisted":"not-persisted"),[3,3];case 2:e("no_api"),t.label=3;case 3:return[2]}})});return function(t){return e.apply(this,arguments)}}(),A=function(){var e=(0,g._)(function(e){return(0,_.YH)(this,function(t){switch(t.label){case 0:if(!w)return[3,2];return[4,navigator.storage.persist()];case 1:return e(t.sent()?"persisted":"failed"),[3,3];case 2:e("no_api"),t.label=3;case 3:return[2]}})});return function(t){return e.apply(this,arguments)}}();let S=function(){var e,t=(0,m._)((0,l.useState)("not-persisted"),2),n=t[0],r=t[1];return(0,l.useEffect)(function(){b(r)},[]),{persistAPIAvailable:w,persisted:n,requestPersist:(e=(0,g._)(function(){return(0,_.YH)(this,function(e){return A(r),[2]})}),function(){return e.apply(this,arguments)})}};var P=n(86447),y=n(693),C=n(60376),j=n(633),I=n(11760),N=n(55364),T=n(5847),E=n(72623),k=function(){var e=(0,g._)(function(e,t,n){var r;return(0,_.YH)(this,function(i){switch(i.label){case 0:return[4,(0,T.T)(e,t)(n,!1)];case 1:if(!(r=i.sent()))return[2,null];return[4,(0,E.cg)(r)];case 2:if(i.sent().dataHash!==n)return[2,(0,E.UN)(r)];return[2,null]}})});return function(t,n,r){return e.apply(this,arguments)}}();let H=function(){var e=(0,I.h)(),t=e.frames,r=e.images,i=(0,j.g)().updateImageHash,s=(0,m._)((0,l.useState)(!0),2),u=s[0],a=s[1];return window.enableHashCleanup=function(){return a(!1)},{cleanupBusy:u,hashCleanup:(0,g._)(function(){var e,s,u;return(0,_.YH)(this,function(l){switch(l.label){case 0:return a(!0),e=0,s=0,[4,Promise.resolve().then(n.t.bind(n,52491,23))];case 1:var o;return u=l.sent().default,[4,Promise.all(r.map((o=(0,g._)(function(n){var a,l,o,c,f;return(0,_.YH)(this,function(d){switch(d.label){case 0:var p;if(a=n.hash,!(0,N.pl)(n))return[3,2];return[4,Promise.all(Object.keys(l=n.hashes).map((p=(0,g._)(function(e){var n,i;return(0,_.YH)(this,function(s){switch(s.label){case 0:if(n=l[e],i=null,!n)return[3,2];return[4,k(r,t,n)];case 1:i=s.sent(),s.label=2;case 2:return[2,(0,P._)({},e,i||n)]}})}),function(e){return p.apply(this,arguments)})))];case 1:return(c=u(o=d.sent().reduce(function(e,t){return(0,y._)({},e,t)},{})))!==a&&(e+=1,i(a,(0,C._)((0,y._)({},n),{hash:c,hashes:o}))),[3,4];case 2:return[4,k(r,t,a)];case 3:(f=d.sent())&&(s+=1,i(a,(0,C._)((0,y._)({},n),{hash:f}))),d.label=4;case 4:return[2]}})}),function(e){return o.apply(this,arguments)})))];case 2:return l.sent(),a(!1),console.info({iCounterRGBN:e,iCounterMono:s}),[2]}})})}};var D=function(e){switch(e){case x.PERSISTED:return"persistState.isPersistent";case x.NOT_PERSISTED:return"persistState.requestPersistence";case x.NO_API:return"persistState.apiUnavailable";case x.FAILED:default:return"persistState.failed"}};let G=function(){var e=H(),t=e.hashCleanup,n=e.cleanupBusy,i=(0,v.W)().downloadSettings,s=(0,a.c3)("ExportSettings"),u=(0,h.t)().resetGroups,l=function(e){return i(e)},o=S(),c=o.persisted,g=o.requestPersist;return(0,r.jsxs)(d.default,{variant:"contained",fullWidth:!0,children:[(0,r.jsx)(f.default,{title:s(D(c)),disabled:c!==x.NOT_PERSISTED,onClick:g,children:s(D(c))}),(0,r.jsx)(f.default,{title:s("resetGroups"),onClick:u,children:s("resetGroups")}),(0,r.jsx)(f.default,{title:s("exportAll"),onClick:function(){return l(p.m.ALL)},children:s("exportAll")}),(0,r.jsx)(f.default,{title:s("exportPlugins"),onClick:function(){return l(p.m.PLUGINS)},children:s("exportPlugins")}),(0,r.jsx)(f.default,{title:s("hashCleanup"),disabled:n,onClick:t,children:s("hashCleanup")})]})};var R=n(18096),Y=n(53369),O=n(6874),L=n.n(O),q=n(35695),B=n(99451);let M=function(){var e=(0,q.usePathname)(),t=(0,o.D)(),n=(0,a.c3)("SettingsTabs"),i=(0,l.useMemo)(function(){return[{path:"/settings/generic/",headline:n("genericSettings"),prefetch:!0},{path:"/settings/dropbox/",headline:n("dropboxSettings"),prefetch:!1},(null==t?void 0:t.env)==="esp8266"||(null==t?void 0:t.env)==="webpack-dev"?{path:"/settings/wifi/",headline:n("wifiSettings"),prefetch:!1}:null,{path:"/settings/plugins/",headline:n("pluginSettings"),prefetch:!1},{path:"/settings/git/",headline:n("gitSettings"),prefetch:!1}].reduce(B.N,[])},[t]),s=(0,l.useMemo)(function(){return i.length&&"/settings"!==e?e:null},[e,i]);return s?(0,r.jsx)(Y.default,{value:s,children:i.map(function(e){var t=e.headline,n=e.path,i=e.prefetch;return(0,r.jsx)(R.default,{label:t,component:L(),href:n,prefetch:i,value:n},n)})}):null};function F(e){var t,n,a,o=e.children,f=(n=(t=(0,m._)((0,l.useState)(!1),2))[0],a=t[1],(0,l.useEffect)(function(){if("function"==typeof window.requestIdleCallback){var e=requestIdleCallback(function(){return a(!0)});return function(){window.cancelIdleCallback(e)}}var t=window.setTimeout(function(){return a(!0)},1e3);return function(){window.clearTimeout(t)}},[]),n);return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(u.default,{component:"h1",variant:"h1",children:"Settings"}),f&&(0,r.jsxs)(s.default,{direction:"column",gap:4,justifyContent:"space-between",sx:{flexGrow:1},children:[(0,r.jsxs)(s.default,{direction:"column",gap:6,children:[(0,r.jsx)(M,{}),(0,r.jsx)(i.default,{children:o}),(0,r.jsx)(G,{})]}),(0,r.jsx)(c,{})]})]})}},99451:(e,t,n)=>{"use strict";n.d(t,{N:()=>i});var r=n(87025),i=function(e,t){return t?(0,r._)(e).concat([t]):e}}},e=>{var t=t=>e(e.s=t);e.O(0,[4453,700,7859,7271,8250,2491,2797,7642,7890,1487,6672,6874,3678,9660,1760,3936,283,8441,1684,7358],()=>t(38584)),_N_E=e.O()}]);