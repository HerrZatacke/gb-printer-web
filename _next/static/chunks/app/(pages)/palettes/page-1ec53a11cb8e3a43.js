(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[411],{4144:(e,t,n)=>{"use strict";n.d(t,{A:()=>u});var r=n(95155),a=n(41574),i=n(89041),o=n(12115),l=n(94529),s=n(23441),c=n(10022);let u=function(e){var t=e.fixedView,n=e.showLoader,u=e.children,d=(0,s.h)().ddpx,p=(0,c.C$)().galleryView,f=t||p,h=(0,o.useMemo)(function(){var e="",t="";switch(f===l.j.GALLERY_VIEW_SMALL&&1===d?l.j.GALLERY_VIEW_1X:f){case l.j.GALLERY_VIEW_SMALL:e="".concat(160/d,"px"),t="".concat(8/d,"px");break;case l.j.PALETTE_VIEW:e="minmax(270px, 1fr)",t="32px";break;case l.j.GALLERY_VIEW_1X:e="160px",t="16px";break;case l.j.GALLERY_VIEW_2X:e="320px",t="32px";break;case l.j.GALLERY_VIEW_MAX:e="100%",t="32px"}return{gap:t,display:"grid",justifyContent:"center",gridTemplateColumns:"repeat(auto-fill, ".concat(e,")")}},[f,d]);return(0,r.jsxs)(a.A,{component:"ul",sx:h,position:"relative",children:[n&&(0,r.jsx)(i.A,{color:"secondary",variant:"indeterminate",sx:{position:"absolute",top:-4,left:0,right:0,zIndex:1}}),u]})}},23441:(e,t,n)=>{"use strict";n.d(t,{h:()=>o});var r=n(22043),a=n(12115),i=function(){var e;return{width:window.innerWidth,height:window.innerHeight,ddpx:window.devicePixelRatio<=2?window.devicePixelRatio:window.devicePixelRatio/2,layoutWidth:(e=window.innerWidth)>1220?1155:e>1025?960:e>830?765:e>635?570:e>440?375:e-40}},o=function(){var e=(0,r._)((0,a.useState)(i()),2),t=e[0],n=e[1];return(0,a.useEffect)(function(){var e=function(){n(i())};return window.addEventListener("resize",e),function(){return window.removeEventListener("resize",e)}},[n]),t}},28425:(e,t,n)=>{"use strict";n.d(t,{l:()=>l});var r=n(45377),a=n(83231),i=n(30771),o=n(10022),l=function(){var e=(0,o.C$)().printerUrl,t=(0,o.I0)().printerFunctions,n=(0,a.W)().downloadSettings,l=t.length>0,s=(0,i.A)().handleFileImport;return{printerUrl:e?"".concat(e,"remote.html"):void 0,printerConnected:l,importPlainText:function(e){s([new File((0,r._)(e),"Text input.txt",{type:"text/plain"})])},importFiles:s,exportJson:function(e){return n(e)}}}},53749:(e,t,n)=>{"use strict";n.d(t,{A:()=>A,E:()=>x});var r=n(61975),a=n(22043),i=n(45377),o=n(71450),l=n(51638),s=n.n(l),c=n(20649),u=n(61251),d=n.n(u),p=n(12115),f=n(10022),h=n(1108),x=function(e){var t=(0,a._)(e,3),n=t[0],r=t[1],i=t[2];return"#"+Math.min(255,Math.max(0,n)).toString(16).padStart(2,"0")+Math.min(255,Math.max(0,r)).toString(16).padStart(2,"0")+Math.min(255,Math.max(0,i)).toString(16).padStart(2,"0")},m=function(e,t){var n=.299*e[0]+.587*e[1]+.114*e[2],r=.299*t[0]+.587*t[1]+.114*t[2];return n>r?-1:+(n<r)};let A=function(){var e=(0,a._)((0,p.useState)(!1),2),t=e[0],n=e[1],l=(0,f.I0)().setError,u=(0,f.vT)(),x=u.setPickColors,A=u.cancelPickColors;return{onInputChange:function(e){var t=e.target;return(0,r._)(function(){var e,r,u,p,f;return(0,o.YH)(this,function(o){switch(o.label){case 0:if(!(null==(e=t.files)?void 0:e[0]))return[3,2];return n(!0),[4,(0,h.A)(t.files[0],!0)];case 1:u=(r=o.sent()).imageData,p=r.fileName,f=s()(u.data,4).map(function(e){var t=(0,a._)(e,3);return[t[0],t[1],t[2]]}),c.clusterize(f,{k:6},function(e,t){if(e)l(e);else{var r=d()(f,4),o=(0,i._)(r?r.palette():[]).concat((0,i._)(t?t.map(function(e){var t=(0,a._)(e.centroid,3);return[Math.round(t[0]),Math.round(t[1]),Math.round(t[2])]}):[])).filter(function(e,t,n){return n.findIndex(function(t){return t.join(",")===e.join(",")})===t}).sort(m);o.length<4?(l(Error("Not enough colors to pick from!")),A()):x({colors:o,fileName:p})}n(!1)}),o.label=2;case 2:return t.value="",[2]}})})()},busy:t}}},56712:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>q});var r=n(95155),a=n(80317),i=n(18955),o=n(22043),l=n(45377),s=n(18397),c=n(22482),u=n(35275),d=n(64647),p=n(32968),f=n(3683),h=n(23405),x=n(41942),m=n(25789),A=n(75416),v=n(86586),g=n(33868),j=n(12115),P=n(4144),b=n(28425),C=n(82732),_=n(45849),w=n(42271),E=n(41574),S=n(63009),k=n(6170),M=n(91665),I=n(56094),y=n(45279),L=n(19131);let N=function(e){var t=e.isPredefined,n=e.clonePalette,a=e.editPalette,o=e.deletePalette,l=e.setActive,s=e.menuAnchor,c=e.onClose,u=(0,i.c)("PaletteContextMenu");return s?(0,r.jsxs)(f.A,{open:!!s,anchorEl:s,onClose:c,onClick:function(e){e.stopPropagation(),c()},children:[(0,r.jsxs)(h.A,{onClick:l,title:u("setActive"),children:[(0,r.jsx)(y.A,{children:(0,r.jsx)(w.A,{})}),(0,r.jsx)(L.A,{children:u("setActive")})]}),(0,r.jsxs)(h.A,{onClick:n,title:u("clone"),children:[(0,r.jsx)(y.A,{children:(0,r.jsx)(I.A,{})}),(0,r.jsx)(L.A,{children:u("clone")})]}),!t&&(0,r.jsxs)(h.A,{onClick:a,title:u("edit"),children:[(0,r.jsx)(y.A,{children:(0,r.jsx)(M.A,{})}),(0,r.jsx)(L.A,{children:u("edit")})]}),!t&&(0,r.jsxs)(h.A,{onClick:o,title:u("delete"),children:[(0,r.jsx)(y.A,{children:(0,r.jsx)(k.A,{})}),(0,r.jsx)(L.A,{children:u("delete")})]})]}):null};var O=n(61975),T=n(71450),V=n(45073),D=n(10022),W=function(e){return"#"+Math.ceil(Math.random()*e).toString(16).padStart(2,"0")+Math.ceil(Math.random()*e).toString(16).padStart(2,"0")+Math.ceil(Math.random()*e).toString(16).padStart(2,"0")},R=function(){return{name:"",shortName:V.mI,palette:[W(255),W(170),W(102),W(34)],origin:"",isPredefined:!1}};let H=function(){var e=(0,D.Vs)().palettes,t=(0,D.vT)().setEditPalette,n=(0,i.c)("useSetEditPalette"),r=(0,j.useCallback)(function(r,a){var i=r===V.mI?R():e.find(function(e){return r===e.shortName})||R();t((0,_._)((0,C._)({},i),{name:a?n("copyOfPalette",{name:i.name}):i.name,shortName:a?V.mI:r}))},[e,t,n]);return{editPalette:function(e){return r(e,!1)},clonePalette:function(e){return r(e,!0)}}};var F=n(55382),G=function(e,t){var n=(0,i.c)("usePalette"),r=(0,D.C$)(),a=r.activePalette,o=r.setActivePalette,l=(0,D.M2)(),s=l.dismissDialog,c=l.setDialog,u=(0,F.g)().updateLastSyncLocalNow,d=(0,D.Vs)().deletePalette,p=H(),f=p.editPalette,h=p.clonePalette,x=a===e;return{isActive:x,setActive:function(){return o(e)},deletePalette:function(){c({message:n("deletePaletteMessage",{name:t||"no name"}),confirm:function(){return(0,O._)(function(){return(0,T.YH)(this,function(t){return x&&o("dsh"),u(),d(e),s(0),[2]})})()},deny:function(){return(0,O._)(function(){return(0,T.YH)(this,function(e){return[2,s(0)]})})()}})},editPalette:function(){return f(e)},clonePalette:function(){return h(e)}}},Y=n(74282);let z=function(e){var t=e.shortName,n=e.name,a=e.isPredefined,o=e.palette,l=e.usage,s=G(t,n),c=s.isActive,u=s.setActive,d=s.deletePalette,p=s.editPalette,f=s.clonePalette,h=(0,m.A)(),x=(0,i.c)("Palette"),A=(0,j.useMemo)(function(){return(0,_._)((0,C._)({},(0,Y.O)(o,Y.h.SMOOTH)),{display:"block",width:"100%",textAlign:"left",".MuiTypography-body1":{fontWeight:c?"bold":"normal"}})},[o,c]),v=(0,j.useMemo)(function(){return(0,_._)((0,C._)({},(0,Y.O)(o,Y.h.HARD)),{display:"block",width:"100%",height:h.spacing(8)})},[o,h]);return(null==o?void 0:o.length)!==4?(0,r.jsx)("li",{className:"palette palette--broken"}):(0,r.jsx)(S.A,{selectionText:"",title:n,subheader:x("usageCount",{count:l||0,shortName:t}),titleIcon:c?(0,r.jsx)(w.A,{}):void 0,wrapperProps:{sx:A,onClick:p,disableRipple:!0},contextMenuComponent:N,contextMenuProps:{isPredefined:a,setActive:u,clonePalette:f,deletePalette:d,editPalette:p},media:(0,r.jsx)(E.A,{sx:v}),content:null})};var U=n(46544),X=n(94529),$=n(53749),K=n(62431),B=[{id:"own",translationKey:"ownPalettes",filter:function(e){return!e.isPredefined}},{id:"predefined",translationKey:"predefinedPalettes",filter:function(e){return e.isPredefined}},{id:"all",translationKey:"allPalettes",filter:Boolean}];let J=function(){var e=(0,D.Vs)().palettes,t=(0,$.A)(),n=t.onInputChange,a=t.busy,C=H().editPalette,_=(0,b.l)().exportJson,w=(0,o._)((0,j.useState)(0),2),E=w[0],S=w[1],k=(0,o._)((0,j.useState)(null),2),M=k[0],I=k[1],y=(0,m.A)(),L=(0,i.c)("Palettes"),N=(0,g.A)(y.breakpoints.up("sm")),O=(0,j.useMemo)(function(){return B[E]},[E]),T=(0,K.A)(),W=T.sortFn,R=T.sortPalettes,F=T.setSortPalettes,G=T.paletteSortOptions,Y=T.paletteUsages,J=(0,j.useMemo)(function(){return(0,l._)(e).filter(O.filter).sort(W)},[O,e,W]);return(0,r.jsxs)(x.A,{direction:"column",gap:4,children:[(0,r.jsx)(v.A,{value:E,children:B.map(function(e,t){var n=e.id,a=e.translationKey;return(0,r.jsx)(A.A,{label:L(a),onClick:function(){return S(t)},value:t},n)})}),(0,r.jsx)(x.A,{direction:"row",justifyContent:"end",children:(0,r.jsxs)(p.A,{color:"tertiary",variant:"contained",size:"small",orientation:N?"horizontal":"vertical",fullWidth:!N,disableElevation:!0,children:["own"===O.id&&(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(d.A,{disabled:a,title:L("newPalette"),onClick:function(){return C(V.mI)},startIcon:(0,r.jsx)(s.A,{}),children:L("newPalette")}),(0,r.jsxs)(d.A,{component:"label",disabled:a,startIcon:(0,r.jsx)(c.A,{}),title:L("newPaletteFromImage"),children:[L("newPaletteFromImage"),(0,r.jsx)("input",{disabled:a,type:"file",hidden:!0,onChange:n})]})]}),(0,r.jsx)(d.A,{title:L("sortPalettes"),onClick:function(e){return I(e.target)},endIcon:(0,r.jsx)(u.A,{}),children:L("sortPalettes")})]})}),(0,r.jsx)(f.A,{open:!!M,anchorEl:M,onClose:function(){return I(null)},onClick:function(e){e.stopPropagation(),I(null)},children:G.map(function(e){var t=e.label,n=e.value;return(0,r.jsx)(h.A,{selected:R===n,onClick:function(){return F(n)},children:t},n)})}),(0,r.jsx)(P.A,{fixedView:X.j.PALETTE_VIEW,children:J.map(function(e){return(0,r.jsx)(z,{name:e.name,isPredefined:e.isPredefined||!1,shortName:e.shortName,palette:e.palette,usage:Y[e.shortName]||0},e.shortName)})}),(0,r.jsx)(p.A,{variant:"contained",fullWidth:!0,children:(0,r.jsx)(d.A,{onClick:function(){return _(U.m.PALETTES)},children:L("exportPalettes")})})]})};function q(){var e=(0,i.c)("Navigation");return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(a.A,{component:"h1",variant:"h1",children:e("palettes")}),(0,r.jsx)(J,{})]})}},61054:(e,t,n)=>{Promise.resolve().then(n.bind(n,56712))},62431:(e,t,n)=>{"use strict";n.d(t,{A:()=>p});var r=n(87922),a=n(82732),i=n(45849),o=n(22043),l=n(18955),s=n(12115),c=n(73204),u=n(10022),d=n(17403);let p=function(){var e=(0,u.C$)(),t=e.sortPalettes,n=e.setSortPalettes,p=(0,u.Vs)().images,f=(0,l.c)("usePaletteSort"),h=(0,s.useMemo)(function(){return[{label:f("defaultAsc"),value:c.V.DEFAULT_ASC},{label:f("defaultDesc"),value:c.V.DEFAULT_DESC},{label:f("usageAsc"),value:c.V.USAGE_ASC},{label:f("usageDesc"),value:c.V.USAGE_DESC},{label:f("nameAsc"),value:c.V.NAME_ASC},{label:f("nameDesc"),value:c.V.NAME_DESC}]},[f]),x=(0,s.useMemo)(function(){return p.reduce(function(e,t){return(0,d.pl)(t)?e:(0,i._)((0,a._)({},e),(0,r._)({},t.palette,(e[t.palette]||0)+1))},{})},[p]),m=(0,s.useCallback)(function(e,n){var r=(0,o._)(t.split("_"),2),a=r[0],i="asc"===r[1]?1:-1;switch(a){case"usage":var l=x[e.shortName]||0,s=x[n.shortName]||0;if(l<s)return -1*i;if(l>s)return i;return 0;case"name":return e.name.localeCompare(n.name)*i;default:return i}},[x,t]);return{sortPalettes:t,setSortPalettes:n,paletteSortOptions:h,paletteUsages:x,sortFn:m}}},63009:(e,t,n)=>{"use strict";n.d(t,{A:()=>g});var r=n(82732),a=n(45849),i=n(22043),o=n(95155),l=n(63951),s=n(53097),c=n(41574),u=n(92920),d=n(81891),p=n(24627),f=n(61294),h=n(24508),x=n(24288),m=n(41942),A=n(25789),v=n(12115);let g=function(e){var t=e.selectionText,n=e.title,g=e.titleIcon,j=e.subheader,P=e.wrapperProps,b=e.media,C=e.content,_=e.contextMenuComponent,w=e.contextMenuProps,E=(0,A.A)(),S=(0,i._)((0,v.useState)(null),2),k=S[0],M=S[1],I=(0,v.useMemo)(function(){var e={"@media (any-hover: hover)":{"&:hover":{backgroundColor:(0,s.au)(E.palette.tertiary.main,E.palette.background.paper,.33)}},transition:"background-color 0.15s ease-in-out"};return t?(0,a._)((0,r._)({},e),{backgroundColor:(0,s.au)(E.palette.info.main,E.palette.background.paper,.75)}):e},[t,E]),y=[n,j].filter(Boolean).join("\n");return(0,o.jsxs)(m.A,{component:"li",direction:"column",justifyContent:"stretch",sx:{position:"relative","& > *":{flexGrow:1}},children:[t&&(0,o.jsx)(c.A,{sx:{position:"absolute",display:"block",width:"1.8em",height:"1.8em",top:"-0.53em",left:"-0.53em",zIndex:15,fontSize:"0.85rem",lineHeight:"1.8em",textAlign:"center",backgroundColor:E.palette.info.main,color:E.palette.info.contrastText,borderRadius:"50%",pointerEvents:"none"},children:t}),(0,o.jsxs)(u.A,{sx:I,children:[(0,o.jsxs)(d.A,(0,a._)((0,r._)({},P),{component:P.component||"span",tabIndex:P.component?void 0:-1,children:[(0,o.jsx)(f.A,{title:g?(0,o.jsxs)(m.A,{direction:"row",gap:.5,alignItems:"center",children:[g,n]}):n,subheader:j,action:(0,o.jsx)(x.A,{onClick:function(e){e.preventDefault(),e.stopPropagation(),M(e.target)},children:(0,o.jsx)(l.A,{})}),slotProps:{title:{title:y,variant:"body1",sx:{whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis"}},subheader:{title:y,variant:"caption",sx:{whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis"}}},sx:{gap:1,backgroundColor:(0,s.X4)(E.palette.fgtext.main,.1),p:1,".MuiCardHeader-content":{minWidth:0}}}),(0,o.jsx)(h.A,{children:b}),C&&(0,o.jsx)(p.A,{sx:{p:1,flexGrow:1,justifyContent:"space-between",display:"flex",flexDirection:"column",padding:1,"&:last-child":{padding:1}},children:C})]})),(0,o.jsx)(_,(0,r._)({menuAnchor:k,onClose:function(){return M(null)}},w))]})]})}},74282:(e,t,n)=>{"use strict";n.d(t,{h:()=>a,O:()=>i});var r=function(e){var t=e.replace("#","");if(!/^([0-9a-fA-F]{6})$/.test(t))throw Error("Invalid hex color");var n=parseInt(t.slice(0,2),16),r=parseInt(t.slice(2,4),16),a=parseInt(t.slice(4,6),16);return"".concat(n,", ").concat(r,", ").concat(a)},a=function(e){return e.HARD="HARD",e.SMOOTH="SMOOTH",e.CONIC="CONIC",e}({}),i=function(e,t){var n=r(e[0]||"#000000"),a=r(e[1]||"#000000"),i=r(e[2]||"#000000"),o=r(e[3]||"#000000");switch(t){case"SMOOTH":return{backgroundImage:"linear-gradient(to right,\n          rgba(".concat(n,", ").concat(.25,") 0%,\n          rgba(").concat(a,", ").concat(.25,") 33.3%,\n          rgba(").concat(i,", ").concat(.25,") 66.6%,\n          rgba(").concat(o,", ").concat(.25,") 100%\n      )")};case"HARD":return{backgroundImage:"linear-gradient(to right,\n          rgb(".concat(n,") 0% 25%,\n          rgb(").concat(a,") 25% 50%,\n          rgb(").concat(i,") 50% 75%,\n          rgb(").concat(o,") 75% 100%\n        )")};case"CONIC":return{background:"conic-gradient(\n          rgb(".concat(n,") 0% 25%,\n          rgb(").concat(a,") 25% 50%,\n          rgb(").concat(i,") 50% 75%,\n          rgb(").concat(o,") 75% 100%\n        )")};default:return{}}}}},e=>{e.O(0,[9832,8955,5266,1081,3632,317,1346,7115,4688,4647,3683,7164,2968,1870,1156,6685,5668,7182,6218,22,3231,771,8441,9342,1255,7358],()=>e(e.s=61054)),_N_E=e.O()}]);