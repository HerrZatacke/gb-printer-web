(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[411],{806:(e,t,n)=>{"use strict";n.d(t,{A:()=>p});var a=n(86447),r=n(693),i=n(60376),l=n(78538),o=n(17652),s=n(12115),c=n(27803),u=n(11760),d=n(52166),f=n(55364);let p=function(){var e=(0,d.A)(),t=e.sortPalettes,n=e.setSortPalettes,p=(0,u.h)().images,h=(0,o.c3)("usePaletteSort"),m=(0,s.useMemo)(function(){return[{label:h("defaultAsc"),value:c.V.DEFAULT_ASC},{label:h("defaultDesc"),value:c.V.DEFAULT_DESC},{label:h("usageAsc"),value:c.V.USAGE_ASC},{label:h("usageDesc"),value:c.V.USAGE_DESC},{label:h("nameAsc"),value:c.V.NAME_ASC},{label:h("nameDesc"),value:c.V.NAME_DESC}]},[h]),x=(0,s.useMemo)(function(){return p.reduce(function(e,t){return(0,f.pl)(t)?e:(0,i._)((0,r._)({},e),(0,a._)({},t.palette,(e[t.palette]||0)+1))},{})},[p]),v=(0,s.useCallback)(function(e,n){var a=(0,l._)(t.split("_"),2),r=a[0],i="asc"===a[1]?1:-1;switch(r){case"usage":var o=x[e.shortName]||0,s=x[n.shortName]||0;if(o<s)return -1*i;if(o>s)return i;return 0;case"name":return e.name.localeCompare(n.name)*i;default:return i}},[x,t]);return{sortPalettes:t,setSortPalettes:n,paletteSortOptions:m,paletteUsages:x,sortFn:v}}},31829:(e,t,n)=>{"use strict";n.d(t,{h:()=>r,O:()=>i});var a=function(e){var t=e.replace("#","");if(!/^([0-9a-fA-F]{6})$/.test(t))throw Error("Invalid hex color");var n=parseInt(t.slice(0,2),16),a=parseInt(t.slice(2,4),16),r=parseInt(t.slice(4,6),16);return"".concat(n,", ").concat(a,", ").concat(r)},r=function(e){return e.HARD="HARD",e.SMOOTH="SMOOTH",e.CONIC="CONIC",e}({}),i=function(e,t){var n=a(e[0]||"#000000"),r=a(e[1]||"#000000"),i=a(e[2]||"#000000"),l=a(e[3]||"#000000");switch(t){case"SMOOTH":return{backgroundImage:"linear-gradient(to right,\n          rgba(".concat(n,", ").concat(.25,") 0%,\n          rgba(").concat(r,", ").concat(.25,") 33.3%,\n          rgba(").concat(i,", ").concat(.25,") 66.6%,\n          rgba(").concat(l,", ").concat(.25,") 100%\n      )")};case"HARD":return{backgroundImage:"linear-gradient(to right,\n          rgb(".concat(n,") 0% 25%,\n          rgb(").concat(r,") 25% 50%,\n          rgb(").concat(i,") 50% 75%,\n          rgb(").concat(l,") 75% 100%\n        )")};case"CONIC":return{background:"conic-gradient(\n          rgb(".concat(n,") 0% 25%,\n          rgb(").concat(r,") 25% 50%,\n          rgb(").concat(i,") 50% 75%,\n          rgb(").concat(l,") 75% 100%\n        )")};default:return{}}}},62412:(e,t,n)=>{"use strict";n.d(t,{A:()=>g,E:()=>x});var a=n(97004),r=n(78538),i=n(87025),l=n(39249),o=n(3899),s=n.n(o),c=n(27576),u=n(88274),d=n.n(u),f=n(12115),p=n(3381),h=n(46498),m=n(34687),x=function(e){var t=(0,r._)(e,3),n=t[0],a=t[1],i=t[2];return["#",Math.min(255,Math.max(0,n)).toString(16).padStart(2,"0"),Math.min(255,Math.max(0,a)).toString(16).padStart(2,"0"),Math.min(255,Math.max(0,i)).toString(16).padStart(2,"0")].join("")},v=function(e,t){var n=.299*e[0]+.587*e[1]+.114*e[2],a=.299*t[0]+.587*t[1]+.114*t[2];return n>a?-1:+(n<a)};let g=function(){var e,t=(0,r._)((0,f.useState)(!1),2),n=t[0],o=t[1],u=(0,h.A)().setError,x=(0,p.A)().setPickColors;return{onInputChange:(e=(0,a._)(function(e){var t,n,a,f,p,h;return(0,l.YH)(this,function(l){switch(l.label){case 0:if(!(null==(n=(t=e.target).files)?void 0:n[0]))return[3,2];return o(!0),[4,(0,m.A)(t.files[0],!0)];case 1:f=(a=l.sent()).imageData,p=a.fileName,h=s()(f.data,4).map(function(e){var t=(0,r._)(e,3);return[t[0],t[1],t[2]]}),c.clusterize(h,{k:6},function(e,t){if(e)u(e);else{var n=d()(h,4);x({colors:(0,i._)(n?n.palette():[]).concat((0,i._)(t?t.map(function(e){var t=(0,r._)(e.centroid,3);return[Math.round(t[0]),Math.round(t[1]),Math.round(t[2])]}):[])).filter(function(e,t,n){return n.findIndex(function(t){return t.join(",")===e.join(",")})===t}).sort(v),fileName:p})}o(!1)}),l.label=2;case 2:return t.value="",[2]}})}),function(t){return e.apply(this,arguments)}),busy:n}}},64981:(e,t,n)=>{Promise.resolve().then(n.bind(n,700)),Promise.resolve().then(n.bind(n,78440))},74666:(e,t,n)=>{"use strict";n.d(t,{A:()=>A});var a=n(693),r=n(60376),i=n(78538),l=n(95155),o=n(69008),s=n(4420),c=n(53267),u=n(41218),d=n(59710),f=n(16632),p=n(65221),h=n(60785),m=n(3127),x=n(7068),v=n(16324),g=n(12115);let A=function(e){var t=e.selectionText,n=e.title,A=e.titleIcon,P=e.subheader,j=e.wrapperProps,b=e.media,_=e.content,w=e.contextMenuComponent,C=e.contextMenuProps,E=(0,v.default)(),S=(0,i._)((0,g.useState)(null),2),k=S[0],M=S[1],I=(0,g.useMemo)(function(){var e={"@media (any-hover: hover)":{"&:hover":{backgroundColor:(0,s.au)(E.palette.tertiary.main,E.palette.background.paper,.33)}},transition:"background-color 0.15s ease-in-out"};return t?(0,r._)((0,a._)({},e),{backgroundColor:(0,s.au)(E.palette.info.main,E.palette.background.paper,.75)}):e},[t,E]),y=[n,P].filter(Boolean).join("\n");return(0,l.jsxs)(x.default,{component:"li",direction:"column",justifyContent:"stretch",sx:{position:"relative","& > *":{flexGrow:1}},children:[t&&(0,l.jsx)(c.default,{sx:{position:"absolute",display:"block",width:"1.8em",height:"1.8em",top:"-0.53em",left:"-0.53em",zIndex:15,fontSize:"0.85rem",lineHeight:"1.8em",textAlign:"center",backgroundColor:E.palette.info.main,color:E.palette.info.contrastText,borderRadius:"50%",pointerEvents:"none"},children:t}),(0,l.jsxs)(u.default,{sx:I,children:[(0,l.jsxs)(d.default,(0,r._)((0,a._)({},j),{component:j.component||"span",tabIndex:j.component?void 0:-1,children:[(0,l.jsx)(p.default,{title:A?(0,l.jsxs)(x.default,{direction:"row",gap:.5,alignItems:"center",children:[A,n]}):n,subheader:P,action:(0,l.jsx)(m.default,{onClick:function(e){e.preventDefault(),e.stopPropagation(),M(e.target)},children:(0,l.jsx)(o.A,{})}),slotProps:{title:{title:y,variant:"body1",sx:{whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis"}},subheader:{title:y,variant:"caption",sx:{whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis"}}},sx:{gap:1,backgroundColor:(0,s.X4)(E.palette.fgtext.main,.1),p:1,".MuiCardHeader-content":{minWidth:0}}}),(0,l.jsx)(h.default,{children:b}),_&&(0,l.jsx)(f.default,{sx:{p:1,flexGrow:1,justifyContent:"space-between",display:"flex",flexDirection:"column",padding:1,"&:last-child":{padding:1}},children:_})]})),(0,l.jsx)(w,(0,a._)({menuAnchor:k,onClose:function(){return M(null)}},C))]})]})}},78440:(e,t,n)=>{"use strict";n.d(t,{default:()=>Q});var a=n(78538),r=n(87025),i=n(95155),l=n(89786),o=n(49991),s=n(49874),c=n(7642),u=n(61487),d=n(13313),f=n(76380),p=n(7068),h=n(16324),m=n(18096),x=n(53369),v=n(51095),g=n(17652),A=n(12115),P=n(84131),j=n(86210),b=n(693),_=n(60376),w=n(74802),C=n(53267),E=n(74666),S=n(19505),k=n(28890),M=n(96065),I=n(39489),y=n(85222);let L=function(e){var t=e.isPredefined,n=e.clonePalette,a=e.editPalette,r=e.deletePalette,l=e.setActive,o=e.menuAnchor,s=e.onClose,c=(0,g.c3)("PaletteContextMenu");return o?(0,i.jsxs)(d.default,{open:!!o,anchorEl:o,onClose:s,onClick:function(e){e.stopPropagation(),s()},children:[(0,i.jsxs)(f.default,{onClick:l,title:c("setActive"),children:[(0,i.jsx)(I.default,{children:(0,i.jsx)(w.A,{})}),(0,i.jsx)(y.default,{children:c("setActive")})]}),(0,i.jsxs)(f.default,{onClick:n,title:c("clone"),children:[(0,i.jsx)(I.default,{children:(0,i.jsx)(M.A,{})}),(0,i.jsx)(y.default,{children:c("clone")})]}),!t&&(0,i.jsxs)(f.default,{onClick:a,title:c("edit"),children:[(0,i.jsx)(I.default,{children:(0,i.jsx)(k.A,{})}),(0,i.jsx)(y.default,{children:c("edit")})]}),!t&&(0,i.jsxs)(f.default,{onClick:r,title:c("delete"),children:[(0,i.jsx)(I.default,{children:(0,i.jsx)(S.A,{})}),(0,i.jsx)(y.default,{children:c("delete")})]})]}):null};var N=n(97004),O=n(39249),T=n(19864),D=n(3381),V=n(11760),W=function(e){return["#",Math.ceil(Math.random()*e).toString(16).padStart(2,"0"),Math.ceil(Math.random()*e).toString(16).padStart(2,"0"),Math.ceil(Math.random()*e).toString(16).padStart(2,"0")].join("")},R=function(){return{name:"",shortName:T.mI,palette:[W(255),W(170),W(102),W(34)],origin:"",isPredefined:!1}};let H=function(){var e=(0,V.h)().palettes,t=(0,D.A)().setEditPalette,n=(0,g.c3)("useSetEditPalette"),a=(0,A.useCallback)(function(a,r){var i=a===T.mI?R():e.find(function(e){return a===e.shortName})||R();t((0,_._)((0,b._)({},i),{name:r?n("copyOfPalette",{name:i.name}):i.name,shortName:r?T.mI:a}))},[e,t,n]);return{editPalette:function(e){return a(e,!1)},clonePalette:function(e){return a(e,!0)}}};var F=n(633),G=n(41186),Y=n(52166),z=function(e,t){var n=(0,g.c3)("usePalette"),a=(0,Y.A)(),r=a.activePalette,i=a.setActivePalette,l=(0,G.A)(),o=l.dismissDialog,s=l.setDialog,c=(0,F.g)().updateLastSyncLocalNow,u=(0,V.h)().deletePalette,d=H(),f=d.editPalette,p=d.clonePalette,h=r===e;return{isActive:h,setActive:function(){return i(e)},deletePalette:function(){s({message:n("deletePaletteMessage",{name:t||"no name"}),confirm:(0,N._)(function(){return(0,O.YH)(this,function(t){return h&&i("dsh"),c(),u(e),o(0),[2]})}),deny:(0,N._)(function(){return(0,O.YH)(this,function(e){return[2,o(0)]})})})},editPalette:function(){return f(e)},clonePalette:function(){return p(e)}}},U=n(31829);let X=function(e){var t=e.shortName,n=e.name,a=e.isPredefined,r=e.palette,l=e.usage,o=z(t,n),s=o.isActive,c=o.setActive,u=o.deletePalette,d=o.editPalette,f=o.clonePalette,p=(0,h.default)(),m=(0,g.c3)("Palette"),x=(0,A.useMemo)(function(){return(0,_._)((0,b._)({},(0,U.O)(r,U.h.SMOOTH)),{display:"block",width:"100%",textAlign:"left",".MuiTypography-body1":{fontWeight:s?"bold":"normal"}})},[r,s]),v=(0,A.useMemo)(function(){return(0,_._)((0,b._)({},(0,U.O)(r,U.h.HARD)),{display:"block",width:"100%",height:p.spacing(8)})},[r,p]);return(null==r?void 0:r.length)!==4?(0,i.jsx)("li",{className:"palette palette--broken"}):(0,i.jsx)(E.A,{selectionText:"",title:n,subheader:m("usageCount",{count:l||0,shortName:t}),titleIcon:s?(0,i.jsx)(w.A,{}):void 0,wrapperProps:{sx:x,onClick:d,disableRipple:!0},contextMenuComponent:L,contextMenuProps:{isPredefined:a,setActive:c,clonePalette:f,deletePalette:u,editPalette:d},media:(0,i.jsx)(C.default,{sx:v}),content:null})};var K=n(69229),B=n(4862),J=n(62412),$=n(806),q=[{id:"own",translationKey:"ownPalettes",filter:function(e){return!e.isPredefined}},{id:"predefined",translationKey:"predefinedPalettes",filter:function(e){return e.isPredefined}},{id:"all",translationKey:"allPalettes",filter:Boolean}];let Q=function(){var e=(0,V.h)().palettes,t=(0,J.A)(),n=t.onInputChange,b=t.busy,_=H().editPalette,w=(0,j.l)().exportJson,C=(0,a._)((0,A.useState)(0),2),E=C[0],S=C[1],k=(0,a._)((0,A.useState)(null),2),M=k[0],I=k[1],y=(0,h.default)(),L=(0,g.c3)("Palettes"),N=(0,v.A)(y.breakpoints.up("sm")),O=(0,A.useMemo)(function(){return q[E]},[E]),D=(0,$.A)(),W=D.sortFn,R=D.sortPalettes,F=D.setSortPalettes,G=D.paletteSortOptions,Y=D.paletteUsages,z=(0,A.useMemo)(function(){return(0,r._)(e).filter(O.filter).sort(W)},[O,e,W]);return(0,i.jsxs)(p.default,{direction:"column",gap:4,children:[(0,i.jsx)(x.default,{value:E,children:q.map(function(e,t){var n=e.id,a=e.translationKey;return(0,i.jsx)(m.default,{label:L(a),onClick:function(){return S(t)},value:t},n)})}),(0,i.jsx)(p.default,{direction:"row",justifyContent:"end",children:(0,i.jsxs)(u.default,{color:"tertiary",variant:"contained",size:"small",orientation:N?"horizontal":"vertical",fullWidth:!N,disableElevation:!0,children:["own"===O.id&&(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(c.default,{disabled:b,title:L("newPalette"),onClick:function(){return _(T.mI)},startIcon:(0,i.jsx)(l.A,{}),children:L("newPalette")}),(0,i.jsxs)(c.default,{component:"label",disabled:b,startIcon:(0,i.jsx)(o.A,{}),title:L("newPaletteFromImage"),children:[L("newPaletteFromImage"),(0,i.jsx)("input",{disabled:b,type:"file",hidden:!0,onChange:n})]})]}),(0,i.jsx)(c.default,{title:L("sortPalettes"),onClick:function(e){return I(e.target)},endIcon:(0,i.jsx)(s.A,{}),children:L("sortPalettes")})]})}),(0,i.jsx)(d.default,{open:!!M,anchorEl:M,onClose:function(){return I(null)},onClick:function(e){e.stopPropagation(),I(null)},children:G.map(function(e){var t=e.label,n=e.value;return(0,i.jsx)(f.default,{selected:R===n,onClick:function(){return F(n)},children:t},n)})}),(0,i.jsx)(P.A,{fixedView:B.j.PALETTE_VIEW,children:z.map(function(e){return(0,i.jsx)(X,{name:e.name,isPredefined:e.isPredefined||!1,shortName:e.shortName,palette:e.palette,usage:Y[e.shortName]||0},e.shortName)})}),(0,i.jsx)(u.default,{variant:"contained",fullWidth:!0,children:(0,i.jsx)(c.default,{onClick:function(){return w(K.m.PALETTES)},children:L("exportPalettes")})})]})}},84131:(e,t,n)=>{"use strict";n.d(t,{A:()=>u});var a=n(95155),r=n(53267),i=n(77262),l=n(12115),o=n(4862),s=n(98250),c=n(52166);let u=function(e){var t=e.fixedView,n=e.showLoader,u=e.children,d=(0,s.h)().ddpx,f=(0,c.A)().galleryView,p=t||f,h=(0,l.useMemo)(function(){var e="",t="";switch(p===o.j.GALLERY_VIEW_SMALL&&1===d?o.j.GALLERY_VIEW_1X:p){case o.j.GALLERY_VIEW_SMALL:e="".concat(160/d,"px"),t="".concat(8/d,"px");break;case o.j.PALETTE_VIEW:e="minmax(270px, 1fr)",t="32px";break;case o.j.GALLERY_VIEW_1X:e="160px",t="16px";break;case o.j.GALLERY_VIEW_2X:e="320px",t="32px";break;case o.j.GALLERY_VIEW_MAX:e="100%",t="32px"}return{gap:t,display:"grid",justifyContent:"center",gridTemplateColumns:"repeat(auto-fill, ".concat(e,")")}},[p,d]);return(0,a.jsxs)(r.default,{component:"ul",sx:h,position:"relative",children:[n&&(0,a.jsx)(i.default,{color:"secondary",variant:"indeterminate",sx:{position:"absolute",top:-4,left:0,right:0,zIndex:1}}),u]})}},86210:(e,t,n)=>{"use strict";n.d(t,{l:()=>s});var a=n(87025),r=n(83936),i=n(64768),l=n(46498),o=n(52166),s=function(){var e=(0,o.A)().printerUrl,t=(0,l.A)().printerFunctions,n=(0,r.W)().downloadSettings,s=t.length>0,c=(0,i.A)().handleFileImport;return{printerUrl:e?"".concat(e,"remote.html"):void 0,printerConnected:s,importPlainText:function(e){c([new File((0,a._)(e),"Text input.txt",{type:"text/plain"})])},importFiles:c,exportJson:function(e){return n(e)}}}},98250:(e,t,n)=>{"use strict";n.d(t,{h:()=>l});var a=n(78538),r=n(12115),i=function(){var e;return{width:window.innerWidth,height:window.innerHeight,ddpx:window.devicePixelRatio<=2?window.devicePixelRatio:window.devicePixelRatio/2,layoutWidth:(e=window.innerWidth)>1220?1155:e>1025?960:e>830?765:e>635?570:e>440?375:e-40}},l=function(){var e=(0,a._)((0,r.useState)(i()),2),t=e[0],n=e[1];return(0,r.useEffect)(function(){var e=function(){n(i())};return window.addEventListener("resize",e),function(){return window.removeEventListener("resize",e)}},[n]),t}}},e=>{var t=t=>e(e.s=t);e.O(0,[7652,4453,700,7859,7271,8250,2491,6139,3313,7642,7890,1487,6672,5123,3678,4766,8034,244,1760,3936,4768,8441,1684,7358],()=>t(64981)),_N_E=e.O()}]);