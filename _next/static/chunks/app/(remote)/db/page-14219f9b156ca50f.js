(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[2837],{20063:(e,t,r)=>{"use strict";var n=r(47260);r.o(n,"RedirectType")&&r.d(t,{RedirectType:function(){return n.RedirectType}}),r.o(n,"redirect")&&r.d(t,{redirect:function(){return n.redirect}}),r.o(n,"usePathname")&&r.d(t,{usePathname:function(){return n.usePathname}}),r.o(n,"useRouter")&&r.d(t,{useRouter:function(){return n.useRouter}}),r.o(n,"useServerInsertedHTML")&&r.d(t,{useServerInsertedHTML:function(){return n.useServerInsertedHTML}})},21329:()=>{},29945:(e,t,r)=>{"use strict";r.d(t,{default:()=>w});var n=r(61975),u=r(22043),a=r(45377),s=r(71450),c=r(95155);r(21329);var o=r(20063),i=r(18955),l=r(12115),f=function(e,t){return(0,n._)(function(){return(0,s.YH)(this,function(r){return[2,new Promise(function(r){var u=e.result.transaction(t).objectStore(t);u.getAllKeys().onsuccess=function(e){return(0,n._)(function(){var t,a,c,o,i,l,f,d,h,v,b,m;return(0,s.YH)(this,function(y){switch(y.label){case 0:a=null==(t=e.target)?void 0:t.result,c=[],o=!0,i=!1,l=void 0,y.label=1;case 1:y.trys.push([1,6,7,8]),f=a[Symbol.iterator](),y.label=2;case 2:if(o=(d=f.next()).done)return[3,5];return h=d.value,v=c.push,b={key:h},[4,(0,n._)(function(){return(0,s.YH)(this,function(e){return[2,new Promise(function(e){u.get(h).onsuccess=function(t){var r;e(null==(r=t.target)?void 0:r.result)}})]})})()];case 3:v.apply(c,[(b.value=y.sent(),b)]),y.label=4;case 4:return o=!0,[3,2];case 5:return[3,8];case 6:return m=y.sent(),i=!0,l=m,[3,8];case 7:try{o||null==f.return||f.return()}finally{if(i)throw l}return[7];case 8:return r(c),[2]}})})()}})]})})()},d=function(e,t,r){return(0,n._)(function(){var u;return(0,s.YH)(this,function(a){return(u=e.result.transaction(t,"readwrite").objectStore(t)).clear().onsuccess=function(){return(0,n._)(function(){var e,t,n,a,c,o,i,l;return(0,s.YH)(this,function(s){e=!0,t=!1,n=void 0;try{for(a=r[Symbol.iterator]();!(e=(c=a.next()).done);e=!0)i=(o=c.value).key,l=o.value,u.add(l,i)}catch(e){t=!0,n=e}finally{try{e||null==a.return||a.return()}finally{if(t)throw n}}return[2]})})()},[2]})})()},h=function(){var e=!0,t=!1,r=void 0;try{for(var n,u=Object.keys(localStorage)[Symbol.iterator]();!(e=(n=u.next()).done);e=!0){var a=n.value;localStorage.removeItem(a)}}catch(e){t=!0,r=e}finally{try{e||null==u.return||u.return()}finally{if(t)throw r}}},v=function(e){var t=!0,r=!1,n=void 0;try{for(var u,a=e[Symbol.iterator]();!(t=(u=a.next()).done);t=!0){var s=u.value,c=s.key,o=s.value;localStorage.setItem(c,o)}}catch(e){r=!0,n=e}finally{try{t||null==a.return||a.return()}finally{if(r)throw n}}},b=r(94468),m="GB Printer Web",y="DBDATA";function w(){var e=(0,i.c3)("CopyDatabase"),t=(0,u._)((0,l.useState)("https://herrzatacke.github.io/gb-printer-web/db/"),2),r=t[0],w=t[1],p=(0,u._)((0,l.useState)(),2),g=p[0],_=p[1],S=(0,u._)((0,l.useState)(),2),I=S[0],H=S[1],k=(0,u._)((0,l.useState)(),2),Y=k[0],x=k[1],j=(0,u._)((0,l.useState)(!1),2),C=j[0],T=j[1],P=(0,u._)((0,l.useState)([]),2),D=P[0],B=P[1],L=(0,o.useRouter)().replace,N=(0,l.useCallback)(function(e){B(function(t){return(0,a._)(t).concat([e])})},[]);(0,l.useEffect)(function(){(0,n._)(function(){var e,t,r,u;return(0,s.YH)(this,function(a){switch(a.label){case 0:return[4,(0,b.ZU)()];case 1:return a.sent(),[4,indexedDB.databases()];case 2:return t=(null==(e=a.sent().find(function(e){return e.name===m}))?void 0:e.version)||1,x(r=indexedDB.open(m,t)),u=window.opener||null,window.addEventListener("message",function(e){e.data.type===y&&H(e.data)}),u&&(T(!0),r.onsuccess=function(){return(0,n._)(function(){var e,t,a;return(0,s.YH)(this,function(c){switch(c.label){case 0:return[4,f(r,"gb-printer-web-images")];case 1:return e=c.sent(),[4,f(r,"gb-printer-web-frames")];case 2:return t=c.sent(),[4,(0,n._)(function(){var e,t,r,n,u,a,c,o;return(0,s.YH)(this,function(s){e=Object.keys(localStorage).filter(function(e){return e.startsWith("gbp")}),t=[],r=!0,n=!1,u=void 0;try{for(a=e[Symbol.iterator]();!(r=(c=a.next()).done);r=!0)o=c.value,t.push({key:o,value:localStorage.getItem(o)})}catch(e){n=!0,u=e}finally{try{r||null==a.return||a.return()}finally{if(n)throw u}}return[2,t]})})()];case 3:return a=c.sent(),window.setTimeout(function(){var r={type:y,images:e,frames:t,localStorageData:a};u.postMessage(r,"*")},500),[2]}})})()}),[2]}})})()},[]),(0,l.useEffect)(function(){I?B([e("reportImages",{count:I.images.length}),e("reportFrames",{count:I.frames.length}),e("reportLocalStorage",{count:I.localStorageData.length})]):B([])},[e,I]);var R=(0,l.useCallback)(function(){_(window.open(r,"db-child","width=480,height=400"))},[r]),E=(0,l.useCallback)(function(){return(0,n._)(function(){return(0,s.YH)(this,function(t){switch(t.label){case 0:if(!I||!Y)return[2];return[4,h()];case 1:return t.sent(),N(e("reportLocalStorageCleared")),[4,v(I.localStorageData)];case 2:return t.sent(),N(e("reportLocalStorageCopied")),[4,d(Y,"gb-printer-web-images",I.images)];case 3:return t.sent(),N(e("reportImagesCopied")),[4,d(Y,"gb-printer-web-frames",I.frames)];case 4:return t.sent(),N(e("reportFramesCopied")),window.setTimeout(function(){null==g||g.close(),L("/")},800),[2]}})})()},[N,Y,g,L,e,I]);return(0,c.jsxs)("div",{className:"database-page ".concat(C?"is-child":""),children:[(0,c.jsxs)("div",{className:"url-load",children:[(0,c.jsxs)("label",{children:[(0,c.jsx)("span",{children:e("sourceUrl")}),(0,c.jsx)("input",{id:"db-url",type:"text",value:r,onChange:function(e){return w(e.target.value)}})]}),(0,c.jsx)("button",{type:"button",onClick:R,children:e("loadButton")})]}),(0,c.jsx)("pre",{children:D.join("\n")}),(0,c.jsx)("button",{type:"button",disabled:!I,onClick:E,children:e("copyButton")})]})}},34067:(e,t,r)=>{Promise.resolve().then(r.bind(r,29945))},94468:(e,t,r)=>{"use strict";r.d(t,{Uv:()=>l,mU:()=>i,ZU:()=>f});var n=r(61975),u=r(71450),a=r(29832),s=r.n(a),c="dummy".concat(new Date().getTime());let o=function(e){var t=s().createInstance(e);return{ready:function(){return(0,n._)(function(){var r;return(0,u.YH)(this,function(a){switch(a.label){case 0:return a.trys.push([0,2,,3]),[4,t.ready()];case 1:return a.sent(),[2,(0,n._)(function(){return(0,u.YH)(this,function(e){switch(e.label){case 0:return[4,t.setItem(c,c)];case 1:return e.sent(),[4,t.removeItem(c)];case 2:return e.sent(),[2]}})})()];case 2:throw r=a.sent(),t=s().createInstance(e),r;case 3:return[2]}})})()},keys:function(){return(0,n._)(function(){return(0,u.YH)(this,function(r){try{return[2,t.keys()]}catch(r){throw t=s().createInstance(e),r}})})()},driver:function(){return(0,n._)(function(){var r;return(0,u.YH)(this,function(n){switch(n.label){case 0:return n.trys.push([0,2,,3]),[4,t.driver()];case 1:return[2,n.sent()];case 2:throw r=n.sent(),t=s().createInstance(e),r;case 3:return[2]}})})()},setItem:function(r,a){return(0,n._)(function(){var n;return(0,u.YH)(this,function(u){switch(u.label){case 0:return u.trys.push([0,2,,3]),[4,t.setItem(r,a)];case 1:return[2,u.sent()];case 2:throw n=u.sent(),t=s().createInstance(e),n;case 3:return[2]}})})()},getItem:function(r){return(0,n._)(function(){var n;return(0,u.YH)(this,function(u){switch(u.label){case 0:return u.trys.push([0,2,,3]),[4,t.getItem(r)];case 1:return[2,u.sent()];case 2:throw n=u.sent(),t=s().createInstance(e),n;case 3:return[2]}})})()},removeItem:function(r){return(0,n._)(function(){var n;return(0,u.YH)(this,function(u){switch(u.label){case 0:return u.trys.push([0,2,,3]),[4,t.removeItem(r)];case 1:return[2,u.sent()];case 2:throw n=u.sent(),t=s().createInstance(e),n;case 3:return[2]}})})()}}};var i=o({name:"GB Printer Web",storeName:"gb-printer-web-images"}),l=o({name:"GB Printer Web",storeName:"gb-printer-web-frames"});window.lfi=i,window.lff=l;var f=function(){return(0,n._)(function(){return(0,u.YH)(this,function(e){switch(e.label){case 0:return[4,l.ready()];case 1:return e.sent(),[4,i.ready()];case 2:return e.sent(),[4,new Promise(function(e){window.setTimeout(e,5)})];case 3:return e.sent(),[2]}})})()}}},e=>{e.O(0,[5624,8955,9832,8441,9342,1255,7358],()=>e(e.s=34067)),_N_E=e.O()}]);