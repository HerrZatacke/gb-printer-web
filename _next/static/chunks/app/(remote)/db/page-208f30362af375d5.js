(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[2837],{10691:()=>{},34067:(e,t,r)=>{Promise.resolve().then(r.bind(r,80715))},35695:(e,t,r)=>{"use strict";var n=r(18999);r.o(n,"RedirectType")&&r.d(t,{RedirectType:function(){return n.RedirectType}}),r.o(n,"redirect")&&r.d(t,{redirect:function(){return n.redirect}}),r.o(n,"usePathname")&&r.d(t,{usePathname:function(){return n.usePathname}}),r.o(n,"useRouter")&&r.d(t,{useRouter:function(){return n.useRouter}}),r.o(n,"useServerInsertedHTML")&&r.d(t,{useServerInsertedHTML:function(){return n.useServerInsertedHTML}})},75380:(e,t,r)=>{"use strict";r.d(t,{Uv:()=>l,mU:()=>o,ZU:()=>f});var n=r(97004),a=r(39249),u=r(77271),s=r.n(u),c="dummy".concat(new Date().getTime());let i=function(e){var t,r,u,i,o=s().createInstance(e),l=(t=(0,n._)(function(){return(0,a.YH)(this,function(e){switch(e.label){case 0:return[4,o.setItem(c,c)];case 1:return e.sent(),[4,o.removeItem(c)];case 2:return e.sent(),[2]}})}),function(){return t.apply(this,arguments)});return{ready:(0,n._)(function(){var t;return(0,a.YH)(this,function(r){switch(r.label){case 0:return r.trys.push([0,2,,3]),[4,o.ready()];case 1:return r.sent(),[2,l()];case 2:throw t=r.sent(),o=s().createInstance(e),t;case 3:return[2]}})}),keys:(0,n._)(function(){return(0,a.YH)(this,function(t){try{return[2,o.keys()]}catch(t){throw o=s().createInstance(e),t}})}),driver:(0,n._)(function(){var t;return(0,a.YH)(this,function(r){switch(r.label){case 0:return r.trys.push([0,2,,3]),[4,o.driver()];case 1:return[2,r.sent()];case 2:throw t=r.sent(),o=s().createInstance(e),t;case 3:return[2]}})}),setItem:(r=(0,n._)(function(t,r){var n;return(0,a.YH)(this,function(a){switch(a.label){case 0:return a.trys.push([0,2,,3]),[4,o.setItem(t,r)];case 1:return[2,a.sent()];case 2:throw n=a.sent(),o=s().createInstance(e),n;case 3:return[2]}})}),function(e,t){return r.apply(this,arguments)}),getItem:(u=(0,n._)(function(t){var r;return(0,a.YH)(this,function(n){switch(n.label){case 0:return n.trys.push([0,2,,3]),[4,o.getItem(t)];case 1:return[2,n.sent()];case 2:throw r=n.sent(),o=s().createInstance(e),r;case 3:return[2]}})}),function(e){return u.apply(this,arguments)}),removeItem:(i=(0,n._)(function(t){var r;return(0,a.YH)(this,function(n){switch(n.label){case 0:return n.trys.push([0,2,,3]),[4,o.removeItem(t)];case 1:return[2,n.sent()];case 2:throw r=n.sent(),o=s().createInstance(e),r;case 3:return[2]}})}),function(e){return i.apply(this,arguments)})}};var o=i({name:"GB Printer Web",storeName:"gb-printer-web-images"}),l=i({name:"GB Printer Web",storeName:"gb-printer-web-frames"});window.lfi=o,window.lff=l;var f=function(){var e=(0,n._)(function(){return(0,a.YH)(this,function(e){switch(e.label){case 0:return[4,l.ready()];case 1:return e.sent(),[4,o.ready()];case 2:return e.sent(),[4,new Promise(function(e){window.setTimeout(e,5)})];case 3:return e.sent(),[2]}})});return function(){return e.apply(this,arguments)}}()},80715:(e,t,r)=>{"use strict";r.d(t,{default:()=>g});var n=r(97004),a=r(78538),u=r(87025),s=r(39249),c=r(95155);r(10691);var i=r(35695),o=r(17652),l=r(12115),f=function(){var e=(0,n._)(function(e,t){return(0,s.YH)(this,function(r){return[2,new Promise(function(r){e.get(t).onsuccess=function(e){var t;r(null==(t=e.target)?void 0:t.result)}})]})});return function(t,r){return e.apply(this,arguments)}}(),h=function(){var e=(0,n._)(function(e,t){return(0,s.YH)(this,function(r){return[2,new Promise(function(r){var a,u=e.result.transaction(t).objectStore(t),c=u.getAllKeys();a=(0,n._)(function(e){var t,n,a,c,i,o,l,h,d,p,v,y;return(0,s.YH)(this,function(s){switch(s.label){case 0:n=null==(t=e.target)?void 0:t.result,a=[],c=!0,i=!1,o=void 0,s.label=1;case 1:s.trys.push([1,6,7,8]),l=n[Symbol.iterator](),s.label=2;case 2:if(c=(h=l.next()).done)return[3,5];return d=h.value,p=a.push,v={key:d},[4,f(u,d)];case 3:p.apply(a,[(v.value=s.sent(),v)]),s.label=4;case 4:return c=!0,[3,2];case 5:return[3,8];case 6:return y=s.sent(),i=!0,o=y,[3,8];case 7:try{c||null==l.return||l.return()}finally{if(i)throw o}return[7];case 8:return r(a),[2]}})}),c.onsuccess=function(e){return a.apply(this,arguments)}})]})});return function(t,r){return e.apply(this,arguments)}}(),d=function(){var e=(0,n._)(function(e,t,r){var a;return(0,s.YH)(this,function(u){return(a=e.result.transaction(t,"readwrite").objectStore(t)).clear().onsuccess=(0,n._)(function(){var e,t,n,u,c,i,o,l;return(0,s.YH)(this,function(s){e=!0,t=!1,n=void 0;try{for(u=r[Symbol.iterator]();!(e=(c=u.next()).done);e=!0)o=(i=c.value).key,l=i.value,a.add(l,o)}catch(e){t=!0,n=e}finally{try{e||null==u.return||u.return()}finally{if(t)throw n}}return[2]})}),[2]})});return function(t,r,n){return e.apply(this,arguments)}}(),p=function(){var e=(0,n._)(function(){var e,t,r,n,a,u,c,i;return(0,s.YH)(this,function(s){e=Object.keys(localStorage).filter(function(e){return e.startsWith("gbp")}),t=[],r=!0,n=!1,a=void 0;try{for(u=e[Symbol.iterator]();!(r=(c=u.next()).done);r=!0)i=c.value,t.push({key:i,value:localStorage.getItem(i)})}catch(e){n=!0,a=e}finally{try{r||null==u.return||u.return()}finally{if(n)throw a}}return[2,t]})});return function(){return e.apply(this,arguments)}}(),v=function(){var e=!0,t=!1,r=void 0;try{for(var n,a=Object.keys(localStorage)[Symbol.iterator]();!(e=(n=a.next()).done);e=!0){var u=n.value;localStorage.removeItem(u)}}catch(e){t=!0,r=e}finally{try{e||null==a.return||a.return()}finally{if(t)throw r}}},y=function(e){var t=!0,r=!1,n=void 0;try{for(var a,u=e[Symbol.iterator]();!(t=(a=u.next()).done);t=!0){var s=a.value,c=s.key,i=s.value;localStorage.setItem(c,i)}}catch(e){r=!0,n=e}finally{try{t||null==u.return||u.return()}finally{if(r)throw n}}},b=r(75380),m="GB Printer Web",w="DBDATA";function g(){var e=(0,o.c3)("CopyDatabase"),t=(0,a._)((0,l.useState)("https://herrzatacke.github.io/gb-printer-web/db/"),2),r=t[0],f=t[1],g=(0,a._)((0,l.useState)(),2),_=g[0],S=g[1],I=(0,a._)((0,l.useState)(),2),H=I[0],k=I[1],Y=(0,a._)((0,l.useState)(),2),x=Y[0],j=Y[1],C=(0,a._)((0,l.useState)(!1),2),T=C[0],P=C[1],D=(0,a._)((0,l.useState)([]),2),B=D[0],L=D[1],N=(0,i.useRouter)().replace,R=(0,l.useCallback)(function(e){L(function(t){return(0,u._)(t).concat([e])})},[]);(0,l.useEffect)(function(){(0,n._)(function(){var e,t,r,a;return(0,s.YH)(this,function(u){switch(u.label){case 0:return[4,(0,b.ZU)()];case 1:return u.sent(),[4,indexedDB.databases()];case 2:return t=(null==(e=u.sent().find(function(e){return e.name===m}))?void 0:e.version)||1,j(r=indexedDB.open(m,t)),a=window.opener||null,window.addEventListener("message",function(e){e.data.type===w&&k(e.data)}),a&&(P(!0),r.onsuccess=(0,n._)(function(){var e,t,n;return(0,s.YH)(this,function(u){switch(u.label){case 0:return[4,h(r,"gb-printer-web-images")];case 1:return e=u.sent(),[4,h(r,"gb-printer-web-frames")];case 2:return t=u.sent(),[4,p()];case 3:return n=u.sent(),window.setTimeout(function(){var r={type:w,images:e,frames:t,localStorageData:n};a.postMessage(r,"*")},500),[2]}})})),[2]}})})()},[]),(0,l.useEffect)(function(){H?L([e("reportImages",{count:H.images.length}),e("reportFrames",{count:H.frames.length}),e("reportLocalStorage",{count:H.localStorageData.length})]):L([])},[e,H]);var E=(0,l.useCallback)(function(){S(window.open(r,"db-child","width=480,height=400"))},[r]),U=(0,l.useCallback)((0,n._)(function(){return(0,s.YH)(this,function(t){switch(t.label){case 0:if(!H||!x)return[2];return[4,v()];case 1:return t.sent(),R(e("reportLocalStorageCleared")),[4,y(H.localStorageData)];case 2:return t.sent(),R(e("reportLocalStorageCopied")),[4,d(x,"gb-printer-web-images",H.images)];case 3:return t.sent(),R(e("reportImagesCopied")),[4,d(x,"gb-printer-web-frames",H.frames)];case 4:return t.sent(),R(e("reportFramesCopied")),window.setTimeout(function(){null==_||_.close(),N("/")},800),[2]}})}),[R,x,_,N,e,H]);return(0,c.jsxs)("div",{className:"database-page ".concat(T?"is-child":""),children:[(0,c.jsxs)("div",{className:"url-load",children:[(0,c.jsxs)("label",{children:[(0,c.jsx)("span",{children:e("sourceUrl")}),(0,c.jsx)("input",{id:"db-url",type:"text",value:r,onChange:function(e){return f(e.target.value)}})]}),(0,c.jsx)("button",{type:"button",onClick:E,children:e("loadButton")})]}),(0,c.jsx)("pre",{children:B.join("\n")}),(0,c.jsx)("button",{type:"button",disabled:!H,onClick:U,children:e("copyButton")})]})}}},e=>{var t=t=>e(e.s=t);e.O(0,[1528,5271,7271,8441,1684,7358],()=>t(34067)),_N_E=e.O()}]);