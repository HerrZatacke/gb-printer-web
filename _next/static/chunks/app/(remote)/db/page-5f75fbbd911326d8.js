(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[2837],{10691:()=>{},34067:(e,t,r)=>{Promise.resolve().then(r.bind(r,80715))},35695:(e,t,r)=>{"use strict";var n=r(18999);r.o(n,"RedirectType")&&r.d(t,{RedirectType:function(){return n.RedirectType}}),r.o(n,"redirect")&&r.d(t,{redirect:function(){return n.redirect}}),r.o(n,"usePathname")&&r.d(t,{usePathname:function(){return n.usePathname}}),r.o(n,"useRouter")&&r.d(t,{useRouter:function(){return n.useRouter}}),r.o(n,"useServerInsertedHTML")&&r.d(t,{useServerInsertedHTML:function(){return n.useServerInsertedHTML}})},75380:(e,t,r)=>{"use strict";r.d(t,{Uv:()=>l,mU:()=>o,ZU:()=>f});var n=r(97004),a=r(39249),u=r(77271),s=r.n(u),c="dummy".concat(new Date().getTime());let i=function(e){var t,r,u,i,o=s().createInstance(e),l=(t=(0,n._)(function(){return(0,a.YH)(this,function(e){switch(e.label){case 0:return[4,o.setItem(c,c)];case 1:return e.sent(),[4,o.removeItem(c)];case 2:return e.sent(),[2]}})}),function(){return t.apply(this,arguments)});return{ready:(0,n._)(function(){var t;return(0,a.YH)(this,function(r){switch(r.label){case 0:return r.trys.push([0,2,,3]),[4,o.ready()];case 1:return r.sent(),[2,l()];case 2:throw t=r.sent(),o=s().createInstance(e),t;case 3:return[2]}})}),keys:(0,n._)(function(){return(0,a.YH)(this,function(t){try{return[2,o.keys()]}catch(t){throw o=s().createInstance(e),t}})}),driver:(0,n._)(function(){var t;return(0,a.YH)(this,function(r){switch(r.label){case 0:return r.trys.push([0,2,,3]),[4,o.driver()];case 1:return[2,r.sent()];case 2:throw t=r.sent(),o=s().createInstance(e),t;case 3:return[2]}})}),setItem:(r=(0,n._)(function(t,r){var n;return(0,a.YH)(this,function(a){switch(a.label){case 0:return a.trys.push([0,2,,3]),[4,o.setItem(t,r)];case 1:return[2,a.sent()];case 2:throw n=a.sent(),o=s().createInstance(e),n;case 3:return[2]}})}),function(e,t){return r.apply(this,arguments)}),getItem:(u=(0,n._)(function(t){var r;return(0,a.YH)(this,function(n){switch(n.label){case 0:return n.trys.push([0,2,,3]),[4,o.getItem(t)];case 1:return[2,n.sent()];case 2:throw r=n.sent(),o=s().createInstance(e),r;case 3:return[2]}})}),function(e){return u.apply(this,arguments)}),removeItem:(i=(0,n._)(function(t){var r;return(0,a.YH)(this,function(n){switch(n.label){case 0:return n.trys.push([0,2,,3]),[4,o.removeItem(t)];case 1:return[2,n.sent()];case 2:throw r=n.sent(),o=s().createInstance(e),r;case 3:return[2]}})}),function(e){return i.apply(this,arguments)})}};var o=i({name:"GB Printer Web",storeName:"gb-printer-web-images"}),l=i({name:"GB Printer Web",storeName:"gb-printer-web-frames"});window.lfi=o,window.lff=l;var f=function(){var e=(0,n._)(function(){return(0,a.YH)(this,function(e){switch(e.label){case 0:return[4,l.ready()];case 1:return e.sent(),[4,o.ready()];case 2:return e.sent(),[4,new Promise(function(e){window.setTimeout(e,5)})];case 3:return e.sent(),[2]}})});return function(){return e.apply(this,arguments)}}()},80715:(e,t,r)=>{"use strict";r.d(t,{default:()=>w});var n=r(97004),a=r(62570),u=r(577),s=r(39249),c=r(95155);r(10691);var i=r(35695),o=r(12115),l=function(){var e=(0,n._)(function(e,t){return(0,s.YH)(this,function(r){return[2,new Promise(function(r){e.get(t).onsuccess=function(e){var t;r(null==(t=e.target)?void 0:t.result)}})]})});return function(t,r){return e.apply(this,arguments)}}(),f=function(){var e=(0,n._)(function(e,t){return(0,s.YH)(this,function(r){return[2,new Promise(function(r){var a,u=e.result.transaction(t).objectStore(t),c=u.getAllKeys();a=(0,n._)(function(e){var t,n,a,c,i,o,f,h,d,v,y,p;return(0,s.YH)(this,function(s){switch(s.label){case 0:n=null==(t=e.target)?void 0:t.result,a=[],c=!0,i=!1,o=void 0,s.label=1;case 1:s.trys.push([1,6,7,8]),f=n[Symbol.iterator](),s.label=2;case 2:if(c=(h=f.next()).done)return[3,5];return d=h.value,v=a.push,y={key:d},[4,l(u,d)];case 3:v.apply(a,[(y.value=s.sent(),y)]),s.label=4;case 4:return c=!0,[3,2];case 5:return[3,8];case 6:return p=s.sent(),i=!0,o=p,[3,8];case 7:try{c||null==f.return||f.return()}finally{if(i)throw o}return[7];case 8:return r(a),[2]}})}),c.onsuccess=function(e){return a.apply(this,arguments)}})]})});return function(t,r){return e.apply(this,arguments)}}(),h=function(){var e=(0,n._)(function(e,t,r){var a;return(0,s.YH)(this,function(u){return(a=e.result.transaction(t,"readwrite").objectStore(t)).clear().onsuccess=(0,n._)(function(){var e,t,n,u,c,i,o,l;return(0,s.YH)(this,function(s){e=!0,t=!1,n=void 0;try{for(u=r[Symbol.iterator]();!(e=(c=u.next()).done);e=!0)o=(i=c.value).key,l=i.value,a.add(l,o)}catch(e){t=!0,n=e}finally{try{e||null==u.return||u.return()}finally{if(t)throw n}}return[2]})}),[2]})});return function(t,r,n){return e.apply(this,arguments)}}(),d=function(){var e=(0,n._)(function(){var e,t,r,n,a,u,c,i;return(0,s.YH)(this,function(s){e=Object.keys(localStorage).filter(function(e){return e.startsWith("gbp")}),t=[],r=!0,n=!1,a=void 0;try{for(u=e[Symbol.iterator]();!(r=(c=u.next()).done);r=!0)i=c.value,t.push({key:i,value:localStorage.getItem(i)})}catch(e){n=!0,a=e}finally{try{r||null==u.return||u.return()}finally{if(n)throw a}}return[2,t]})});return function(){return e.apply(this,arguments)}}(),v=function(){var e=!0,t=!1,r=void 0;try{for(var n,a=Object.keys(localStorage)[Symbol.iterator]();!(e=(n=a.next()).done);e=!0){var u=n.value;localStorage.removeItem(u)}}catch(e){t=!0,r=e}finally{try{e||null==a.return||a.return()}finally{if(t)throw r}}},y=function(e){var t=!0,r=!1,n=void 0;try{for(var a,u=e[Symbol.iterator]();!(t=(a=u.next()).done);t=!0){var s=a.value,c=s.key,i=s.value;localStorage.setItem(c,i)}}catch(e){r=!0,n=e}finally{try{t||null==u.return||u.return()}finally{if(r)throw n}}},p=r(75380),b="GB Printer Web",m="DBDATA";function w(){var e=(0,a._)((0,o.useState)("https://herrzatacke.github.io/gb-printer-web/db.html"),2),t=e[0],r=e[1],l=(0,a._)((0,o.useState)(),2),w=l[0],g=l[1],_=(0,a._)((0,o.useState)(),2),S=_[0],I=_[1],H=(0,a._)((0,o.useState)(),2),k=H[0],Y=H[1],x=(0,a._)((0,o.useState)(!1),2),j=x[0],T=x[1],P=(0,a._)((0,o.useState)([]),2),C=P[0],D=P[1],R=(0,i.useRouter)().replace,N=(0,o.useCallback)(function(e){D(function(t){return(0,u._)(t).concat([e])})},[]);(0,o.useEffect)(function(){(0,n._)(function(){var e,t,r,a;return(0,s.YH)(this,function(u){switch(u.label){case 0:return[4,(0,p.ZU)()];case 1:return u.sent(),[4,indexedDB.databases()];case 2:return t=(null==(e=u.sent().find(function(e){return e.name===b}))?void 0:e.version)||1,Y(r=indexedDB.open(b,t)),a=window.opener||null,window.addEventListener("message",function(e){e.data.type===m&&I(e.data)}),a&&(T(!0),r.onsuccess=(0,n._)(function(){var e,t,n;return(0,s.YH)(this,function(u){switch(u.label){case 0:return[4,f(r,"gb-printer-web-images")];case 1:return e=u.sent(),[4,f(r,"gb-printer-web-frames")];case 2:return t=u.sent(),[4,d()];case 3:return n=u.sent(),window.setTimeout(function(){var r={type:m,images:e,frames:t,localStorageData:n};a.postMessage(r,"*")},500),[2]}})})),[2]}})})()},[]),(0,o.useEffect)(function(){S?D(["".concat(S.images.length," images"),"".concat(S.frames.length," frames"),"".concat(S.localStorageData.length," localStorage entries")]):D([])},[S]);var B=(0,o.useCallback)(function(){g(window.open(t,"db-child","width=480,height=400"))},[t]),E=(0,o.useCallback)((0,n._)(function(){return(0,s.YH)(this,function(e){switch(e.label){case 0:if(!S||!k)return[2];return[4,v()];case 1:return e.sent(),N("localStorage cleared"),[4,y(S.localStorageData)];case 2:return e.sent(),N("localstorage copied"),[4,h(k,"gb-printer-web-images",S.images)];case 3:return e.sent(),N("images copied"),[4,h(k,"gb-printer-web-frames",S.frames)];case 4:return e.sent(),N("frames copied"),window.setTimeout(function(){null==w||w.close(),R("/")},800),[2]}})}),[N,k,w,R,S]);return(0,c.jsxs)("div",{className:"database-page ".concat(j?"is-child":""),children:[(0,c.jsxs)("div",{className:"url-load",children:[(0,c.jsxs)("label",{children:[(0,c.jsx)("span",{children:"Source URL"}),(0,c.jsx)("input",{id:"db-url",type:"text",value:t,onChange:function(e){return r(e.target.value)}})]}),(0,c.jsx)("button",{type:"button",onClick:B,children:"Load"})]}),(0,c.jsx)("pre",{children:C.join("\n")}),(0,c.jsx)("button",{type:"button",disabled:!S,onClick:E,children:"Copy"})]})}}},e=>{var t=t=>e(e.s=t);e.O(0,[1528,7271,8441,5955,1684,7358],()=>t(34067)),_N_E=e.O()}]);