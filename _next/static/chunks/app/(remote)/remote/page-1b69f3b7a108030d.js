(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[4021],{11496:(e,t,n)=>{"use strict";n.d(t,{Gw:()=>u,IB:()=>a,q:()=>s});var r=n(36336),s="en-GB",a=["de-DE","en-CA",s,"en-US","fr-FR"],u=(0,r.A)(a.map(function(e){return e.split("-")[0]}))},15431:(e,t,n)=>{"use strict";n.d(t,{A:()=>g});var r=n(82732),s=n(22043),a=n(98452),u=n(25959),i=n(89863),o=n(92564),c=n(89922),f=n(45485),l=n(94529),d=n(73204),m=n(96132),p=n(18282),h=n(11496),v=n(32537),E=n(25764),w=function(){var e="";if("undefined"!=typeof navigator){var t=(0,s._)(navigator.language.split("-"),2);e=[t[0],t[1]].filter(Boolean).join("-")}return h.IB.includes(e)?e:h.q};let g=(0,u.v)((0,i.Zr)(function(e){return{activePalette:"bw",alwaysShowDownloadDialog:!0,bitmapQueueDither:!0,bitmapQueueSetting:o.f.WIDE,createGroup:!0,enableDebug:!1,exportFileTypes:["png"],exportScaleFactors:[4],fileNameStyle:c.B.FULL,forceMagicCheck:!1,galleryView:l.j.GALLERY_VIEW_1X,galleryClickAction:f.n.SELECT,handleExportFrame:a.H.FRAMEMODE_KEEP,hideDates:!1,importDeleted:!0,importLastSeen:!0,importPad:!1,lastBaudRate:115200,pageSize:30,preferredLocale:w(),printerParams:"",printerUrl:"",savFrameTypes:"int",savImportOrder:m.K.CART_INDEX,themeName:p.V.BRIGHT,sortPalettes:d.V.DEFAULT_DESC,useSerials:!1,videoParams:{},setActivePalette:function(t){return e({activePalette:t})},setAlwaysShowDownloadDialog:function(t){return e({alwaysShowDownloadDialog:t})},setBitmapQueueDither:function(t){return e({bitmapQueueDither:t})},setBitmapQueueSetting:function(t){return e({bitmapQueueSetting:t})},setCreateGroup:function(t){return e({createGroup:t})},setEnableDebug:function(t){return e({enableDebug:t})},setFileNameStyle:function(t){return e({fileNameStyle:t})},setForceMagicCheck:function(t){return e({forceMagicCheck:t})},setGalleryView:function(t){return e({galleryView:t})},setGalleryClickAction:function(t){return e({galleryClickAction:t})},setHandleExportFrame:function(t){return e({handleExportFrame:t})},setHideDates:function(t){return e({hideDates:t})},setImportDeleted:function(t){return e({importDeleted:t})},setImportLastSeen:function(t){return e({importLastSeen:t})},setImportPad:function(t){return e({importPad:t})},setLastBaudRate:function(t){return e({lastBaudRate:t})},setPageSize:function(t){return e({pageSize:t})},setPrinterParams:function(t){return e({printerParams:t})},setPrinterUrl:function(t){return e({printerUrl:(0,v.A)(t,"http")})},setSavFrameTypes:function(t){return e({savFrameTypes:t})},setSavImportOrder:function(t){return e({savImportOrder:t})},setThemeName:function(t){return e({themeName:t})},setSortPalettes:function(t){return e({sortPalettes:t})},setUseSerials:function(t){return e({useSerials:t})},setVideoParams:function(t){return e(function(e){return{videoParams:(0,r._)({},e.videoParams,t)}})},setExportScaleFactors:function(t){return e({exportScaleFactors:t})},setExportFileTypes:function(t){return e({exportFileTypes:t})},setPreferredLocale:function(t){h.IB.includes(t)?e({preferredLocale:t}):console.log('unknown locale "'.concat(t,'"'))}}},{name:"".concat(E.z,"-settings"),storage:(0,i.KU)(function(){return localStorage})}))},18282:(e,t,n)=>{"use strict";n.d(t,{V:()=>r});var r=function(e){return e.BRIGHT="theme-bright",e.DARK="theme-dark",e}({})},20063:(e,t,n)=>{"use strict";var r=n(47260);n.o(r,"RedirectType")&&n.d(t,{RedirectType:function(){return r.RedirectType}}),n.o(r,"redirect")&&n.d(t,{redirect:function(){return r.redirect}}),n.o(r,"usePathname")&&n.d(t,{usePathname:function(){return r.usePathname}}),n.o(r,"useRouter")&&n.d(t,{useRouter:function(){return r.useRouter}}),n.o(r,"useServerInsertedHTML")&&n.d(t,{useServerInsertedHTML:function(){return r.useServerInsertedHTML}})},21860:(e,t,n)=>{var r=n(95704);e.exports=n(r.env.PROMISE_QUEUE_COVERAGE?49901:29372)},25764:(e,t,n)=>{"use strict";n.d(t,{z:()=>r});var r="gbp-z-web"},25969:(e,t,n)=>{"use strict";n.d(t,{j:()=>u});var r=n(22043),s=n(20063),a=n(12115),u=function(){var e=(0,s.usePathname)(),t=(0,r._)((0,a.useState)(window.location.search),2),n=t[0],u=t[1],i=(0,a.useMemo)(function(){return new URLSearchParams(n)},[n]);(0,a.useEffect)(function(){var e=function(){window.setTimeout(function(){u(function(e){return window.location.search!==e?window.location.search:e})},1)};e(),window.addEventListener("popstate",e);var t=history.pushState,n=history.replaceState;return history.pushState=function(){for(var n=arguments.length,r=Array(n),s=0;s<n;s++)r[s]=arguments[s];t.apply(this,r),e()},history.replaceState=function(){for(var t=arguments.length,r=Array(t),s=0;s<t;s++)r[s]=arguments[s];n.apply(this,r),e()},function(){window.removeEventListener("popstate",e),history.pushState=t,history.replaceState=n}},[i,e]);var o=(0,a.useMemo)(function(){return i.toString()},[i]);return{fullPath:(0,a.useMemo)(function(){return o?"".concat(e,"?").concat(o):e},[e,o]),pathname:e,query:o,searchParams:i}}},29372:function(e,t,n){var r,s;!function(a,u){"use strict";e.exports&&1?e.exports=u():void 0===(s="function"==typeof(r=u)?r.call(t,n,t,e):r)||(e.exports=s)}(0,function(){"use strict";var e="undefined"!=typeof Promise?Promise:function(){return{then:function(){throw Error("Queue.configure() before use Queue")}}},t=function(){};function n(e,t,n){this.options=n=n||{},this.pendingPromises=0,this.maxPendingPromises=void 0!==e?e:1/0,this.maxQueuedPromises=void 0!==t?t:1/0,this.queue=[]}return n.configure=function(t){e=t},n.prototype.add=function(n){var r=this;return new e(function(e,s,a){if(r.queue.length>=r.maxQueuedPromises)return void s(Error("Queue limit reached"));r.queue.push({promiseGenerator:n,resolve:e,reject:s,notify:a||t}),r._dequeue()})},n.prototype.getPendingLength=function(){return this.pendingPromises},n.prototype.getQueueLength=function(){return this.queue.length},n.prototype._dequeue=function(){var t,n=this;if(this.pendingPromises>=this.maxPendingPromises)return!1;var r=this.queue.shift();if(!r)return this.options.onEmpty&&this.options.onEmpty(),!1;try{this.pendingPromises++,((t=r.promiseGenerator())&&"function"==typeof t.then?t:new e(function(e){e(t)})).then(function(e){n.pendingPromises--,r.resolve(e),n._dequeue()},function(e){n.pendingPromises--,r.reject(e),n._dequeue()},function(e){r.notify(e)})}catch(e){n.pendingPromises--,r.reject(e),n._dequeue()}return!0},n})},32537:(e,t,n)=>{"use strict";n.d(t,{A:()=>r});let r=function(e,t){if(!e.trim())return"";if("/"===e&&"ws"!==t)return e;var n=!!e.match(RegExp("^".concat(t,"(s)?:\\/\\/"),"gi"));return"".concat(n?"":"".concat(t,"://")).concat(e).concat(e.endsWith("/")?"":"/")}},32614:(e,t,n)=>{"use strict";n.d(t,{D:()=>m,EnvProvider:()=>p});var r=n(61975),s=n(82732),a=n(45849),u=n(22043),i=n(71450),o=n(95155),c=n(12115),f=n(15431),l=n(94468),d=(0,c.createContext)(null),m=function(){return(0,c.useContext)(d)},p=function(e){var t=e.children,n=(0,u._)((0,c.useState)(null),2),m=n[0],p=n[1],h=(0,f.A)().setPrinterUrl;return(0,c.useEffect)(function(){var e=["/gb-printer-web","/env.json"].filter(Boolean).join("/");e&&(0,r._)(function(){var t,n,r,u;return(0,i.YH)(this,function(i){switch(i.label){case 0:return i.trys.push([0,5,,6]),[4,(0,l.ZU)()];case 1:return i.sent(),[4,fetch(e)];case 2:return[4,i.sent().json()];case 3:return t=i.sent(),r=[(0,s._)({},t)],u={},[4,l.mU.driver()];case 4:return"esp8266"===(n=a._.apply(void 0,r.concat([(u.localforage=i.sent(),u)]))).env&&h("/"),p(n),[3,6];case 5:return i.sent(),p({version:"0.0.0",maximages:0,localforage:"error",env:"error",fstype:"-",bootmode:"-",oled:!1}),[3,6];case 6:return[2]}})})()},[h]),(0,o.jsx)(d.Provider,{value:m,children:t})}},34164:(e,t,n)=>{"use strict";n.d(t,{default:()=>L});var r=n(82732),s=n(45849),a=n(95155),u=n(18955),i=n(12115),o=n(22043),c=n(32614),f=n(25969),l=n(61975),d=n(71450),m=n(45407),p=n(45377);let h=function(){return(0,l._)(function(){var e;return(0,d.YH)(this,function(t){switch(t.label){case 0:return[4,fetch("/dumps/list")];case 1:return[4,t.sent().json()];case 2:if((e=t.sent()).fs&&e.fs.dumpcount!==e.dumps.length)throw Error("Inconststent image count received from printer.");return[2,{printerData:(0,s._)((0,r._)({},e),{dumps:(0,p._)(e.dumps).sort()})}]}})})()},v=function(){return(0,l._)(function(){return(0,d.YH)(this,function(e){switch(e.label){case 0:return[4,fetch("/dumps/clear")];case 1:return[4,e.sent().json()];case 2:if(void 0!==e.sent().deleted)return[2,h()];throw Error("error while deleting images")}})})()};var E=n(21860),w=n.n(E),g=function(e,t){return(0,l._)(function(){var n,r,s;return(0,d.YH)(this,function(a){switch(a.label){case 0:return a.trys.push([0,2,,3]),[4,fetch(e)];case 1:return n=a.sent(),[3,3];case 2:if(r=a.sent(),t<=1)throw r;return[2,g(e,t-1)];case 3:return s={},n.headers.forEach(function(e,t){s[t]=e}),[2,n.blob().then(function(e){return{blob:e,contentType:n.headers.get("content-type")||void 0,meta:{headers:s},status:n.status,ok:n.ok}})]}})})()},y=new(w())(1,1/0),I=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:250;return y.add(function(){return(0,l._)(function(){return(0,d.YH)(this,function(n){switch(n.label){case 0:return[4,new Promise(function(e){window.setTimeout(e,t)})];case 1:return n.sent(),[2,e()]}})})()})};let _=function(e,t,n){var r=t.dumps;return(0,l._)(function(){var t,s,a,u;return(0,d.YH)(this,function(i){switch(i.label){case 0:return t=parseInt(n.get("delay")||"250",10),s=parseInt(n.get("retries")||"3",10),a=r.map(function(n,a){return(0,l._)(function(){return(0,d.YH)(this,function(u){return[2,I(function(){return(0,l._)(function(){var t;return(0,d.YH)(this,function(u){switch(u.label){case 0:return u.trys.push([0,2,,3]),[4,g("/".concat(n.replace(/^\//,"")),s)];case 1:return t=u.sent(),e.postMessage({fromRemotePrinter:{progress:(a+1)/r.length}},"*"),[2,t];case 2:return console.warn(u.sent()),[2,{ok:!1,blob:new Blob}];case 3:return[2]}})})()},t)]})})()}),u={},[4,Promise.all(a)];case 1:return[2,(u.blobsdone=i.sent(),u)]}})})()};var P=n(52467);let T=function(){return(0,l._)(function(){return(0,d.YH)(this,function(e){return[2,{lines:P.default}]})})()},R=function(e,t,n){var r=e.targetWindow,s=[];switch(t){case"webpack-dev":s.push({name:m.n.TESTFILE,fn:T},{name:m.n.CHECKPRINTER,fn:h},{name:m.n.FETCHIMAGES,fn:_},{name:m.n.CLEARPRINTER,fn:v});break;case"esp8266":s.push({name:m.n.CHECKPRINTER,fn:h},{name:m.n.FETCHIMAGES,fn:_},{name:m.n.CLEARPRINTER,fn:v});break;case"pico-gb":s.push({name:m.n.CHECKPRINTER,fn:h},{name:m.n.FETCHIMAGES,fn:_})}return window.addEventListener("message",function(e){return(0,l._)(function(){var t,a;return(0,d.YH)(this,function(u){switch(u.label){case 0:if(e.source!==r||!(t=e.data.toRemotePrinter))return[2];switch(t.command){case m.n.FETCHIMAGES:return[3,1];case m.n.CLEARPRINTER:case m.n.CHECKPRINTER:return[3,3];case m.n.TESTFILE:return[3,5]}return[3,7];case 1:return[4,s.find(function(e){return e.name===t.command}).fn(r,t.params,n)];case 2:case 4:case 6:return a=u.sent(),[3,8];case 3:return[4,s.find(function(e){return e.name===t.command}).fn()];case 5:return[4,s.find(function(e){return e.name===t.command}).fn()];case 7:a=null,u.label=8;case 8:return a&&r.postMessage({fromRemotePrinter:a},"*"),[2]}})})()}),s},S=function(e,t){var n=e.targetWindow,r=window.setInterval(function(){n&&n.postMessage({fromRemotePrinter:{height:document.body.getBoundingClientRect().height,commands:t}},"*")},500);return function(){window.clearInterval(r)}};var b=function(e){return e.NONE="none",e.IFRAME="iframe",e.POPUP="popup",e}({}),A=function(){var e=(0,o._)((0,i.useState)("none"),2),t=e[0],n=e[1],r=(0,c.D)(),s=(0,f.j)().searchParams;return(0,i.useEffect)(function(){var e=window.opener||window.parent,t=e===window.parent&&e!==window,a=e===window.opener&&e!==window,u={targetWindow:e,isIframe:t,isPopup:a,isRemote:t||a};t?n("iframe"):a?n("popup"):n("none");var i=(null==r?void 0:r.env)?R(u,r.env,s):[],o=S(u,i.map(function(e){return e.name}));return console.log("started"),o},[r,s]),{parentType:t}};let L=function(){var e=(0,u.c3)("Remote"),t=A().parentType,n={p:function(e){return(0,a.jsx)("p",{children:e})},em:function(e){return(0,a.jsx)("span",{className:"remote-info--em",children:e})}};switch(t){case b.IFRAME:return(0,a.jsx)("div",{className:"remote-info",children:e.rich("iframe",n)});case b.POPUP:return(0,a.jsx)("div",{className:"remote-info",children:e.rich("popup",(0,s._)((0,r._)({},n),{host:window.location.host}))});case b.NONE:default:return(0,a.jsx)("div",{className:"remote-info",children:e.rich("noReference",n)})}}},36336:(e,t,n)=>{"use strict";n.d(t,{A:()=>r});let r=function(e){return Array.from(new Set(e))}},42269:(e,t,n)=>{Promise.resolve().then(n.bind(n,34164))},45407:(e,t,n)=>{"use strict";n.d(t,{n:()=>r});var r=function(e){return e.TESTFILE="testFile",e.CHECKPRINTER="checkPrinter",e.FETCHIMAGES="fetchImages",e.CLEARPRINTER="clearPrinter",e.TEAR="tear",e}({})},45485:(e,t,n)=>{"use strict";n.d(t,{n:()=>r});var r=function(e){return e.SELECT="select",e.EDIT="edit",e.VIEW="view",e}({})},49901:()=>{},73204:(e,t,n)=>{"use strict";n.d(t,{V:()=>r});var r=function(e){return e.DEFAULT_ASC="default_asc",e.DEFAULT_DESC="default_desc",e.USAGE_ASC="usage_asc",e.USAGE_DESC="usage_desc",e.NAME_ASC="name_asc",e.NAME_DESC="name_desc",e}({})},89922:(e,t,n)=>{"use strict";n.d(t,{B:()=>r,y:()=>s});var r=function(e){return e.FULL="FULL",e.TITLE_ONLY="TITLE_ONLY",e.DATE_TITLE="DATE_TITLE",e}({}),s=[{id:"FULL",name:"filenameStyles.fullTitle"},{id:"DATE_TITLE",name:"filenameStyles.dateTitle"},{id:"TITLE_ONLY",name:"filenameStyles.titleOnly"}]},92564:(e,t,n)=>{"use strict";n.d(t,{C:()=>s,f:()=>r});var r=function(e){return e.WIDER="wider",e.WIDE="wide",e.NORMAL="normal",e.NARROW="narrow",e.NARROWER="narrower",e.EMULATOR="emulator",e}({}),s=[{translationKey:"contrastSettings.wider",baseValues:[0,68,187,255],value:"wider"},{translationKey:"contrastSettings.wide",baseValues:[0,85,170,255],value:"wide"},{translationKey:"contrastSettings.normal",baseValues:[51,102,153,204],value:"normal"},{translationKey:"contrastSettings.narrow",baseValues:[69,115,162,208],value:"narrow"},{translationKey:"contrastSettings.narrower",baseValues:[85,113,141,170],value:"narrower"},{translationKey:"contrastSettings.emulator",baseValues:[64,144,224,255],value:"emulator"}]},94468:(e,t,n)=>{"use strict";n.d(t,{Uv:()=>f,mU:()=>c,ZU:()=>l});var r=n(61975),s=n(71450),a=n(29832),u=n.n(a),i="dummy".concat(new Date().getTime());let o=function(e){var t=u().createInstance(e);return{ready:function(){return(0,r._)(function(){var n;return(0,s.YH)(this,function(a){switch(a.label){case 0:return a.trys.push([0,2,,3]),[4,t.ready()];case 1:return a.sent(),[2,(0,r._)(function(){return(0,s.YH)(this,function(e){switch(e.label){case 0:return[4,t.setItem(i,i)];case 1:return e.sent(),[4,t.removeItem(i)];case 2:return e.sent(),[2]}})})()];case 2:throw n=a.sent(),t=u().createInstance(e),n;case 3:return[2]}})})()},keys:function(){return(0,r._)(function(){return(0,s.YH)(this,function(n){try{return[2,t.keys()]}catch(n){throw t=u().createInstance(e),n}})})()},driver:function(){return(0,r._)(function(){var n;return(0,s.YH)(this,function(r){switch(r.label){case 0:return r.trys.push([0,2,,3]),[4,t.driver()];case 1:return[2,r.sent()];case 2:throw n=r.sent(),t=u().createInstance(e),n;case 3:return[2]}})})()},setItem:function(n,a){return(0,r._)(function(){var r;return(0,s.YH)(this,function(s){switch(s.label){case 0:return s.trys.push([0,2,,3]),[4,t.setItem(n,a)];case 1:return[2,s.sent()];case 2:throw r=s.sent(),t=u().createInstance(e),r;case 3:return[2]}})})()},getItem:function(n){return(0,r._)(function(){var r;return(0,s.YH)(this,function(s){switch(s.label){case 0:return s.trys.push([0,2,,3]),[4,t.getItem(n)];case 1:return[2,s.sent()];case 2:throw r=s.sent(),t=u().createInstance(e),r;case 3:return[2]}})})()},removeItem:function(n){return(0,r._)(function(){var r;return(0,s.YH)(this,function(s){switch(s.label){case 0:return s.trys.push([0,2,,3]),[4,t.removeItem(n)];case 1:return[2,s.sent()];case 2:throw r=s.sent(),t=u().createInstance(e),r;case 3:return[2]}})})()}}};var c=o({name:"GB Printer Web",storeName:"gb-printer-web-images"}),f=o({name:"GB Printer Web",storeName:"gb-printer-web-frames"});window.lfi=c,window.lff=f;var l=function(){return(0,r._)(function(){return(0,s.YH)(this,function(e){switch(e.label){case 0:return[4,f.ready()];case 1:return e.sent(),[4,c.ready()];case 2:return e.sent(),[4,new Promise(function(e){window.setTimeout(e,5)})];case 3:return e.sent(),[2]}})})()}},94529:(e,t,n)=>{"use strict";n.d(t,{j:()=>r});var r=function(e){return e.GALLERY_VIEW_SMALL="small",e.GALLERY_VIEW_1X="1x",e.GALLERY_VIEW_2X="2x",e.GALLERY_VIEW_MAX="max",e.PALETTE_VIEW="res2x",e}({})},96132:(e,t,n)=>{"use strict";n.d(t,{K:()=>r,o:()=>s});var r=function(e){return e.CART_INDEX="CART_INDEX",e.RAM_INDEX="RAM_INDEX",e}({}),s=[{translationKey:"importOrders.cartIndex",value:"CART_INDEX"},{translationKey:"importOrders.ramIndex",value:"RAM_INDEX"}]}},e=>{e.O(0,[8955,2140,9832,7963,8441,9342,1255,7358],()=>e(e.s=42269)),_N_E=e.O()}]);