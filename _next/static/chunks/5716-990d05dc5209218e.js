"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[5716],{933:(e,t,r)=>{r.d(t,{E:()=>u});var n,a=r(97004),i=r(39249),o=r(24463),u=function(e,t){var u,l,s,c,d=(u=(0,a._)(function(){var a;return(0,i.YH)(this,function(i){switch(i.label){case 0:if(n)return[3,2];return[4,Promise.all([r.e(9268),r.e(7431),r.e(1575)]).then(r.bind(r,94979))];case 1:a=i.sent().dropBoxSyncTool,n=n||a(e,t),i.label=2;case 2:return[2,n]}})}),function(){return u.apply(this,arguments)});return o.A.getState().dropboxStorage.use&&d(),{recoverImageData:(l=(0,a._)(function(e){return(0,i.YH)(this,function(t){switch(t.label){case 0:return[4,d()];case 1:return[2,t.sent().recoverImageData(e)]}})}),function(e){return l.apply(this,arguments)}),startAuth:(0,a._)(function(){return(0,i.YH)(this,function(e){switch(e.label){case 0:return[4,d()];case 1:return[2,e.sent().startAuth()]}})}),startSyncData:(s=(0,a._)(function(e){return(0,i.YH)(this,function(t){switch(t.label){case 0:return[4,d()];case 1:return[2,t.sent().startSyncData(e)]}})}),function(e){return s.apply(this,arguments)}),startSyncImages:(0,a._)(function(){return(0,i.YH)(this,function(e){switch(e.label){case 0:return[4,d()];case 1:return[2,e.sent().startSyncImages()]}})}),updateSettings:(c=(0,a._)(function(e){return(0,i.YH)(this,function(t){switch(t.label){case 0:return[4,d()];case 1:return[2,t.sent().updateSettings(e)]}})}),function(e){return c.apply(this,arguments)}),subscribe:function(){var e;return o.A.subscribe(function(e){return e.dropboxStorage},(e=(0,a._)(function(e){return(0,i.YH)(this,function(t){switch(t.label){case 0:return[4,d()];case 1:return t.sent().updateSettings(e),[2]}})}),function(t){return e.apply(this,arguments)}))}}}},9718:(e,t,r)=>{r.d(t,{_Y:()=>a,k4:()=>i,qt:()=>n});var n=function(e){return e.USB="USB",e.SERIAL="SERIAL",e}({}),a=function(e){return e.INACTIVE="inactive",e.PACKET_CAPTURE="packet_capture",e.SUPER_PRINTER_INTERFACE="super_printer_interface",e.GBXCART="gbxcart",e}({}),i=[{vendorId:9025,productId:32822},{vendorId:9025,productId:32823},{vendorId:9025,productId:32845},{vendorId:9025,productId:32846},{vendorId:9025,productId:32847},{vendorId:9025,productId:32848},{vendorId:9025,productId:32850},{vendorId:9025,productId:32851},{vendorId:9025,productId:32852},{vendorId:9025,productId:32853},{vendorId:9025,productId:32854},{vendorId:9025,productId:32855},{vendorId:9114}]},15821:(e,t,r)=>{r.d(t,{A:()=>b});var n=r(78538),a=r(44054),i=r(95155),o=r(69242),u=r(54581),l=r(7642),s=r(36114),c=r(71977),d=r(99927),f=r(54492),p=r(3127),h=r(16324),g=r(27943),v=r(17652),m=r(12115);let E=function(e){var t=e.confirm,r=e.canConfirm,n=e.deny;(0,m.useEffect)(function(){var e=function(e){"Escape"===e.key&&n&&n(),"Enter"===e.key&&e.ctrlKey&&t&&r&&t()};return document.addEventListener("keydown",e),function(){document.removeEventListener("keydown",e)}},[t,r,n])};var I=function(e,t,r,n){var i={};if(n?(i.padding="8px !important",i.overflowX="hidden",i.overflowY="hidden"):(i.scrollbarGutter="stable",i.overflowY="scroll"),r)return i;switch(void 0===t?"undefined":(0,a._)(t)){case"string":i.height=t;break;case"number":i.height="".concat(t,"px")}switch(void 0===e?"undefined":(0,a._)(e)){case"string":i.width=e;break;case"number":i.width="".concat(e,"px");break;default:i.width="440px"}return i};let b=function(e){var t=e.contentHeight,r=e.contentWidth,a=e.header,b=e.closeTitle,w=e.children,A=e.confirm,T=e.deny,_=e.canConfirm,P=e.headerOnly,x=e.fullSize,y=e.open,S=e.keepMounted,k=e.closeOnOverlayClick,C=e.headerActionButtons,N=e.actionButtons,R=(0,v.c3)("Lightbox"),G=(0,n._)((0,m.useState)(),2),D=G[0],F=G[1];E({confirm:A,canConfirm:_||!1,deny:T}),(0,m.useEffect)(function(){F(document.body)},[]);var L=(0,h.A)(),M=(0,g.A)(L.breakpoints.down("md")),j=I(r,t,M,x),W=R(A?"cancel":"close"),H=R("ok");return(0,i.jsxs)(s.A,{container:D,fullScreen:M||x,maxWidth:"lg",open:"boolean"!=typeof y||y,onClose:T,"aria-label":"string"==typeof a?a:void 0,keepMounted:"boolean"!=typeof S||S,disableEscapeKeyDown:!("boolean"!=typeof k||k),sx:{paddingRight:"10px"},children:[(0,i.jsxs)(f.A,{sx:{display:"flex",justifyContent:"space-between",gap:2,maxWidth:j.width},children:[(0,i.jsx)(u.A,{sx:{whiteSpace:"nowrap",textOverflow:"ellipsis",overflow:"hidden"},title:a,children:a}),(0,i.jsxs)(u.A,{sx:{my:-.5,mr:-2},children:[C,T?(0,i.jsx)(p.A,{title:b||R("closeWithHeader",{header:"string"==typeof a?a:""}),color:"inherit",onClick:T,children:(0,i.jsx)(o.A,{})}):null]})]}),!P&&(0,i.jsx)(d.A,{sx:j,children:w}),(0,i.jsxs)(c.A,{children:[N,T?(0,i.jsx)(l.A,{onClick:T,color:"primary",variant:"outlined",children:W}):null,A?(0,i.jsx)(l.A,{disabled:!1===_,color:"primary",variant:"contained",onClick:A,children:H}):null]})]})}},23747:(e,t,r)=>{r.d(t,{Ay:()=>b,BF:()=>m,Ll:()=>v});var n=r(97004),a=r(693),i=r(60376),o=r(78538),u=r(39249),l=r(12115),s=r(95939),c=r(7119),d=r(3381),f=r(71620),p=r(11760),h=r(80360),g=r(46594),v="NEW_GROUP",m=function(e){return e.trim().replace(/[^A-Z0-9_-]+/gi,"_").toLowerCase()},E=function(e,t){return e.find(function(e){return e.group.groups.find(function(e){return e.id===t})})||null},I=function(e){return e.CREATE_NEW="CREATE_NEW",e.EDIT_EXISTING="EDIT_EXISTING",e.NOT_EDITING="NOT_EDITING",e}(I||{});let b=function(){var e,t=(0,f.A)().imageSelection,r=(0,d.A)(),I=r.editImageGroup,b=r.cancelEditImageGroup,w=(0,p.h)(),A=w.imageGroups,T=w.addImageGroup,_=w.updateImageGroup,P=w.groupImagesAdd,x=w.ungroupImages,y=(0,c.g)(),S=y.navigateToGroup,k=y.navigateToImage,C=(0,s.Z)(),N=C.path,R=C.view,G=C.paths,D=C.pathsOptions,F=t.length,L=(null==I?void 0:I.groupId)?I.groupId===v?"CREATE_NEW":"EDIT_EXISTING":"NOT_EDITING",M=(0,l.useMemo)(function(){switch(L){case"CREATE_NEW":var e=(null==I?void 0:I.newGroupTitle)||"";return{imageGroup:null,parentPathMap:G.find(function(e){return e.group.id===R.id})||null,title:e,slug:m(e),slugTouched:!1};case"EDIT_EXISTING":var t=A.find(function(e){return e.id===(null==I?void 0:I.groupId)})||null;return{imageGroup:t,parentPathMap:(null==I?void 0:I.groupId)?E(G,I.groupId):null,title:(null==t?void 0:t.title)||"",slug:(null==t?void 0:t.slug)||"",slugTouched:!0};default:return{imageGroup:null,parentPathMap:null,title:"",slug:"",slugTouched:!1}}},[I,L,A,G,R]),j=(0,o._)((0,l.useState)(M.title),2),W=j[0],H=j[1],O=(0,o._)((0,l.useState)(M.slug),2),Y=O[0],B=O[1],U=(0,o._)((0,l.useState)(M.slugTouched),2),X=U[0],z=U[1],K=(0,o._)((0,l.useState)((null==(e=M.parentPathMap)?void 0:e.absolutePath)||""),2),Z=K[0],V=K[1],$=(0,l.useMemo)(function(){if(!(null==I?void 0:I.groupId))return"";if((null==I?void 0:I.groupId)===v)return"".concat(N).concat(Y,"/");var e=E(G,I.groupId),t=(null==e?void 0:e.absolutePath)||"";return"".concat(t).concat(Y,"/")},[I,G,N,Y]),q=(0,l.useMemo)(function(){return!!G.find(function(e){return e.absolutePath===$})},[$,G]),Q=(0,l.useMemo)(function(){var e;return Y!==(null==(e=M.imageGroup)?void 0:e.slug)},[M,Y]),J=(0,l.useMemo)(function(){return!!Y&&("CREATE_NEW"===L?!q:"EDIT_EXISTING"===L&&(!Q||!q))},[L,Y,q,Q]),ee=(0,l.useMemo)(function(){var e,t,r=(null==(e=G.find(function(e){return e.absolutePath===Z}))?void 0:e.group.id)||"";return((null==(t=M.parentPathMap)?void 0:t.group.id)||"")!==r},[M,Z,G]),et=(0,l.useMemo)(function(){switch(L){case"EDIT_EXISTING":var e,t=(null==(e=G.find(function(e){return e.group.id===(null==I?void 0:I.groupId)}))?void 0:e.absolutePath)||"";return D.filter(function(e){var r=e.value;return!r.startsWith($)&&r!==t});case"CREATE_NEW":return D;default:return[]}},[$,I,L,G,D]);return{editId:(null==I?void 0:I.groupId)||null,absoluteSlug:$,possibleParents:et,slug:Y,title:W,canConfirm:J,canMove:ee,slugIsInUse:q,slugWasChanged:Q,parentSlug:Z,selectionCount:F,setSlug:function(e){B(e),z(!0)},setTitle:function(e){H(e),(e.length<2||!X)&&(z(!1),B(m(e)))},setParentSlug:V,confirm:function(){if(b(),J&&I){var e,r=(null==(e=G.find(function(e){return e.absolutePath===Z}))?void 0:e.group.id)||"";if(I.groupId===v){if(!I.newGroupCover)return;var n=(0,h.z)();T({id:n,slug:Y,title:W,created:(0,g.J)(),coverImage:I.newGroupCover,images:t,groups:[]},r),S(n,0)}else{if(!M.imageGroup)return;_((0,i._)((0,a._)({},M.imageGroup),{slug:Y,title:W}),r),S(I.groupId,0)}}},move:(0,n._)(function(){var e,r;return(0,u.YH)(this,function(n){return b(),ee&&((r=(null==(e=G.find(function(e){return e.absolutePath===Z}))?void 0:e.group.id)||"")?P(r,t):x(t),k(t[0])),[2]})}),cancelEditImageGroup:b}}},27299:(e,t,r)=>{r.d(t,{E:()=>a});var n=r(693),a=function(e,t){return(0,n._)({flexGrow:0,flexShrink:1,wordBreak:"break-all",whiteSpace:"no-wrap",overflow:"hidden",width:"100%",borderRadius:"3px"},t)}},31936:(e,t,r)=>{r.d(t,{A:()=>u});var n=r(95155),a=r(700);r(12115);var i=r(52166),o=r(27299);let u=function(e){var t=e.text;return(0,i.A)().enableDebug?(0,n.jsx)(a.A,{title:t,variant:"caption",fontFamily:"monospace",component:"pre",sx:function(e){return(0,o.E)(e,{px:.5,py:0,mt:1,mb:0,backgroundColor:e.palette.warning[e.palette.mode]})},children:t}):null}},32521:(e,t,r)=>{r.d(t,{U:()=>a,Z:()=>i});var n=r(12115),a=(0,n.createContext)({connectedDevices:[],isReceiving:!1,webSerialEnabled:!1,openWebSerial:function(){throw Error("PortsContext is missing")},webUSBEnabled:!1,openWebUSB:function(){throw Error("PortsContext is missing")},unknownDeviceResponse:null,hasInactiveDevices:!1}),i=function(){return(0,n.useContext)(a)}},39630:(e,t,r)=>{r.d(t,{V:()=>n});var n=function(e){return e.CHECKBOX="checkbox",e.SELECT="select",e.TEXT="text",e.NUMBER="number",e.INFO="info",e.IMAGE="image",e.META="meta",e}({})},40082:(e,t,r)=>{r.d(t,{A:()=>E});var n=r(95155),a=r(12115),i=r(97004),o=r(78538),u=r(39249),l=r(5432),s=r(83936),c=r(633),d=r(11760),f=r(27746),p=r(933),h=r(5847),g=function(e){var t,r=e.hash,n=e.hashes,g=e.palette,v=e.invertPalette,m=e.framePalette,E=e.invertFramePalette,I=e.lockFrame,b=e.frameId,w=e.rotation,A=(0,o._)((0,a.useState)(null),2),T=A[0],_=A[1],P=(0,c.g)(),x=(0,s.W)().remoteImport,y=(0,d.h)(),S=y.frames,k=y.palettes,C=y.images,N=null==(t=S.find(function(e){return e.id===b}))?void 0:t.hash,R=(0,a.useCallback)(function(e,t,r){return(0,h.T)(C,S,function(){(0,p.E)(P,x).recoverImageData(e)})(e,t,r,n)},[C,S,n,P,x]),G=(0,a.useMemo)(function(){return"string"==typeof g?(k.find(function(e){return e.shortName===g})||l.Fv).palette:g},[k,g]);return(0,a.useEffect)(function(){var e,t=!1;return r||_(null),(e=(0,i._)(function(){var e,n,a,i;return(0,u.YH)(this,function(o){switch(o.label){case 0:if(t)return[2];return[4,R(r,!1,b)];case 1:if(e=o.sent(),!N)return[3,3];return[4,(0,f.mZ)(N)];case 2:return a=o.sent(),[3,4];case 3:a=null,o.label=4;case 4:if(i=(n=a)?n.upper.length/20:2,t)return[2];return e&&_({tiles:e,palette:G,invertPalette:v,imageStartLine:i,lockFrame:I,rotation:w,framePalette:I?m:g,invertFramePalette:I?E:v}),[2]}})}),function(){return e.apply(this,arguments)})(),function(){t=!0}},[R,r,b,g,v,I,w,G,N,m,E]),{gbImageProps:T}},v=r(93370),m=r(66564);let E=function(e){var t=e.hash,r=e.hashes,a=e.frameId,i=e.lockFrame,o=e.invertPalette,u=e.invertFramePalette,l=e.palette,s=e.framePalette,c=e.rotation,d=e.asThumb,f=g({hash:t,hashes:r,frameId:a,lockFrame:i,invertPalette:o,invertFramePalette:u,palette:l,framePalette:s,rotation:c}).gbImageProps;return f?(0,n.jsx)(v.A,{lockFrame:f.lockFrame,invertPalette:f.invertPalette,invertFramePalette:f.invertFramePalette,tiles:f.tiles,palette:f.palette,framePalette:f.framePalette,imageStartLine:f.imageStartLine,rotation:f.rotation,asThumb:d}):(0,n.jsx)(m.A,{})}},41476:(e,t,r)=>{r.d(t,{A:()=>c,F:()=>s});var n=r(86447),a=r(693),i=r(60376),o=r(87025),u=r(51368),l=r(65453),s=function(e){return e.ERROR="error",e.DONE="done",e.MESSAGE="message",e}({});let c=(0,l.v)(function(e,t){return{progress:[],progressLog:{git:[],dropbox:[]},resetProgressLog:function(){return e({progressLog:{git:[],dropbox:[]}})},startProgress:function(t){var r={id:(0,u.A)(),label:t,value:0};return e(function(e){var t=e.progress;return{progress:(0,o._)(t).concat([r])}}),r.id},setProgress:function(t,r){e(function(e){return{progress:e.progress.map(function(e){return e.id!==t?e:(0,i._)((0,a._)({},e),{value:r})})}})},stopProgress:function(t){e(function(e){return{progress:e.progress.filter(function(e){return e.id!==t})}})},setProgressLog:function(r,u){var l=t().progressLog;e({progressLog:(0,i._)((0,a._)({},l),(0,n._)({},r,[u].concat((0,o._)(l[r]))))})}}})},53411:(e,t,r)=>{r.d(t,{A:()=>h});var n=r(97004),a=r(39249),i=r(12115),o=r(46498),u=r(11760),l=r(52166),s=r(27746),c=r(5415),d=r(28952),f=r(18335),p=r(5847);let h=function(){var e,t,r,h=(0,l.A)(),g=h.exportScaleFactors,v=h.exportFileTypes,m=h.handleExportFrame,E=h.fileNameStyle,I=h.alwaysShowDownloadDialog,b=(0,u.h)(),w=b.frames,A=b.palettes,T=b.images,_=(0,o.A)().setDownloadHashes,P=(0,i.useMemo)(function(){return(0,c.j)(g,v,m,A,E)},[v,g,E,m,A]),x=(0,i.useCallback)(function(e){if(1===e.length){var t=T.find(function(t){return t.hash===e[0]});if(!t)throw Error("image not found");var r=(0,f.s)(A,t).palette;if(!r)throw Error("imagePalette not found");return(0,d.A)({image:t,palette:r,fileNameStyle:E})}return(0,d.A)({altTitle:"gameboy-printer-gallery",useCurrentDate:!0,fileNameStyle:E})},[E,T,A]),y=(0,i.useCallback)((e=(0,n._)(function(e){var t,r,n,i,o,u;return(0,a.YH)(this,function(a){switch(a.label){case 0:if(!(t=T.find(function(t){return t.hash===e})))throw Error("image not found");return r=w.find(function(e){return e.id===t.frame}),[4,(0,p.T)(T,w)(t.hash)];case 1:if(!(n=a.sent()))throw Error("no tiles");if(!r)return[3,3];return[4,(0,s.mZ)(null==r?void 0:r.hash)];case 2:return o=a.sent(),[3,4];case 3:o=null,a.label=4;case 4:return u=(i=o)?i.upper.length/20:2,[2,P(t,n,u)]}})}),function(t){return e.apply(this,arguments)}),[w,T,P]),S=(0,i.useCallback)((t=(0,n._)(function(e){var t,r;return(0,a.YH)(this,function(n){switch(n.label){case 0:return t=x(e),[4,Promise.all(e.map(y))];case 1:return r=n.sent(),(0,c.R)(t)(r.flat()),[2]}})}),function(e){return t.apply(this,arguments)}),[x,y]),k=(0,i.useCallback)((r=(0,n._)(function(e){return(0,a.YH)(this,function(t){switch(t.label){case 0:if(!I)return[3,1];return _(e),[3,3];case 1:return[4,S(e)];case 2:t.sent(),t.label=3;case 3:return[2]}})}),function(e){return r.apply(this,arguments)}),[I,S,_]);return{downloadImages:S,setDownloadImages:k}}},66564:(e,t,r)=>{r.d(t,{A:()=>o});var n=r(95155),a=r(54581),i=r(14426);r(12115);let o=function(){return(0,n.jsx)(a.A,{sx:{width:"100%",paddingTop:"90%",height:0,display:"block",background:"transparent",position:"relative"},children:(0,n.jsx)(a.A,{sx:{position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)"},children:(0,n.jsx)(i.A,{color:"primary",size:40})})})}},75097:(e,t,r)=>{r.d(t,{No:()=>a,Q3:()=>i,RQ:()=>o,x6:()=>n});var n=function(e){return e.DELETE="delete",e.ANIMATE="animate",e.DOWNLOAD="download",e.EDIT="edit",e.RGB="rgb",e}({}),a=function(e){return e.LOCK_FRAME="lockFrame",e.FRAME="frame",e.PALETTE="palette",e.TITLE="title",e.TAGS="tags",e.CREATED="created",e.ROTATION="rotation",e}({}),i=function(e){return e.INVERT_PALETTE="invertPalette",e.FRAME_PALETTE="framePalette",e.INVERT_FRAME_PALETTE="invertFramePalette",e}({}),o=["lockFrame","frame","title","tags","created","rotation","palette","invertPalette","framePalette","invertFramePalette"]},80360:(e,t,r)=>{r.d(t,{z:()=>n});var n=r(51368).A},85812:(e,t,r)=>{r.d(t,{N:()=>o});var n=r(17652),a=r(12115),i=r(52166),o=function(){var e=(0,i.A)().hideDates,t=(0,n.kc)(),r=(0,a.useCallback)(function(e){var r=new Date(e);return"string"==typeof e&&isNaN(r.getTime())&&(r=new Date(e.replace(/(\d{4}-\d{2}-\d{2}) (\d{2}:\d{2}:\d{2}):(\d{3})/,"$1T$2.$3"))),t.dateTime(r,"short")},[t]);return{formatterGallery:(0,a.useCallback)(function(t){return e||!t?null:r(t)},[r,e]),formatter:r}}},93370:(e,t,r)=>{r.d(t,{A:()=>f});var n=r(97004),a=r(693),i=r(78538),o=r(39249),u=r(95155),l=r(54581),s=r(15905),c=r(12115),d=r(77683);let f=function(e){var t=e.palette,r=e.tiles,f=e.imageStartLine,p=e.lockFrame,h=e.invertPalette,g=e.framePalette,v=e.invertFramePalette,m=e.asThumb,E=void 0!==m&&m,I=e.rotation,b=void 0===I?s.pL.DEG_0:I,w=!(t instanceof Array),A=(0,i._)((0,c.useState)(null),2),T=A[0],_=A[1],P=(0,i._)((0,c.useState)(""),2),x=P[0],y=P[1];(0,c.useEffect)(function(){if(t&&r){var e=setTimeout((0,n._)(function(){var e;return(0,o.YH)(this,function(n){switch(n.label){case 0:if(n.trys.push([0,5,,6]),!w)return[3,2];return[4,(0,s.uL)({tiles:r,palette:t,lockFrame:p||!1,rotation:b})];case 1:return _.apply(void 0,[n.sent()]),[3,4];case 2:if(!(null==r?void 0:r.length))return[3,4];return[4,(0,s.qO)((0,a._)({tiles:r,imageStartLine:f,rotation:b},(0,d.C)({imagePalette:t,framePalette:g,invertPalette:h,invertFramePalette:v})))];case 3:_.apply(void 0,[n.sent()]),n.label=4;case 4:return y(""),[3,6];case 5:return(e=n.sent())instanceof Error&&(console.error(e),y(e.message)),[3,6];case 6:return[2]}})}),1);return function(){clearTimeout(e)}}},[r,t,p,h,b,w,f,g,v]);var S=(0,c.useMemo)(function(){var e=b===s.pL.DEG_90||b===s.pL.DEG_270,t=(w?(0,s.EK)(r):r.length)<=360,n=e&&t;return{display:"block",imageRendering:E?"auto":"pixelated",margin:n?"0 5%":0,width:n?"90%":"100%",maxWidth:"100%",maxHeight:"100%",objectFit:"contain"}},[E,w,b,r]);return(0,u.jsx)(l.A,{className:"gameboy-image",sx:{display:"flex",width:"100%",height:"100%"},children:!x&&T&&(0,u.jsx)(l.A,{component:"img",width:160,src:T,sx:S,alt:""})})}},98250:(e,t,r)=>{r.d(t,{h:()=>o});var n=r(78538),a=r(12115),i=function(){var e;return{width:window.innerWidth,height:window.innerHeight,ddpx:window.devicePixelRatio<=2?window.devicePixelRatio:window.devicePixelRatio/2,layoutWidth:(e=window.innerWidth)>1220?1155:e>1025?960:e>830?765:e>635?570:e>440?375:e-40}},o=function(){var e=(0,n._)((0,a.useState)(i()),2),t=e[0],r=e[1];return(0,a.useEffect)(function(){var e=function(){r(i())};return window.addEventListener("resize",e),function(){return window.removeEventListener("resize",e)}},[r]),t}}}]);