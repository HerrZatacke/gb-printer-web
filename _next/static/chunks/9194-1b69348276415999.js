"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[9194],{1470:(e,n,t)=>{t.d(n,{t:()=>r,z:()=>u});var r="ROOT",u=function(e){return{id:r,slug:"",created:"",title:"Home",coverImage:"",images:[],groups:[],tags:[],allImages:e}}},5847:(e,n,t)=>{t.d(n,{T:()=>i,p:()=>s});var r=t(97004),u=t(39249),a=t(55364),o=t(72623),i=function(e,n,t){var i,s=(i=(0,r._)(function(r,i,c,l){var f,d,g,p,h,v,E,m,I,T,R,_;return(0,u.YH)(this,function(u){switch(u.label){case 0:if(d=e.find(function(e){return r===e.hash}),g=("string"==typeof c?c:null==d?void 0:d.frame)||void 0,p=null==(f=n.find(function(e){return e.id===g}))?void 0:f.hash,l||!(!d||!(0,a.pl)(d)))return[3,2];return[4,(0,o.Hh)(r,p,i,t)];case 1:return[2,u.sent()||[]];case 2:if(!(h=l||d.hashes).r)return[3,4];return[4,s(h.r,i,g)];case 3:return E=u.sent(),[3,5];case 4:E=[],u.label=5;case 5:if(v=E,!h.g)return[3,7];return[4,s(h.g,i,g)];case 6:return I=u.sent(),[3,8];case 7:I=[],u.label=8;case 8:if(m=I,!h.b)return[3,10];return[4,s(h.b,i,g)];case 9:return R=u.sent(),[3,11];case 10:R=[],u.label=11;case 11:if(T=R,!h.n)return[3,13];return[4,s(h.n,i,g)];case 12:return _=u.sent(),[3,14];case 13:_=[],u.label=14;case 14:return[2,{r:v,g:m,b:T,n:_}]}})}),function(e,n,t,r){return i.apply(this,arguments)});return s},s=function(e,n){var t,a=i(e,n);return t=(0,r._)(function(e){var n,t,r,o,i;return(0,u.YH)(this,function(u){switch(u.label){case 0:return[4,a(e,!0,"")];case 1:if(n=u.sent())return[2,(null==n?void 0:n.length)||(null==(t=n.r)?void 0:t.length)||(null==(r=n.g)?void 0:r.length)||(null==(o=n.b)?void 0:o.length)||(null==(i=n.n)?void 0:i.length)||0];return[2,0]}})}),function(e){return t.apply(this,arguments)}}},6456:(e,n,t)=>{t.d(n,{PM:()=>s,YZ:()=>o,lt:()=>i});var r=t(693),u=t(60376),a=t(78538),o=function(e,n){return(0,u._)((0,r._)({},e),{sortIndex:n})},i=function(e){return(0,u._)((0,r._)({},e),{sortIndex:void 0})},s=function(e){return function(n,t){if(!e)return 0;var r=(0,a._)(e.split("_"),2),u=r[0],o=r[1],i=n[u],s=t[u],c="desc"===o?-1:1;return i&&s?i>s?c:i<s?-c:n.sortIndex<t.sortIndex?c:-c:0}}},7119:(e,n,t)=>{t.d(n,{NavigationToolsProvider:()=>p,g:()=>h});var r=t(95155),u=t(12115),a=t(78538),o=t(35695),i=t(95939),s=t(71620),c=t(52166),l=t(1470),f=t(66785),d=function(){var e=(0,o.useRouter)(),n=(0,i.Z)(),t=n.paths,r=n.root,d=n.isWorking,g=n.path,p=n.getUrl,h=(0,a._)((0,u.useState)(!1),2),v=h[0],E=h[1],m=(0,s.A)(),I=m.sortBy,T=m.filtersActiveTags,R=m.recentImports,_=(0,c.A)().pageSize,w=(0,u.useCallback)(function(e){return(0,f.S)(e,{filtersActiveTags:T,sortBy:I,recentImports:R})},[T,R,I]),L=(0,u.useCallback)(function(e,n){return Math.floor(w(n).findIndex(function(n){return n.hash===e})/_)},[w,_]),F=(0,u.useCallback)(function(e,n){var r;return e===l.t?p({pageIndex:n,group:""}):p({pageIndex:n,group:(null==(r=t.find(function(n){return e===n.group.id}))?void 0:r.absolutePath)||""})},[p,t]),b=(0,u.useMemo)(function(){var e;return(null==(e=t.find(function(e){return e.absolutePath===g}))?void 0:e.group)||r},[g,t,r]),x=(0,u.useCallback)(function(e){var n=t.find(function(n){return n.group.images.map(function(e){return e.hash}).includes(e)}),u=(null==n?void 0:n.absolutePath)||"";return p({pageIndex:L(e,(null==n?void 0:n.group)||r),group:u})},[L,p,t,r]),y=(0,u.useCallback)(function(e,n){d||window.setTimeout(function(){E({group:{id:e,pageIndex:n}})},1)},[d]),X=(0,u.useCallback)(function(e){window.setTimeout(function(){E({imageHash:e})},1)},[]);return(0,u.useEffect)(function(){if(!d&&v){var n=window.setTimeout(function(){v.imageHash?(e.push(x(v.imageHash)),E(!1)):v.group&&(e.push(F(v.group.id,v.group.pageIndex)),E(!1))},1);return function(){window.clearTimeout(n)}}},[F,x,d,e,v]),{currentGroup:b,getGroupPath:F,getImagePageIndexInGroup:L,navigateToGroup:y,navigateToImage:X}},g=(0,u.createContext)(null);function p(e){var n=e.children,t=d();return(0,r.jsx)(g.Provider,{value:t,children:n})}var h=function(){var e=(0,u.useContext)(g);if(!e)throw Error("useNavigationToolsContext must be used within an NavigationToolsProvider");return e}},12360:(e,n,t)=>{t.d(n,{A:()=>u});var r=t(19864);let u=function(e){return function(n){var t=e.filter(function(e){return![r.X3.FILTER_MONOCHROME,r.X3.FILTER_NEW,r.X3.FILTER_RGB,r.X3.FILTER_UNTAGGED,r.X3.FILTER_RECENT,r.X3.FILTER_FAVOURITE,r.X3.FILTER_COMMENTS,r.X3.FILTER_USERNAME].includes(e)});return!t.length||!!n.tags.find(function(e){return t.includes(e)})}}},29032:(e,n,t)=>{t.d(n,{j:()=>o});var r=t(78538),u=t(35695),a=t(12115),o=function(){var e=(0,u.usePathname)(),n=(0,r._)((0,a.useState)(window.location.search),2),t=n[0],o=n[1],i=(0,a.useMemo)(function(){return new URLSearchParams(t)},[t]);(0,a.useEffect)(function(){var e=function(){window.setTimeout(function(){o(function(e){return window.location.search!==e?window.location.search:e})},1)};e(),window.addEventListener("popstate",e);var n=history.pushState,t=history.replaceState;return history.pushState=function(){for(var t=arguments.length,r=Array(t),u=0;u<t;u++)r[u]=arguments[u];n.apply(this,r),e()},history.replaceState=function(){for(var n=arguments.length,r=Array(n),u=0;u<n;u++)r[u]=arguments[u];t.apply(this,r),e()},function(){window.removeEventListener("popstate",e),history.pushState=n,history.replaceState=t}},[i,e]);var s=(0,a.useMemo)(function(){return i.toString()},[i]);return{fullPath:(0,a.useMemo)(function(){return s?"".concat(e,"?").concat(s):e},[e,s]),pathname:e,query:s,searchParams:i}}},32134:(e,n,t)=>{t.d(n,{GalleryTreeContext:()=>p,K:()=>g});var r=t(78538),u=t(95155),a=t(7062),o=t(12115),i=t(29032),s=t(46498),c=t(11760),l=t(52166),f=t(1470),d="/gallery/",g=(0,o.createContext)({root:(0,f.z)([]),view:(0,f.z)([]),images:[],covers:[],paths:[],pathsOptions:[],isWorking:!1,pageIndex:0,path:"",lastGalleryLink:"",getUrl:function(){return"".concat(d,"?page=1")}});function p(e){var n=e.children,p=(0,c.h)(),h=p.imageGroups,v=p.images,E=p.setImageGroups,m=(0,r._)((0,o.useState)(!0),2),I=m[0],T=m[1],R=(0,r._)((0,o.useState)((0,f.z)(v)),2),_=R[0],w=R[1],L=(0,r._)((0,o.useState)([]),2),F=L[0],b=L[1],x=(0,r._)((0,o.useState)([]),2),y=x[0],X=x[1],C=(0,i.j)(),M=C.searchParams,N=C.pathname,S=(0,r._)((0,o.useState)(""),2),A=S[0],O=S[1],G=(0,l.A)().enableDebug,k=(0,s.A)().setError;(0,o.useEffect)(function(){var e=new Worker(t.tu(new URL(t.p+t.u(8274),t.b)),{type:void 0}),n=(0,a.LV)(e),r=[],u=(0,a.BX)(function(e){r.push(e)});return T(!0),n.calculate({imageGroups:h,stateImages:v},u).then(function(e){if(w(e.root),b(e.paths),X(e.pathsOptions),r.length&&k(Error(r.join("\n"))),h.length>e.paths.length){var n=e.paths.map(function(e){return e.group.id});E(h.filter(function(e){var t=e.id;return n.includes(t)}))}G&&console.info("worker ran for ".concat(e.duration.toFixed(2),"ms"))}).catch(function(e){console.error(e),k(e)}).finally(function(){T(!1),e.terminate()}),function(){e.terminate(),T(!1)}},[G,h,k,E,v]);var P=(0,o.useMemo)(function(){var e;return parseInt(null!=(e=M.get("page"))?e:"1",10)-1},[M]),U=(0,o.useMemo)(function(){return M.get("group")||""},[M]),H=(0,o.useCallback)(function(e){var n="number"==typeof e.pageIndex?e.pageIndex:P,t="string"==typeof e.group?e.group:U,r="".concat(d,"?page=").concat(n+1);return t.length&&(r="".concat(r,"&group=").concat(encodeURIComponent(t))),r},[P,U]);(0,o.useEffect)(function(){N===d&&O(H({pageIndex:P,group:U}))},[U,P,N,H]);var B=(0,o.useMemo)(function(){var e,n=(null==(e=F.find(function(e){return e.absolutePath===U}))?void 0:e.group)||_,t=n.groups.map(function(e){return e.coverImage}),r=n.images.filter(function(e){return!t.includes(e.hash)});return{view:n,covers:t,paths:F,images:r,pathsOptions:y,root:_,isWorking:I,pageIndex:P,path:U,lastGalleryLink:A,getUrl:H}},[F,_,y,I,P,U,A,H]);return(0,u.jsx)(g.Provider,{value:B,children:n})}},66785:(e,n,t)=>{t.d(n,{S:()=>i});var r=t(87025),u=t(6456),a=t(77840),o=t(12360),i=function(e,n){var t=e.images,i=e.groups,s=n.filtersActiveTags,c=n.sortBy,l=n.recentImports;return(0,r._)(t).map(u.YZ).sort((0,u.PM)(c)).map(u.lt).filter((0,a.A)(s,l,i)).filter((0,o.A)(s))}},77840:(e,n,t)=>{t.d(n,{A:()=>s});var r=t(87025),u=t(30832),a=t.n(u),o=t(19864),i=t(55364);let s=function(e,n,t){var u=function(t){var u,s,c=e.reduce(function(e,n){return[o.X3.FILTER_MONOCHROME,o.X3.FILTER_NEW,o.X3.FILTER_RGB,o.X3.FILTER_UNTAGGED,o.X3.FILTER_RECENT,o.X3.FILTER_FAVOURITE,o.X3.FILTER_COMMENTS,o.X3.FILTER_USERNAME].includes(n)?(0,r._)(e).concat([n]):e},[]);if(c.length&&(c.includes(o.X3.FILTER_UNTAGGED)&&0!==t.tags.length||c.includes(o.X3.FILTER_NEW)&&a()(new Date(t.created)).unix()<=a()().subtract(1,"day").unix()||c.includes(o.X3.FILTER_RECENT)&&!n.map(function(e){return e.hash}).includes(t.hash)||c.includes(o.X3.FILTER_RGB)&&!(0,i.pl)(t)||c.includes(o.X3.FILTER_MONOCHROME)&&(0,i.pl)(t)||c.includes(o.X3.FILTER_FAVOURITE)&&!t.tags.includes(o.X3.FILTER_FAVOURITE)||c.includes(o.X3.FILTER_COMMENTS)&&!(null==(u=t.meta)?void 0:u.comment)||c.includes(o.X3.FILTER_USERNAME)&&!(null==(s=t.meta)?void 0:s.userName)))return!1;return!0};return function(e){if(u(e))return!0;var n=t.find(function(n){return n.coverImage===e.hash})||null;return!!n&&n.allImages.some(u)}}},95939:(e,n,t)=>{t.d(n,{Z:()=>a});var r=t(12115),u=t(32134),a=function(){return(0,r.useContext)(u.K)}}}]);