"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[771],{1108:(e,t,r)=>{r.d(t,{A:()=>u});var n=r(19357),a=function(e){e.fillStyle="#000",e.fillRect(0,0,e.canvas.width,e.canvas.height),e.filter="grayscale(1)",e.imageSmoothingEnabled=!1};let u=function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return new Promise(function(r,u){var o=document.createElement("img"),i=document.createElement("canvas");i.width=160;var s=i.getContext("2d");if(!s)return void u(Error("No canvas context"));o.onerror=u,o.onload=function(){var n,u=o.naturalWidth,c=o.naturalHeight;.875==c/u?(i.height=144,n=o.naturalWidth/128,t||a(s),s.drawImage(o,0,0,u,c,16,16,i.width-32,i.height-32)):(i.height=i.width*c/u,n=u/160,t||a(s),s.drawImage(o,0,0,u,c,0,0,i.width,i.height)),r({imageData:s.getImageData(0,0,i.width,i.height),scaleFactor:n,width:i.width,height:i.height,fileName:e.name,lastModified:e.lastModified||null})},(0,n.A)(e,n.Z.DATA_URL).then(function(e){o.src=e})})}},7766:(e,t,r)=>{r.d(t,{A:()=>g,E:()=>l,TrackingProvider:()=>h});var n=r(22043),a=r(95155),u=r(68321),o=r(12115),i=r(10022),s=r(80068),c="gbp-z-web-analytics-consent",l=function(e){return e.UNKNOWN="unknown",e.ACCEPTED="accepted",e.DENIED="denied",e}({}),f=(0,o.createContext)({consentState:"unknown",setConsent:function(){},sendEvent:function(){},trackingAvailable:!1,showPopup:!1}),m="https://cloud.umami.is/script.js",d="8d38dd07-9d1e-49ac-bce1-b3d61782288f",p=!!(m&&d);function h(e){var t=e.children,r=(0,n._)((0,o.useState)("denied"),2),l=r[0],h=r[1];(0,o.useEffect)(function(){p&&h(localStorage.getItem(c)||"unknown")},[]);var g=(0,o.useCallback)(function(e){localStorage.setItem(c,String(e)),h(e)},[]),v=(0,o.useMemo)(function(){return"unknown"===l},[l]),b=(0,o.useRef)({}),w=(0,o.useCallback)(function(e,t){p&&"accepted"===l&&window.umami&&(window.clearTimeout(b.current[e]),b.current[e]=window.setTimeout(function(){window.umami.track(e,t)},1e3))},[l]),y=(0,i.Vs)(),E=(0,i.I0)().errors;return(0,o.useEffect)(function(){var e=y.images,t=y.imageGroups,r=y.frames,n=y.frameGroups,a=y.palettes,u=y.plugins;w("global-stats",{images:(0,s.y)(e.length),imageGroups:(0,s.y)(t.length),frames:(0,s.y)(r.length),frameGroups:(0,s.y)(n.length),palettes:(0,s.y)(a.length),plugins:(0,s.y)(u.length)})},[y,w]),(0,o.useEffect)(function(){if(E.length){var e=E[E.length-1].error;w("error",{message:e.message,stack:e.stack||""})}},[E,w]),(0,a.jsxs)(f.Provider,{value:{consentState:l,setConsent:g,trackingAvailable:p,showPopup:v,sendEvent:w},children:[t,p&&m&&d&&"accepted"===l&&(0,a.jsx)(u.default,{src:m,"data-website-id":d,strategy:"afterInteractive"})]})}let g=function(){return(0,o.useContext)(f)}},11081:(e,t,r)=>{r.d(t,{V:()=>n});var n=function(e){return e.CHECKBOX="checkbox",e.SELECT="select",e.TEXT="text",e.NUMBER="number",e.INFO="info",e.IMAGE="image",e.META="meta",e}({})},14217:(e,t,r)=>{r.d(t,{z:()=>n});var n=r(74879).A},19357:(e,t,r)=>{r.d(t,{A:()=>u,Z:()=>a});var n=r(15376).Buffer,a=function(e){return e.UINT8_ARRAY="uint8array",e.TEXT="text",e.DATA_URL="dataURL",e}({});let u=function(e,t){return new Promise(function(r,a){var u=new FileReader;switch(u.onload=function(e){var u=e.target;if(null==u?void 0:u.result)return"uint8array"===t?void r(n.from(u.result)):void r(u.result);a(Error("Filereader has no result"))},u.onerror=function(e){a(e)},t){case"uint8array":u.readAsArrayBuffer(e);break;case"text":u.readAsText(e);break;case"dataURL":u.readAsDataURL(e);break;default:a(Error('readAs param missing or unknown type "'.concat(t,'"')))}})}},30771:(e,t,r)=>{r.d(t,{A:()=>f});var n=r(61975),a=r(71450),u=r(12115),o=r(7766),i=r(10022),s=r(93657),c=r(60139),l=r(83231);let f=function(){var e=i.I0.getState().setError,t=(0,l.W)().jsonImport,r=(0,o.A)().sendEvent,f=(0,u.useMemo)(function(){return(0,c.A)(t)},[t]);return{handleFileImport:(0,u.useCallback)(function(t,u){return(0,n._)(function(){var n;return(0,a.YH)(this,function(a){switch(a.label){case 0:return a.trys.push([0,2,,3]),[4,f(t,u)];case 1:return n=a.sent(),r("importQueue",(0,s.c)(n,"fileImport")),[2,n];case 2:return e(a.sent()),[2,[]];case 3:return[2]}})})()},[f,r,e])}}},60139:(e,t,r)=>{r.d(t,{A:()=>eb});var n=r(61975),a=r(71450),u=function(e){return e.BITMAP="bitmap",e.PLAIN_TEXT="plainText",e.JSON="json",e.SAV="sav",e.PICO_REDUCED="picoReduced",e.WIFI_BIN="wifiBin",e}({}),o=r(19357),i=r(10022),s=r(14217),c=r(75036),l=r(80904),f=r(1108),m=function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return(0,n._)(function(){var r;return(0,a.YH)(this,function(n){switch(n.label){case 0:return[4,(0,f.A)(e)];case 1:return r=n.sent(),t?(0,l._)({bitmapQueue:[r],dither:!1,contrastBaseValues:[0,85,170,255],importQueueAdd:i.lJ.getState().importQueueAdd}):i.lJ.getState().bitmapQueueAdd([r]),[2,{imageCount:1,importMethod:u.BITMAP}]}})})()},d=r(18786);let p=function(e){var t=e.split("\n").map(function(e){return e.trim()}).filter(function(e){return e.length&&0!==e.indexOf("//")&&0!==e.indexOf("/*")}).map(function(e){return e.split(" ")}).flat().map(function(e){return parseInt(e,16)}).filter(function(e){return!isNaN(e)});return(0,d.gV)(t)};var h=r(45377),g=r(15719),v=function(e){return e.NEW_LINES="NEW_LINES",e.IMAGE_COMPLETE="IMAGE_COMPLETE",e.PARSE_ERROR="PARSE_ERROR",e}({});let b=function(e){if("#"===e.charAt(0)||"/"===e.charAt(0))return null;if("!"===e.charAt(0)||"{"===e.charAt(0)){try{var t=JSON.parse(e.slice(e.indexOf("{")).trim()),r=t.command,n=t.margin_lower;if("PRNT"===r&&n>0)return{type:v.IMAGE_COMPLETE}}catch(e){return{type:v.PARSE_ERROR,payload:"Error while trying to parse JSON data command block"}}return null}var a=e.replace(/[^0-9A-F]/ig,"");return a.length?{type:v.NEW_LINES,payload:[a]}:null},w=function(e,t){var r="".concat(e,"\n").concat(g.Ys).split("\n").map(b).reduce(function(e,t){switch(null==t?void 0:t.type){case v.NEW_LINES:var r;return(r=e[e.length-1]).push.apply(r,(0,h._)(t.payload)),e;case v.IMAGE_COMPLETE:return(0,h._)(e).concat([[]]);default:return e}},[[]]).filter(function(e){return e.length>0});return r.length||console.warn("File ".concat(t," did not contain images")),r};var y=r(11081),E=r(99861),V=r(81200),A=r(82732),_=r(21860),I=r.n(_),C=r(96132),S=r(6818),M=r(30986),k=r(22043),D={86:"A",87:"B",88:"C",89:"D",90:"E",91:"F",92:"G",93:"H",94:"I",95:"J",96:"K",97:"L",98:"M",99:"N",100:"O",101:"P",102:"Q",103:"R",104:"S",105:"T",106:"U",107:"V",108:"W",109:"X",110:"Y",111:"Z",112:"_",113:"'",114:",",115:".",116:"\xc1",117:"\xc2",118:"\xc0",119:"\xc4",120:"\xc9",121:"\xca",122:"\xc8",123:"\xcb",124:"\xcd",125:"\xcf",126:"\xd3",127:"\xd6",128:"\xda",129:"\xdc",130:"\xd1",131:"-",132:"&",133:"!",134:"?",135:" ",136:"a",137:"b",138:"c",139:"d",140:"e",141:"f",142:"g",143:"h",144:"i",145:"j",146:"k",147:"l",148:"m",149:"n",150:"o",151:"p",152:"q",153:"r",154:"s",155:"t",156:"u",157:"v",158:"w",159:"x",160:"y",161:"z",162:"•",163:"~",164:"\uD83D\uDCF1",165:" ",166:"\xe1",167:"\xe2",168:"\xe0",169:"\xe4",170:"\xe9",171:"\xea",172:"\xe8",173:"\xeb",174:"\xed",175:"\xef",176:"\xf3",177:"\xf6",178:"\xfa",179:"\xfc",180:"\xf1",181:"ḉ",182:"\xdf",183:"\uD83D\uDE04",184:"\uD83D\uDE1F",185:"\uD83D\uDE05",186:"0",187:"1",188:"2",189:"3",190:"4",191:"5",192:"6",193:"7",194:"8",195:"9",196:"/",197:":",198:"~",199:'"',200:"@"},N={1:"あ",2:"い",3:"う",4:"え",5:"お",6:"か",7:"き",8:"く",9:"け",10:"こ",11:"さ",12:"し",13:"す",14:"せ",15:"そ",16:"た",17:"ち",18:"つ",19:"て",20:"と",21:"な",22:"に",23:"ぬ",24:"ね",25:"の",26:"は",27:"ひ",28:"ふ",29:"へ",30:"ほ",31:"ま",32:"み",33:"む",34:"め",35:"も",36:"や",37:"ゆ",38:"よ",39:"、",40:"。",41:"ら",42:"り",43:"る",44:"れ",45:"ろ",46:"わ",47:"を",48:"ん",49:"〜",50:"♥",51:"が",52:"ぎ",53:"ぐ",54:"げ",55:"ご",56:"ざ",57:"じ",58:"ず",59:"ぜ",60:"ぞ",61:"だ",62:"ぢ",63:"づ",64:"で",65:"ど",66:"ば",67:"び",68:"ぶ",69:"べ",70:"ぼ",71:"ぱ",72:"ぴ",73:"ぷ",74:"ぺ",75:"ぽ",76:"っ",77:"ゃ",78:"ゅ",79:"ょ",80:"・",81:"ぁ",82:"ぃ",83:"ぅ",84:"ぇ",85:"ぉ",86:"ア",87:"イ",88:"ウ",89:"エ",90:"オ",91:"カ",92:"キ",93:"ク",94:"ケ",95:"コ",96:"サ",97:"シ",98:"ス",99:"セ",100:"ソ",101:"タ",102:"チ",103:"ツ",104:"テ",105:"ト",106:"ナ",107:"ニ",108:"ヌ",109:"ネ",110:"ノ",111:"ハ",112:"ヒ",113:"フ",114:"ヘ",115:"ホ",116:"マ",117:"ミ",118:"ム",119:"メ",120:"モ",121:"ヤ",122:"ユ",123:"ヨ",124:"!",125:"?",126:"ラ",127:"リ",128:"ル",129:"レ",130:"ロ",131:"ワ",132:"ヲ",133:"ン",134:"ヴ",135:" ",136:"ガ",137:"ギ",138:"グ",139:"ゲ",140:"ゴ",141:"ザ",142:"ジ",143:"ズ",144:"ゼ",145:"ゾ",146:"ダ",147:"ヂ",148:"ヅ",149:"デ",150:"ド",151:"バ",152:"ビ",153:"ブ",154:"ベ",155:"ボ",156:"パ",157:"ピ",158:"プ",159:"ペ",160:"ポ",161:"ッ",162:"ャ",163:"ュ",164:"ョ",165:"ー",166:"ァ",167:"ィ",168:"ゥ",169:"ェ",170:"ォ",171:"A",172:"B",173:"C",174:"D",175:"E",176:"F",177:"G",178:"H",179:"I",180:"J",181:"K",182:"L",183:"M",184:"N",185:"O",186:"P",187:"Q",188:"R",189:"S",190:"T",191:"U",192:"V",193:"W",194:"X",195:"Y",196:"Z",197:"_",198:"'",199:",",200:".",201:"a",202:"b",203:"c",204:"d",205:"e",206:"f",207:"g",208:"h",209:"i",210:"j",211:"k",212:"l",213:"m",214:"n",215:"o",216:"p",217:"q",218:"r",219:"s",220:"t",221:"u",222:"v",223:"w",224:"x",225:"y",226:"z",227:"\uD83D\uDCF1",228:"\uD83D\uDE05",229:"\uD83D\uDE04",230:"_",231:"0",232:"1",233:"2",234:"3",235:"4",236:"5",237:"6",238:"7",239:"8",240:"9",241:"/",242:":",243:"~",244:'"',245:"@"},B="00123456789?????",T=function(e){return e.PHOTO="photo",e.STOCK="stock",e.PXLR="pxlr",e}({}),O={positive:2,negative:0},P={140:0,155:1,170:2,185:3,200:4,"200Dup":16,215:5,"215Dup":17,230:6,"230Dup":18,245:7,"245Dup":19,260:8,"260Dup":20,275:21,290:9,"290Dup":22,305:23,320:10,"320Dup":24,350:11,"350Dup":25,380:12,"380Dup":26,410:13,"410Dup":27,440:28,455:14,470:29,515:15,"515Dup":30,575:31},x={none:0,horizontal:32,vertical:64,"2d":96},H={on:128,off:0},R={"050":0,"075":16,100:32,125:48,200:64,300:80,400:96,500:112},L={on:8,off:0},z={"00v":0,"05v":1,"10v":2,"15v":3,"20v":4,"25v":5,"30v":6,"35v":7},Y={disabled:0,positive:128,negative:64},F={neg992:31,neg960:30,neg928:29,neg896:28,neg864:27,neg832:26,neg800:25,neg768:24,neg736:23,neg704:22,neg672:21,neg640:20,neg608:19,neg576:18,neg544:17,neg512:16,neg480:15,neg448:14,neg416:13,neg384:12,neg352:11,neg320:10,neg288:9,neg256:8,neg224:7,neg192:6,neg160:5,neg128:4,neg096:3,neg064:2,neg032:1,neg000:0,pos000:32,pos032:33,pos064:34,pos096:35,pos128:36,pos160:37,pos192:38,pos224:39,pos256:40,pos288:41,pos320:42,pos352:43,pos384:44,pos416:45,pos448:46,pos480:47,pos512:48,pos544:49,pos576:50,pos608:51,pos640:52,pos672:53,pos704:54,pos736:55,pos768:56,pos800:57,pos832:58,pos864:59,pos896:60,pos928:61,pos960:62,pos992:63},j={setHigh:0,setLow:1,on:0,off:16},U={thumbnailByteCapture:0,thumbnailByteEdgegains:16,thumbnailByteExposureHigh:32,thumbnailByteExposureLow:48,thumbnailByteEdmovolt:198,thumbnailByteVoutzero:214,thumbnailByteDitherset:230,thumbnailByteContrast:246},W={thumbnailByteCapture:200,thumbnailByteEdgegains:201,thumbnailByteExposureHigh:203,thumbnailByteExposureLow:202,thumbnailByteEdmovolt:204,thumbnailByteVoutzero:205,thumbnailByteDitherset:200,thumbnailByteContrast:200},J=function(e,t){var r=.016*e+4.096*t;return r<10?"".concat(r.toFixed(1),"ms"):"".concat(Math.floor(r),"ms")},G=function(e){switch(e){case O.positive:return"positive";case O.negative:return"negative";default:return"unknown"}},X=function(e){switch(e){case H.on:return"on";case H.off:return"off";default:return"unknown"}},Q=function(e){switch(e){case x.none:return"none";case x.horizontal:return"horizontal";case x.vertical:return"vertical";case x["2d"]:return"2d";default:return"unknown"}},Z=function(e){switch(e){case P["140"]:return"14.0";case P["155"]:return"15.5";case P["170"]:return"17.0";case P["185"]:return"18.5";case P["200"]:return"20.0";case P["200Dup"]:return"20.0 (d)";case P["215"]:return"21.5";case P["215Dup"]:return"21.5 (d)";case P["230"]:return"23.0";case P["230Dup"]:return"23.0 (d)";case P["245"]:return"24.5";case P["245Dup"]:return"24.5 (d)";case P["260"]:return"26.0";case P["260Dup"]:return"26.0 (d)";case P["275"]:return"27.5";case P["290"]:return"29.0";case P["290Dup"]:return"29.0 (d)";case P["305"]:return"30.5";case P["320"]:return"32.0";case P["320Dup"]:return"32.0 (d)";case P["350"]:return"35.0";case P["350Dup"]:return"35.0 (d)";case P["380"]:return"38.0";case P["380Dup"]:return"38.0 (d)";case P["410"]:return"41.0";case P["410Dup"]:return"41.0 (d)";case P["440"]:return"44.0";case P["455"]:return"45.5";case P["470"]:return"47.0";case P["515"]:return"51.5";case P["515Dup"]:return"51.5 (d)";case P["575"]:return"57.5";default:return"unknown"}},K=function(e){switch(e){case R["050"]:return"50%";case R["075"]:return"75%";case R["100"]:return"100%";case R["125"]:return"125%";case R["200"]:return"200%";case R["300"]:return"300%";case R["400"]:return"400%";case R["500"]:return"500%";default:return"unknown"}},q=function(e){switch(e){case L.on:return"on";case L.off:return"off";default:return"unknown"}},$=function(e){switch(e){case z["00v"]:return"0.0V";case z["05v"]:return"0.5V";case z["10v"]:return"1.0V";case z["15v"]:return"1.5V";case z["20v"]:return"2.0V";case z["25v"]:return"2.5V";case z["30v"]:return"3.0V";case z["35v"]:return"3.5V";default:return"unknown"}},ee=function(e){switch(e){case Y.disabled:return"none";case Y.positive:return"positive";case Y.negative:return"negative";default:return"unknown"}},et=function(e){switch(e){case F.neg992:return"-0.992mV";case F.neg960:return"-0.960mV";case F.neg928:return"-0.928mV";case F.neg896:return"-0.896mV";case F.neg864:return"-0.864mV";case F.neg832:return"-0.832mV";case F.neg800:return"-0.800mV";case F.neg768:return"-0.768mV";case F.neg736:return"-0.736mV";case F.neg704:return"-0.704mV";case F.neg672:return"-0.672mV";case F.neg640:return"-0.640mV";case F.neg608:return"-0.608mV";case F.neg576:return"-0.576mV";case F.neg544:return"-0.544mV";case F.neg512:return"-0.512mV";case F.neg480:return"-0.480mV";case F.neg448:return"-0.448mV";case F.neg416:return"-0.416mV";case F.neg384:return"-0.384mV";case F.neg352:return"-0.352mV";case F.neg320:return"-0.320mV";case F.neg288:return"-0.288mV";case F.neg256:return"-0.256mV";case F.neg224:return"-0.224mV";case F.neg192:return"-0.192mV";case F.neg160:return"-0.160mV";case F.neg128:return"-0.128mV";case F.neg096:return"-0.096mV";case F.neg064:return"-0.064mV";case F.neg032:return"-0.032mV";case F.neg000:return"-0.000mV";case F.pos000:return" 0.000mV";case F.pos032:return"0.032mV";case F.pos064:return"0.064mV";case F.pos096:return"0.096mV";case F.pos128:return"0.128mV";case F.pos160:return"0.160mV";case F.pos192:return"0.192mV";case F.pos224:return"0.224mV";case F.pos256:return"0.256mV";case F.pos288:return"0.288mV";case F.pos320:return"0.320mV";case F.pos352:return"0.352mV";case F.pos384:return"0.384mV";case F.pos416:return"0.416mV";case F.pos448:return"0.448mV";case F.pos480:return"0.480mV";case F.pos512:return"0.512mV";case F.pos544:return"0.544mV";case F.pos576:return"0.576mV";case F.pos608:return"0.608mV";case F.pos640:return"0.640mV";case F.pos672:return"0.672mV";case F.pos704:return"0.704mV";case F.pos736:return"0.736mV";case F.pos768:return"0.768mV";case F.pos800:return"0.800mV";case F.pos832:return"0.832mV";case F.pos864:return"0.864mV";case F.pos896:return"0.896mV";case F.pos928:return"0.928mV";case F.pos960:return"0.960mV";case F.pos992:return"0.992mV";default:return"unknown"}},er=function(e){var t,r;switch(1&e){case j.setHigh:t="High";break;case j.setLow:t="Low";break;default:t="unknown"}switch(2&e){case j.on:r="On";break;case j.off:r="Off";break;default:r="unknown"}return"".concat(t,"/").concat(r)},en=function(e){var t=[200,201,202,203,204,205,206,207,216,217,218,219,220,221,222,223,232,233,234,235,236,237,238,239,248,249,250,251,252,253,254,255];return t.map(function(t){return e[t]}).filter(function(e){return 0===e}).length===t.length?T.STOCK:t.map(function(t){return e[t]}).filter(function(e){return 255===e}).length===t.length?T.PXLR:T.PHOTO},ea=function(e,t){switch(t){case T.PHOTO:r=W;break;case T.PXLR:r=U;break;default:return null}var r,n=e[r.thumbnailByteExposureHigh],a=e[r.thumbnailByteExposureLow],u=2&e[r.thumbnailByteCapture],o=128&e[r.thumbnailByteEdgegains],i=96&e[r.thumbnailByteEdgegains],s=31&e[r.thumbnailByteEdgegains],c=112&e[r.thumbnailByteEdmovolt],l=8&e[r.thumbnailByteEdmovolt],f=7&e[r.thumbnailByteEdmovolt],m=192&e[r.thumbnailByteVoutzero],d=63&e[r.thumbnailByteVoutzero],p=e[r.thumbnailByteDitherset],h=e[r.thumbnailByteContrast];return t===T.PHOTO?{romType:t,exposure:J(n,a),captureMode:G(u),edgeExclusive:X(o),edgeOperation:Q(i),gain:Z(s),edgeMode:K(c),invertOut:q(l),voltageRef:$(f),zeroPoint:ee(m),vOut:et(d)}:{romType:t,exposure:J(n,a),captureMode:G(u),edgeExclusive:X(o),edgeOperation:Q(i),gain:Z(s),edgeMode:K(c),invertOut:q(l),voltageRef:$(f),zeroPoint:ee(m),vOut:et(d),ditherset:er(p),contrast:h+1}},eu=function(e,t){var r=t?N:D;return(0,h._)(e).map(function(e){return r[e]||" "}).join("").trim()},eo=function(e){switch(28&e){case 4:return"A";case 8:return"B";case 12:return"0";case 16:return"AB";default:return"-"}},ei=function(e){if(!e)return"--";var t=B[e>>4],r=B[15&e];return"".concat(t).concat(r)},es=function(e,t){var r=(0,k._)((0,h._)(e).map(ei),4),n=r[0],a=r[1],u=r[2],o=r[3],i="--"===n&&"--"!==a?"00".concat(a):"--"!==n&&"--"===a?"".concat(n,"00"):"".concat(n).concat(a);return t?"".concat(i,"年").concat(u,"月").concat(o,"日"):"".concat(u,"/").concat(o,"/").concat(i)},ec=function(e,t){var r=(0,h._)(e).map(ei).map(function(e){return"--"===e?"00":e});return"".concat(t?"PC-":"GC-").concat(r.join(""))},el=function(e,t,r){var n=e.subarray(t+3840,t+3843+1),a=e.subarray(t+3844,t+3852+1),u=e[t+3853],o=e.subarray(t+3854,t+3857+1),i=e.subarray(t+3861,t+3887+1),s=!!e[t+3891];return{userId:ec(n,r),birthDate:es(o,r),userName:eu(a,r),gender:1&u?"m":2&u?"f":"-",bloodType:eo(u),comment:eu(i,r),isCopy:s}};let ef=function(e,t,r){var n,a=t%131072,u=Math.floor(t/131072),o=a/4096-2,i=o>=0?e[131072*u+4530+o]+30*u:-1,s=e[t+3924],c=e.slice(t+3584,t+3839+1);if(-1!==i){var l=en(c);n={romType:l},"stock"!==l&&(n=(0,A._)({},n,ea(c,l))),"stock"===l&&(n=(0,A._)({},n,el(e,t,r)))}return{cartIndex:o,albumIndex:i,baseAddress:t,frameNumber:s,meta:n}},em=function(e,t,r){if(!t)return"";var n,a=function(e){return r.find(function(t){return t.id===e})},u=(e+1).toString(10).padStart(2,"0"),o=a("".concat(t).concat(u));if(null==o?void 0:o.hash)return o.hash;if("jp"===t){var i=a("int".concat(u));if(null==i?void 0:i.hash)return i.hash}var s=a("".concat(t,"01"));if(null==s?void 0:s.hash)return s.hash;if("jp"!==t){var c=a("int".concat(u));if(null==c?void 0:c.hash)return c.hash}return(null==(n=a("int01"))?void 0:n.hash)||""};var ed="ff ff ff ff ff ff ff ff ff ff ff ff ff ff ff ff";let ep=function(e,t){var r=[],n="",a=!1;r.push.apply(r,(0,h._)((0,h._)(Array(40)).map(function(){return ed})));for(var u=0;u<3584;u+=1)u%256==0&&r.push.apply(r,(0,h._)((0,h._)([,,]).map(function(){return ed}))),n+=" ".concat(e[t+u].toString(16).padStart(2,"0")),u%16==15&&(r.push(n.trim()),a||"00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00"===n.trim()||n.trim()===ed||(a=!0),n=""),u%256==255&&r.push.apply(r,(0,h._)((0,h._)([,,]).map(function(){return ed})));return r.push.apply(r,(0,h._)((0,h._)(Array(40)).map(function(){return ed}))),a?r:null};var eh=(0,M.A)("albumIndex");let eg=function(e){var t=e.importLastSeen,r=e.savImportOrder,u=e.data,o=e.lastModified,l=e.frames,f=e.fileName,m=e.importDeleted,d=e.forceMagicCheck,p=i.lJ.getState().importQueueAdd;return d&&[4306,4523,4560,4597].some(function(e){return"Magic"!==(0,h._)(u.subarray(e,e+5)).map(function(e){return String.fromCharCode(e)}).join("")})?null:function(e,i){return(0,n._)(function(){var d,h,g,v,b,w,y;return(0,a.YH)(this,function(E){switch(E.label){case 0:return d=Array.from({length:Math.ceil(u.byteLength/4096)},function(e,t){return 4096*t}),1048576===u.byteLength&&(h=u.subarray(308,324),"PHOTO"===new TextDecoder().decode(h.filter(function(e){return 0!==e&&128!==e})).trim()&&(d=d.slice(32))),d=d.filter(function(e){return(e-4096)%131072!=0}),t||(d=d.filter(function(e){return e%131072!=0})),[4,Promise.all(d.map(function(t){return(0,n._)(function(){var r,n,o,s;return(0,a.YH)(this,function(a){switch(a.label){case 0:if(n=(r=ef(u,t,i)).frameNumber,!(o=ep(u,t)))return[3,2];return[4,(0,S.A)(o,em(n,e,l))];case 1:return s=a.sent(),[2,(0,A._)({tiles:s},r)];case 2:return[2,null]}})})()}))];case 1:return g=E.sent().filter(Boolean),v=r===C.K.RAM_INDEX?g:eh(g),b=new(I())(1,1/0),w=0,[4,Promise.all(v.map(function(e){var t=e.albumIndex,r=e.tiles,u=e.meta;return(0,n._)(function(){return(0,a.YH)(this,function(e){return[2,b.add(function(){return(0,n._)(function(){var e,n;return(0,a.YH)(this,function(a){switch(a.label){case 0:switch(t){case -1:e="[last seen]";break;case 255:if(!m)return[2,void 0];e="[deleted]";break;default:w+=1,e=w.toString(10).padStart(2,"0")}return[4,(0,c.cg)(r)];case 1:return n=a.sent().dataHash,[2,{fileName:"function"==typeof f?f({indexText:e,albumIndex:t,displayIndex:w}):"".concat(f," ").concat(e),imageHash:n,tiles:r,lastModified:o,meta:u,tempId:(0,s.z)()}]}})})()})]})})()}))];case 2:return p(y=E.sent().reduce(V.N,[])),[2,y.length]}})})()}},ev=function(e){if(e.blob){var t,r;if(t=new File([e.blob],e.blobName||"blob"),r=e.contentType||"application/unknown",void 0!==e.ok&&!e.ok)throw Error("Invalid file received from printer")}else r=(t=e).type;if(!t.size)throw Error("empty file");return{file:t,contentType:r}},eb=function(e){var t=function(t){return(0,n._)(function(){var r,n,i;return(0,a.YH)(this,function(a){switch(a.label){case 0:return[4,(0,o.A)(t,o.Z.TEXT)];case 1:n=a.sent();try{i=JSON.parse(n)}catch(e){throw Error("Not a valid .json file")}if(!(null==i?void 0:i.state))throw Error("Not a settings .json file");return e(i),[2,{imageCount:(null==(r=i.state.images)?void 0:r.length)||0,importMethod:u.JSON}]}})})()};return function(e){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{fromPrinter:!1},l=r.fromPrinter,f=r.savFrameSet;return(0,n._)(function(){return(0,a.YH)(this,function(r){switch(r.label){case 0:return[4,Promise.all(e.map(function(e){var r,h,g,v,b=ev(e),A=b.file,_=b.contentType;if(_&&_.startsWith("image/"))return m(A,l);if(A.size>0xfffffff)throw Error("File too large");if("text/plain"===_)return(0,n._)(function(){var e,t,r;return(0,a.YH)(this,function(l){switch(l.label){case 0:return e=i.lJ.getState().importQueueAdd,[4,(0,o.A)(A,o.Z.TEXT)];case 1:if(-1===(t=l.sent()).indexOf('{"command"'))return[3,3];return[4,w(t,A.name)];case 2:return r=l.sent(),[3,5];case 3:return[4,p(t)];case 4:r=l.sent(),l.label=5;case 5:return[4,Promise.all(r.map(function(t,u){return(0,n._)(function(){var n,o;return(0,a.YH)(this,function(a){switch(a.label){case 0:return[4,(0,c.cg)(t)];case 1:return n=a.sent().dataHash,o=r.length<2?"":" ".concat((u+1).toString(10).padStart(2,"0")),e([{fileName:"".concat(A.name).concat(o),imageHash:n,tiles:t,lastModified:A.lastModified?A.lastModified+u:void 0,tempId:(0,s.z)()}]),[2,!0]}})})()}))];case 6:return[2,{imageCount:l.sent().filter(Boolean).length,importMethod:u.PLAIN_TEXT}]}})})();if("application/json"===_)return t(A);if(((null==(h=A.name)?void 0:h.toLowerCase().endsWith(".gb"))||(null==(g=A.name)?void 0:g.toLowerCase().endsWith(".gbc"))||(null==(v=A.name)?void 0:v.toLowerCase().endsWith(".sav")))&&(A.size%4096==0||3584===A.size))return r={skipDialogs:131072!==A.size,frameSet:f},(0,n._)(function(){var e,t,s,c,l,f,m,d,p,h,g,v,b,w,_,I,C,S,M;return(0,a.YH)(this,function(k){switch(k.label){case 0:return t=(e=i.M2.getState()).dismissDialog,s=e.setDialog,l=(c=i.Vs.getState()).frames,f=c.frameGroups,d=(m=i.C$.getState()).savFrameTypes,p=m.setSavFrameTypes,[4,(0,o.A)(A,o.Z.UINT8_ARRAY)];case 1:if(h=k.sent(),g=r.skipDialogs||!1,v=r.frameSet||"",w=(b=i.C$.getState()).importLastSeen,_=b.importDeleted,I=b.forceMagicCheck,C=b.savImportOrder,(S=(0,E.E)(l,f).map(function(e){var t=e.id;return{value:t,name:e.name,selected:d===t}})).unshift({value:"",name:"None (Black frame)"}),!(M=eg({importLastSeen:!!g||A.size<=4096||w,savImportOrder:C,data:h,lastModified:A.lastModified,frames:l,fileName:A.name,importDeleted:!!g||_,forceMagicCheck:!g&&I})))throw Error(".sav file seems to be invalid");if(!v)return[3,3];return[4,M(v,"jp"===v)];case 2:case 4:return[2,{imageCount:k.sent(),importMethod:u.SAV}];case 3:if(!g)return[3,5];return[4,M("",!1)];case 5:return[2,new Promise(function(e){s({message:"Importing '".concat(A.name,"'"),questions:function(){return[{type:y.V.CHECKBOX,label:"Import is from a Japanese Cart (PocketCamera)",key:"cartIsJP"},S.length>1?{type:y.V.SELECT,label:"Select frame group to use with this import",key:"chosenFrameset",options:S}:void 0].reduce(V.N,[])},confirm:function(r){return(0,n._)(function(){var n,o;return(0,a.YH)(this,function(a){switch(a.label){case 0:return n=r.chosenFrameset,o=r.cartIsJP,t(0),p(n),[4,M(n||"",!!o)];case 1:return e({imageCount:a.sent(),importMethod:u.SAV}),[2]}})})()},deny:function(){return(0,n._)(function(){return(0,a.YH)(this,function(r){return t(0),e({imageCount:0,importMethod:u.SAV}),[2]})})()}})})]}})})();if("application/pico-printer-binary-log"===_)return(0,n._)(function(){var e,t,r;return(0,a.YH)(this,function(l){switch(l.label){case 0:return e=i.lJ.getState().importQueueAdd,[4,(0,o.A)(A,o.Z.UINT8_ARRAY)];case 1:return t=l.sent(),[4,(0,d.Eh)(t)];case 2:return[4,Promise.all((r=l.sent()).map(function(t,u){return(0,n._)(function(){var n,o;return(0,a.YH)(this,function(a){switch(a.label){case 0:return[4,(0,c.cg)(t)];case 1:return n=a.sent().dataHash,o=r.length<2?"":" (".concat(u+1,")"),e([{fileName:"".concat(A.name).concat(o),imageHash:n,tiles:t,lastModified:A.lastModified?A.lastModified+u:void 0,tempId:(0,s.z)()}]),[2,!0]}})})()}))];case 3:return[2,{imageCount:l.sent().filter(Boolean).length,importMethod:u.PICO_REDUCED}]}})})();if(_.startsWith("application/"))return(0,n._)(function(){var e,t,r,n,l,f,m;return(0,a.YH)(this,function(a){switch(a.label){case 0:return e=i.lJ.getState().importQueueAdd,[4,(0,o.A)(A,o.Z.UINT8_ARRAY)];case 1:var d;if(71!==(d=t=a.sent())[0]||66!==d[1]||45!==d[2]||66!==d[3]||73!==d[4]||78!==d[5]||48!==d[6]||49!==d[7])throw Error('Not a valid .bin file - is it missing the "GB-BIN01" header?');for(r=[],n=[],l=8;l<t.length;l+=1)f=t[l],n.push(f.toString(16).padStart(2,"0").toUpperCase()),16===n.length&&(r.push(n.join(" ")),n=[]);if(n.length){for(;n.length<16;)n.push("FF");r.push(n.join(" "))}return[4,(0,c.cg)(r)];case 2:return m=a.sent().dataHash,e([{fileName:A.name,imageHash:m,tiles:r,lastModified:A.lastModified,tempId:(0,s.z)()}]),[2,{imageCount:1,importMethod:u.WIFI_BIN}]}})})();throw Error("Not a dump")}))];case 1:return[2,r.sent()]}})})()}}},80068:(e,t,r)=>{r.d(t,{y:()=>n});var n=function(e){return Math.pow(2,Math.ceil(Math.log2(Math.abs(e))))}},80904:(e,t,r)=>{r.d(t,{_:()=>l});var n=r(61975),a=r(71450),u=r(90148),o=r(14217),i=r(75036),s=[0,256,1,257],c=function(e){for(var t=[],r=0;r<8;r+=1){for(var n=0,a=0;a<8;a+=1)n+=s[e[8*r+a]]<<7-a;t.push((n>>8).toString(16).padStart(2,"0"),(255&n).toString(16).padStart(2,"0"))}return t.join(" ").toUpperCase()},l=function(e){var t=e.bitmapQueue,r=e.dither,s=e.contrastBaseValues,l=e.importQueueAdd;t.forEach(function(e){var t=e.imageData,f=e.height,m=e.fileName,d=e.lastModified;return(0,n._)(function(){var e,n,p,h;return(0,a.YH)(this,function(a){switch(a.label){case 0:return e=Array.from((0,u.$)({imageData:t,contrastBaseValues:s,dither:r,colors:[{r:0,g:0,b:0},{r:1,g:0,b:0},{r:2,g:0,b:0},{r:3,g:0,b:0}]}).data).filter(function(e,t){return!(t%4)}),n=20*Math.ceil(f/8),p=function(t){var r=Math.floor(t/20),n=t%20*8,a=8*r;return Array(8).fill(null).map(function(t,r){return e.slice(n+(a+r)*160).slice(0,8)}).flat(1)},h=Array(n).fill(null).map(function(e,t){return p(t)}).map(c),[4,(0,i.cg)(h)];case 1:return l([{fileName:m,imageHash:a.sent().dataHash,tiles:h,lastModified:d,tempId:(0,o.z)()}]),[2]}})})()})}},90148:(e,t,r)=>{r.d(t,{q:()=>l,$:()=>c});let n=function(e,t){var r=(t-e)/16;return Array(16).fill(null).map(function(t,n){return Math.floor(e+r*n)})},a=function(e){var t="number"==typeof e[0]?e[0]:0,r="number"==typeof e[1]?e[1]:85,a="number"==typeof e[2]?e[2]:170,u="number"==typeof e[3]?e[3]:255;return[n(t,r),n(r,a),n(a,u)]},u=function(e){for(var t=e.baseValues,r=e.orderPatterns,n=[],a=0;a<4;a+=1){var u=[];n.push(u);for(var o=0;o<4;o+=1){var i=[];u.push(i);for(var s=0;s<3;s+=1)i.push(t[s][r[s][4*a+o]])}}return n};var o=[0,12,3,15,8,4,11,7,2,14,1,13,10,6,9,5],i=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],s=0,c=function(e){for(var t=e.imageData,r=e.contrastBaseValues,n=e.dither,c=e.colors,l=new ImageData(t.width,t.height),f=u({baseValues:a(r),orderPatterns:[n?o:i,n?o:i,n?o:i]}),m=t.width,d=t.data,p=0;p<d.length;p+=4){var h=s%m%4,g=Math.ceil(s/m)%4,v=d[p],b=void 0,w=f[h][g];b=v<=w[0]?c[3]:v<=w[1]?c[2]:v<=w[2]?c[1]:c[0],l.data[p]=b.r,l.data[p+1]=b.g,l.data[p+2]=b.b,l.data[p+3]=255,s+=1}return l},l=function(e){var t=e.targetCanvas,r=e.originalCanvas,n=e.imageData,a=e.palette,u=e.dither,o=e.contrastBaseValues,i=a.map(function(e){return{r:parseInt(e.slice(1,3),16),g:parseInt(e.slice(3,5),16),b:parseInt(e.slice(5,7),16)}}),s=t.getContext("2d"),l=r.getContext("2d");if(!s||!l)return void console.error("canvas context is missing");s.putImageData(c({imageData:n,contrastBaseValues:o,dither:u,colors:i}),0,0),l.putImageData(n,0,0)}},93657:(e,t,r)=>{r.d(t,{c:()=>o});var n=r(82732),a=r(45849),u=r(80068),o=function(e,t){var r={},o=!0,i=!1,s=void 0;try{for(var c,l=e[Symbol.iterator]();!(o=(c=l.next()).done);o=!0){var f,m=c.value,d=m.importMethod,p=m.imageCount;r[d]=(null!=(f=r[d])?f:0)+(0,u.y)(p)}}catch(e){i=!0,s=e}finally{try{o||null==l.return||l.return()}finally{if(i)throw s}}return(0,a._)((0,n._)({},r),{trigger:t})}}}]);