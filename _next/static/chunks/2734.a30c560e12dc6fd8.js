"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[2734],{2734:(t,r,n)=>{n.r(r),n.d(r,{default:()=>w});var e=n(95155),s=n(9665),i=n(53267),o=n(7642),u=n(31960),a=n(7068),l=n(6874),c=n.n(l),g=n(35695),h=n(12115),d=n(97004),f=n(78538),p=n(39249),m=n(84684),x=n(6617),v=n(29032),y=n(46498),_=n(11760),P=["https://herrzatacke.github.io","https://localhost:5000","https://127.0.01:5000","http://localhost:5000","http://127.0.01:5000"],b=function(){var t=(0,v.j)().searchParams.get("pluginUrl")||"",r=(0,m.vx)(t),n=(0,f._)((0,h.useState)(!1),2),e=n[0],s=n[1],i=(0,_.h)().plugins,o=(0,y.A)().setError,u=(0,x.h)().validateAndAddPlugin,a=P.some(function(t){var n=(0,m.vx)(t);return n.protocol===r.protocol&&n.host===r.host}),l=i.some(function(r){return r.url===t}),c=(0,h.useCallback)((0,d._)(function(){return(0,p.YH)(this,function(r){switch(r.label){case 0:return s(!0),[4,u({url:t})];case 1:return r.sent()||o(Error("Could not install plugin.")),(0,g.redirect)("/settings/plugins",g.RedirectType.replace),[2]}})}),[o,t,u]);return{url:t,pending:e,pluginExists:l,source:"".concat(r.protocol,"//").concat(r.host),isTrusted:a,addPlugin:c}};let w=function(){var t=b(),r=t.url,n=t.source,l=t.isTrusted,h=t.pending,d=t.pluginExists,f=t.addPlugin;return r?h?null:(0,e.jsxs)(a.default,{direction:"column",gap:4,children:[l?null:(0,e.jsx)(s.default,{severity:"error",variant:"filled",children:'The source "'.concat(n,'" of this plugin is not trusted!!')}),d?(0,e.jsxs)(e.Fragment,{children:[(0,e.jsx)(s.default,{severity:"warning",variant:"filled",children:'The plugin "'.concat(r,'" is already installed')}),(0,e.jsx)(u.default,{component:c(),href:"/settings/plugins",children:"Go to plugins"})]}):(0,e.jsxs)(e.Fragment,{children:[(0,e.jsx)(s.default,{severity:l?"success":"warning",variant:"filled",children:"This will add ".concat(r," to your plugins.")}),(0,e.jsx)(i.default,{children:(0,e.jsx)(o.default,{color:l?"success":"warning",variant:"contained",sx:{fontSize:20,px:8,py:2,mx:"auto",display:"block"},disabled:d,onClick:f,children:"Add"})})]})]}):((0,g.redirect)("/settings/plugins"),null)}},6617:(t,r,n)=>{n.d(r,{h:()=>u,i:()=>o});var e=n(97004),s=n(39249),i=n(12115),o=(0,i.createContext)({runWithImage:(0,e._)(function(){return(0,s.YH)(this,function(t){throw Error("Plugin Context is missing")})}),runWithImages:(0,e._)(function(){return(0,s.YH)(this,function(t){throw Error("Plugin Context is missing")})}),validateAndAddPlugin:(0,e._)(function(){return(0,s.YH)(this,function(t){throw Error("Plugin Context is missing")})})}),u=function(){return(0,i.useContext)(o)}},29032:(t,r,n)=>{n.d(r,{j:()=>i});var e=n(35695),s=n(12115),i=function(){var t=(0,e.usePathname)(),r=(0,e.useSearchParams)(),n=(0,s.useMemo)(function(){return r.toString()},[r]);return{fullPath:(0,s.useMemo)(function(){return n?"".concat(t,"?").concat(n):t},[t,n]),pathname:t,query:n,searchParams:r}}},46498:(t,r,n)=>{n.d(r,{A:()=>h});var e=n(86447),s=n(693),i=n(60376),o=n(577),u=n(30832),a=n.n(u),l=n(9779),c=n(51368),g=(0,n(65453).v)(function(t,r){return{dragover:!1,errors:[],isFullscreen:!1,lightboxImage:null,printerBusy:!1,printerData:null,printerFunctions:[],progress:{gif:0,printer:0,plugin:0},progressLog:{git:[],dropbox:[]},showSerials:!1,syncBusy:!1,syncSelect:!1,trashCount:{frames:0,images:0,show:!1},videoSelection:[],dismissError:function(n){return t({errors:r().errors.filter(function(t,r){return r!==n})})},resetProgressLog:function(){return t({progressLog:{git:[],dropbox:[]}})},setDragover:function(r){return t({dragover:r})},setError:function(n){return t({errors:(0,o._)(r().errors).concat([{error:n,timestamp:a()().unix(),id:(0,c.A)()}])})},setIsFullscreen:function(r){return t({isFullscreen:r})},setPrinterBusy:function(r){return t({printerBusy:r})},setPrinterData:function(r){return t({printerData:r})},setPrinterFunctions:function(r){return t({printerFunctions:r})},setProgress:function(n,o){return t({progress:(0,i._)((0,s._)({},r().progress),(0,e._)({},n,o))})},setShowSerials:function(r){return t({showSerials:r})},setSyncBusy:function(r){return t({syncBusy:r})},setSyncSelect:function(r){return t({syncSelect:r})},showTrashCount:function(n){return t({trashCount:(0,i._)((0,s._)({},r().trashCount),{show:n})})},updateTrashCount:function(n,e){return t({trashCount:(0,i._)((0,s._)({},r().trashCount),{frames:n,images:e})})},setVideoSelection:function(r){return t({videoSelection:r})},setProgressLog:function(n,u){var a=r().progressLog;t({progressLog:(0,i._)((0,s._)({},a),(0,e._)({},n,[u].concat((0,o._)(a[n]))))})},setLightboxImage:function(r){null===r&&l.A.exit(),t({lightboxImage:r})},setLightboxImageNext:function(n){var e=r().lightboxImage;null!==e&&t({lightboxImage:Math.min(e+1,n-1)})},setLightboxImagePrev:function(){var n=r().lightboxImage;null!==n&&t({lightboxImage:Math.max(n-1,0)})}}});window.se=g.getState().setError;let h=g}}]);