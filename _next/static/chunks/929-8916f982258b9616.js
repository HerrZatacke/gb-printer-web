"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[929],{1470:(e,n,t)=>{t.d(n,{t:()=>r,z:()=>u});var r="ROOT",u=function(){return{id:r,slug:"",created:"",title:"Home",coverImage:"",images:[],groups:[],tags:[]}}},5847:(e,n,t)=>{t.d(n,{T:()=>i,p:()=>s});var r=t(97004),u=t(39249),a=t(55364),o=t(72623),i=function(e,n,t){var i,s=(i=(0,r._)(function(r,i,c,l){var f,d,g,p,h,v,E,I,m,T,_,R;return(0,u.YH)(this,function(u){switch(u.label){case 0:if(d=e.find(function(e){return r===e.hash}),g=("string"==typeof c?c:null==d?void 0:d.frame)||void 0,p=null==(f=n.find(function(e){return e.id===g}))?void 0:f.hash,l||!(!d||!(0,a.pl)(d)))return[3,2];return[4,(0,o.Hh)(r,p,i,t)];case 1:return[2,u.sent()||[]];case 2:if(!(h=l||d.hashes).r)return[3,4];return[4,s(h.r,i,g)];case 3:return E=u.sent(),[3,5];case 4:E=[],u.label=5;case 5:if(v=E,!h.g)return[3,7];return[4,s(h.g,i,g)];case 6:return m=u.sent(),[3,8];case 7:m=[],u.label=8;case 8:if(I=m,!h.b)return[3,10];return[4,s(h.b,i,g)];case 9:return _=u.sent(),[3,11];case 10:_=[],u.label=11;case 11:if(T=_,!h.n)return[3,13];return[4,s(h.n,i,g)];case 12:return R=u.sent(),[3,14];case 13:R=[],u.label=14;case 14:return[2,{r:v,g:I,b:T,n:R}]}})}),function(e,n,t,r){return i.apply(this,arguments)});return s},s=function(e,n){var t,a=i(e,n);return t=(0,r._)(function(e){var n,t,r,o,i;return(0,u.YH)(this,function(u){switch(u.label){case 0:return[4,a(e,!0,"")];case 1:if(n=u.sent())return[2,(null==n?void 0:n.length)||(null==(t=n.r)?void 0:t.length)||(null==(r=n.g)?void 0:r.length)||(null==(o=n.b)?void 0:o.length)||(null==(i=n.n)?void 0:i.length)||0];return[2,0]}})}),function(e){return t.apply(this,arguments)}}},6456:(e,n,t)=>{t.d(n,{PM:()=>s,YZ:()=>o,lt:()=>i});var r=t(693),u=t(60376),a=t(78538),o=function(e,n){return(0,u._)((0,r._)({},e),{sortIndex:n})},i=function(e){return(0,u._)((0,r._)({},e),{sortIndex:void 0})},s=function(e){return function(n,t){if(!e)return 0;var r=(0,a._)(e.split("_"),2),u=r[0],o=r[1],i=n[u],s=t[u],c="desc"===o?-1:1;return i&&s?i>s?c:i<s?-c:n.sortIndex<t.sortIndex?c:-c:0}}},12360:(e,n,t)=>{t.d(n,{A:()=>u});var r=t(19864);let u=function(e){return function(n){var t=e.filter(function(e){return![r.X3.FILTER_MONOCHROME,r.X3.FILTER_NEW,r.X3.FILTER_RGB,r.X3.FILTER_UNTAGGED,r.X3.FILTER_RECENT,r.X3.FILTER_FAVOURITE,r.X3.FILTER_COMMENTS,r.X3.FILTER_USERNAME].includes(e)});return!t.length||!!n.tags.find(function(e){return t.includes(e)})}}},29032:(e,n,t)=>{t.d(n,{j:()=>a});var r=t(35695),u=t(12115),a=function(){var e=(0,r.usePathname)(),n=(0,r.useSearchParams)(),t=(0,u.useMemo)(function(){return n.toString()},[n]);return{fullPath:(0,u.useMemo)(function(){return t?"".concat(e,"?").concat(t):e},[e,t]),pathname:e,query:t,searchParams:n}}},32134:(e,n,t)=>{t.d(n,{GalleryTreeContext:()=>d,K:()=>f});var r=t(78538),u=t(95155),a=t(12115),o=t(45465),i=t(46498),s=t(11760),c=t(52166),l=t(1470),f=(0,a.createContext)({root:(0,l.z)(),view:(0,l.z)(),images:[],covers:[],paths:[],pathsOptions:[]});function d(e){var n=e.children,d=(0,r._)((0,a.useState)(null),2),g=d[0],p=d[1],h=(0,r._)((0,a.useState)((0,l.z)()),2),v=h[0],E=h[1],I=(0,r._)((0,a.useState)([]),2),m=I[0],T=I[1],_=(0,r._)((0,a.useState)([]),2),R=_[0],F=_[1],b=(0,c.A)(),L=b.enableImageGroups,X=b.enableDebug,M=(0,i.A)().setError,N=(0,s.h)(),x=N.imageGroups,C=N.images,A=N.setImageGroups,O=(0,a.useMemo)(function(){return L?x:[]},[L,x]),G=(0,o.Y)().path;(0,a.useEffect)(function(){var e=new Worker(t.tu(new URL(t.p+t.u(2814),t.b)));return e.onmessage=function(e){if("result"===e.data.type){if(E(e.data.root),T(e.data.paths),F(e.data.pathsOptions),x.length>e.data.paths.length){var n=e.data.paths.map(function(e){return e.group.id});A(x.filter(function(e){var t=e.id;return n.includes(t)}))}X&&console.info("worker ran for ".concat(e.data.duration,"ms"))}else"error"===e.data.type&&M(Error(e.data.error))},e.onerror=function(e){M(Error(e.message))},p(e),function(){e.terminate(),p(null)}},[X,M,A,x]),(0,a.useEffect)(function(){g&&g.postMessage({imageGroups:O,stateImages:C})},[O,C,g]);var P=(0,a.useMemo)(function(){var e,n=(null==(e=m.find(function(e){return e.absolutePath===G}))?void 0:e.group)||v,t=n.groups.map(function(e){return e.coverImage}),r=n.images.filter(function(e){return!t.includes(e.hash)});return{view:n,covers:t,paths:m,images:r,pathsOptions:R,root:v}},[G,m,R,v]);return(0,u.jsx)(f.Provider,{value:P,children:n})}},33782:(e,n,t)=>{t.d(n,{NavigationToolsProvider:()=>i,g:()=>s});var r=t(95155),u=t(12115),a=t(70940),o=(0,u.createContext)(null);function i(e){var n=e.children,t=(0,a.n)();return(0,r.jsx)(o.Provider,{value:t,children:n})}var s=function(){var e=(0,u.useContext)(o);if(!e)throw Error("useNavigationToolsContext must be used within an NavigationToolsProvider");return e}},45465:(e,n,t)=>{t.d(n,{Y:()=>i});var r=t(78538),u=t(12115),a=t(29032),o="/gallery",i=function(){var e,n=(0,a.j)(),t=n.searchParams,i=n.pathname,s=(0,r._)((0,u.useState)(""),2),c=s[0],l=s[1],f=parseInt(null!=(e=t.get("page"))?e:"1",10)-1,d=t.get("group")||"",g=(0,u.useCallback)(function(e){var n="number"==typeof e.pageIndex?e.pageIndex:f,t="string"==typeof e.group?e.group:d,r="".concat(o,"?page=").concat(n+1);return t.length&&(r="".concat(r,"&group=").concat(t)),r},[f,d]);return(0,u.useEffect)(function(){i===o&&l(g({pageIndex:f,group:d}))},[d,f,i,g]),{pageIndex:f,path:d,lastGalleryLink:c,getUrl:g}}},66785:(e,n,t)=>{t.d(n,{S:()=>i});var r=t(577),u=t(6456),a=t(77840),o=t(12360),i=function(e,n){var t=n.filtersActiveTags,i=n.sortBy,s=n.recentImports;return(0,r._)(e).map(u.YZ).sort((0,u.PM)(i)).map(u.lt).filter((0,a.A)(t,s)).filter((0,o.A)(t))}},70940:(e,n,t)=>{t.d(n,{n:()=>d});var r=t(78538),u=t(35695),a=t(12115),o=t(95939),i=t(45465),s=t(71620),c=t(52166),l=t(1470),f=t(66785),d=function(){var e=(0,u.useRouter)(),n=(0,o.Z)(),t=n.paths,d=n.root,g=(0,r._)((0,a.useState)({}),2),p=g[0],h=g[1],v=(0,s.A)(),E=v.sortBy,I=v.filtersActiveTags,m=v.recentImports,T=(0,c.A)().pageSize,_=(0,i.Y)(),R=_.path,F=_.getUrl,b=(0,a.useCallback)(function(e){return(0,f.S)(e,{filtersActiveTags:I,sortBy:E,recentImports:m})},[I,m,E]),L=(0,a.useCallback)(function(e,n){return Math.floor(b(n.images).findIndex(function(n){return n.hash===e})/T)},[b,T]),X=(0,a.useCallback)(function(e){var n;return e===l.t?F({pageIndex:0,group:""}):F({pageIndex:0,group:(null==(n=t.find(function(n){return e===n.group.id}))?void 0:n.absolutePath)||""})},[F,t]),M=(0,a.useMemo)(function(){var e;return(null==(e=t.find(function(e){return e.absolutePath===R}))?void 0:e.group)||d},[R,t,d]),N=(0,a.useCallback)(function(e){var n=t.find(function(n){return n.group.images.map(function(e){return e.hash}).includes(e)}),r=(null==n?void 0:n.absolutePath)||"";return F({pageIndex:L(e,(null==n?void 0:n.group)||d),group:r})},[L,F,t,d]);return(0,a.useEffect)(function(){p.imageHash?(e.push(N(p.imageHash)),h({})):p.groupId&&(e.push(X(p.groupId)),h({}))},[X,N,e,p]),{currentGroup:M,getGroupPath:X,getPagedImagePath:N,getImagePageIndexInGroup:L,navigateToGroup:function(e){h({groupId:e})},navigateToImage:function(e){h({imageHash:e})}}}},77840:(e,n,t)=>{t.d(n,{A:()=>c});var r=t(577),u=t(30832),a=t.n(u),o=t(5432),i=t(19864),s=t(55364);let c=function(e,n){return function(t){var u,c,l=e.reduce(function(e,n){return[i.X3.FILTER_MONOCHROME,i.X3.FILTER_NEW,i.X3.FILTER_RGB,i.X3.FILTER_UNTAGGED,i.X3.FILTER_RECENT,i.X3.FILTER_FAVOURITE,i.X3.FILTER_COMMENTS,i.X3.FILTER_USERNAME].includes(n)?(0,r._)(e).concat([n]):e},[]);if(l.length&&(l.includes(i.X3.FILTER_UNTAGGED)&&0!==t.tags.length||l.includes(i.X3.FILTER_NEW)&&a()(t.created,o.i$).unix()<=a()().subtract(1,"day").unix()||l.includes(i.X3.FILTER_RECENT)&&!n.map(function(e){return e.hash}).includes(t.hash)||l.includes(i.X3.FILTER_RGB)&&!(0,s.pl)(t)||l.includes(i.X3.FILTER_MONOCHROME)&&(0,s.pl)(t)||l.includes(i.X3.FILTER_FAVOURITE)&&!t.tags.includes(i.X3.FILTER_FAVOURITE)||l.includes(i.X3.FILTER_COMMENTS)&&!(null==(u=t.meta)?void 0:u.comment)||l.includes(i.X3.FILTER_USERNAME)&&!(null==(c=t.meta)?void 0:c.userName)))return!1;return!0}}},95939:(e,n,t)=>{t.d(n,{Z:()=>a});var r=t(12115),u=t(32134),a=function(){return(0,r.useContext)(u.K)}}}]);