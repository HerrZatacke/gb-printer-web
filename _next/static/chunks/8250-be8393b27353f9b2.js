"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[8250],{15905:(e,t,r)=>{r.d(t,{eJ:()=>y,CU:()=>E,Nx:()=>h,H:()=>_,pL:()=>F,BM:()=>f,Zc:()=>m,RQ:()=>g,Yn:()=>K,qO:()=>H,y1:()=>Z,uL:()=>V,EK:()=>X,o1:()=>v});let a=function(){class e{#e=new Map;compare(e,t){let r=typeof e,a=typeof t;return"string"===r&&"string"===a?e.localeCompare(t):"number"===r&&"number"===a?e-t:String.prototype.localeCompare.call(this.serialize(e,!0),this.serialize(t,!0))}serialize(e,t){if(null===e)return"null";switch(typeof e){case"string":return t?e:`'${e}'`;case"bigint":return`${e}n`;case"object":return this.$object(e);case"function":return this.$function(e)}return String(e)}serializeObject(e){let t=Object.prototype.toString.call(e);if("[object Object]"!==t)return this.serializeBuiltInType(t.length<10?`unknown:${t}`:t.slice(8,-1),e);let r=e.constructor,a=r===Object||void 0===r?"":r.name;if(""!==a&&globalThis[a]===r)return this.serializeBuiltInType(a,e);if("function"==typeof e.toJSON){let t=e.toJSON();return a+(null!==t&&"object"==typeof t?this.$object(t):`(${this.serialize(t)})`)}return this.serializeObjectEntries(a,Object.entries(e))}serializeBuiltInType(e,t){let r=this["$"+e];if(r)return r.call(this,t);if("function"==typeof t?.entries)return this.serializeObjectEntries(e,t.entries());throw Error(`Cannot serialize ${e}`)}serializeObjectEntries(e,t){let r=Array.from(t).sort((e,t)=>this.compare(e[0],t[0])),a=`${e}{`;for(let e=0;e<r.length;e++){let[t,i]=r[e];a+=`${this.serialize(t,!0)}:${this.serialize(i)}`,e<r.length-1&&(a+=",")}return a+"}"}$object(e){let t=this.#e.get(e);return void 0===t&&(this.#e.set(e,`#${this.#e.size}`),t=this.serializeObject(e),this.#e.set(e,t)),t}$function(e){let t=Function.prototype.toString.call(e);return"[native code] }"===t.slice(-15)?`${e.name||""}()[native]`:`${e.name}(${e.length})${t.replace(/\s*\n\s*/g,"")}`}$Array(e){let t="[";for(let r=0;r<e.length;r++)t+=this.serialize(e[r]),r<e.length-1&&(t+=",");return t+"]"}$Date(e){try{return`Date(${e.toISOString()})`}catch{return"Date(null)"}}$ArrayBuffer(e){return`ArrayBuffer[${new Uint8Array(e).join(",")}]`}$Set(e){return`Set${this.$Array(Array.from(e).sort((e,t)=>this.compare(e,t)))}`}$Map(e){return this.serializeObjectEntries("Map",e.entries())}}for(let t of["Error","RegExp","URL"])e.prototype["$"+t]=function(e){return`${t}(${e})`};for(let t of["Int8Array","Uint8Array","Uint8ClampedArray","Int16Array","Uint16Array","Int32Array","Uint32Array","Float32Array","Float64Array"])e.prototype["$"+t]=function(e){return`${t}[${e.join(",")}]`};for(let t of["BigInt64Array","BigUint64Array"])e.prototype["$"+t]=function(e){return`${t}[${e.join("n,")}${e.length>0?"n":""}]`};return e}(),i=[0x6a09e667,-0x4498517b,0x3c6ef372,-0x5ab00ac6,0x510e527f,-0x64fa9774,0x1f83d9ab,0x5be0cd19],n=[0x428a2f98,0x71374491,-0x4a3f0431,-0x164a245b,0x3956c25b,0x59f111f1,-0x6dc07d5c,-0x54e3a12b,-0x27f85568,0x12835b01,0x243185be,0x550c7dc3,0x72be5d74,-0x7f214e02,-0x6423f959,-0x3e640e8c,-0x1b64963f,-0x1041b87a,0xfc19dc6,0x240ca1cc,0x2de92c6f,0x4a7484aa,0x5cb0a9dc,0x76f988da,-0x67c1aeae,-0x57ce3993,-0x4ffcd838,-0x40a68039,-0x391ff40d,-0x2a586eb9,0x6ca6351,0x14292967,0x27b70a85,0x2e1b2138,0x4d2c6dfc,0x53380d13,0x650a7354,0x766a0abb,-0x7e3d36d2,-0x6d8dd37b,-0x5d40175f,-0x57e599b5,-0x3db47490,-0x3893ae5d,-0x2e6d17e7,-0x2966f9dc,-0xbf1ca7b,0x106aa070,0x19a4c116,0x1e376c08,0x2748774c,0x34b0bcb5,0x391c0cb3,0x4ed8aa4a,0x5b9cca4f,0x682e6ff3,0x748f82ee,0x78a5636f,-0x7b3787ec,-0x7338fdf8,-0x6f410006,-0x5baf9315,-0x41065c09,-0x398e870e],s=[];class l{_data=new o;_hash=new o([...i]);_nDataBytes=0;_minBufferSize=0;finalize(e){e&&this._append(e);let t=8*this._nDataBytes,r=8*this._data.sigBytes;return this._data.words[r>>>5]|=128<<24-r%32,this._data.words[(r+64>>>9<<4)+14]=Math.floor(t/0x100000000),this._data.words[(r+64>>>9<<4)+15]=t,this._data.sigBytes=4*this._data.words.length,this._process(),this._hash}_doProcessBlock(e,t){let r=this._hash.words,a=r[0],i=r[1],l=r[2],o=r[3],c=r[4],h=r[5],d=r[6],u=r[7];for(let r=0;r<64;r++){if(r<16)s[r]=0|e[t+r];else{let e=s[r-15],t=(e<<25|e>>>7)^(e<<14|e>>>18)^e>>>3,a=s[r-2],i=(a<<15|a>>>17)^(a<<13|a>>>19)^a>>>10;s[r]=t+s[r-7]+i+s[r-16]}let f=c&h^~c&d,g=a&i^a&l^i&l,m=(a<<30|a>>>2)^(a<<19|a>>>13)^(a<<10|a>>>22),y=u+((c<<26|c>>>6)^(c<<21|c>>>11)^(c<<7|c>>>25))+f+n[r]+s[r],E=m+g;u=d,d=h,h=c,c=o+y|0,o=l,l=i,i=a,a=y+E|0}r[0]=r[0]+a|0,r[1]=r[1]+i|0,r[2]=r[2]+l|0,r[3]=r[3]+o|0,r[4]=r[4]+c|0,r[5]=r[5]+h|0,r[6]=r[6]+d|0,r[7]=r[7]+u|0}_append(e){"string"==typeof e&&(e=o.fromUtf8(e)),this._data.concat(e),this._nDataBytes+=e.sigBytes}_process(e){let t,r=this._data.sigBytes/64,a=16*(r=e?Math.ceil(r):Math.max((0|r)-this._minBufferSize,0)),i=Math.min(4*a,this._data.sigBytes);if(a){for(let e=0;e<a;e+=16)this._doProcessBlock(this._data.words,e);t=this._data.words.splice(0,a),this._data.sigBytes-=i}return new o(t,i)}}class o{words;sigBytes;constructor(e,t){e=this.words=e||[],this.sigBytes=void 0===t?4*e.length:t}static fromUtf8(e){let t=unescape(encodeURIComponent(e)),r=t.length,a=[];for(let e=0;e<r;e++)a[e>>>2]|=(255&t.charCodeAt(e))<<24-e%4*8;return new o(a,r)}toBase64(){let e=[];for(let t=0;t<this.sigBytes;t+=3){let r=this.words[t>>>2]>>>24-t%4*8&255,a=r<<16|(this.words[t+1>>>2]>>>24-(t+1)%4*8&255)<<8|this.words[t+2>>>2]>>>24-(t+2)%4*8&255;for(let r=0;r<4&&8*t+6*r<8*this.sigBytes;r++)e.push("ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".charAt(a>>>6*(3-r)&63))}return e.join("")}concat(e){if(this.words[this.sigBytes>>>2]&=0xffffffff<<32-this.sigBytes%4*8,this.words.length=Math.ceil(this.sigBytes/4),this.sigBytes%4)for(let t=0;t<e.sigBytes;t++){let r=e.words[t>>>2]>>>24-t%4*8&255;this.words[this.sigBytes+t>>>2]|=r<<24-(this.sigBytes+t)%4*8}else for(let t=0;t<e.sigBytes;t+=4)this.words[this.sigBytes+t>>>2]=e.words[t>>>2];this.sigBytes+=e.sigBytes}}function c(e){var t,r;return t="string"==typeof(r=e)?`'${r}'`:new a().serialize(r),new l().finalize(t).toBase64()}var h=(e=>(e.NORMAL="normal",e.NORMAL_S="normal_s",e.LIGHTEN="lighten",e.SCREEN="screen",e.DODGE="dodge",e.ADDITION="addition",e.DARKEN="darken",e.MULTIPLY="multiply",e.BURN="burn",e.OVERLAY="overlay",e.SOFTLIGHT="softlight",e.HARDLIGHT="hardlight",e.DIFFERENCE="difference",e.EXCLUSION="exclusion",e))(h||{});let d=e=>{switch(e){case"normal":case"normal_s":return"source-over";case"lighten":return"lighten";case"screen":return"screen";case"dodge":return"color-dodge";case"addition":return"lighter";case"darken":return"darken";case"multiply":default:return"multiply";case"burn":return"color-burn";case"overlay":return"overlay";case"softlight":return"soft-light";case"hardlight":return"hard-light";case"difference":return"difference";case"exclusion":return"exclusion"}},u="FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFF",f="skip",g=8,m=20,y=[0xffffff,0xaaaaaa,5592405,0],E=["#ffffff","#aaaaaa","#555555","#000000"],p=Array(20).fill(u),x=Array(m).fill("00000000000000000000000000000000"),b=[0,85,170,255];h.MULTIPLY;var w=(e=>(e.R="r",e.G="g",e.B="b",e.N="n",e))(w||{}),_=(e=>(e.FRAMEMODE_KEEP="keep",e.FRAMEMODE_CROP="crop",e.FRAMEMODE_SQUARE_BLACK="square_black",e.FRAMEMODE_SQUARE_WHITE="square_white",e))(_||{}),F=(e=>(e[e.DEG_0=0]="DEG_0",e[e.DEG_90=1]="DEG_90",e[e.DEG_180=2]="DEG_180",e[e.DEG_270=3]="DEG_270",e))(F||{});let A=["r","g","b","n"],O=(e=u)=>{let t=e.replace(/[^0-9A-F]/ig,"").padEnd(32,"f"),r=Array(16);for(let e=0;e<r.length;e+=1)r[e]=parseInt(t.substr(2*e,2),16);let a=Array(8*g);for(let e=0;e<8;e+=1)for(let t=0;t<g;t+=1){let i=r[2*e+1]>>7-t&1,n=r[2*e]>>7-t&1;a[e*g+t]=i<<1|n}return a},v=(e,t,r)=>{if(r===_.FRAMEMODE_CROP)return!1;if(e<20*t||e>=20*t+280)return!0;switch(e%20){case 0:case 1:case 18:case 19:return!0;default:return!1}},D=({pixels:e,index:t,tileIndex:r,imageContext:{imageStartLine:a,handleExportFrame:i,imagePalette:n,framePalette:s}})=>{let l=(v(r,a,i)?s:n)[e[t]];return{r:(0xff0000&l)>>16,g:(65280&l)>>8,b:255&l}};class M{static rendered={};static rendering={};async getUrl(e){return M.rendered.hasOwnProperty(e)?M.rendered[e]:M.rendering.hasOwnProperty(e)?await M.rendering[e]:null}async setUrl(e,t){(M.rendered.hasOwnProperty(e)||M.rendering.hasOwnProperty(e))&&console.warn("hash already exists!"),M.rendering[e]=t,M.rendered[e]=await t,delete M.rendering[e]}}let S=async({data:e,dimensions:{width:t,height:r}},a,i="image/png")=>{let n=a();n.width=t,n.height=r;let s=n.getContext("2d"),l=new ImageData(e,n.width,n.height);return s?.putImageData(l,0,0),new Promise((e,t)=>{n.toBlob(r=>{if(!r)return void t(Error("Could not generate Blob from canvas"));try{e(r)}catch(e){t(e)}},i,1)})},B=async(e,t,r)=>{let a=new M;a.setUrl(t,new Promise(t=>{S(e,r).then(e=>{t(URL.createObjectURL(e))})}));let i=await a.getUrl(t);if(!i)throw Error("error generating image");return i},I=()=>{try{return document.createElement("canvas")}catch(e){throw Error("cannot create canvas element")}},R=(e,t,r,a)=>{let i=t*a,n=r*a,s=new Uint8ClampedArray(i*n*4);for(let n=0;n<r;n+=1)for(let r=0;r<t;r+=1){let l=(n*t+r)*4,o=e[l],c=e[l+1],h=e[l+2],d=e[l+3];for(let e=0;e<a;e+=1)for(let t=0;t<a;t+=1){let l=r*a+t,u=((n*a+e)*i+l)*4;s[u]=o,s[u+1]=c,s[u+2]=h,s[u+3]=d}}return{data:s,dimensions:{width:i,height:n}}},L=(e,t,r,a)=>{if(a===F.DEG_0)return{data:e,dimensions:{width:t,height:r}};let i=new Uint8ClampedArray(e.length),n=(e,t,r)=>(t*r+e)*4,s=t,l=r;switch(a){case F.DEG_90:case F.DEG_270:s=r,l=t;case F.DEG_180:}for(let l=0;l<r;l+=1)for(let o=0;o<t;o+=1){let c=n(o,l,t),h=o,d=l;switch(a){case F.DEG_90:h=r-l-1,d=o;break;case F.DEG_180:h=t-o-1,d=r-l-1;break;case F.DEG_270:h=l,d=t-o-1}let u=n(h,d,s);for(let t=0;t<4;t+=1)i[u+t]=e[c+t]}return{data:i,dimensions:{width:s,height:l}}},P={[_.FRAMEMODE_SQUARE_BLACK]:p,[_.FRAMEMODE_SQUARE_WHITE]:x},$=(e,t,r)=>r!==m?{imagePalette:e,framePalette:e}:{imagePalette:e,framePalette:t},U=(e,t)=>({width:g*t,height:8*Math.ceil(e/t)}),C=(e,t)=>({tiles:e.reduce((e,r,a)=>v(a,t.imageStartLine,_.FRAMEMODE_KEEP)?e:[...e,r],[]),dimensions:{width:128,height:112},contextUpdates:{tilesPerLine:16,imageStartLine:0}}),j=(e,t,r)=>{let a=r.imageStartLine-2-1,i=[...e],n=m**2;for(;i.length<n||a<0;)i.unshift(...t),i.push(...t),a+=1;let s=a*m;return{tiles:i.slice(s,s+n),dimensions:{width:160,height:160},contextUpdates:{tilesPerLine:20,imageStartLine:3}}},z=(e,t)=>{let r=t.tilesPerLine!==m?_.FRAMEMODE_KEEP:t.handleExportFrame;switch(r){case _.FRAMEMODE_KEEP:return{tiles:e,dimensions:U(e.length,t.tilesPerLine),contextUpdates:{}};case _.FRAMEMODE_CROP:return C(e,t);case _.FRAMEMODE_SQUARE_BLACK:case _.FRAMEMODE_SQUARE_WHITE:return j(e,P[r],t);default:throw Error(`unknown export mode ${t.handleExportFrame}`)}},G=(e,t,r,a)=>{let i=r%a.tilesPerLine,n=Math.floor(r/a.tilesPerLine),s=g*i,l=8*n;for(let i=0;i<g;i+=1)for(let n=0;n<8;n+=1){let o=(s+i+(l+n)*a.tilesPerLine*g)*4;if(null!==t){let s=D({pixels:t,index:n*g+i,tileIndex:r,imageContext:a});e[o]=s.r,e[o+1]=s.g,e[o+2]=s.b,e[o+3]=255}else e[o]=0,e[o+1]=0,e[o+2]=0,e[o+3]=0}},k=(e,t,r,a)=>{t===f?G(e,null,r,a):G(e,O(t),r,a)},N=e=>({tiles:e.tiles,imagePalette:e.imagePalette,framePalette:e.framePalette||e.imagePalette,imageStartLine:"number"==typeof e.imageStartLine?e.imageStartLine:2,tilesPerLine:e.tilesPerLine||m,scaleFactor:e.scaleFactor||1,rotation:e.rotation||F.DEG_0,handleExportFrame:e.handleExportFrame||_.FRAMEMODE_KEEP}),T=e=>{let{tiles:t,imageStartLine:r,imagePalette:a,framePalette:i,tilesPerLine:n,handleExportFrame:s,scaleFactor:l,rotation:o}=e,c={tilesPerLine:n,imageStartLine:r,handleExportFrame:s,...$(a,i,n||m)},{tiles:h,dimensions:{width:d,height:u},contextUpdates:f}=z(t,c),g={...c,...f};if(!u||!d)throw Error("Image has no dimensions");let y=new Uint8ClampedArray(d*u*4);h.forEach((e,t)=>{k(y,e,t,g)});let{data:E,dimensions:{width:p,height:x}}=L(y,d,u,o);return R(E,p,x,l)},H=async(e,t=I)=>{let r=new M,a=N(e),i=c(a),n=await r.getUrl(i);return n||B(T(a),i,t)},K=async(e,t,r=I)=>S(T(N(e)),r,t),Q=e=>({tiles:e.tiles,palette:e.palette,lockFrame:e.lockFrame||!1,imageStartLine:"number"==typeof e.imageStartLine?e.imageStartLine:2,tilesPerLine:e.tilesPerLine||m,scaleFactor:e.scaleFactor||1,rotation:e.rotation||F.DEG_0,handleExportFrame:e.handleExportFrame||_.FRAMEMODE_KEEP}),J=(e,t)=>{switch(t){case w.R:return e.map(e=>(255&e)<<16).reverse();case w.G:return e.map(e=>(255&e)<<8).reverse();case w.B:return e.map(e=>255&e).reverse();default:return e.map(e=>{let t=255&e;return(t<<16)+(t<<8)+t}).reverse()}},q=e=>Object.values(e).reduce((e,t)=>0===t.width||0===t.height?e:{width:Math.max(t.width,e.width),height:Math.max(t.height,e.height)},{width:0,height:0}),Y=(e,t,r)=>{let a=q(e),i=r();i.width=a.width,i.height=a.height;let n=i.getContext("2d");A.forEach(r=>{let a=e[r];if(a&&a.width&&a.height){if(r===w.N){if(t===h.NORMAL)return;n.globalCompositeOperation=d(t)}else n.globalCompositeOperation="lighter";n.drawImage(a,0,0)}});let s=n.getImageData(0,0,a.width,a.height);return{data:s.data,dimensions:{width:s.width,height:s.height}}},W=(e,t)=>{let{tiles:r,imageStartLine:a,palette:i,lockFrame:n,tilesPerLine:s,handleExportFrame:l,scaleFactor:o,rotation:c}=e,d=Object.entries(r).reduce((e,[r,h])=>{if(!h?.length)return e;let d=J(i[r]||b,r),u=n?J(b,r):d,{data:f,dimensions:g}=T({imagePalette:d,framePalette:u,handleExportFrame:l,imageStartLine:a,scaleFactor:o,rotation:c,tiles:h,tilesPerLine:s}),m=t();m.width=g.width,m.height=g.height;let y=m.getContext("2d"),E=new ImageData(f,g.width,g.height);return y.putImageData(E,0,0),{...e,[r]:m}},{});return Y(d,i.blend||h.NORMAL,t)},V=async(e,t=I)=>{let r=new M,a=Q(e),i=c(a),n=await r.getUrl(i);return n||B(W(a,t),i,t)},Z=async(e,t,r=I)=>S(W(Q(e),r),r,t),X=e=>Math.max(...A.map(t=>e[t]?.length||0))},46786:(e,t,r)=>{r.d(t,{KU:()=>i,Zr:()=>s,eh:()=>a});let a=e=>(t,r,a)=>{let i=a.subscribe;return a.subscribe=(e,t,r)=>{let n=e;if(t){let i=(null==r?void 0:r.equalityFn)||Object.is,s=e(a.getState());n=r=>{let a=e(r);if(!i(s,a)){let e=s;t(s=a,e)}},(null==r?void 0:r.fireImmediately)&&t(s,s)}return i(n)},e(t,r,a)};function i(e,t){let r;try{r=e()}catch(e){return}return{getItem:e=>{var a;let i=e=>null===e?null:JSON.parse(e,null==t?void 0:t.reviver),n=null!=(a=r.getItem(e))?a:null;return n instanceof Promise?n.then(i):i(n)},setItem:(e,a)=>r.setItem(e,JSON.stringify(a,null==t?void 0:t.replacer)),removeItem:e=>r.removeItem(e)}}let n=e=>t=>{try{let r=e(t);if(r instanceof Promise)return r;return{then:e=>n(e)(r),catch(e){return this}}}catch(e){return{then(e){return this},catch:t=>n(t)(e)}}},s=(e,t)=>(r,a,s)=>{let l,o={storage:i(()=>localStorage),partialize:e=>e,version:0,merge:(e,t)=>({...t,...e}),...t},c=!1,h=new Set,d=new Set,u=o.storage;if(!u)return e((...e)=>{console.warn(`[zustand persist middleware] Unable to update item '${o.name}', the given storage is currently unavailable.`),r(...e)},a,s);let f=()=>{let e=o.partialize({...a()});return u.setItem(o.name,{state:e,version:o.version})},g=s.setState;s.setState=(e,t)=>(g(e,t),f());let m=e((...e)=>(r(...e),f()),a,s);s.getInitialState=()=>m;let y=()=>{var e,t;if(!u)return;c=!1,h.forEach(e=>{var t;return e(null!=(t=a())?t:m)});let i=(null==(t=o.onRehydrateStorage)?void 0:t.call(o,null!=(e=a())?e:m))||void 0;return n(u.getItem.bind(u))(o.name).then(e=>{if(e)if("number"!=typeof e.version||e.version===o.version)return[!1,e.state];else{if(o.migrate){let t=o.migrate(e.state,e.version);return t instanceof Promise?t.then(e=>[!0,e]):[!0,t]}console.error("State loaded from storage couldn't be migrated since no migrate function was provided")}return[!1,void 0]}).then(e=>{var t;let[i,n]=e;if(r(l=o.merge(n,null!=(t=a())?t:m),!0),i)return f()}).then(()=>{null==i||i(l,void 0),l=a(),c=!0,d.forEach(e=>e(l))}).catch(e=>{null==i||i(void 0,e)})};return s.persist={setOptions:e=>{o={...o,...e},e.storage&&(u=e.storage)},clearStorage:()=>{null==u||u.removeItem(o.name)},getOptions:()=>o,rehydrate:()=>y(),hasHydrated:()=>c,onHydrate:e=>(h.add(e),()=>{h.delete(e)}),onFinishHydration:e=>(d.add(e),()=>{d.delete(e)})},o.skipHydration||y(),l||m}},65453:(e,t,r)=>{r.d(t,{v:()=>o});var a=r(12115);let i=e=>{let t,r=new Set,a=(e,a)=>{let i="function"==typeof e?e(t):e;if(!Object.is(i,t)){let e=t;t=(null!=a?a:"object"!=typeof i||null===i)?i:Object.assign({},t,i),r.forEach(r=>r(t,e))}},i=()=>t,n={setState:a,getState:i,getInitialState:()=>s,subscribe:e=>(r.add(e),()=>r.delete(e))},s=t=e(a,i,n);return n},n=e=>e?i(e):i,s=e=>e,l=e=>{let t=n(e),r=e=>(function(e,t=s){let r=a.useSyncExternalStore(e.subscribe,a.useCallback(()=>t(e.getState()),[e,t]),a.useCallback(()=>t(e.getInitialState()),[e,t]));return a.useDebugValue(r),r})(t,e);return Object.assign(r,t),r},o=e=>e?l(e):l}}]);