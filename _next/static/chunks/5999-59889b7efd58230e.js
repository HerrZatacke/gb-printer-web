"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[5999],{5800:(e,t,n)=>{n.d(t,{A:()=>h});var r=n(61975),a=n(71450),i=n(12115),u=n(7766),o=n(10022),l=n(41175),s=n(84784),c=n(99353),d=n(17654),f=n(24849),v=n(80068);let h=function(){var e=(0,o.C$)(),t=e.exportScaleFactors,n=e.exportFileTypes,h=e.handleExportFrame,m=e.fileNameStyle,p=e.alwaysShowDownloadDialog,g=(0,o.Vs)(),I=g.frames,E=g.palettes,b=g.images,w=(0,o.I0)().setDownloadHashes,T=(0,u.A)().sendEvent,x=(0,i.useMemo)(function(){return(0,s.j)(t,n,h,E,m)},[n,t,m,h,E]),S=(0,i.useCallback)(function(e){if(1===e.length){var t=b.find(function(t){return t.hash===e[0]});if(!t)throw Error("image not found");var n=(0,d.s)(E,t).palette;if(!n)throw Error("imagePalette not found");return(0,c.A)({image:t,palette:n,fileNameStyle:m})}return(0,c.A)({altTitle:"gameboy-printer-gallery",useCurrentDate:!0,fileNameStyle:m})},[m,b,E]),_=(0,i.useCallback)(function(e){return(0,r._)(function(){var t,n,r,i,u,o;return(0,a.YH)(this,function(a){switch(a.label){case 0:if(!(t=b.find(function(t){return t.hash===e})))throw Error("image not found");return n=I.find(function(e){return e.id===t.frame}),[4,(0,f.T)(b,I)(t.hash)];case 1:if(!(r=a.sent()))throw Error("no tiles");if(!n)return[3,3];return[4,(0,l.mZ)(null==n?void 0:n.hash)];case 2:return u=a.sent(),[3,4];case 3:u=null,a.label=4;case 4:return o=(i=u)?i.upper.length/20:2,[2,x(t,r,o)]}})})()},[I,b,x]),P=(0,i.useCallback)(function(e){return(0,r._)(function(){var t,n;return(0,a.YH)(this,function(r){switch(r.label){case 0:return t=S(e),[4,Promise.all(e.map(_))];case 1:return n=r.sent(),(0,s.R)(t)(n.flat()),T("downloadImages",{imageCount:(0,v.y)(n.flat().length)}),[2]}})})()},[S,_,T]),A=(0,i.useCallback)(function(e){return(0,r._)(function(){return(0,a.YH)(this,function(t){switch(t.label){case 0:if(!p)return[3,1];return w(e),[3,3];case 1:return[4,P(e)];case 2:t.sent(),t.label=3;case 3:return[2]}})})()},[p,P,w]);return{downloadImages:P,setDownloadImages:A}}},7766:(e,t,n)=>{n.d(t,{A:()=>p,E:()=>c,TrackingProvider:()=>m});var r=n(22043),a=n(95155),i=n(68321),u=n(12115),o=n(10022),l=n(80068),s="gbp-z-web-analytics-consent",c=function(e){return e.UNKNOWN="unknown",e.ACCEPTED="accepted",e.DENIED="denied",e}({}),d=(0,u.createContext)({consentState:"unknown",setConsent:function(){},sendEvent:function(){},trackingAvailable:!1,showPopup:!1}),f="https://cloud.umami.is/script.js",v="8d38dd07-9d1e-49ac-bce1-b3d61782288f",h=!!(f&&v);function m(e){var t=e.children,n=(0,r._)((0,u.useState)("denied"),2),c=n[0],m=n[1];(0,u.useEffect)(function(){h&&m(localStorage.getItem(s)||"unknown")},[]);var p=(0,u.useCallback)(function(e){localStorage.setItem(s,String(e)),m(e)},[]),g=(0,u.useMemo)(function(){return"unknown"===c},[c]),I=(0,u.useRef)({}),E=(0,u.useCallback)(function(e,t){h&&"accepted"===c&&window.umami&&(window.clearTimeout(I.current[e]),I.current[e]=window.setTimeout(function(){window.umami.track(e,t)},1e3))},[c]),b=(0,o.Vs)(),w=(0,o.I0)().errors;return(0,u.useEffect)(function(){var e=b.images,t=b.imageGroups,n=b.frames,r=b.frameGroups,a=b.palettes,i=b.plugins;E("global-stats",{images:(0,l.y)(e.length),imageGroups:(0,l.y)(t.length),frames:(0,l.y)(n.length),frameGroups:(0,l.y)(r.length),palettes:(0,l.y)(a.length),plugins:(0,l.y)(i.length)})},[b,E]),(0,u.useEffect)(function(){if(w.length){var e=w[w.length-1].error;E("error",{message:e.message,stack:e.stack||""})}},[w,E]),(0,a.jsxs)(d.Provider,{value:{consentState:c,setConsent:p,trackingAvailable:h,showPopup:g,sendEvent:E},children:[t,h&&f&&v&&"accepted"===c&&(0,a.jsx)(i.default,{src:f,"data-website-id":v,strategy:"afterInteractive"})]})}let p=function(){return(0,u.useContext)(d)}},11081:(e,t,n)=>{n.d(t,{V:()=>r});var r=function(e){return e.CHECKBOX="checkbox",e.SELECT="select",e.TEXT="text",e.NUMBER="number",e.INFO="info",e.IMAGE="image",e.META="meta",e}({})},14217:(e,t,n)=>{n.d(t,{z:()=>r});var r=n(74879).A},14539:(e,t,n)=>{n.d(t,{A:()=>o});var r=n(95155),a=n(80317);n(12115);var i=n(10022),u=n(63528);let o=function(e){var t=e.text;return(0,i.C$)().enableDebug?(0,r.jsx)(a.A,{title:t,variant:"caption",fontFamily:"monospace",component:"pre",sx:function(e){return(0,u.E)(e,{px:.5,py:0,mt:1,mb:0,backgroundColor:e.palette.warning[e.palette.mode]})},children:t}):null}},15015:(e,t,n)=>{n.d(t,{_Y:()=>a,k4:()=>i,qt:()=>r});var r=function(e){return e.USB="USB",e.SERIAL="SERIAL",e}({}),a=function(e){return e.INACTIVE="inactive",e.PACKET_CAPTURE="packet_capture",e.SUPER_PRINTER_INTERFACE="super_printer_interface",e.GBXCART="gbxcart",e}({}),i=[{vendorId:9025,productId:32822},{vendorId:9025,productId:32823},{vendorId:9025,productId:32845},{vendorId:9025,productId:32846},{vendorId:9025,productId:32847},{vendorId:9025,productId:32848},{vendorId:9025,productId:32850},{vendorId:9025,productId:32851},{vendorId:9025,productId:32852},{vendorId:9025,productId:32853},{vendorId:9025,productId:32854},{vendorId:9025,productId:32855},{vendorId:9114}]},15384:(e,t,n)=>{n.d(t,{_:()=>s,v:()=>l});var r=n(45377),a=n(96569),i=n(12115),u=n(10022),o=n(17403),l=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:a.pL.DEG_0,n=!!(t&&[a.pL.DEG_90,a.pL.DEG_270].includes(t)),r=e/a.Zc*a.RQ,i=a.Zc*a.RQ;return n?{width:r,height:i,aspectRatio:i/r,aspectRatioCSS:"".concat(r," / ").concat(i)}:{width:i,height:r,aspectRatio:r/i,aspectRatioCSS:"".concat(i," / ").concat(r)}},s=function(e){var t=(0,u.Vs)(),n=t.images,a=t.frames;return{dimensions:(0,i.useMemo)(function(){var t=n.find(function(t){return t.hash===e})||null;if(!t)return l(360);var i=a.find(function(e){return e.id===t.frame})||null;if(null==i?void 0:i.lines)return l(i.lines,t.rotation);if((0,o.pl)(t)){var u,s,c=t.hashes,d=[c.r,c.g,c.b,c.n].map(function(e){return n.find(function(t){return t.hash===e})||null}).reduce(o.iy,[]).map(function(e){return e.lines});u=(s=Math).max.apply(s,(0,r._)(d))}else u=t.lines;return l(u,t.rotation)},[n,a,e])}}},18565:(e,t,n)=>{n.d(t,{A:()=>c});var r=n(82732),a=n(45849),i=n(95155);n(12115);var u=n(15384),o=n(37965),l=n(27347),s=n(78405);let c=function(e){var t=e.hash,n=e.asThumb,c=e.overrides,d=(0,o.b)(t,c).gbImageProps,f=(0,u._)(t).dimensions;return d?(0,i.jsx)(l.A,(0,a._)((0,r._)({},d),{asThumb:n,dimensions:f})):(0,i.jsx)(s.A,{asThumb:n,dimensions:f})}},23441:(e,t,n)=>{n.d(t,{h:()=>u});var r=n(22043),a=n(12115),i=function(){var e;return{width:window.innerWidth,height:window.innerHeight,ddpx:window.devicePixelRatio<=2?window.devicePixelRatio:window.devicePixelRatio/2,layoutWidth:(e=window.innerWidth)>1220?1155:e>1025?960:e>830?765:e>635?570:e>440?375:e-40}},u=function(){var e=(0,r._)((0,a.useState)(i()),2),t=e[0],n=e[1];return(0,a.useEffect)(function(){var e=function(){n(i())};return window.addEventListener("resize",e),function(){return window.removeEventListener("resize",e)}},[n]),t}},24849:(e,t,n)=>{n.d(t,{T:()=>o,p:()=>l});var r=n(61975),a=n(71450),i=n(17403),u=n(75036),o=function(e,t,n){var o=function(l,s,c,d){return(0,r._)(function(){var r,f,v,h,m,p,g,I,E,b,w,T;return(0,a.YH)(this,function(a){switch(a.label){case 0:if(f=e.find(function(e){return l===e.hash}),v=("string"==typeof c?c:null==f?void 0:f.frame)||void 0,h=null==(r=t.find(function(e){return e.id===v}))?void 0:r.hash,d||!(!f||!(0,i.pl)(f)))return[3,2];return[4,(0,u.Hh)(l,h,s,n)];case 1:return[2,a.sent()||[]];case 2:if(!(m=d||f.hashes).r)return[3,4];return[4,o(m.r,s,v)];case 3:return g=a.sent(),[3,5];case 4:g=[],a.label=5;case 5:if(p=g,!m.g)return[3,7];return[4,o(m.g,s,v)];case 6:return E=a.sent(),[3,8];case 7:E=[],a.label=8;case 8:if(I=E,!m.b)return[3,10];return[4,o(m.b,s,v)];case 9:return w=a.sent(),[3,11];case 10:w=[],a.label=11;case 11:if(b=w,!m.n)return[3,13];return[4,o(m.n,s,v)];case 12:return T=a.sent(),[3,14];case 13:T=[],a.label=14;case 14:return[2,{r:p,g:I,b:b,n:T}]}})})()};return o},l=function(e,t){var n=o(e,t);return function(e){return(0,r._)(function(){var t,r,i,u,o;return(0,a.YH)(this,function(a){switch(a.label){case 0:return[4,n(e,!0,"")];case 1:if(t=a.sent())return[2,(null==t?void 0:t.length)||(null==(r=t.r)?void 0:r.length)||(null==(i=t.g)?void 0:i.length)||(null==(u=t.b)?void 0:u.length)||(null==(o=t.n)?void 0:o.length)||0];return[2,0]}})})()}}},27347:(e,t,n)=>{n.d(t,{A:()=>m});var r=n(61975),a=n(79703),i=n(82732),u=n(22043),o=n(71450),l=n(95155),s=n(41574),c=n(96569),d=n(12115),f=n(78405),v=n(15384),h=n(26490);let m=function(e){var t=e.palette,n=e.tiles,m=e.imageStartLine,p=e.lockFrame,g=e.invertPalette,I=e.framePalette,E=e.invertFramePalette,b=e.dimensions,w=e.asThumb,T=void 0!==w&&w,x=e.rotation,S=void 0===x?c.pL.DEG_0:x,_=!(0,a._)(t,Array),P=(0,u._)((0,d.useState)(null),2),A=P[0],y=P[1],C=(0,u._)((0,d.useState)(""),2),k=C[0],N=C[1],R=(0,d.useMemo)(function(){if(b)return b;var e=_?(0,c.EK)(n):n.length;return(0,v.v)(e)},[b,_,n]);(0,d.useEffect)(function(){if(t&&n){var e=setTimeout(function(){return(0,r._)(function(){var e,r;return(0,o.YH)(this,function(u){switch(u.label){case 0:if(u.trys.push([0,5,,6]),e="",!_)return[3,2];return[4,(0,c.uL)({tiles:n,palette:t,lockFrame:p||!1,rotation:S})];case 1:return e=u.sent(),[3,4];case 2:if(!(null==n?void 0:n.length))return[3,4];return[4,(0,c.qO)((0,i._)({tiles:n,imageStartLine:m,rotation:S},(0,h.C)({imagePalette:t,framePalette:I,invertPalette:g,invertFramePalette:E})))];case 3:e=u.sent(),u.label=4;case 4:return e&&y(e),N(""),[3,6];case 5:return r=u.sent(),(0,a._)(r,Error)&&(console.error(r),N(r.message)),[3,6];case 6:return[2]}})})()},1);return function(){clearTimeout(e)}}},[n,t,p,g,S,_,m,I,E]);var M=(0,d.useMemo)(function(){return{display:"block",imageRendering:T?"auto":"pixelated",margin:"0 auto",width:R.width>R.height?"100%":"".concat(1/R.aspectRatio*100,"%"),aspectRatio:R.aspectRatioCSS,maxWidth:"100%",maxHeight:"100%",objectFit:"contain"}},[T,R]);return k||!A?(0,l.jsx)(f.A,{asThumb:T,dimensions:R}):(0,l.jsx)(s.A,{className:"gameboy-image",sx:{display:"flex",width:"100%",height:"100%"},children:(0,l.jsx)("img",{src:A,style:M,alt:""})})}},34476:(e,t,n)=>{n.d(t,{U:()=>a,Z:()=>i});var r=n(12115),a=(0,r.createContext)({connectedDevices:[],isReceiving:!1,webSerialEnabled:!1,openWebSerial:function(){throw Error("PortsContext is missing")},webUSBEnabled:!1,openWebUSB:function(){throw Error("PortsContext is missing")},unknownDeviceResponse:null,hasInactiveDevices:!1}),i=function(){return(0,r.useContext)(a)}},34731:(e,t,n)=>{n.d(t,{A:()=>w});var r=n(22043),a=n(80971),i=n(95155),u=n(29999),o=n(41574),l=n(64647),s=n(27747),c=n(66370),d=n(99496),f=n(2021),v=n(24288),h=n(41942),m=n(25789),p=n(33868),g=n(18955),I=n(12115);let E=function(e){var t=e.confirm,n=e.canConfirm,r=e.deny;(0,I.useEffect)(function(){var e=function(e){"Escape"===e.key&&r&&r(),"Enter"===e.key&&e.ctrlKey&&t&&n&&t()};return document.addEventListener("keydown",e),function(){document.removeEventListener("keydown",e)}},[t,n,r])};var b=function(e,t,n,r){var i={};if(r?(i.padding="8px !important",i.overflowX="hidden",i.overflowY="hidden"):(i.scrollbarGutter="stable",i.overflowY="scroll"),n)return i;switch(void 0===t?"undefined":(0,a._)(t)){case"string":i.height=t;break;case"number":i.height="".concat(t,"px")}switch(void 0===e?"undefined":(0,a._)(e)){case"string":i.width=e;break;case"number":i.width="".concat(e,"px");break;default:i.width="440px"}return i};let w=function(e){var t=e.contentHeight,n=e.contentWidth,a=e.header,w=e.closeTitle,T=e.children,x=e.confirm,S=e.deny,_=e.confirmMessage,P=e.denyMessage,A=e.canConfirm,y=e.headerOnly,C=e.fullSize,k=e.open,N=e.keepMounted,R=e.closeOnOverlayClick,M=e.headerActionButtons,D=e.actionButtons,G=(0,g.c)("Lightbox"),F="boolean"!=typeof R||R,L=(0,r._)((0,I.useState)(),2),j=L[0],H=L[1];E({confirm:x,canConfirm:A||!1,deny:F?S:void 0}),(0,I.useEffect)(function(){H(document.body)},[]);var W=(0,m.A)(),O=(0,p.A)(W.breakpoints.down("md")),Y=b(n,t,O,C),B=P||G(x?"cancel":"close"),U=_||G("ok");return(0,i.jsxs)(s.A,{container:j,fullScreen:O||C,maxWidth:"lg",open:"boolean"!=typeof k||k,onClose:F?S:void 0,"aria-label":"string"==typeof a?a:void 0,keepMounted:"boolean"!=typeof N||N,disableEscapeKeyDown:!0,sx:{paddingRight:"10px"},children:[(0,i.jsxs)(f.A,{sx:{display:"flex",justifyContent:"space-between",gap:2,maxWidth:Y.width},children:[(0,i.jsx)(o.A,{sx:{whiteSpace:"nowrap",textOverflow:"ellipsis",overflow:"hidden"},title:a,children:a}),(0,i.jsxs)(h.A,{direction:"row",sx:{my:-.5,mr:-2},children:[M,S?(0,i.jsx)(v.A,{title:w||G("closeWithHeader",{header:"string"==typeof a?a:""}),color:"inherit",onClick:S,children:(0,i.jsx)(u.A,{})}):null]})]}),!y&&(0,i.jsx)(d.A,{sx:Y,children:T}),(0,i.jsxs)(c.A,{children:[D,S?(0,i.jsx)(l.A,{onClick:S,color:"primary",variant:"outlined",children:B}):null,x?(0,i.jsx)(l.A,{disabled:!1===A,color:"primary",variant:"contained",onClick:x,children:U}):null]})]})}},34808:(e,t,n)=>{n.d(t,{E:()=>o});var r,a=n(61975),i=n(71450),u=n(10022),o=function(e,t){var o=function(){return(0,a._)(function(){var a;return(0,i.YH)(this,function(i){switch(i.label){case 0:if(r)return[3,2];return[4,Promise.all([n.e(9268),n.e(9579),n.e(1575)]).then(n.bind(n,62107))];case 1:a=i.sent().dropBoxSyncTool,r=r||a(e,t),i.label=2;case 2:return[2,r]}})})()};return u.N$.getState().dropboxStorage.use&&o(),{recoverImageData:function(e){return(0,a._)(function(){return(0,i.YH)(this,function(t){switch(t.label){case 0:return[4,o()];case 1:return[2,t.sent().recoverImageData(e)]}})})()},startAuth:function(){return(0,a._)(function(){return(0,i.YH)(this,function(e){switch(e.label){case 0:return[4,o()];case 1:return[2,e.sent().startAuth()]}})})()},startSyncData:function(e){return(0,a._)(function(){return(0,i.YH)(this,function(t){switch(t.label){case 0:return[4,o()];case 1:return[2,t.sent().startSyncData(e)]}})})()},startSyncImages:function(){return(0,a._)(function(){return(0,i.YH)(this,function(e){switch(e.label){case 0:return[4,o()];case 1:return[2,e.sent().startSyncImages()]}})})()},updateSettings:function(e){return(0,a._)(function(){return(0,i.YH)(this,function(t){switch(t.label){case 0:return[4,o()];case 1:return[2,t.sent().updateSettings(e)]}})})()},subscribe:function(){return u.N$.subscribe(function(e){return e.dropboxStorage},function(e){return(0,a._)(function(){return(0,i.YH)(this,function(t){switch(t.label){case 0:return[4,o()];case 1:return t.sent().updateSettings(e),[2]}})})()})}}}},37965:(e,t,n)=>{n.d(t,{b:()=>m});var r=n(61975),a=n(22043),i=n(71450),u=n(12115),o=n(15719),l=n(46019),s=n(83231),c=n(55382),d=n(10022),f=n(41175),v=n(34808),h=n(24849),m=function(e,t){var n=(0,a._)((0,u.useState)(null),2),m=n[0],p=n[1],g=(0,c.g)(),I=(0,s.W)().remoteImport,E=(0,d.Vs)(),b=E.frames,w=E.palettes,T=E.images,x=(0,l.f)(e).galleryImageData,S=(null==t?void 0:t.frameId)||(null==x?void 0:x.frame),_=(0,u.useCallback)(function(e,t,n,r){return(0,h.T)(T,b,function(){(0,v.E)(g,I).recoverImageData(e)})(e,t,n,r)},[T,b,g,I]),P=(0,u.useMemo)(function(){return!!(null==x?void 0:x.hashes)},[x]),A=(0,u.useMemo)(function(){var e;return null==(e=b.find(function(e){return e.id===S}))?void 0:e.hash},[b,S]),y=(0,u.useMemo)(function(){return(null==t?void 0:t.invertPalette)!==void 0?t.invertPalette:null==x?void 0:x.invertPalette},[x,t]),C=(0,u.useMemo)(function(){return(null==t?void 0:t.invertFramePalette)!==void 0?t.invertFramePalette:null==x?void 0:x.invertFramePalette},[x,t]),k=(0,u.useMemo)(function(){return(null==t?void 0:t.lockFrame)!==void 0?t.lockFrame:null==x?void 0:x.lockFrame},[x,t]),N=(0,u.useMemo)(function(){return(null==t?void 0:t.palette)?t.palette:(null==t?void 0:t.paletteId)?(w.find(function(e){return e.shortName===t.paletteId})||o.Fv).palette:x?x.palette:P?o.YP:o.Fv.palette},[w,x,P,t]),R=(0,u.useMemo)(function(){return(null==t?void 0:t.framePalette)?t.framePalette:!P&&k?(null==t?void 0:t.framePaletteId)?(w.find(function(e){return e.shortName===t.framePaletteId})||o.Fv).palette:x?x.framePalette:o.Fv.palette:void 0},[w,x,P,k,t]);return(0,u.useEffect)(function(){var n=!1;return e||p(null),(0,r._)(function(){var r,a,u,o,l;return(0,i.YH)(this,function(i){switch(i.label){case 0:if(n)return[2];return[4,_(e,!1,S,null==x?void 0:x.hashes)];case 1:if(r=i.sent(),!A)return[3,3];return[4,(0,f.mZ)(A)];case 2:return u=i.sent(),[3,4];case 3:u=null,i.label=4;case 4:if(o=(a=u)?a.upper.length/20:2,n)return[2];return l=(null==t?void 0:t.rotation)||(null==x?void 0:x.rotation),r&&x&&p({tiles:r,palette:N,framePalette:R,invertPalette:y,imageStartLine:o,lockFrame:k,rotation:l,invertFramePalette:k?C:y}),[2]}})})(),function(){n=!0}},[A,S,x,e,C,y,_,k,t,R,N]),{gbImageProps:m}}},42086:(e,t,n)=>{n.d(t,{No:()=>a,Q3:()=>i,RQ:()=>u,x6:()=>r});var r=function(e){return e.DELETE="delete",e.ANIMATE="animate",e.DOWNLOAD="download",e.EDIT="edit",e.RGB="rgb",e}({}),a=function(e){return e.LOCK_FRAME="lockFrame",e.FRAME="frame",e.PALETTE="palette",e.TITLE="title",e.TAGS="tags",e.CREATED="created",e.ROTATION="rotation",e}({}),i=function(e){return e.INVERT_PALETTE="invertPalette",e.FRAME_PALETTE="framePalette",e.INVERT_FRAME_PALETTE="invertFramePalette",e}({}),u=["lockFrame","frame","title","tags","created","rotation","palette","invertPalette","framePalette","invertFramePalette"]},46019:(e,t,n)=>{n.d(t,{f:()=>d});var r=n(12115),a=n(15719),i=n(89386),u=n(10022),o=n(84470),l=n(17654),s=n(35797),c=n(17403),d=function(e){var t=(0,u.C$)().pageSize,n=(0,u.cr)(),d=n.filtersTags,f=n.filtersFrames,v=n.filtersPalettes,h=n.sortBy,m=n.recentImports,p=n.imageSelection,g=n.updateImageSelection,I=n.lastSelectedImage,E=n.setImageSelection,b=(0,u.Vs)(),w=b.palettes,T=b.images,x=p.indexOf(e),S=(0,r.useMemo)(function(){var t,n=T.find(function(t){return t.hash===e}),r=[];if(!n)return null;var i=(0,l.s)(w,n),u=i.palette,o=i.framePalette,d=(0,s.f)(n),f=d.invertPalette,v=d.invertFramePalette;if(!u)throw Error("Palette missing?");return(0,c.pl)(n)?t=u:(t=(u||a.Fv).palette,r=(o||a.Fv).palette),{title:n.title,created:n.created,frame:n.frame,hashes:n.hashes||void 0,tags:n.tags,palette:t,framePalette:r,lockFrame:n.lockFrame,invertPalette:f,invertFramePalette:v,rotation:n.rotation,selectionIndex:x}},[e,x,w,T]),_=(0,i.Z)(),P=_.view,A=_.covers;return{galleryImageData:S,updateImageSelection:(0,r.useCallback)(function(n,r,a){if(r){var i=(0,o.S)(P,{filtersTags:d,filtersFrames:f,filtersPalettes:v,sortBy:h,recentImports:m}).filter(function(e){return!A.includes(e.hash)}),u=i.findIndex(function(t){return t.hash===e}),l=i.findIndex(function(e){return e.hash===I});-1===l&&(l=a*t);var s=Math.min(l,u),c=Math.max(l,u);E(i.slice(s,c+1).map(function(e){return e.hash}))}else g(n,[e])},[A,f,v,d,e,I,t,m,E,h,g,P])}}},63528:(e,t,n)=>{n.d(t,{E:()=>a});var r=n(82732),a=function(e,t){return(0,r._)({flexGrow:0,flexShrink:1,wordBreak:"break-all",whiteSpace:"no-wrap",overflow:"hidden",width:"100%",borderRadius:"3px"},t)}},72183:(e,t,n)=>{n.d(t,{N:()=>u});var r=n(18955),a=n(12115),i=n(10022),u=function(){var e=(0,i.C$)().hideDates,t=(0,r.k)(),n=(0,a.useCallback)(function(e){var n=new Date(e);return"string"==typeof e&&isNaN(n.getTime())&&(n=new Date(e.replace(/(\d{4}-\d{2}-\d{2}) (\d{2}:\d{2}:\d{2}):(\d{3})/,"$1T$2.$3"))),t.dateTime(n,"short")},[t]);return{formatterGallery:(0,a.useCallback)(function(t){return e||!t?null:n(t)},[n,e]),formatter:n}}},78405:(e,t,n)=>{n.d(t,{A:()=>u});var r=n(95155),a=n(41574),i=n(43791);n(12115);let u=function(e){var t=e.dimensions,n=e.asThumb;return(0,r.jsx)(a.A,{sx:{display:n?"flex":"block",width:"100%",height:"100%"},children:(0,r.jsx)(a.A,{sx:{margin:"0 auto",aspectRatio:t.aspectRatioCSS,maxWidth:"100%",maxHeight:"100%"},children:(0,r.jsx)(i.A,{variant:"rectangular",width:"100%",height:"100%"})})})}},80068:(e,t,n)=>{n.d(t,{y:()=>r});var r=function(e){return Math.pow(2,Math.ceil(Math.log2(Math.abs(e))))}},96112:(e,t,n)=>{n.d(t,{Ay:()=>I,BF:()=>m,Ll:()=>h});var r=n(61975),a=n(82732),i=n(45849),u=n(22043),o=n(71450),l=n(12115),s=n(89386),c=n(4599),d=n(10022),f=n(14217),v=n(71667),h="NEW_GROUP",m=function(e){return e.trim().replace(/[^A-Z0-9_-]+/gi,"_").toLowerCase()},p=function(e,t){return e.find(function(e){return e.group.groups.find(function(e){return e.id===t})})||null},g=function(e){return e.CREATE_NEW="CREATE_NEW",e.EDIT_EXISTING="EDIT_EXISTING",e.NOT_EDITING="NOT_EDITING",e}(g||{});let I=function(){var e,t=(0,d.cr)().imageSelection,n=(0,d.vT)(),g=n.editImageGroup,I=n.cancelEditImageGroup,E=(0,d.Vs)(),b=E.imageGroups,w=E.addImageGroup,T=E.updateImageGroup,x=E.groupImagesAdd,S=E.ungroupImages,_=(0,c.g)(),P=_.navigateToGroup,A=_.navigateToImage,y=(0,s.Z)(),C=y.path,k=y.view,N=y.paths,R=y.pathsOptions,M=t.length,D=(null==g?void 0:g.groupId)?g.groupId===h?"CREATE_NEW":"EDIT_EXISTING":"NOT_EDITING",G=(0,l.useMemo)(function(){switch(D){case"CREATE_NEW":var e=(null==g?void 0:g.newGroupTitle)||"";return{imageGroup:null,parentPathMap:N.find(function(e){return e.group.id===k.id})||null,title:e,slug:m(e),slugTouched:!1};case"EDIT_EXISTING":var t=b.find(function(e){return e.id===(null==g?void 0:g.groupId)})||null;return{imageGroup:t,parentPathMap:(null==g?void 0:g.groupId)?p(N,g.groupId):null,title:(null==t?void 0:t.title)||"",slug:(null==t?void 0:t.slug)||"",slugTouched:!0};default:return{imageGroup:null,parentPathMap:null,title:"",slug:"",slugTouched:!1}}},[g,D,b,N,k]),F=(0,u._)((0,l.useState)(G.title),2),L=F[0],j=F[1],H=(0,u._)((0,l.useState)(G.slug),2),W=H[0],O=H[1],Y=(0,u._)((0,l.useState)(G.slugTouched),2),B=Y[0],U=Y[1],V=(0,u._)((0,l.useState)((null==(e=G.parentPathMap)?void 0:e.absolutePath)||""),2),X=V[0],$=V[1],Z=(0,l.useMemo)(function(){if(!(null==g?void 0:g.groupId))return"";if((null==g?void 0:g.groupId)===h)return"".concat(C).concat(W,"/");var e=p(N,g.groupId),t=(null==e?void 0:e.absolutePath)||"";return"".concat(t).concat(W,"/")},[g,N,C,W]),z=(0,l.useMemo)(function(){return!!N.find(function(e){return e.absolutePath===Z})},[Z,N]),K=(0,l.useMemo)(function(){var e;return W!==(null==(e=G.imageGroup)?void 0:e.slug)},[G,W]),Q=(0,l.useMemo)(function(){return!!W&&("CREATE_NEW"===D?!z:"EDIT_EXISTING"===D&&(!K||!z))},[D,W,z,K]),q=(0,l.useMemo)(function(){var e,t,n=(null==(e=N.find(function(e){return e.absolutePath===X}))?void 0:e.group.id)||"";return((null==(t=G.parentPathMap)?void 0:t.group.id)||"")!==n},[G,X,N]),J=(0,l.useMemo)(function(){switch(D){case"EDIT_EXISTING":var e,t=(null==(e=N.find(function(e){return e.group.id===(null==g?void 0:g.groupId)}))?void 0:e.absolutePath)||"";return R.filter(function(e){var n=e.value;return!n.startsWith(Z)&&n!==t});case"CREATE_NEW":return R;default:return[]}},[Z,g,D,N,R]);return{editId:(null==g?void 0:g.groupId)||null,absoluteSlug:Z,possibleParents:J,slug:W,title:L,canConfirm:Q,canMove:q,slugIsInUse:z,slugWasChanged:K,parentSlug:X,selectionCount:M,setSlug:function(e){O(e),U(!0)},setTitle:function(e){j(e),(e.length<2||!B)&&(U(!1),O(m(e)))},setParentSlug:$,confirm:function(){if(I(),Q&&g){var e,n=(null==(e=N.find(function(e){return e.absolutePath===X}))?void 0:e.group.id)||"";if(g.groupId===h){if(!g.newGroupCover)return;var r=(0,f.z)();w({id:r,slug:W,title:L,created:(0,v.J)(),coverImage:g.newGroupCover,images:t,groups:[]},n),P(r,0)}else{if(!G.imageGroup)return;T((0,i._)((0,a._)({},G.imageGroup),{slug:W,title:L}),n),P(g.groupId,0)}}},move:function(){return(0,r._)(function(){var e,n;return(0,o.YH)(this,function(r){return I(),q&&((n=(null==(e=N.find(function(e){return e.absolutePath===X}))?void 0:e.group.id)||"")?x(n,t):S(t),A(t[0])),[2]})})()},cancelEditImageGroup:I}}}}]);