"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[9293],{6840:(t,n,r)=>{r.d(n,{h:()=>u,i:()=>o});var e=r(61975),s=r(71450),i=r(12115),o=(0,i.createContext)({runWithImage:function(){return(0,e._)(function(){return(0,s.YH)(this,function(t){throw Error("Plugin Context is missing")})})()},runWithImages:function(){return(0,e._)(function(){return(0,s.YH)(this,function(t){throw Error("Plugin Context is missing")})})()},validateAndAddPlugin:function(){return(0,e._)(function(){return(0,s.YH)(this,function(t){throw Error("Plugin Context is missing")})})()}}),u=function(){return(0,i.useContext)(o)}},25969:(t,n,r)=>{r.d(n,{j:()=>o});var e=r(22043),s=r(20063),i=r(12115),o=function(){var t=(0,s.usePathname)(),n=(0,e._)((0,i.useState)(window.location.search),2),r=n[0],o=n[1],u=(0,i.useMemo)(function(){return new URLSearchParams(r)},[r]);(0,i.useEffect)(function(){var t=function(){window.setTimeout(function(){o(function(t){return window.location.search!==t?window.location.search:t})},1)};t(),window.addEventListener("popstate",t);var n=history.pushState,r=history.replaceState;return history.pushState=function(){for(var r=arguments.length,e=Array(r),s=0;s<r;s++)e[s]=arguments[s];n.apply(this,e),t()},history.replaceState=function(){for(var n=arguments.length,e=Array(n),s=0;s<n;s++)e[s]=arguments[s];r.apply(this,e),t()},function(){window.removeEventListener("popstate",t),history.pushState=n,history.replaceState=r}},[u,t]);var a=(0,i.useMemo)(function(){return u.toString()},[u]);return{fullPath:(0,i.useMemo)(function(){return a?"".concat(t,"?").concat(a):t},[t,a]),pathname:t,query:a,searchParams:u}}},39293:(t,n,r)=>{r.r(n),r.d(n,{default:()=>P});var e=r(95155),s=r(4615),i=r(41574),o=r(64647),u=r(37440),a=r(41942),c=r(52619),l=r.n(c),h=r(20063),d=r(18955),f=r(12115),p=r(61975),g=r(22043),v=r(71450),y=r(81637),m=r(6840),w=r(25969),x=r(50751),S=r(72879),A=["https://herrzatacke.github.io","https://localhost:5000","https://127.0.01:5000","http://localhost:5000","http://127.0.01:5000"],C=function(){var t=(0,w.j)().searchParams.get("pluginUrl")||"",n=(0,y.vx)(t),r=(0,g._)((0,f.useState)(!1),2),e=r[0],s=r[1],i=(0,S.h)().plugins,o=(0,x.A)().setError,u=(0,m.h)().validateAndAddPlugin,a=A.some(function(t){var r=(0,y.vx)(t);return r.protocol===n.protocol&&r.host===n.host}),c=i.some(function(n){return n.url===t}),l=(0,f.useCallback)(function(){return(0,p._)(function(){return(0,v.YH)(this,function(n){switch(n.label){case 0:return s(!0),[4,u({url:t})];case 1:return n.sent()||o(Error("Could not install plugin.")),(0,h.redirect)("/settings/plugins",h.RedirectType.replace),[2]}})})()},[o,t,u]);return{url:t,pending:e,pluginExists:c,source:"".concat(n.protocol,"//").concat(n.host),isTrusted:a,addPlugin:l}};let P=function(){var t=(0,d.c3)("AddPlugin"),n=C(),r=n.url,c=n.source,f=n.isTrusted,p=n.pending,g=n.pluginExists,v=n.addPlugin;return r?p?null:(0,e.jsxs)(a.A,{direction:"column",gap:4,children:[f?null:(0,e.jsx)(s.A,{severity:"error",variant:"filled",children:t("notTrusted",{source:c})}),g?(0,e.jsxs)(e.Fragment,{children:[(0,e.jsx)(s.A,{severity:"warning",variant:"filled",children:t("alreadyInstalled",{url:r})}),(0,e.jsx)(u.A,{component:l(),href:"/settings/plugins",children:t("goToPlugins")})]}):(0,e.jsxs)(e.Fragment,{children:[(0,e.jsx)(s.A,{severity:f?"success":"warning",variant:"filled",children:t("willAdd",{url:r})}),(0,e.jsx)(i.A,{children:(0,e.jsx)(o.A,{color:f?"success":"warning",variant:"contained",sx:{fontSize:20,px:8,py:2,mx:"auto",display:"block"},disabled:g,onClick:v,children:t("addButton")})})]})]}):((0,h.redirect)("/settings/plugins"),null)}},50751:(t,n,r)=>{r.d(n,{A:()=>l});var e=r(82732),s=r(45849),i=r(45377),o=r(36117),u=r.n(o),a=r(44344),c=r(74879);let l=(0,r(25959).v)(function(t,n){return{downloadHashes:[],dragover:!1,errors:[],isFullscreen:!1,lightboxImage:null,printerBusy:!1,printerData:null,printerFunctions:[],showSerials:!1,syncBusy:!1,syncSelect:!1,trashBusy:!1,trashCount:{frames:0,images:0,show:!1},videoSelection:[],dismissError:function(r){return t({errors:n().errors.filter(function(t,n){return n!==r})})},setDownloadHashes:function(n){return t({downloadHashes:n})},setDragover:function(n){return t({dragover:n})},setError:function(r){return t({errors:(0,i._)(n().errors).concat([{error:r,timestamp:u()().unix(),id:(0,c.A)()}])})},setIsFullscreen:function(n){return t({isFullscreen:n})},setPrinterBusy:function(n){return t({printerBusy:n})},setPrinterData:function(n){return t({printerData:n})},setPrinterFunctions:function(n){return t({printerFunctions:n})},setShowSerials:function(n){return t({showSerials:n})},setSyncBusy:function(n){return t({syncBusy:n})},setSyncSelect:function(n){return t({syncSelect:n})},showTrashCount:function(r){return t({trashCount:(0,s._)((0,e._)({},n().trashCount),{show:r})})},setTrashBusy:function(n){return t({trashBusy:n})},updateTrashCount:function(r,i){return t({trashCount:(0,s._)((0,e._)({},n().trashCount),{frames:r,images:i})})},setVideoSelection:function(n){return t({videoSelection:n})},setLightboxImage:function(n){null===n&&a.A.isEnabled&&a.A.exit(),t({lightboxImage:n})}}})}}]);