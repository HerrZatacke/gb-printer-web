(()=>{"use strict";function t(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(t){return Object.getOwnPropertyDescriptor(r,t).enumerable}))),n.forEach(function(e){var n;n=r[e],e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n})}return t}function e(t,e){return e=null!=e?e:{},Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(e)):(function(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);r.push.apply(r,n)}return r})(Object(e)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(e,r))}),t}function r(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=Array(e);r<e;r++)n[r]=t[r];return n}function n(t){return function(t){if(Array.isArray(t))return r(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||function(t,e){if(t){if("string"==typeof t)return r(t,void 0);var n=Object.prototype.toString.call(t).slice(8,-1);if("Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return r(t,void 0)}}(t)||function(){throw TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}let o=function(t){return t.filter(function(e,r){return t.findIndex(function(t){return t===e})===r})};var u=function(t,e){return t.filter(function(t){return!e.includes(t)})},a=function(r){var a=[],c=[];return{groups:r.map(function(r){var i=o(u(null==r?void 0:r.images,a)),s=o(u(null==r?void 0:r.groups,c));return a=o(n(a).concat(n(r.images))),c=o(n(c).concat(n(r.groups))),e(t({},r),{images:i,groups:s})}),usedImageHashes:a,usedGroupIDs:c}},c=function(e,r){return function(u,a){var c=!!e.find(function(t){return a.hash===t}),i=r.find(function(t){var e=t.coverImage;return a.hash===e}),s=!!i,l=t({},a);return(null==i?void 0:i.tags.length)&&(l.tags=o(n(l.tags).concat(n(i.tags)))),c||s?n(u).concat([l]):u}},i=function(t,e){return e.reduce(function(e,r){for(var o=r.slug.replace(/[^A-Z0-9_-]+/gi,"_"),u=0,a="".concat(t).concat(o,"/"),c=function(t){return -1!==e.findIndex(function(e){return e.absolutePath===t})};c(a);)u+=1,a="".concat(t).concat(o,"_").concat(u,"/");return n(e).concat([{absolutePath:a,group:r}],n(i(a,r.groups)))},[])},s=function(t,e){return e.groups.length+e.images.length?n(t).concat([e]):t},l=function(t,e,r){return function(u){if(t>20){var a,i={type:"error",error:'Reached maximum inflate depth at group "'.concat(u.title||u.slug,'" (').concat(u.id,")")};self.postMessage(i),a=[]}else try{a=u.groups.reduce(function(t,e){var o=r.groups.find(function(t){return t.id===e});return o?n(t).concat([o]):t},[]).map(l(t+1,e,r)).reduce(s,[])}catch(t){a=[]}var f=e.reduce(c(u.images,a),[]),g=f.find(function(t){return t.hash===u.coverImage})||f[0],p=(null==g?void 0:g.hash)||u.coverImage,d=o(f.map(function(t){return t.tags}).flat(1));return{id:u.id,slug:u.slug,created:u.created,title:u.title,coverImage:p,groups:a,images:f,tags:d}}};self.onmessage=function(r){var o=Date.now(),u=r.data,f=u.imageGroups,g=u.stateImages,p=a(f),d=p.groups.map(l(0,g,p)).reduce(s,[]).filter(function(t){var e=t.id;return!p.usedGroupIDs.includes(e)}),m=g.reduce(function(t,e){var r=e.hash;return p.usedImageHashes.includes(r)?t:n(t).concat([r])},[]),v=e(t({},{id:"ROOT",slug:"",created:"",title:"Home",coverImage:"",images:[],groups:[],tags:[]}),{groups:d,images:g.reduce(c(m,d),[])}),y=i("",v.groups),b=y.reduce(function(t,e){var r=e.group,o=e.absolutePath,u=Array(o.split("/").length-1).fill("â€‡").join("");return n(t).concat([{value:o,name:"".concat(u).concat(r.title," (/").concat(o.replace(/\/$/,""),")")}])},[{value:"",name:"/"}]),h={type:"result",root:v,paths:y,pathsOptions:b,duration:Date.now()-o};self.postMessage(h)}})(),_N_E={};