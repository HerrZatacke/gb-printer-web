"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[9293],{6840:(t,n,r)=>{r.d(n,{h:()=>u,i:()=>o});var e=r(61975),i=r(71450),s=r(12115),o=(0,s.createContext)({runWithImage:function(){return(0,e._)(function(){return(0,i.YH)(this,function(t){throw Error("Plugin Context is missing")})})()},runWithImages:function(){return(0,e._)(function(){return(0,i.YH)(this,function(t){throw Error("Plugin Context is missing")})})()},validateAndAddPlugin:function(){return(0,e._)(function(){return(0,i.YH)(this,function(t){throw Error("Plugin Context is missing")})})()}}),u=function(){return(0,s.useContext)(o)}},25969:(t,n,r)=>{r.d(n,{j:()=>o});var e=r(22043),i=r(20063),s=r(12115),o=function(){var t=(0,i.usePathname)(),n=(0,e._)((0,s.useState)(window.location.search),2),r=n[0],o=n[1],u=(0,s.useMemo)(function(){return new URLSearchParams(r)},[r]);(0,s.useEffect)(function(){var t=function(){window.setTimeout(function(){o(function(t){return window.location.search!==t?window.location.search:t})},1)};t(),window.addEventListener("popstate",t);var n=history.pushState,r=history.replaceState;return history.pushState=function(){for(var r=arguments.length,e=Array(r),i=0;i<r;i++)e[i]=arguments[i];n.apply(this,e),t()},history.replaceState=function(){for(var n=arguments.length,e=Array(n),i=0;i<n;i++)e[i]=arguments[i];r.apply(this,e),t()},function(){window.removeEventListener("popstate",t),history.pushState=n,history.replaceState=r}},[u,t]);var a=(0,s.useMemo)(function(){return u.toString()},[u]);return{fullPath:(0,s.useMemo)(function(){return a?"".concat(t,"?").concat(a):t},[t,a]),pathname:t,query:a,searchParams:u}}},39293:(t,n,r)=>{r.r(n),r.d(n,{default:()=>j});var e=r(95155),i=r(4615),s=r(41574),o=r(64647),u=r(37440),a=r(41942),c=r(52619),l=r.n(c),h=r(20063),d=r(18955),p=r(12115),f=r(61975),g=r(22043),v=r(71450),w=r(81637),m=r(6840),x=r(25969),y=r(50751),A=r(72879),P=["https://herrzatacke.github.io","https://localhost:5000","https://127.0.01:5000","http://localhost:5000","http://127.0.01:5000"],E=function(){var t=(0,x.j)().searchParams.get("pluginUrl")||"",n=(0,w.vx)(t),r=(0,g._)((0,p.useState)(!1),2),e=r[0],i=r[1],s=(0,A.h)().plugins,o=(0,y.A)().setError,u=(0,m.h)().validateAndAddPlugin,a=P.some(function(t){var r=(0,w.vx)(t);return r.protocol===n.protocol&&r.host===n.host}),c=s.some(function(n){return n.url===t}),l=(0,p.useCallback)(function(){return(0,f._)(function(){return(0,v.YH)(this,function(n){switch(n.label){case 0:return i(!0),[4,u({url:t})];case 1:return n.sent()||o(Error("Could not install plugin.")),(0,h.redirect)("/settings/plugins",h.RedirectType.replace),[2]}})})()},[o,t,u]);return{url:t,pending:e,pluginExists:c,source:"".concat(n.protocol,"//").concat(n.host),isTrusted:a,addPlugin:l}};let j=function(){var t=(0,d.c3)("AddPlugin"),n=E(),r=n.url,c=n.source,p=n.isTrusted,f=n.pending,g=n.pluginExists,v=n.addPlugin;return r?f?null:(0,e.jsxs)(a.A,{direction:"column",gap:4,children:[p?null:(0,e.jsx)(i.A,{severity:"error",variant:"filled",children:t("notTrusted",{source:c})}),g?(0,e.jsxs)(e.Fragment,{children:[(0,e.jsx)(i.A,{severity:"warning",variant:"filled",children:t("alreadyInstalled",{url:r})}),(0,e.jsx)(u.A,{component:l(),href:"/settings/plugins",children:t("goToPlugins")})]}):(0,e.jsxs)(e.Fragment,{children:[(0,e.jsx)(i.A,{severity:p?"success":"warning",variant:"filled",children:t("willAdd",{url:r})}),(0,e.jsx)(s.A,{children:(0,e.jsx)(o.A,{color:p?"success":"warning",variant:"contained",sx:{fontSize:20,px:8,py:2,mx:"auto",display:"block"},disabled:g,onClick:v,children:t("addButton")})})]})]}):((0,h.redirect)("/settings/plugins"),null)}}}]);