"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[9293],{6840:(n,t,r)=>{r.d(t,{h:()=>u,i:()=>o});var e=r(61975),i=r(71450),s=r(12115),o=(0,s.createContext)({runWithImage:function(){return(0,e._)(function(){return(0,i.YH)(this,function(n){throw Error("Plugin Context is missing")})})()},runWithImages:function(){return(0,e._)(function(){return(0,i.YH)(this,function(n){throw Error("Plugin Context is missing")})})()},validateAndAddPlugin:function(){return(0,e._)(function(){return(0,i.YH)(this,function(n){throw Error("Plugin Context is missing")})})()}}),u=function(){return(0,s.useContext)(o)}},25969:(n,t,r)=>{r.d(t,{j:()=>o});var e=r(22043),i=r(20063),s=r(12115),o=function(){var n=(0,i.usePathname)(),t=(0,e._)((0,s.useState)(window.location.search),2),r=t[0],o=t[1],u=(0,s.useMemo)(function(){return new URLSearchParams(r)},[r]);(0,s.useEffect)(function(){var n=function(){window.setTimeout(function(){o(function(n){return window.location.search!==n?window.location.search:n})},1)};n(),window.addEventListener("popstate",n);var t=history.pushState,r=history.replaceState;return history.pushState=function(){for(var r=arguments.length,e=Array(r),i=0;i<r;i++)e[i]=arguments[i];t.apply(this,e),n()},history.replaceState=function(){for(var t=arguments.length,e=Array(t),i=0;i<t;i++)e[i]=arguments[i];r.apply(this,e),n()},function(){window.removeEventListener("popstate",n),history.pushState=t,history.replaceState=r}},[u,n]);var a=(0,s.useMemo)(function(){return u.toString()},[u]);return{fullPath:(0,s.useMemo)(function(){return a?"".concat(n,"?").concat(a):n},[n,a]),pathname:n,query:a,searchParams:u}}},39293:(n,t,r)=>{r.r(t),r.d(t,{default:()=>P});var e=r(95155),i=r(4615),s=r(41574),o=r(64647),u=r(37440),a=r(41942),c=r(52619),l=r.n(c),h=r(20063),d=r(18955),f=r(12115),p=r(61975),g=r(22043),v=r(71450),m=r(81637),w=r(6840),y=r(25969),x=r(50751),S=r(52556),A=["https://herrzatacke.github.io","https://localhost:5000","https://127.0.01:5000","http://localhost:5000","http://127.0.01:5000"],C=function(){var n=(0,y.j)().searchParams.get("pluginUrl")||"",t=(0,m.vx)(n),r=(0,g._)((0,f.useState)(!1),2),e=r[0],i=r[1],s=(0,S.h)().plugins,o=(0,x.A)().setError,u=(0,w.h)().validateAndAddPlugin,a=A.some(function(n){var r=(0,m.vx)(n);return r.protocol===t.protocol&&r.host===t.host}),c=s.some(function(t){return t.url===n}),l=(0,f.useCallback)(function(){return(0,p._)(function(){return(0,v.YH)(this,function(t){switch(t.label){case 0:return i(!0),[4,u({url:n})];case 1:return t.sent()||o(Error("Could not install plugin.")),(0,h.redirect)("/settings/plugins",h.RedirectType.replace),[2]}})})()},[o,n,u]);return{url:n,pending:e,pluginExists:c,source:"".concat(t.protocol,"//").concat(t.host),isTrusted:a,addPlugin:l}};let P=function(){var n=(0,d.c3)("AddPlugin"),t=C(),r=t.url,c=t.source,f=t.isTrusted,p=t.pending,g=t.pluginExists,v=t.addPlugin;return r?p?null:(0,e.jsxs)(a.A,{direction:"column",gap:4,children:[f?null:(0,e.jsx)(i.A,{severity:"error",variant:"filled",children:n("notTrusted",{source:c})}),g?(0,e.jsxs)(e.Fragment,{children:[(0,e.jsx)(i.A,{severity:"warning",variant:"filled",children:n("alreadyInstalled",{url:r})}),(0,e.jsx)(u.A,{component:l(),href:"/settings/plugins",children:n("goToPlugins")})]}):(0,e.jsxs)(e.Fragment,{children:[(0,e.jsx)(i.A,{severity:f?"success":"warning",variant:"filled",children:n("willAdd",{url:r})}),(0,e.jsx)(s.A,{children:(0,e.jsx)(o.A,{color:f?"success":"warning",variant:"contained",sx:{fontSize:20,px:8,py:2,mx:"auto",display:"block"},disabled:g,onClick:v,children:n("addButton")})})]})]}):((0,h.redirect)("/settings/plugins"),null)}},50751:(n,t,r)=>{r.d(t,{A:()=>l});var e=r(82732),i=r(45849),s=r(45377),o=r(36117),u=r.n(o),a=r(44344),c=r(74879);let l=(0,r(25959).v)(function(n,t){return{downloadHashes:[],dragover:!1,errors:[],isFullscreen:!1,lightboxImage:null,printerBusy:!1,printerData:null,printerFunctions:[],showSerials:!1,syncBusy:!1,syncSelect:!1,trashCount:{frames:0,images:0,show:!1},videoSelection:[],dismissError:function(r){return n({errors:t().errors.filter(function(n,t){return t!==r})})},setDownloadHashes:function(t){return n({downloadHashes:t})},setDragover:function(t){return n({dragover:t})},setError:function(r){return n({errors:(0,s._)(t().errors).concat([{error:r,timestamp:u()().unix(),id:(0,c.A)()}])})},setIsFullscreen:function(t){return n({isFullscreen:t})},setPrinterBusy:function(t){return n({printerBusy:t})},setPrinterData:function(t){return n({printerData:t})},setPrinterFunctions:function(t){return n({printerFunctions:t})},setShowSerials:function(t){return n({showSerials:t})},setSyncBusy:function(t){return n({syncBusy:t})},setSyncSelect:function(t){return n({syncSelect:t})},showTrashCount:function(r){return n({trashCount:(0,i._)((0,e._)({},t().trashCount),{show:r})})},updateTrashCount:function(r,s){return n({trashCount:(0,i._)((0,e._)({},t().trashCount),{frames:r,images:s})})},setVideoSelection:function(t){return n({videoSelection:t})},setLightboxImage:function(t){null===t&&a.A.isEnabled&&a.A.exit(),n({lightboxImage:t})}}})}}]);