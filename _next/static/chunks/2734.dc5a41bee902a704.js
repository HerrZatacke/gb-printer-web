"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[2734],{2734:(r,t,n)=>{n.r(t),n.d(t,{default:()=>w});var e=n(95155),s=n(9665),i=n(53267),o=n(7642),u=n(31960),a=n(7068),c=n(6874),l=n.n(c),g=n(35695),h=n(12115),d=n(97004),f=n(78538),p=n(39249),m=n(84684),x=n(6617),v=n(29032),y=n(46498),P=n(11760),_=["https://herrzatacke.github.io","https://localhost:5000","https://127.0.01:5000","http://localhost:5000","http://127.0.01:5000"],b=function(){var r=(0,v.j)().searchParams.get("pluginUrl")||"",t=(0,m.vx)(r),n=(0,f._)((0,h.useState)(!1),2),e=n[0],s=n[1],i=(0,P.h)().plugins,o=(0,y.A)().setError,u=(0,x.h)().validateAndAddPlugin,a=_.some(function(r){var n=(0,m.vx)(r);return n.protocol===t.protocol&&n.host===t.host}),c=i.some(function(t){return t.url===r}),l=(0,h.useCallback)((0,d._)(function(){return(0,p.YH)(this,function(t){switch(t.label){case 0:return s(!0),[4,u({url:r})];case 1:return t.sent()||o(Error("Could not install plugin.")),(0,g.redirect)("/settings/plugins",g.RedirectType.replace),[2]}})}),[o,r,u]);return{url:r,pending:e,pluginExists:c,source:"".concat(t.protocol,"//").concat(t.host),isTrusted:a,addPlugin:l}};let w=function(){var r=b(),t=r.url,n=r.source,c=r.isTrusted,h=r.pending,d=r.pluginExists,f=r.addPlugin;return t?h?null:(0,e.jsxs)(a.default,{direction:"column",gap:4,children:[c?null:(0,e.jsx)(s.default,{severity:"error",variant:"filled",children:'The source "'.concat(n,'" of this plugin is not trusted!!')}),d?(0,e.jsxs)(e.Fragment,{children:[(0,e.jsx)(s.default,{severity:"warning",variant:"filled",children:'The plugin "'.concat(t,'" is already installed')}),(0,e.jsx)(u.default,{component:l(),href:"/settings/plugins",children:"Go to plugins"})]}):(0,e.jsxs)(e.Fragment,{children:[(0,e.jsx)(s.default,{severity:c?"success":"warning",variant:"filled",children:"This will add ".concat(t," to your plugins.")}),(0,e.jsx)(i.default,{children:(0,e.jsx)(o.default,{color:c?"success":"warning",variant:"contained",sx:{fontSize:20,px:8,py:2,mx:"auto",display:"block"},disabled:d,onClick:f,children:"Add"})})]})]}):((0,g.redirect)("/settings/plugins"),null)}},6617:(r,t,n)=>{n.d(t,{h:()=>u,i:()=>o});var e=n(97004),s=n(39249),i=n(12115),o=(0,i.createContext)({runWithImage:(0,e._)(function(){return(0,s.YH)(this,function(r){throw Error("Plugin Context is missing")})}),runWithImages:(0,e._)(function(){return(0,s.YH)(this,function(r){throw Error("Plugin Context is missing")})}),validateAndAddPlugin:(0,e._)(function(){return(0,s.YH)(this,function(r){throw Error("Plugin Context is missing")})})}),u=function(){return(0,i.useContext)(o)}},29032:(r,t,n)=>{n.d(t,{j:()=>i});var e=n(35695),s=n(12115),i=function(){var r=(0,e.usePathname)(),t=(0,e.useSearchParams)(),n=(0,s.useMemo)(function(){return t.toString()},[t]);return{fullPath:(0,s.useMemo)(function(){return n?"".concat(r,"?").concat(n):r},[r,n]),pathname:r,query:n,searchParams:t}}},46498:(r,t,n)=>{n.d(t,{A:()=>h});var e=n(86447),s=n(693),i=n(60376),o=n(577),u=n(30832),a=n.n(u),c=n(9779),l=n(51368),g=(0,n(65453).v)(function(r,t){return{dragover:!1,errors:[],isFullscreen:!1,lightboxImage:null,printerBusy:!1,printerData:null,printerFunctions:[],progress:[],progressLog:{git:[],dropbox:[]},showSerials:!1,syncBusy:!1,syncSelect:!1,trashCount:{frames:0,images:0,show:!1},videoSelection:[],dismissError:function(n){return r({errors:t().errors.filter(function(r,t){return t!==n})})},resetProgressLog:function(){return r({progressLog:{git:[],dropbox:[]}})},setDragover:function(t){return r({dragover:t})},setError:function(n){return r({errors:(0,o._)(t().errors).concat([{error:n,timestamp:a()().unix(),id:(0,l.A)()}])})},setIsFullscreen:function(t){return r({isFullscreen:t})},setPrinterBusy:function(t){return r({printerBusy:t})},setPrinterData:function(t){return r({printerData:t})},setPrinterFunctions:function(t){return r({printerFunctions:t})},setShowSerials:function(t){return r({showSerials:t})},setSyncBusy:function(t){return r({syncBusy:t})},setSyncSelect:function(t){return r({syncSelect:t})},showTrashCount:function(n){return r({trashCount:(0,i._)((0,s._)({},t().trashCount),{show:n})})},updateTrashCount:function(n,e){return r({trashCount:(0,i._)((0,s._)({},t().trashCount),{frames:n,images:e})})},setVideoSelection:function(t){return r({videoSelection:t})},startProgress:function(t){var n={id:(0,l.A)(),label:t,value:0};return r(function(r){var t=r.progress;return{progress:(0,o._)(t).concat([n])}}),n.id},setProgress:function(t,n){r(function(r){return{progress:r.progress.map(function(r){return r.id!==t?r:(0,i._)((0,s._)({},r),{value:n})})}})},stopProgress:function(t){r(function(r){return{progress:r.progress.filter(function(r){return r.id!==t})}})},setProgressLog:function(n,u){var a=t().progressLog;r({progressLog:(0,i._)((0,s._)({},a),(0,e._)({},n,[u].concat((0,o._)(a[n]))))})},setLightboxImage:function(t){null===t&&c.A.exit(),r({lightboxImage:t})},setLightboxImageNext:function(n){var e=t().lightboxImage;null!==e&&r({lightboxImage:Math.min(e+1,n-1)})},setLightboxImagePrev:function(){var n=t().lightboxImage;null!==n&&r({lightboxImage:Math.max(n-1,0)})}}});window.se=g.getState().setError;let h=g}}]);