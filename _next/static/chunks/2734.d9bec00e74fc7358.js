"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[2734],{2734:(t,n,r)=>{r.r(n),r.d(n,{default:()=>b});var e=r(95155),i=r(9665),s=r(53267),o=r(7642),u=r(31960),a=r(7068),c=r(6874),l=r.n(c),h=r(35695),d=r(12115),f=r(97004),g=r(62570),p=r(39249),m=r(84684),v=r(6617),x=r(29032),y=r(46498),w=r(11760),S=["https://herrzatacke.github.io","https://localhost:5000","https://127.0.01:5000","http://localhost:5000","http://127.0.01:5000"],C=function(){var t=(0,x.j)().searchParams.get("pluginUrl")||"",n=(0,m.vx)(t),r=(0,g._)((0,d.useState)(!1),2),e=r[0],i=r[1],s=(0,w.h)().plugins,o=(0,y.A)().setError,u=(0,v.h)().validateAndAddPlugin,a=S.some(function(t){var r=(0,m.vx)(t);return r.protocol===n.protocol&&r.host===n.host}),c=s.some(function(n){return n.url===t}),l=(0,d.useCallback)((0,f._)(function(){return(0,p.YH)(this,function(n){switch(n.label){case 0:return i(!0),[4,u({url:t})];case 1:return n.sent()||o(Error("Could not install plugin.")),(0,h.redirect)("/settings/plugins",h.RedirectType.replace),[2]}})}),[o,t,u]);return{url:t,pending:e,pluginExists:c,source:"".concat(n.protocol,"//").concat(n.host),isTrusted:a,addPlugin:l}};let b=function(){var t=C(),n=t.url,r=t.source,c=t.isTrusted,d=t.pending,f=t.pluginExists,g=t.addPlugin;return n?d?null:(0,e.jsxs)(a.default,{direction:"column",gap:4,children:[c?null:(0,e.jsx)(i.default,{severity:"error",variant:"filled",children:'The source "'.concat(r,'" of this plugin is not trusted!!')}),f?(0,e.jsxs)(e.Fragment,{children:[(0,e.jsx)(i.default,{severity:"warning",variant:"filled",children:'The plugin "'.concat(n,'" is already installed')}),(0,e.jsx)(u.default,{component:l(),href:"/settings/plugins",children:"Go to plugins"})]}):(0,e.jsxs)(e.Fragment,{children:[(0,e.jsx)(i.default,{severity:c?"success":"warning",variant:"filled",children:"This will add ".concat(n," to your plugins.")}),(0,e.jsx)(s.default,{children:(0,e.jsx)(o.default,{color:c?"success":"warning",variant:"contained",sx:{fontSize:20,px:8,py:2,mx:"auto",display:"block"},disabled:f,onClick:g,children:"Add"})})]})]}):((0,h.redirect)("/settings/plugins"),null)}},6617:(t,n,r)=>{r.d(n,{h:()=>u,i:()=>o});var e=r(97004),i=r(39249),s=r(12115),o=(0,s.createContext)({runWithImage:(0,e._)(function(){return(0,i.YH)(this,function(t){throw Error("Plugin Context is missing")})}),runWithImages:(0,e._)(function(){return(0,i.YH)(this,function(t){throw Error("Plugin Context is missing")})}),validateAndAddPlugin:(0,e._)(function(){return(0,i.YH)(this,function(t){throw Error("Plugin Context is missing")})})}),u=function(){return(0,s.useContext)(o)}},29032:(t,n,r)=>{r.d(n,{j:()=>o});var e=r(62570),i=r(35695),s=r(12115),o=function(){var t=(0,i.usePathname)(),n=(0,e._)((0,s.useState)(window.location.search),2),r=n[0],o=n[1],u=(0,s.useMemo)(function(){return new URLSearchParams(r)},[r]);(0,s.useEffect)(function(){var t=function(){window.setTimeout(function(){o(function(t){return window.location.search!==t?window.location.search:t})},1)};t(),window.addEventListener("popstate",t);var n=history.pushState,r=history.replaceState;return history.pushState=function(){for(var r=arguments.length,e=Array(r),i=0;i<r;i++)e[i]=arguments[i];n.apply(this,e),t()},history.replaceState=function(){for(var n=arguments.length,e=Array(n),i=0;i<n;i++)e[i]=arguments[i];r.apply(this,e),t()},function(){window.removeEventListener("popstate",t),history.pushState=n,history.replaceState=r}},[u,t]);var a=(0,s.useMemo)(function(){return u.toString()},[u]);return{fullPath:(0,s.useMemo)(function(){return a?"".concat(t,"?").concat(a):t},[t,a]),pathname:t,query:a,searchParams:u}}},46498:(t,n,r)=>{r.d(n,{A:()=>l});var e=r(693),i=r(60376),s=r(577),o=r(30832),u=r.n(o),a=r(9779),c=r(51368);let l=(0,r(65453).v)(function(t,n){return{dragover:!1,errors:[],isFullscreen:!1,lightboxImage:null,printerBusy:!1,printerData:null,printerFunctions:[],showSerials:!1,syncBusy:!1,syncSelect:!1,trashCount:{frames:0,images:0,show:!1},videoSelection:[],dismissError:function(r){return t({errors:n().errors.filter(function(t,n){return n!==r})})},setDragover:function(n){return t({dragover:n})},setError:function(r){return t({errors:(0,s._)(n().errors).concat([{error:r,timestamp:u()().unix(),id:(0,c.A)()}])})},setIsFullscreen:function(n){return t({isFullscreen:n})},setPrinterBusy:function(n){return t({printerBusy:n})},setPrinterData:function(n){return t({printerData:n})},setPrinterFunctions:function(n){return t({printerFunctions:n})},setShowSerials:function(n){return t({showSerials:n})},setSyncBusy:function(n){return t({syncBusy:n})},setSyncSelect:function(n){return t({syncSelect:n})},showTrashCount:function(r){return t({trashCount:(0,i._)((0,e._)({},n().trashCount),{show:r})})},updateTrashCount:function(r,s){return t({trashCount:(0,i._)((0,e._)({},n().trashCount),{frames:r,images:s})})},setVideoSelection:function(n){return t({videoSelection:n})},setLightboxImage:function(n){null===n&&a.A.exit(),t({lightboxImage:n})},setLightboxImageNext:function(r){var e=n().lightboxImage;null!==e&&t({lightboxImage:Math.min(e+1,r-1)})},setLightboxImagePrev:function(){var r=n().lightboxImage;null!==r&&t({lightboxImage:Math.max(r-1,0)})}}})}}]);