/*! License information can be found in af97/iap.js.l.txt */
"use strict";(self.webpackChunkgb_printer_web=self.webpackChunkgb_printer_web||[]).push([[42],{47387:function(t,r,e){e(84944),e(33792),e(21249),e(43290),e(47042),e(83112),e(83710),e(41539),e(39714),e(69600),e(89554),e(54747),e(57327),e(91038),e(78783),e(88674),e(82526),e(41817),e(32165),e(66992),e(33948),e(72443),e(39341),e(73706),e(10408),e(69070),e(78011),e(30489),e(68309),e(68304);var n=e(55140),o=e(13629),i=e(30661),a=e(75500);function c(t){return c="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},c(t)}function u(){u=function(){return t};var t={},r=Object.prototype,e=r.hasOwnProperty,n="function"==typeof Symbol?Symbol:{},o=n.iterator||"@@iterator",i=n.asyncIterator||"@@asyncIterator",a=n.toStringTag||"@@toStringTag";function l(t,r,e){return Object.defineProperty(t,r,{value:e,enumerable:!0,configurable:!0,writable:!0}),t[r]}try{l({},"")}catch(t){l=function(t,r,e){return t[r]=e}}function f(t,r,e,n){var o=r&&r.prototype instanceof p?r:p,i=Object.create(o.prototype),a=new L(n||[]);return i._invoke=function(t,r,e){var n="suspendedStart";return function(o,i){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===o)throw i;return j()}for(e.method=o,e.arg=i;;){var a=e.delegate;if(a){var c=O(a,e);if(c){if(c===h)continue;return c}}if("next"===e.method)e.sent=e._sent=e.arg;else if("throw"===e.method){if("suspendedStart"===n)throw n="completed",e.arg;e.dispatchException(e.arg)}else"return"===e.method&&e.abrupt("return",e.arg);n="executing";var u=s(t,r,e);if("normal"===u.type){if(n=e.done?"completed":"suspendedYield",u.arg===h)continue;return{value:u.arg,done:e.done}}"throw"===u.type&&(n="completed",e.method="throw",e.arg=u.arg)}}}(t,e,a),i}function s(t,r,e){try{return{type:"normal",arg:t.call(r,e)}}catch(t){return{type:"throw",arg:t}}}t.wrap=f;var h={};function p(){}function y(){}function d(){}var v={};l(v,o,(function(){return this}));var m=Object.getPrototypeOf,g=m&&m(m(A([])));g&&g!==r&&e.call(g,o)&&(v=g);var b=d.prototype=p.prototype=Object.create(v);function w(t){["next","throw","return"].forEach((function(r){l(t,r,(function(t){return this._invoke(r,t)}))}))}function E(t,r){function n(o,i,a,u){var l=s(t[o],t,i);if("throw"!==l.type){var f=l.arg,h=f.value;return h&&"object"==c(h)&&e.call(h,"__await")?r.resolve(h.__await).then((function(t){n("next",t,a,u)}),(function(t){n("throw",t,a,u)})):r.resolve(h).then((function(t){f.value=t,a(f)}),(function(t){return n("throw",t,a,u)}))}u(l.arg)}var o;this._invoke=function(t,e){function i(){return new r((function(r,o){n(t,e,r,o)}))}return o=o?o.then(i,i):i()}}function O(t,r){var e=t.iterator[r.method];if(void 0===e){if(r.delegate=null,"throw"===r.method){if(t.iterator.return&&(r.method="return",r.arg=void 0,O(t,r),"throw"===r.method))return h;r.method="throw",r.arg=new TypeError("The iterator does not provide a 'throw' method")}return h}var n=s(e,t.iterator,r.arg);if("throw"===n.type)return r.method="throw",r.arg=n.arg,r.delegate=null,h;var o=n.arg;return o?o.done?(r[t.resultName]=o.value,r.next=t.nextLoc,"return"!==r.method&&(r.method="next",r.arg=void 0),r.delegate=null,h):o:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,h)}function S(t){var r={tryLoc:t[0]};1 in t&&(r.catchLoc=t[1]),2 in t&&(r.finallyLoc=t[2],r.afterLoc=t[3]),this.tryEntries.push(r)}function x(t){var r=t.completion||{};r.type="normal",delete r.arg,t.completion=r}function L(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(S,this),this.reset(!0)}function A(t){if(t){var r=t[o];if(r)return r.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var n=-1,i=function r(){for(;++n<t.length;)if(e.call(t,n))return r.value=t[n],r.done=!1,r;return r.value=void 0,r.done=!0,r};return i.next=i}}return{next:j}}function j(){return{value:void 0,done:!0}}return y.prototype=d,l(b,"constructor",d),l(d,"constructor",y),y.displayName=l(d,a,"GeneratorFunction"),t.isGeneratorFunction=function(t){var r="function"==typeof t&&t.constructor;return!!r&&(r===y||"GeneratorFunction"===(r.displayName||r.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,d):(t.__proto__=d,l(t,a,"GeneratorFunction")),t.prototype=Object.create(b),t},t.awrap=function(t){return{__await:t}},w(E.prototype),l(E.prototype,i,(function(){return this})),t.AsyncIterator=E,t.async=function(r,e,n,o,i){void 0===i&&(i=Promise);var a=new E(f(r,e,n,o),i);return t.isGeneratorFunction(e)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},w(b),l(b,a,"Generator"),l(b,o,(function(){return this})),l(b,"toString",(function(){return"[object Generator]"})),t.keys=function(t){var r=[];for(var e in t)r.push(e);return r.reverse(),function e(){for(;r.length;){var n=r.pop();if(n in t)return e.value=n,e.done=!1,e}return e.done=!0,e}},t.values=A,L.prototype={constructor:L,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(x),!t)for(var r in this)"t"===r.charAt(0)&&e.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var r=this;function n(e,n){return a.type="throw",a.arg=t,r.next=e,n&&(r.method="next",r.arg=void 0),!!n}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],a=i.completion;if("root"===i.tryLoc)return n("end");if(i.tryLoc<=this.prev){var c=e.call(i,"catchLoc"),u=e.call(i,"finallyLoc");if(c&&u){if(this.prev<i.catchLoc)return n(i.catchLoc,!0);if(this.prev<i.finallyLoc)return n(i.finallyLoc)}else if(c){if(this.prev<i.catchLoc)return n(i.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return n(i.finallyLoc)}}}},abrupt:function(t,r){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&e.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=r&&r<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=r,i?(this.method="next",this.next=i.finallyLoc,h):this.complete(a)},complete:function(t,r){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&r&&(this.next=r),h},finish:function(t){for(var r=this.tryEntries.length-1;r>=0;--r){var e=this.tryEntries[r];if(e.finallyLoc===t)return this.complete(e.completion,e.afterLoc),x(e),h}},catch:function(t){for(var r=this.tryEntries.length-1;r>=0;--r){var e=this.tryEntries[r];if(e.tryLoc===t){var n=e.completion;if("throw"===n.type){var o=n.arg;x(e)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(t,r,e){return this.delegate={iterator:A(t),resultName:r,nextLoc:e},"next"===this.method&&(this.arg=void 0),h}},t}function l(t,r,e,n,o,i,a){try{var c=t[i](a),u=c.value}catch(t){return void e(t)}c.done?r(u):Promise.resolve(u).then(n,o)}var f=function(t){return function(r){var e=r%20,n=Math.floor(r/20),o=8*e,i=8*n;return new Array(8).fill(null).map((function(r,e){return t.slice(o+160*(i+e)).slice(0,8)})).flat(1)}},s=[0,256,1,257],h=function(t){for(var r=[],e=0;e<8;e+=1){for(var n=0,o=0;o<8;o+=1){n+=s[t[8*e+o]]<<7-o}r.push((n>>8).toString(16).padStart(2,"0"),(255&n).toString(16).padStart(2,"0"))}return r.join(" ").toUpperCase()};r.Z=function(t){return function(r){var e=r.bitmapQueue,c=r.dither,s=r.contrastBaseValues;e.forEach(function(){var r,e=(r=u().mark((function r(e){var l,p,y,d,v,m,g,b,w,E,O,S,x;return u().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return l=e.imageData,p=e.height,y=e.fileName,d=(0,n._)(l,s,c,[{r:0,g:0,b:0},{r:1,g:0,b:0},{r:2,g:0,b:0},{r:3,g:0,b:0}]),v=d.data,m=Array.from(v).filter((function(t,r){return!(r%4)})),g=20*Math.ceil(p/8),b=f(m),w=new Array(g).fill(null).map((function(t,r){return b(r)})).map(h),r.next=8,(0,i.aj)(w);case 8:return E=r.sent,O=E.dataHash,r.next=12,(0,a.jm)(w);case 12:S=r.sent,x=S.dataHash,t({type:o.d3,payload:{fileName:y,imageHash:O,frameHash:x,tiles:w,tempId:Math.random().toString(16).split(".").pop()}});case 15:case"end":return r.stop()}}),r)})),function(){var t=this,e=arguments;return new Promise((function(n,o){var i=r.apply(t,e);function a(t){l(i,n,o,a,c,"next",t)}function c(t){l(i,n,o,a,c,"throw",t)}a(void 0)}))});return function(t){return e.apply(this,arguments)}}())}}},15177:function(t,r,e){e.d(r,{T6:function(){return s},Z6:function(){return a},d$:function(){return y},fb:function(){return f},jU:function(){return l},k3:function(){return i},oU:function(){return h},q1:function(){return p},vc:function(){return o},z3:function(){return c}});e(47042);var n=e(24022),o="YYYY-MM-DD HH:mm:ss:SSS",i="YYYY-MM-DD",a="HH:mm",c="YYYYMMDD-HHmmss",u=[0,85,170,255],l='{"command":"INIT"}',f='{"command":"DATA", "compressed":0, "more":1}',s='{"command":"DATA","compressed":0,"more":0}',h='{"command":"PRNT","sheets":1,"margin_upper":1,"margin_lower":3,"pallet":228,"density":64 }',p={r:u.slice(),g:u.slice(),b:u.slice(),n:u.slice(),blend:n._I.MULTIPLY},y={shortName:"-",name:"Missing Palette",palette:["#aaaaaa","#999999","#888888","#777777"]}},62651:function(t,r,e){e.r(r),e.d(r,{default:function(){return Bi}});e(19601),e(66992),e(41539),e(88674),e(78783),e(33948),e(92222);var n=e(67294),o=e(40213),i=e(73935),a=e(97779),c=function(t,r){return void 0!==t?t:r},u=e(13629),l=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"cybl",r=arguments.length>1?arguments[1]:void 0;switch(r.type){case u.K0:return r.payload;case u.D5:return c(r.payload.activePalette,t);case u.Or:return r.payload.newSelectedPalette||t;default:return t}};e(57327),e(79753),e(82526),e(41817),e(32165),e(91038),e(47042),e(68309),e(74916);function f(t){return function(t){if(Array.isArray(t))return s(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||function(t,r){if(!t)return;if("string"==typeof t)return s(t,r);var e=Object.prototype.toString.call(t).slice(8,-1);"Object"===e&&t.constructor&&(e=t.constructor.name);if("Map"===e||"Set"===e)return Array.from(t);if("Arguments"===e||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(e))return s(t,r)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function s(t,r){(null==r||r>t.length)&&(r=t.length);for(var e=0,n=new Array(r);e<r;e++)n[e]=t[e];return n}var h=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],r=arguments.length>1?arguments[1]:void 0;switch(r.type){case u.Vo:return[].concat(f(t),[r.payload]);case u.LC:return[];case u.d3:return t.filter((function(t){return t.fileName!==r.payload.fileName}));default:return t}};e(83710);function p(t){return function(t){if(Array.isArray(t))return y(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||function(t,r){if(!t)return;if("string"==typeof t)return y(t,r);var e=Object.prototype.toString.call(t).slice(8,-1);"Object"===e&&t.constructor&&(e=t.constructor.name);if("Map"===e||"Set"===e)return Array.from(t);if("Arguments"===e||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(e))return y(t,r)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function y(t,r){(null==r||r>t.length)&&(r=t.length);for(var e=0,n=new Array(r);e<r;e++)n[e]=t[e];return n}var d=null,v=function(){if(null===d)try{d=window.navigator.canShare({files:[new File([new Blob(p("test"))],"test.txt",{type:"text/plain",lastModified:new Date})]})}catch(t){d=!1}return d};function m(t){return function(t){if(Array.isArray(t))return g(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||function(t,r){if(!t)return;if("string"==typeof t)return g(t,r);var e=Object.prototype.toString.call(t).slice(8,-1);"Object"===e&&t.constructor&&(e=t.constructor.name);if("Map"===e||"Set"===e)return Array.from(t);if("Arguments"===e||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(e))return g(t,r)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function g(t,r){(null==r||r>t.length)&&(r=t.length);for(var e=0,n=new Array(r);e<r;e++)n[e]=t[e];return n}var b=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],r=arguments.length>1?arguments[1]:void 0;switch(r.type){case u.jH:return[r.payload].concat(m(t));case u.GU:case u.Dt:case u.S1:case u.md:case u.BS:case u.Or:case u.Gp:return t.filter((function(t,r){return r}));default:return t}},w=function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];switch((arguments.length>1?arguments[1]:void 0).type){case u.xo:return!0;case u.es:return!1;default:return t}};e(69070),e(47941),e(38880),e(89554),e(54747),e(49337),e(33321);function E(t,r){var e=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);r&&(n=n.filter((function(r){return Object.getOwnPropertyDescriptor(t,r).enumerable}))),e.push.apply(e,n)}return e}function O(t){for(var r=1;r<arguments.length;r++){var e=null!=arguments[r]?arguments[r]:{};r%2?E(Object(e),!0).forEach((function(r){S(t,r,e[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(e)):E(Object(e)).forEach((function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(e,r))}))}return t}function S(t,r,e){return r in t?Object.defineProperty(t,r,{value:e,enumerable:!0,configurable:!0,writable:!0}):t[r]=e,t}var x=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=arguments.length>1?arguments[1]:void 0;switch(r.type){case u.Hn:return{use:t.use};case u.wb:return O(O({},t),r.payload);default:return t}},L=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,r=arguments.length>1?arguments[1]:void 0;switch(r.type){case u.u7:return{hash:r.payload};case u.v6:return r.payload;case u.DS:case u.m9:case u.sV:case u.hT:case u.D5:return null;default:return t}},A=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,r=arguments.length>1?arguments[1]:void 0;switch(r.type){case u.kr:return r.payload;case u.D5:case u.po:case u.wA:return null;default:return t}},j=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=arguments.length>1?arguments[1]:void 0;switch(r.type){case u.iF:return r.payload;case u.iM:case u.$e:return{};default:return t}},F=function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0],r=arguments.length>1?arguments[1]:void 0;switch(r.type){case u.SK:return r.payload;case u.D5:return c(r.payload.enableDebug,t);default:return t}},_=e(31852);function P(t){return function(t){if(Array.isArray(t))return T(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||function(t,r){if(!t)return;if("string"==typeof t)return T(t,r);var e=Object.prototype.toString.call(t).slice(8,-1);"Object"===e&&t.constructor&&(e=t.constructor.name);if("Map"===e||"Set"===e)return Array.from(t);if("Arguments"===e||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(e))return T(t,r)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function T(t,r){(null==r||r>t.length)&&(r=t.length);for(var e=0,n=new Array(r);e<r;e++)n[e]=t[e];return n}var I=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:["png"],r=arguments.length>1?arguments[1]:void 0;switch(r.type){case u.Fw:return r.payload.checked?(0,_.Z)([].concat(P(t),[r.payload.fileType])):t.filter((function(t){return t!==r.payload.fileType}));case u.D5:return c(r.payload.exportFileTypes,t);default:return t}};function D(t){return function(t){if(Array.isArray(t))return k(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||function(t,r){if(!t)return;if("string"==typeof t)return k(t,r);var e=Object.prototype.toString.call(t).slice(8,-1);"Object"===e&&t.constructor&&(e=t.constructor.name);if("Map"===e||"Set"===e)return Array.from(t);if("Arguments"===e||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(e))return k(t,r)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function k(t,r){(null==r||r>t.length)&&(r=t.length);for(var e=0,n=new Array(r);e<r;e++)n[e]=t[e];return n}var N=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[1],r=arguments.length>1?arguments[1]:void 0;switch(r.type){case u.WB:return r.payload.checked?window.navigator.msSaveBlob?[r.payload.factor]:[].concat(D(t),[r.payload.factor]):t.filter((function(t){return t!==r.payload.factor}));case u.D5:return c(r.payload.exportScaleFactors,t);default:return t}},G=(e(26699),e(32023),e(48766)),R=[G.Dh,G.TZ,G.z2,G.ee,G.Vn],C=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],r=arguments.length>1?arguments[1]:void 0;switch(r.type){case u.OD:return r.payload;case u.ou:return t.filter((function(t){return R.includes(t)||r.payload.includes(t)}));default:return t}},M=function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];switch((arguments.length>1?arguments[1]:void 0).type){case u.y9:return!0;case u.j6:case u.OD:return!1;default:return t}},B=function(){var t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],r=arguments.length>1?arguments[1]:void 0;switch(r.type){case u.mW:return r.payload;case u.D5:return c(r.payload.forceMagicCheck,t);default:return t}},U=e(81451);function H(t){return function(t){if(Array.isArray(t))return Z(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||function(t,r){if(!t)return;if("string"==typeof t)return Z(t,r);var e=Object.prototype.toString.call(t).slice(8,-1);"Object"===e&&t.constructor&&(e=t.constructor.name);if("Map"===e||"Set"===e)return Array.from(t);if("Arguments"===e||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(e))return Z(t,r)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Z(t,r){(null==r||r>t.length)&&(r=t.length);for(var e=0,n=new Array(r);e<r;e++)n[e]=t[e];return n}var Y=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],r=arguments.length>1?arguments[1]:void 0;switch(r.type){case u.uy:return(0,U.Z)("id")([r.payload].concat(H(t)));case u.D5:return(0,U.Z)("id")([].concat(H(r.payload.frameGroupNames),H(t)));default:return t}};function V(t){return function(t){if(Array.isArray(t))return $(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||function(t,r){if(!t)return;if("string"==typeof t)return $(t,r);var e=Object.prototype.toString.call(t).slice(8,-1);"Object"===e&&t.constructor&&(e=t.constructor.name);if("Map"===e||"Set"===e)return Array.from(t);if("Arguments"===e||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(e))return $(t,r)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function $(t,r){(null==r||r>t.length)&&(r=t.length);for(var e=0,n=new Array(r);e<r;e++)n[e]=t[e];return n}var J=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],r=arguments.length>1?arguments[1]:void 0;switch(r.type){case u.jJ:return[].concat(V(t),[r.payload]);case u.KD:case u.GU:return t.filter((function(t){return t.tempId!==r.payload.tempId}));default:return t}};e(2707);function z(t){return function(t){if(Array.isArray(t))return W(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||function(t,r){if(!t)return;if("string"==typeof t)return W(t,r);var e=Object.prototype.toString.call(t).slice(8,-1);"Object"===e&&t.constructor&&(e=t.constructor.name);if("Map"===e||"Set"===e)return Array.from(t);if("Arguments"===e||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(e))return W(t,r)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function W(t,r){(null==r||r>t.length)&&(r=t.length);for(var e=0,n=new Array(r);e<r;e++)n[e]=t[e];return n}var X=function(t,r){return t.id<r.id?-1:t.id>r.id?1:0},q=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],r=arguments.length>1?arguments[1]:void 0;switch(r.type){case u.GU:return(0,U.Z)("id")([r.payload].concat(z(t))).sort(X);case u.BS:return t.filter((function(t){return t.id!==r.payload}));case u.wA:return[].concat(z(t.filter((function(t){return t.id!==r.payload.updateId}))),[r.payload.data]).sort(X);case u.D5:return(0,U.Z)("id")(r.payload.frames).sort(X);default:return t}},K=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;switch((arguments.length>1?arguments[1]:void 0).type){case u.Jf:return 1;case u.jN:return 2;default:return t}},Q=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"1x",r=arguments.length>1?arguments[1]:void 0;switch(r.type){case u.O:return r.payload;case u.D5:return c(r.payload.galleryView,t);default:return t}};function tt(t,r){var e=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);r&&(n=n.filter((function(r){return Object.getOwnPropertyDescriptor(t,r).enumerable}))),e.push.apply(e,n)}return e}function rt(t){for(var r=1;r<arguments.length;r++){var e=null!=arguments[r]?arguments[r]:{};r%2?tt(Object(e),!0).forEach((function(r){et(t,r,e[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(e)):tt(Object(e)).forEach((function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(e,r))}))}return t}function et(t,r,e){return r in t?Object.defineProperty(t,r,{value:e,enumerable:!0,configurable:!0,writable:!0}):t[r]=e,t}var nt=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=arguments.length>1?arguments[1]:void 0;return r.type===u.Ik?rt(rt({},t),r.payload):t},ot=function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0],r=arguments.length>1?arguments[1]:void 0;switch(r.type){case u.wK:return r.payload;case u.D5:return c(r.payload.handleExportFrame,t);default:return t}},it=function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0],r=arguments.length>1?arguments[1]:void 0;switch(r.type){case u.Mx:return r.payload;case u.D5:return c(r.payload.hideDates,t);default:return t}};e(21249),e(69826);function at(t,r){var e=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);r&&(n=n.filter((function(r){return Object.getOwnPropertyDescriptor(t,r).enumerable}))),e.push.apply(e,n)}return e}function ct(t){for(var r=1;r<arguments.length;r++){var e=null!=arguments[r]?arguments[r]:{};r%2?at(Object(e),!0).forEach((function(r){ut(t,r,e[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(e)):at(Object(e)).forEach((function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(e,r))}))}return t}function ut(t,r,e){return r in t?Object.defineProperty(t,r,{value:e,enumerable:!0,configurable:!0,writable:!0}):t[r]=e,t}function lt(t){return function(t){if(Array.isArray(t))return ft(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||function(t,r){if(!t)return;if("string"==typeof t)return ft(t,r);var e=Object.prototype.toString.call(t).slice(8,-1);"Object"===e&&t.constructor&&(e=t.constructor.name);if("Map"===e||"Set"===e)return Array.from(t);if("Arguments"===e||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(e))return ft(t,r)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ft(t,r){(null==r||r>t.length)&&(r=t.length);for(var e=0,n=new Array(r);e<r;e++)n[e]=t[e];return n}var st=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],r=arguments.length>1?arguments[1]:void 0;switch(r.type){case u.Dt:return(0,U.Z)("hash")([].concat(lt(t),lt(r.payload)));case u.S1:return lt(t.filter((function(t){return t.hash!==r.payload})));case u.md:return lt(t.filter((function(t){var e=t.hash;return!r.payload.includes(e)})));case u.m9:return t.map((function(t){return t.hash===r.payload.hash?ct(ct({},t),r.payload):t}));case u.sV:return t.map((function(t){return t.hash===r.payload.oldHash?r.payload.image:t}));case u.d4:return t.map((function(t){return t.hash===r.payload.hash?ct(ct({},t),{},{tags:(0,_.Z)(r.payload.isFavourite?[G.oJ].concat(lt(t.tags)):t.tags.filter((function(t){return t!==G.oJ})))}):t}));case u.hT:return t.map((function(t){return r.payload.find((function(r){return r.hash===t.hash}))||t}));case u.D5:return(0,U.Z)("hash")(r.payload.images);default:return t}},ht=function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0],r=arguments.length>1?arguments[1]:void 0;switch(r.type){case u.nN:return r.payload;case u.D5:return c(r.payload.importDeleted,t);default:return t}};function pt(t){return function(t){if(Array.isArray(t))return yt(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||function(t,r){if(!t)return;if("string"==typeof t)return yt(t,r);var e=Object.prototype.toString.call(t).slice(8,-1);"Object"===e&&t.constructor&&(e=t.constructor.name);if("Map"===e||"Set"===e)return Array.from(t);if("Arguments"===e||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(e))return yt(t,r)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function yt(t,r){(null==r||r>t.length)&&(r=t.length);for(var e=0,n=new Array(r);e<r;e++)n[e]=t[e];return n}var dt=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],r=arguments.length>1?arguments[1]:void 0;switch(r.type){case u.d3:return[].concat(pt(t),[r.payload]);case u.Rb:case u.Dt:return[];case u.cR:case u.GU:return t.filter((function(t){return t.tempId!==r.payload.tempId}));default:return t}};function vt(t){return function(t){if(Array.isArray(t))return mt(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||function(t,r){if(!t)return;if("string"==typeof t)return mt(t,r);var e=Object.prototype.toString.call(t).slice(8,-1);"Object"===e&&t.constructor&&(e=t.constructor.name);if("Map"===e||"Set"===e)return Array.from(t);if("Arguments"===e||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(e))return mt(t,r)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function mt(t,r){(null==r||r>t.length)&&(r=t.length);for(var e=0,n=new Array(r);e<r;e++)n[e]=t[e];return n}var gt=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],r=arguments.length>1?arguments[1]:void 0;switch(r.type){case u.iq:case u.S1:return vt(t.filter((function(t){return t!==r.payload})));case u.Rv:return[].concat(vt(t),[r.payload]);case u.y0:return r.payload;case u.md:return[];case u.D5:return c(r.payload.imageSelection,t);default:return t}},bt=function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0],r=arguments.length>1?arguments[1]:void 0;switch(r.type){case u.Pk:return r.payload;case u.D5:return c(r.payload.importLastSeen,t);default:return t}},wt=function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0],r=arguments.length>1?arguments[1]:void 0;switch(r.type){case u.qr:return r.payload;case u.D5:return c(r.payload.importPad,t);default:return t}},Et=function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0],r=arguments.length>1?arguments[1]:void 0;return r.type===u.Yx?r.payload:t},Ot=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,r=arguments.length>1?arguments[1]:void 0;switch(r.type){case u.Rv:case u.iq:return r.payload;case u.S1:case u.md:case u.O:return null;default:return t}},St=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,r=arguments.length>1?arguments[1]:void 0;return r.type===u.vR?r.payload:t},xt=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,r=arguments.length>1?arguments[1]:void 0;switch(r.type){case u.R4:return r.payload;case u.D5:return c(r.payload.pageSize,t);default:return t}};function Lt(t){return function(t){if(Array.isArray(t))return At(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||function(t,r){if(!t)return;if("string"==typeof t)return At(t,r);var e=Object.prototype.toString.call(t).slice(8,-1);"Object"===e&&t.constructor&&(e=t.constructor.name);if("Map"===e||"Set"===e)return Array.from(t);if("Arguments"===e||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(e))return At(t,r)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function At(t,r){(null==r||r>t.length)&&(r=t.length);for(var e=0,n=new Array(r);e<r;e++)n[e]=t[e];return n}var jt=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],r=arguments.length>1?arguments[1]:void 0;switch(r.type){case u.Or:return Lt(t.filter((function(t){return t.shortName!==r.payload.shortName})));case u.$e:return(0,U.Z)("shortName")([].concat(Lt(t.map((function(t){return t.shortName!==r.payload.shortName?t:r.payload}))),[r.payload]));case u.D5:return(0,U.Z)("shortName").apply(void 0,[r.payload.palettes].concat(Lt(t)));default:return t}},Ft=function(t){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"asc";return function(e){var n="desc"===r?-1:1;return e.sort((function(r,e){return r[t]>e[t]?n:r[t]<e[t]?-n:0}))}};function _t(t,r){var e=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);r&&(n=n.filter((function(r){return Object.getOwnPropertyDescriptor(t,r).enumerable}))),e.push.apply(e,n)}return e}function Pt(t){for(var r=1;r<arguments.length;r++){var e=null!=arguments[r]?arguments[r]:{};r%2?_t(Object(e),!0).forEach((function(r){Tt(t,r,e[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(e)):_t(Object(e)).forEach((function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(e,r))}))}return t}function Tt(t,r,e){return r in t?Object.defineProperty(t,r,{value:e,enumerable:!0,configurable:!0,writable:!0}):t[r]=e,t}function It(t){return function(t){if(Array.isArray(t))return Dt(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||function(t,r){if(!t)return;if("string"==typeof t)return Dt(t,r);var e=Object.prototype.toString.call(t).slice(8,-1);"Object"===e&&t.constructor&&(e=t.constructor.name);if("Map"===e||"Set"===e)return Array.from(t);if("Arguments"===e||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(e))return Dt(t,r)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Dt(t,r){(null==r||r>t.length)&&(r=t.length);for(var e=0,n=new Array(r);e<r;e++)n[e]=t[e];return n}var kt=(0,U.Z)("url"),Nt=Ft("url"),Gt=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],r=arguments.length>1?arguments[1]:void 0;switch(r.type){case u.gH:return Nt(kt(It(t.filter((function(t){return t.url!==r.payload})))));case u.gk:return Nt(kt([{url:r.payload}].concat(It(t))));case u.rc:return Nt(kt(t.map((function(t){return t.url!==r.payload.url?t:Pt(Pt({},t),r.payload)}))));case u.PA:return Nt(kt(t.map((function(t){if(t.url!==r.payload.url)return t;var e=Pt(Pt({},t.config||{}),r.payload.config||{});return Pt(Pt({},t),{},{config:e})}))));default:return t}},Rt=e(27484),Ct=e.n(Rt),Mt=e(31712),Bt=e(25108),Ut=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:navigator.language,r=arguments.length>1?arguments[1]:void 0;if(r.type===u.Qs)try{return(0,Mt.Z)(Ct()(),r.payload),r.payload}catch(r){return Bt.error(r),t}return t},Ht=function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];switch((arguments.length>1?arguments[1]:void 0).type){case u.ug:case u.od:return!0;case u.Dt:case u.or:case u.fX:case u.Jx:case u.Rb:return!1;default:return t}},Zt=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=arguments.length>1?arguments[1]:void 0;switch(r.type){case u.fX:return r.payload;case u.Jx:case u.od:return{};default:return t}},Yt=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],r=arguments.length>1?arguments[1]:void 0;switch(r.type){case u.or:return r.payload;case u.od:return[];default:return t}},Vt=e(15168),$t=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",r=arguments.length>1?arguments[1]:void 0;switch(r.type){case u.YE:return(0,Vt.Z)(r.payload,"http");case u.D5:return c(r.payload.printerUrl,t);default:return t}},Jt=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",r=arguments.length>1?arguments[1]:void 0;switch(r.type){case u.WN:return r.payload;case u.D5:return c(r.payload.printerParams,t);default:return t}};function zt(t,r){var e=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);r&&(n=n.filter((function(r){return Object.getOwnPropertyDescriptor(t,r).enumerable}))),e.push.apply(e,n)}return e}function Wt(t){for(var r=1;r<arguments.length;r++){var e=null!=arguments[r]?arguments[r]:{};r%2?zt(Object(e),!0).forEach((function(r){Xt(t,r,e[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(e)):zt(Object(e)).forEach((function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(e,r))}))}return t}function Xt(t,r,e){return r in t?Object.defineProperty(t,r,{value:e,enumerable:!0,configurable:!0,writable:!0}):t[r]=e,t}var qt=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{gif:0,printer:0},r=arguments.length>1?arguments[1]:void 0;switch(r.type){case u.B4:return Wt(Wt({},t),{},{gif:.01});case u.DK:return Wt(Wt({},t),{},{gif:r.payload});case u.fc:return Wt(Wt({},t),{},{plugin:r.payload});case u.pQ:return Wt(Wt({},t),{},{printer:r.payload});case u.Dt:case u.Rb:case u.Gp:return Wt(Wt({},t),{},{printer:0});default:return t}};function Kt(t){return function(t){if(Array.isArray(t))return Qt(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||function(t,r){if(!t)return;if("string"==typeof t)return Qt(t,r);var e=Object.prototype.toString.call(t).slice(8,-1);"Object"===e&&t.constructor&&(e=t.constructor.name);if("Map"===e||"Set"===e)return Array.from(t);if("Arguments"===e||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(e))return Qt(t,r)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Qt(t,r){(null==r||r>t.length)&&(r=t.length);for(var e=0,n=new Array(r);e<r;e++)n[e]=t[e];return n}function tr(t,r){var e=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);r&&(n=n.filter((function(r){return Object.getOwnPropertyDescriptor(t,r).enumerable}))),e.push.apply(e,n)}return e}function rr(t){for(var r=1;r<arguments.length;r++){var e=null!=arguments[r]?arguments[r]:{};r%2?tr(Object(e),!0).forEach((function(r){er(t,r,e[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(e)):tr(Object(e)).forEach((function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(e,r))}))}return t}function er(t,r,e){return r in t?Object.defineProperty(t,r,{value:e,enumerable:!0,configurable:!0,writable:!0}):t[r]=e,t}var nr=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{git:[],dropbox:[]},r=arguments.length>1?arguments[1]:void 0;switch(r.type){case u.b9:return rr(rr({},t),{},{git:[r.payload].concat(Kt(t.git))});case u.ON:return rr(rr({},t),{},{dropbox:[r.payload].concat(Kt(t.dropbox))});case u.Ki:return rr(rr({},t),{},er({},r.payload.storageType,[{timestamp:(new Date).getTime()/1e3,message:"."}].concat(Kt(t[r.payload.storageType]))));case u.bM:case u.d0:return{git:[],dropbox:[]};default:return t}};function or(t){return function(t){if(Array.isArray(t))return ir(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||function(t,r){if(!t)return;if("string"==typeof t)return ir(t,r);var e=Object.prototype.toString.call(t).slice(8,-1);"Object"===e&&t.constructor&&(e=t.constructor.name);if("Map"===e||"Set"===e)return Array.from(t);if("Arguments"===e||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(e))return ir(t,r)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ir(t,r){(null==r||r>t.length)&&(r=t.length);for(var e=0,n=new Array(r);e<r;e++)n[e]=t[e];return n}var ar=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],r=arguments.length>1?arguments[1]:void 0;switch(r.type){case u.Dt:var e=r.payload.map((function(t){var r=t.hash;return t.hashes?null:{hash:r,timestamp:Ct()().unix()}})).filter(Boolean);return[].concat(or(t.filter((function(t){var r=t.hash;return!e.includes(r)}))),or(e));case u.D5:var n,o;return null!==(n=r.payload)&&void 0!==n&&null!==(o=n.imageSelection)&&void 0!==o&&o.length?[].concat(or(t.filter((function(t){var e=t.hash;return!r.payload.imageSelection.includes(e)}))),or(r.payload.imageSelection.map((function(t){return{hash:t,timestamp:Ct()().unix()}})))):t;default:return t}};function cr(t,r){var e=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);r&&(n=n.filter((function(r){return Object.getOwnPropertyDescriptor(t,r).enumerable}))),e.push.apply(e,n)}return e}function ur(t){for(var r=1;r<arguments.length;r++){var e=null!=arguments[r]?arguments[r]:{};r%2?cr(Object(e),!0).forEach((function(r){lr(t,r,e[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(e)):cr(Object(e)).forEach((function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(e,r))}))}return t}function lr(t,r,e){return r in t?Object.defineProperty(t,r,{value:e,enumerable:!0,configurable:!0,writable:!0}):t[r]=e,t}var fr=function(){var t,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,e=arguments.length>1?arguments[1]:void 0;switch(e.type){case u.Sd:var n=ur(ur({},r),e.payload);return n.r||n.g||n.b||n.n?n:null;case u.Dt:return null!==(t=e.payload[0])&&void 0!==t&&t.hashes?null:r;case u.S1:case u.md:return null;case u.D5:return c(e.payload.rgbnImages,r);default:return r}},sr=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"int",r=arguments.length>1?arguments[1]:void 0;switch(r.type){case u.LR:return r.payload;case u.D5:return c(r.payload.savFrameTypes,t);default:return t}},hr=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",r=arguments.length>1?arguments[1]:void 0;switch(r.type){case u.bD:return r.payload;case u.D5:return c(r.payload.sortBy,t);default:return t}},pr=function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];switch((arguments.length>1?arguments[1]:void 0).type){case u.XB:return!0;case u.qJ:case u.bD:return!1;default:return t}},yr=function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];switch((arguments.length>1?arguments[1]:void 0).type){case u.eP:return!0;case u.Ki:case u.bM:return!1;default:return t}};function dr(t,r){var e=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);r&&(n=n.filter((function(r){return Object.getOwnPropertyDescriptor(t,r).enumerable}))),e.push.apply(e,n)}return e}function vr(t){for(var r=1;r<arguments.length;r++){var e=null!=arguments[r]?arguments[r]:{};r%2?dr(Object(e),!0).forEach((function(r){mr(t,r,e[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(e)):dr(Object(e)).forEach((function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(e,r))}))}return t}function mr(t,r,e){return r in t?Object.defineProperty(t,r,{value:e,enumerable:!0,configurable:!0,writable:!0}):t[r]=e,t}var gr=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=arguments.length>1?arguments[1]:void 0;switch(r.type){case u.oI:return vr(vr({},t),{},{dropbox:r.payload});case u.yK:return vr(vr({},t),{},{dropbox:r.payload.state.lastUpdateUTC,local:r.payload.state.lastUpdateUTC});case u.Ki:return vr({},t);case u.m9:case u.sV:case u.hT:case u.S1:case u.$e:case u.Or:case u.Dt:case u.GU:case u.BS:return vr(vr({},t),{},{local:Math.floor((new Date).getTime()/1e3)});default:return t}},br=function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];switch((arguments.length>1?arguments[1]:void 0).type){case u.sS:return!0;case u.eP:case u.Ki:case u.DU:return!1;default:return t}},wr=function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0],r=arguments.length>1?arguments[1]:void 0;return r.type===u.rR?r.payload:t},Er=function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0],r=arguments.length>1?arguments[1]:void 0;return r.type===u.Dr?r.payload:t};function Or(t,r){var e=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);r&&(n=n.filter((function(r){return Object.getOwnPropertyDescriptor(t,r).enumerable}))),e.push.apply(e,n)}return e}function Sr(t){for(var r=1;r<arguments.length;r++){var e=null!=arguments[r]?arguments[r]:{};r%2?Or(Object(e),!0).forEach((function(r){xr(t,r,e[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(e)):Or(Object(e)).forEach((function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(e,r))}))}return t}function xr(t,r,e){return r in t?Object.defineProperty(t,r,{value:e,enumerable:!0,configurable:!0,writable:!0}):t[r]=e,t}var Lr=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{frames:0,images:0,show:!1},r=arguments.length>1?arguments[1]:void 0;switch(r.type){case u.l3:return Sr(Sr({},t),{},{show:r.payload});case u.nD:return Sr(Sr({},t),{},{frames:r.payload});case u.Dw:return Sr(Sr({},t),{},{images:r.payload});default:return t}};function Ar(t,r){var e=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);r&&(n=n.filter((function(r){return Object.getOwnPropertyDescriptor(t,r).enumerable}))),e.push.apply(e,n)}return e}function jr(t){for(var r=1;r<arguments.length;r++){var e=null!=arguments[r]?arguments[r]:{};r%2?Ar(Object(e),!0).forEach((function(r){Fr(t,r,e[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(e)):Ar(Object(e)).forEach((function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(e,r))}))}return t}function Fr(t,r,e){return r in t?Object.defineProperty(t,r,{value:e,enumerable:!0,configurable:!0,writable:!0}):t[r]=e,t}var _r={imageSelection:[]},Pr=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:_r,r=arguments.length>1?arguments[1]:void 0;switch(r.type){case u.xG:return jr(jr({},t),r.payload);case u.B4:case u.Xb:return jr(jr({},t),{},{imageSelection:[]});case u.D5:return c(r.payload.videoParams,t);default:return t}},Tr=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{height:window.innerHeight,width:window.innerWidth},r=arguments.length>1?arguments[1]:void 0;return r.type===u.rU?r.payload:t},Ir=(0,a.UY)({activePalette:l,bitmapQueue:h,canShare:v,confirm:b,dragover:w,dropboxStorage:x,editImage:L,editFrame:A,editPalette:j,enableDebug:F,exportFileTypes:I,exportScaleFactors:N,filtersActiveTags:C,filtersVisible:M,forceMagicCheck:B,frameGroupNames:Y,frameQueue:J,frames:q,framesMessage:K,galleryView:Q,gitStorage:nt,handleExportFrame:ot,hideDates:it,images:st,imageSelection:gt,importDeleted:ht,importQueue:dt,importLastSeen:bt,importPad:wt,isFullscreen:Et,lastSelectedImage:Ot,progressLog:nr,lightboxImage:St,pageSize:xt,palettes:jt,plugins:Gt,preferredLocale:Ut,printerBusy:Ht,printerData:Zt,printerFunctions:Yt,printerUrl:$t,printerParams:Jt,progress:qt,recentImports:ar,rgbnImages:fr,savFrameTypes:sr,sortBy:hr,sortOptionsVisible:pr,syncBusy:yr,syncLastUpdate:gr,syncSelect:br,useSerials:wr,showSerials:Er,trashCount:Lr,videoParams:Pr,windowDimensions:Tr}),Dr=e(23860),kr=function(t){return function(r){return function(e){r(e);var n=t.getState(),o={};Dr.C.forEach((function(t){var r=t.key;if(t.saveLocally)if("palettes"===r)o[r]=n.palettes.filter((function(t){return!t.isPredefined}));else o[r]=n[r]})),localStorage.setItem("gbp-web-state",JSON.stringify(o))}}},Nr=(e(34553),e(39575),e(82472),e(92990),e(18927),e(33105),e(35035),e(74345),e(7174),e(32846),e(44731),e(77209),e(96319),e(58867),e(37789),e(33739),e(29368),e(14483),e(12056),e(3462),e(30678),e(27462),e(33824),e(55021),e(12974),e(15016),e(25009)),Gr=e.n(Nr),Rr=e(11494),Cr=e(93162),Mr=e(30236),Br=e.n(Mr),Ur=e(28014),Hr=e(39506),Zr=e(17036),Yr=e(97768),Vr=e(84040),$r=e(22604);function Jr(t){return function(t){if(Array.isArray(t))return Qr(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||Kr(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function zr(t,r){var e=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);r&&(n=n.filter((function(r){return Object.getOwnPropertyDescriptor(t,r).enumerable}))),e.push.apply(e,n)}return e}function Wr(t){for(var r=1;r<arguments.length;r++){var e=null!=arguments[r]?arguments[r]:{};r%2?zr(Object(e),!0).forEach((function(r){Xr(t,r,e[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(e)):zr(Object(e)).forEach((function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(e,r))}))}return t}function Xr(t,r,e){return r in t?Object.defineProperty(t,r,{value:e,enumerable:!0,configurable:!0,writable:!0}):t[r]=e,t}function qr(t,r){return function(t){if(Array.isArray(t))return t}(t)||function(t,r){var e=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null==e)return;var n,o,i=[],a=!0,c=!1;try{for(e=e.call(t);!(a=(n=e.next()).done)&&(i.push(n.value),!r||i.length!==r);a=!0);}catch(t){c=!0,o=t}finally{try{a||null==e.return||e.return()}finally{if(c)throw o}}return i}(t,r)||Kr(t,r)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Kr(t,r){if(t){if("string"==typeof t)return Qr(t,r);var e=Object.prototype.toString.call(t).slice(8,-1);return"Object"===e&&t.constructor&&(e=t.constructor.name),"Map"===e||"Set"===e?Array.from(t):"Arguments"===e||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(e)?Qr(t,r):void 0}}function Qr(t,r){(null==r||r>t.length)&&(r=t.length);for(var e=0,n=new Array(r);e<r;e++)n[e]=t[e];return n}var te=function(t){return function(r){return function(e){if(e.type===u.B4){var n=t.getState(),o=n.videoParams,i=o.scaleFactor,a=o.frameRate,c=o.imageSelection,l=o.yoyo,f=o.reverse,s=o.frame,h=o.lockFrame,p=o.invertPalette,y=o.palette,d=o.exportFrameMode;Promise.all(c.map((function(t){return n.images.find((function(r){return r.hash===t}))})).filter(Boolean).map((function(t){return Wr(Wr({},t),{},{frame:s||t.frame,palette:t.hashes?t.palette:y||t.palette})})).map((function(t){return(0,Ur.Z)(n)(t).then((function(r){var e=(0,Hr.Z)(n,t),o=!!t.hashes,a=o?new Zr.Z:new Yr.Z,c=h||t.lockFrame||!1,u=p||t.invertPalette||!1,l=t.rotation||0;o?a.update({tiles:r,palette:e,lockFrame:c}):a.update({tiles:r,palette:e.palette,lockFrame:c,invertPalette:u});var f=a.getScaledCanvas(i,d),s=document.createElement("canvas");return(0,$r.Z)(f,s,l),s}))}))).then((function(r){var e=[],n=new(Gr())(1,1/0),o=new Rr.g(e,r[0].width,r[0].height,{loop:65535}),c=Jr(r);if(l){var h=Jr(r).reverse();h.shift(),h.pop(),c.push.apply(c,Jr(h))}f&&c.reverse();var p=function(t,r,e,n,o){return function(i,a){return e.add((function(){return new Promise((function(e,c){for(var l=i.getContext("2d").getImageData(0,0,i.width,i.height).data,f=[],s=Br()(l,4).map((function(t){var r=qr(t,3),e=(r[0]<<16)+(r[1]<<8)+r[2],n=f.findIndex((function(t){return t===e}));return-1===n&&(n=f.length,f.push(e)),n}));f.length<256;)f.push(0);try{t({type:u.DK,payload:(a+1)/o}),window.requestAnimationFrame((function(){r.addFrame(0,0,i.width,i.height,s,{delay:Math.round(100/n),palette:f}),e()}))}catch(t){c(t)}}))}))}}(t.dispatch,o,n,a,c.length);Promise.all(c.map(p)).then((function(){var r,n=(0,Vr.Z)({useCurrentDate:!0,exportScaleFactor:i,frameRate:a,altTitle:"animated",frameName:s,paletteShort:y}),c=o.end();try{r=new File([new Uint8Array(e.slice(0,c)).buffer],"".concat(n,".gif"),{type:"image/gif"})}catch(t){r=new Blob([new Uint8Array(e.slice(0,c)).buffer])}(0,Cr.saveAs)(r,"".concat(n,".gif")),t.dispatch({type:u.DK,payload:0})}))})).catch((function(r){t.dispatch({type:u.pn,payload:r.message})}))}r(e)}}},re=(e(84944),e(33792),e(15306),e(83112),e(39714),e(81477)),ee=e(20170),ne=e(49965);function oe(t,r){var e=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);r&&(n=n.filter((function(r){return Object.getOwnPropertyDescriptor(t,r).enumerable}))),e.push.apply(e,n)}return e}function ie(t){for(var r=1;r<arguments.length;r++){var e=null!=arguments[r]?arguments[r]:{};r%2?oe(Object(e),!0).forEach((function(r){ae(t,r,e[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(e)):oe(Object(e)).forEach((function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(e,r))}))}return t}function ae(t,r,e){return r in t?Object.defineProperty(t,r,{value:e,enumerable:!0,configurable:!0,writable:!0}):t[r]=e,t}function ce(t){return ce="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},ce(t)}var ue=["lockFrame","frame","palette","invertPalette","title","tags","created","rotation"],le=function(t){return(0,_.Z)(t.map((function(t){return t.tags})).flat())},fe=function(t){return function(r){return function(e){if(e.type===u.fd){var n=t.getState(),o=(0,re.Z)(n),i=n.lastSelectedImage,a=n.pageSize,c=o.findIndex((function(t){return t.hash===e.payload})),l=o.findIndex((function(t){return t.hash===i}));-1===l&&(l=e.page*a);var f=Math.min(l,c),s=Math.max(l,c);t.dispatch({type:u.y0,payload:o.slice(f,s+1).map((function(t){return t.hash}))})}if(e.type===u.hT){var h=t.getState(),p=(0,ne.$b)(h),y=h.editImage,d=h.images,v=e.payload,m=v.image,g=v.batch,b=v.tagChanges;if(g&&y.batch&&y.batch.length){var w=y.batch.map((function(t){return d.find((function(r){return r.hash===t}))})).map(ne.Np).sort(p).map(ne.fD).map((function(t,r){if(!t)return!1;var e={},n=t.tags;return ue.forEach((function(o){switch(o){case"title":if(!g.title)break;e.title=m.title.replace(/%(n+)/gi,(function(t,e){return(r+1).toString(10).padStart(e.length,"0")}));break;case"created":if(!g.created)break;e.created=m.created;break;case"palette":if(!g.palette)break;ce(t.palette)===ce(m.palette)&&(e.palette=m.palette);break;case"invertPalette":if(!g.invertPalette)break;e.invertPalette=m.invertPalette;break;case"frame":if(!g.frame)break;e.frame=m.frame;break;case"lockFrame":if(!g.lockFrame)break;e.lockFrame=m.lockFrame;break;case"tags":n=(0,ee.Z)(ie(ie({},b),{},{initial:t.tags}));break;case"rotation":if(!g.rotation)break;e.rotation=m.rotation}})),ie(ie(ie({},t),e),{},{tags:n})})).filter(Boolean);Object.assign(e,{payload:w})}}if(e.type!==u.ax)r(e);else{var E=t.getState(),O=E.images,S=E.imageSelection,x=E.pageSize,L=O.filter((function(t){var r=t.hash;return S.includes(r)}));if(S.length)switch(e.payload){case"delete":t.dispatch({type:u.jH,payload:{message:"Delete ".concat(S.length," images?"),confirm:function(){t.dispatch({type:u.md,payload:S})},deny:function(){t.dispatch({type:u.Gp})}}});break;case"animate":t.dispatch({type:u.xG,payload:{imageSelection:S}});break;case"download":t.dispatch({type:u.Zo,payload:S});break;case"edit":t.dispatch({type:u.v6,payload:{hash:L[0].hash,tags:le(L),batch:L.map((function(t){return t.hash}))}})}switch(e.payload){case"checkall":t.dispatch({type:u.y0,payload:(0,re.Z)(E).slice(e.page*x,(e.page+1)*x||void 0).map((function(t){return t.hash}))});break;case"uncheckall":t.dispatch({type:u.y0,payload:[]})}}}}},se=(e(72443),e(39341),e(73706),e(10408),e(78011),e(30489),e(68304),e(27918));function he(t){return he="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},he(t)}function pe(){pe=function(){return t};var t={},r=Object.prototype,e=r.hasOwnProperty,n="function"==typeof Symbol?Symbol:{},o=n.iterator||"@@iterator",i=n.asyncIterator||"@@asyncIterator",a=n.toStringTag||"@@toStringTag";function c(t,r,e){return Object.defineProperty(t,r,{value:e,enumerable:!0,configurable:!0,writable:!0}),t[r]}try{c({},"")}catch(t){c=function(t,r,e){return t[r]=e}}function u(t,r,e,n){var o=r&&r.prototype instanceof s?r:s,i=Object.create(o.prototype),a=new S(n||[]);return i._invoke=function(t,r,e){var n="suspendedStart";return function(o,i){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===o)throw i;return L()}for(e.method=o,e.arg=i;;){var a=e.delegate;if(a){var c=w(a,e);if(c){if(c===f)continue;return c}}if("next"===e.method)e.sent=e._sent=e.arg;else if("throw"===e.method){if("suspendedStart"===n)throw n="completed",e.arg;e.dispatchException(e.arg)}else"return"===e.method&&e.abrupt("return",e.arg);n="executing";var u=l(t,r,e);if("normal"===u.type){if(n=e.done?"completed":"suspendedYield",u.arg===f)continue;return{value:u.arg,done:e.done}}"throw"===u.type&&(n="completed",e.method="throw",e.arg=u.arg)}}}(t,e,a),i}function l(t,r,e){try{return{type:"normal",arg:t.call(r,e)}}catch(t){return{type:"throw",arg:t}}}t.wrap=u;var f={};function s(){}function h(){}function p(){}var y={};c(y,o,(function(){return this}));var d=Object.getPrototypeOf,v=d&&d(d(x([])));v&&v!==r&&e.call(v,o)&&(y=v);var m=p.prototype=s.prototype=Object.create(y);function g(t){["next","throw","return"].forEach((function(r){c(t,r,(function(t){return this._invoke(r,t)}))}))}function b(t,r){function n(o,i,a,c){var u=l(t[o],t,i);if("throw"!==u.type){var f=u.arg,s=f.value;return s&&"object"==he(s)&&e.call(s,"__await")?r.resolve(s.__await).then((function(t){n("next",t,a,c)}),(function(t){n("throw",t,a,c)})):r.resolve(s).then((function(t){f.value=t,a(f)}),(function(t){return n("throw",t,a,c)}))}c(u.arg)}var o;this._invoke=function(t,e){function i(){return new r((function(r,o){n(t,e,r,o)}))}return o=o?o.then(i,i):i()}}function w(t,r){var e=t.iterator[r.method];if(void 0===e){if(r.delegate=null,"throw"===r.method){if(t.iterator.return&&(r.method="return",r.arg=void 0,w(t,r),"throw"===r.method))return f;r.method="throw",r.arg=new TypeError("The iterator does not provide a 'throw' method")}return f}var n=l(e,t.iterator,r.arg);if("throw"===n.type)return r.method="throw",r.arg=n.arg,r.delegate=null,f;var o=n.arg;return o?o.done?(r[t.resultName]=o.value,r.next=t.nextLoc,"return"!==r.method&&(r.method="next",r.arg=void 0),r.delegate=null,f):o:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,f)}function E(t){var r={tryLoc:t[0]};1 in t&&(r.catchLoc=t[1]),2 in t&&(r.finallyLoc=t[2],r.afterLoc=t[3]),this.tryEntries.push(r)}function O(t){var r=t.completion||{};r.type="normal",delete r.arg,t.completion=r}function S(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(E,this),this.reset(!0)}function x(t){if(t){var r=t[o];if(r)return r.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var n=-1,i=function r(){for(;++n<t.length;)if(e.call(t,n))return r.value=t[n],r.done=!1,r;return r.value=void 0,r.done=!0,r};return i.next=i}}return{next:L}}function L(){return{value:void 0,done:!0}}return h.prototype=p,c(m,"constructor",p),c(p,"constructor",h),h.displayName=c(p,a,"GeneratorFunction"),t.isGeneratorFunction=function(t){var r="function"==typeof t&&t.constructor;return!!r&&(r===h||"GeneratorFunction"===(r.displayName||r.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,p):(t.__proto__=p,c(t,a,"GeneratorFunction")),t.prototype=Object.create(m),t},t.awrap=function(t){return{__await:t}},g(b.prototype),c(b.prototype,i,(function(){return this})),t.AsyncIterator=b,t.async=function(r,e,n,o,i){void 0===i&&(i=Promise);var a=new b(u(r,e,n,o),i);return t.isGeneratorFunction(e)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},g(m),c(m,a,"Generator"),c(m,o,(function(){return this})),c(m,"toString",(function(){return"[object Generator]"})),t.keys=function(t){var r=[];for(var e in t)r.push(e);return r.reverse(),function e(){for(;r.length;){var n=r.pop();if(n in t)return e.value=n,e.done=!1,e}return e.done=!0,e}},t.values=x,S.prototype={constructor:S,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(O),!t)for(var r in this)"t"===r.charAt(0)&&e.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var r=this;function n(e,n){return a.type="throw",a.arg=t,r.next=e,n&&(r.method="next",r.arg=void 0),!!n}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],a=i.completion;if("root"===i.tryLoc)return n("end");if(i.tryLoc<=this.prev){var c=e.call(i,"catchLoc"),u=e.call(i,"finallyLoc");if(c&&u){if(this.prev<i.catchLoc)return n(i.catchLoc,!0);if(this.prev<i.finallyLoc)return n(i.finallyLoc)}else if(c){if(this.prev<i.catchLoc)return n(i.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return n(i.finallyLoc)}}}},abrupt:function(t,r){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&e.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=r&&r<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=r,i?(this.method="next",this.next=i.finallyLoc,f):this.complete(a)},complete:function(t,r){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&r&&(this.next=r),f},finish:function(t){for(var r=this.tryEntries.length-1;r>=0;--r){var e=this.tryEntries[r];if(e.finallyLoc===t)return this.complete(e.completion,e.afterLoc),O(e),f}},catch:function(t){for(var r=this.tryEntries.length-1;r>=0;--r){var e=this.tryEntries[r];if(e.tryLoc===t){var n=e.completion;if("throw"===n.type){var o=n.arg;O(e)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(t,r,e){return this.delegate={iterator:x(t),resultName:r,nextLoc:e},"next"===this.method&&(this.arg=void 0),f}},t}function ye(t,r,e,n,o,i,a){try{var c=t[i](a),u=c.value}catch(t){return void e(t)}c.done?r(u):Promise.resolve(u).then(n,o)}function de(t){return function(){var r=this,e=arguments;return new Promise((function(n,o){var i=t.apply(r,e);function a(t){ye(i,n,o,a,c,"next",t)}function c(t){ye(i,n,o,a,c,"throw",t)}a(void 0)}))}}var ve=function(t){return de(pe().mark((function r(){return pe().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.t0=t,r.t1=u.nD,r.next=4,(0,se.c6)(t.getState().frames);case 4:r.t2=r.sent.length,r.t3={type:r.t1,payload:r.t2},r.t0.dispatch.call(r.t0,r.t3);case 7:case"end":return r.stop()}}),r)})))(),function(r){return function(e){switch(r(e),e.type){case u.BS:case u.GU:case u.D5:case u.A8:de(pe().mark((function r(){return pe().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.t0=t,r.t1=u.nD,r.next=4,(0,se.c6)(t.getState().frames);case 4:r.t2=r.sent.length,r.t3={type:r.t1,payload:r.t2},r.t0.dispatch.call(r.t0,r.t3);case 7:case"end":return r.stop()}}),r)})))()}}}};function me(t){return me="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},me(t)}function ge(){ge=function(){return t};var t={},r=Object.prototype,e=r.hasOwnProperty,n="function"==typeof Symbol?Symbol:{},o=n.iterator||"@@iterator",i=n.asyncIterator||"@@asyncIterator",a=n.toStringTag||"@@toStringTag";function c(t,r,e){return Object.defineProperty(t,r,{value:e,enumerable:!0,configurable:!0,writable:!0}),t[r]}try{c({},"")}catch(t){c=function(t,r,e){return t[r]=e}}function u(t,r,e,n){var o=r&&r.prototype instanceof s?r:s,i=Object.create(o.prototype),a=new S(n||[]);return i._invoke=function(t,r,e){var n="suspendedStart";return function(o,i){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===o)throw i;return L()}for(e.method=o,e.arg=i;;){var a=e.delegate;if(a){var c=w(a,e);if(c){if(c===f)continue;return c}}if("next"===e.method)e.sent=e._sent=e.arg;else if("throw"===e.method){if("suspendedStart"===n)throw n="completed",e.arg;e.dispatchException(e.arg)}else"return"===e.method&&e.abrupt("return",e.arg);n="executing";var u=l(t,r,e);if("normal"===u.type){if(n=e.done?"completed":"suspendedYield",u.arg===f)continue;return{value:u.arg,done:e.done}}"throw"===u.type&&(n="completed",e.method="throw",e.arg=u.arg)}}}(t,e,a),i}function l(t,r,e){try{return{type:"normal",arg:t.call(r,e)}}catch(t){return{type:"throw",arg:t}}}t.wrap=u;var f={};function s(){}function h(){}function p(){}var y={};c(y,o,(function(){return this}));var d=Object.getPrototypeOf,v=d&&d(d(x([])));v&&v!==r&&e.call(v,o)&&(y=v);var m=p.prototype=s.prototype=Object.create(y);function g(t){["next","throw","return"].forEach((function(r){c(t,r,(function(t){return this._invoke(r,t)}))}))}function b(t,r){function n(o,i,a,c){var u=l(t[o],t,i);if("throw"!==u.type){var f=u.arg,s=f.value;return s&&"object"==me(s)&&e.call(s,"__await")?r.resolve(s.__await).then((function(t){n("next",t,a,c)}),(function(t){n("throw",t,a,c)})):r.resolve(s).then((function(t){f.value=t,a(f)}),(function(t){return n("throw",t,a,c)}))}c(u.arg)}var o;this._invoke=function(t,e){function i(){return new r((function(r,o){n(t,e,r,o)}))}return o=o?o.then(i,i):i()}}function w(t,r){var e=t.iterator[r.method];if(void 0===e){if(r.delegate=null,"throw"===r.method){if(t.iterator.return&&(r.method="return",r.arg=void 0,w(t,r),"throw"===r.method))return f;r.method="throw",r.arg=new TypeError("The iterator does not provide a 'throw' method")}return f}var n=l(e,t.iterator,r.arg);if("throw"===n.type)return r.method="throw",r.arg=n.arg,r.delegate=null,f;var o=n.arg;return o?o.done?(r[t.resultName]=o.value,r.next=t.nextLoc,"return"!==r.method&&(r.method="next",r.arg=void 0),r.delegate=null,f):o:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,f)}function E(t){var r={tryLoc:t[0]};1 in t&&(r.catchLoc=t[1]),2 in t&&(r.finallyLoc=t[2],r.afterLoc=t[3]),this.tryEntries.push(r)}function O(t){var r=t.completion||{};r.type="normal",delete r.arg,t.completion=r}function S(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(E,this),this.reset(!0)}function x(t){if(t){var r=t[o];if(r)return r.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var n=-1,i=function r(){for(;++n<t.length;)if(e.call(t,n))return r.value=t[n],r.done=!1,r;return r.value=void 0,r.done=!0,r};return i.next=i}}return{next:L}}function L(){return{value:void 0,done:!0}}return h.prototype=p,c(m,"constructor",p),c(p,"constructor",h),h.displayName=c(p,a,"GeneratorFunction"),t.isGeneratorFunction=function(t){var r="function"==typeof t&&t.constructor;return!!r&&(r===h||"GeneratorFunction"===(r.displayName||r.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,p):(t.__proto__=p,c(t,a,"GeneratorFunction")),t.prototype=Object.create(m),t},t.awrap=function(t){return{__await:t}},g(b.prototype),c(b.prototype,i,(function(){return this})),t.AsyncIterator=b,t.async=function(r,e,n,o,i){void 0===i&&(i=Promise);var a=new b(u(r,e,n,o),i);return t.isGeneratorFunction(e)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},g(m),c(m,a,"Generator"),c(m,o,(function(){return this})),c(m,"toString",(function(){return"[object Generator]"})),t.keys=function(t){var r=[];for(var e in t)r.push(e);return r.reverse(),function e(){for(;r.length;){var n=r.pop();if(n in t)return e.value=n,e.done=!1,e}return e.done=!0,e}},t.values=x,S.prototype={constructor:S,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(O),!t)for(var r in this)"t"===r.charAt(0)&&e.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var r=this;function n(e,n){return a.type="throw",a.arg=t,r.next=e,n&&(r.method="next",r.arg=void 0),!!n}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],a=i.completion;if("root"===i.tryLoc)return n("end");if(i.tryLoc<=this.prev){var c=e.call(i,"catchLoc"),u=e.call(i,"finallyLoc");if(c&&u){if(this.prev<i.catchLoc)return n(i.catchLoc,!0);if(this.prev<i.finallyLoc)return n(i.finallyLoc)}else if(c){if(this.prev<i.catchLoc)return n(i.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return n(i.finallyLoc)}}}},abrupt:function(t,r){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&e.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=r&&r<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=r,i?(this.method="next",this.next=i.finallyLoc,f):this.complete(a)},complete:function(t,r){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&r&&(this.next=r),f},finish:function(t){for(var r=this.tryEntries.length-1;r>=0;--r){var e=this.tryEntries[r];if(e.finallyLoc===t)return this.complete(e.completion,e.afterLoc),O(e),f}},catch:function(t){for(var r=this.tryEntries.length-1;r>=0;--r){var e=this.tryEntries[r];if(e.tryLoc===t){var n=e.completion;if("throw"===n.type){var o=n.arg;O(e)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(t,r,e){return this.delegate={iterator:x(t),resultName:r,nextLoc:e},"next"===this.method&&(this.arg=void 0),f}},t}function be(t,r,e,n,o,i,a){try{var c=t[i](a),u=c.value}catch(t){return void e(t)}c.done?r(u):Promise.resolve(u).then(n,o)}function we(t){return function(){var r=this,e=arguments;return new Promise((function(n,o){var i=t.apply(r,e);function a(t){be(i,n,o,a,c,"next",t)}function c(t){be(i,n,o,a,c,"throw",t)}a(void 0)}))}}var Ee=function(t){return we(ge().mark((function r(){return ge().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.t0=t,r.t1=u.Dw,r.next=4,(0,se.op)(t.getState().images);case 4:r.t2=r.sent.length,r.t3={type:r.t1,payload:r.t2},r.t0.dispatch.call(r.t0,r.t3);case 7:case"end":return r.stop()}}),r)})))(),function(r){return function(e){switch(r(e),e.type){case u.S1:case u.md:case u.Dt:case u.D5:case u.sV:case u.A8:we(ge().mark((function r(){return ge().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.t0=t,r.t1=u.Dw,r.next=4,(0,se.op)(t.getState().images);case 4:r.t2=r.sent.length,r.t3={type:r.t1,payload:r.t2},r.t0.dispatch.call(r.t0,r.t3);case 7:case"end":return r.stop()}}),r)})))()}}}},Oe=function(t){var r,n=t.getState().dropboxStorage;return n.use&&Promise.all([e.e(986),e.e(991)]).then(e.bind(e,41238)).then((function(e){var n=e.default;r=n(t)})),function(o){return function(i){o(i),t.getState().dropboxStorage.use&&(i.type===u.eh||i.type===u.wb||i.type===u.eP&&("dropbox"===i.payload.storageType||"dropboximages"===i.payload.storageType)||n.use&&i.type===u.UF)&&(r?r(i):Promise.all([e.e(986),e.e(991)]).then(e.bind(e,41238)).then((function(e){var n=e.default;(r=r||n(t))(i)})))}}},Se=(e(32564),e(23157),e(27852),e(69600),e(36965)),xe=e(30661),Le=e(75500);function Ae(t){return Ae="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Ae(t)}function je(){je=function(){return t};var t={},r=Object.prototype,e=r.hasOwnProperty,n="function"==typeof Symbol?Symbol:{},o=n.iterator||"@@iterator",i=n.asyncIterator||"@@asyncIterator",a=n.toStringTag||"@@toStringTag";function c(t,r,e){return Object.defineProperty(t,r,{value:e,enumerable:!0,configurable:!0,writable:!0}),t[r]}try{c({},"")}catch(t){c=function(t,r,e){return t[r]=e}}function u(t,r,e,n){var o=r&&r.prototype instanceof s?r:s,i=Object.create(o.prototype),a=new S(n||[]);return i._invoke=function(t,r,e){var n="suspendedStart";return function(o,i){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===o)throw i;return L()}for(e.method=o,e.arg=i;;){var a=e.delegate;if(a){var c=w(a,e);if(c){if(c===f)continue;return c}}if("next"===e.method)e.sent=e._sent=e.arg;else if("throw"===e.method){if("suspendedStart"===n)throw n="completed",e.arg;e.dispatchException(e.arg)}else"return"===e.method&&e.abrupt("return",e.arg);n="executing";var u=l(t,r,e);if("normal"===u.type){if(n=e.done?"completed":"suspendedYield",u.arg===f)continue;return{value:u.arg,done:e.done}}"throw"===u.type&&(n="completed",e.method="throw",e.arg=u.arg)}}}(t,e,a),i}function l(t,r,e){try{return{type:"normal",arg:t.call(r,e)}}catch(t){return{type:"throw",arg:t}}}t.wrap=u;var f={};function s(){}function h(){}function p(){}var y={};c(y,o,(function(){return this}));var d=Object.getPrototypeOf,v=d&&d(d(x([])));v&&v!==r&&e.call(v,o)&&(y=v);var m=p.prototype=s.prototype=Object.create(y);function g(t){["next","throw","return"].forEach((function(r){c(t,r,(function(t){return this._invoke(r,t)}))}))}function b(t,r){function n(o,i,a,c){var u=l(t[o],t,i);if("throw"!==u.type){var f=u.arg,s=f.value;return s&&"object"==Ae(s)&&e.call(s,"__await")?r.resolve(s.__await).then((function(t){n("next",t,a,c)}),(function(t){n("throw",t,a,c)})):r.resolve(s).then((function(t){f.value=t,a(f)}),(function(t){return n("throw",t,a,c)}))}c(u.arg)}var o;this._invoke=function(t,e){function i(){return new r((function(r,o){n(t,e,r,o)}))}return o=o?o.then(i,i):i()}}function w(t,r){var e=t.iterator[r.method];if(void 0===e){if(r.delegate=null,"throw"===r.method){if(t.iterator.return&&(r.method="return",r.arg=void 0,w(t,r),"throw"===r.method))return f;r.method="throw",r.arg=new TypeError("The iterator does not provide a 'throw' method")}return f}var n=l(e,t.iterator,r.arg);if("throw"===n.type)return r.method="throw",r.arg=n.arg,r.delegate=null,f;var o=n.arg;return o?o.done?(r[t.resultName]=o.value,r.next=t.nextLoc,"return"!==r.method&&(r.method="next",r.arg=void 0),r.delegate=null,f):o:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,f)}function E(t){var r={tryLoc:t[0]};1 in t&&(r.catchLoc=t[1]),2 in t&&(r.finallyLoc=t[2],r.afterLoc=t[3]),this.tryEntries.push(r)}function O(t){var r=t.completion||{};r.type="normal",delete r.arg,t.completion=r}function S(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(E,this),this.reset(!0)}function x(t){if(t){var r=t[o];if(r)return r.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var n=-1,i=function r(){for(;++n<t.length;)if(e.call(t,n))return r.value=t[n],r.done=!1,r;return r.value=void 0,r.done=!0,r};return i.next=i}}return{next:L}}function L(){return{value:void 0,done:!0}}return h.prototype=p,c(m,"constructor",p),c(p,"constructor",h),h.displayName=c(p,a,"GeneratorFunction"),t.isGeneratorFunction=function(t){var r="function"==typeof t&&t.constructor;return!!r&&(r===h||"GeneratorFunction"===(r.displayName||r.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,p):(t.__proto__=p,c(t,a,"GeneratorFunction")),t.prototype=Object.create(m),t},t.awrap=function(t){return{__await:t}},g(b.prototype),c(b.prototype,i,(function(){return this})),t.AsyncIterator=b,t.async=function(r,e,n,o,i){void 0===i&&(i=Promise);var a=new b(u(r,e,n,o),i);return t.isGeneratorFunction(e)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},g(m),c(m,a,"Generator"),c(m,o,(function(){return this})),c(m,"toString",(function(){return"[object Generator]"})),t.keys=function(t){var r=[];for(var e in t)r.push(e);return r.reverse(),function e(){for(;r.length;){var n=r.pop();if(n in t)return e.value=n,e.done=!1,e}return e.done=!0,e}},t.values=x,S.prototype={constructor:S,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(O),!t)for(var r in this)"t"===r.charAt(0)&&e.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var r=this;function n(e,n){return a.type="throw",a.arg=t,r.next=e,n&&(r.method="next",r.arg=void 0),!!n}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],a=i.completion;if("root"===i.tryLoc)return n("end");if(i.tryLoc<=this.prev){var c=e.call(i,"catchLoc"),u=e.call(i,"finallyLoc");if(c&&u){if(this.prev<i.catchLoc)return n(i.catchLoc,!0);if(this.prev<i.finallyLoc)return n(i.finallyLoc)}else if(c){if(this.prev<i.catchLoc)return n(i.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return n(i.finallyLoc)}}}},abrupt:function(t,r){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&e.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=r&&r<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=r,i?(this.method="next",this.next=i.finallyLoc,f):this.complete(a)},complete:function(t,r){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&r&&(this.next=r),f},finish:function(t){for(var r=this.tryEntries.length-1;r>=0;--r){var e=this.tryEntries[r];if(e.finallyLoc===t)return this.complete(e.completion,e.afterLoc),O(e),f}},catch:function(t){for(var r=this.tryEntries.length-1;r>=0;--r){var e=this.tryEntries[r];if(e.tryLoc===t){var n=e.completion;if("throw"===n.type){var o=n.arg;O(e)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(t,r,e){return this.delegate={iterator:x(t),resultName:r,nextLoc:e},"next"===this.method&&(this.arg=void 0),f}},t}function Fe(t,r,e,n,o,i,a){try{var c=t[i](a),u=c.value}catch(t){return void e(t)}c.done?r(u):Promise.resolve(u).then(n,o)}var _e=function(t){var r=t.dispatch;return function(){var t,e=(t=je().mark((function t(e){var n,o,i,a,c,l,f,s,h;return je().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,(0,Se.Z)(e,"arrayBuffer");case 2:if(n=t.sent,71===(p=n)[0]&&66===p[1]&&45===p[2]&&66===p[3]&&73===p[4]&&78===p[5]&&48===p[6]&&49===p[7]){t.next=5;break}throw new Error('Not a valid .bin file - is it missing the "GB-BIN01" header?');case 5:for(o=[],i=[],a=8;a<n.length;a+=1)c=n[a],i.push(c.toString(16).padStart(2,"0").toUpperCase()),16===i.length&&(o.push(i.join(" ")),i=[]);if(i.length){for(;i.length<16;)i.push("FF");o.push(i.join(" "))}return t.next=12,(0,xe.aj)(o);case 12:return l=t.sent,f=l.dataHash,t.next=16,(0,Le.jm)(o);case 16:return s=t.sent,h=s.dataHash,r({type:u.d3,payload:{fileName:e.name,imageHash:f,frameHash:h,tiles:o,tempId:Math.random().toString(16).split(".").pop()}}),t.abrupt("return",!0);case 20:case"end":return t.stop()}var p}),t)})),function(){var r=this,e=arguments;return new Promise((function(n,o){var i=t.apply(r,e);function a(t){Fe(i,n,o,a,c,"next",t)}function c(t){Fe(i,n,o,a,c,"throw",t)}a(void 0)}))});return function(t){return e.apply(this,arguments)}}()},Pe=e(88791),Te=(e(5212),e(43290),e(84633),e(2738)),Ie=function(t,r,e){var n;if(!r)return null;var o=function(t){return e.find((function(r){return r.id===t}))},i=(t+1).toString(10).padStart(2,"0"),a=o("".concat(r).concat(i));if(null!=a&&a.hash)return a.hash;if("jp"===r){var c=o("int".concat(i));if(null!=c&&c.hash)return c.hash}var u=o("".concat(r,"01"));if(null!=u&&u.hash)return u.hash;if("jp"!==r){var l=o("int".concat(i));if(null!=l&&l.hash)return l.hash}return(null===(n=o("int01"))||void 0===n?void 0:n.hash)||null},De=(e(91058),{86:"A",87:"B",88:"C",89:"D",90:"E",91:"F",92:"G",93:"H",94:"I",95:"J",96:"K",97:"L",98:"M",99:"N",100:"O",101:"P",102:"Q",103:"R",104:"S",105:"T",106:"U",107:"V",108:"W",109:"X",110:"Y",111:"Z",112:"_",113:"'",114:",",115:".",116:"",117:"",118:"",119:"",120:"",121:"",122:"",123:"",124:"",125:"",126:"",127:"",128:"",129:"",130:"",131:"-",132:"&",133:"!",134:"?",135:" ",136:"a",137:"b",138:"c",139:"d",140:"e",141:"f",142:"g",143:"h",144:"i",145:"j",146:"k",147:"l",148:"m",149:"n",150:"o",151:"p",152:"q",153:"r",154:"s",155:"t",156:"u",157:"v",158:"w",159:"x",160:"y",161:"z",162:"",163:"~",164:"",165:" ",166:"",167:"",168:"",169:"",170:"",171:"",172:"",173:"",174:"",175:"",176:"",177:"",178:"",179:"",180:"",181:"",182:"",183:"",184:"",185:"",186:"0",187:"1",188:"2",189:"3",190:"4",191:"5",192:"6",193:"7",194:"8",195:"9",196:"/",197:":",198:"~",199:'"',200:"@"}),ke={1:"",2:"",3:"",4:"",5:"",6:"",7:"",8:"",9:"",10:"",11:"",12:"",13:"",14:"",15:"",16:"",17:"",18:"",19:"",20:"",21:"",22:"",23:"",24:"",25:"",26:"",27:"",28:"",29:"",30:"",31:"",32:"",33:"",34:"",35:"",36:"",37:"",38:"",39:"",40:"",41:"",42:"",43:"",44:"",45:"",46:"",47:"",48:"",49:"",50:"",51:"",52:"",53:"",54:"",55:"",56:"",57:"",58:"",59:"",60:"",61:"",62:"",63:"",64:"",65:"",66:"",67:"",68:"",69:"",70:"",71:"",72:"",73:"",74:"",75:"",76:"",77:"",78:"",79:"",80:"",81:"",82:"",83:"",84:"",85:"",86:"",87:"",88:"",89:"",90:"",91:"",92:"",93:"",94:"",95:"",96:"",97:"",98:"",99:"",100:"",101:"",102:"",103:"",104:"",105:"",106:"",107:"",108:"",109:"",110:"",111:"",112:"",113:"",114:"",115:"",116:"",117:"",118:"",119:"",120:"",121:"",122:"",123:"",124:"!",125:"?",126:"",127:"",128:"",129:"",130:"",131:"",132:"",133:"",134:"",135:" ",136:"",137:"",138:"",139:"",140:"",141:"",142:"",143:"",144:"",145:"",146:"",147:"",148:"",149:"",150:"",151:"",152:"",153:"",154:"",155:"",156:"",157:"",158:"",159:"",160:"",161:"",162:"",163:"",164:"",165:"",166:"",167:"",168:"",169:"",170:"",171:"A",172:"B",173:"C",174:"D",175:"E",176:"F",177:"G",178:"H",179:"I",180:"J",181:"K",182:"L",183:"M",184:"N",185:"O",186:"P",187:"Q",188:"R",189:"S",190:"T",191:"U",192:"V",193:"W",194:"X",195:"Y",196:"Z",197:"_",198:"'",199:",",200:".",201:"a",202:"b",203:"c",204:"d",205:"e",206:"f",207:"g",208:"h",209:"i",210:"j",211:"k",212:"l",213:"m",214:"n",215:"o",216:"p",217:"q",218:"r",219:"s",220:"t",221:"u",222:"v",223:"w",224:"x",225:"y",226:"z",227:"",228:"",229:"",230:"_",231:"0",232:"1",233:"2",234:"3",235:"4",236:"5",237:"6",238:"7",239:"8",240:"9",241:"/",242:":",243:"~",244:'"',245:"@"};function Ne(t,r){return function(t){if(Array.isArray(t))return t}(t)||function(t,r){var e=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null==e)return;var n,o,i=[],a=!0,c=!1;try{for(e=e.call(t);!(a=(n=e.next()).done)&&(i.push(n.value),!r||i.length!==r);a=!0);}catch(t){c=!0,o=t}finally{try{a||null==e.return||e.return()}finally{if(c)throw o}}return i}(t,r)||Re(t,r)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Ge(t){return function(t){if(Array.isArray(t))return Ce(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||Re(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Re(t,r){if(t){if("string"==typeof t)return Ce(t,r);var e=Object.prototype.toString.call(t).slice(8,-1);return"Object"===e&&t.constructor&&(e=t.constructor.name),"Map"===e||"Set"===e?Array.from(t):"Arguments"===e||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(e)?Ce(t,r):void 0}}function Ce(t,r){(null==r||r>t.length)&&(r=t.length);for(var e=0,n=new Array(r);e<r;e++)n[e]=t[e];return n}var Me=function(t,r){var e=Ge(t).filter(Boolean),n=r?ke:De;return e.map((function(t){return n[t]||""})).join("")},Be=function(t){switch(28&t){case 4:return"A";case 8:return"B";case 12:return"0";case 16:return"AB";default:return"-"}},Ue=function(t,r){var e=Ge(t).filter(Boolean).map((function(t){return Ge(t.toString(16)).map((function(t){return parseInt(t,16)-1})).join("")}));if(e.length<4)return"-";var n=Ne(e,4),o=n[0],i=n[1],a=n[2],c=n[3];return r?"".concat(o).concat(i,"").concat(a,"").concat(c,""):"".concat(c,"/").concat(a,"/").concat(o).concat(i)},He=function(t,r,e){var n,o=r/4096-2,i=o>=0?t[4530+o]:64,a=t.slice(r+3844,r+3852+1),c=t[r+3853],u=t.slice(r+3854,r+3857+1),l=t.slice(r+3861,r+3887+1),f=Boolean(t[r+3891]),s=t[r+3924];return{cartIndex:o,albumIndex:i,baseAddress:r,meta:r?{birthDate:Ue(u,e),userName:Me(a,e),gender:(n=c,1&n?"m":2&n?"f":"-"),bloodType:Be(c),comment:Me(l,e),isCopy:f}:null,frameNumber:s}};e(73210);function Ze(t){return function(t){if(Array.isArray(t))return Ye(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||function(t,r){if(!t)return;if("string"==typeof t)return Ye(t,r);var e=Object.prototype.toString.call(t).slice(8,-1);"Object"===e&&t.constructor&&(e=t.constructor.name);if("Map"===e||"Set"===e)return Array.from(t);if("Arguments"===e||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(e))return Ye(t,r)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Ye(t,r){(null==r||r>t.length)&&(r=t.length);for(var e=0,n=new Array(r);e<r;e++)n[e]=t[e];return n}var Ve="FF FF FF FF FF FF FF FF FF FF FF FF FF FF FF FF",$e=function(t,r){var e=[],n="",o=!1;e.push.apply(e,Ze(Ze(Array(40)).map((function(){return Ve}))));for(var i=0;i<3584;i+=1)i%256==0&&e.push.apply(e,Ze(Ze(Array(2)).map((function(){return Ve})))),n+=" ".concat(t[r+i].toString(16).padStart(2,"0")),i%16==15&&(e.push(n.trim()),o||"00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00"===n.trim()||(o=!0),n=""),i%256==255&&e.push.apply(e,Ze(Ze(Array(2)).map((function(){return Ve}))));return e.push.apply(e,Ze(Ze(Array(40)).map((function(){return Ve})))),o?e:null};function Je(t){return Je="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Je(t)}function ze(){ze=function(){return t};var t={},r=Object.prototype,e=r.hasOwnProperty,n="function"==typeof Symbol?Symbol:{},o=n.iterator||"@@iterator",i=n.asyncIterator||"@@asyncIterator",a=n.toStringTag||"@@toStringTag";function c(t,r,e){return Object.defineProperty(t,r,{value:e,enumerable:!0,configurable:!0,writable:!0}),t[r]}try{c({},"")}catch(t){c=function(t,r,e){return t[r]=e}}function u(t,r,e,n){var o=r&&r.prototype instanceof s?r:s,i=Object.create(o.prototype),a=new S(n||[]);return i._invoke=function(t,r,e){var n="suspendedStart";return function(o,i){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===o)throw i;return L()}for(e.method=o,e.arg=i;;){var a=e.delegate;if(a){var c=w(a,e);if(c){if(c===f)continue;return c}}if("next"===e.method)e.sent=e._sent=e.arg;else if("throw"===e.method){if("suspendedStart"===n)throw n="completed",e.arg;e.dispatchException(e.arg)}else"return"===e.method&&e.abrupt("return",e.arg);n="executing";var u=l(t,r,e);if("normal"===u.type){if(n=e.done?"completed":"suspendedYield",u.arg===f)continue;return{value:u.arg,done:e.done}}"throw"===u.type&&(n="completed",e.method="throw",e.arg=u.arg)}}}(t,e,a),i}function l(t,r,e){try{return{type:"normal",arg:t.call(r,e)}}catch(t){return{type:"throw",arg:t}}}t.wrap=u;var f={};function s(){}function h(){}function p(){}var y={};c(y,o,(function(){return this}));var d=Object.getPrototypeOf,v=d&&d(d(x([])));v&&v!==r&&e.call(v,o)&&(y=v);var m=p.prototype=s.prototype=Object.create(y);function g(t){["next","throw","return"].forEach((function(r){c(t,r,(function(t){return this._invoke(r,t)}))}))}function b(t,r){function n(o,i,a,c){var u=l(t[o],t,i);if("throw"!==u.type){var f=u.arg,s=f.value;return s&&"object"==Je(s)&&e.call(s,"__await")?r.resolve(s.__await).then((function(t){n("next",t,a,c)}),(function(t){n("throw",t,a,c)})):r.resolve(s).then((function(t){f.value=t,a(f)}),(function(t){return n("throw",t,a,c)}))}c(u.arg)}var o;this._invoke=function(t,e){function i(){return new r((function(r,o){n(t,e,r,o)}))}return o=o?o.then(i,i):i()}}function w(t,r){var e=t.iterator[r.method];if(void 0===e){if(r.delegate=null,"throw"===r.method){if(t.iterator.return&&(r.method="return",r.arg=void 0,w(t,r),"throw"===r.method))return f;r.method="throw",r.arg=new TypeError("The iterator does not provide a 'throw' method")}return f}var n=l(e,t.iterator,r.arg);if("throw"===n.type)return r.method="throw",r.arg=n.arg,r.delegate=null,f;var o=n.arg;return o?o.done?(r[t.resultName]=o.value,r.next=t.nextLoc,"return"!==r.method&&(r.method="next",r.arg=void 0),r.delegate=null,f):o:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,f)}function E(t){var r={tryLoc:t[0]};1 in t&&(r.catchLoc=t[1]),2 in t&&(r.finallyLoc=t[2],r.afterLoc=t[3]),this.tryEntries.push(r)}function O(t){var r=t.completion||{};r.type="normal",delete r.arg,t.completion=r}function S(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(E,this),this.reset(!0)}function x(t){if(t){var r=t[o];if(r)return r.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var n=-1,i=function r(){for(;++n<t.length;)if(e.call(t,n))return r.value=t[n],r.done=!1,r;return r.value=void 0,r.done=!0,r};return i.next=i}}return{next:L}}function L(){return{value:void 0,done:!0}}return h.prototype=p,c(m,"constructor",p),c(p,"constructor",h),h.displayName=c(p,a,"GeneratorFunction"),t.isGeneratorFunction=function(t){var r="function"==typeof t&&t.constructor;return!!r&&(r===h||"GeneratorFunction"===(r.displayName||r.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,p):(t.__proto__=p,c(t,a,"GeneratorFunction")),t.prototype=Object.create(m),t},t.awrap=function(t){return{__await:t}},g(b.prototype),c(b.prototype,i,(function(){return this})),t.AsyncIterator=b,t.async=function(r,e,n,o,i){void 0===i&&(i=Promise);var a=new b(u(r,e,n,o),i);return t.isGeneratorFunction(e)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},g(m),c(m,a,"Generator"),c(m,o,(function(){return this})),c(m,"toString",(function(){return"[object Generator]"})),t.keys=function(t){var r=[];for(var e in t)r.push(e);return r.reverse(),function e(){for(;r.length;){var n=r.pop();if(n in t)return e.value=n,e.done=!1,e}return e.done=!0,e}},t.values=x,S.prototype={constructor:S,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(O),!t)for(var r in this)"t"===r.charAt(0)&&e.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var r=this;function n(e,n){return a.type="throw",a.arg=t,r.next=e,n&&(r.method="next",r.arg=void 0),!!n}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],a=i.completion;if("root"===i.tryLoc)return n("end");if(i.tryLoc<=this.prev){var c=e.call(i,"catchLoc"),u=e.call(i,"finallyLoc");if(c&&u){if(this.prev<i.catchLoc)return n(i.catchLoc,!0);if(this.prev<i.finallyLoc)return n(i.finallyLoc)}else if(c){if(this.prev<i.catchLoc)return n(i.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return n(i.finallyLoc)}}}},abrupt:function(t,r){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&e.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=r&&r<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=r,i?(this.method="next",this.next=i.finallyLoc,f):this.complete(a)},complete:function(t,r){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&r&&(this.next=r),f},finish:function(t){for(var r=this.tryEntries.length-1;r>=0;--r){var e=this.tryEntries[r];if(e.finallyLoc===t)return this.complete(e.completion,e.afterLoc),O(e),f}},catch:function(t){for(var r=this.tryEntries.length-1;r>=0;--r){var e=this.tryEntries[r];if(e.tryLoc===t){var n=e.completion;if("throw"===n.type){var o=n.arg;O(e)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(t,r,e){return this.delegate={iterator:x(t),resultName:r,nextLoc:e},"next"===this.method&&(this.arg=void 0),f}},t}function We(t,r){var e=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);r&&(n=n.filter((function(r){return Object.getOwnPropertyDescriptor(t,r).enumerable}))),e.push.apply(e,n)}return e}function Xe(t){for(var r=1;r<arguments.length;r++){var e=null!=arguments[r]?arguments[r]:{};r%2?We(Object(e),!0).forEach((function(r){qe(t,r,e[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(e)):We(Object(e)).forEach((function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(e,r))}))}return t}function qe(t,r,e){return r in t?Object.defineProperty(t,r,{value:e,enumerable:!0,configurable:!0,writable:!0}):t[r]=e,t}function Ke(t,r,e,n,o,i,a){try{var c=t[i](a),u=c.value}catch(t){return void e(t)}c.done?r(u):Promise.resolve(u).then(n,o)}function Qe(t){return function(){var r=this,e=arguments;return new Promise((function(n,o){var i=t.apply(r,e);function a(t){Ke(i,n,o,a,c,"next",t)}function c(t){Ke(i,n,o,a,c,"throw",t)}a(void 0)}))}}function tn(t){return function(t){if(Array.isArray(t))return rn(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||function(t,r){if(!t)return;if("string"==typeof t)return rn(t,r);var e=Object.prototype.toString.call(t).slice(8,-1);"Object"===e&&t.constructor&&(e=t.constructor.name);if("Map"===e||"Set"===e)return Array.from(t);if("Arguments"===e||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(e))return rn(t,r)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function rn(t,r){(null==r||r>t.length)&&(r=t.length);for(var e=0,n=new Array(r);e<r;e++)n[e]=t[e];return n}var en=Ft("albumIndex"),nn=function(t){var r=t.importLastSeen,e=t.data,n=t.frames,o=t.fileName,i=t.importDeleted,a=t.dispatch;if(t.forceMagicCheck){if([4306,4523,4560,4597].some((function(t){return"Magic"!==tn(e.subarray(t,t+5)).map((function(t){return String.fromCharCode(t)})).join("")})))return null}return function(){var t=Qe(ze().mark((function t(c,l){var f,s,h,p;return ze().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return f=new Array(30).fill(null).map((function(t,r){return 4096*(r+2)})).filter((function(t){return t<e.length})),r&&f.unshift(0),t.next=4,Promise.all(f.map(function(){var t=Qe(ze().mark((function t(r){var o,i,a,u;return ze().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(o=He(e,r,l),i=o.frameNumber,!(a=$e(e,r))){t.next=8;break}return t.next=6,(0,Te.Z)(a,Ie(i,c,n));case 6:return u=t.sent,t.abrupt("return",Xe({tiles:u},o));case 8:return t.abrupt("return",null);case 9:case"end":return t.stop()}}),t)})));return function(r){return t.apply(this,arguments)}}()));case 4:return s=t.sent,h=en(s.filter(Boolean)),p=0,t.next=9,Promise.all(h.map(function(){var t=Qe(ze().mark((function t(r){var e,n,c,l,f,s,h,y;return ze().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e=r.albumIndex,n=r.tiles,c=r.meta,t.t0=e,t.next=64===t.t0?4:255===t.t0?6:10;break;case 4:return l="[last seen]",t.abrupt("break",13);case 6:if(i){t.next=8;break}return t.abrupt("return",null);case 8:return l="[deleted]",t.abrupt("break",13);case 10:return l=(p+=1).toString(10).padStart(2,"0"),t.abrupt("break",13);case 13:return t.next=15,(0,xe.aj)(n);case 15:return f=t.sent,s=f.dataHash,t.next=19,(0,Le.jm)(n);case 19:return h=t.sent,y=h.dataHash,window.setImmediate((function(){var t="function"==typeof o?o({indexText:l,albumIndex:e,displayIndex:p}):"".concat(o," ").concat(l);a({type:u.d3,payload:{fileName:t,imageHash:s,frameHash:y,tiles:n,meta:c,tempId:Math.random().toString(16).split(".").pop()}})})),t.abrupt("return",!0);case 23:case"end":return t.stop()}}),t)})));return function(r){return t.apply(this,arguments)}}()));case 9:return t.abrupt("return",!0);case 10:case"end":return t.stop()}}),t)})));return function(r,e){return t.apply(this,arguments)}}()};function on(t){return on="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},on(t)}function an(){an=function(){return t};var t={},r=Object.prototype,e=r.hasOwnProperty,n="function"==typeof Symbol?Symbol:{},o=n.iterator||"@@iterator",i=n.asyncIterator||"@@asyncIterator",a=n.toStringTag||"@@toStringTag";function c(t,r,e){return Object.defineProperty(t,r,{value:e,enumerable:!0,configurable:!0,writable:!0}),t[r]}try{c({},"")}catch(t){c=function(t,r,e){return t[r]=e}}function u(t,r,e,n){var o=r&&r.prototype instanceof s?r:s,i=Object.create(o.prototype),a=new S(n||[]);return i._invoke=function(t,r,e){var n="suspendedStart";return function(o,i){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===o)throw i;return L()}for(e.method=o,e.arg=i;;){var a=e.delegate;if(a){var c=w(a,e);if(c){if(c===f)continue;return c}}if("next"===e.method)e.sent=e._sent=e.arg;else if("throw"===e.method){if("suspendedStart"===n)throw n="completed",e.arg;e.dispatchException(e.arg)}else"return"===e.method&&e.abrupt("return",e.arg);n="executing";var u=l(t,r,e);if("normal"===u.type){if(n=e.done?"completed":"suspendedYield",u.arg===f)continue;return{value:u.arg,done:e.done}}"throw"===u.type&&(n="completed",e.method="throw",e.arg=u.arg)}}}(t,e,a),i}function l(t,r,e){try{return{type:"normal",arg:t.call(r,e)}}catch(t){return{type:"throw",arg:t}}}t.wrap=u;var f={};function s(){}function h(){}function p(){}var y={};c(y,o,(function(){return this}));var d=Object.getPrototypeOf,v=d&&d(d(x([])));v&&v!==r&&e.call(v,o)&&(y=v);var m=p.prototype=s.prototype=Object.create(y);function g(t){["next","throw","return"].forEach((function(r){c(t,r,(function(t){return this._invoke(r,t)}))}))}function b(t,r){function n(o,i,a,c){var u=l(t[o],t,i);if("throw"!==u.type){var f=u.arg,s=f.value;return s&&"object"==on(s)&&e.call(s,"__await")?r.resolve(s.__await).then((function(t){n("next",t,a,c)}),(function(t){n("throw",t,a,c)})):r.resolve(s).then((function(t){f.value=t,a(f)}),(function(t){return n("throw",t,a,c)}))}c(u.arg)}var o;this._invoke=function(t,e){function i(){return new r((function(r,o){n(t,e,r,o)}))}return o=o?o.then(i,i):i()}}function w(t,r){var e=t.iterator[r.method];if(void 0===e){if(r.delegate=null,"throw"===r.method){if(t.iterator.return&&(r.method="return",r.arg=void 0,w(t,r),"throw"===r.method))return f;r.method="throw",r.arg=new TypeError("The iterator does not provide a 'throw' method")}return f}var n=l(e,t.iterator,r.arg);if("throw"===n.type)return r.method="throw",r.arg=n.arg,r.delegate=null,f;var o=n.arg;return o?o.done?(r[t.resultName]=o.value,r.next=t.nextLoc,"return"!==r.method&&(r.method="next",r.arg=void 0),r.delegate=null,f):o:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,f)}function E(t){var r={tryLoc:t[0]};1 in t&&(r.catchLoc=t[1]),2 in t&&(r.finallyLoc=t[2],r.afterLoc=t[3]),this.tryEntries.push(r)}function O(t){var r=t.completion||{};r.type="normal",delete r.arg,t.completion=r}function S(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(E,this),this.reset(!0)}function x(t){if(t){var r=t[o];if(r)return r.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var n=-1,i=function r(){for(;++n<t.length;)if(e.call(t,n))return r.value=t[n],r.done=!1,r;return r.value=void 0,r.done=!0,r};return i.next=i}}return{next:L}}function L(){return{value:void 0,done:!0}}return h.prototype=p,c(m,"constructor",p),c(p,"constructor",h),h.displayName=c(p,a,"GeneratorFunction"),t.isGeneratorFunction=function(t){var r="function"==typeof t&&t.constructor;return!!r&&(r===h||"GeneratorFunction"===(r.displayName||r.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,p):(t.__proto__=p,c(t,a,"GeneratorFunction")),t.prototype=Object.create(m),t},t.awrap=function(t){return{__await:t}},g(b.prototype),c(b.prototype,i,(function(){return this})),t.AsyncIterator=b,t.async=function(r,e,n,o,i){void 0===i&&(i=Promise);var a=new b(u(r,e,n,o),i);return t.isGeneratorFunction(e)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},g(m),c(m,a,"Generator"),c(m,o,(function(){return this})),c(m,"toString",(function(){return"[object Generator]"})),t.keys=function(t){var r=[];for(var e in t)r.push(e);return r.reverse(),function e(){for(;r.length;){var n=r.pop();if(n in t)return e.value=n,e.done=!1,e}return e.done=!0,e}},t.values=x,S.prototype={constructor:S,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(O),!t)for(var r in this)"t"===r.charAt(0)&&e.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var r=this;function n(e,n){return a.type="throw",a.arg=t,r.next=e,n&&(r.method="next",r.arg=void 0),!!n}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],a=i.completion;if("root"===i.tryLoc)return n("end");if(i.tryLoc<=this.prev){var c=e.call(i,"catchLoc"),u=e.call(i,"finallyLoc");if(c&&u){if(this.prev<i.catchLoc)return n(i.catchLoc,!0);if(this.prev<i.finallyLoc)return n(i.finallyLoc)}else if(c){if(this.prev<i.catchLoc)return n(i.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return n(i.finallyLoc)}}}},abrupt:function(t,r){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&e.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=r&&r<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=r,i?(this.method="next",this.next=i.finallyLoc,f):this.complete(a)},complete:function(t,r){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&r&&(this.next=r),f},finish:function(t){for(var r=this.tryEntries.length-1;r>=0;--r){var e=this.tryEntries[r];if(e.finallyLoc===t)return this.complete(e.completion,e.afterLoc),O(e),f}},catch:function(t){for(var r=this.tryEntries.length-1;r>=0;--r){var e=this.tryEntries[r];if(e.tryLoc===t){var n=e.completion;if("throw"===n.type){var o=n.arg;O(e)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(t,r,e){return this.delegate={iterator:x(t),resultName:r,nextLoc:e},"next"===this.method&&(this.arg=void 0),f}},t}function cn(t,r,e,n,o,i,a){try{var c=t[i](a),u=c.value}catch(t){return void e(t)}c.done?r(u):Promise.resolve(u).then(n,o)}function un(t){return function(){var r=this,e=arguments;return new Promise((function(n,o){var i=t.apply(r,e);function a(t){cn(i,n,o,a,c,"next",t)}function c(t){cn(i,n,o,a,c,"throw",t)}a(void 0)}))}}var ln=function(t){var r=t.getState,e=t.dispatch;return function(){var t=un(an().mark((function t(n){var o,i,a,c,l,f,s,h,p,y;return an().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,(0,Se.Z)(n,"arrayBuffer");case 2:if(o=t.sent,i=r(),a=i.savFrameTypes,c=i.frames,l=i.frameGroupNames,f=i.importLastSeen,s=i.importDeleted,h=i.forceMagicCheck,(p=(0,Pe.Z)(c,l).map((function(t){var r=t.id;return{value:r,name:t.name,selected:a===r}}))).unshift({value:"",name:"None (Black frame)"}),y=nn({importLastSeen:f,data:o,frames:c,fileName:n.name,importDeleted:s,dispatch:e,forceMagicCheck:h})){t.next=9;break}throw new Error(".sav file seems to be invalid");case 9:return t.abrupt("return",new Promise((function(t){var r;e({type:u.jH,payload:{message:"Importing '".concat(n.name,"'"),questions:function(){return[{label:"Import is from a Japanese Cart (PocketCamera)",key:"cartIsJP",type:"checkbox"},p.length>1?{label:"Select frame group to use with this import",key:"chosenFrameset",type:"select",options:p}:null].filter(Boolean)},confirm:(r=un(an().mark((function r(n){var o,i;return an().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return o=n.chosenFrameset,i=n.cartIsJP,e({type:u.Gp}),r.next=4,y(o||"",Boolean(i));case 4:t(!0);case 5:case"end":return r.stop()}}),r)}))),function(t){return r.apply(this,arguments)}),deny:function(){e({type:u.Gp}),t(!0)}}})})));case 10:case"end":return t.stop()}}),t)})));return function(r){return t.apply(this,arguments)}}()};function fn(t){return fn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},fn(t)}function sn(){sn=function(){return t};var t={},r=Object.prototype,e=r.hasOwnProperty,n="function"==typeof Symbol?Symbol:{},o=n.iterator||"@@iterator",i=n.asyncIterator||"@@asyncIterator",a=n.toStringTag||"@@toStringTag";function c(t,r,e){return Object.defineProperty(t,r,{value:e,enumerable:!0,configurable:!0,writable:!0}),t[r]}try{c({},"")}catch(t){c=function(t,r,e){return t[r]=e}}function u(t,r,e,n){var o=r&&r.prototype instanceof s?r:s,i=Object.create(o.prototype),a=new S(n||[]);return i._invoke=function(t,r,e){var n="suspendedStart";return function(o,i){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===o)throw i;return L()}for(e.method=o,e.arg=i;;){var a=e.delegate;if(a){var c=w(a,e);if(c){if(c===f)continue;return c}}if("next"===e.method)e.sent=e._sent=e.arg;else if("throw"===e.method){if("suspendedStart"===n)throw n="completed",e.arg;e.dispatchException(e.arg)}else"return"===e.method&&e.abrupt("return",e.arg);n="executing";var u=l(t,r,e);if("normal"===u.type){if(n=e.done?"completed":"suspendedYield",u.arg===f)continue;return{value:u.arg,done:e.done}}"throw"===u.type&&(n="completed",e.method="throw",e.arg=u.arg)}}}(t,e,a),i}function l(t,r,e){try{return{type:"normal",arg:t.call(r,e)}}catch(t){return{type:"throw",arg:t}}}t.wrap=u;var f={};function s(){}function h(){}function p(){}var y={};c(y,o,(function(){return this}));var d=Object.getPrototypeOf,v=d&&d(d(x([])));v&&v!==r&&e.call(v,o)&&(y=v);var m=p.prototype=s.prototype=Object.create(y);function g(t){["next","throw","return"].forEach((function(r){c(t,r,(function(t){return this._invoke(r,t)}))}))}function b(t,r){function n(o,i,a,c){var u=l(t[o],t,i);if("throw"!==u.type){var f=u.arg,s=f.value;return s&&"object"==fn(s)&&e.call(s,"__await")?r.resolve(s.__await).then((function(t){n("next",t,a,c)}),(function(t){n("throw",t,a,c)})):r.resolve(s).then((function(t){f.value=t,a(f)}),(function(t){return n("throw",t,a,c)}))}c(u.arg)}var o;this._invoke=function(t,e){function i(){return new r((function(r,o){n(t,e,r,o)}))}return o=o?o.then(i,i):i()}}function w(t,r){var e=t.iterator[r.method];if(void 0===e){if(r.delegate=null,"throw"===r.method){if(t.iterator.return&&(r.method="return",r.arg=void 0,w(t,r),"throw"===r.method))return f;r.method="throw",r.arg=new TypeError("The iterator does not provide a 'throw' method")}return f}var n=l(e,t.iterator,r.arg);if("throw"===n.type)return r.method="throw",r.arg=n.arg,r.delegate=null,f;var o=n.arg;return o?o.done?(r[t.resultName]=o.value,r.next=t.nextLoc,"return"!==r.method&&(r.method="next",r.arg=void 0),r.delegate=null,f):o:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,f)}function E(t){var r={tryLoc:t[0]};1 in t&&(r.catchLoc=t[1]),2 in t&&(r.finallyLoc=t[2],r.afterLoc=t[3]),this.tryEntries.push(r)}function O(t){var r=t.completion||{};r.type="normal",delete r.arg,t.completion=r}function S(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(E,this),this.reset(!0)}function x(t){if(t){var r=t[o];if(r)return r.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var n=-1,i=function r(){for(;++n<t.length;)if(e.call(t,n))return r.value=t[n],r.done=!1,r;return r.value=void 0,r.done=!0,r};return i.next=i}}return{next:L}}function L(){return{value:void 0,done:!0}}return h.prototype=p,c(m,"constructor",p),c(p,"constructor",h),h.displayName=c(p,a,"GeneratorFunction"),t.isGeneratorFunction=function(t){var r="function"==typeof t&&t.constructor;return!!r&&(r===h||"GeneratorFunction"===(r.displayName||r.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,p):(t.__proto__=p,c(t,a,"GeneratorFunction")),t.prototype=Object.create(m),t},t.awrap=function(t){return{__await:t}},g(b.prototype),c(b.prototype,i,(function(){return this})),t.AsyncIterator=b,t.async=function(r,e,n,o,i){void 0===i&&(i=Promise);var a=new b(u(r,e,n,o),i);return t.isGeneratorFunction(e)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},g(m),c(m,a,"Generator"),c(m,o,(function(){return this})),c(m,"toString",(function(){return"[object Generator]"})),t.keys=function(t){var r=[];for(var e in t)r.push(e);return r.reverse(),function e(){for(;r.length;){var n=r.pop();if(n in t)return e.value=n,e.done=!1,e}return e.done=!0,e}},t.values=x,S.prototype={constructor:S,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(O),!t)for(var r in this)"t"===r.charAt(0)&&e.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var r=this;function n(e,n){return a.type="throw",a.arg=t,r.next=e,n&&(r.method="next",r.arg=void 0),!!n}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],a=i.completion;if("root"===i.tryLoc)return n("end");if(i.tryLoc<=this.prev){var c=e.call(i,"catchLoc"),u=e.call(i,"finallyLoc");if(c&&u){if(this.prev<i.catchLoc)return n(i.catchLoc,!0);if(this.prev<i.finallyLoc)return n(i.finallyLoc)}else if(c){if(this.prev<i.catchLoc)return n(i.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return n(i.finallyLoc)}}}},abrupt:function(t,r){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&e.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=r&&r<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=r,i?(this.method="next",this.next=i.finallyLoc,f):this.complete(a)},complete:function(t,r){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&r&&(this.next=r),f},finish:function(t){for(var r=this.tryEntries.length-1;r>=0;--r){var e=this.tryEntries[r];if(e.finallyLoc===t)return this.complete(e.completion,e.afterLoc),O(e),f}},catch:function(t){for(var r=this.tryEntries.length-1;r>=0;--r){var e=this.tryEntries[r];if(e.tryLoc===t){var n=e.completion;if("throw"===n.type){var o=n.arg;O(e)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(t,r,e){return this.delegate={iterator:x(t),resultName:r,nextLoc:e},"next"===this.method&&(this.arg=void 0),f}},t}function hn(t,r,e,n,o,i,a){try{var c=t[i](a),u=c.value}catch(t){return void e(t)}c.done?r(u):Promise.resolve(u).then(n,o)}function pn(t){return function(){var r=this,e=arguments;return new Promise((function(n,o){var i=t.apply(r,e);function a(t){hn(i,n,o,a,c,"next",t)}function c(t){hn(i,n,o,a,c,"throw",t)}a(void 0)}))}}var yn=function(t){var r=t.getState,n=t.dispatch;return function(){var t=pn(sn().mark((function t(o){var i,a,c,u,l,f,s,h,p,y;return sn().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.e(705).then(e.t.bind(e,40705,23));case 2:return i=t.sent,a=i.default,t.next=6,(0,Se.Z)(o,"arrayBuffer");case 6:return c=t.sent,u=r(),l=u.importLastSeen,f=u.importDeleted,s=u.forceMagicCheck,h=(h=Br()(c,131072).map((function(t,r){return{bankData:t,bankIndex:r,hash:a(t)}}))).filter((function(t,r){return h.findIndex((function(r){return r.hash===t.hash}))===r})),p=0,t.next=13,Promise.all(h.map(function(){var t=pn(sn().mark((function t(r){var e,i,a;return sn().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e=r.bankData,0!==(i=r.bankIndex)){t.next=3;break}return t.abrupt("return",!1);case 3:if(a=nn({importLastSeen:l,data:e,frames:[],fileName:function(t){var r=t.albumIndex;return 64===r?"".concat(o.name," [last seen in bank ").concat(i,"]"):255===r?"".concat(o.name," [deleted in bank ").concat(i,"]"):(p+=1,"".concat(o.name," ").concat(p.toString(10).padStart(3,"0")," in bank ").concat(i))},importDeleted:f,dispatch:n,forceMagicCheck:s})){t.next=7;break}return t.abrupt("return",!1);case 7:return t.abrupt("return",a("",!1));case 8:case"end":return t.stop()}}),t)})));return function(r){return t.apply(this,arguments)}}()));case 13:if((y=t.sent).filter(Boolean).length){t.next=16;break}throw new Error("File does not contain any recognizable images");case 16:return t.abrupt("return",y);case 17:case"end":return t.stop()}}),t)})));return function(r){return t.apply(this,arguments)}}()},dn=e(2737);function vn(t){return vn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},vn(t)}function mn(){mn=function(){return t};var t={},r=Object.prototype,e=r.hasOwnProperty,n="function"==typeof Symbol?Symbol:{},o=n.iterator||"@@iterator",i=n.asyncIterator||"@@asyncIterator",a=n.toStringTag||"@@toStringTag";function c(t,r,e){return Object.defineProperty(t,r,{value:e,enumerable:!0,configurable:!0,writable:!0}),t[r]}try{c({},"")}catch(t){c=function(t,r,e){return t[r]=e}}function u(t,r,e,n){var o=r&&r.prototype instanceof s?r:s,i=Object.create(o.prototype),a=new S(n||[]);return i._invoke=function(t,r,e){var n="suspendedStart";return function(o,i){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===o)throw i;return L()}for(e.method=o,e.arg=i;;){var a=e.delegate;if(a){var c=w(a,e);if(c){if(c===f)continue;return c}}if("next"===e.method)e.sent=e._sent=e.arg;else if("throw"===e.method){if("suspendedStart"===n)throw n="completed",e.arg;e.dispatchException(e.arg)}else"return"===e.method&&e.abrupt("return",e.arg);n="executing";var u=l(t,r,e);if("normal"===u.type){if(n=e.done?"completed":"suspendedYield",u.arg===f)continue;return{value:u.arg,done:e.done}}"throw"===u.type&&(n="completed",e.method="throw",e.arg=u.arg)}}}(t,e,a),i}function l(t,r,e){try{return{type:"normal",arg:t.call(r,e)}}catch(t){return{type:"throw",arg:t}}}t.wrap=u;var f={};function s(){}function h(){}function p(){}var y={};c(y,o,(function(){return this}));var d=Object.getPrototypeOf,v=d&&d(d(x([])));v&&v!==r&&e.call(v,o)&&(y=v);var m=p.prototype=s.prototype=Object.create(y);function g(t){["next","throw","return"].forEach((function(r){c(t,r,(function(t){return this._invoke(r,t)}))}))}function b(t,r){function n(o,i,a,c){var u=l(t[o],t,i);if("throw"!==u.type){var f=u.arg,s=f.value;return s&&"object"==vn(s)&&e.call(s,"__await")?r.resolve(s.__await).then((function(t){n("next",t,a,c)}),(function(t){n("throw",t,a,c)})):r.resolve(s).then((function(t){f.value=t,a(f)}),(function(t){return n("throw",t,a,c)}))}c(u.arg)}var o;this._invoke=function(t,e){function i(){return new r((function(r,o){n(t,e,r,o)}))}return o=o?o.then(i,i):i()}}function w(t,r){var e=t.iterator[r.method];if(void 0===e){if(r.delegate=null,"throw"===r.method){if(t.iterator.return&&(r.method="return",r.arg=void 0,w(t,r),"throw"===r.method))return f;r.method="throw",r.arg=new TypeError("The iterator does not provide a 'throw' method")}return f}var n=l(e,t.iterator,r.arg);if("throw"===n.type)return r.method="throw",r.arg=n.arg,r.delegate=null,f;var o=n.arg;return o?o.done?(r[t.resultName]=o.value,r.next=t.nextLoc,"return"!==r.method&&(r.method="next",r.arg=void 0),r.delegate=null,f):o:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,f)}function E(t){var r={tryLoc:t[0]};1 in t&&(r.catchLoc=t[1]),2 in t&&(r.finallyLoc=t[2],r.afterLoc=t[3]),this.tryEntries.push(r)}function O(t){var r=t.completion||{};r.type="normal",delete r.arg,t.completion=r}function S(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(E,this),this.reset(!0)}function x(t){if(t){var r=t[o];if(r)return r.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var n=-1,i=function r(){for(;++n<t.length;)if(e.call(t,n))return r.value=t[n],r.done=!1,r;return r.value=void 0,r.done=!0,r};return i.next=i}}return{next:L}}function L(){return{value:void 0,done:!0}}return h.prototype=p,c(m,"constructor",p),c(p,"constructor",h),h.displayName=c(p,a,"GeneratorFunction"),t.isGeneratorFunction=function(t){var r="function"==typeof t&&t.constructor;return!!r&&(r===h||"GeneratorFunction"===(r.displayName||r.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,p):(t.__proto__=p,c(t,a,"GeneratorFunction")),t.prototype=Object.create(m),t},t.awrap=function(t){return{__await:t}},g(b.prototype),c(b.prototype,i,(function(){return this})),t.AsyncIterator=b,t.async=function(r,e,n,o,i){void 0===i&&(i=Promise);var a=new b(u(r,e,n,o),i);return t.isGeneratorFunction(e)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},g(m),c(m,a,"Generator"),c(m,o,(function(){return this})),c(m,"toString",(function(){return"[object Generator]"})),t.keys=function(t){var r=[];for(var e in t)r.push(e);return r.reverse(),function e(){for(;r.length;){var n=r.pop();if(n in t)return e.value=n,e.done=!1,e}return e.done=!0,e}},t.values=x,S.prototype={constructor:S,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(O),!t)for(var r in this)"t"===r.charAt(0)&&e.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var r=this;function n(e,n){return a.type="throw",a.arg=t,r.next=e,n&&(r.method="next",r.arg=void 0),!!n}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],a=i.completion;if("root"===i.tryLoc)return n("end");if(i.tryLoc<=this.prev){var c=e.call(i,"catchLoc"),u=e.call(i,"finallyLoc");if(c&&u){if(this.prev<i.catchLoc)return n(i.catchLoc,!0);if(this.prev<i.finallyLoc)return n(i.finallyLoc)}else if(c){if(this.prev<i.catchLoc)return n(i.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return n(i.finallyLoc)}}}},abrupt:function(t,r){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&e.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=r&&r<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=r,i?(this.method="next",this.next=i.finallyLoc,f):this.complete(a)},complete:function(t,r){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&r&&(this.next=r),f},finish:function(t){for(var r=this.tryEntries.length-1;r>=0;--r){var e=this.tryEntries[r];if(e.finallyLoc===t)return this.complete(e.completion,e.afterLoc),O(e),f}},catch:function(t){for(var r=this.tryEntries.length-1;r>=0;--r){var e=this.tryEntries[r];if(e.tryLoc===t){var n=e.completion;if("throw"===n.type){var o=n.arg;O(e)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(t,r,e){return this.delegate={iterator:x(t),resultName:r,nextLoc:e},"next"===this.method&&(this.arg=void 0),f}},t}function gn(t,r,e,n,o,i,a){try{var c=t[i](a),u=c.value}catch(t){return void e(t)}c.done?r(u):Promise.resolve(u).then(n,o)}function bn(t){return function(){var r=this,e=arguments;return new Promise((function(n,o){var i=t.apply(r,e);function a(t){gn(i,n,o,a,c,"next",t)}function c(t){gn(i,n,o,a,c,"throw",t)}a(void 0)}))}}var wn=function(t){var r=t.dispatch;return function(){var t=bn(mn().mark((function t(e){var n,o;return mn().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,(0,Se.Z)(e,"arrayBuffer");case 2:return n=t.sent,t.next=5,(0,dn.parseReducedPackets)(n).then(dn.inflateTransferPackages).then(dn.getImageDataStream).then(dn.decompressDataStream).then(dn.decodePrintCommands).then(dn.harmonizePalettes).then(dn.transformToClassic).then(dn.completeFrame);case 5:return o=t.sent,t.next=8,Promise.all(o.map(function(){var t=bn(mn().mark((function t(n,i){var a,c,l,f,s;return mn().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,(0,xe.aj)(n);case 2:return a=t.sent,c=a.dataHash,t.next=6,(0,Le.jm)(n);case 6:return l=t.sent,f=l.dataHash,s=o.length<2?"":" (".concat(i+1,")"),r({type:u.d3,payload:{fileName:"".concat(e.name).concat(s),imageHash:c,frameHash:f,tiles:n,tempId:Math.random().toString(16).split(".").pop()}}),t.abrupt("return",!0);case 11:case"end":return t.stop()}}),t)})));return function(r,e){return t.apply(this,arguments)}}()));case 8:return t.abrupt("return",!0);case 9:case"end":return t.stop()}}),t)})));return function(r){return t.apply(this,arguments)}}()},En=function(t){t.fillStyle="#000",t.fillRect(0,0,t.canvas.width,t.canvas.height),t.filter="grayscale(1)",t.imageSmoothingEnabled=!1},On=function(t){return new Promise((function(r,e){var n=document.createElement("img"),o=document.createElement("canvas");o.width=160;var i=o.getContext("2d");n.onerror=e,n.onload=function(){var e,a=n.naturalWidth,c=n.naturalHeight;.875===c/a?(o.height=144,e=n.naturalWidth/128,En(i),i.drawImage(n,0,0,a,c,16,16,o.width-32,o.height-32)):(o.height=o.width*c/a,e=a/160,En(i),i.drawImage(n,0,0,a,c,0,0,o.width,o.height));var u=i.getImageData(0,0,o.width,o.height);r({imageData:u,scaleFactor:e,width:o.width,height:o.height,fileName:t.name})},(0,Se.Z)(t,"dataURL").then((function(t){n.src=t}))}))},Sn=e(47387);function xn(t){return xn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},xn(t)}function Ln(){Ln=function(){return t};var t={},r=Object.prototype,e=r.hasOwnProperty,n="function"==typeof Symbol?Symbol:{},o=n.iterator||"@@iterator",i=n.asyncIterator||"@@asyncIterator",a=n.toStringTag||"@@toStringTag";function c(t,r,e){return Object.defineProperty(t,r,{value:e,enumerable:!0,configurable:!0,writable:!0}),t[r]}try{c({},"")}catch(t){c=function(t,r,e){return t[r]=e}}function u(t,r,e,n){var o=r&&r.prototype instanceof s?r:s,i=Object.create(o.prototype),a=new S(n||[]);return i._invoke=function(t,r,e){var n="suspendedStart";return function(o,i){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===o)throw i;return L()}for(e.method=o,e.arg=i;;){var a=e.delegate;if(a){var c=w(a,e);if(c){if(c===f)continue;return c}}if("next"===e.method)e.sent=e._sent=e.arg;else if("throw"===e.method){if("suspendedStart"===n)throw n="completed",e.arg;e.dispatchException(e.arg)}else"return"===e.method&&e.abrupt("return",e.arg);n="executing";var u=l(t,r,e);if("normal"===u.type){if(n=e.done?"completed":"suspendedYield",u.arg===f)continue;return{value:u.arg,done:e.done}}"throw"===u.type&&(n="completed",e.method="throw",e.arg=u.arg)}}}(t,e,a),i}function l(t,r,e){try{return{type:"normal",arg:t.call(r,e)}}catch(t){return{type:"throw",arg:t}}}t.wrap=u;var f={};function s(){}function h(){}function p(){}var y={};c(y,o,(function(){return this}));var d=Object.getPrototypeOf,v=d&&d(d(x([])));v&&v!==r&&e.call(v,o)&&(y=v);var m=p.prototype=s.prototype=Object.create(y);function g(t){["next","throw","return"].forEach((function(r){c(t,r,(function(t){return this._invoke(r,t)}))}))}function b(t,r){function n(o,i,a,c){var u=l(t[o],t,i);if("throw"!==u.type){var f=u.arg,s=f.value;return s&&"object"==xn(s)&&e.call(s,"__await")?r.resolve(s.__await).then((function(t){n("next",t,a,c)}),(function(t){n("throw",t,a,c)})):r.resolve(s).then((function(t){f.value=t,a(f)}),(function(t){return n("throw",t,a,c)}))}c(u.arg)}var o;this._invoke=function(t,e){function i(){return new r((function(r,o){n(t,e,r,o)}))}return o=o?o.then(i,i):i()}}function w(t,r){var e=t.iterator[r.method];if(void 0===e){if(r.delegate=null,"throw"===r.method){if(t.iterator.return&&(r.method="return",r.arg=void 0,w(t,r),"throw"===r.method))return f;r.method="throw",r.arg=new TypeError("The iterator does not provide a 'throw' method")}return f}var n=l(e,t.iterator,r.arg);if("throw"===n.type)return r.method="throw",r.arg=n.arg,r.delegate=null,f;var o=n.arg;return o?o.done?(r[t.resultName]=o.value,r.next=t.nextLoc,"return"!==r.method&&(r.method="next",r.arg=void 0),r.delegate=null,f):o:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,f)}function E(t){var r={tryLoc:t[0]};1 in t&&(r.catchLoc=t[1]),2 in t&&(r.finallyLoc=t[2],r.afterLoc=t[3]),this.tryEntries.push(r)}function O(t){var r=t.completion||{};r.type="normal",delete r.arg,t.completion=r}function S(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(E,this),this.reset(!0)}function x(t){if(t){var r=t[o];if(r)return r.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var n=-1,i=function r(){for(;++n<t.length;)if(e.call(t,n))return r.value=t[n],r.done=!1,r;return r.value=void 0,r.done=!0,r};return i.next=i}}return{next:L}}function L(){return{value:void 0,done:!0}}return h.prototype=p,c(m,"constructor",p),c(p,"constructor",h),h.displayName=c(p,a,"GeneratorFunction"),t.isGeneratorFunction=function(t){var r="function"==typeof t&&t.constructor;return!!r&&(r===h||"GeneratorFunction"===(r.displayName||r.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,p):(t.__proto__=p,c(t,a,"GeneratorFunction")),t.prototype=Object.create(m),t},t.awrap=function(t){return{__await:t}},g(b.prototype),c(b.prototype,i,(function(){return this})),t.AsyncIterator=b,t.async=function(r,e,n,o,i){void 0===i&&(i=Promise);var a=new b(u(r,e,n,o),i);return t.isGeneratorFunction(e)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},g(m),c(m,a,"Generator"),c(m,o,(function(){return this})),c(m,"toString",(function(){return"[object Generator]"})),t.keys=function(t){var r=[];for(var e in t)r.push(e);return r.reverse(),function e(){for(;r.length;){var n=r.pop();if(n in t)return e.value=n,e.done=!1,e}return e.done=!0,e}},t.values=x,S.prototype={constructor:S,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(O),!t)for(var r in this)"t"===r.charAt(0)&&e.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var r=this;function n(e,n){return a.type="throw",a.arg=t,r.next=e,n&&(r.method="next",r.arg=void 0),!!n}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],a=i.completion;if("root"===i.tryLoc)return n("end");if(i.tryLoc<=this.prev){var c=e.call(i,"catchLoc"),u=e.call(i,"finallyLoc");if(c&&u){if(this.prev<i.catchLoc)return n(i.catchLoc,!0);if(this.prev<i.finallyLoc)return n(i.finallyLoc)}else if(c){if(this.prev<i.catchLoc)return n(i.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return n(i.finallyLoc)}}}},abrupt:function(t,r){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&e.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=r&&r<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=r,i?(this.method="next",this.next=i.finallyLoc,f):this.complete(a)},complete:function(t,r){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&r&&(this.next=r),f},finish:function(t){for(var r=this.tryEntries.length-1;r>=0;--r){var e=this.tryEntries[r];if(e.finallyLoc===t)return this.complete(e.completion,e.afterLoc),O(e),f}},catch:function(t){for(var r=this.tryEntries.length-1;r>=0;--r){var e=this.tryEntries[r];if(e.tryLoc===t){var n=e.completion;if("throw"===n.type){var o=n.arg;O(e)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(t,r,e){return this.delegate={iterator:x(t),resultName:r,nextLoc:e},"next"===this.method&&(this.arg=void 0),f}},t}function An(t,r,e,n,o,i,a){try{var c=t[i](a),u=c.value}catch(t){return void e(t)}c.done?r(u):Promise.resolve(u).then(n,o)}var jn=function(t){var r=t.dispatch,e=(0,Sn.Z)(r);return function(){var t,n=(t=Ln().mark((function t(n){var o,i,a=arguments;return Ln().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return o=a.length>1&&void 0!==a[1]&&a[1],t.next=3,On(n);case 3:return i=t.sent,o?e({bitmapQueue:[i],dither:!1,contrastBaseValues:[0,85,170,255]}):r({type:u.Vo,payload:i}),t.abrupt("return",!0);case 6:case"end":return t.stop()}}),t)})),function(){var r=this,e=arguments;return new Promise((function(n,o){var i=t.apply(r,e);function a(t){An(i,n,o,a,c,"next",t)}function c(t){An(i,n,o,a,c,"throw",t)}a(void 0)}))});return function(t){return n.apply(this,arguments)}}()},Fn=(e(82772),function(t){var r=t.split("\n").map((function(t){return t.trim()})).filter((function(t){return t.length&&0!==t.indexOf("//")&&0!==t.indexOf("/*")})).map((function(t){return t.split(" ")})).flat().map((function(t){return parseInt(t,16)}));return(0,dn.parsePackets)(r).then(dn.getImageDataStream).then(dn.decompressDataStream).then(dn.decodePrintCommands).then(dn.harmonizePalettes).then(dn.transformToClassic)}),_n="NEW_LINES",Pn="IMAGE_COMPLETE",Tn=function(t){if("#"===t.charAt(0)||"/"===t.charAt(0))return null;if("!"===t.charAt(0)||"{"===t.charAt(0)){try{var r=JSON.parse(t.slice(t.indexOf("{")).trim()),e=r.command,n=r.margin_lower;if("PRNT"===e&&n>0)return{type:Pn}}catch(t){return{type:"PARSE_ERROR",payload:"Error while trying to parse JSON data command block"}}return null}var o=t.replace(/[^0-9A-F]/gi,"");return o.length?{type:_n,payload:[o]}:null},In=e(15177),Dn=e(25108);function kn(t){return function(t){if(Array.isArray(t))return Nn(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||function(t,r){if(!t)return;if("string"==typeof t)return Nn(t,r);var e=Object.prototype.toString.call(t).slice(8,-1);"Object"===e&&t.constructor&&(e=t.constructor.name);if("Map"===e||"Set"===e)return Array.from(t);if("Arguments"===e||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(e))return Nn(t,r)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Nn(t,r){(null==r||r>t.length)&&(r=t.length);for(var e=0,n=new Array(r);e<r;e++)n[e]=t[e];return n}var Gn=function(t,r){var e=[],n="".concat(t,"\n").concat(In.oU).split("\n").map(Tn).filter(Boolean).map((function(t){var r;switch(t.type){case _n:return(r=e).push.apply(r,kn(t.payload)),null;case Pn:var n=e.filter(Boolean);return e=[],!!n.length&&n;default:return null}})).filter(Boolean);return n.length||Dn.warn("File ".concat(r," did not contain images")),Promise.resolve(n)};function Rn(t){return Rn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Rn(t)}function Cn(){Cn=function(){return t};var t={},r=Object.prototype,e=r.hasOwnProperty,n="function"==typeof Symbol?Symbol:{},o=n.iterator||"@@iterator",i=n.asyncIterator||"@@asyncIterator",a=n.toStringTag||"@@toStringTag";function c(t,r,e){return Object.defineProperty(t,r,{value:e,enumerable:!0,configurable:!0,writable:!0}),t[r]}try{c({},"")}catch(t){c=function(t,r,e){return t[r]=e}}function u(t,r,e,n){var o=r&&r.prototype instanceof s?r:s,i=Object.create(o.prototype),a=new S(n||[]);return i._invoke=function(t,r,e){var n="suspendedStart";return function(o,i){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===o)throw i;return L()}for(e.method=o,e.arg=i;;){var a=e.delegate;if(a){var c=w(a,e);if(c){if(c===f)continue;return c}}if("next"===e.method)e.sent=e._sent=e.arg;else if("throw"===e.method){if("suspendedStart"===n)throw n="completed",e.arg;e.dispatchException(e.arg)}else"return"===e.method&&e.abrupt("return",e.arg);n="executing";var u=l(t,r,e);if("normal"===u.type){if(n=e.done?"completed":"suspendedYield",u.arg===f)continue;return{value:u.arg,done:e.done}}"throw"===u.type&&(n="completed",e.method="throw",e.arg=u.arg)}}}(t,e,a),i}function l(t,r,e){try{return{type:"normal",arg:t.call(r,e)}}catch(t){return{type:"throw",arg:t}}}t.wrap=u;var f={};function s(){}function h(){}function p(){}var y={};c(y,o,(function(){return this}));var d=Object.getPrototypeOf,v=d&&d(d(x([])));v&&v!==r&&e.call(v,o)&&(y=v);var m=p.prototype=s.prototype=Object.create(y);function g(t){["next","throw","return"].forEach((function(r){c(t,r,(function(t){return this._invoke(r,t)}))}))}function b(t,r){function n(o,i,a,c){var u=l(t[o],t,i);if("throw"!==u.type){var f=u.arg,s=f.value;return s&&"object"==Rn(s)&&e.call(s,"__await")?r.resolve(s.__await).then((function(t){n("next",t,a,c)}),(function(t){n("throw",t,a,c)})):r.resolve(s).then((function(t){f.value=t,a(f)}),(function(t){return n("throw",t,a,c)}))}c(u.arg)}var o;this._invoke=function(t,e){function i(){return new r((function(r,o){n(t,e,r,o)}))}return o=o?o.then(i,i):i()}}function w(t,r){var e=t.iterator[r.method];if(void 0===e){if(r.delegate=null,"throw"===r.method){if(t.iterator.return&&(r.method="return",r.arg=void 0,w(t,r),"throw"===r.method))return f;r.method="throw",r.arg=new TypeError("The iterator does not provide a 'throw' method")}return f}var n=l(e,t.iterator,r.arg);if("throw"===n.type)return r.method="throw",r.arg=n.arg,r.delegate=null,f;var o=n.arg;return o?o.done?(r[t.resultName]=o.value,r.next=t.nextLoc,"return"!==r.method&&(r.method="next",r.arg=void 0),r.delegate=null,f):o:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,f)}function E(t){var r={tryLoc:t[0]};1 in t&&(r.catchLoc=t[1]),2 in t&&(r.finallyLoc=t[2],r.afterLoc=t[3]),this.tryEntries.push(r)}function O(t){var r=t.completion||{};r.type="normal",delete r.arg,t.completion=r}function S(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(E,this),this.reset(!0)}function x(t){if(t){var r=t[o];if(r)return r.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var n=-1,i=function r(){for(;++n<t.length;)if(e.call(t,n))return r.value=t[n],r.done=!1,r;return r.value=void 0,r.done=!0,r};return i.next=i}}return{next:L}}function L(){return{value:void 0,done:!0}}return h.prototype=p,c(m,"constructor",p),c(p,"constructor",h),h.displayName=c(p,a,"GeneratorFunction"),t.isGeneratorFunction=function(t){var r="function"==typeof t&&t.constructor;return!!r&&(r===h||"GeneratorFunction"===(r.displayName||r.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,p):(t.__proto__=p,c(t,a,"GeneratorFunction")),t.prototype=Object.create(m),t},t.awrap=function(t){return{__await:t}},g(b.prototype),c(b.prototype,i,(function(){return this})),t.AsyncIterator=b,t.async=function(r,e,n,o,i){void 0===i&&(i=Promise);var a=new b(u(r,e,n,o),i);return t.isGeneratorFunction(e)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},g(m),c(m,a,"Generator"),c(m,o,(function(){return this})),c(m,"toString",(function(){return"[object Generator]"})),t.keys=function(t){var r=[];for(var e in t)r.push(e);return r.reverse(),function e(){for(;r.length;){var n=r.pop();if(n in t)return e.value=n,e.done=!1,e}return e.done=!0,e}},t.values=x,S.prototype={constructor:S,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(O),!t)for(var r in this)"t"===r.charAt(0)&&e.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var r=this;function n(e,n){return a.type="throw",a.arg=t,r.next=e,n&&(r.method="next",r.arg=void 0),!!n}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],a=i.completion;if("root"===i.tryLoc)return n("end");if(i.tryLoc<=this.prev){var c=e.call(i,"catchLoc"),u=e.call(i,"finallyLoc");if(c&&u){if(this.prev<i.catchLoc)return n(i.catchLoc,!0);if(this.prev<i.finallyLoc)return n(i.finallyLoc)}else if(c){if(this.prev<i.catchLoc)return n(i.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return n(i.finallyLoc)}}}},abrupt:function(t,r){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&e.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=r&&r<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=r,i?(this.method="next",this.next=i.finallyLoc,f):this.complete(a)},complete:function(t,r){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&r&&(this.next=r),f},finish:function(t){for(var r=this.tryEntries.length-1;r>=0;--r){var e=this.tryEntries[r];if(e.finallyLoc===t)return this.complete(e.completion,e.afterLoc),O(e),f}},catch:function(t){for(var r=this.tryEntries.length-1;r>=0;--r){var e=this.tryEntries[r];if(e.tryLoc===t){var n=e.completion;if("throw"===n.type){var o=n.arg;O(e)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(t,r,e){return this.delegate={iterator:x(t),resultName:r,nextLoc:e},"next"===this.method&&(this.arg=void 0),f}},t}function Mn(t,r,e,n,o,i,a){try{var c=t[i](a),u=c.value}catch(t){return void e(t)}c.done?r(u):Promise.resolve(u).then(n,o)}function Bn(t){return function(){var r=this,e=arguments;return new Promise((function(n,o){var i=t.apply(r,e);function a(t){Mn(i,n,o,a,c,"next",t)}function c(t){Mn(i,n,o,a,c,"throw",t)}a(void 0)}))}}var Un=function(t){var r=t.dispatch;return function(){var t=Bn(Cn().mark((function t(e){var n,o;return Cn().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,(0,Se.Z)(e,"text");case 2:if(-1===(n=t.sent).indexOf('{"command"')){t.next=9;break}return t.next=6,Gn(n,e.name);case 6:o=t.sent,t.next=12;break;case 9:return t.next=11,Fn(n,e.name);case 11:o=t.sent;case 12:return t.next=14,Promise.all(o.map(function(){var t=Bn(Cn().mark((function t(n,i){var a,c,l,f,s;return Cn().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,(0,xe.aj)(n);case 2:return a=t.sent,c=a.dataHash,t.next=6,(0,Le.jm)(n);case 6:return l=t.sent,f=l.dataHash,s=o.length<2?"":" ".concat((i+1).toString(10).padStart(2,"0")),r({type:u.d3,payload:{fileName:"".concat(e.name).concat(s),imageHash:c,frameHash:f,tiles:n,tempId:Math.random().toString(16).split(".").pop()}}),t.abrupt("return",!0);case 11:case"end":return t.stop()}}),t)})));return function(r,e){return t.apply(this,arguments)}}()));case 14:return t.abrupt("return",!0);case 15:case"end":return t.stop()}}),t)})));return function(r){return t.apply(this,arguments)}}()};function Hn(t){return Hn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Hn(t)}function Zn(){Zn=function(){return t};var t={},r=Object.prototype,e=r.hasOwnProperty,n="function"==typeof Symbol?Symbol:{},o=n.iterator||"@@iterator",i=n.asyncIterator||"@@asyncIterator",a=n.toStringTag||"@@toStringTag";function c(t,r,e){return Object.defineProperty(t,r,{value:e,enumerable:!0,configurable:!0,writable:!0}),t[r]}try{c({},"")}catch(t){c=function(t,r,e){return t[r]=e}}function u(t,r,e,n){var o=r&&r.prototype instanceof s?r:s,i=Object.create(o.prototype),a=new S(n||[]);return i._invoke=function(t,r,e){var n="suspendedStart";return function(o,i){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===o)throw i;return L()}for(e.method=o,e.arg=i;;){var a=e.delegate;if(a){var c=w(a,e);if(c){if(c===f)continue;return c}}if("next"===e.method)e.sent=e._sent=e.arg;else if("throw"===e.method){if("suspendedStart"===n)throw n="completed",e.arg;e.dispatchException(e.arg)}else"return"===e.method&&e.abrupt("return",e.arg);n="executing";var u=l(t,r,e);if("normal"===u.type){if(n=e.done?"completed":"suspendedYield",u.arg===f)continue;return{value:u.arg,done:e.done}}"throw"===u.type&&(n="completed",e.method="throw",e.arg=u.arg)}}}(t,e,a),i}function l(t,r,e){try{return{type:"normal",arg:t.call(r,e)}}catch(t){return{type:"throw",arg:t}}}t.wrap=u;var f={};function s(){}function h(){}function p(){}var y={};c(y,o,(function(){return this}));var d=Object.getPrototypeOf,v=d&&d(d(x([])));v&&v!==r&&e.call(v,o)&&(y=v);var m=p.prototype=s.prototype=Object.create(y);function g(t){["next","throw","return"].forEach((function(r){c(t,r,(function(t){return this._invoke(r,t)}))}))}function b(t,r){function n(o,i,a,c){var u=l(t[o],t,i);if("throw"!==u.type){var f=u.arg,s=f.value;return s&&"object"==Hn(s)&&e.call(s,"__await")?r.resolve(s.__await).then((function(t){n("next",t,a,c)}),(function(t){n("throw",t,a,c)})):r.resolve(s).then((function(t){f.value=t,a(f)}),(function(t){return n("throw",t,a,c)}))}c(u.arg)}var o;this._invoke=function(t,e){function i(){return new r((function(r,o){n(t,e,r,o)}))}return o=o?o.then(i,i):i()}}function w(t,r){var e=t.iterator[r.method];if(void 0===e){if(r.delegate=null,"throw"===r.method){if(t.iterator.return&&(r.method="return",r.arg=void 0,w(t,r),"throw"===r.method))return f;r.method="throw",r.arg=new TypeError("The iterator does not provide a 'throw' method")}return f}var n=l(e,t.iterator,r.arg);if("throw"===n.type)return r.method="throw",r.arg=n.arg,r.delegate=null,f;var o=n.arg;return o?o.done?(r[t.resultName]=o.value,r.next=t.nextLoc,"return"!==r.method&&(r.method="next",r.arg=void 0),r.delegate=null,f):o:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,f)}function E(t){var r={tryLoc:t[0]};1 in t&&(r.catchLoc=t[1]),2 in t&&(r.finallyLoc=t[2],r.afterLoc=t[3]),this.tryEntries.push(r)}function O(t){var r=t.completion||{};r.type="normal",delete r.arg,t.completion=r}function S(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(E,this),this.reset(!0)}function x(t){if(t){var r=t[o];if(r)return r.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var n=-1,i=function r(){for(;++n<t.length;)if(e.call(t,n))return r.value=t[n],r.done=!1,r;return r.value=void 0,r.done=!0,r};return i.next=i}}return{next:L}}function L(){return{value:void 0,done:!0}}return h.prototype=p,c(m,"constructor",p),c(p,"constructor",h),h.displayName=c(p,a,"GeneratorFunction"),t.isGeneratorFunction=function(t){var r="function"==typeof t&&t.constructor;return!!r&&(r===h||"GeneratorFunction"===(r.displayName||r.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,p):(t.__proto__=p,c(t,a,"GeneratorFunction")),t.prototype=Object.create(m),t},t.awrap=function(t){return{__await:t}},g(b.prototype),c(b.prototype,i,(function(){return this})),t.AsyncIterator=b,t.async=function(r,e,n,o,i){void 0===i&&(i=Promise);var a=new b(u(r,e,n,o),i);return t.isGeneratorFunction(e)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},g(m),c(m,a,"Generator"),c(m,o,(function(){return this})),c(m,"toString",(function(){return"[object Generator]"})),t.keys=function(t){var r=[];for(var e in t)r.push(e);return r.reverse(),function e(){for(;r.length;){var n=r.pop();if(n in t)return e.value=n,e.done=!1,e}return e.done=!0,e}},t.values=x,S.prototype={constructor:S,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(O),!t)for(var r in this)"t"===r.charAt(0)&&e.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var r=this;function n(e,n){return a.type="throw",a.arg=t,r.next=e,n&&(r.method="next",r.arg=void 0),!!n}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],a=i.completion;if("root"===i.tryLoc)return n("end");if(i.tryLoc<=this.prev){var c=e.call(i,"catchLoc"),u=e.call(i,"finallyLoc");if(c&&u){if(this.prev<i.catchLoc)return n(i.catchLoc,!0);if(this.prev<i.finallyLoc)return n(i.finallyLoc)}else if(c){if(this.prev<i.catchLoc)return n(i.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return n(i.finallyLoc)}}}},abrupt:function(t,r){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&e.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=r&&r<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=r,i?(this.method="next",this.next=i.finallyLoc,f):this.complete(a)},complete:function(t,r){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&r&&(this.next=r),f},finish:function(t){for(var r=this.tryEntries.length-1;r>=0;--r){var e=this.tryEntries[r];if(e.finallyLoc===t)return this.complete(e.completion,e.afterLoc),O(e),f}},catch:function(t){for(var r=this.tryEntries.length-1;r>=0;--r){var e=this.tryEntries[r];if(e.tryLoc===t){var n=e.completion;if("throw"===n.type){var o=n.arg;O(e)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(t,r,e){return this.delegate={iterator:x(t),resultName:r,nextLoc:e},"next"===this.method&&(this.arg=void 0),f}},t}function Yn(t,r,e,n,o,i,a){try{var c=t[i](a),u=c.value}catch(t){return void e(t)}c.done?r(u):Promise.resolve(u).then(n,o)}var Vn=function(t){var r=t.dispatch;return function(){var t,e=(t=Zn().mark((function t(e){var n,o,i;return Zn().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,(0,Se.Z)(e,"text");case 2:o=t.sent,i={},t.prev=4,i=JSON.parse(o),t.next=11;break;case 8:throw t.prev=8,t.t0=t.catch(4),new Error("Not a valid .json file");case 11:if(null!==(n=i)&&void 0!==n&&n.state){t.next=13;break}throw new Error("Not a settings .json file");case 13:return r({type:u.uH,payload:i}),t.abrupt("return",!0);case 15:case"end":return t.stop()}}),t,null,[[4,8]])})),function(){var r=this,e=arguments;return new Promise((function(n,o){var i=t.apply(r,e);function a(t){Yn(i,n,o,a,c,"next",t)}function c(t){Yn(i,n,o,a,c,"throw",t)}a(void 0)}))});return function(t){return e.apply(this,arguments)}}()},$n=function(t){var r=t,e=t.type,n=null,o=!0;if(t.blob&&((r=t.blob).name=t.blobName,e=t.contentType||"application/unknown",n=t.meta,o=void 0!==t.ok?t.ok:o),!o||!r.size)throw new Error("Error in received data");return{file:r,contentType:e,meta:n}};function Jn(t){return Jn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Jn(t)}function zn(){zn=function(){return t};var t={},r=Object.prototype,e=r.hasOwnProperty,n="function"==typeof Symbol?Symbol:{},o=n.iterator||"@@iterator",i=n.asyncIterator||"@@asyncIterator",a=n.toStringTag||"@@toStringTag";function c(t,r,e){return Object.defineProperty(t,r,{value:e,enumerable:!0,configurable:!0,writable:!0}),t[r]}try{c({},"")}catch(t){c=function(t,r,e){return t[r]=e}}function u(t,r,e,n){var o=r&&r.prototype instanceof s?r:s,i=Object.create(o.prototype),a=new S(n||[]);return i._invoke=function(t,r,e){var n="suspendedStart";return function(o,i){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===o)throw i;return L()}for(e.method=o,e.arg=i;;){var a=e.delegate;if(a){var c=w(a,e);if(c){if(c===f)continue;return c}}if("next"===e.method)e.sent=e._sent=e.arg;else if("throw"===e.method){if("suspendedStart"===n)throw n="completed",e.arg;e.dispatchException(e.arg)}else"return"===e.method&&e.abrupt("return",e.arg);n="executing";var u=l(t,r,e);if("normal"===u.type){if(n=e.done?"completed":"suspendedYield",u.arg===f)continue;return{value:u.arg,done:e.done}}"throw"===u.type&&(n="completed",e.method="throw",e.arg=u.arg)}}}(t,e,a),i}function l(t,r,e){try{return{type:"normal",arg:t.call(r,e)}}catch(t){return{type:"throw",arg:t}}}t.wrap=u;var f={};function s(){}function h(){}function p(){}var y={};c(y,o,(function(){return this}));var d=Object.getPrototypeOf,v=d&&d(d(x([])));v&&v!==r&&e.call(v,o)&&(y=v);var m=p.prototype=s.prototype=Object.create(y);function g(t){["next","throw","return"].forEach((function(r){c(t,r,(function(t){return this._invoke(r,t)}))}))}function b(t,r){function n(o,i,a,c){var u=l(t[o],t,i);if("throw"!==u.type){var f=u.arg,s=f.value;return s&&"object"==Jn(s)&&e.call(s,"__await")?r.resolve(s.__await).then((function(t){n("next",t,a,c)}),(function(t){n("throw",t,a,c)})):r.resolve(s).then((function(t){f.value=t,a(f)}),(function(t){return n("throw",t,a,c)}))}c(u.arg)}var o;this._invoke=function(t,e){function i(){return new r((function(r,o){n(t,e,r,o)}))}return o=o?o.then(i,i):i()}}function w(t,r){var e=t.iterator[r.method];if(void 0===e){if(r.delegate=null,"throw"===r.method){if(t.iterator.return&&(r.method="return",r.arg=void 0,w(t,r),"throw"===r.method))return f;r.method="throw",r.arg=new TypeError("The iterator does not provide a 'throw' method")}return f}var n=l(e,t.iterator,r.arg);if("throw"===n.type)return r.method="throw",r.arg=n.arg,r.delegate=null,f;var o=n.arg;return o?o.done?(r[t.resultName]=o.value,r.next=t.nextLoc,"return"!==r.method&&(r.method="next",r.arg=void 0),r.delegate=null,f):o:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,f)}function E(t){var r={tryLoc:t[0]};1 in t&&(r.catchLoc=t[1]),2 in t&&(r.finallyLoc=t[2],r.afterLoc=t[3]),this.tryEntries.push(r)}function O(t){var r=t.completion||{};r.type="normal",delete r.arg,t.completion=r}function S(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(E,this),this.reset(!0)}function x(t){if(t){var r=t[o];if(r)return r.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var n=-1,i=function r(){for(;++n<t.length;)if(e.call(t,n))return r.value=t[n],r.done=!1,r;return r.value=void 0,r.done=!0,r};return i.next=i}}return{next:L}}function L(){return{value:void 0,done:!0}}return h.prototype=p,c(m,"constructor",p),c(p,"constructor",h),h.displayName=c(p,a,"GeneratorFunction"),t.isGeneratorFunction=function(t){var r="function"==typeof t&&t.constructor;return!!r&&(r===h||"GeneratorFunction"===(r.displayName||r.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,p):(t.__proto__=p,c(t,a,"GeneratorFunction")),t.prototype=Object.create(m),t},t.awrap=function(t){return{__await:t}},g(b.prototype),c(b.prototype,i,(function(){return this})),t.AsyncIterator=b,t.async=function(r,e,n,o,i){void 0===i&&(i=Promise);var a=new b(u(r,e,n,o),i);return t.isGeneratorFunction(e)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},g(m),c(m,a,"Generator"),c(m,o,(function(){return this})),c(m,"toString",(function(){return"[object Generator]"})),t.keys=function(t){var r=[];for(var e in t)r.push(e);return r.reverse(),function e(){for(;r.length;){var n=r.pop();if(n in t)return e.value=n,e.done=!1,e}return e.done=!0,e}},t.values=x,S.prototype={constructor:S,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(O),!t)for(var r in this)"t"===r.charAt(0)&&e.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var r=this;function n(e,n){return a.type="throw",a.arg=t,r.next=e,n&&(r.method="next",r.arg=void 0),!!n}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],a=i.completion;if("root"===i.tryLoc)return n("end");if(i.tryLoc<=this.prev){var c=e.call(i,"catchLoc"),u=e.call(i,"finallyLoc");if(c&&u){if(this.prev<i.catchLoc)return n(i.catchLoc,!0);if(this.prev<i.finallyLoc)return n(i.finallyLoc)}else if(c){if(this.prev<i.catchLoc)return n(i.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return n(i.finallyLoc)}}}},abrupt:function(t,r){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&e.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=r&&r<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=r,i?(this.method="next",this.next=i.finallyLoc,f):this.complete(a)},complete:function(t,r){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&r&&(this.next=r),f},finish:function(t){for(var r=this.tryEntries.length-1;r>=0;--r){var e=this.tryEntries[r];if(e.finallyLoc===t)return this.complete(e.completion,e.afterLoc),O(e),f}},catch:function(t){for(var r=this.tryEntries.length-1;r>=0;--r){var e=this.tryEntries[r];if(e.tryLoc===t){var n=e.completion;if("throw"===n.type){var o=n.arg;O(e)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(t,r,e){return this.delegate={iterator:x(t),resultName:r,nextLoc:e},"next"===this.method&&(this.arg=void 0),f}},t}function Wn(t,r,e,n,o,i,a){try{var c=t[i](a),u=c.value}catch(t){return void e(t)}c.done?r(u):Promise.resolve(u).then(n,o)}var Xn=function(t){var r=ln(t),e=yn(t),n=_e(t),o=jn(t),i=Un(t),a=wn(t),c=Vn(t);return function(){var t,u=(t=zn().mark((function t(u){var l,f=arguments;return zn().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return l=(f.length>1&&void 0!==f[1]?f[1]:{fromPrinter:!1}).fromPrinter,t.next=3,Promise.all(u.map((function(t){var u,f,s,h=$n(t),p=h.file,y=h.contentType;if(y&&y.startsWith("image/"))return o(p,l);if(p.size>268435455)throw new Error("File too large");if("text/plain"===y)return i(p);if("application/json"===y)return c(p);if(null!==(u=p.name)&&void 0!==u&&u.toLowerCase().endsWith(".sav")&&(p.size%4096==0||3584===p.size))return r(p);if((null!==(f=p.name)&&void 0!==f&&f.toLowerCase().endsWith(".gb")||null!==(s=p.name)&&void 0!==s&&s.toLowerCase().endsWith(".gbc"))&&p.size%1048576==0)return e(p);if("application/pico-printer-binary-log"===y)return a(p);if(y.startsWith("application/"))return n(p);throw new Error("Not a dump")})));case 3:case"end":return t.stop()}}),t)})),function(){var r=this,e=arguments;return new Promise((function(n,o){var i=t.apply(r,e);function a(t){Wn(i,n,o,a,c,"next",t)}function c(t){Wn(i,n,o,a,c,"throw",t)}a(void 0)}))});return function(t){return u.apply(this,arguments)}}()};function qn(t){return qn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},qn(t)}function Kn(){Kn=function(){return t};var t={},r=Object.prototype,e=r.hasOwnProperty,n="function"==typeof Symbol?Symbol:{},o=n.iterator||"@@iterator",i=n.asyncIterator||"@@asyncIterator",a=n.toStringTag||"@@toStringTag";function c(t,r,e){return Object.defineProperty(t,r,{value:e,enumerable:!0,configurable:!0,writable:!0}),t[r]}try{c({},"")}catch(t){c=function(t,r,e){return t[r]=e}}function u(t,r,e,n){var o=r&&r.prototype instanceof s?r:s,i=Object.create(o.prototype),a=new S(n||[]);return i._invoke=function(t,r,e){var n="suspendedStart";return function(o,i){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===o)throw i;return L()}for(e.method=o,e.arg=i;;){var a=e.delegate;if(a){var c=w(a,e);if(c){if(c===f)continue;return c}}if("next"===e.method)e.sent=e._sent=e.arg;else if("throw"===e.method){if("suspendedStart"===n)throw n="completed",e.arg;e.dispatchException(e.arg)}else"return"===e.method&&e.abrupt("return",e.arg);n="executing";var u=l(t,r,e);if("normal"===u.type){if(n=e.done?"completed":"suspendedYield",u.arg===f)continue;return{value:u.arg,done:e.done}}"throw"===u.type&&(n="completed",e.method="throw",e.arg=u.arg)}}}(t,e,a),i}function l(t,r,e){try{return{type:"normal",arg:t.call(r,e)}}catch(t){return{type:"throw",arg:t}}}t.wrap=u;var f={};function s(){}function h(){}function p(){}var y={};c(y,o,(function(){return this}));var d=Object.getPrototypeOf,v=d&&d(d(x([])));v&&v!==r&&e.call(v,o)&&(y=v);var m=p.prototype=s.prototype=Object.create(y);function g(t){["next","throw","return"].forEach((function(r){c(t,r,(function(t){return this._invoke(r,t)}))}))}function b(t,r){function n(o,i,a,c){var u=l(t[o],t,i);if("throw"!==u.type){var f=u.arg,s=f.value;return s&&"object"==qn(s)&&e.call(s,"__await")?r.resolve(s.__await).then((function(t){n("next",t,a,c)}),(function(t){n("throw",t,a,c)})):r.resolve(s).then((function(t){f.value=t,a(f)}),(function(t){return n("throw",t,a,c)}))}c(u.arg)}var o;this._invoke=function(t,e){function i(){return new r((function(r,o){n(t,e,r,o)}))}return o=o?o.then(i,i):i()}}function w(t,r){var e=t.iterator[r.method];if(void 0===e){if(r.delegate=null,"throw"===r.method){if(t.iterator.return&&(r.method="return",r.arg=void 0,w(t,r),"throw"===r.method))return f;r.method="throw",r.arg=new TypeError("The iterator does not provide a 'throw' method")}return f}var n=l(e,t.iterator,r.arg);if("throw"===n.type)return r.method="throw",r.arg=n.arg,r.delegate=null,f;var o=n.arg;return o?o.done?(r[t.resultName]=o.value,r.next=t.nextLoc,"return"!==r.method&&(r.method="next",r.arg=void 0),r.delegate=null,f):o:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,f)}function E(t){var r={tryLoc:t[0]};1 in t&&(r.catchLoc=t[1]),2 in t&&(r.finallyLoc=t[2],r.afterLoc=t[3]),this.tryEntries.push(r)}function O(t){var r=t.completion||{};r.type="normal",delete r.arg,t.completion=r}function S(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(E,this),this.reset(!0)}function x(t){if(t){var r=t[o];if(r)return r.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var n=-1,i=function r(){for(;++n<t.length;)if(e.call(t,n))return r.value=t[n],r.done=!1,r;return r.value=void 0,r.done=!0,r};return i.next=i}}return{next:L}}function L(){return{value:void 0,done:!0}}return h.prototype=p,c(m,"constructor",p),c(p,"constructor",h),h.displayName=c(p,a,"GeneratorFunction"),t.isGeneratorFunction=function(t){var r="function"==typeof t&&t.constructor;return!!r&&(r===h||"GeneratorFunction"===(r.displayName||r.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,p):(t.__proto__=p,c(t,a,"GeneratorFunction")),t.prototype=Object.create(m),t},t.awrap=function(t){return{__await:t}},g(b.prototype),c(b.prototype,i,(function(){return this})),t.AsyncIterator=b,t.async=function(r,e,n,o,i){void 0===i&&(i=Promise);var a=new b(u(r,e,n,o),i);return t.isGeneratorFunction(e)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},g(m),c(m,a,"Generator"),c(m,o,(function(){return this})),c(m,"toString",(function(){return"[object Generator]"})),t.keys=function(t){var r=[];for(var e in t)r.push(e);return r.reverse(),function e(){for(;r.length;){var n=r.pop();if(n in t)return e.value=n,e.done=!1,e}return e.done=!0,e}},t.values=x,S.prototype={constructor:S,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(O),!t)for(var r in this)"t"===r.charAt(0)&&e.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var r=this;function n(e,n){return a.type="throw",a.arg=t,r.next=e,n&&(r.method="next",r.arg=void 0),!!n}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],a=i.completion;if("root"===i.tryLoc)return n("end");if(i.tryLoc<=this.prev){var c=e.call(i,"catchLoc"),u=e.call(i,"finallyLoc");if(c&&u){if(this.prev<i.catchLoc)return n(i.catchLoc,!0);if(this.prev<i.finallyLoc)return n(i.finallyLoc)}else if(c){if(this.prev<i.catchLoc)return n(i.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return n(i.finallyLoc)}}}},abrupt:function(t,r){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&e.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=r&&r<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=r,i?(this.method="next",this.next=i.finallyLoc,f):this.complete(a)},complete:function(t,r){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&r&&(this.next=r),f},finish:function(t){for(var r=this.tryEntries.length-1;r>=0;--r){var e=this.tryEntries[r];if(e.finallyLoc===t)return this.complete(e.completion,e.afterLoc),O(e),f}},catch:function(t){for(var r=this.tryEntries.length-1;r>=0;--r){var e=this.tryEntries[r];if(e.tryLoc===t){var n=e.completion;if("throw"===n.type){var o=n.arg;O(e)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(t,r,e){return this.delegate={iterator:x(t),resultName:r,nextLoc:e},"next"===this.method&&(this.arg=void 0),f}},t}function Qn(t){return function(t){if(Array.isArray(t))return to(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||function(t,r){if(!t)return;if("string"==typeof t)return to(t,r);var e=Object.prototype.toString.call(t).slice(8,-1);"Object"===e&&t.constructor&&(e=t.constructor.name);if("Map"===e||"Set"===e)return Array.from(t);if("Arguments"===e||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(e))return to(t,r)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function to(t,r){(null==r||r>t.length)&&(r=t.length);for(var e=0,n=new Array(r);e<r;e++)n[e]=t[e];return n}function ro(t,r,e,n,o,i,a){try{var c=t[i](a),u=c.value}catch(t){return void e(t)}c.done?r(u):Promise.resolve(u).then(n,o)}var eo=function(t){var r,e=document.querySelector("#app"),n=Xn(t),o=!1;return e.addEventListener("dragover",(function(e){e.preventDefault(),o||t.dispatch({type:u.xo}),window.clearTimeout(r),o=!0,r=window.setTimeout((function(){o=!1,t.dispatch({type:u.es})}),250)})),e.addEventListener("drop",function(){var r,e=(r=Kn().mark((function r(e){var o;return Kn().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return e.preventDefault(),o=e.dataTransfer.items?Qn(e.dataTransfer.items).filter((function(t){return"file"===t.kind})).map((function(t){return t.getAsFile()})):Qn(e.dataTransfer.files),r.prev=2,r.next=5,n(o);case 5:r.next=10;break;case 7:r.prev=7,r.t0=r.catch(2),t.dispatch({type:u.pn,payload:r.t0.message});case 10:case"end":return r.stop()}}),r,null,[[2,7]])})),function(){var t=this,e=arguments;return new Promise((function(n,o){var i=r.apply(t,e);function a(t){ro(i,n,o,a,c,"next",t)}function c(t){ro(i,n,o,a,c,"throw",t)}a(void 0)}))});return function(t){return e.apply(this,arguments)}}()),function(t){return function(r){t(r)}}},no=function(t){var r=null;return function(n){return function(o){n(o);var i=t.getState().gitStorage,a=i.use,c=i.owner,l=i.repo,f=i.branch,s=i.token;a&&c&&l&&f&&s&&(o.type===u.Ik||o.type===u.eP&&"git"===o.payload.storageType)&&(r?r(o):Promise.all([e.e(555),e.e(340)]).then(e.bind(e,59206)).then((function(e){var n=e.init,i=e.middleware;n(t),(r=i(t))(o)})))}}},oo=function(){return function(t){return function(r){r.type===u.pn&&alert(r.payload),t(r)}}};function io(t){return io="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},io(t)}function ao(){ao=function(){return t};var t={},r=Object.prototype,e=r.hasOwnProperty,n="function"==typeof Symbol?Symbol:{},o=n.iterator||"@@iterator",i=n.asyncIterator||"@@asyncIterator",a=n.toStringTag||"@@toStringTag";function c(t,r,e){return Object.defineProperty(t,r,{value:e,enumerable:!0,configurable:!0,writable:!0}),t[r]}try{c({},"")}catch(t){c=function(t,r,e){return t[r]=e}}function u(t,r,e,n){var o=r&&r.prototype instanceof s?r:s,i=Object.create(o.prototype),a=new S(n||[]);return i._invoke=function(t,r,e){var n="suspendedStart";return function(o,i){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===o)throw i;return L()}for(e.method=o,e.arg=i;;){var a=e.delegate;if(a){var c=w(a,e);if(c){if(c===f)continue;return c}}if("next"===e.method)e.sent=e._sent=e.arg;else if("throw"===e.method){if("suspendedStart"===n)throw n="completed",e.arg;e.dispatchException(e.arg)}else"return"===e.method&&e.abrupt("return",e.arg);n="executing";var u=l(t,r,e);if("normal"===u.type){if(n=e.done?"completed":"suspendedYield",u.arg===f)continue;return{value:u.arg,done:e.done}}"throw"===u.type&&(n="completed",e.method="throw",e.arg=u.arg)}}}(t,e,a),i}function l(t,r,e){try{return{type:"normal",arg:t.call(r,e)}}catch(t){return{type:"throw",arg:t}}}t.wrap=u;var f={};function s(){}function h(){}function p(){}var y={};c(y,o,(function(){return this}));var d=Object.getPrototypeOf,v=d&&d(d(x([])));v&&v!==r&&e.call(v,o)&&(y=v);var m=p.prototype=s.prototype=Object.create(y);function g(t){["next","throw","return"].forEach((function(r){c(t,r,(function(t){return this._invoke(r,t)}))}))}function b(t,r){function n(o,i,a,c){var u=l(t[o],t,i);if("throw"!==u.type){var f=u.arg,s=f.value;return s&&"object"==io(s)&&e.call(s,"__await")?r.resolve(s.__await).then((function(t){n("next",t,a,c)}),(function(t){n("throw",t,a,c)})):r.resolve(s).then((function(t){f.value=t,a(f)}),(function(t){return n("throw",t,a,c)}))}c(u.arg)}var o;this._invoke=function(t,e){function i(){return new r((function(r,o){n(t,e,r,o)}))}return o=o?o.then(i,i):i()}}function w(t,r){var e=t.iterator[r.method];if(void 0===e){if(r.delegate=null,"throw"===r.method){if(t.iterator.return&&(r.method="return",r.arg=void 0,w(t,r),"throw"===r.method))return f;r.method="throw",r.arg=new TypeError("The iterator does not provide a 'throw' method")}return f}var n=l(e,t.iterator,r.arg);if("throw"===n.type)return r.method="throw",r.arg=n.arg,r.delegate=null,f;var o=n.arg;return o?o.done?(r[t.resultName]=o.value,r.next=t.nextLoc,"return"!==r.method&&(r.method="next",r.arg=void 0),r.delegate=null,f):o:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,f)}function E(t){var r={tryLoc:t[0]};1 in t&&(r.catchLoc=t[1]),2 in t&&(r.finallyLoc=t[2],r.afterLoc=t[3]),this.tryEntries.push(r)}function O(t){var r=t.completion||{};r.type="normal",delete r.arg,t.completion=r}function S(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(E,this),this.reset(!0)}function x(t){if(t){var r=t[o];if(r)return r.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var n=-1,i=function r(){for(;++n<t.length;)if(e.call(t,n))return r.value=t[n],r.done=!1,r;return r.value=void 0,r.done=!0,r};return i.next=i}}return{next:L}}function L(){return{value:void 0,done:!0}}return h.prototype=p,c(m,"constructor",p),c(p,"constructor",h),h.displayName=c(p,a,"GeneratorFunction"),t.isGeneratorFunction=function(t){var r="function"==typeof t&&t.constructor;return!!r&&(r===h||"GeneratorFunction"===(r.displayName||r.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,p):(t.__proto__=p,c(t,a,"GeneratorFunction")),t.prototype=Object.create(m),t},t.awrap=function(t){return{__await:t}},g(b.prototype),c(b.prototype,i,(function(){return this})),t.AsyncIterator=b,t.async=function(r,e,n,o,i){void 0===i&&(i=Promise);var a=new b(u(r,e,n,o),i);return t.isGeneratorFunction(e)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},g(m),c(m,a,"Generator"),c(m,o,(function(){return this})),c(m,"toString",(function(){return"[object Generator]"})),t.keys=function(t){var r=[];for(var e in t)r.push(e);return r.reverse(),function e(){for(;r.length;){var n=r.pop();if(n in t)return e.value=n,e.done=!1,e}return e.done=!0,e}},t.values=x,S.prototype={constructor:S,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(O),!t)for(var r in this)"t"===r.charAt(0)&&e.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var r=this;function n(e,n){return a.type="throw",a.arg=t,r.next=e,n&&(r.method="next",r.arg=void 0),!!n}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],a=i.completion;if("root"===i.tryLoc)return n("end");if(i.tryLoc<=this.prev){var c=e.call(i,"catchLoc"),u=e.call(i,"finallyLoc");if(c&&u){if(this.prev<i.catchLoc)return n(i.catchLoc,!0);if(this.prev<i.finallyLoc)return n(i.finallyLoc)}else if(c){if(this.prev<i.catchLoc)return n(i.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return n(i.finallyLoc)}}}},abrupt:function(t,r){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&e.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=r&&r<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=r,i?(this.method="next",this.next=i.finallyLoc,f):this.complete(a)},complete:function(t,r){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&r&&(this.next=r),f},finish:function(t){for(var r=this.tryEntries.length-1;r>=0;--r){var e=this.tryEntries[r];if(e.finallyLoc===t)return this.complete(e.completion,e.afterLoc),O(e),f}},catch:function(t){for(var r=this.tryEntries.length-1;r>=0;--r){var e=this.tryEntries[r];if(e.tryLoc===t){var n=e.completion;if("throw"===n.type){var o=n.arg;O(e)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(t,r,e){return this.delegate={iterator:x(t),resultName:r,nextLoc:e},"next"===this.method&&(this.arg=void 0),f}},t}function co(t){return function(t){if(Array.isArray(t))return uo(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||function(t,r){if(!t)return;if("string"==typeof t)return uo(t,r);var e=Object.prototype.toString.call(t).slice(8,-1);"Object"===e&&t.constructor&&(e=t.constructor.name);if("Map"===e||"Set"===e)return Array.from(t);if("Arguments"===e||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(e))return uo(t,r)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function uo(t,r){(null==r||r>t.length)&&(r=t.length);for(var e=0,n=new Array(r);e<r;e++)n[e]=t[e];return n}function lo(t,r,e,n,o,i,a){try{var c=t[i](a),u=c.value}catch(t){return void e(t)}c.done?r(u):Promise.resolve(u).then(n,o)}var fo=function(t){var r=Xn(t);return function(e){return function(n){if(n.type!==u.uD)e(n);else if(n.payload.files&&n.payload.files.length){var o=function(){var e,o=(e=ao().mark((function e(){return ao().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,r(co(n.payload.files),{fromPrinter:n.payload.fromPrinter||!1});case 3:e.next=8;break;case 5:e.prev=5,e.t0=e.catch(0),t.dispatch({type:u.pn,payload:e.t0.message});case 8:case"end":return e.stop()}}),e,null,[[0,5]])})),function(){var t=this,r=arguments;return new Promise((function(n,o){var i=e.apply(t,r);function a(t){lo(i,n,o,a,c,"next",t)}function c(t){lo(i,n,o,a,c,"throw",t)}a(void 0)}))});return function(){return o.apply(this,arguments)}}();o()}}}};e(60285),e(41637);function so(t,r){var e=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);r&&(n=n.filter((function(r){return Object.getOwnPropertyDescriptor(t,r).enumerable}))),e.push.apply(e,n)}return e}function ho(t){for(var r=1;r<arguments.length;r++){var e=null!=arguments[r]?arguments[r]:{};r%2?so(Object(e),!0).forEach((function(r){po(t,r,e[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(e)):so(Object(e)).forEach((function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(e,r))}))}return t}function po(t,r,e){return r in t?Object.defineProperty(t,r,{value:e,enumerable:!0,configurable:!0,writable:!0}):t[r]=e,t}function yo(t){return function(t){if(Array.isArray(t))return vo(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||function(t,r){if(!t)return;if("string"==typeof t)return vo(t,r);var e=Object.prototype.toString.call(t).slice(8,-1);"Object"===e&&t.constructor&&(e=t.constructor.name);if("Map"===e||"Set"===e)return Array.from(t);if("Arguments"===e||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(e))return vo(t,r)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function vo(t,r){(null==r||r>t.length)&&(r=t.length);for(var e=0,n=new Array(r);e<r;e++)n[e]=t[e];return n}var mo=function(t){var r=null,n=null;return window.addEventListener("message",(function(e){var o,i=t.getState().printerUrl;try{o=new URL(i).origin}catch(t){o=new URL(window.location.href).origin}if(e.origin===o){var a=e.data.fromRemotePrinter,c=(a=void 0===a?{}:a).lines,l=a.progress,f=a.blob,s=a.blobsdone,h=a.commands,p=a.printerData,y=e.source;if(h&&(r&&JSON.stringify(h)===JSON.stringify(t.getState().printerFunctions)||t.dispatch({type:u.or,payload:h}),n=y,window.clearTimeout(r),r=window.setTimeout((function(){r=null,n=null,t.dispatch({type:u.od})}),1500)),c){var d;try{d=new File(yo(c.join("\n")),"Text input.txt",{type:"text/plain"})}catch(t){d=new Blob(yo(c.join("\n")),{type:"text/plain"})}t.dispatch({type:u.uD,payload:{files:[d]}})}if(void 0!==l&&t.dispatch({type:u.pQ,payload:l}),f&&t.dispatch({type:u.uD,payload:{files:[f]}}),s){if("string"==typeof s[0])return void window.setTimeout((function(){alert("You should update the web-app to a version > 1.16.0 on your printer for an optimized import experience :-)")}),200);var v=s.filter((function(t){return t.blob&&t.ok})),m=v.map((function(t,r){var e=v.length>1?(r+1).toString(10).padStart(2,"0"):"";return ho(ho({},t),{},{blobName:"Printer ".concat(e).trim()})}));v.length?t.dispatch({type:u.uD,payload:{files:m,fromPrinter:!0}}):t.dispatch({type:u.jH,payload:{message:"No valid files received from WiFi-Printer",confirm:function(){t.dispatch({type:u.Gp}),t.dispatch({type:u.Jx})}}})}p&&t.dispatch({type:u.fX,payload:p})}})),function(r){return function(o){if(o.type===u.ug){var i,a=t.getState(),c="fetchImages"===o.payload?{dumps:null===(i=a.printerData)||void 0===i?void 0:i.dumps}:void 0;e.e(705).then(e.t.bind(e,40705,23)).then((function(){e.e(591).then(e.t.bind(e,99591,23)).then((function(){n.postMessage({toRemotePrinter:{command:o.payload,params:c}},"*")}))}))}r(o)}}},go=e(10577),bo=e.n(go),wo=function(t){return window.addEventListener("resize",(function(){t.dispatch({type:u.rU,payload:{height:window.innerHeight,width:window.innerWidth}})})),bo().isEnabled&&bo().on("change",(function(){t.dispatch({type:u.Yx,payload:!!bo().element})})),document.addEventListener("keydown",(function(r){if(null!==t.getState().lightboxImage)switch(r.key){case"Esc":case"Escape":t.dispatch({type:u.vR,payload:null}),r.preventDefault();break;case"Right":case"ArrowRight":t.dispatch({type:u.BH}),r.preventDefault();break;case"Left":case"ArrowLeft":t.dispatch({type:u.$$}),r.preventDefault()}})),function(r){return function(e){var n=t.getState();switch(e.type){case u.BH:if(null===n.lightboxImage)return;return void t.dispatch({type:u.vR,payload:Math.min(n.lightboxImage+1,n.images.length-1)});case u.$$:if(null===n.lightboxImage)return;return void t.dispatch({type:u.vR,payload:Math.max(n.lightboxImage-1,0)});case u.CQ:bo().isEnabled&&(bo().element?bo().exit():bo().request(document.querySelector("body")));break;case u.vR:bo().isEnabled&&!e.payload&&bo().element&&bo().exit();break;case u.Tq:t.dispatch({type:u.vR,payload:(0,re.Z)(n).findIndex((function(t){return t.hash===e.payload}))})}r(e)}}},Eo=e(44936),Oo=e.n(Eo),So=e(25108),xo=function(t){var r={},e=new(Oo())(1,1/0),n=function(r){t.dispatch({type:u.fc,payload:r%1})},o=function(r){var e=t.getState(),n=e.handleExportFrame,o=e.images.find((function(t){return t.hash===r})),i=(0,Hr.Z)(e,o),a=function(){return(0,Ur.Z)(e)(o)};o.isRGBN=!!o.hashes;return{getMeta:function(){return Promise.resolve(o)},getPalette:function(){return Promise.resolve(i)},getTiles:a,getCanvas:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=t.scaleFactor,e=void 0===r?1:r,c=t.palette,u=void 0===c?i:c,l=t.lockFrame,f=void 0===l?o.lockFrame||!1:l,s=t.invertPalette,h=void 0===s?o.invertPalette||!1:s,p=t.handleExportFrame,y=void 0===p?n:p;return a().then((function(t){var r=o.isRGBN?new Zr.Z:new Yr.Z;o.isRGBN?r.update({tiles:Zr.Z.rgbnTiles(t),palette:u,lockFrame:f}):r.update({tiles:t,palette:u.palette,lockFrame:f,invertPalette:h});var n=r.getScaledCanvas(e,y),i=document.createElement("canvas");return(0,$r.Z)(n,i,o.rotation),i}))}}},i=function(i){var a=t.getState().plugins.find((function(t){var r=t.url;return i.url===r}))||{},c=a.config,l=void 0===c?{}:c,f=i.url;return e.add((function(){return new Promise((function(e){window.gbpwRegisterPlugin=function(i){window.gbpwRegisterPlugin=function(){};try{var a=new i({saveAs:Cr.saveAs,progress:n,store:t,collectImageData:o},l),c=a.name,s=a.description,h=void 0===s?"":s,p=a.configParams,y=void 0===p?{}:p,d=a.config,v=void 0===d?{}:d;r[f]=a,t.dispatch({type:u.rc,payload:{url:f,name:c,description:h,configParams:y,config:v,loading:!1,error:!1}}),e(!0)}catch(r){t.dispatch({type:u.rc,payload:{url:f,loading:!1,error:r.message}}),e(!1)}};var i=document.createElement("script");document.head.appendChild(i),i.addEventListener("error",(function(){window.gbpwRegisterPlugin=function(){},t.dispatch({type:u.rc,payload:{url:f,loading:!1,error:"Loading error"}}),e(!1)})),i.src=f}))}))};return window.requestAnimationFrame((function(){var r=t.getState().plugins;Promise.all(r.map(i)).then((function(t){So.log("".concat(t.filter(Boolean).length," plugins initialized"))})).catch((function(t){So.error(t)}))})),function(e){return function(n){switch(n.type){case u.Ib:var a=n.payload,c=a.url,l=a.hash;r[c].withImage(o(l));break;case u.ui:var f=n.payload.url,s=t.getState().imageSelection;r[f].withSelection(s.map(o));break;case u.PA:var h=n.payload,p=h.url,y=h.config;r[p].setConfig(y);break;case u.gk:i({url:n.payload});break;case u.gH:delete r[n.payload]}e(n)}}};function Lo(t,r){var e=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);r&&(n=n.filter((function(r){return Object.getOwnPropertyDescriptor(t,r).enumerable}))),e.push.apply(e,n)}return e}function Ao(t){for(var r=1;r<arguments.length;r++){var e=null!=arguments[r]?arguments[r]:{};r%2?Lo(Object(e),!0).forEach((function(r){jo(t,r,e[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(e)):Lo(Object(e)).forEach((function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(e,r))}))}return t}function jo(t,r,e){return r in t?Object.defineProperty(t,r,{value:e,enumerable:!0,configurable:!0,writable:!0}):t[r]=e,t}var Fo=function(t){return["#",Math.ceil(Math.random()*t).toString(16).padStart(2,"0"),Math.ceil(Math.random()*t).toString(16).padStart(2,"0"),Math.ceil(Math.random()*t).toString(16).padStart(2,"0")].join("")},_o=function(t,r,e,n){var o=e===G.VP?{name:"",shortName:G.VP,palette:[Fo(255),Fo(170),Fo(102),Fo(34)],origin:"Selfmade"}:r.find((function(t){return t.shortName===e}));t({type:u.iF,payload:Ao(Ao({},o),{},{name:n?"Copy of ".concat(o.name):o.name,shortName:n?G.VP:e})})},Po=function(t){return document.addEventListener("keydown",(function(r){if("Enter"===r.key&&r.ctrlKey&&t.getState().editPalette.hash){var e=t.getState();t.dispatch({type:u.GY}),e.editPalette&&r.preventDefault()}})),function(r){return function(e){switch(e.type){case u.GY:return n=t.dispatch,o=t.getState(),void n({type:u.$e,payload:Ao(Ao({},o.editPalette),{},{tags:(0,ee.Z)(o.editPalette.tags)})});case u.Tc:return void _o(t.dispatch,t.getState().palettes,e.payload,!1);case u.y3:return void _o(t.dispatch,t.getState().palettes,e.payload,!0)}var n,o;r(e)}}};function To(t,r){var e=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);r&&(n=n.filter((function(r){return Object.getOwnPropertyDescriptor(t,r).enumerable}))),e.push.apply(e,n)}return e}function Io(t){for(var r=1;r<arguments.length;r++){var e=null!=arguments[r]?arguments[r]:{};r%2?To(Object(e),!0).forEach((function(r){Do(t,r,e[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(e)):To(Object(e)).forEach((function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(e,r))}))}return t}function Do(t,r,e){return r in t?Object.defineProperty(t,r,{value:e,enumerable:!0,configurable:!0,writable:!0}):t[r]=e,t}var ko=function(t){return function(r){return function(n){if(n.type===u.Fy){var o=t.getState();e.e(705).then(e.t.bind(e,40705,23)).then((function(r){var e=r.default,n={palette:In.q1,hashes:Io({},o.rgbnImages),hash:e(o.rgbnImages),created:Ct()().format(In.vc),title:"",tags:[]};t.dispatch({type:u.Dt,payload:[n]})}))}r(n)}}},No=(e(4723),e(98642)),Go=e(28443),Ro=e.n(Go),Co=e(24022),Mo=e(59833);function Bo(t){return Bo="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Bo(t)}function Uo(){Uo=function(){return t};var t={},r=Object.prototype,e=r.hasOwnProperty,n="function"==typeof Symbol?Symbol:{},o=n.iterator||"@@iterator",i=n.asyncIterator||"@@asyncIterator",a=n.toStringTag||"@@toStringTag";function c(t,r,e){return Object.defineProperty(t,r,{value:e,enumerable:!0,configurable:!0,writable:!0}),t[r]}try{c({},"")}catch(t){c=function(t,r,e){return t[r]=e}}function u(t,r,e,n){var o=r&&r.prototype instanceof s?r:s,i=Object.create(o.prototype),a=new S(n||[]);return i._invoke=function(t,r,e){var n="suspendedStart";return function(o,i){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===o)throw i;return L()}for(e.method=o,e.arg=i;;){var a=e.delegate;if(a){var c=w(a,e);if(c){if(c===f)continue;return c}}if("next"===e.method)e.sent=e._sent=e.arg;else if("throw"===e.method){if("suspendedStart"===n)throw n="completed",e.arg;e.dispatchException(e.arg)}else"return"===e.method&&e.abrupt("return",e.arg);n="executing";var u=l(t,r,e);if("normal"===u.type){if(n=e.done?"completed":"suspendedYield",u.arg===f)continue;return{value:u.arg,done:e.done}}"throw"===u.type&&(n="completed",e.method="throw",e.arg=u.arg)}}}(t,e,a),i}function l(t,r,e){try{return{type:"normal",arg:t.call(r,e)}}catch(t){return{type:"throw",arg:t}}}t.wrap=u;var f={};function s(){}function h(){}function p(){}var y={};c(y,o,(function(){return this}));var d=Object.getPrototypeOf,v=d&&d(d(x([])));v&&v!==r&&e.call(v,o)&&(y=v);var m=p.prototype=s.prototype=Object.create(y);function g(t){["next","throw","return"].forEach((function(r){c(t,r,(function(t){return this._invoke(r,t)}))}))}function b(t,r){function n(o,i,a,c){var u=l(t[o],t,i);if("throw"!==u.type){var f=u.arg,s=f.value;return s&&"object"==Bo(s)&&e.call(s,"__await")?r.resolve(s.__await).then((function(t){n("next",t,a,c)}),(function(t){n("throw",t,a,c)})):r.resolve(s).then((function(t){f.value=t,a(f)}),(function(t){return n("throw",t,a,c)}))}c(u.arg)}var o;this._invoke=function(t,e){function i(){return new r((function(r,o){n(t,e,r,o)}))}return o=o?o.then(i,i):i()}}function w(t,r){var e=t.iterator[r.method];if(void 0===e){if(r.delegate=null,"throw"===r.method){if(t.iterator.return&&(r.method="return",r.arg=void 0,w(t,r),"throw"===r.method))return f;r.method="throw",r.arg=new TypeError("The iterator does not provide a 'throw' method")}return f}var n=l(e,t.iterator,r.arg);if("throw"===n.type)return r.method="throw",r.arg=n.arg,r.delegate=null,f;var o=n.arg;return o?o.done?(r[t.resultName]=o.value,r.next=t.nextLoc,"return"!==r.method&&(r.method="next",r.arg=void 0),r.delegate=null,f):o:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,f)}function E(t){var r={tryLoc:t[0]};1 in t&&(r.catchLoc=t[1]),2 in t&&(r.finallyLoc=t[2],r.afterLoc=t[3]),this.tryEntries.push(r)}function O(t){var r=t.completion||{};r.type="normal",delete r.arg,t.completion=r}function S(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(E,this),this.reset(!0)}function x(t){if(t){var r=t[o];if(r)return r.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var n=-1,i=function r(){for(;++n<t.length;)if(e.call(t,n))return r.value=t[n],r.done=!1,r;return r.value=void 0,r.done=!0,r};return i.next=i}}return{next:L}}function L(){return{value:void 0,done:!0}}return h.prototype=p,c(m,"constructor",p),c(p,"constructor",h),h.displayName=c(p,a,"GeneratorFunction"),t.isGeneratorFunction=function(t){var r="function"==typeof t&&t.constructor;return!!r&&(r===h||"GeneratorFunction"===(r.displayName||r.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,p):(t.__proto__=p,c(t,a,"GeneratorFunction")),t.prototype=Object.create(m),t},t.awrap=function(t){return{__await:t}},g(b.prototype),c(b.prototype,i,(function(){return this})),t.AsyncIterator=b,t.async=function(r,e,n,o,i){void 0===i&&(i=Promise);var a=new b(u(r,e,n,o),i);return t.isGeneratorFunction(e)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},g(m),c(m,a,"Generator"),c(m,o,(function(){return this})),c(m,"toString",(function(){return"[object Generator]"})),t.keys=function(t){var r=[];for(var e in t)r.push(e);return r.reverse(),function e(){for(;r.length;){var n=r.pop();if(n in t)return e.value=n,e.done=!1,e}return e.done=!0,e}},t.values=x,S.prototype={constructor:S,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(O),!t)for(var r in this)"t"===r.charAt(0)&&e.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var r=this;function n(e,n){return a.type="throw",a.arg=t,r.next=e,n&&(r.method="next",r.arg=void 0),!!n}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],a=i.completion;if("root"===i.tryLoc)return n("end");if(i.tryLoc<=this.prev){var c=e.call(i,"catchLoc"),u=e.call(i,"finallyLoc");if(c&&u){if(this.prev<i.catchLoc)return n(i.catchLoc,!0);if(this.prev<i.finallyLoc)return n(i.finallyLoc)}else if(c){if(this.prev<i.catchLoc)return n(i.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return n(i.finallyLoc)}}}},abrupt:function(t,r){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&e.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=r&&r<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=r,i?(this.method="next",this.next=i.finallyLoc,f):this.complete(a)},complete:function(t,r){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&r&&(this.next=r),f},finish:function(t){for(var r=this.tryEntries.length-1;r>=0;--r){var e=this.tryEntries[r];if(e.finallyLoc===t)return this.complete(e.completion,e.afterLoc),O(e),f}},catch:function(t){for(var r=this.tryEntries.length-1;r>=0;--r){var e=this.tryEntries[r];if(e.tryLoc===t){var n=e.completion;if("throw"===n.type){var o=n.arg;O(e)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(t,r,e){return this.delegate={iterator:x(t),resultName:r,nextLoc:e},"next"===this.method&&(this.arg=void 0),f}},t}function Ho(t,r){var e=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);r&&(n=n.filter((function(r){return Object.getOwnPropertyDescriptor(t,r).enumerable}))),e.push.apply(e,n)}return e}function Zo(t){for(var r=1;r<arguments.length;r++){var e=null!=arguments[r]?arguments[r]:{};r%2?Ho(Object(e),!0).forEach((function(r){Yo(t,r,e[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(e)):Ho(Object(e)).forEach((function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(e,r))}))}return t}function Yo(t,r,e){return r in t?Object.defineProperty(t,r,{value:e,enumerable:!0,configurable:!0,writable:!0}):t[r]=e,t}function Vo(t,r,e,n,o,i,a){try{var c=t[i](a),u=c.value}catch(t){return void e(t)}c.done?r(u):Promise.resolve(u).then(n,o)}var $o=function(){var t,r=(t=Uo().mark((function t(r){return Uo().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(Boolean(r.find((function(t){return!t.hash})))){t.next=3;break}return t.abrupt("return",r);case 3:return t.abrupt("return",e.e(705).then(e.t.bind(e,40705,23)).then((function(t){var e=t.default;return Promise.all(r.map((function(t){return t.hash?t:Mo.$0.getItem(t.id).then((function(r){var n=e(r);return Mo.$0.removeItem(t.id).then((function(){return Mo.$0.setItem(n,r)})).then((function(){return Zo(Zo({},t),{},{hash:n})}))}))})))})));case 4:case"end":return t.stop()}}),t)})),function(){var r=this,e=arguments;return new Promise((function(n,o){var i=t.apply(r,e);function a(t){Vo(i,n,o,a,c,"next",t)}function c(t){Vo(i,n,o,a,c,"throw",t)}a(void 0)}))});return function(t){return r.apply(this,arguments)}}(),Jo=$o,zo=e(25108);function Wo(t){return Wo="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Wo(t)}function Xo(){Xo=function(){return t};var t={},r=Object.prototype,e=r.hasOwnProperty,n="function"==typeof Symbol?Symbol:{},o=n.iterator||"@@iterator",i=n.asyncIterator||"@@asyncIterator",a=n.toStringTag||"@@toStringTag";function c(t,r,e){return Object.defineProperty(t,r,{value:e,enumerable:!0,configurable:!0,writable:!0}),t[r]}try{c({},"")}catch(t){c=function(t,r,e){return t[r]=e}}function u(t,r,e,n){var o=r&&r.prototype instanceof s?r:s,i=Object.create(o.prototype),a=new S(n||[]);return i._invoke=function(t,r,e){var n="suspendedStart";return function(o,i){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===o)throw i;return L()}for(e.method=o,e.arg=i;;){var a=e.delegate;if(a){var c=w(a,e);if(c){if(c===f)continue;return c}}if("next"===e.method)e.sent=e._sent=e.arg;else if("throw"===e.method){if("suspendedStart"===n)throw n="completed",e.arg;e.dispatchException(e.arg)}else"return"===e.method&&e.abrupt("return",e.arg);n="executing";var u=l(t,r,e);if("normal"===u.type){if(n=e.done?"completed":"suspendedYield",u.arg===f)continue;return{value:u.arg,done:e.done}}"throw"===u.type&&(n="completed",e.method="throw",e.arg=u.arg)}}}(t,e,a),i}function l(t,r,e){try{return{type:"normal",arg:t.call(r,e)}}catch(t){return{type:"throw",arg:t}}}t.wrap=u;var f={};function s(){}function h(){}function p(){}var y={};c(y,o,(function(){return this}));var d=Object.getPrototypeOf,v=d&&d(d(x([])));v&&v!==r&&e.call(v,o)&&(y=v);var m=p.prototype=s.prototype=Object.create(y);function g(t){["next","throw","return"].forEach((function(r){c(t,r,(function(t){return this._invoke(r,t)}))}))}function b(t,r){function n(o,i,a,c){var u=l(t[o],t,i);if("throw"!==u.type){var f=u.arg,s=f.value;return s&&"object"==Wo(s)&&e.call(s,"__await")?r.resolve(s.__await).then((function(t){n("next",t,a,c)}),(function(t){n("throw",t,a,c)})):r.resolve(s).then((function(t){f.value=t,a(f)}),(function(t){return n("throw",t,a,c)}))}c(u.arg)}var o;this._invoke=function(t,e){function i(){return new r((function(r,o){n(t,e,r,o)}))}return o=o?o.then(i,i):i()}}function w(t,r){var e=t.iterator[r.method];if(void 0===e){if(r.delegate=null,"throw"===r.method){if(t.iterator.return&&(r.method="return",r.arg=void 0,w(t,r),"throw"===r.method))return f;r.method="throw",r.arg=new TypeError("The iterator does not provide a 'throw' method")}return f}var n=l(e,t.iterator,r.arg);if("throw"===n.type)return r.method="throw",r.arg=n.arg,r.delegate=null,f;var o=n.arg;return o?o.done?(r[t.resultName]=o.value,r.next=t.nextLoc,"return"!==r.method&&(r.method="next",r.arg=void 0),r.delegate=null,f):o:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,f)}function E(t){var r={tryLoc:t[0]};1 in t&&(r.catchLoc=t[1]),2 in t&&(r.finallyLoc=t[2],r.afterLoc=t[3]),this.tryEntries.push(r)}function O(t){var r=t.completion||{};r.type="normal",delete r.arg,t.completion=r}function S(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(E,this),this.reset(!0)}function x(t){if(t){var r=t[o];if(r)return r.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var n=-1,i=function r(){for(;++n<t.length;)if(e.call(t,n))return r.value=t[n],r.done=!1,r;return r.value=void 0,r.done=!0,r};return i.next=i}}return{next:L}}function L(){return{value:void 0,done:!0}}return h.prototype=p,c(m,"constructor",p),c(p,"constructor",h),h.displayName=c(p,a,"GeneratorFunction"),t.isGeneratorFunction=function(t){var r="function"==typeof t&&t.constructor;return!!r&&(r===h||"GeneratorFunction"===(r.displayName||r.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,p):(t.__proto__=p,c(t,a,"GeneratorFunction")),t.prototype=Object.create(m),t},t.awrap=function(t){return{__await:t}},g(b.prototype),c(b.prototype,i,(function(){return this})),t.AsyncIterator=b,t.async=function(r,e,n,o,i){void 0===i&&(i=Promise);var a=new b(u(r,e,n,o),i);return t.isGeneratorFunction(e)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},g(m),c(m,a,"Generator"),c(m,o,(function(){return this})),c(m,"toString",(function(){return"[object Generator]"})),t.keys=function(t){var r=[];for(var e in t)r.push(e);return r.reverse(),function e(){for(;r.length;){var n=r.pop();if(n in t)return e.value=n,e.done=!1,e}return e.done=!0,e}},t.values=x,S.prototype={constructor:S,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(O),!t)for(var r in this)"t"===r.charAt(0)&&e.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var r=this;function n(e,n){return a.type="throw",a.arg=t,r.next=e,n&&(r.method="next",r.arg=void 0),!!n}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],a=i.completion;if("root"===i.tryLoc)return n("end");if(i.tryLoc<=this.prev){var c=e.call(i,"catchLoc"),u=e.call(i,"finallyLoc");if(c&&u){if(this.prev<i.catchLoc)return n(i.catchLoc,!0);if(this.prev<i.finallyLoc)return n(i.finallyLoc)}else if(c){if(this.prev<i.catchLoc)return n(i.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return n(i.finallyLoc)}}}},abrupt:function(t,r){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&e.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=r&&r<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=r,i?(this.method="next",this.next=i.finallyLoc,f):this.complete(a)},complete:function(t,r){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&r&&(this.next=r),f},finish:function(t){for(var r=this.tryEntries.length-1;r>=0;--r){var e=this.tryEntries[r];if(e.finallyLoc===t)return this.complete(e.completion,e.afterLoc),O(e),f}},catch:function(t){for(var r=this.tryEntries.length-1;r>=0;--r){var e=this.tryEntries[r];if(e.tryLoc===t){var n=e.completion;if("throw"===n.type){var o=n.arg;O(e)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(t,r,e){return this.delegate={iterator:x(t),resultName:r,nextLoc:e},"next"===this.method&&(this.arg=void 0),f}},t}function qo(t,r){var e=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);r&&(n=n.filter((function(r){return Object.getOwnPropertyDescriptor(t,r).enumerable}))),e.push.apply(e,n)}return e}function Ko(t){for(var r=1;r<arguments.length;r++){var e=null!=arguments[r]?arguments[r]:{};r%2?qo(Object(e),!0).forEach((function(r){Qo(t,r,e[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(e)):qo(Object(e)).forEach((function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(e,r))}))}return t}function Qo(t,r,e){return r in t?Object.defineProperty(t,r,{value:e,enumerable:!0,configurable:!0,writable:!0}):t[r]=e,t}function ti(t,r,e,n,o,i,a){try{var c=t[i](a),u=c.value}catch(t){return void e(t)}c.done?r(u):Promise.resolve(u).then(n,o)}function ri(t){return function(){var r=this,e=arguments;return new Promise((function(n,o){var i=t.apply(r,e);function a(t){ti(i,n,o,a,c,"next",t)}function c(t){ti(i,n,o,a,c,"throw",t)}a(void 0)}))}}var ei=function(){var t=ri(Xo().mark((function t(r){var e;return Xo().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(localStorage.getItem("gbp-backup-frames")){t.next=6;break}return t.next=3,Promise.all(r.map(function(){var t=ri(Xo().mark((function t(r){return Xo().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=Ko,t.t1=Ko({},r),t.t2={},t.next=5,Mo.$0.getItem(r.id);case 5:return t.t3=t.sent,t.t4={data:t.t3},t.abrupt("return",(0,t.t0)(t.t1,t.t2,t.t4));case 8:case"end":return t.stop()}}),t)})));return function(r){return t.apply(this,arguments)}}()));case 3:e=t.sent,localStorage.setItem("gbp-backup-frames",JSON.stringify(e)),zo.log("Frame backup created",JSON.parse(localStorage.getItem("gbp-backup-frames")));case 6:case"end":return t.stop()}}),t)})));return function(r){return t.apply(this,arguments)}}(),ni=ei;function oi(t){return oi="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},oi(t)}function ii(){ii=function(){return t};var t={},r=Object.prototype,e=r.hasOwnProperty,n="function"==typeof Symbol?Symbol:{},o=n.iterator||"@@iterator",i=n.asyncIterator||"@@asyncIterator",a=n.toStringTag||"@@toStringTag";function c(t,r,e){return Object.defineProperty(t,r,{value:e,enumerable:!0,configurable:!0,writable:!0}),t[r]}try{c({},"")}catch(t){c=function(t,r,e){return t[r]=e}}function u(t,r,e,n){var o=r&&r.prototype instanceof s?r:s,i=Object.create(o.prototype),a=new S(n||[]);return i._invoke=function(t,r,e){var n="suspendedStart";return function(o,i){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===o)throw i;return L()}for(e.method=o,e.arg=i;;){var a=e.delegate;if(a){var c=w(a,e);if(c){if(c===f)continue;return c}}if("next"===e.method)e.sent=e._sent=e.arg;else if("throw"===e.method){if("suspendedStart"===n)throw n="completed",e.arg;e.dispatchException(e.arg)}else"return"===e.method&&e.abrupt("return",e.arg);n="executing";var u=l(t,r,e);if("normal"===u.type){if(n=e.done?"completed":"suspendedYield",u.arg===f)continue;return{value:u.arg,done:e.done}}"throw"===u.type&&(n="completed",e.method="throw",e.arg=u.arg)}}}(t,e,a),i}function l(t,r,e){try{return{type:"normal",arg:t.call(r,e)}}catch(t){return{type:"throw",arg:t}}}t.wrap=u;var f={};function s(){}function h(){}function p(){}var y={};c(y,o,(function(){return this}));var d=Object.getPrototypeOf,v=d&&d(d(x([])));v&&v!==r&&e.call(v,o)&&(y=v);var m=p.prototype=s.prototype=Object.create(y);function g(t){["next","throw","return"].forEach((function(r){c(t,r,(function(t){return this._invoke(r,t)}))}))}function b(t,r){function n(o,i,a,c){var u=l(t[o],t,i);if("throw"!==u.type){var f=u.arg,s=f.value;return s&&"object"==oi(s)&&e.call(s,"__await")?r.resolve(s.__await).then((function(t){n("next",t,a,c)}),(function(t){n("throw",t,a,c)})):r.resolve(s).then((function(t){f.value=t,a(f)}),(function(t){return n("throw",t,a,c)}))}c(u.arg)}var o;this._invoke=function(t,e){function i(){return new r((function(r,o){n(t,e,r,o)}))}return o=o?o.then(i,i):i()}}function w(t,r){var e=t.iterator[r.method];if(void 0===e){if(r.delegate=null,"throw"===r.method){if(t.iterator.return&&(r.method="return",r.arg=void 0,w(t,r),"throw"===r.method))return f;r.method="throw",r.arg=new TypeError("The iterator does not provide a 'throw' method")}return f}var n=l(e,t.iterator,r.arg);if("throw"===n.type)return r.method="throw",r.arg=n.arg,r.delegate=null,f;var o=n.arg;return o?o.done?(r[t.resultName]=o.value,r.next=t.nextLoc,"return"!==r.method&&(r.method="next",r.arg=void 0),r.delegate=null,f):o:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,f)}function E(t){var r={tryLoc:t[0]};1 in t&&(r.catchLoc=t[1]),2 in t&&(r.finallyLoc=t[2],r.afterLoc=t[3]),this.tryEntries.push(r)}function O(t){var r=t.completion||{};r.type="normal",delete r.arg,t.completion=r}function S(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(E,this),this.reset(!0)}function x(t){if(t){var r=t[o];if(r)return r.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var n=-1,i=function r(){for(;++n<t.length;)if(e.call(t,n))return r.value=t[n],r.done=!1,r;return r.value=void 0,r.done=!0,r};return i.next=i}}return{next:L}}function L(){return{value:void 0,done:!0}}return h.prototype=p,c(m,"constructor",p),c(p,"constructor",h),h.displayName=c(p,a,"GeneratorFunction"),t.isGeneratorFunction=function(t){var r="function"==typeof t&&t.constructor;return!!r&&(r===h||"GeneratorFunction"===(r.displayName||r.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,p):(t.__proto__=p,c(t,a,"GeneratorFunction")),t.prototype=Object.create(m),t},t.awrap=function(t){return{__await:t}},g(b.prototype),c(b.prototype,i,(function(){return this})),t.AsyncIterator=b,t.async=function(r,e,n,o,i){void 0===i&&(i=Promise);var a=new b(u(r,e,n,o),i);return t.isGeneratorFunction(e)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},g(m),c(m,a,"Generator"),c(m,o,(function(){return this})),c(m,"toString",(function(){return"[object Generator]"})),t.keys=function(t){var r=[];for(var e in t)r.push(e);return r.reverse(),function e(){for(;r.length;){var n=r.pop();if(n in t)return e.value=n,e.done=!1,e}return e.done=!0,e}},t.values=x,S.prototype={constructor:S,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(O),!t)for(var r in this)"t"===r.charAt(0)&&e.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var r=this;function n(e,n){return a.type="throw",a.arg=t,r.next=e,n&&(r.method="next",r.arg=void 0),!!n}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],a=i.completion;if("root"===i.tryLoc)return n("end");if(i.tryLoc<=this.prev){var c=e.call(i,"catchLoc"),u=e.call(i,"finallyLoc");if(c&&u){if(this.prev<i.catchLoc)return n(i.catchLoc,!0);if(this.prev<i.finallyLoc)return n(i.finallyLoc)}else if(c){if(this.prev<i.catchLoc)return n(i.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return n(i.finallyLoc)}}}},abrupt:function(t,r){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&e.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=r&&r<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=r,i?(this.method="next",this.next=i.finallyLoc,f):this.complete(a)},complete:function(t,r){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&r&&(this.next=r),f},finish:function(t){for(var r=this.tryEntries.length-1;r>=0;--r){var e=this.tryEntries[r];if(e.finallyLoc===t)return this.complete(e.completion,e.afterLoc),O(e),f}},catch:function(t){for(var r=this.tryEntries.length-1;r>=0;--r){var e=this.tryEntries[r];if(e.tryLoc===t){var n=e.completion;if("throw"===n.type){var o=n.arg;O(e)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(t,r,e){return this.delegate={iterator:x(t),resultName:r,nextLoc:e},"next"===this.method&&(this.arg=void 0),f}},t}function ai(t,r){var e=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);r&&(n=n.filter((function(r){return Object.getOwnPropertyDescriptor(t,r).enumerable}))),e.push.apply(e,n)}return e}function ci(t){for(var r=1;r<arguments.length;r++){var e=null!=arguments[r]?arguments[r]:{};r%2?ai(Object(e),!0).forEach((function(r){ui(t,r,e[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(e)):ai(Object(e)).forEach((function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(e,r))}))}return t}function ui(t,r,e){return r in t?Object.defineProperty(t,r,{value:e,enumerable:!0,configurable:!0,writable:!0}):t[r]=e,t}function li(t){return function(t){if(Array.isArray(t))return fi(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||function(t,r){if(!t)return;if("string"==typeof t)return fi(t,r);var e=Object.prototype.toString.call(t).slice(8,-1);"Object"===e&&t.constructor&&(e=t.constructor.name);if("Map"===e||"Set"===e)return Array.from(t);if("Arguments"===e||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(e))return fi(t,r)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function fi(t,r){(null==r||r>t.length)&&(r=t.length);for(var e=0,n=new Array(r);e<r;e++)n[e]=t[e];return n}function si(t,r,e,n,o,i,a){try{var c=t[i](a),u=c.value}catch(t){return void e(t)}c.done?r(u):Promise.resolve(u).then(n,o)}var hi=function(){var t,r=(t=ii().mark((function t(r){var e,n,o,i,a,c,u,l,f,s,h,p,y,d,v;return ii().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return o=(0,U.Z)("shortName")([].concat(li(Ro().map((function(t){return ci(ci({},t),{},{isPredefined:!0})}))),li(r.palettes))),i=o.map((function(t){return t.shortName})),a=r.frames.map((function(t){return t.id})),c=(0,Vt.Z)(r.printerUrl,"http"),u=r.framesMessage,l=i.includes(r.activePalette)?r.activePalette:"bw",f=r.images.map((function(t){return ci(ci({},t),{},{created:Ct()(t.created).format(In.vc)})})).map((function(t){return ci(ci({},t),{},{tags:t.tags||[]})})).map((function(t){return t.hashes?t.palette?t.palette.blend?t:ci(ci({},t),{},{palette:ci(ci({},t.palette),{},{blend:Co._I.MULTIPLY})}):ci(ci({},t),{},{palette:In.q1}):t.palette?i.includes(t.palette)?t:ci(ci({},t),{},{palette:i[0]||"bw"}):null})).filter(Boolean),s=f.map((function(t){return t.hash})),f.forEach((function(t){!t.frame||a.includes(t.frame)||u||(u=1)})),h=Ct()().subtract(6,"hour").unix(),p=r.recentImports.filter((function(t){var r=t.hash,e=t.timestamp;return s.includes(r)&&e>h})),y=r.plugins.map((function(t){return ci(ci({},t),{},{loading:!0,error:void 0})})),d=ci(ci({},r.syncLastUpdate),{},{dropbox:(null===(e=r.syncLastUpdate)||void 0===e?void 0:e.dropbox)||0,local:(null===(n=r.syncLastUpdate)||void 0===n?void 0:n.local)||0}),t.next=15,ni(r.frames);case 15:return t.next=17,Jo(r.frames);case 17:return v=t.sent,t.abrupt("return",ci(ci({},r),{},{frames:v||r.frames,syncLastUpdate:d,images:f,palettes:o,plugins:y,printerUrl:c,framesMessage:u,activePalette:l,recentImports:p}));case 19:case"end":return t.stop()}}),t)})),function(){var r=this,e=arguments;return new Promise((function(n,o){var i=t.apply(r,e);function a(t){si(i,n,o,a,c,"next",t)}function c(t){si(i,n,o,a,c,"throw",t)}a(void 0)}))});return function(t){return r.apply(this,arguments)}}(),pi=hi,yi=e(39324);function di(t){return function(t){if(Array.isArray(t))return vi(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||function(t,r){if(!t)return;if("string"==typeof t)return vi(t,r);var e=Object.prototype.toString.call(t).slice(8,-1);"Object"===e&&t.constructor&&(e=t.constructor.name);if("Map"===e||"Set"===e)return Array.from(t);if("Arguments"===e||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(e))return vi(t,r)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function vi(t,r){(null==r||r>t.length)&&(r=t.length);for(var e=0,n=new Array(r);e<r;e++)n[e]=t[e];return n}function mi(t,r){var e=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);r&&(n=n.filter((function(r){return Object.getOwnPropertyDescriptor(t,r).enumerable}))),e.push.apply(e,n)}return e}function gi(t){for(var r=1;r<arguments.length;r++){var e=null!=arguments[r]?arguments[r]:{};r%2?mi(Object(e),!0).forEach((function(r){bi(t,r,e[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(e)):mi(Object(e)).forEach((function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(e,r))}))}return t}function bi(t,r,e){return r in t?Object.defineProperty(t,r,{value:e,enumerable:!0,configurable:!0,writable:!0}):t[r]=e,t}var wi=function(t){var r=(0,U.Z)(t);return function(e,n){var o=n.map((function(r){var n=e.find((function(e){return e[t]===r[t]}));return n?gi(gi({},n),r):r}));return r([].concat(di(o),di(e)))}},Ei=wi("hash"),Oi=wi("id"),Si=wi("shortName"),xi=function(t,r,e){var n=t.frames,o=t.images,i=t.palettes;return e?(r.frames&&r.frames.length&&(n=Oi(n,r.frames)),r.images&&r.images.length&&(o=Ei(o,r.images)),r.palettes&&r.palettes.length&&(i=Si(i,r.palettes))):(n=r.frames||t.frames,o=r.images||t.images,i=r.palettes||t.palettes),gi(gi(gi({},t),r),{},{images:o,frames:n,palettes:i})},Li=function(t,r,e){var n=arguments.length>3&&void 0!==arguments[3]&&arguments[3];Object.keys(e).forEach((function(t){"state"!==t&&(t.match(/^[a-f0-9]{40}$/gi)?Mo.Rt.setItem("".concat(t),e[t]):t.startsWith("frame-")&&Mo.$0.setItem("".concat(t.split("frame-").pop()),e[t]))})),pi(xi(r,e.state||{},n)).then((function(r){t({type:u.D5,payload:r})}))},Ai=function(t){var r=(0,yi.Z)(t);return function(e){return function(n){switch(n.type){case u.sO:!function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";r(t,{selectedFrameGroup:e}).then((function(r){var n="frames"===t?"frames":[t,e].filter(Boolean).join("_");(0,No.L)(null)([{blob:new Blob(new Array(r)),filename:"".concat(n,".json")}])}))}(n.payload,n.selectedFrameGroup);break;case u.uH:Li(t.dispatch,t.getState(),n.payload,!0);break;case u.Gf:case u.yK:Li(t.dispatch,t.getState(),n.payload,!1)}e(n)}}};function ji(t,r){var e=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);r&&(n=n.filter((function(r){return Object.getOwnPropertyDescriptor(t,r).enumerable}))),e.push.apply(e,n)}return e}function Fi(t){for(var r=1;r<arguments.length;r++){var e=null!=arguments[r]?arguments[r]:{};r%2?ji(Object(e),!0).forEach((function(r){_i(t,r,e[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(e)):ji(Object(e)).forEach((function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(e,r))}))}return t}function _i(t,r,e){return r in t?Object.defineProperty(t,r,{value:e,enumerable:!0,configurable:!0,writable:!0}):t[r]=e,t}function Pi(t){return function(t){if(Array.isArray(t))return Ti(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||function(t,r){if(!t)return;if("string"==typeof t)return Ti(t,r);var e=Object.prototype.toString.call(t).slice(8,-1);"Object"===e&&t.constructor&&(e=t.constructor.name);if("Map"===e||"Set"===e)return Array.from(t);if("Arguments"===e||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(e))return Ti(t,r)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Ti(t,r){(null==r||r>t.length)&&(r=t.length);for(var e=0,n=new Array(r);e<r;e++)n[e]=t[e];return n}var Ii=function(t){return function(r){return function(e){if(e.type===u.pr){var n=t.getState(),o=n.images.find((function(t){return t.hash===e.payload})),i=(0,Hr.Z)(n,o),a=Pi(n.exportScaleFactors).pop()||4,c=Pi(n.exportFileTypes).pop()||"png",l=(0,No.j)(Fi(Fi({},n),{},{exportScaleFactors:[a],exportFileTypes:[c]}));(0,Ur.Z)(n)(o).then(l(i,o)).then((function(t){var r=t[0],e=r.blob,n=r.filename,o=r.title;window.navigator.share&&window.navigator.share({files:[new File([e],n,{type:"image/png",lastModified:new Date})],title:o}).catch((function(){return"\\_()_/"}))}))}r(e)}}},Di=e(33761),ki=function(t){return function(r){return function(e){if(e.type===u.hi||e.type===u.Zo){var n=t.getState(),o=(0,No.j)(n);switch(e.type){case u.hi:!function(t,r){return function(e){var n=r.images.find((function(t){return t.hash===e})),o=(0,Hr.Z)(r,n),i=(0,Vr.Z)({image:n,palette:o});return(0,Ur.Z)(r)(n).then(t(o,n)).then((0,Di.Z)(i))}}(o,n)(e.payload);break;case u.Zo:!function(t,r){return function(e){var n=(0,Vr.Z)({altTitle:"gameboy-printer-gallery",useCurrentDate:!0});Promise.all(e.map((function(e){var n=r.images.find((function(t){return t.hash===e})),o=(0,Hr.Z)(r,n);return(0,Ur.Z)(r)(n).then(t(o,n))}))).then((function(t){return t.flat()})).then((0,Di.Z)(n))}}(o,n)(e.payload)}}return r(e)}}},Ni=(0,a.md)(te,fe,ve,Ee,Oe,oo,eo,no,fo,mo,wo,xo,Po,ko,Ai,Ii,ki),Gi=window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__||a.qC,Ri=[Ni,(0,a.md)(kr)],Ci=function(t){var r=(0,a.MT)(Ir,t,Gi.apply(void 0,Ri));return window.store=r,r},Mi=e(97377),Bi=function(){var t=document.getElementById("app");if(t){var r;try{r=JSON.parse(localStorage.getItem("gbp-web-state"))||{}}catch(t){r={}}"esp8266"===(0,Mi.d)().env&&(r.printerUrl="/");var a=Object.assign(Dr.c,r);Promise.all([e.e(164),e.e(143)]).then(e.bind(e,22185)).then((function(r){var e=r.default;pi(a).then((function(r){localStorage.setItem("gbp-web-state",JSON.stringify(r));try{var a=Ci(r);(0,i.render)(n.createElement(o.zt,{store:a},n.createElement(e,null)),t)}catch(t){document.getElementById("app").innerHTML='<p class="init-error">Error while initializing the app:<br>'.concat(t.message,"<br><small>").concat(t.stack,"</small></p>")}}))}))}}},13629:function(t,r,e){e.d(r,{$$:function(){return c},$e:function(){return y},A8:function(){return yr},B4:function(){return Yt},BH:function(){return a},BS:function(){return S},CQ:function(){return u},D5:function(){return Qt},DK:function(){return Nt},DS:function(){return J},DU:function(){return pt},Dr:function(){return M},Dt:function(){return H},Dw:function(){return pr},Fw:function(){return P},Fy:function(){return zt},GU:function(){return O},GY:function(){return d},Gf:function(){return ut},Gp:function(){return b},Hn:function(){return tt},Ib:function(){return Tt},Ik:function(){return at},Jf:function(){return w},Jx:function(){return Zt},K0:function(){return f},KD:function(){return fr},Ki:function(){return lt},LC:function(){return ir},LR:function(){return _},Mx:function(){return I},O:function(){return n},OD:function(){return vt},ON:function(){return et},Or:function(){return s},PA:function(){return Pt},Pk:function(){return k},Qs:function(){return D},R4:function(){return C},Rb:function(){return cr},Rv:function(){return Et},S1:function(){return Z},SK:function(){return U},Sd:function(){return Vt},Tc:function(){return v},Tq:function(){return l},UF:function(){return er},Vo:function(){return or},WB:function(){return T},WN:function(){return Rt},XB:function(){return Lt},Xb:function(){return Jt},YE:function(){return Ct},Yx:function(){return o},Zo:function(){return qt},ax:function(){return Kt},b9:function(){return ct},bD:function(){return xt},bM:function(){return ft},cR:function(){return ur},d0:function(){return Gt},d3:function(){return ar},d4:function(){return X},eP:function(){return st},eh:function(){return it},es:function(){return Q},fX:function(){return Ht},fc:function(){return Dt},fd:function(){return St},gH:function(){return jt},gk:function(){return Ft},hT:function(){return W},hi:function(){return Xt},iF:function(){return h},iM:function(){return p},iq:function(){return wt},j6:function(){return bt},jH:function(){return g},jJ:function(){return lr},jN:function(){return E},kr:function(){return x},l3:function(){return sr},m9:function(){return z},mW:function(){return G},md:function(){return Y},nD:function(){return hr},nN:function(){return N},oI:function(){return nt},od:function(){return Bt},or:function(){return Ut},ou:function(){return mt},pQ:function(){return kt},pn:function(){return rr},po:function(){return L},pr:function(){return Wt},qJ:function(){return At},qr:function(){return R},rR:function(){return B},rU:function(){return tr},rc:function(){return _t},sO:function(){return yt},sS:function(){return ht},sV:function(){return q},u7:function(){return V},uD:function(){return nr},uH:function(){return dt},ug:function(){return Mt},ui:function(){return It},uy:function(){return j},v6:function(){return $},vR:function(){return i},wA:function(){return A},wK:function(){return F},wb:function(){return rt},xG:function(){return $t},xo:function(){return K},y0:function(){return Ot},y3:function(){return m},y9:function(){return gt},yK:function(){return ot}});var n="SET_CURRENT_GALLERY_VIEW",o="SET_IS_FULLSCREEN",i="SET_LIGHTBOX_IMAGE_INDEX",a="LIGHTBOX_NEXT",c="LIGHTBOX_PREV",u="LIGHTBOX_FULLSCREEN",l="SET_LIGHTBOX_IMAGE_HASH",f="PALETTE_SET_ACTIVE",s="PALETTE_DELETE",h="SET_EDIT_PALETTE",p="PALETTE_CANCEL_EDIT",y="PALETTE_UPDATE",d="SAVE_EDIT_PALETTE",v="PALETTE_EDIT",m="PALETTE_CLONE",g="CONFIRM_ASK",b="CONFIRM_ANSWERED",w="FRAMES_MESSAGE_SHOW",E="FRAMES_MESSAGE_HIDE",O="ADD_FRAME",S="DELETE_FRAME",x="EDIT_FRAME",L="CANCEL_EDIT_FRAME",A="UPDATE_FRAME",j="NAME_FRAMEGROUP",F="SET_HANDLE_EXPORT_FRAME",_="SET_SAV_FRAME_TYPES",P="UPDATE_EXPORT_FILE_TYPES",T="UPDATE_EXPORT_SCALE_FACTORS",I="SET_HIDE_DATES",D="SET_PREFERRED_LOCALE",k="SET_IMPORT_LAST_SEEN",N="SET_IMPORT_DELETED",G="SET_FORCE_MAGIC_CHECK",R="SET_IMPORT_PAD",C="SET_PAGESIZE",M="SHOW_SERIALS",B="USE_SERIALS",U="SET_DEBUG",H="ADD_IMAGES",Z="DELETE_IMAGE",Y="DELETE_IMAGES",V="EDIT_IMAGE",$="EDIT_IMAGE_SELECTION",J="CANCEL_EDIT_IMAGE",z="UPDATE_IMAGE",W="UPDATE_IMAGES_BATCH",X="IMAGE_FAVOURITE_TAG",q="REHASH_IMAGE",K="IMPORT_DRAGOVER_START",Q="IMPORT_DRAGOVER_END",tt="DROPBOX_LOGOUT",rt="SET_DROPBOX_STORAGE",et="DROPBOX_LOG_ACTION",nt="LAST_UPDATE_DROPBOX_REMOTE",ot="DROPBOX_SETTINGS_IMPORT",it="DROPBOX_START_AUTH",at="SET_GIT_STORAGE",ct="GITSTORAGE_LOG_ACTION",ut="GIT_SETTINGS_IMPORT",lt="STORAGE_SYNC_DONE",ft="STORAGE_DIFF_DONE",st="STORAGE_SYNC_START",ht="STORAGE_SYNC_SELECT",pt="STORAGE_SYNC_CANCEL",yt="JSON_EXPORT",dt="JSON_IMPORT",vt="SET_ACTIVE_TAGS",mt="SET_AVAILABLE_TAGS",gt="SHOW_FILTERS",bt="HIDE_FILTERS",wt="IMAGE_SELECTION_REMOVE",Et="IMAGE_SELECTION_ADD",Ot="IMAGE_SELECTION_SET",St="IMAGE_SELECTION_SHIFTCLICK",xt="SET_SORT_BY",Lt="SHOW_SORT_OPTIONS",At="HIDE_SORT_OPTIONS",jt="PLUGIN_REMOVE",Ft="PLUGIN_ADD",_t="PLUGIN_UPDATE_PROPERTIES",Pt="PLUGIN_UPDATE_CONFIG",Tt="PLUGIN_IMAGE",It="PLUGIN_IMAGES",Dt="EXECUTE_PLUGIN_PROGRESS",kt="PRINTER_PROGRESS",Nt="CREATE_GIF_PROGRESS",Gt="LOG_CLEAR",Rt="SET_PRINTER_PARAMS",Ct="SET_PRINTER_URL",Mt="REMOTE_CALL_FUNCTION",Bt="HEARTBEAT_TIMED_OUT",Ut="PRINTER_FUNCTIONS_RECEIVED",Ht="PRINTER_DATA_RECEIVED",Zt="PRINTER_RESET",Yt="ANIMATE_IMAGES",Vt="UPDATE_RGBN_PART",$t="SET_VIDEO_PARAMS",Jt="CANCEL_ANIMATE_IMAGES",zt="SAVE_RGBN_IMAGE",Wt="SHARE_IMAGE",Xt="START_DOWNLOAD",qt="DOWNLOAD_SELECTION",Kt="BATCH_TASK",Qt="GLOBAL_UPDATE",tr="WINDOW_DIMENSIONS",rr="ERROR",er="TRY_RECOVER_IMAGE_DATA",nr="IMPORT_FILES",or="BITMAPQUEUE_ADD",ir="BITMAPQUEUE_CANCEL",ar="IMPORTQUEUE_ADD",cr="IMPORTQUEUE_CANCEL",ur="IMPORTQUEUE_CANCEL_ONE",lr="FRAMEQUEUE_ADD",fr="FRAMEQUEUE_CANCEL_ONE",sr="SHOW_HIDE_TRASH",hr="SET_TRASH_COUNT_FRAMES",pr="SET_TRASH_COUNT_IMAGES",yr="UPDATE_TRASH_COUNT"},23860:function(t,r,e){e.d(r,{C:function(){return n},c:function(){return o}});e(89554),e(41539),e(54747);var n=[{key:"printerUrl",saveLocally:!0,saveExport:["settings"],value:""},{key:"printerParams",saveLocally:!0,saveExport:["settings"],value:""},{key:"activePalette",saveLocally:!0,saveExport:["settings","remote"],value:"bw"},{key:"images",saveLocally:!0,saveExport:["selected_images","images","remote"],value:[]},{key:"galleryView",saveLocally:!0,saveExport:["settings"],value:"1x"},{key:"exportScaleFactors",saveLocally:!0,saveExport:["settings","remote"],value:[4]},{key:"exportFileTypes",saveLocally:!0,saveExport:["settings","remote"],value:["png"]},{key:"pageSize",saveLocally:!0,saveExport:["settings"],value:30},{key:"imageSelection",saveLocally:!0,saveExport:["selected_images"],value:[]},{key:"rgbnImages",saveLocally:!0,saveExport:[],value:{}},{key:"editImage",saveLocally:!0,saveExport:[],value:null},{key:"videoParams",saveLocally:!0,saveExport:["settings","remote"],value:{}},{key:"filtersActiveTags",saveLocally:!0,saveExport:[],value:[]},{key:"filtersVisible",saveLocally:!0,saveExport:[],value:!1},{key:"savFrameTypes",saveLocally:!0,saveExport:["settings","remote"],value:"int"},{key:"sortBy",saveLocally:!0,saveExport:["settings","remote"],value:"created_asc"},{key:"handleExportFrame",saveLocally:!0,saveExport:["settings","remote"],value:"keep"},{key:"importLastSeen",saveLocally:!0,saveExport:["settings","remote"],value:!0},{key:"importDeleted",saveLocally:!0,saveExport:["settings","remote"],value:!0},{key:"importPad",saveLocally:!0,saveExport:["settings","remote"],value:!1},{key:"hideDates",saveLocally:!0,saveExport:["settings","remote"],value:!1},{key:"enableDebug",saveLocally:!0,saveExport:["settings"],value:!1},{key:"palettes",saveLocally:!0,saveExport:["palettes","remote"],value:[]},{key:"plugins",saveLocally:!0,saveRemote:!1,saveExport:["settings","remote"],value:[]},{key:"framesMessage",saveLocally:!0,saveExport:["settings","remote"],value:0},{key:"frames",saveLocally:!0,saveExport:["frames","remote","framegroup"],value:[]},{key:"frameGroupNames",saveLocally:!0,saveExport:["frames","remote","framegroup"],value:[]},{key:"recentImports",saveLocally:!0,saveExport:[],value:[]},{key:"gitStorage",saveLocally:!0,saveExport:[],value:{use:!1,owner:"",repo:"",branch:"",token:"",throttle:"330"}},{key:"dropboxStorage",saveLocally:!0,saveExport:[],value:{path:""}},{key:"useSerials",saveLocally:!0,saveExport:[],value:!1},{key:"syncLastUpdate",saveLocally:!0,saveExport:[],value:{dropbox:0,local:0}},{key:"preferredLocale",saveLocally:!0,saveExport:["settings"],value:navigator.language},{key:"bitmapQueue",saveLocally:!1,saveExport:[],value:[]},{key:"importQueue",saveLocally:!1,saveExport:[],value:[]},{key:"frameQueue",saveLocally:!1,saveExport:[],value:[]},{key:"trashCount",saveLocally:!1,saveExport:[],value:{frames:0,images:0,show:!1}},{key:"forceMagicCheck",saveLocally:!0,saveExport:["settings"],value:!0}],o={};n.forEach((function(t){var r=t.key,e=t.value;o[r]=e}))},48766:function(t,r,e){e.d(r,{Dh:function(){return n},R1:function(){return f},TZ:function(){return o},Ul:function(){return l},VP:function(){return s},Vn:function(){return c},ee:function(){return a},oJ:function(){return u},z2:function(){return i}});var n="__filter:untagged__",o="__filter:new__",i="__filter:mono__",a="__filter:rgb__",c="__filter:recent__",u="__filter:favourite__",l="__filter:comments__",f="__filter:username__",s="__new:palette__"},97768:function(t,r,e){e(43290),e(66992),e(39575),e(41539),e(49743),e(92990),e(18927),e(33105),e(35035),e(74345),e(7174),e(32846),e(44731),e(77209),e(96319),e(58867),e(37789),e(33739),e(29368),e(14483),e(12056),e(3462),e(30678),e(27462),e(33824),e(55021),e(12974),e(15016),e(89554),e(54747),e(57327),e(21249),e(92222),e(47042),e(69600),e(91058),e(66528),e(74916),e(15306),e(69070),e(79753),e(82526),e(41817),e(32165),e(78783),e(33948),e(91038),e(68309);var n=e(18417);function o(t){return function(t){if(Array.isArray(t))return i(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||function(t,r){if(!t)return;if("string"==typeof t)return i(t,r);var e=Object.prototype.toString.call(t).slice(8,-1);"Object"===e&&t.constructor&&(e=t.constructor.name);if("Map"===e||"Set"===e)return Array.from(t);if("Arguments"===e||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(e))return i(t,r)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function i(t,r){(null==r||r>t.length)&&(r=t.length);for(var e=0,n=new Array(r);e<r;e++)n[e]=t[e];return n}function a(t,r){for(var e=0;e<r.length;e++){var n=r[e];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}var c="FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFF",u=20,l=function(){function t(){!function(t,r){if(!(t instanceof r))throw new TypeError("Cannot call a class as a function")}(this,t),this.canvas=null,this.tiles=[],this.colors=[],this.rawImageData=[],this.lockFrame=!1,this.invertPalette=!1,this.bwPalette=[16777215,11184810,5592405,0],this.colorData=this.bwPalette,this.blackLine=Array(20).fill(c),this.whiteLine=Array(20).fill("00000000000000000000000000000000"),this.tileIndexIsFramePart=n.Z}var r,e,i;return r=t,e=[{key:"update",value:function(t){var r=this,e=t.canvas,n=void 0===e?null:e,o=t.tiles,i=void 0===o?[]:o,a=t.palette,c=void 0===a?[]:a,u=t.lockFrame,l=void 0!==u&&u,f=t.invertPalette,s=void 0!==f&&f,h=this.setCanvas(n),p=this.setPalette(c,s),y=this.setLockFrame(l);(h||p||y||!this.tiles.length)&&(this.tiles=[]);var d=this.setTiles(i),v=this.getHeight();if(0!==v){if(this.canvas){if(this.canvas.height!==v||!this.rawImageData.length){this.canvas.height=v;var m=new Uint8ClampedArray(160*v*4);this.rawImageData.forEach((function(t,r){m[r]=t})),this.rawImageData=m}d.forEach((function(t){var e=t.index,n=t.newTile;r.renderTile(e,n)})),this.updateCanvas(v)}}else this.canvas.height=0}},{key:"updateCanvas",value:function(t){var r,e=this.canvas.getContext("2d");try{r=new ImageData(this.rawImageData,160,t)}catch(n){r=e.getImageData(0,0,160,t),this.rawImageData.forEach((function(t,e){r.data[e]=t}))}e.putImageData(r,0,0)}},{key:"getScaledCanvas",value:function(t){var r=this,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"keep",n=360===this.tiles.length?e:"keep",o=this.getScaleCanvasSize(n),i=o.initialHeight,a=o.initialWidth,c=o.tilesPerLine,u=document.createElement("canvas"),l=u.getContext("2d");return u.width=a*t,u.height=i*t,this.getExportTiles(n).forEach((function(n,o){r.paintTileScaled(r.decodeTile(n),o,l,t,c,e)})),u}},{key:"getScaleCanvasSize",value:function(t){switch(t){case"keep":return{initialHeight:this.getHeight(),initialWidth:160,tilesPerLine:u};case"crop":return{initialHeight:this.getHeight()-32,initialWidth:128,tilesPerLine:16};case"square_black":case"square_white":case"square_smart":return{initialHeight:this.getHeight()+16,initialWidth:160,tilesPerLine:u};default:throw new Error("unknown export mode ".concat(t))}}},{key:"getExportTiles",value:function(t){var r=this;switch(t){case"keep":return this.tiles;case"crop":return this.tiles.map((function(t,e){return r.tileIndexIsFramePart(e,"keep")?null:t})).filter(Boolean);case"square_black":return[].concat(o(this.blackLine),o(this.tiles),o(this.blackLine));case"square_white":return[].concat(o(this.whiteLine),o(this.tiles),o(this.whiteLine));case"square_smart":return[].concat(o(this.smartTile("first")),o(this.tiles),o(this.smartTile("last")));default:throw new Error("unknown export mode ".concat(t))}}},{key:"smartTile",value:function(t){switch(t){case"first":return this.tiles.slice(0,20).map((function(t){return Array(8).fill(t.slice(0,4)).join("")}));case"last":return this.tiles.slice(340,360).map((function(t){return Array(8).fill(t.slice(28,32)).join("")}));default:return this.blackLine}}},{key:"setCanvas",value:function(t){return this.canvas!==t&&(this.canvas=t,!0)}},{key:"setPalette",value:function(t,r){return(JSON.stringify(this.colors)!==JSON.stringify(t)||this.invertPalette!==r)&&(this.colors=t,this.invertPalette=r,this.colorData=this.colors.map((function(t){return 7!==t.length?null:parseInt(t.substring(1),16)})),!0)}},{key:"setLockFrame",value:function(t){return t!==this.lockFrame&&(this.lockFrame=t,!0)}},{key:"setTiles",value:function(t){var r=this,e=t.map((function(t,e){return t!==r.tiles[e]?{index:e,newTile:t}:null})).filter(Boolean);return this.tiles=t,e}},{key:"renderTile",value:function(t,r){var e=this.decodeTile(r);this.paintTile(e,t)}},{key:"decodeTile",value:function(){for(var t=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:c).replace(/[^0-9A-F]/gi,"").padEnd(32,"f"),r=new Array(16),e=0;e<r.length;e+=1)r[e]=parseInt(t.substr(2*e,2),16);for(var n=new Array(64),o=0;o<8;o+=1)for(var i=0;i<8;i+=1){var a=r[2*o+1]>>7-i&1,u=r[2*o]>>7-i&1;n[8*o+i]=a<<1|u}return n}},{key:"getRGBValue",value:function(t,r,e,n){var o=this.lockFrame&&"crop"!==n&&this.tileIndexIsFramePart(e,n)?this.bwPalette:this.colorData,i=this.invertPalette?o[3-t[r]]:o[t[r]];return{r:(16711680&i)>>16,g:(65280&i)>>8,b:255&i}}},{key:"paintTile",value:function(t,r){for(var e=r%u*8,n=8*Math.floor(r/u),o=0;o<8;o+=1)for(var i=0;i<8;i+=1){var a=4*(e+o+160*(n+i)),c=this.getRGBValue(t,8*i+o,r,"keep");this.rawImageData[a]=c.r,this.rawImageData[a+1]=c.g,this.rawImageData[a+2]=c.b,this.rawImageData[a+3]=255}}},{key:"paintTileScaled",value:function(t,r,e,n,o,i){for(var a=r%o*8*n,c=8*Math.floor(r/o)*n,u=0;u<8;u+=1)for(var l=0;l<8;l+=1){var f=this.getRGBValue(t,8*l+u,r,i);e.fillStyle="rgb(".concat(f.r,", ").concat(f.g,", ").concat(f.b,")"),e.fillRect(a+u*n,c+l*n,n+1,n+1)}}},{key:"getHeight",value:function(){return 8*Math.ceil(this.tiles.length/u)}}],e&&a(r.prototype,e),i&&a(r,i),Object.defineProperty(r,"prototype",{writable:!1}),t}();r.Z=l},24022:function(t,r,e){e.d(r,{Rg:function(){return c},_I:function(){return i},qe:function(){return a}});var n;e(69070);function o(t,r,e){return r in t?Object.defineProperty(t,r,{value:e,enumerable:!0,configurable:!0,writable:!0}):t[r]=e,t}var i={NORMAL:"normal",NORMAL_S:"normal_s",LIGHTEN:"lighten",SCREEN:"screen",DODGE:"dodge",DODGE_S:"dodge_s",ADDITION:"addition",DARKEN:"darken",MULTIPLY:"multiply",BURN:"burn",BURN_S:"burn_s",OVERLAY:"overlay",SOFTLIGHT:"softlight",SOFTLIGHT_S:"softlight_s",HARDLIGHT:"hardlight",DIFFERENCE:"difference",SUBTRACT:"subtract",SUBTRACT_S:"subtract_s",GRAIN_EXTRACT:"grainextract",GRAIN_EXTRACT_S:"grainextract_s",GRAIN_MERGE:"grainmerge",DIVIDE:"divide",DIVIDE_S:"divide_s"},a=(o(n={},i.NORMAL,(function(t,r){return t})),o(n,i.LIGHTEN,(function(t,r){return Math.max(r,t)})),o(n,i.SCREEN,(function(t,r){return 1-(1-r)*(1-t)})),o(n,i.DODGE,(function(t,r){return t/(1-r)})),o(n,i.ADDITION,(function(t,r){return r+t})),o(n,i.DARKEN,(function(t,r){return Math.min(r,t)})),o(n,i.MULTIPLY,(function(t,r){return r*t})),o(n,i.BURN,(function(t,r){return 1-(1-t)/r})),o(n,i.OVERLAY,(function(t,r){return t<.5?2*t*r:1-2*(1-r)*(1-t)})),o(n,i.SOFTLIGHT,(function(t,r){return(1-t)*a[i.MULTIPLY](t,r)+t*a[i.SCREEN](t,r)})),o(n,i.DIFFERENCE,(function(t,r){return Math.abs(t-r)})),o(n,i.SUBTRACT,(function(t,r){return t-r})),o(n,i.GRAIN_EXTRACT,(function(t,r){return t-r+.5})),o(n,i.GRAIN_MERGE,(function(t,r){return t+r-.5})),o(n,i.DIVIDE,(function(t,r){return t/r})),o(n,i.NORMAL_S,(function(t,r){return a[i.NORMAL](r,t)})),o(n,i.DODGE_S,(function(t,r){return a[i.DODGE](r,t)})),o(n,i.BURN_S,(function(t,r){return a[i.BURN](r,t)})),o(n,i.HARDLIGHT,(function(t,r){return a[i.OVERLAY](r,t)})),o(n,i.SOFTLIGHT_S,(function(t,r){return a[i.SOFTLIGHT](r,t)})),o(n,i.SUBTRACT_S,(function(t,r){return a[i.SUBTRACT](r,t)})),o(n,i.GRAIN_EXTRACT_S,(function(t,r){return a[i.GRAIN_EXTRACT](r,t)})),o(n,i.DIVIDE_S,(function(t,r){return a[i.DIVIDE](r,t)})),n),c=[{id:i.NORMAL,label:"Normal (ignore neutral layer)"},{id:i.NORMAL_S,label:"Normal  (only neutral layer)"},{id:i.LIGHTEN,label:"Lighten only"},{id:i.SCREEN,label:"Screen"},{id:i.DODGE,label:"Dodge"},{id:i.DODGE_S,label:"Dodge "},{id:i.ADDITION,label:"Addition"},{id:i.DARKEN,label:"Darken only"},{id:i.MULTIPLY,label:"Multiply"},{id:i.BURN,label:"Burn"},{id:i.BURN_S,label:"Burn "},{id:i.OVERLAY,label:"Overlay"},{id:i.SOFTLIGHT,label:"Soft light"},{id:i.SOFTLIGHT_S,label:"Soft light "},{id:i.HARDLIGHT,label:"Hard light"},{id:i.DIFFERENCE,label:"Difference"},{id:i.SUBTRACT,label:"Subtract"},{id:i.SUBTRACT_S,label:"Subtract "},{id:i.GRAIN_EXTRACT,label:"Grain extract"},{id:i.GRAIN_EXTRACT_S,label:"Grain extract "},{id:i.GRAIN_MERGE,label:"Grain merge"},{id:i.DIVIDE,label:"Divide"},{id:i.DIVIDE_S,label:"Divide "}]},17036:function(t,r,e){e(21249),e(47042),e(69600),e(43290),e(68304),e(24812),e(30489),e(41539),e(12419),e(78011),e(69070),e(74819),e(38880),e(79753),e(82526),e(41817),e(32165),e(66992),e(78783),e(33948),e(68309),e(91038),e(74916);var n=e(97768),o=e(24022);function i(t){return i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},i(t)}function a(t){return function(t){if(Array.isArray(t))return l(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||u(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function c(t,r){return function(t){if(Array.isArray(t))return t}(t)||function(t,r){var e=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null==e)return;var n,o,i=[],a=!0,c=!1;try{for(e=e.call(t);!(a=(n=e.next()).done)&&(i.push(n.value),!r||i.length!==r);a=!0);}catch(t){c=!0,o=t}finally{try{a||null==e.return||e.return()}finally{if(c)throw o}}return i}(t,r)||u(t,r)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function u(t,r){if(t){if("string"==typeof t)return l(t,r);var e=Object.prototype.toString.call(t).slice(8,-1);return"Object"===e&&t.constructor&&(e=t.constructor.name),"Map"===e||"Set"===e?Array.from(t):"Arguments"===e||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(e)?l(t,r):void 0}}function l(t,r){(null==r||r>t.length)&&(r=t.length);for(var e=0,n=new Array(r);e<r;e++)n[e]=t[e];return n}function f(t,r){for(var e=0;e<r.length;e++){var n=r[e];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function s(){return s="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,r,e){var n=function(t,r){for(;!Object.prototype.hasOwnProperty.call(t,r)&&null!==(t=y(t)););return t}(t,r);if(n){var o=Object.getOwnPropertyDescriptor(n,r);return o.get?o.get.call(arguments.length<3?t:e):o.value}},s.apply(this,arguments)}function h(t,r){return h=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,r){return t.__proto__=r,t},h(t,r)}function p(t){var r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var e,n=y(t);if(r){var o=y(this).constructor;e=Reflect.construct(n,arguments,o)}else e=n.apply(this,arguments);return function(t,r){if(r&&("object"===i(r)||"function"==typeof r))return r;if(void 0!==r)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,e)}}function y(t){return y=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},y(t)}var d=function(t){!function(t,r){if("function"!=typeof r&&null!==r)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(r&&r.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),r&&h(t,r)}(u,t);var r,e,n,i=p(u);function u(){var t;return function(t,r){if(!(t instanceof r))throw new TypeError("Cannot call a class as a function")}(this,u),(t=i.call(this)).blackLine=u.rgbnTiles([t.blackLine,t.blackLine,t.blackLine,t.blackLine]),t.whiteLine=u.rgbnTiles([t.whiteLine,t.whiteLine,t.whiteLine,t.whiteLine]),t}return r=u,n=[{key:"rgbnTiles",value:function(t){var r=c(t,4),e=r[0],n=r[1],o=r[2],i=r[3],u=Math.max((null==e?void 0:e.length)||0,(null==n?void 0:n.length)||0,(null==o?void 0:o.length)||0,(null==i?void 0:i.length)||0);return a(Array(u)).map((function(t,r){return{r:null==e?void 0:e[r],g:null==n?void 0:n[r],b:null==o?void 0:o[r],n:null==i?void 0:i[r]}}))}}],(e=[{key:"setPalette",value:function(t){return!!t&&JSON.stringify(this.palette)!==JSON.stringify(t)&&(this.palette=t,!0)}},{key:"decodeTile",value:function(t){var r=t.r,e=t.g,n=t.b,o=t.n;return{r:s(y(u.prototype),"decodeTile",this).call(this,r),g:s(y(u.prototype),"decodeTile",this).call(this,e),b:s(y(u.prototype),"decodeTile",this).call(this,n),n:o?s(y(u.prototype),"decodeTile",this).call(this,o):null}}},{key:"getRGBValue",value:function(t,r,e,n){var o=t.r,i=t.g,a=t.b,c=t.n;if(this.lockFrame&&"crop"!==n&&this.tileIndexIsFramePart(e,n)&&c)try{return s(y(u.prototype),"getRGBValue",this).call(this,c,r,e,n)}catch(t){return{r:255*Math.random(),g:255*Math.random(),b:255*Math.random()}}return this.blendColors({r:o[r],g:i[r],b:a[r],n:!!c&&c[r]})}},{key:"smartTile",value:function(t){var r=this;switch(t){case"first":return this.tiles.slice(0,20).map((function(t){return{r:t.r?Array(8).fill(t.r.slice(0,4)).join(""):s(y(u.prototype),"smartTile",r).call(r,null),g:t.g?Array(8).fill(t.g.slice(0,4)).join(""):s(y(u.prototype),"smartTile",r).call(r,null),b:t.b?Array(8).fill(t.b.slice(0,4)).join(""):s(y(u.prototype),"smartTile",r).call(r,null),n:t.n?Array(8).fill(t.n.slice(0,4)).join(""):s(y(u.prototype),"smartTile",r).call(r,null)}}));case"last":return this.tiles.slice(340,360).map((function(t){return{r:t.r?Array(8).fill(t.r.slice(28,32)).join(""):s(y(u.prototype),"smartTile",r).call(r,null),g:t.g?Array(8).fill(t.g.slice(28,32)).join(""):s(y(u.prototype),"smartTile",r).call(r,null),b:t.b?Array(8).fill(t.b.slice(28,32)).join(""):s(y(u.prototype),"smartTile",r).call(r,null),n:t.n?Array(8).fill(t.n.slice(28,32)).join(""):s(y(u.prototype),"smartTile",r).call(r,null)}}));default:return s(y(u.prototype),"smartTile",this).call(this,null)}}},{key:"blendColors",value:function(t){var r=t.r,e=t.g,n=t.b,i=t.n,a={r:this.palette.r[3-r],g:this.palette.g[3-e],b:this.palette.b[3-n]};if(!1===i)return a;var c=this.palette.blend||o._I.MULTIPLY;if(!o.qe[c])return a;var u=function(t,r){return 255*Math.max(0,Math.min(1,o.qe[c](t/255,r/255)))};return{r:u(this.palette.r[3-r],this.palette.n[3-i]),g:u(this.palette.g[3-e],this.palette.n[3-i]),b:u(this.palette.b[3-n],this.palette.n[3-i])}}},{key:"getHeight",value:function(){return 144}}])&&f(r.prototype,e),n&&f(r,n),Object.defineProperty(r,"prototype",{writable:!1}),u}(n.Z);r.Z=d},55140:function(t,r,e){e.d(r,{U:function(){return f},_:function(){return l}});e(21249),e(91058),e(47042);var n=({baseValues:t,orderPatterns:r})=>{const e=[];for(let n=0;n<4;n+=1){const o=[];e.push(o);for(let e=0;e<4;e+=1){const i=[];o.push(i);for(let o=0;o<3;o+=1)i.push(t[o][r[o][4*n+e]])}}return e};const o=[0,12,3,15,8,4,11,7,2,14,1,13,10,6,9,5],i=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];var a=(t,r)=>{const e=(r-t)/16;return new Array(16).fill(null).map(((r,n)=>Math.floor(t+e*n)))};var c=([t,r,e,n])=>[a(t,r),a(r,e),a(e,n)],u=0,l=function(t,r,e,a){for(var l=new ImageData(t.width,t.height),f=n({baseValues:c(r),orderPatterns:[e?o:i,e?o:i,e?o:i]}),s=t.width,h=t.data,p=0;p<h.length;p+=4){var y=u%s%4,d=Math.ceil(u/s)%4,v=h[p],m=void 0,g=f[y][d];m=v<=g[0]?a[3]:v<=g[1]?a[2]:v<=g[2]?a[1]:a[0],l.data[p]=m.r,l.data[p+1]=m.g,l.data[p+2]=m.b,l.data[p+3]=255,u+=1}return l},f=function(t){var r=t.targetCanvas,e=t.originalCanvas,n=t.imageData,o=t.palette,i=t.dither,a=t.contrastBaseValues,c=o.map((function(t){return{r:parseInt(t.slice(1,3),16),g:parseInt(t.slice(3,5),16),b:parseInt(t.slice(5,7),16)}}));r.getContext("2d").putImageData(l(n,a,i,c),0,0),e.getContext("2d").putImageData(n,0,0)}},75500:function(t,r,e){e.d(r,{ez:function(){return p},jm:function(){return h},vJ:function(){return y}});e(47042),e(92222),e(43290),e(66992),e(41539),e(88674),e(78783),e(33948),e(69600),e(21249),e(57327),e(74916),e(15306),e(79753),e(82526),e(41817),e(32165),e(91038),e(68309),e(72443),e(39341),e(73706),e(10408),e(69070),e(78011),e(30489),e(89554),e(54747),e(68304);var n=e(18417),o=e(59833);function i(t){return i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},i(t)}function a(){a=function(){return t};var t={},r=Object.prototype,e=r.hasOwnProperty,n="function"==typeof Symbol?Symbol:{},o=n.iterator||"@@iterator",c=n.asyncIterator||"@@asyncIterator",u=n.toStringTag||"@@toStringTag";function l(t,r,e){return Object.defineProperty(t,r,{value:e,enumerable:!0,configurable:!0,writable:!0}),t[r]}try{l({},"")}catch(t){l=function(t,r,e){return t[r]=e}}function f(t,r,e,n){var o=r&&r.prototype instanceof p?r:p,i=Object.create(o.prototype),a=new L(n||[]);return i._invoke=function(t,r,e){var n="suspendedStart";return function(o,i){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===o)throw i;return j()}for(e.method=o,e.arg=i;;){var a=e.delegate;if(a){var c=O(a,e);if(c){if(c===h)continue;return c}}if("next"===e.method)e.sent=e._sent=e.arg;else if("throw"===e.method){if("suspendedStart"===n)throw n="completed",e.arg;e.dispatchException(e.arg)}else"return"===e.method&&e.abrupt("return",e.arg);n="executing";var u=s(t,r,e);if("normal"===u.type){if(n=e.done?"completed":"suspendedYield",u.arg===h)continue;return{value:u.arg,done:e.done}}"throw"===u.type&&(n="completed",e.method="throw",e.arg=u.arg)}}}(t,e,a),i}function s(t,r,e){try{return{type:"normal",arg:t.call(r,e)}}catch(t){return{type:"throw",arg:t}}}t.wrap=f;var h={};function p(){}function y(){}function d(){}var v={};l(v,o,(function(){return this}));var m=Object.getPrototypeOf,g=m&&m(m(A([])));g&&g!==r&&e.call(g,o)&&(v=g);var b=d.prototype=p.prototype=Object.create(v);function w(t){["next","throw","return"].forEach((function(r){l(t,r,(function(t){return this._invoke(r,t)}))}))}function E(t,r){function n(o,a,c,u){var l=s(t[o],t,a);if("throw"!==l.type){var f=l.arg,h=f.value;return h&&"object"==i(h)&&e.call(h,"__await")?r.resolve(h.__await).then((function(t){n("next",t,c,u)}),(function(t){n("throw",t,c,u)})):r.resolve(h).then((function(t){f.value=t,c(f)}),(function(t){return n("throw",t,c,u)}))}u(l.arg)}var o;this._invoke=function(t,e){function i(){return new r((function(r,o){n(t,e,r,o)}))}return o=o?o.then(i,i):i()}}function O(t,r){var e=t.iterator[r.method];if(void 0===e){if(r.delegate=null,"throw"===r.method){if(t.iterator.return&&(r.method="return",r.arg=void 0,O(t,r),"throw"===r.method))return h;r.method="throw",r.arg=new TypeError("The iterator does not provide a 'throw' method")}return h}var n=s(e,t.iterator,r.arg);if("throw"===n.type)return r.method="throw",r.arg=n.arg,r.delegate=null,h;var o=n.arg;return o?o.done?(r[t.resultName]=o.value,r.next=t.nextLoc,"return"!==r.method&&(r.method="next",r.arg=void 0),r.delegate=null,h):o:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,h)}function S(t){var r={tryLoc:t[0]};1 in t&&(r.catchLoc=t[1]),2 in t&&(r.finallyLoc=t[2],r.afterLoc=t[3]),this.tryEntries.push(r)}function x(t){var r=t.completion||{};r.type="normal",delete r.arg,t.completion=r}function L(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(S,this),this.reset(!0)}function A(t){if(t){var r=t[o];if(r)return r.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var n=-1,i=function r(){for(;++n<t.length;)if(e.call(t,n))return r.value=t[n],r.done=!1,r;return r.value=void 0,r.done=!0,r};return i.next=i}}return{next:j}}function j(){return{value:void 0,done:!0}}return y.prototype=d,l(b,"constructor",d),l(d,"constructor",y),y.displayName=l(d,u,"GeneratorFunction"),t.isGeneratorFunction=function(t){var r="function"==typeof t&&t.constructor;return!!r&&(r===y||"GeneratorFunction"===(r.displayName||r.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,d):(t.__proto__=d,l(t,u,"GeneratorFunction")),t.prototype=Object.create(b),t},t.awrap=function(t){return{__await:t}},w(E.prototype),l(E.prototype,c,(function(){return this})),t.AsyncIterator=E,t.async=function(r,e,n,o,i){void 0===i&&(i=Promise);var a=new E(f(r,e,n,o),i);return t.isGeneratorFunction(e)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},w(b),l(b,u,"Generator"),l(b,o,(function(){return this})),l(b,"toString",(function(){return"[object Generator]"})),t.keys=function(t){var r=[];for(var e in t)r.push(e);return r.reverse(),function e(){for(;r.length;){var n=r.pop();if(n in t)return e.value=n,e.done=!1,e}return e.done=!0,e}},t.values=A,L.prototype={constructor:L,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(x),!t)for(var r in this)"t"===r.charAt(0)&&e.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var r=this;function n(e,n){return a.type="throw",a.arg=t,r.next=e,n&&(r.method="next",r.arg=void 0),!!n}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],a=i.completion;if("root"===i.tryLoc)return n("end");if(i.tryLoc<=this.prev){var c=e.call(i,"catchLoc"),u=e.call(i,"finallyLoc");if(c&&u){if(this.prev<i.catchLoc)return n(i.catchLoc,!0);if(this.prev<i.finallyLoc)return n(i.finallyLoc)}else if(c){if(this.prev<i.catchLoc)return n(i.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return n(i.finallyLoc)}}}},abrupt:function(t,r){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&e.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=r&&r<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=r,i?(this.method="next",this.next=i.finallyLoc,h):this.complete(a)},complete:function(t,r){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&r&&(this.next=r),h},finish:function(t){for(var r=this.tryEntries.length-1;r>=0;--r){var e=this.tryEntries[r];if(e.finallyLoc===t)return this.complete(e.completion,e.afterLoc),x(e),h}},catch:function(t){for(var r=this.tryEntries.length-1;r>=0;--r){var e=this.tryEntries[r];if(e.tryLoc===t){var n=e.completion;if("throw"===n.type){var o=n.arg;x(e)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(t,r,e){return this.delegate={iterator:A(t),resultName:r,nextLoc:e},"next"===this.method&&(this.arg=void 0),h}},t}function c(t,r,e,n,o,i,a){try{var c=t[i](a),u=c.value}catch(t){return void e(t)}c.done?r(u):Promise.resolve(u).then(n,o)}function u(t){return function(){var r=this,e=arguments;return new Promise((function(n,o){var i=t.apply(r,e);function a(t){c(i,n,o,a,u,"next",t)}function u(t){c(i,n,o,a,u,"throw",t)}a(void 0)}))}}function l(t){return function(t){if(Array.isArray(t))return f(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||function(t,r){if(!t)return;if("string"==typeof t)return f(t,r);var e=Object.prototype.toString.call(t).slice(8,-1);"Object"===e&&t.constructor&&(e=t.constructor.name);if("Map"===e||"Set"===e)return Array.from(t);if("Arguments"===e||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(e))return f(t,r)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function f(t,r){(null==r||r>t.length)&&(r=t.length);for(var e=0,n=new Array(r);e<r;e++)n[e]=t[e];return n}var s=function(t){if(t.length>360)return t.slice(0,360);if(t.length<360){var r=t.pop();return[].concat(l(t),l(Array(360-t.length).fill(r)))}return t},h=function(){var t=u(a().mark((function t(r){var o,i,c,u,f,h,p;return a().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.e(705).then(e.t.bind(e,40705,23));case 2:return o=t.sent,i=o.default,t.next=6,e.e(591).then(e.t.bind(e,99591,23));case 6:return c=t.sent,u=c.default,f=s(l(r)).filter((function(t,r){return(0,n.Z)(r,"keep")})).map((function(t){return t.replace(/ /gi,"").toUpperCase()})).join("\n"),h=u.deflate(f,{to:"string",strategy:1,level:8}),p=i(h),t.abrupt("return",{dataHash:p,compressed:h});case 12:case"end":return t.stop()}}),t)})));return function(r){return t.apply(this,arguments)}}(),p=function(){var t=u(a().mark((function t(r){var e,n,i;return a().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,h(r);case 2:return e=t.sent,n=e.dataHash,i=e.compressed,t.next=7,o.$0.setItem(n,i);case 7:return t.abrupt("return",n);case 8:case"end":return t.stop()}}),t)})));return function(r){return t.apply(this,arguments)}}(),y=function(t){return t?o.$0.getItem(t).then((function(t){return t?e.e(591).then(e.t.bind(e,99591,23)).then((function(r){var e=r.default;try{var n=e.inflate(t,{to:"string"}).split("\n");return{upper:n.slice(0,40),left:Array(14).fill(0).map((function(t,r){return n.slice(4*r+40,4*r+42)})),right:Array(14).fill(0).map((function(t,r){return n.slice(4*r+42,4*r+44)})),lower:n.slice(96,136)}}catch(t){return null}})):null})):Promise.resolve(null)}},2738:function(t,r,e){e(41539),e(88674),e(89554),e(54747),e(79753),e(82526),e(41817),e(32165),e(66992),e(78783),e(33948),e(91038),e(47042),e(68309),e(74916);var n=e(75500);function o(t){return function(t){if(Array.isArray(t))return i(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||function(t,r){if(!t)return;if("string"==typeof t)return i(t,r);var e=Object.prototype.toString.call(t).slice(8,-1);"Object"===e&&t.constructor&&(e=t.constructor.name);if("Map"===e||"Set"===e)return Array.from(t);if("Arguments"===e||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(e))return i(t,r)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function i(t,r){(null==r||r>t.length)&&(r=t.length);for(var e=0,n=new Array(r);e<r;e++)n[e]=t[e];return n}r.Z=function(t,r){return 360!==t.length?Promise.resolve(t):(0,n.vJ)(r).then((function(r){var e=o(t);return r.upper.forEach((function(t,r){e[r]=t})),r.lower.forEach((function(t,r){e[r+320]=t})),r.left.forEach((function(t,r){e[20*r+40]=t[0],e[20*r+41]=t[1]})),r.right.forEach((function(t,r){e[20*r+58]=t[0],e[20*r+59]=t[1]})),e})).catch((function(){return t}))}},22604:function(t,r){r.Z=function(t,r,e){var n=r.getContext("2d");switch(n.resetTransform(),e%2?(r.height=t.width,r.width=t.height):(r.width=t.width,r.height=t.height),e){case 1:n.translate(t.height,0);break;case 2:n.translate(t.width,t.height);break;case 3:n.translate(0,t.width)}n.rotate(90*e*Math.PI/180),n.drawImage(t,0,0)}},20170:function(t,r,e){e(92222),e(57327),e(41539),e(34553),e(26699),e(32023),e(79753),e(82526),e(41817),e(32165),e(66992),e(78783),e(33948),e(91038),e(47042),e(68309),e(74916);function n(t){return function(t){if(Array.isArray(t))return o(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||function(t,r){if(!t)return;if("string"==typeof t)return o(t,r);var e=Object.prototype.toString.call(t).slice(8,-1);"Object"===e&&t.constructor&&(e=t.constructor.name);if("Map"===e||"Set"===e)return Array.from(t);if("Arguments"===e||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(e))return o(t,r)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function o(t,r){(null==r||r>t.length)&&(r=t.length);for(var e=0,n=new Array(r);e<r;e++)n[e]=t[e];return n}r.Z=function(t){var r=t.initial,e=t.add,o=t.remove,i=[].concat(n(r),n(e));return i.filter((function(t,r){return i.findIndex((function(r){return r===t}))===r})).filter((function(t){return!o.includes(t)}))}},15168:function(t,r,e){e(73210),e(74916),e(4723),e(24603),e(39714),e(92222),e(27852);r.Z=function(t,r){if(!t.trim())return"";if("/"===t&&"ws"!==r)return t;var e=!!t.match(new RegExp("^".concat(r,"(s)?:\\/\\/"),"gi"));return"".concat(e?"":"".concat(r,"://")).concat(t).concat(t.endsWith("/")?"":"/")}},31712:function(t,r){var e={weekday:void 0,year:"numeric",month:"numeric",day:"numeric",hour:"numeric",minute:"numeric"};r.Z=function(t,r){return t.toDate().toLocaleString(r,e)}},33761:function(t,r,e){e.d(r,{Z:function(){return a}});e(66992),e(41539),e(88674),e(78783),e(33948),e(21249),e(89554),e(54747);var n=e(93162),o=function(t){return"function"==typeof t.arrayBuffer?t.arrayBuffer():new Promise((function(r){var e=new FileReader;e.onload=function(t){r(t.target.result)},e.readAsArrayBuffer(t)}))},i=e(93572),a=function(t){return function(r){if(1!==r.length)e.e(733).then(e.t.bind(e,55733,23)).then((function(e){var a=new(0,e.default);Promise.all(r.map((function(t){var r=t.filename,e=t.blob;return o(e).then((function(t){return{filename:r,arrayBuffer:t}}))}))).then(i.Z).then((function(t){t.forEach((function(t){var r=t.uFilename,e=t.arrayBuffer;a.file(r,e)}))})).then((function(){return a.generateAsync({type:"blob",compression:"DEFLATE"}).then((function(r){(0,n.saveAs)(r,"".concat(t,".zip"))}))}))}));else{var a=r[0];(0,n.saveAs)(a.blob,a.filename)}}}},75226:function(t,r,e){e(57327),e(41539),e(21249),e(88674),e(85827),e(69600),e(74916),e(4723),e(92222),e(83112),e(83710),e(39714),e(82772),e(91058),e(47042),e(66992),e(78783),e(33948),e(84944),e(33792),e(79753),e(82526),e(41817),e(32165),e(91038),e(68309);var n=e(97768),o=e(17036),i=e(84040),a=e(30661),c=e(15177),u=e(22604);function l(t){return function(t){if(Array.isArray(t))return f(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||function(t,r){if(!t)return;if("string"==typeof t)return f(t,r);var e=Object.prototype.toString.call(t).slice(8,-1);"Object"===e&&t.constructor&&(e=t.constructor.name);if("Map"===e||"Set"===e)return Array.from(t);if("Arguments"===e||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(e))return f(t,r)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function f(t,r){(null==r||r>t.length)&&(r=t.length);for(var e=0,n=new Array(r);e<r;e++)n[e]=t[e];return n}r.Z=function(t){return function(r,e){return function(f){var s=t.exportScaleFactors,h=t.exportFileTypes,p=t.handleExportFrame,y=!!e.hashes,d=y?new o.Z:new n.Z,v=e.lockFrame||!1,m=e.invertPalette||!1,g=e.rotation||0;y?d.update({tiles:f,palette:r,lockFrame:v}):d.update({tiles:f,palette:r.palette,lockFrame:v,invertPalette:m});var b=l(s).filter((function(t){return"number"==typeof t})),w=l(h);b.length||b.push(4),w.length||w.push("png");var E=b.map((function(t){return w.map((function(n){return new Promise((function(o){var f=(0,i.Z)({image:e,palette:r,exportScaleFactor:t});switch(n){case"txt":if(y)return void o(null);(0,a.zD)(e.hash,null).then((function(t){var r=t.map((function(t){return t.match(/.{1,2}/g).join(" ")})).reduce((function(t,r,e){return[].concat(l(t),e%40?[r]:[c.fb,r])}),[]),i=[c.jU].concat(l(r),[c.T6,c.oU]).join("\n");o({folder:"images",filename:"".concat(f,".").concat(n),blob:new Blob(new Array(i),{type:"text/plain"}),title:e.title})}));break;case"pgm":if(y)return void o(null);var s=d.getScaledCanvas(1,p),h=document.createElement("canvas");(0,u.Z)(s,h,g);for(var v=["P2","#","# Exported from ".concat(window.location.origin),"#","# hash: ".concat(e.hash),"# created: ".concat(e.created),"# title: ".concat(e.title),"# tags: ".concat(e.tags.join(", ")),"# dimension: ".concat(h.width,"*").concat(h.height," pixels"),"#","".concat(h.width," ").concat(h.height),"3","#"],m=h.getContext("2d"),b=0;b<h.height;b+=1){for(var w=[],E=0;E<h.width;E+=1){var O=m.getImageData(E,b,1,1).data,S=["#",O[0].toString(16).padStart(2,"0"),O[1].toString(16).padStart(2,"0"),O[2].toString(16).padStart(2,"0")].join(""),x=r.palette.indexOf(S);-1===x&&(x=d.bwPalette.indexOf(parseInt(S.slice(1),16))),w.push(3-x)}v.push(w.join(" "))}o({filename:"".concat(f,".").concat(n),blob:new Blob([v.join("\n")],{type:"text/plain"}),title:e.title});break;default:var L=d.getScaledCanvas(t,p),A=document.createElement("canvas");(0,u.Z)(L,A,g);A.toBlob((function(t){o({filename:"".concat(f,".").concat(n),blob:t,title:e.title})}),"image/".concat(n),1)}}))}))}));return Promise.all(E.flat()).then((function(t){return t.filter(Boolean)}))}}}},98642:function(t,r,e){e.d(r,{L:function(){return n.Z},j:function(){return o.Z}});var n=e(33761),o=e(75226)},84040:function(t,r,e){e(83112),e(83710),e(41539),e(39714),e(69600),e(21249),e(57327);var n=e(27484),o=e.n(n),i=e(10285),a=e.n(i),c=e(15177);o().extend(a());r.Z=function(t){var r,e,n,i,a,u,l=t.image,f=void 0!==l&&l,s=t.palette,h=void 0!==s&&s,p=t.exportScaleFactor,y=void 0!==p&&p,d=t.frameRate,v=void 0!==d&&d,m=t.altTitle,g=void 0!==m&&m,b=t.useCurrentDate,w=void 0!==b&&b,E=t.frameName,O=void 0!==E&&E,S=t.paletteShort,x=void 0!==S&&S,L=w?o()():o()(f.created,c.vc),A=!!L.isValid()&&L.format(c.z3),j=x||!!h&&(h.shortName||(e=(r=h).r,n=r.g,i=r.b,a=r.n,u=function(t){return t.toString(16).padStart(2,"0")},[e.map(u).join(""),n.map(u).join(""),i.map(u).join(""),a.map(u).join("")].join("")));return[A,f&&f.title?f.title:g,y?"".concat(y,"x"):null,v?"".concat(v,"fps"):null,O,j].filter(Boolean).join("-")}},84413:function(t,r,e){e(57327),e(41539),e(26699),e(32023),e(21249);var n=e(27484),o=e.n(n),i=e(48766),a=e(15177);r.Z=function(t,r){return function(e){var n=t.filter((function(t){return[i.z2,i.TZ,i.ee,i.Dh,i.Vn,i.oJ,i.Ul,i.R1].includes(t)}));if(n.length){var c,u;if(n.includes(i.Dh)&&0!==e.tags.length)return!1;if(n.includes(i.TZ))if(o()(e.created,a.vc).unix()<=o()().subtract("1","day").unix())return!1;return!(n.includes(i.Vn)&&!r.map((function(t){return t.hash})).includes(e.hash))&&(!(n.includes(i.ee)&&!e.hashes)&&((!n.includes(i.z2)||!e.hashes)&&(!(n.includes(i.oJ)&&!e.tags.includes(i.oJ))&&(!(n.includes(i.Ul)&&(null===(c=e.meta)||void 0===c||!c.comment))&&!(n.includes(i.R1)&&(null===(u=e.meta)||void 0===u||!u.userName))))))}return!0}}},87954:function(t,r,e){e(57327),e(41539),e(26699),e(32023),e(69826);var n=e(48766);r.Z=function(t){return function(r){var e=t.filter((function(t){return![n.z2,n.TZ,n.ee,n.Dh,n.Vn,n.oJ,n.Ul,n.R1].includes(t)}));return!e.length||r.tags.find((function(t){return e.includes(t)}))}}},81477:function(t,r,e){e(57327),e(41539),e(21249),e(2707),e(79753),e(82526),e(41817),e(32165),e(66992),e(78783),e(33948),e(91038),e(47042),e(68309),e(74916);var n=e(49965),o=e(84413),i=e(87954);function a(t){return function(t){if(Array.isArray(t))return c(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||function(t,r){if(!t)return;if("string"==typeof t)return c(t,r);var e=Object.prototype.toString.call(t).slice(8,-1);"Object"===e&&t.constructor&&(e=t.constructor.name);if("Map"===e||"Set"===e)return Array.from(t);if("Arguments"===e||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(e))return c(t,r)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function c(t,r){(null==r||r>t.length)&&(r=t.length);for(var e=0,n=new Array(r);e<r;e++)n[e]=t[e];return n}r.Z=function(t){var r=t.images,e=t.filtersActiveTags,c=t.sortBy,u=t.recentImports;return a(r).map(n.Np).sort((0,n.$b)({sortBy:c})).map(n.fD).filter((0,o.Z)(e,u)).filter((0,i.Z)(e))}},88791:function(t,r,e){e(69826),e(41539),e(68309),e(2707),e(85827),e(74916),e(4723);var n=function(t,r,e){var n=e.find((function(r){return r.id===t}));if(n)return n.name;switch(t){case"hk":return"Hallo Katze!";case"int":return"International Frames (GameBoy Camera)";case"jp":return"Japanese Frames (Pocket Camera)";default:return r}},o=function(t){switch(t){case"int":return"_1";case"jp":return"_2";case"hk":return"_3";default:return t}};r.Z=function(t,r){return t.reduce((function(t,e){var o,i=e.id,a=e.name;try{o=i.match(/^[a-z]+/g)[0]}catch(r){return t}return t.find((function(t){return t.id===o}))||t.push({id:o,name:n(o,a,r)}),t}),[]).sort((function(t,r){var e=t.id,n=r.id,i=o(e),a=o(n);return i>a?1:i<a?-1:0}))}},39324:function(t,r,e){e.d(r,{Z:function(){return p}});e(89554),e(41539),e(54747),e(26699),e(32023),e(57327),e(83710),e(88674),e(69070),e(47941),e(82526),e(38880),e(49337),e(33321);var n=e(23860),o=(e(66992),e(78783),e(33948),e(21249),e(59833)),i=function(t){return Promise.all(t.map((function(t){return o.Rt.getItem(t).then((function(r){return{hash:t,data:r}}))}))).then((function(t){var r={};return t.forEach((function(t){var e=t.hash,n=t.data;r[e]=n})),r}))},a=function(t){return Promise.all(t.map((function(t){return o.$0.getItem(t).then((function(r){return{hash:t,data:r}}))}))).then((function(t){var r={};return t.forEach((function(t){var e=t.hash,n=t.data;r["frame-".concat(e)]=n})),r}))},c=function(t,r){var e=r.images,n=r.imageSelection;switch(t){case"images":return e.map((function(t){return t.hash}));case"selected_images":return n;default:return[]}},u=(e(23157),function(t,r){var e=r.frames,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"";switch(t){case"frames":return e.map((function(t){return t.hash}));case"framegroup":return e.filter((function(t){return t.id.startsWith(n)})).map((function(t){return t.hash}));default:return[]}}),l=e(97377);function f(t,r){var e=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);r&&(n=n.filter((function(r){return Object.getOwnPropertyDescriptor(t,r).enumerable}))),e.push.apply(e,n)}return e}function s(t){for(var r=1;r<arguments.length;r++){var e=null!=arguments[r]?arguments[r]:{};r%2?f(Object(e),!0).forEach((function(r){h(t,r,e[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(e)):f(Object(e)).forEach((function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(e,r))}))}return t}function h(t,r,e){return r in t?Object.defineProperty(t,r,{value:e,enumerable:!0,configurable:!0,writable:!0}):t[r]=e,t}var p=function(t){return function(r){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},o=e.lastUpdateUTC,f=e.selectedFrameGroup,h=t.getState(),p=JSON.parse(localStorage.getItem("gbp-web-state"));delete p.gitStorage,delete p.dropboxStorage,"esp8266"===(0,l.d)().env&&delete p.printerUrl;var y={};switch(n.C.forEach((function(t){var e=t.saveExport,n=t.key;e.includes(r)&&(y[n]=p[n],"images"===n&&"selected_images"===r&&(y[n]=y[n].filter((function(t){var e=t.hash;return c(r,h).includes(e)}))),"frames"===n&&"framegroup"===r&&(y[n]=y[n].filter((function(t){var e=t.hash;return u(r,h,f).includes(e)}))),"frameGroupNames"===n&&"framegroup"===r&&(y[n]=y[n].filter((function(t){return t.id===f}))),"palettes"===n&&(y[n]=p[n].filter((function(t){return!t.isPredefined}))))})),y.lastUpdateUTC=o||Math.floor((new Date).getTime()/1e3),r){case"debug":return Promise.resolve(JSON.stringify({state:p},null,2));case"settings":case"remote":return Promise.resolve(JSON.stringify({state:y},null,2));case"images":case"selected_images":return i(c(r,h)).then((function(t){return JSON.stringify(s({state:y},t),null,2)}));case"frames":case"framegroup":return a(u(r,h,f)).then((function(t){return JSON.stringify(s({state:y},t),null,2)}));case"palettes":return Promise.resolve(y.palettes).then((function(t){return JSON.stringify({state:{palettes:t}},null,2)}));default:return null}}}},39506:function(t,r,e){e(69826),e(41539);r.Z=function(t,r){var e=t.palettes,n=r.hashes,o=r.palette;return n?o:e.find((function(t){return t.shortName===o}))}},16717:function(t,r,e){e(69826),e(41539);r.Z=function(t,r,e){var n=t.images,o=r.r,i=r.g,a=r.b,c=r.n;if(e)return{r:e,g:e,b:e,n:e};var u=n.find((function(t){return t.hash===o})),l=n.find((function(t){return t.hash===i})),f=n.find((function(t){return t.hash===a})),s=n.find((function(t){return t.hash===c}));return{r:u?u.frame:null,g:l?l.frame:null,b:f?f.frame:null,n:s?s.frame:null}}},27918:function(t,r,e){e.d(r,{Gw:function(){return y},c6:function(){return m},op:function(){return d}});e(69826),e(41539),e(26699),e(32023),e(66992),e(33948),e(89554),e(54747),e(57327),e(23157),e(88674),e(82526),e(41817),e(32165),e(78783),e(72443),e(39341),e(73706),e(10408),e(69070),e(78011),e(30489),e(68309),e(68304),e(47042);var n=e(59833),o=e(30661);function i(t){return i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},i(t)}function a(){a=function(){return t};var t={},r=Object.prototype,e=r.hasOwnProperty,n="function"==typeof Symbol?Symbol:{},o=n.iterator||"@@iterator",c=n.asyncIterator||"@@asyncIterator",u=n.toStringTag||"@@toStringTag";function l(t,r,e){return Object.defineProperty(t,r,{value:e,enumerable:!0,configurable:!0,writable:!0}),t[r]}try{l({},"")}catch(t){l=function(t,r,e){return t[r]=e}}function f(t,r,e,n){var o=r&&r.prototype instanceof p?r:p,i=Object.create(o.prototype),a=new L(n||[]);return i._invoke=function(t,r,e){var n="suspendedStart";return function(o,i){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===o)throw i;return j()}for(e.method=o,e.arg=i;;){var a=e.delegate;if(a){var c=O(a,e);if(c){if(c===h)continue;return c}}if("next"===e.method)e.sent=e._sent=e.arg;else if("throw"===e.method){if("suspendedStart"===n)throw n="completed",e.arg;e.dispatchException(e.arg)}else"return"===e.method&&e.abrupt("return",e.arg);n="executing";var u=s(t,r,e);if("normal"===u.type){if(n=e.done?"completed":"suspendedYield",u.arg===h)continue;return{value:u.arg,done:e.done}}"throw"===u.type&&(n="completed",e.method="throw",e.arg=u.arg)}}}(t,e,a),i}function s(t,r,e){try{return{type:"normal",arg:t.call(r,e)}}catch(t){return{type:"throw",arg:t}}}t.wrap=f;var h={};function p(){}function y(){}function d(){}var v={};l(v,o,(function(){return this}));var m=Object.getPrototypeOf,g=m&&m(m(A([])));g&&g!==r&&e.call(g,o)&&(v=g);var b=d.prototype=p.prototype=Object.create(v);function w(t){["next","throw","return"].forEach((function(r){l(t,r,(function(t){return this._invoke(r,t)}))}))}function E(t,r){function n(o,a,c,u){var l=s(t[o],t,a);if("throw"!==l.type){var f=l.arg,h=f.value;return h&&"object"==i(h)&&e.call(h,"__await")?r.resolve(h.__await).then((function(t){n("next",t,c,u)}),(function(t){n("throw",t,c,u)})):r.resolve(h).then((function(t){f.value=t,c(f)}),(function(t){return n("throw",t,c,u)}))}u(l.arg)}var o;this._invoke=function(t,e){function i(){return new r((function(r,o){n(t,e,r,o)}))}return o=o?o.then(i,i):i()}}function O(t,r){var e=t.iterator[r.method];if(void 0===e){if(r.delegate=null,"throw"===r.method){if(t.iterator.return&&(r.method="return",r.arg=void 0,O(t,r),"throw"===r.method))return h;r.method="throw",r.arg=new TypeError("The iterator does not provide a 'throw' method")}return h}var n=s(e,t.iterator,r.arg);if("throw"===n.type)return r.method="throw",r.arg=n.arg,r.delegate=null,h;var o=n.arg;return o?o.done?(r[t.resultName]=o.value,r.next=t.nextLoc,"return"!==r.method&&(r.method="next",r.arg=void 0),r.delegate=null,h):o:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,h)}function S(t){var r={tryLoc:t[0]};1 in t&&(r.catchLoc=t[1]),2 in t&&(r.finallyLoc=t[2],r.afterLoc=t[3]),this.tryEntries.push(r)}function x(t){var r=t.completion||{};r.type="normal",delete r.arg,t.completion=r}function L(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(S,this),this.reset(!0)}function A(t){if(t){var r=t[o];if(r)return r.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var n=-1,i=function r(){for(;++n<t.length;)if(e.call(t,n))return r.value=t[n],r.done=!1,r;return r.value=void 0,r.done=!0,r};return i.next=i}}return{next:j}}function j(){return{value:void 0,done:!0}}return y.prototype=d,l(b,"constructor",d),l(d,"constructor",y),y.displayName=l(d,u,"GeneratorFunction"),t.isGeneratorFunction=function(t){var r="function"==typeof t&&t.constructor;return!!r&&(r===y||"GeneratorFunction"===(r.displayName||r.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,d):(t.__proto__=d,l(t,u,"GeneratorFunction")),t.prototype=Object.create(b),t},t.awrap=function(t){return{__await:t}},w(E.prototype),l(E.prototype,c,(function(){return this})),t.AsyncIterator=E,t.async=function(r,e,n,o,i){void 0===i&&(i=Promise);var a=new E(f(r,e,n,o),i);return t.isGeneratorFunction(e)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},w(b),l(b,u,"Generator"),l(b,o,(function(){return this})),l(b,"toString",(function(){return"[object Generator]"})),t.keys=function(t){var r=[];for(var e in t)r.push(e);return r.reverse(),function e(){for(;r.length;){var n=r.pop();if(n in t)return e.value=n,e.done=!1,e}return e.done=!0,e}},t.values=A,L.prototype={constructor:L,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(x),!t)for(var r in this)"t"===r.charAt(0)&&e.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var r=this;function n(e,n){return a.type="throw",a.arg=t,r.next=e,n&&(r.method="next",r.arg=void 0),!!n}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],a=i.completion;if("root"===i.tryLoc)return n("end");if(i.tryLoc<=this.prev){var c=e.call(i,"catchLoc"),u=e.call(i,"finallyLoc");if(c&&u){if(this.prev<i.catchLoc)return n(i.catchLoc,!0);if(this.prev<i.finallyLoc)return n(i.finallyLoc)}else if(c){if(this.prev<i.catchLoc)return n(i.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return n(i.finallyLoc)}}}},abrupt:function(t,r){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&e.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=r&&r<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=r,i?(this.method="next",this.next=i.finallyLoc,h):this.complete(a)},complete:function(t,r){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&r&&(this.next=r),h},finish:function(t){for(var r=this.tryEntries.length-1;r>=0;--r){var e=this.tryEntries[r];if(e.finallyLoc===t)return this.complete(e.completion,e.afterLoc),x(e),h}},catch:function(t){for(var r=this.tryEntries.length-1;r>=0;--r){var e=this.tryEntries[r];if(e.tryLoc===t){var n=e.completion;if("throw"===n.type){var o=n.arg;x(e)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(t,r,e){return this.delegate={iterator:A(t),resultName:r,nextLoc:e},"next"===this.method&&(this.arg=void 0),h}},t}function c(t,r,e,n,o,i,a){try{var c=t[i](a),u=c.value}catch(t){return void e(t)}c.done?r(u):Promise.resolve(u).then(n,o)}function u(t){return function(){var r=this,e=arguments;return new Promise((function(n,o){var i=t.apply(r,e);function a(t){c(i,n,o,a,u,"next",t)}function u(t){c(i,n,o,a,u,"throw",t)}a(void 0)}))}}var l=function(t,r){return!!r.find((function(r){var e=r.hashes;return!!e&&[e.r,e.g,e.b,e.n].includes(t)}))},f=function(t,r){return!!r.find((function(r){return r.hash===t}))},s=function(t){return function(r){return!l(r,t)&&!f(r,t)}},h=function(t){return function(r){(function(t,r){return!!r.find((function(r){return r.hash===t}))})(r,t)||(0,o.jW)(r)}},p=function(t){return function(r){l(r,t)||f(r,t)||(0,o.IV)(r)}},y=function(){var t=u(a().mark((function t(r){var e,o;return a().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e=r.images,o=r.frames,t.next=3,(0,n.VA)();case 3:return t.next=5,n.Rt.keys();case 5:return t.sent.forEach(p(e)),t.next=9,n.$0.keys();case 9:t.sent.forEach(h(o));case 11:case"end":return t.stop()}}),t)})));return function(r){return t.apply(this,arguments)}}(),d=function(){var t=u(a().mark((function t(r){var e;return a().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,(0,n.VA)();case 2:return t.next=4,n.Rt.keys();case 4:return e=t.sent,t.abrupt("return",e.filter((function(t){return!t.startsWith("dummy")})).filter(s(r)));case 6:case"end":return t.stop()}}),t)})));return function(r){return t.apply(this,arguments)}}(),v=function(t){return function(r){return!t.find((function(t){return t.hash===r}))}},m=function(){var t=u(a().mark((function t(r){var e;return a().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,(0,n.VA)();case 2:return t.next=4,n.$0.keys();case 4:return e=t.sent,t.abrupt("return",e.filter((function(t){return!t.startsWith("dummy")})).filter(v(r)));case 6:case"end":return t.stop()}}),t)})));return function(r){return t.apply(this,arguments)}}()},28014:function(t,r,e){e(69826),e(41539),e(66992),e(88674),e(78783),e(33948);var n=e(30661),o=e(16717),i=e(17036);r.Z=function(t){return function(r,e,a){var c,u=r.hash,l=r.frame,f=r.hashes,s=(null===(c=t.frames.find((function(t){return t.id===l})))||void 0===c?void 0:c.hash)||null;if(!f)return(0,n.zD)(u,s,e,a);var h=(0,o.Z)(t,f,s);return Promise.all([(0,n.zD)(f.r,h.r||s,e,a),(0,n.zD)(f.g,h.g||s,e,a),(0,n.zD)(f.b,h.b||s,e,a),(0,n.zD)(f.n,h.n||s,e,a)]).then(i.Z.rgbnTiles)}}},36965:function(t,r,e){e(41539),e(88674);var n=e(48764).Buffer;r.Z=function(t,r){return new Promise((function(e,o){var i=new FileReader;switch(i.onload=function(t){var i=t.target;if(i.result)return"arrayBuffer"===r?void e(n.from(i.result)):void e(i.result);o(new Error("Filereader has no result"))},i.onerror=function(t){o(t)},r){case"arrayBuffer":i.readAsArrayBuffer(t);break;case"text":i.readAsText(t);break;case"binaryString":i.readAsBinaryString(t);break;case"dataURL":i.readAsDataURL(t);break;default:o(new Error('readAs param missing or unknown type "'.concat(r,'"')))}}))}},93572:function(t,r,e){e(21249),e(69600),e(26699),e(92222),e(69070),e(47941),e(82526),e(57327),e(41539),e(38880),e(89554),e(54747),e(49337),e(33321);function n(t,r){var e=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);r&&(n=n.filter((function(r){return Object.getOwnPropertyDescriptor(t,r).enumerable}))),e.push.apply(e,n)}return e}function o(t){for(var r=1;r<arguments.length;r++){var e=null!=arguments[r]?arguments[r]:{};r%2?n(Object(e),!0).forEach((function(r){i(t,r,e[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(e)):n(Object(e)).forEach((function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(e,r))}))}return t}function i(t,r,e){return r in t?Object.defineProperty(t,r,{value:e,enumerable:!0,configurable:!0,writable:!0}):t[r]=e,t}r.Z=function(t){var r=[];return t.map((function(t){for(var e=t.filename,n=e.split("."),i=n.pop(),a=n.join("."),c=e,u=0;r.includes(c);)u+=1,c="".concat(a,"_(").concat(u,").").concat(i);return r.includes(c)||r.push(c),o(o({},t),{},{uFilename:c})}))}},49965:function(t,r,e){e.d(r,{$b:function(){return f},Np:function(){return u},fD:function(){return l}});e(69070),e(47941),e(82526),e(57327),e(41539),e(38880),e(89554),e(54747),e(49337),e(33321),e(79753),e(41817),e(32165),e(66992),e(78783),e(33948),e(47042),e(68309),e(91038),e(74916);function n(t,r){return function(t){if(Array.isArray(t))return t}(t)||function(t,r){var e=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null==e)return;var n,o,i=[],a=!0,c=!1;try{for(e=e.call(t);!(a=(n=e.next()).done)&&(i.push(n.value),!r||i.length!==r);a=!0);}catch(t){c=!0,o=t}finally{try{a||null==e.return||e.return()}finally{if(c)throw o}}return i}(t,r)||function(t,r){if(!t)return;if("string"==typeof t)return o(t,r);var e=Object.prototype.toString.call(t).slice(8,-1);"Object"===e&&t.constructor&&(e=t.constructor.name);if("Map"===e||"Set"===e)return Array.from(t);if("Arguments"===e||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(e))return o(t,r)}(t,r)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function o(t,r){(null==r||r>t.length)&&(r=t.length);for(var e=0,n=new Array(r);e<r;e++)n[e]=t[e];return n}function i(t,r){var e=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);r&&(n=n.filter((function(r){return Object.getOwnPropertyDescriptor(t,r).enumerable}))),e.push.apply(e,n)}return e}function a(t){for(var r=1;r<arguments.length;r++){var e=null!=arguments[r]?arguments[r]:{};r%2?i(Object(e),!0).forEach((function(r){c(t,r,e[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(e)):i(Object(e)).forEach((function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(e,r))}))}return t}function c(t,r,e){return r in t?Object.defineProperty(t,r,{value:e,enumerable:!0,configurable:!0,writable:!0}):t[r]=e,t}var u=function(t,r){return a(a({},t),{},{sortIndex:r})},l=function(t){return a(a({},t),{},{sortIndex:void 0})},f=function(t){var r=t.sortBy;return function(t,e){if(!r)return 0;var o=n(r.split("_"),2),i=o[0],a=o[1],c=t[i],u=e[i],l="desc"===a?-1:1;return c&&u?c>u?l:c<u?-l:t.sortIndex<e.sortIndex?l:-l:0}}},30661:function(t,r,e){e.d(r,{aj:function(){return s},IV:function(){return y},jW:function(){return d},zD:function(){return p},a1:function(){return h}});e(66992),e(41539),e(88674),e(78783),e(33948),e(69600),e(21249),e(74916),e(15306),e(82526),e(41817),e(32165),e(72443),e(39341),e(73706),e(10408),e(69070),e(78011),e(30489),e(89554),e(54747),e(68309),e(68304),e(47042),e(73210);var n=e(41027),o=function(t){var r="\nThe following hash is missing in\nyour indexedDb:\n".concat(t,"\n\nEither you imported a debug dump\nor your browser decided to do a\ncleanup.\n\nThis image might be able to be\nrecovered if you have set up git\nor dropbox sync.\n").trim();return(0,n.Z)(r)},i=e(2738),a=e(59833);function c(t){return c="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},c(t)}function u(){u=function(){return t};var t={},r=Object.prototype,e=r.hasOwnProperty,n="function"==typeof Symbol?Symbol:{},o=n.iterator||"@@iterator",i=n.asyncIterator||"@@asyncIterator",a=n.toStringTag||"@@toStringTag";function l(t,r,e){return Object.defineProperty(t,r,{value:e,enumerable:!0,configurable:!0,writable:!0}),t[r]}try{l({},"")}catch(t){l=function(t,r,e){return t[r]=e}}function f(t,r,e,n){var o=r&&r.prototype instanceof p?r:p,i=Object.create(o.prototype),a=new L(n||[]);return i._invoke=function(t,r,e){var n="suspendedStart";return function(o,i){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===o)throw i;return j()}for(e.method=o,e.arg=i;;){var a=e.delegate;if(a){var c=O(a,e);if(c){if(c===h)continue;return c}}if("next"===e.method)e.sent=e._sent=e.arg;else if("throw"===e.method){if("suspendedStart"===n)throw n="completed",e.arg;e.dispatchException(e.arg)}else"return"===e.method&&e.abrupt("return",e.arg);n="executing";var u=s(t,r,e);if("normal"===u.type){if(n=e.done?"completed":"suspendedYield",u.arg===h)continue;return{value:u.arg,done:e.done}}"throw"===u.type&&(n="completed",e.method="throw",e.arg=u.arg)}}}(t,e,a),i}function s(t,r,e){try{return{type:"normal",arg:t.call(r,e)}}catch(t){return{type:"throw",arg:t}}}t.wrap=f;var h={};function p(){}function y(){}function d(){}var v={};l(v,o,(function(){return this}));var m=Object.getPrototypeOf,g=m&&m(m(A([])));g&&g!==r&&e.call(g,o)&&(v=g);var b=d.prototype=p.prototype=Object.create(v);function w(t){["next","throw","return"].forEach((function(r){l(t,r,(function(t){return this._invoke(r,t)}))}))}function E(t,r){function n(o,i,a,u){var l=s(t[o],t,i);if("throw"!==l.type){var f=l.arg,h=f.value;return h&&"object"==c(h)&&e.call(h,"__await")?r.resolve(h.__await).then((function(t){n("next",t,a,u)}),(function(t){n("throw",t,a,u)})):r.resolve(h).then((function(t){f.value=t,a(f)}),(function(t){return n("throw",t,a,u)}))}u(l.arg)}var o;this._invoke=function(t,e){function i(){return new r((function(r,o){n(t,e,r,o)}))}return o=o?o.then(i,i):i()}}function O(t,r){var e=t.iterator[r.method];if(void 0===e){if(r.delegate=null,"throw"===r.method){if(t.iterator.return&&(r.method="return",r.arg=void 0,O(t,r),"throw"===r.method))return h;r.method="throw",r.arg=new TypeError("The iterator does not provide a 'throw' method")}return h}var n=s(e,t.iterator,r.arg);if("throw"===n.type)return r.method="throw",r.arg=n.arg,r.delegate=null,h;var o=n.arg;return o?o.done?(r[t.resultName]=o.value,r.next=t.nextLoc,"return"!==r.method&&(r.method="next",r.arg=void 0),r.delegate=null,h):o:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,h)}function S(t){var r={tryLoc:t[0]};1 in t&&(r.catchLoc=t[1]),2 in t&&(r.finallyLoc=t[2],r.afterLoc=t[3]),this.tryEntries.push(r)}function x(t){var r=t.completion||{};r.type="normal",delete r.arg,t.completion=r}function L(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(S,this),this.reset(!0)}function A(t){if(t){var r=t[o];if(r)return r.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var n=-1,i=function r(){for(;++n<t.length;)if(e.call(t,n))return r.value=t[n],r.done=!1,r;return r.value=void 0,r.done=!0,r};return i.next=i}}return{next:j}}function j(){return{value:void 0,done:!0}}return y.prototype=d,l(b,"constructor",d),l(d,"constructor",y),y.displayName=l(d,a,"GeneratorFunction"),t.isGeneratorFunction=function(t){var r="function"==typeof t&&t.constructor;return!!r&&(r===y||"GeneratorFunction"===(r.displayName||r.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,d):(t.__proto__=d,l(t,a,"GeneratorFunction")),t.prototype=Object.create(b),t},t.awrap=function(t){return{__await:t}},w(E.prototype),l(E.prototype,i,(function(){return this})),t.AsyncIterator=E,t.async=function(r,e,n,o,i){void 0===i&&(i=Promise);var a=new E(f(r,e,n,o),i);return t.isGeneratorFunction(e)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},w(b),l(b,a,"Generator"),l(b,o,(function(){return this})),l(b,"toString",(function(){return"[object Generator]"})),t.keys=function(t){var r=[];for(var e in t)r.push(e);return r.reverse(),function e(){for(;r.length;){var n=r.pop();if(n in t)return e.value=n,e.done=!1,e}return e.done=!0,e}},t.values=A,L.prototype={constructor:L,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(x),!t)for(var r in this)"t"===r.charAt(0)&&e.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var r=this;function n(e,n){return a.type="throw",a.arg=t,r.next=e,n&&(r.method="next",r.arg=void 0),!!n}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],a=i.completion;if("root"===i.tryLoc)return n("end");if(i.tryLoc<=this.prev){var c=e.call(i,"catchLoc"),u=e.call(i,"finallyLoc");if(c&&u){if(this.prev<i.catchLoc)return n(i.catchLoc,!0);if(this.prev<i.finallyLoc)return n(i.finallyLoc)}else if(c){if(this.prev<i.catchLoc)return n(i.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return n(i.finallyLoc)}}}},abrupt:function(t,r){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&e.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=r&&r<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=r,i?(this.method="next",this.next=i.finallyLoc,h):this.complete(a)},complete:function(t,r){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&r&&(this.next=r),h},finish:function(t){for(var r=this.tryEntries.length-1;r>=0;--r){var e=this.tryEntries[r];if(e.finallyLoc===t)return this.complete(e.completion,e.afterLoc),x(e),h}},catch:function(t){for(var r=this.tryEntries.length-1;r>=0;--r){var e=this.tryEntries[r];if(e.tryLoc===t){var n=e.completion;if("throw"===n.type){var o=n.arg;x(e)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(t,r,e){return this.delegate={iterator:A(t),resultName:r,nextLoc:e},"next"===this.method&&(this.arg=void 0),h}},t}function l(t,r,e,n,o,i,a){try{var c=t[i](a),u=c.value}catch(t){return void e(t)}c.done?r(u):Promise.resolve(u).then(n,o)}function f(t){return function(){var r=this,e=arguments;return new Promise((function(n,o){var i=t.apply(r,e);function a(t){l(i,n,o,a,c,"next",t)}function c(t){l(i,n,o,a,c,"throw",t)}a(void 0)}))}}var s=function(){var t=f(u().mark((function t(r){var n,o,i,a,c,l,f;return u().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.e(705).then(e.t.bind(e,40705,23));case 2:return n=t.sent,o=n.default,t.next=6,e.e(591).then(e.t.bind(e,99591,23));case 6:return i=t.sent,a=i.default,c=r.map((function(t){return t.replace(/ /gi,"").toUpperCase()})).join("\n"),l=a.deflate(c,{to:"string",strategy:1,level:8}),f=o(l),t.abrupt("return",{dataHash:f,compressed:l});case 12:case"end":return t.stop()}}),t)})));return function(r){return t.apply(this,arguments)}}(),h=function(){var t=f(u().mark((function t(r){var e,n,o;return u().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,s(r);case 2:return e=t.sent,n=e.dataHash,o=e.compressed,t.next=7,a.Rt.setItem(n,o);case 7:return t.abrupt("return",n);case 8:case"end":return t.stop()}}),t)})));return function(r){return t.apply(this,arguments)}}(),p=function(t,r,n){var c=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return t?e.e(591).then(e.t.bind(e,99591,23)).then((function(r){var e=r.default;return a.Rt.getItem(t).then((function(t){return e.inflate(t,{to:"string"}).split("\n")})).catch((function(){return"function"==typeof c&&c(t),n?[]:o(t)}))})).then((function(t){return r?(0,i.Z)(t,r):t})):Promise.resolve(null)},y=function(t){a.Rt.removeItem(t)},d=function(t){a.$0.removeItem(t)}},41027:function(t,r,e){e.d(r,{Z:function(){return f}});e(84944),e(33792),e(21249),e(74916),e(4723),e(66528),e(92222),e(79753),e(82526),e(41817),e(41539),e(32165),e(66992),e(78783),e(33948),e(91038),e(47042),e(68309),e(83710),e(39714),e(69600);function n(t){return function(t){if(Array.isArray(t))return o(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||function(t,r){if(!t)return;if("string"==typeof t)return o(t,r);var e=Object.prototype.toString.call(t).slice(8,-1);"Object"===e&&t.constructor&&(e=t.constructor.name);if("Map"===e||"Set"===e)return Array.from(t);if("Arguments"===e||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(e))return o(t,r)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function o(t,r){(null==r||r>t.length)&&(r=t.length);for(var e=0,n=new Array(r);e<r;e++)n[e]=t[e];return n}var i={"":"006666666600FFFF"," ":"FFFFFFFFFFFFFFFF",0:"FFDDAAAAAADDFFFF",1:"FFDD99DDDDDDFFFF",2:"FF99EEDDBB88FFFF",3:"FF99EE99EE99FFFF",4:"FFDDBBBB88EEFFFF",5:"FF88BB99EE99FFFF",6:"FFCCBB99AADDFFFF",7:"FF88EEDDBBBBFFFF",8:"FFDDAADDAADDFFFF",9:"FFDDAACCEE99FFFF",a:"FFDDAAAA88AAFFFF",b:"FF99AA99AA99FFFF",c:"FFCCBBBBBBCCFFFF",d:"FF99AAAAAA99FFFF",e:"FF88BB99BB88FFFF",f:"FF88BB99BBBBFFFF",g:"FFCCBBAAAACCFFFF",h:"FFAAAA88AAAAFFFF",i:"FF88DDDDDD88FFFF",j:"FF99DDDDDDBBFFFF",k:"FFAAAA99AAAAFFFF",l:"FFBBBBBBBB88FFFF",m:"FFAA888AAAAAFFFF",n:"FFAA8A888AAAFFFF",o:"FFDDAAAAAADDFFFF",p:"FF99AA99BBBBFFFF",q:"FFDDAAAAAACCFFFF",r:"FF99AA99AAAAFFFF",s:"FFCCBBDDEE99FFFF",t:"FF88DDDDDDDDFFFF",u:"FFAAAAAAAACCFFFF",v:"FFAAAAAAAADDFFFF",w:"FFAAAA8A88AAFFFF",x:"FFAAAADDAAAAFFFF",y:"FFAAAADDDDDDFFFF",z:"FF88EEDDBB88FFFF","":"AADDAAAA88AAFFFF","":"AADDAAAAAADDFFFF","":"AAAFAAAAAACCFFFF","":"FF99AA99AA99BBFF",".":"FFFFFFFFFFDDFFFF","!":"DDDDDDDDFFDDFFFF","?":"DDAAEEDDFFDDFFFF","-":"FFFFFF88FFFFFFFF",_:"FFFFFFFFFF88FFFF",":":"FFFFDDFFDDFFFFFF"},a=function(t){var r=[].concat(n(t.toString(10).toLowerCase()),[" "," "]),e=r.shift(),o=r.shift(),a=i[e]||i[""],c=i[o]||i[""];return n(Array(16)).map((function(t,r){return"".concat(a[r]).concat(c[r])})).join("")};function c(t){return function(t){if(Array.isArray(t))return u(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||function(t,r){if(!t)return;if("string"==typeof t)return u(t,r);var e=Object.prototype.toString.call(t).slice(8,-1);"Object"===e&&t.constructor&&(e=t.constructor.name);if("Map"===e||"Set"===e)return Array.from(t);if("Arguments"===e||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(e))return u(t,r)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function u(t,r){(null==r||r>t.length)&&(r=t.length);for(var e=0,n=new Array(r);e<r;e++)n[e]=t[e];return n}var l="FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFF\n",f=function(t){var r=[],e=t.split("\n").map((function(t){return t.match(/.{1,32}/g)})).flat().map((function(t){return t||""})).map((function(){return(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"").padEnd(32," ")})).map((function(t){return t.match(/.{1,2}/g).map((function(t){return a(t)}))})).map((function(t){return[l,l].concat(c(t),[l,l])})).flat();for(r.push.apply(r,c(c(Array(40)).map((function(){return l})))),r.push.apply(r,c(e));r.length<360;)r.push(l);return r}},18417:function(t,r){r.Z=function(t){var r=t-("keep"===(arguments.length>1&&void 0!==arguments[1]?arguments[1]:"keep")?0:20);if(r<40)return!0;if(r>=320)return!0;switch(r%20){case 0:case 1:case 18:case 19:return!0;default:return!1}}},81451:function(t,r,e){e(57327),e(41539),e(34553);r.Z=function(t){return function(r){return r.filter((function(e,n){return r.findIndex((function(r){return r[t]===e[t]}))===n}))}}},31852:function(t,r,e){e(57327),e(41539),e(34553);r.Z=function(t){return t.filter((function(r,e){return t.findIndex((function(t){return t===r}))===e}))}}}]);