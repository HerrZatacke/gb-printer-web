(window.webpackJsonp=window.webpackJsonp||[]).push([[3],{116:function(t,e,r){"use strict";r.d(e,"a",(function(){return n})),r.d(e,"c",(function(){return a})),r.d(e,"b",(function(){return o})),r.d(e,"d",(function(){return i})),r.d(e,"e",(function(){return p})),r.d(e,"g",(function(){return u})),r.d(e,"h",(function(){return l})),r.d(e,"f",(function(){return f})),r.d(e,"i",(function(){return s}));r(93);var n="YYYY-MM-DD HH:mm:ss",a="YYYY-MM-DDTHH:mm",o="YYYYMMDD-HHmmss",i="DD.MM.YYYY HH:mm",c=[0,85,170,255],u='!{"command":"INIT"}',l='!{"command":"DATA", "compressed":0, "more":1}',f='!{"command":"DATA","compressed":0,"more":0}',s='!{"command":"PRNT","sheets":1,"margin_upper":1,"margin_lower":3,"pallet":228,"density":64 }',p={r:c.slice(),g:c.slice(),b:c.slice(),n:c.slice()}},128:function(t,e,r){"use strict";r.d(e,"c",(function(){return p})),r.d(e,"b",(function(){return y})),r.d(e,"a",(function(){return d}));r(124),r(97),r(19),r(20),r(104),r(126),r(123),r(164),r(83),r(89),r(90),r(99),r(134),r(95),r(96),r(84),r(93),r(135),r(86),r(92),r(87),r(88),r(129),r(216),r(85);function n(t){return function(t){if(Array.isArray(t))return a(t)}(t)||function(t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(t))return Array.from(t)}(t)||function(t,e){if(!t)return;if("string"==typeof t)return a(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);"Object"===r&&t.constructor&&(r=t.constructor.name);if("Map"===r||"Set"===r)return Array.from(t);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return a(t,e)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function a(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}var o={"":"006666666600FFFF"," ":"FFFFFFFFFFFFFFFF",0:"FFDDAAAAAADDFFFF",1:"FFDD99DDDDDDFFFF",2:"FF99EEDDBB88FFFF",3:"FF99EE99EE99FFFF",4:"FFDDBBBB88EEFFFF",5:"FF88BB99EE99FFFF",6:"FFCCBB99AADDFFFF",7:"FF88EEDDBBBBFFFF",8:"FFDDAADDAADDFFFF",9:"FFDDAACCEE99FFFF",a:"FFDDAAAA88AAFFFF",b:"FF99AA99AA99FFFF",c:"FFCCBBBBBBCCFFFF",d:"FF99AAAAAA99FFFF",e:"FF88BB99BB88FFFF",f:"FF88BB99BBBBFFFF",g:"FFCCBBAAAACCFFFF",h:"FFAAAA88AAAAFFFF",i:"FF88DDDDDD88FFFF",j:"FF99DDDDDDBBFFFF",k:"FFAAAA99AAAAFFFF",l:"FFBBBBBBBB88FFFF",m:"FFAA888AAAAAFFFF",n:"FFAA8A888AAAFFFF",o:"FFDDAAAAAADDFFFF",p:"FF99AA99BBBBFFFF",q:"FFDDAAAAAACCFFFF",r:"FF99AA99AAAAFFFF",s:"FFCCBBDDEE99FFFF",t:"FF88DDDDDDDDFFFF",u:"FFAAAAAAAACCFFFF",v:"FFAAAAAAAADDFFFF",w:"FFAAAA8A88AAFFFF",x:"FFAAAADDAAAAFFFF",y:"FFAAAADDDDDDFFFF",z:"FF88EEDDBB88FFFF","ä":"AADDAAAA88AAFFFF","ö":"AADDAAAAAADDFFFF","ü":"AAAFAAAAAACCFFFF","ß":"FF99AA99AA99BBFF",".":"FFFFFFFFFFDDFFFF","!":"DDDDDDDDFFDDFFFF","?":"DDAAEEDDFFDDFFFF","-":"FFFFFF88FFFFFFFF",_:"FFFFFFFFFF88FFFF",":":"FFFFDDFFDDFFFFFF"},i=function(t){var e=[].concat(n(t.toString(10).toLowerCase()),[" "," "]),r=e.shift(),a=e.shift(),i=o[r]||o[""],c=o[a]||o[""];return n(Array(16)).map((function(t,e){return"".concat(i[e]).concat(c[e])})).join("")};function c(t){return function(t){if(Array.isArray(t))return u(t)}(t)||function(t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(t))return Array.from(t)}(t)||function(t,e){if(!t)return;if("string"==typeof t)return u(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);"Object"===r&&t.constructor&&(r=t.constructor.name);if("Map"===r||"Set"===r)return Array.from(t);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return u(t,e)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function u(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}var l="FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFF\n",f=function(t){var e=[],r="The following hash is missing in your localStorage:\n".concat(t,"\n\nMaybe you imported a debug dump?").split("\n").map((function(t){return t.match(/.{1,32}/g)})).flat().map((function(t){return t||""})).map((function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return t.padEnd(32," ")})).map((function(t){return t.match(/.{1,2}/g).map((function(t){return i(t)}))})).map((function(t){return[l,l].concat(c(t),[l,l])})).flat();for(e.push.apply(e,c(c(Array(40)).map((function(){return l})))),e.push.apply(e,c(r));e.length<360;)e.push(l);return e},s=r(219),p=function(t){return r.e(10).then(r.t.bind(null,528,7)).then((function(e){var n=e.default;return r.e(11).then(r.t.bind(null,237,7)).then((function(e){var r=e.default,a=t.map((function(t){return t.replace(/ /gi,"")})).join("\n"),o=r.deflate(a,{to:"string",strategy:1,level:8}),i=n(o);try{localStorage.setItem("gbp-web-".concat(i),o)}catch(t){localStorage.removeItem("gbp-web-".concat(i),o),i="base64-".concat(i),localStorage.setItem("gbp-web-".concat(i),btoa(o))}return i}))}))},y=function(t,e,n){return t?r.e(11).then(r.t.bind(null,237,7)).then((function(e){var r=e.default;try{var a;return a=t.startsWith("base64-")?atob(localStorage.getItem("gbp-web-".concat(t))):localStorage.getItem("gbp-web-".concat(t)),r.inflate(a,{to:"string"}).split("\n")}catch(e){return n?[]:f(t)}})).then((function(t){return e?Object(s.a)(t,e):t})):Promise.resolve(null)},d=function(t){localStorage.removeItem("gbp-web-".concat(t))}},136:function(t,e,r){"use strict";r(83),r(89),r(90),r(95),r(96),r(84),r(97),r(93),r(86),r(92),r(117),r(100),r(108),r(118),r(119),r(19),r(120),r(334),r(87),r(88),r(145),r(85);function n(t){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function a(t){return function(t){if(Array.isArray(t))return c(t)}(t)||function(t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(t))return Array.from(t)}(t)||i(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function o(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(t)))return;var r=[],n=!0,a=!1,o=void 0;try{for(var i,c=t[Symbol.iterator]();!(n=(i=c.next()).done)&&(r.push(i.value),!e||r.length!==e);n=!0);}catch(t){a=!0,o=t}finally{try{n||null==c.return||c.return()}finally{if(a)throw o}}return r}(t,e)||i(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function i(t,e){if(t){if("string"==typeof t)return c(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?c(t,e):void 0}}function c(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function u(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function l(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function f(t,e,r){return(f="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=d(t)););return t}(t,e);if(n){var a=Object.getOwnPropertyDescriptor(n,e);return a.get?a.get.call(r):a.value}})(t,e,r||t)}function s(t,e){return(s=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function p(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var r,n=d(t);if(e){var a=d(this).constructor;r=Reflect.construct(n,arguments,a)}else r=n.apply(this,arguments);return y(this,r)}}function y(t,e){return!e||"object"!==n(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function d(t){return(d=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var b=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&s(t,e)}(c,t);var e,r,n,i=p(c);function c(){return u(this,c),i.apply(this,arguments)}return e=c,n=[{key:"rgbnTiles",value:function(t){var e=o(t,4),r=e[0],n=e[1],i=e[2],c=e[3];return a(Array(360)).map((function(t,e){return{r:r?r[e]:"".padStart(32,"0"),g:n?n[e]:"".padStart(32,"0"),b:i?i[e]:"".padStart(32,"0"),n:c?c[e]:"".padStart(32,"0")}}))}}],(r=[{key:"setPalette",value:function(t){return!!t&&JSON.stringify(this.palette)!==JSON.stringify(t)&&(this.palette=t,!0)}},{key:"decodeTile",value:function(t){var e=t.r,r=t.g,n=t.b,a=t.n;return{r:f(d(c.prototype),"decodeTile",this).call(this,e),g:f(d(c.prototype),"decodeTile",this).call(this,r),b:f(d(c.prototype),"decodeTile",this).call(this,n),n:f(d(c.prototype),"decodeTile",this).call(this,a)}}},{key:"getRGBValue",value:function(t,e,r){var n=t.r,a=t.g,o=t.b,i=t.n;if(this.lockFrame&&this.tileIndexIsFramePart(r))return f(d(c.prototype),"getRGBValue",this).call(this,i,e,r);var u=this.palette.n[3-i[e]];return{r:this.palette.r[3-n[e]]*u/255,g:this.palette.g[3-a[e]]*u/255,b:this.palette.b[3-o[e]]*u/255}}},{key:"getHeight",value:function(){return 144}}])&&l(e.prototype,r),n&&l(e,n),c}(r(167).a);e.a=b},155:function(t,e,r){"use strict";r(106);e.a=function(t,e,r){var n=e.r,a=e.g,o=e.b,i=e.n;if(r)return{r:r,g:r,b:r,n:r};var c=t.images.find((function(t){return t.hash===n})),u=t.images.find((function(t){return t.hash===a})),l=t.images.find((function(t){return t.hash===o})),f=t.images.find((function(t){return t.hash===i}));return{r:c?c.frame:null,g:u?u.frame:null,b:l?l.frame:null,n:f?f.frame:null}}},156:function(t,e,r){"use strict";r(83),r(89),r(90),r(94),r(95),r(96),r(84),r(93),r(154),r(86),r(92),r(19),r(87),r(88),r(85);var n=r(227),a=r(228);function o(t){return function(t){if(Array.isArray(t))return i(t)}(t)||function(t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(t))return Array.from(t)}(t)||function(t,e){if(!t)return;if("string"==typeof t)return i(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);"Object"===r&&t.constructor&&(r=t.constructor.name);if("Map"===r||"Set"===r)return Array.from(t);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return i(t,e)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function i(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}e.a=function(t){var e=t.images,r=t.filter.activeTags,i=t.sortBy;return o(e).sort(Object(n.a)({sortBy:i})).filter(Object(a.a)(r))}},160:function(t,e,r){"use strict";r(94),r(143);e.a=function(t){return t.filter((function(e,r){return t.findIndex((function(t){return t===e}))===r}))}},161:function(t,e,r){"use strict";r(99),r(266),r(104),r(87),r(213),r(129),r(144);e.a=function(t,e){if(!t.trim())return"";var r=!!t.match(new RegExp("^".concat(e,"(s)?:\\/\\/"),"gi"));return"".concat(r?"":"".concat(e,"://")).concat(t).concat(t.endsWith("/")?"":"/")}},163:function(t,e,r){"use strict";r(84),r(19),r(20),r(88),r(85);var n=r(128),a=r(155);e.a=function(t,e,r){var o=t.hash,i=t.frame,c=t.hashes;if(!c)return Object(n.b)(o,i,r);var u=Object(a.a)(e,c,i);return Promise.all([Object(n.b)(c.r,u.r||i,r),Object(n.b)(c.g,u.g||i,r),Object(n.b)(c.b,u.b||i,r),Object(n.b)(c.n,u.n||i,r)])}},165:function(t,e,r){"use strict";r.d(e,"a",(function(){return o})),r.d(e,"b",(function(){return a}));r(220),r(94),r(124),r(97),r(93),r(19),r(20),r(104),r(126),r(123);var n=r(221),a=function(t,e){return r.e(11).then(r.t.bind(null,237,7)).then((function(r){var a=r.default,o=e.filter((function(t,e){return Object(n.a)(e)})).map((function(t){return t.replace(/ /gi,"")})).join("\n"),i=a.deflate(o,{to:"string",strategy:1,level:8});try{localStorage.setItem("gbp-web-frame-".concat(t),i)}catch(e){localStorage.removeItem("gbp-web-frame-".concat(t),i),localStorage.setItem("gbp-web-frame-base64-".concat(t),btoa(i))}return!0}))},o=function(t){if(!t)return Promise.resolve(null);var e=localStorage.getItem("gbp-web-frame-".concat(t));return e||(e=localStorage.getItem("gbp-web-frame-base64-".concat(t)))&&(e=atob(e)),e?r.e(11).then(r.t.bind(null,237,7)).then((function(t){var r=t.default;try{var n=r.inflate(e,{to:"string"}).split("\n");return{upper:n.slice(0,40),left:Array(14).fill(0).map((function(t,e){return n.slice(4*e+40,4*e+42)})),right:Array(14).fill(0).map((function(t,e){return n.slice(4*e+42,4*e+44)})),lower:n.slice(96,136)}}catch(t){return null}})):Promise.resolve(null)}},166:function(t,e,r){"use strict";r(106);e.a=function(t,e){var r=t.palettes,n=e.hashes,a=e.palette;return n?a:r.find((function(t){return t.shortName===a}))}},167:function(t,e,r){"use strict";r(99),r(94),r(101),r(84),r(97),r(335),r(100),r(19),r(146),r(104),r(216),r(126),r(338),r(343),r(345),r(346),r(347),r(348),r(349),r(350),r(351),r(352),r(353),r(354),r(355),r(357),r(358),r(359),r(360),r(361),r(362),r(363),r(364),r(365),r(366),r(367),r(102);var n=r(221);function a(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}var o="FF FF FF FF FF FF FF FF FF FF FF FF FF FF FF FF",i=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.canvas=null,this.tiles=[],this.colors=[],this.rawImageData=[],this.lockFrame=!1,this.invertPalette=!1,this.bwPalette=[16777215,11184810,5592405,0],this.tileIndexIsFramePart=n.a}var e,r,i;return e=t,(r=[{key:"update",value:function(t){var e=this,r=t.canvas,n=void 0===r?null:r,a=t.tiles,o=void 0===a?[]:a,i=t.palette,c=void 0===i?[]:i,u=t.lockFrame,l=void 0!==u&&u,f=t.invertPalette,s=void 0!==f&&f,p=this.setCanvas(n),y=this.setPalette(c,s),d=this.setLockFrame(l);(p||y||d||!this.tiles.length)&&(this.tiles=[]);var b=this.setTiles(o),h=this.getHeight();if(0!==h){if(this.canvas){if(this.canvas.height!==h||!this.rawImageData.length){this.canvas.height=h;var m=new Uint8ClampedArray(160*h*4);this.rawImageData.forEach((function(t,e){m[e]=t})),this.rawImageData=m}b.forEach((function(t){var r=t.index,n=t.newTile;e.renderTile(r,n)})),this.updateCanvas(h)}}else this.canvas.height=0}},{key:"updateCanvas",value:function(t){var e,r=this.canvas.getContext("2d");try{e=new ImageData(this.rawImageData,160,t)}catch(n){e=r.getImageData(0,0,160,t),this.rawImageData.forEach((function(t,r){e.data[r]=t}))}r.putImageData(e,0,0)}},{key:"getScaledCanvas",value:function(t){var e=this,r=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=4,a=this.getHeight()-(r?8*n:0),o=160-(r?8*n:0),i=r?20-n:20,c=document.createElement("canvas"),u=c.getContext("2d");return c.width=o*t,c.height=a*t,this.tiles.map((function(t,n){return r&&e.tileIndexIsFramePart(n)?null:t})).filter(Boolean).forEach((function(r,n){e.paintTileScaled(e.decodeTile(r),n,u,t,i)})),c}},{key:"setCanvas",value:function(t){return this.canvas!==t&&(this.canvas=t,!0)}},{key:"setPalette",value:function(t,e){return(JSON.stringify(this.colors)!==JSON.stringify(t)||this.invertPalette!==e)&&(this.colors=t,this.invertPalette=e,this.colorData=this.colors.map((function(t){return 7!==t.length?null:parseInt(t.substring(1),16)})),!0)}},{key:"setLockFrame",value:function(t){return t!==this.lockFrame&&(this.lockFrame=t,!0)}},{key:"setTiles",value:function(t){var e=this,r=t.map((function(t,r){return t!==e.tiles[r]?{index:r,newTile:t}:null})).filter(Boolean);return this.tiles=t,r}},{key:"renderTile",value:function(t,e){var r=this.decodeTile(e);this.paintTile(r,t)}},{key:"decodeTile",value:function(){for(var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:o,e=t.replace(/[^0-9A-F]/gi,"").padEnd(32,"f"),r=new Array(16),n=0;n<r.length;n+=1)r[n]=parseInt(e.substr(2*n,2),16);for(var a=new Array(64),i=0;i<8;i+=1)for(var c=0;c<8;c+=1){var u=r[2*i+1]>>7-c&1,l=r[2*i]>>7-c&1;a[8*i+c]=u<<1|l}return a}},{key:"getRGBValue",value:function(t,e,r){var n=this.lockFrame&&this.tileIndexIsFramePart(r)?this.bwPalette:this.colorData,a=this.invertPalette?n[3-t[e]]:n[t[e]];return{r:(16711680&a)>>16,g:(65280&a)>>8,b:255&a}}},{key:"paintTile",value:function(t,e){for(var r=e%20*8,n=8*Math.floor(e/20),a=0;a<8;a+=1)for(var o=0;o<8;o+=1){var i=4*(r+a+160*(n+o)),c=this.getRGBValue(t,8*o+a,e);this.rawImageData[i]=c.r,this.rawImageData[i+1]=c.g,this.rawImageData[i+2]=c.b,this.rawImageData[i+3]=255}}},{key:"paintTileScaled",value:function(t,e,r,n,a){for(var o=e%a*8*n,i=8*Math.floor(e/a)*n,c=0;c<8;c+=1)for(var u=0;u<8;u+=1){var l=this.getRGBValue(t,8*u+c,e);r.fillStyle="rgb(".concat(l.r,", ").concat(l.g,", ").concat(l.b,")"),r.fillRect(o+c*n,i+u*n,n+1,n+1)}}},{key:"getHeight",value:function(){return 8*Math.ceil(this.tiles.length/20)}}])&&a(e.prototype,r),i&&a(e,i),t}();e.a=i},182:function(t,e,r){"use strict";r.d(e,"a",(function(){return o})),r.d(e,"b",(function(){return a}));r(101),r(102);var n=r(268),a=[{key:"socketUrl",saveLocally:!0,saveRemote:!1,saveExport:["settings"],value:"localhost:3001"},{key:"printerUrl",saveLocally:!0,saveRemote:!1,saveExport:["settings"],value:""},{key:"activePalette",saveLocally:!0,saveRemote:!1,saveExport:["settings","remote"],value:"bw"},{key:"images",saveLocally:!0,saveRemote:!1,saveExport:["images","remote"],value:[]},{key:"galleryView",saveLocally:!0,saveRemote:!1,saveExport:["settings"],value:"1x"},{key:"exportScaleFactors",saveLocally:!0,saveRemote:!1,saveExport:["settings","remote"],value:[4]},{key:"exportFileTypes",saveLocally:!0,saveRemote:!1,saveExport:["settings","remote"],value:["png"]},{key:"globalIndex",saveLocally:!0,saveRemote:!1,saveExport:["settings","remote"],value:1},{key:"pageSize",saveLocally:!0,saveRemote:!1,saveExport:["settings","remote"],value:15},{key:"imageSelection",saveLocally:!0,saveRemote:!1,saveExport:[],value:[]},{key:"rgbnImages",saveLocally:!0,saveRemote:!1,saveExport:[],value:{}},{key:"editImage",saveLocally:!0,saveRemote:!1,saveExport:[],value:{}},{key:"videoParams",saveLocally:!0,saveRemote:!1,saveExport:["settings","remote"],value:{}},{key:"filter",saveLocally:!0,saveRemote:!1,saveExport:[],value:{}},{key:"savFrameTypes",saveLocally:!0,saveRemote:!1,saveExport:["settings","remote"],value:"int"},{key:"sortBy",saveLocally:!0,saveRemote:!1,saveExport:["settings","remote"],value:"created_asc"},{key:"exportCropFrame",saveLocally:!0,saveRemote:!1,saveExport:["settings","remote"],value:!1},{key:"hideDates",saveLocally:!0,saveRemote:!1,saveExport:["settings","remote"],value:!1},{key:"palettes",saveLocally:!1,saveRemote:!1,saveExport:[],value:r.n(n).a},{key:"framesMessage",saveLocally:!0,saveRemote:!1,saveExport:["settings","remote"],value:0},{key:"frames",saveLocally:!0,saveRemote:!1,saveExport:["frames","remote"],value:[]},{key:"gitStorage",saveLocally:!0,saveRemote:!1,saveExport:[],value:{use:!1,owner:"",repo:"",branch:"",token:"",throttle:"330"}}],o={};a.forEach((function(t){var e=t.key,r=t.value;o[e]=r}))},186:function(t,e,r){"use strict";r(94),r(124),r(97),r(86),r(19),r(87),r(145);var n=r(125),a=r.n(n),o=r(187),i=r.n(o),c=r(116);a.a.extend(i.a);e.a=function(t){var e,r,n,o,i,u,l=t.image,f=void 0!==l&&l,s=t.palette,p=void 0!==s&&s,y=t.exportScaleFactor,d=void 0!==y&&y,b=t.frameRate,h=void 0!==b&&b,m=t.altTitle,g=void 0!==m&&m,v=t.useCurrentDate,A=void 0!==v&&v,O=t.frameName,E=void 0!==O&&O,F=t.paletteShort,S=void 0!==F&&F,w=A?a()():a()(f.created,c.a),j=!!w.isValid()&&w.format(c.b),I=S||!!p&&(p.shortName||(r=(e=p).r,n=e.g,o=e.b,i=e.n,u=function(t){return t.toString(16).padStart(2,"0")},[r.map(u).join(""),n.map(u).join(""),o.map(u).join(""),i.map(u).join("")].join("")));return[j,f?(f.index||0).toString(10).padStart(4,"0"):null,f&&f.title?f.title:g,d?"".concat(d,"x"):null,h?"".concat(h,"fps"):null,E,I].filter(Boolean).join("-")}},188:function(t,e,r){"use strict";r.d(e,"d",(function(){return n})),r.d(e,"b",(function(){return a})),r.d(e,"a",(function(){return o})),r.d(e,"c",(function(){return i}));var n="__filter:untagged__",a="__filter:new__",o="__filter:mono__",i="__filter:rgb__"},189:function(t,e,r){"use strict";r(83),r(89),r(90),r(99),r(94),r(134),r(95),r(96),r(84),r(124),r(97),r(233),r(93),r(135),r(86),r(92),r(19),r(20),r(104),r(87),r(88),r(129),r(85);var n=r(167),a=r(136),o=r(186),i=r(128),c=r(116);function u(t){return function(t){if(Array.isArray(t))return l(t)}(t)||function(t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(t))return Array.from(t)}(t)||function(t,e){if(!t)return;if("string"==typeof t)return l(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);"Object"===r&&t.constructor&&(r=t.constructor.name);if("Map"===r||"Set"===r)return Array.from(t);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return l(t,e)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function l(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}e.a=function(t){return function(e,r){return function(l){var f=t.exportScaleFactors,s=t.exportFileTypes,p=t.exportCropFrame,y=!!r.hashes,d=y?new a.a:new n.a,b=r.lockFrame||!1,h=r.invertPalette||!1;y?d.update({tiles:a.a.rgbnTiles(l),palette:e,lockFrame:b}):d.update({tiles:l,palette:e.palette,lockFrame:b,invertPalette:h});var m=u(f).filter((function(t){return"number"==typeof t})),g=u(s);m.length||m.push(4),g.length||g.push("png");var v=m.map((function(t){return g.map((function(n){return new Promise((function(a){var l=Object(o.a)({image:r,palette:e,exportScaleFactor:t});if("txt"===n){if(r.hashes)return void a(null);Object(i.b)(r.hash,null).then((function(t){var e=t.map((function(t){return t.match(/.{1,2}/g).join(" ")})).reduce((function(t,e,r){return[].concat(u(t),r%40?[e]:[c.h,e])}),[]),o=[c.g].concat(u(e),[c.f,c.i]).join("\n");a({folder:"images",filename:"".concat(l,".").concat(n),blob:new Blob(new Array(o),{type:"text/plain"}),title:r.title})}))}else{d.getScaledCanvas(t,p).toBlob((function(t){a({filename:"".concat(l,".").concat(n),blob:t,title:r.title})}),"image/".concat(n),1)}}))}))}));return Promise.all(v.flat()).then((function(t){return t.filter(Boolean)}))}}}},219:function(t,e,r){"use strict";r(83),r(89),r(90),r(101),r(95),r(96),r(84),r(93),r(86),r(92),r(19),r(20),r(87),r(88),r(102),r(85);var n=r(165);function a(t){return function(t){if(Array.isArray(t))return o(t)}(t)||function(t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(t))return Array.from(t)}(t)||function(t,e){if(!t)return;if("string"==typeof t)return o(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);"Object"===r&&t.constructor&&(r=t.constructor.name);if("Map"===r||"Set"===r)return Array.from(t);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return o(t,e)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function o(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}e.a=function(t,e){return 360!==t.length?Promise.resolve(t):Object(n.a)(e).then((function(e){var r=a(t);return e.upper.forEach((function(t,e){r[e]=t})),e.lower.forEach((function(t,e){r[e+320]=t})),e.left.forEach((function(t,e){r[20*e+40]=t[0],r[20*e+41]=t[1]})),e.right.forEach((function(t,e){r[20*e+58]=t[0],r[20*e+59]=t[1]})),r})).catch((function(){return t}))}},221:function(t,e,r){"use strict";e.a=function(t){if(t<40)return!0;if(t>=320)return!0;switch(t%20){case 0:case 1:case 18:case 19:return!0;default:return!1}}},227:function(t,e,r){"use strict";r(83),r(89),r(90),r(95),r(96),r(84),r(93),r(86),r(92),r(19),r(104),r(87),r(88),r(123),r(85);function n(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(t)))return;var r=[],n=!0,a=!1,o=void 0;try{for(var i,c=t[Symbol.iterator]();!(n=(i=c.next()).done)&&(r.push(i.value),!e||r.length!==e);n=!0);}catch(t){a=!0,o=t}finally{try{n||null==c.return||c.return()}finally{if(a)throw o}}return r}(t,e)||function(t,e){if(!t)return;if("string"==typeof t)return a(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);"Object"===r&&t.constructor&&(r=t.constructor.name);if("Map"===r||"Set"===r)return Array.from(t);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return a(t,e)}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function a(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}e.a=function(t){var e=t.sortBy;return function(t,r){if(!e)return 0;var a=n(e.split("_"),2),o=a[0],i=a[1],c=t[o],u=r[o],l="desc"===i?-1:1;return c&&u?c>u?l:c<u?-l:0:0}}},228:function(t,e,r){"use strict";r(106),r(112),r(113);var n=r(125),a=r.n(n),o=r(188),i=r(116);e.a=function(t){return function(e){if(t.length){if(t.includes(o.d)&&0===e.tags.length)return!0;if(t.includes(o.b))if(a()(e.created,i.a).unix()>a()().subtract("1","day").unix())return!0;return!(!t.includes(o.c)||!e.hashes)||(!(!t.includes(o.a)||e.hashes)||!!e.tags.find((function(e){return t.includes(e)})))}return!0}}},232:function(t,e,r){"use strict";(function(t){r(19),r(20);e.a=function(e,r){return new Promise((function(n,a){var o=new FileReader;switch(o.onload=function(e){var o=e.target;if(o.result)return"arrayBuffer"===r?void n(t.from(o.result)):void n(o.result);a(new Error("Filereader has no result"))},o.onerror=function(t){a(t)},r){case"arrayBuffer":o.readAsArrayBuffer(e);break;case"text":o.readAsText(e);break;case"binaryString":o.readAsBinaryString(e);break;case"dataURL":o.readAsDataURL(e);break;default:a(new Error('readAs param missing or unknown type "'.concat(r,'"')))}}))}}).call(this,r(183).Buffer)},234:function(t,e,r){"use strict";r(83),r(94),r(101),r(112),r(97),r(110),r(100),r(108),r(111),r(107),r(104),r(113),r(126),r(164),r(102);var n=r(182);function a(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function o(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?a(Object(r),!0).forEach((function(e){i(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):a(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function i(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}e.a=function(t){var e=Object.keys(localStorage).filter((function(t){return"gbp-web-state"!==t&&t.startsWith("gbp-web-")&&!t.startsWith("gbp-web-frame-")})).map((function(t){return t.replace(/^gbp-web-/gi,"")})),r=Object.keys(localStorage).filter((function(t){return t.startsWith("gbp-web-frame-")})).map((function(t){return t.replace(/^gbp-web-frame-/gi,"")})),a=JSON.parse(localStorage.getItem("gbp-web-state"));delete a.gitStorage;var i={};"images"===t&&e.forEach((function(t){i[t]=localStorage.getItem("gbp-web-".concat(t))}));var c={};"frames"===t&&r.forEach((function(t){c["frame-".concat(t)]=localStorage.getItem("gbp-web-frame-".concat(t))}));var u={};switch(n.b.forEach((function(e){var r=e.saveExport,n=e.key;r.includes(t)&&(u[n]=a[n])})),t){case"debug":return JSON.stringify({state:a},null,2);case"settings":case"remote":return JSON.stringify({state:u},null,2);case"images":return JSON.stringify(o({state:u},i),null,2);case"frames":return JSON.stringify(o({state:u},c),null,2);default:return null}}},533:function(t,e,r){"use strict";r.r(e);r(250),r(19),r(20);var n=r(82),a=r.n(n),o=r(98),i=r(173),c=r(151),u=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"cybl",e=arguments.length>1?arguments[1]:void 0;switch(e.type){case"PALETTE_SET_ACTIVE":return e.payload;case"GLOBAL_UPDATE":return e.payload.activePalette||t;default:return t}};r(83),r(89),r(90),r(95),r(96),r(84),r(93),r(86),r(92),r(87),r(88),r(85);function l(t){return function(t){if(Array.isArray(t))return f(t)}(t)||function(t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(t))return Array.from(t)}(t)||function(t,e){if(!t)return;if("string"==typeof t)return f(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);"Object"===r&&t.constructor&&(r=t.constructor.name);if("Map"===r||"Set"===r)return Array.from(t);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return f(t,e)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function f(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}var s=null,p=function(){if(null===s)try{s=window.navigator.canShare({files:[new File([new Blob(l("test"))],"test.txt",{type:"text/plain",lastModified:new Date})]})}catch(t){s=!1}return s},y=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=arguments.length>1?arguments[1]:void 0;switch(e.type){case"SET_CONFIRMATION":return e.payload;case"CLEAR_CONFIRMATION":case"CLOSE_OVERLAY":return{};default:return t}},d=function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0],e=arguments.length>1?arguments[1]:void 0;switch(e.type){case"IMPORT_DRAGOVER_START":return!0;case"IMPORT_DRAGOVER_END":return!1;default:return t}};r(99),r(94),r(101),r(110),r(100),r(108),r(111),r(107),r(102);function b(t){return function(t){if(Array.isArray(t))return h(t)}(t)||function(t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(t))return Array.from(t)}(t)||function(t,e){if(!t)return;if("string"==typeof t)return h(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);"Object"===r&&t.constructor&&(r=t.constructor.name);if("Map"===r||"Set"===r)return Array.from(t);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return h(t,e)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function h(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function m(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function g(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?m(Object(r),!0).forEach((function(e){v(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):m(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function v(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}var A=function(t,e){if(t){if(!e.confirmed)return g({},t);var r=Object.keys(e)[0];return g(g({},t),{},v({},r,!0))}},O=function(t,e){if(e.mode&&e.tag){var r=[],n=[];switch(e.mode){case"add":r.push.apply(r,b(t.add).concat([e.tag])),n.push.apply(n,b(t.remove.filter((function(t){return t!==e.tag}))));break;case"remove":n.push.apply(n,b(t.remove).concat([e.tag])),r.push.apply(r,b(t.add.filter((function(t){return t!==e.tag}))))}return g(g({},t),{},{add:r,remove:n})}return g({},t)},E=function(t,e){var r=g({},e);return delete r.tag,delete r.mode,g(g(g({},t),r),{},{batch:A(t.batch,e),tags:e.tag?O(t.tags,e):t.tags})},F=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=arguments.length>1?arguments[1]:void 0;switch(e.type){case"SET_EDIT_IMAGE":return e.payload;case"UPDATE_EDIT_IMAGE":return E(t,e.payload);case"CANCEL_EDIT_IMAGE":case"UPDATE_IMAGE":case"UPDATE_IMAGES_BATCH":case"CLOSE_OVERLAY":return{};case"GLOBAL_UPDATE":return e.payload.editImage||t;default:return t}},S=function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0],e=arguments.length>1?arguments[1]:void 0;switch(e.type){case"SET_EXPORT_CROP_FRAME":return e.payload;case"GLOBAL_UPDATE":return e.payload.exportCropFrame||t;default:return t}},w=r(160);function j(t){return function(t){if(Array.isArray(t))return I(t)}(t)||function(t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(t))return Array.from(t)}(t)||function(t,e){if(!t)return;if("string"==typeof t)return I(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);"Object"===r&&t.constructor&&(r=t.constructor.name);if("Map"===r||"Set"===r)return Array.from(t);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return I(t,e)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function I(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}var D=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:["png"],e=arguments.length>1?arguments[1]:void 0;switch(e.type){case"UPDATE_EXPORT_FILE_TYPES":return e.payload.checked?Object(w.a)([].concat(j(t),[e.payload.fileType])):t.filter((function(t){return t!==e.payload.fileType}));case"GLOBAL_UPDATE":return e.payload.exportFileTypes||t;default:return t}};function T(t){return function(t){if(Array.isArray(t))return _(t)}(t)||function(t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(t))return Array.from(t)}(t)||function(t,e){if(!t)return;if("string"==typeof t)return _(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);"Object"===r&&t.constructor&&(r=t.constructor.name);if("Map"===r||"Set"===r)return Array.from(t);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return _(t,e)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function _(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}var P=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[1],e=arguments.length>1?arguments[1]:void 0;switch(e.type){case"UPDATE_EXPORT_SCALE_FACTORS":return e.payload.checked?window.navigator.msSaveBlob?[e.payload.factor]:[].concat(T(t),[e.payload.factor]):t.filter((function(t){return t!==e.payload.factor}));case"GLOBAL_UPDATE":return e.payload.exportScaleFactors||t;default:return t}},L=(r(112),r(113),function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],e=arguments.length>1?arguments[1]:void 0;switch(e.type){case"SET_ACTIVE_TAGS":return e.payload;case"SET_AVAILABLE_TAGS":return t.filter((function(t){return e.payload.includes(t)}));default:return t}}),R=(r(154),function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],e=arguments.length>1?arguments[1]:void 0;switch(e.type){case"SET_AVAILABLE_TAGS":return e.payload.sort((function(t,e){return t.toLowerCase().localeCompare(e.toLowerCase())}));default:return t}}),M=function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0],e=arguments.length>1?arguments[1]:void 0;switch(e.type){case"SHOW_FILTERS":return!0;case"HIDE_FILTERS":case"SET_ACTIVE_TAGS":return!1;default:return t}},C=Object(c.c)({activeTags:L,availableTags:R,visible:M}),k=(r(143),function(t){return function(e){return e.filter((function(r,n){return e.findIndex((function(e){return e[t]===r[t]}))===n}))}});function B(t){return function(t){if(Array.isArray(t))return N(t)}(t)||function(t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(t))return Array.from(t)}(t)||function(t,e){if(!t)return;if("string"==typeof t)return N(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);"Object"===r&&t.constructor&&(r=t.constructor.name);if("Map"===r||"Set"===r)return Array.from(t);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return N(t,e)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function N(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}var G=function(t,e){return t.id<e.id?-1:t.id>e.id?1:0},x=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],e=arguments.length>1?arguments[1]:void 0;switch(e.type){case"ADD_FRAME":return k("id")([e.payload].concat(B(t))).sort(G);case"DELETE_FRAME":return t.filter((function(t){return t.id!==e.payload}));case"GLOBAL_UPDATE":return k("id")(e.payload.frames).sort(G);default:return t}},U=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,e=arguments.length>1?arguments[1]:void 0;switch(e.type){case"FRAMES_MESSAGE_SHOW":return 1;case"FRAMES_MESSAGE_HIDE":return 2;default:return t}},H=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"1x",e=arguments.length>1?arguments[1]:void 0;switch(e.type){case"SET_CURRENT_GALLERY_VIEW":return e.payload;case"GLOBAL_UPDATE":return e.payload.galleryView||t;default:return t}},V=function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0],e=arguments.length>1?arguments[1]:void 0;switch(e.type){case"GITSTORAGE_SYNC_START":return!0;case"GITSTORAGE_SYNC_DONE":return!1;default:return t}};function W(t){return function(t){if(Array.isArray(t))return Y(t)}(t)||function(t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(t))return Array.from(t)}(t)||function(t,e){if(!t)return;if("string"==typeof t)return Y(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);"Object"===r&&t.constructor&&(r=t.constructor.name);if("Map"===r||"Set"===r)return Array.from(t);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Y(t,e)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Y(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}var $=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],e=arguments.length>1?arguments[1]:void 0;switch(e.type){case"GITSTORAGE_LOG_ACTION":return[e.payload].concat(W(t));case"GITSTORAGE_SYNC_DONE":return[{timestamp:(new Date).getTime()/1e3,message:"."}].concat(W(t));case"GITSTORAGE_LOG_CLEAR":return[];default:return t}};function X(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function J(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?X(Object(r),!0).forEach((function(e){z(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):X(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function z(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}var Q=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=arguments.length>1?arguments[1]:void 0;switch(e.type){case"SET_GIT_STORAGE":return J(J({},t),e.payload);default:return t}},K=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,e=arguments.length>1?arguments[1]:void 0;switch(e.type){case"ADD_IMAGE":return t+1;case"GLOBAL_UPDATE":return Math.max(e.payload.globalIndex,t)+1;default:return t}},q=function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0],e=arguments.length>1?arguments[1]:void 0;switch(e.type){case"SET_HIDE_DATES":return e.payload;default:return t}};r(106),r(97);function Z(t){return function(t){if(Array.isArray(t))return tt(t)}(t)||function(t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(t))return Array.from(t)}(t)||function(t,e){if(!t)return;if("string"==typeof t)return tt(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);"Object"===r&&t.constructor&&(r=t.constructor.name);if("Map"===r||"Set"===r)return Array.from(t);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return tt(t,e)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function tt(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}var et=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],e=arguments.length>1?arguments[1]:void 0;switch(e.type){case"ADD_IMAGE":return k("hash")([].concat(Z(t),[e.payload]));case"DELETE_IMAGE":return Z(t.filter((function(t){return t.hash!==e.payload})));case"DELETE_IMAGES":return Z(t.filter((function(t){var r=t.hash;return!e.payload.includes(r)})));case"UPDATE_IMAGE":return t.map((function(t){return t.hash===e.payload.hash?e.payload:t}));case"UPDATE_IMAGES_BATCH":return t.map((function(t){return e.payload.find((function(e){return e.hash===t.hash}))||t}));case"GLOBAL_UPDATE":return k("hash")(e.payload.images);default:return t}};function rt(t){return function(t){if(Array.isArray(t))return nt(t)}(t)||function(t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(t))return Array.from(t)}(t)||function(t,e){if(!t)return;if("string"==typeof t)return nt(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);"Object"===r&&t.constructor&&(r=t.constructor.name);if("Map"===r||"Set"===r)return Array.from(t);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return nt(t,e)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function nt(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}var at=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],e=arguments.length>1?arguments[1]:void 0;switch(e.type){case"IMAGE_SELECTION_REMOVE":case"DELETE_IMAGE":return rt(t.filter((function(t){return t!==e.payload})));case"IMAGE_SELECTION_ADD":return[].concat(rt(t),[e.payload]);case"IMAGE_SELECTION_SET":return e.payload;case"DELETE_IMAGES":return[];case"GLOBAL_UPDATE":return e.payload.imageSelection||t;default:return t}},ot=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,e=arguments.length>1?arguments[1]:void 0;switch(e.type){case"IMPORT_QUEUE_SIZE":return e.payload;default:return t}},it=function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0],e=arguments.length>1?arguments[1]:void 0;switch(e.type){case"SET_IS_FULLSCREEN":return e.payload;default:return t}},ct=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,e=arguments.length>1?arguments[1]:void 0;switch(e.type){case"IMAGE_SELECTION_ADD":case"IMAGE_SELECTION_REMOVE":return e.payload;case"DELETE_IMAGE":case"DELETE_IMAGES":case"SET_CURRENT_GALLERY_VIEW":return null;default:return t}},ut=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,e=arguments.length>1?arguments[1]:void 0;switch(e.type){case"SET_LIGHTBOX_IMAGE_INDEX":return e.payload;default:return t}};function lt(t){return function(t){if(Array.isArray(t))return ft(t)}(t)||function(t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(t))return Array.from(t)}(t)||function(t,e){if(!t)return;if("string"==typeof t)return ft(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);"Object"===r&&t.constructor&&(r=t.constructor.name);if("Map"===r||"Set"===r)return Array.from(t);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return ft(t,e)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ft(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}var st=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],e=arguments.length>1?arguments[1]:void 0;switch(e.type){case"CLEAR_LINES":case"IMAGE_COMPLETE":return[];case"NEW_LINES":return[].concat(lt(t),lt(e.payload));case"SET_ALL_LINES":return e.payload.lines;default:return t}},pt=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,e=arguments.length>1?arguments[1]:void 0;switch(e.type){case"SET_PAGESIZE":return e.payload;case"GLOBAL_UPDATE":return e.payload.pageSize||t;default:return t}};function yt(t){return function(t){if(Array.isArray(t))return dt(t)}(t)||function(t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(t))return Array.from(t)}(t)||function(t,e){if(!t)return;if("string"==typeof t)return dt(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);"Object"===r&&t.constructor&&(r=t.constructor.name);if("Map"===r||"Set"===r)return Array.from(t);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return dt(t,e)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function dt(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}var bt=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],e=arguments.length>1?arguments[1]:void 0;switch(e.type){case"PALETTE_DELETE":return yt(t.filter((function(t){return t.shortName!==e.payload})));case"PALETTE_ADD":return[].concat(yt(t),[e.payload]);default:return t}},ht=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=arguments.length>1?arguments[1]:void 0;switch(e.type){case"PRINTER_QUERY":return{};case"PRINTER_DATA":return e.payload;default:return t}},mt=r(161),gt=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",e=arguments.length>1?arguments[1]:void 0;switch(e.type){case"SET_PRINTER_URL":return Object(mt.a)(e.payload,"http");case"GLOBAL_UPDATE":return e.payload.printerUrl||t;default:return t}};function vt(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function At(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?vt(Object(r),!0).forEach((function(e){Ot(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):vt(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function Ot(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}var Et={r:"",g:"",b:"",n:""},Ft=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Et,e=arguments.length>1?arguments[1]:void 0;switch(e.type){case"UPDATE_RGBN_PART":return At(At({},t),e.payload);case"ADD_IMAGE":return e.payload.hashes?At({},Et):t;case"DELETE_IMAGE":case"DELETE_IMAGES":return Et;case"GLOBAL_UPDATE":return e.payload.rgbnImages||t;default:return t}},St=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"int",e=arguments.length>1?arguments[1]:void 0;switch(e.type){case"SET_SAV_FRAME_TYPES":return e.payload;case"GLOBAL_UPDATE":return e.payload.savFrameTypes||t;default:return t}},wt=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",e=arguments.length>1?arguments[1]:void 0;switch(e.type){case"SET_SORT_BY":return e.payload;case"GLOBAL_UPDATE":return e.payload.sortBy||t;default:return t}},jt=function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0],e=arguments.length>1?arguments[1]:void 0;switch(e.type){case"SHOW_SORT_OPTIONS":return!0;case"HIDE_SORT_OPTIONS":case"SET_SORT_BY":return!1;default:return t}},It=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:WebSocket.CLOSED,e=arguments.length>1?arguments[1]:void 0;switch(e.type){case"SET_SOCKET_STATE":return e.payload;default:return t}},Dt=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",e=arguments.length>1?arguments[1]:void 0;switch(e.type){case"SET_SOCKET_URL":return Object(mt.a)(e.payload,"ws");case"GLOBAL_UPDATE":return e.payload.socketUrl||t;default:return t}};function Tt(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function _t(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?Tt(Object(r),!0).forEach((function(e){Pt(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):Tt(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function Pt(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}var Lt={imageSelection:[]},Rt=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Lt,e=arguments.length>1?arguments[1]:void 0;switch(e.type){case"SET_VIDEO_PARAMS":return _t(_t({},t),e.payload);case"ANIMATE_IMAGES":case"CANCEL_ANIMATE_IMAGES":case"CLOSE_OVERLAY":return _t(_t({},t),{},{imageSelection:[]});case"GLOBAL_UPDATE":return e.payload.videoParams||t;default:return t}},Mt=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{height:window.innerHeight,width:window.innerWidth},e=arguments.length>1?arguments[1]:void 0;switch(e.type){case"WINDOW_DIMENSIONS":return e.payload;default:return t}},Ct=Object(c.c)({activePalette:u,canShare:p,confirmation:y,dragover:d,editImage:F,exportCropFrame:S,exportFileTypes:D,exportScaleFactors:P,filter:C,frames:x,framesMessage:U,galleryView:H,gitBusy:V,gitLog:$,gitStorage:Q,globalIndex:K,hideDates:q,images:et,imageSelection:at,importQueueSize:ot,isFullscreen:it,lastSelectedImage:ct,lightboxImage:ut,lineBuffer:st,pageSize:pt,palettes:bt,printerData:ht,printerUrl:gt,rgbnImages:Ft,savFrameTypes:St,sortBy:wt,sortOptionsVisible:jt,socketState:It,socketUrl:Dt,videoParams:Rt,windowDimensions:Mt}),kt=r(116);function Bt(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function Nt(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?Bt(Object(r),!0).forEach((function(e){Gt(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):Bt(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function Gt(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}var xt=function(t){var e=t.palettes.map((function(t){return t.shortName})),r=t.frames.map((function(t){return t.id})),n=Object(mt.a)(t.socketUrl,"ws"),a=Object(mt.a)(t.printerUrl,"http"),o=t.framesMessage,i=t.images.map((function(t){return t.tags=t.tags||[],t.hashes?t.palette?t:Nt(Nt({},t),{},{palette:kt.e}):t.palette?e.includes(t.palette)?t:Nt(Nt({},t),{},{palette:e[0]}):null})).filter(Boolean);return i.forEach((function(t){r.includes(t.frame)||o||(o=1)})),i.filter((function(t,e){return!t.index||i.findIndex((function(e){return e.index===t.index}))!==e})).forEach((function(e){e.index=t.globalIndex,t.globalIndex+=1})),Nt(Nt({},t),{},{images:i,socketUrl:n,printerUrl:a,framesMessage:o})},Ut=r(182),Ht=function(t){return function(e){return function(r){e(r);var n=t.getState(),a={};Ut.b.forEach((function(t){var e=t.key;t.saveLocally&&(a[e]=n[e])})),localStorage.setItem("gbp-web-state",JSON.stringify(a))}}},Vt=(r(324),r(325)),Wt=r.n(Vt),Yt=r(215),$t=r(163),Xt=r(166),Jt=r(136),zt=r(167),Qt=r(186);function Kt(t){return function(t){if(Array.isArray(t))return qt(t)}(t)||function(t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(t))return Array.from(t)}(t)||function(t,e){if(!t)return;if("string"==typeof t)return qt(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);"Object"===r&&t.constructor&&(r=t.constructor.name);if("Map"===r||"Set"===r)return Array.from(t);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return qt(t,e)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function qt(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function Zt(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function te(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?Zt(Object(r),!0).forEach((function(e){ee(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):Zt(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function ee(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}var re=function(t){return function(e){return function(r){if("ANIMATE_IMAGES"===r.type){var n=t.getState(),a=n.videoParams,o=a.scaleFactor,i=a.frameRate,c=a.imageSelection,u=a.yoyo,l=a.frame,f=a.lockFrame,s=a.invertPalette,p=a.palette,y=a.cropFrame,d=new Wt.a({quality:.98,frameRate:i});Promise.all(c.map((function(t){return n.images.find((function(e){return e.hash===t}))})).filter(Boolean).map((function(t){return te(te({},t),{},{frame:l||t.frame,palette:t.hashes?t.palette:p||t.palette})})).map((function(t){return Object($t.a)(t,n).then((function(e){var r=Object(Xt.a)(n,t),a=!!t.hashes,i=a?new Jt.a:new zt.a,c=f||t.lockFrame||!1,u=s||t.invertPalette||!1;return a?i.update({tiles:Jt.a.rgbnTiles(e),palette:r,lockFrame:c}):i.update({tiles:e,palette:r.palette,lockFrame:c,invertPalette:u}),i.getScaledCanvas(o,y)}))}))).then((function(t){if(t.forEach((function(t){d.addFrame(t)})),u){var e=Kt(t).reverse();e.shift(),e.pop(),e.forEach((function(t){d.addFrame(t)}))}var r=Object(Qt.a)({useCurrentDate:!0,exportScaleFactor:o,frameRate:i,altTitle:"video",frameName:l,paletteShort:p});d.complete().then((function(t){Object(Yt.saveAs)(t,"".concat(r,".webm"))}))}))}e(r)}}},ne=(r(134),r(135),r(104),r(126),r(156));function ae(t){return function(t){if(Array.isArray(t))return oe(t)}(t)||function(t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(t))return Array.from(t)}(t)||function(t,e){if(!t)return;if("string"==typeof t)return oe(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);"Object"===r&&t.constructor&&(r=t.constructor.name);if("Map"===r||"Set"===r)return Array.from(t);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return oe(t,e)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function oe(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}var ie=function(t){var e=t.initial,r=t.add,n=t.remove,a=[].concat(ae(e),ae(r));return a.filter((function(t,e){return a.findIndex((function(e){return e===t}))===e})).filter((function(t){return!n.includes(t)}))},ce=r(227);function ue(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function le(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?ue(Object(r),!0).forEach((function(e){fe(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):ue(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function fe(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function se(t){return(se="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}var pe=["lockFrame","frame","palette","invertPalette","title","tags","created"],ye=function(t){var e=t.map((function(t){return t.tags})).flat();return{initial:e.filter((function(t,r){return e.findIndex((function(e){return e===t}))===r})),add:[],remove:[]}},de=function(t){return function(e){return function(r){if("IMAGE_SELECTION_SHIFTCLICK"===r.type){var n=t.getState(),a=Object(ne.a)(n),o=n.lastSelectedImage,i=n.pageSize,c=a.findIndex((function(t){return t.hash===r.payload})),u=a.findIndex((function(t){return t.hash===o}));-1===u&&(u=r.page*i);var l=Math.min(u,c),f=Math.max(u,c);t.dispatch({type:"IMAGE_SELECTION_SET",payload:a.slice(l,f+1).map((function(t){return t.hash}))})}if("UPDATE_IMAGE"===r.type){var s=t.getState(),p=Object(ce.a)(s),y=s.editImage,d=s.images;if(y.batch&&y.batch.selection&&y.batch.selection.length){var b=y.batch.selection.map((function(t){return d.find((function(e){return e.hash===t}))})).sort(p).map((function(t,e){if(!t)return!1;var r={},n=t.tags;return pe.forEach((function(a){switch(a){case"title":if(!y.batch.title)break;r.title=y.title.replace(/%n/gi,e+1);break;case"created":if(!y.batch.created)break;r.created=y.created;break;case"palette":if(!y.batch.palette)break;se(t.palette)===se(y.palette)&&(r.palette=y.palette);break;case"invertPalette":if(!y.batch.invertPalette)break;r.invertPalette=y.invertPalette;break;case"frame":if(!y.batch.frame)break;r.frame=y.frame;break;case"lockFrame":if(!y.batch.lockFrame)break;r.lockFrame=y.lockFrame;break;case"tags":n=ie(le(le({},y.tags),{},{initial:t.tags}))}})),le(le(le({},t),r),{},{tags:n})})).filter(Boolean);return void t.dispatch({type:"UPDATE_IMAGES_BATCH",payload:b})}}if("BATCH_TASK"!==r.type)e(r);else{var h=t.getState(),m=h.images,g=h.imageSelection,v=h.pageSize,A=m.filter((function(t){var e=t.hash;return g.includes(e)}));if(g.length)switch(r.payload){case"delete":t.dispatch({type:"DELETE_IMAGES",payload:g});break;case"animate":t.dispatch({type:"SET_VIDEO_PARAMS",payload:{imageSelection:g}});break;case"download":t.dispatch({type:"DOWNLOAD_SELECTION",payload:g});break;case"edit":t.dispatch({type:"SET_EDIT_IMAGE",payload:le(le({},A[0]),{},{batch:{selection:g,title:!1,created:!1,palette:!1,invertPalette:!1,frame:!1,lockFrame:!1},tags:ye(A)})})}switch(r.payload){case"checkall":t.dispatch({type:"IMAGE_SELECTION_SET",payload:Object(ne.a)(h,!0).slice(r.page*v,(r.page+1)*v).map((function(t){return t.hash}))});break;case"uncheckall":t.dispatch({type:"IMAGE_SELECTION_SET",payload:[]})}}}}};function be(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function he(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?be(Object(r),!0).forEach((function(e){me(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):be(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function me(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}var ge=function(t){return document.addEventListener("keydown",(function(e){if("Escape"===e.key||"Esc"===e.key){var r=t.getState();t.dispatch({type:"CLOSE_OVERLAY"}),r.confirmation&&e.preventDefault()}})),function(e){return function(r){var n=t.getState();switch(r.type){case"DELETE_IMAGE":case"DELETE_IMAGES":return r.confirmed?void e(r):void function(t,e,r){var n;if("string"==typeof t.payload){var a=r.find((function(e){return e.hash===t.payload}));n=a.title?'Delete image "'.concat(a.title,'"?'):"Delete this image?"}else if(1===t.payload.length){var o=r.find((function(e){return e.hash===t.payload[0]}));n=o.title?'Delete image "'.concat(o.title,'"?'):"Delete this image?"}else n="Delete ".concat(t.payload.length," images?");e({type:"SET_CONFIRMATION",payload:{message:n,originalAction:he({confirmed:!0},t)}})}(r,t.dispatch,n.images);case"CONFIRM_CONFIRMATION":return t.dispatch({type:"CLEAR_CONFIRMATION"}),void t.dispatch(n.confirmation.originalAction);case"DENY_CONFIRMATION":return void t.dispatch({type:"CLEAR_CONFIRMATION"})}e(r)}}},ve=(r(164),r(128)),Ae=function(t){Object.keys(localStorage).filter((function(t){return"gbp-web-state"!==t&&t.startsWith("gbp-web-")&&!t.startsWith("gbp-web-frame-")})).map((function(t){return t.replace(/^gbp-web-/gi,"")})).forEach((function(e){!function(t,e){(function(t,e){return!!e.find((function(e){var r=e.hashes;return!!r&&[r.r,r.g,r.b,r.n].includes(t)}))})(e,t)||function(t,e){return!!e.find((function(e){return e.hash===t}))}(e,t)||Object(ve.a)(e)}(t,e)}))},Oe=function(t){return function(e){return function(r){switch(e(r),r.type){case"DELETE_IMAGE":case"DELETE_IMAGES":Ae(t.getState().images)}}}},Ee=(r(137),r(147),r(145),r(144),function(t){return function(e,r){var n=[],a="";try{for(var o=0;o<5760;o+=1)a+=" ".concat(e[o+8].toString(16).padStart(2,"0")),o%16==15&&(n.push(a.trim()),a="")}catch(e){return void t({type:"ERROR",payload:"ERROR_IN_LOADED_BIN\n".concat(r)})}t({type:"ADD_TO_QUEUE",payload:[{file:r,lines:n}]})}}),Fe=r(219),Se=function(t,e,r){var n=function(t){return r.find((function(e){return e.id===t}))},a=(t+1).toString(10).padStart(2,"0"),o="".concat(e).concat(a);if(n(o))return o;if("jp"===e){var i="int".concat(a);if(n(i))return i}var c="".concat(e,"01");if(n(c))return c;if("jp"!==e){var u="int".concat(a);if(n(u))return u}return"int01"};function we(t){return function(t){if(Array.isArray(t))return je(t)}(t)||function(t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(t))return Array.from(t)}(t)||function(t,e){if(!t)return;if("string"==typeof t)return je(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);"Object"===r&&t.constructor&&(r=t.constructor.name);if("Map"===r||"Set"===r)return Array.from(t);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return je(t,e)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function je(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}var Ie="FF FF FF FF FF FF FF FF FF FF FF FF FF FF FF FF",De=function(t,e){var r=[],n="";r.push.apply(r,we(we(Array(40)).map((function(){return Ie}))));for(var a=0;a<3584;a+=1)a%256==0&&r.push.apply(r,we(we(Array(2)).map((function(){return Ie})))),n+=" ".concat(t[e+a].toString(16).padStart(2,"0")),a%16==15&&(r.push(n.trim()),n=""),a%256==255&&r.push.apply(r,we(we(Array(2)).map((function(){return Ie}))));return r.push.apply(r,we(we(Array(40)).map((function(){return Ie})))),r},Te=function(t){return function(e,r){for(var n=t.getState(),a=n.savFrameTypes,o=n.frames,i=[],c=1;c<=30;c+=1){var u=4096*(c+1),l=e[u+4016],f=De(e,u);i.push(Object(Fe.a)(f,Se(l,a,o)))}Promise.all(i).then((function(e){e.forEach((function(e){t.dispatch({type:"ADD_TO_QUEUE",payload:[{file:r,lines:e}]})}))}))}},_e=(r(146),r(123),r(368)),Pe=function(t){return function(e,r){var n=e.split("\n").map((function(t){return t.trim()})).filter((function(t){return t.length&&0!==t.indexOf("//")&&0!==t.indexOf("/*")})).map((function(t){return t.split(" ")})).flat().map((function(t){return parseInt(t,16)}));Object(_e.parsePackets)(n).then(_e.getImageDataStream).then(_e.decompressDataStream).then(_e.decodePrintCommands).then(_e.harmonizePalettes).then(_e.transformToClassic).then((function(e){e.forEach((function(e){t({type:"ADD_TO_QUEUE",payload:[{file:r,lines:e}]})}))}))}},Le=(r(124),r(129),r(165)),Re=r(232);function Me(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(t)))return;var r=[],n=!0,a=!1,o=void 0;try{for(var i,c=t[Symbol.iterator]();!(n=(i=c.next()).done)&&(r.push(i.value),!e||r.length!==e);n=!0);}catch(t){a=!0,o=t}finally{try{n||null==c.return||c.return()}finally{if(a)throw o}}return r}(t,e)||function(t,e){if(!t)return;if("string"==typeof t)return Ce(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);"Object"===r&&t.constructor&&(r=t.constructor.name);if("Map"===r||"Set"===r)return Array.from(t);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Ce(t,e)}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Ce(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}var ke=function(t){for(var e,r,n,a,o,i,c,u=t.data,l=[],f=0;f<8;f+=1){for(var s=0,p=0;p<8;p+=1){s+=(e=u.slice(4*(8*f+p)),r=void 0,n=void 0,a=void 0,o=void 0,i=void 0,c=void 0,r=Me(e,4),n=r[0],a=r[1],o=r[2],i=r[3],(c=Math.floor((n+a+o)/3*(i/255)))<64?257:c<128?1:c<192?256:0)<<7-p}l.push((s>>8).toString(16).padStart(2,"0"),(255&s).toString(16).padStart(2,"0"))}return l.join(" ").toUpperCase()},Be=function(t){return function(e){var r=document.createElement("img"),n=document.createElement("canvas"),a=n.getContext("2d"),o=[];n.width=160,n.height=144,r.onload=function(){a.drawImage(r,0,0,r.naturalWidth,r.naturalHeight,0,0,160,144);for(var i=0;i<n.height;i+=8)for(var c=0;c<n.width;c+=8)o.push(ke(a.getImageData(c,i,8,8)));var u=Me(e.name.split("."),4),l=u[0],f=u[1],s=u[2],p=u[3];f&&s&&!p&&l.match(/^[a-z]{2,}\d{2}$/g)&&Object(Le.b)(l,o).then((function(){t({type:"ADD_FRAME",payload:{id:l,name:f}})}))},Object(Re.a)(e,"dataURL").then((function(t){r.src=t}))}},Ne=function(t){if("#"===t.charAt(0)||"/"===t.charAt(0))return null;if("!"===t.charAt(0)||"{"===t.charAt(0)){try{var e=JSON.parse(t.slice(t.indexOf("{")).trim()),r=e.command,n=e.margin_lower;if("PRNT"===r&&n>0)return{type:"IMAGE_COMPLETE"}}catch(t){return{type:"PARSE_ERROR",payload:"Error while trying to parse JSON data command block"}}return null}var a=t.replace(/[^0-9A-F]/gi,"");return a.length?{type:"NEW_LINES",payload:[a]}:null};function Ge(t){return function(t){if(Array.isArray(t))return xe(t)}(t)||function(t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(t))return Array.from(t)}(t)||function(t,e){if(!t)return;if("string"==typeof t)return xe(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);"Object"===r&&t.constructor&&(r=t.constructor.name);if("Map"===r||"Set"===r)return Array.from(t);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return xe(t,e)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function xe(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}var Ue=function(t){return function(e,r){var n=[],a="".concat(e,"\n").concat(kt.i).split("\n").map(Ne).filter(Boolean).map((function(t){var e;switch(t.type){case"NEW_LINES":return(e=n).push.apply(e,Ge(t.payload)),null;case"IMAGE_COMPLETE":var a=n.filter(Boolean);return n=[],!!a.length&&{lines:a,file:!!r&&r.replace(/.txt$/gi,"")};default:return null}})).filter(Boolean);a.length||console.warn("File ".concat(r," did not contain images")),t({type:"ADD_TO_QUEUE",payload:Ge(a)})}},He=function(t){var e=t.dispatch,r=Te(t),n=Ee(e),a=Pe(e),o=Be(e),i=Ue(e),c=function(){e({type:"ERROR",payload:"FILE_NOT_READ"})};return function(t){t.type.startsWith("image/")?o(t):t.size>268435455?e({type:"ERROR",payload:"FILE_TOO_LARGE"}):"application/json"!==t.type?"text/plain"!==t.type?!t.type.startsWith("application/")&&t.type?e({type:"ERROR",payload:"NOT_A_DUMP"}):Object(Re.a)(t,"arrayBuffer").catch(c).then((function(e){var a;131072!==t.size?71===(a=e)[0]&&66===a[1]&&45===a[2]&&66===a[3]&&73===a[4]&&78===a[5]&&48===a[6]&&49===a[7]&&n(e,t.name):r(e,t.name)})):Object(Re.a)(t,"text").catch(c).then((function(r){if(-1!==r.indexOf('{"command"'))i(r,t.name);else try{a(r,t.name)}catch(t){e({type:"ERROR",payload:"NOT_A_DUMP"})}})):Object(Re.a)(t,"text").catch(c).then((function(t){var r={};try{r=JSON.parse(t)}catch(t){}r&&r.state?e({type:"SETTINGS_IMPORT",payload:r}):e({type:"ERROR",payload:"NOT_A_SETTINGS_FILE"})}))}};function Ve(t){return function(t){if(Array.isArray(t))return We(t)}(t)||function(t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(t))return Array.from(t)}(t)||function(t,e){if(!t)return;if("string"==typeof t)return We(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);"Object"===r&&t.constructor&&(r=t.constructor.name);if("Map"===r||"Set"===r)return Array.from(t);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return We(t,e)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function We(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}var Ye=function(t){var e,r=document.querySelector("#app"),n=He(t),a=!1;return r.addEventListener("dragover",(function(r){r.preventDefault(),a||t.dispatch({type:"IMPORT_DRAGOVER_START"}),window.clearTimeout(e),a=!0,e=window.setTimeout((function(){a=!1,t.dispatch({type:"IMPORT_DRAGOVER_END"})}),250)})),r.addEventListener("drop",(function(t){t.preventDefault(),(t.dataTransfer.items?Ve(t.dataTransfer.items).filter((function(t){return"file"===t.kind})).map((function(t){return t.getAsFile()})):Ve(t.dataTransfer.files)).forEach(n)})),function(t){return function(e){t(e)}}},$e=r(188),Xe=function(t){return function(e){return function(r){switch(r.type){case"ADD_IMAGE":case"UPDATE_IMAGE":case"UPDATE_IMAGES_BATCH":case"DELETE_IMAGE":case"DELETE_IMAGES":return e(r),void function(t){var e=t.getState();t.dispatch({type:"SET_AVAILABLE_TAGS",payload:Object(w.a)(e.images.map((function(t){return t.tags})).flat()).filter((function(t){return![$e.b,$e.d,$e.a,$e.c].includes(t)}))})}(t)}e(r)}}},Je=function(t){var e=null,n=null,a=!1,o=t.getState().gitStorage,i=o.use,c=o.owner,u=o.repo,l=o.branch,f=o.token;return i&&c&&u&&l&&f&&Promise.all([r.e(7),r.e(2)]).then(r.bind(null,534)).then((function(r){var o=r.init,i=r.updateClient,c=r.middleware;e=c(t),n=i,o(t),a=!0})),function(o){return function(i){"SET_GIT_STORAGE"===i.type&&(a?n(i.payload):Promise.all([r.e(7),r.e(2)]).then(r.bind(null,534)).then((function(r){var o=r.init,c=r.updateClient,u=r.middleware;e=u(t),n=c,o(t),n(i.payload),a=!0}))),e&&e(i),o(i)}}},ze=function(){return function(t){return function(e){"ERROR"===e.type&&alert(e.payload),t(e)}}},Qe=null,Ke=function(t){return function(e){return function(r){["NEW_LINES","SET_ALL_LINES"].includes(r.type)&&(window.clearTimeout(Qe),Qe=window.setTimeout((function(){t.dispatch({type:"CLEAR_LINES"})}),5e3)),e(r)}}},qe=function(t){var e=He(t);return function(t){return function(r){"IMPORT_FILE"!==r.type?t(r):r.payload.files&&1===r.payload.files.length&&e(r.payload.files[0])}}};function Ze(t){return function(t){if(Array.isArray(t))return tr(t)}(t)||function(t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(t))return Array.from(t)}(t)||function(t,e){if(!t)return;if("string"==typeof t)return tr(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);"Object"===r&&t.constructor&&(r=t.constructor.name);if("Map"===r||"Set"===r)return Array.from(t);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return tr(t,e)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function tr(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}var er=function(t){var e,r=[],n=function(){!e&&r.length&&(e=!0,window.setTimeout((function(){e=!1,t.dispatch({type:"SET_ALL_LINES",payload:r.shift()})}),50),t.dispatch({type:"IMPORT_QUEUE_SIZE",payload:r.length-1}))};return function(t){return function(e){if("ADD_TO_QUEUE"===e.type)return r.push.apply(r,Ze(e.payload)),void n();t(e),"ADD_IMAGE"===e.type&&n()}}},rr=r(375),nr=r.n(rr),ar=function(t){return nr.a.isEnabled&&nr.a.on("change",(function(){t.dispatch({type:"SET_IS_FULLSCREEN",payload:!!nr.a.element})})),document.addEventListener("keydown",(function(e){if(null!==t.getState().lightboxImage)switch(e.key){case"Esc":case"Escape":t.dispatch({type:"SET_LIGHTBOX_IMAGE_INDEX",payload:null}),e.preventDefault();break;case"Right":case"ArrowRight":t.dispatch({type:"LIGHTBOX_NEXT"}),e.preventDefault();break;case"Left":case"ArrowLeft":t.dispatch({type:"LIGHTBOX_PREV"}),e.preventDefault()}})),function(e){return function(r){var n=t.getState();switch(r.type){case"LIGHTBOX_NEXT":if(null===n.lightboxImage)return;return void t.dispatch({type:"SET_LIGHTBOX_IMAGE_INDEX",payload:Math.min(n.lightboxImage+1,n.images.length-1)});case"LIGHTBOX_PREV":if(null===n.lightboxImage)return;return void t.dispatch({type:"SET_LIGHTBOX_IMAGE_INDEX",payload:Math.max(n.lightboxImage-1,0)});case"LIGHTBOX_FULLSCREEN":nr.a.isEnabled&&(nr.a.element?nr.a.exit():nr.a.request(document.querySelector("body")));break;case"SET_LIGHTBOX_IMAGE_INDEX":nr.a.isEnabled&&!r.payload&&nr.a.element&&nr.a.exit();break;case"SET_LIGHTBOX_IMAGE_HASH":t.dispatch({type:"SET_LIGHTBOX_IMAGE_INDEX",payload:Object(ne.a)(n).findIndex((function(t){return t.hash===r.payload}))})}e(r)}}};function or(t){return function(t){if(Array.isArray(t))return ir(t)}(t)||function(t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(t))return Array.from(t)}(t)||function(t,e){if(!t)return;if("string"==typeof t)return ir(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);"Object"===r&&t.constructor&&(r=t.constructor.name);if("Map"===r||"Set"===r)return Array.from(t);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return ir(t,e)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ir(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function cr(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function ur(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?cr(Object(r),!0).forEach((function(e){lr(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):cr(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function lr(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}var fr=function(t){return t.getState().printerUrl||"/"},sr=function(t){return function(e){return function(r){if("PRINTER_QUERY"===r.type){var n=fr(t);fetch("".concat(n,"dumps/list")).then((function(t){return t.json()})).then((function(e){if(e.fs.dumpcount!==e.dumps.length)throw new Error("Inconststent image count received from printer.");t.dispatch({type:"PRINTER_DATA",payload:ur(ur({},e),{},{dumps:or(e.dumps).sort()})})})).catch((function(e){t.dispatch({type:"ERROR",payload:e.message})}))}if("PRINTER_DOWNLOAD"===r.type){var a=fr(t),o=t.getState().printerData.dumps,i=function(t,e){return function(r){return new Promise((function(n){var a=He(t);!function r(o){var i=o.shift();i?fetch("".concat(e).concat(i.replace(/^\//,""))).then((function(t){return t.blob()})).then((function(t){a(t),window.setTimeout((function(){r(o)}),200)})).catch((function(e){t.dispatch({type:"ERROR",payload:e.message})})):n()}(r)}))}}(t,a);o&&o.length&&i(or(o))}if("PRINTER_CLEAR"===r.type){var c=fr(t);fetch("".concat(c,"dumps/clear")).then((function(t){return t.json()})).then((function(e){e.deleted&&t.dispatch({type:"PRINTER_QUERY"})}))}e(r)}}};function pr(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function yr(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?pr(Object(r),!0).forEach((function(e){dr(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):pr(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function dr(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}var br=function(t){return document.addEventListener("keydown",(function(e){if("Enter"===e.key&&e.ctrlKey&&t.getState().editImage.hash){var r=t.getState();t.dispatch({type:"SAVE_EDIT_IMAGE"}),r.editImage&&e.preventDefault()}})),window.addEventListener("resize",(function(){t.dispatch({type:"WINDOW_DIMENSIONS",payload:{height:window.innerHeight,width:window.innerWidth}})})),function(e){return function(r){switch(r.type){case"SAVE_EDIT_IMAGE":return n=t.dispatch,a=t.getState(),void n({type:"UPDATE_IMAGE",payload:yr(yr({},a.editImage),{},{tags:ie(a.editImage.tags)})});case"EDIT_IMAGE":return void function(t,e,r){var n=e.find((function(t){return t.hash===r}));t({type:"SET_EDIT_IMAGE",payload:yr(yr({},n),{},{tags:{initial:n.tags,add:n.tags,remove:[]}})})}(t.dispatch,t.getState().images,r.payload)}var n,a;e(r)}}},hr=r(125),mr=r.n(hr),gr=function(t){return function(e){return function(r){var n=t.getState();"IMAGE_COMPLETE"!==r.type&&"SET_ALL_LINES"!==r.type||Object(ve.c)(r.payload&&r.payload.lines?r.payload.lines:n.lineBuffer).then((function(e){var a={hash:e,created:mr()().format(kt.a),title:r.payload&&r.payload.file?r.payload.file:"",index:n.globalIndex,lines:n.lineBuffer.length,tags:[],palette:n.activePalette};t.dispatch({type:"ADD_IMAGE",payload:a})})),e(r)}}};function vr(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function Ar(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?vr(Object(r),!0).forEach((function(e){Or(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):vr(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function Or(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}var Er=function(t){return function(e){return function(n){if("SAVE_RGBN_IMAGE"===n.type){var a=t.getState();r.e(10).then(r.t.bind(null,528,7)).then((function(e){var r=e.default,n={palette:kt.e,hashes:Ar({},a.rgbnImages),hash:r(a.rgbnImages),created:mr()().format(kt.a),title:"",tags:[],index:a.globalIndex};t.dispatch({type:"ADD_IMAGE",payload:n})}))}e(n)}}};function Fr(){}var Sr=function(t,e){var r,n=0,a=1,o={},i=t,c=(e=e||{}).maxAttempts||1/0;return o.open=function(){try{r=new WebSocket(i,e.protocols||[])}catch(t){return(e.onstatechange||Fr)(WebSocket.CLOSED),void(e.onerror||Fr)(t)}(e.onstatechange||Fr)(r.readyState),r.onmessage=e.onmessage||Fr,r.onopen=function(t){(e.onopen||Fr)(t),(e.onstatechange||Fr)(r.readyState),n=0},r.onclose=function(t){1e3===t.code||1001===t.code||1005===t.code||o.reconnect(t),(e.onclose||Fr)(t),(e.onstatechange||Fr)(r.readyState)},r.onerror=function(t){t&&"ECONNREFUSED"===t.code?o.reconnect(t):(e.onerror||Fr)(t),(e.onstatechange||Fr)(r.readyState)}},o.reconnect=function(t){a&&n++<c?a=setTimeout((function(){(e.onreconnect||Fr)(t),(e.onstatechange||Fr)(r.readyState),o.open()}),e.timeout||1e3):((e.onmaximum||Fr)(t),(e.onstatechange||Fr)(r.readyState))},o.json=function(t){r.send(JSON.stringify(t))},o.send=function(t){r.send(t)},o.close=function(t,n){a=clearTimeout(a),r.close(t||1e3,n),(e.onstatechange||Fr)(r.readyState)},o.setUrl=function(t){i=t;try{o.close()}catch(t){}o.open()},o.open(),o},wr=r(27);function jr(t){return function(t){if(Array.isArray(t))return Ir(t)}(t)||function(t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(t))return Array.from(t)}(t)||function(t,e){if(!t)return;if("string"==typeof t)return Ir(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);"Object"===r&&t.constructor&&(r=t.constructor.name);if("Map"===r||"Set"===r)return Array.from(t);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Ir(t,e)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Ir(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}var Dr=function(t,e){var r=[],n=function(){t({type:"NEW_LINES",payload:jr(r)}),r=[]};return new Sr(e,{timeout:5e3,maxAttempts:10,onstatechange:function(e){t({type:"SET_SOCKET_STATE",payload:e})},onmessage:function(e){e.data.split("\n").map(Ne).filter(Boolean).forEach((function(e){var a;"NEW_LINES"===e.type?((a=r).push.apply(a,jr(e.payload)),r.length>=40&&n()):(n(),t(e))}))}})},Tr=function(t){if("webpack-dev"!==Object(wr.a)().env)return function(t){return function(e){t(e)}};var e,r=t.getState().socketUrl;return r&&window.setTimeout((function(){e=Dr(t.dispatch,"".concat(r))}),1e3),function(r){return function(n){if("SET_SOCKET_URL"===n.type){var a="".concat(n.payload);e?e.setUrl(a):e=Dr(t.dispatch,a)}r(n)}}},_r=function(t){return"function"==typeof t.arrayBuffer?t.arrayBuffer():new Promise((function(e){var r=new FileReader;r.onload=function(t){e(t.target.result)},r.readAsArrayBuffer(t)}))},Pr=function(t){return function(e){if(1!==e.length)r.e(9).then(r.t.bind(null,529,7)).then((function(r){var n=new(0,r.default);Promise.all(e.map((function(t){var e=t.filename,r=t.blob;return _r(r).then((function(t){return{filename:e,arrayBuffer:t}}))}))).then((function(t){t.forEach((function(t){var e=t.filename,r=t.arrayBuffer;n.file(e,r)}))})).then((function(){return n.generateAsync({type:"blob",compression:"DEFLATE"}).then((function(e){Object(Yt.saveAs)(e,"".concat(t,".zip"))}))}))}));else{var n=e[0];Object(Yt.saveAs)(n.blob,n.filename)}}},Lr=r(189),Rr=r(234);function Mr(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function Cr(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?Mr(Object(r),!0).forEach((function(e){kr(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):Mr(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function kr(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}var Br=function(t,e){var r=e.frames||t.frames,n=e.images||t.images;return Cr(Cr(Cr({},t),e),{},{images:n,frames:r})},Nr=function(t){return function(e){return function(r){switch(r.type){case"SETTINGS_EXPORT":!function(t){var e=Object(Rr.a)(t);Pr(null)([{blob:new Blob(new Array(e)),filename:"".concat(t,".json")}])}(r.payload);break;case"SETTINGS_IMPORT":n=t.dispatch,a=t.getState(),o=r.payload,Object.keys(o).forEach((function(t){"state"!==t&&localStorage.setItem("gbp-web-".concat(t),o[t])})),n({type:"GLOBAL_UPDATE",payload:xt(Br(a,o.state||{}))})}var n,a,o;e(r)}}};function Gr(t){return(Gr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function xr(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function Ur(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?xr(Object(r),!0).forEach((function(e){Hr(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):xr(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function Hr(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function Vr(t){return function(t){if(Array.isArray(t))return Wr(t)}(t)||function(t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(t))return Array.from(t)}(t)||function(t,e){if(!t)return;if("string"==typeof t)return Wr(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);"Object"===r&&t.constructor&&(r=t.constructor.name);if("Map"===r||"Set"===r)return Array.from(t);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Wr(t,e)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Wr(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}var Yr=function(t){return function(e){return function(r){if("SHARE_IMAGE"===r.type){var n=t.getState(),a=n.images.find((function(t){return t.hash===r.payload})),o=Object(Xt.a)(n,a),i=Vr(n.exportScaleFactors).pop()||4,c=Vr(n.exportFileTypes).pop()||"png",u=Object(Lr.a)(Ur(Ur({},n),{},{exportScaleFactors:[i],exportFileTypes:[c]}));Object($t.a)(a,n).then(u(o,a)).then((function(t){var e,r=t[0],n=r.blob,a=r.filename,o=r.title;try{e={files:[new File([n],a,{type:"image/png",lastModified:new Date})],title:o}}catch(t){alert(JSON.stringify({s:1,error:t}))}if(e&&window.navigator.share)try{window.navigator.share(e).catch((function(t){return alert(JSON.stringify({s:3,error:t}))}))}catch(t){alert(JSON.stringify({s:4,error:t}))}else alert("sharing not enabled in your browser... because:\nshare is: ".concat(Gr(window.navigator.share),"\nshareData is: ").concat(Gr(e),"\ncanShare is: ").concat(Gr(window.navigator.canShare),"\ncanShare says: ").concat(window.navigator.canShare?window.navigator.canShare(e):""))}))}e(r)}}},$r=function(t){return function(e){return function(r){if("START_DOWNLOAD"===r.type||"DOWNLOAD_SELECTION"===r.type){var n=t.getState(),a=Object(Lr.a)(n);switch(r.type){case"START_DOWNLOAD":!function(t,e){return function(r){var n=e.images.find((function(t){return t.hash===r})),a=Object(Xt.a)(e,n),o=Object(Qt.a)({image:n,palette:a});return Object($t.a)(n,e).then(t(a,n)).then(Pr(o))}}(a,n)(r.payload);break;case"DOWNLOAD_SELECTION":!function(t,e){return function(r){var n=Object(Qt.a)({altTitle:"gameboy-printer-gallery",useCurrentDate:!0});Promise.all(r.map((function(r){var n=e.images.find((function(t){return t.hash===r})),a=Object(Xt.a)(e,n);return Object($t.a)(n,e).then(t(a,n))}))).then((function(t){return t.flat()})).then(Pr(n))}}(a,n)(r.payload)}}return e(r)}}},Xr=Object(c.a)(re,de,ge,Oe,ze,Ye,Xe,Je,Ke,qe,er,ar,sr,br,gr,Er,Tr,Nr,Yr,$r),Jr=window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__||c.d,zr=[Xr,Object(c.a)(Ht)],Qr=function(t){var e=Object(c.e)(Ct,xt(t),Jr.apply(void 0,zr));return window.store=e,e};e.default=function(){var t=document.getElementById("app");if(t){var e;try{e=JSON.parse(localStorage.getItem("gbp-web-state"))}catch(t){e={}}var n=Object.assign(Ut.a,e);Promise.all([r.e(6),r.e(0)]).then(r.bind(null,532)).then((function(e){var r=e.default;Object(i.render)(a.a.createElement(o.a,{store:Qr(n)},a.a.createElement(r,null)),t)}))}}}}]);