(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{102:function(e,t,a){},103:function(e,t,a){},104:function(e,t,a){},105:function(e,t,a){},106:function(e,t,a){},108:function(e,t,a){},109:function(e,t,a){},110:function(e,t,a){},111:function(e,t,a){},112:function(e,t,a){},113:function(e,t,a){},114:function(e,t,a){},115:function(e,t,a){},116:function(e,t,a){},117:function(e,t,a){},118:function(e,t,a){},119:function(e,t,a){},120:function(e,t,a){},121:function(e,t,a){},122:function(e,t,a){},123:function(e,t,a){},124:function(e,t,a){},125:function(e,t,a){},126:function(e,t,a){},127:function(e,t,a){},128:function(e,t,a){},129:function(e,t,a){},130:function(e,t,a){},131:function(e,t,a){},132:function(e,t,a){},133:function(e,t,a){},229:function(e,t,a){"use strict";a.r(t);var n=a(17),r=Object(n.b)((function(e){return{imageCount:e.images.length,pageSize:e.pageSize,selectedCount:e.imageSelection.length}}),(function(){return{}})),o=a(0),i=a.n(o),s=a(24),l=a.n(s),c=a(73),u=a(81),p=Object(n.b)((function(e){return{importQueueSize:e.importQueueSize}}),(function(){return{}})),f=a(64),m=a.n(f),h=(a(97),function(e){switch(e.name){case"download":return i.a.createElement("svg",{className:"svg",viewBox:"0 0 20 20"},i.a.createElement("path",{d:"M8 3v7H5s5 6 5 6c0 0 5-6 5-6h-3V3z"}),i.a.createElement("path",{d:"M5 15v2l10 0V15z"}));case"delete":return i.a.createElement("svg",{className:"svg",viewBox:"0 0 20 20"},i.a.createElement("path",{d:"M13 5v10h-1V5zM7 5v10H6V5zm4 0v10h-1V5zM9 5v10H8V5zM4 3v2h1v12h9V5h1V3h-4V2H8v1z"}));case"share":return i.a.createElement("svg",{className:"svg",viewBox:"0 0 20 20"},i.a.createElement("path",{d:"M14 3.5A2.5 2.5 0 0011.5 6a2.5 2.5 0 00.025.336l-3.85 1.812A2.5 2.5 0 006 7.5 2.5 2.5 0 003.5 10 2.5 2.5 0 006 12.5a2.5 2.5 0 001.676-.648l3.85 1.812A2.5 2.5 0 0011.5 14a2.5 2.5 0 002.5 2.5 2.5 2.5 0 002.5-2.5 2.5 2.5 0 00-2.5-2.5 2.5 2.5 0 00-1.836.807l-3.728-1.754A2.5 2.5 0 008.5 10a2.5 2.5 0 00-.066-.553l3.73-1.754A2.5 2.5 0 0014 8.5 2.5 2.5 0 0016.5 6 2.5 2.5 0 0014 3.5z"}));case"edit":return i.a.createElement("svg",{className:"svg",viewBox:"0 0 20 20"},i.a.createElement("path",{d:"M4 14.978v1.978L16 17v-2.022zM13.5 3l-8 8-1 3.5 3.5-1 8-8L13.5 3zm0 .8l.85.85-9.1 9.1L6 11.5l7.5-7.7z"}));case"reset":return i.a.createElement("svg",{className:"svg",viewBox:"0 0 20 20"},i.a.createElement("path",{d:"M6 10a4 4 0 104-4v2L4 5l6-3v2a6 6 0 11-6 6"}));case"checkmark":return i.a.createElement("svg",{className:"svg checked",viewBox:"0 0 20 20"},i.a.createElement("path",{d:"M15 5v10H5V5zM3 3v14h14V3z"}),i.a.createElement("path",{className:"tick",d:"M5.5 11l3 3 6-6.5L13 6l-4.5 5L7 9.5z"}));case"circle":return i.a.createElement("svg",{className:"svg",viewBox:"0 0 20 20"},i.a.createElement("circle",{r:"8",cx:"10",cy:"10"}));case"add":return i.a.createElement("svg",{className:"svg",viewBox:"0 0 20 20"},i.a.createElement("path",{d:"M8 2v6H2v4h6v6h4v-6h6V8h-6V2z"}));case"remove":return i.a.createElement("svg",{className:"svg",viewBox:"0 0 20 20"},i.a.createElement("path",{d:"M2 8v4h16V8z"}));case"save":return i.a.createElement("svg",{className:"svg",viewBox:"0 0 20 20"},i.a.createElement("path",{d:"M12 4v3h-2V4zM5 15v-4h10v4zm8-7H6l.01-4H4v12h12V6l-2-2h-1z"}));case"list":return i.a.createElement("svg",{className:"svg",viewBox:"0 0 40 40"},i.a.createElement("path",{d:"M6 6v4h28V6zm0 8v4h28v-4zm0 8v4h28v-4zm0 8v4h28V30z"}));case"1x":return i.a.createElement("svg",{className:"svg",viewBox:"0 0 40 40"},i.a.createElement("path",{d:"M5 5v6h6V5zm8 0v6h6V5zm8 0v6h6V5zm8 0v6h6V5zM5 13v6h6v-6zm8 0v6h6v-6zm8 0v6h6v-6zm8 0v6h6v-6zM5 21v6h6v-6zm8 0v6h6v-6zm8 0v6h6v-6zm8 0v6h6v-6zM5 29v6h6v-6zm8 0v6h6v-6zm8 0v6h6v-6zm8 0v6h6v-6z"}));case"2x":return i.a.createElement("svg",{className:"svg",viewBox:"0 0 40 40"},i.a.createElement("path",{d:"M22 6v12h12V6zm0 16v12h12V22zM6 6v12h12V6zm0 16v12h12V22z"}));case"3x":return i.a.createElement("svg",{className:"svg",viewBox:"0 0 40 40"},i.a.createElement("path",{d:"M30 30V10H10v20"}));case"4x":return i.a.createElement("svg",{className:"svg",viewBox:"0 0 40 40"},i.a.createElement("path",{d:"M34 34V6H6v28z"}));case"close":return i.a.createElement("svg",{className:"svg",viewBox:"0 0 40 40"},i.a.createElement("path",{d:"M7 3l12 17L7 37h2l11-15.584L31 37h2L21 20 33 3h-2L20 18.584 9 3H7z"}));case"fullscreen":return i.a.createElement("svg",{className:"svg",viewBox:"0 0 40 40"},i.a.createElement("path",{d:"M37 13h-2V9h-5V7h7zM3 13h2V9h5V7H3zm34 14h-2v4h-5v2h7zM3 27h2v4h5v2H3z"}));case"right":return i.a.createElement("svg",{className:"svg",viewBox:"0 0 40 40"},i.a.createElement("path",{d:"M17 3l12 17-12 17h-2l12-17L15 3z"}));case"left":return i.a.createElement("svg",{className:"svg",viewBox:"0 0 40 40"},i.a.createElement("path",{d:"M23 3L11 20l12 17h2L13 20 25 3z"}));case"burger":return i.a.createElement("svg",{className:"svg",viewBox:"0 0 40 40"},i.a.createElement("path",{d:"M2 6v4h36V6zm0 12v4h36v-4zm0 12v4h36v-4z"}));case"close-nav":return i.a.createElement("svg",{className:"svg",viewBox:"0 0 40 40"},i.a.createElement("path",{d:"M5.5 2.5l-3 3L17 20 2.5 34.5l3 3L20 23l14.5 14.5 3-3L23 20 37.5 5.5l-3-3L20 17z"}));default:return null}});h.propTypes={name:l.a.string.isRequired},h.defaultProps={};var d=h;function b(e){return(b="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function y(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function g(e,t){return(g=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function v(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,n=S(e);if(t){var r=S(this).constructor;a=Reflect.construct(n,arguments,r)}else a=n.apply(this,arguments);return _(this,a)}}function _(e,t){return!t||"object"!==b(t)&&"function"!=typeof t?E(e):t}function E(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function S(e){return(S=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var k=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&g(e,t)}(o,e);var t,a,n,r=v(o);function o(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,o),(t=r.call(this,e)).state={mobileNavOpen:!1},t.closeMobileNav=t.closeMobileNav.bind(E(t)),t}return t=o,(a=[{key:"closeMobileNav",value:function(){this.setState({mobileNavOpen:!1})}},{key:"render",value:function(){var e=this;return i.a.createElement("nav",{className:m()("navigation",{"navigation--mobile-open":this.state.mobileNavOpen})},i.a.createElement("button",{className:"navigation__burger-button",type:"button",onClick:function(){var t=!e.state.mobileNavOpen;e.setState({mobileNavOpen:t})}},i.a.createElement(d,{name:this.state.mobileNavOpen?"close-nav":"burger"})),i.a.createElement("ul",{className:"navigation__list"},i.a.createElement("li",{className:"navigation__entry"},i.a.createElement(c.b,{to:"/",activeClassName:"navigation__link--active",className:"navigation__link",exact:!0,onClick:this.closeMobileNav},"Home")),i.a.createElement("li",{className:"navigation__entry"},i.a.createElement(c.b,{to:"/gallery",activeClassName:"navigation__link--active",className:"navigation__link",exact:!0,onClick:this.closeMobileNav},"Gallery")),i.a.createElement("li",{className:"navigation__entry"},i.a.createElement(c.b,{to:"/palettes",activeClassName:"navigation__link--active",className:"navigation__link",exact:!0,onClick:this.closeMobileNav},"Palettes")),i.a.createElement("li",{className:"navigation__entry"},i.a.createElement(c.b,{to:"/settings",activeClassName:"navigation__link--active",className:"navigation__link",exact:!0,onClick:this.closeMobileNav},"Settings")),i.a.createElement("li",{className:"navigation__entry"},i.a.createElement(c.b,{to:"/dump",activeClassName:"navigation__link--active",className:"navigation__link",exact:!0,onClick:this.closeMobileNav},"Dump"))),this.props.importQueueSize>0?i.a.createElement("div",{className:"navigation__queuesize"},this.props.importQueueSize):null)}}])&&y(t.prototype,a),n&&y(t,n),o}(i.a.Component);k.propTypes={importQueueSize:l.a.number.isRequired},k.defaultProps={};var N=k,R=(a(102),p(N)),O=Object(n.b)((function(e){return{message:e.confirmation.message||null}}),(function(e){return{confirm:function(){e({type:"CONFIRM_CONFIRMATION"})},deny:function(){e({type:"DENY_CONFIRMATION"})}}})),w=Object(n.b)((function(){return{}}),(function(){return{}})),j=function(e){return i.a.createElement("div",{className:"buttons"},i.a.createElement("button",{className:"buttons__button buttons__button--deny",type:"button",onClick:e.deny},"Cancel"),i.a.createElement("button",{className:"buttons__button buttons__button--confirm",type:"button",onClick:e.confirm,autoFocus:!0},"Ok"))};j.propTypes={confirm:l.a.func.isRequired,deny:l.a.func.isRequired},j.defaultProps={};var P=j,C=(a(103),w(P)),T=function(e){return e.message?i.a.createElement("div",{className:"confirmation"},i.a.createElement("button",{type:"button",className:"confirmation__backdrop",onClick:e.deny}),i.a.createElement("div",{className:"confirmation__box"},i.a.createElement("div",{className:"confirmation__message"},e.message),i.a.createElement(C,{confirm:e.confirm,deny:e.deny}))):null};T.propTypes={message:l.a.string,confirm:l.a.func.isRequired,deny:l.a.func.isRequired},T.defaultProps={message:null};var x=T,I=(a(104),O(x)),q=a(9),z=Object(n.b)((function(e){var t,a;e.editImage.hashes?(t=e.editImage.palette,a=Object(q.a)(e,e.editImage.hashes,e.editImage.frame)):(t=e.palettes.find((function(t){return t.shortName===e.editImage.palette})),a=null);var n=e.windowDimensions.width<=480?e.windowDimensions.height:Math.min(800,e.windowDimensions.height);return{batch:e.editImage.batch,hash:e.editImage.hash,tags:e.editImage.tags,title:e.editImage.title,hashes:e.editImage.hashes,frame:e.editImage.frame,lockFrame:e.editImage.lockFrame||!1,palette:t,frames:a,height:n}}),(function(e){return{updateTitle:function(t){e({type:"UPDATE_EDIT_IMAGE",payload:{title:t,confirmed:!0}})},updatePalette:function(t,a){e({type:"UPDATE_EDIT_IMAGE",payload:{palette:t,confirmed:a}})},updateFrame:function(t){e({type:"UPDATE_EDIT_IMAGE",payload:{frame:t,confirmed:!0}})},updateFrameLock:function(t){e({type:"UPDATE_EDIT_IMAGE",payload:{lockFrame:t,confirmed:!0}})},updateTags:function(t,a){e({type:"UPDATE_EDIT_IMAGE",payload:{tag:a,mode:t,confirmed:!0}})},save:function(){e({type:"SAVE_EDIT_IMAGE"})},cancel:function(){e({type:"CANCEL_EDIT_IMAGE"})}}})),M=Object(n.b)((function(){return{}}),(function(){return{}})),D=a(11),F=a(12);function A(e){return(A="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function L(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function B(e,t){return(B=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function G(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,n=U(e);if(t){var r=U(this).constructor;a=Reflect.construct(n,arguments,r)}else a=n.apply(this,arguments);return V(this,a)}}function V(e,t){return!t||"object"!==A(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function U(e){return(U=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var H=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&B(e,t)}(o,e);var t,a,n,r=G(o);function o(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,o),(t=r.call(this,e)).canvasRef=null,t}return t=o,(a=[{key:"componentDidUpdate",value:function(){this.updateCanvasContent()}},{key:"updateCanvasContent",value:function(){try{this.props.palette.palette?(new D.a).update(this.canvasRef,this.props.tiles,this.props.palette.palette,this.props.lockFrame):(new F.a).update(this.canvasRef,this.props.tiles,this.props.palette,this.props.lockFrame)}catch(e){console.error("error in GameBoyImage: ".concat(e.message))}}},{key:"render",value:function(){var e=this;return i.a.createElement("canvas",{className:"gameboy-image",width:160,ref:function(t){e.canvasRef=t,t&&e.updateCanvasContent()}})}}])&&L(t.prototype,a),n&&L(t,n),o}(o.Component);H.propTypes={tiles:l.a.oneOfType([l.a.arrayOf(l.a.string),l.a.arrayOf(l.a.object)]).isRequired,palette:l.a.object.isRequired,lockFrame:l.a.bool.isRequired},H.defaultProps={};var K=H,W=(a(105),M(K)),X=Object(n.b)((function(){return{}}),(function(){return{}})),Y=Object(n.b)((function(){return{}}),(function(){return{}})),Z=a(21),J=function(e){return i.a.createElement(i.a.Fragment,null,i.a.createElement("select",{className:"frame-select",value:e.frame,onChange:function(t){e.updateFrame(t.target.value)}},i.a.createElement("option",{value:""},"As imported / No frame"),Z.a.map((function(e){var t=e.id,a=e.name;return i.a.createElement("option",{key:t,value:t},a)}))),i.a.createElement("label",{className:m()("frame-select__check-label",{"frame-select__check-label--checked":e.lockFrame})},i.a.createElement("input",{type:"checkbox",className:"frame-select__checkbox",checked:e.lockFrame,onChange:function(t){var a=t.target;e.updateFrameLock(a.checked)}}),i.a.createElement(d,{name:"checkmark"}),i.a.createElement("span",{className:"frame-select__check-label-text"},"Palette does not affect frame")))};J.propTypes={frame:l.a.string.isRequired,updateFrame:l.a.func.isRequired,updateFrameLock:l.a.func.isRequired,lockFrame:l.a.bool.isRequired},J.defaultProps={};var Q=J,$=(a(106),Y(Q)),ee=Object(n.b)((function(){return{}}),(function(){return{}})),te=a(107),ae=Object(n.b)((function(){return{}}),(function(){return{}})),ne=a(223),re=function(e){var t=e.domain,a=e.handle,n=(0,e.getHandleProps)(a.id),r=n.onKeyDown,o=n.onMouseDown,s=n.onTouchStart;return i.a.createElement("button",{role:"slider",type:"button","aria-valuemin":t.min,"aria-valuemax":t.max,"aria-valuenow":a.value,className:"color-slider__handle",style:{left:"".concat(a.percent,"%")},onKeyDown:r,onMouseDown:o,onTouchStart:s})};re.propTypes={domain:l.a.array.isRequired,handle:l.a.shape({id:l.a.string.isRequired,value:l.a.number.isRequired,percent:l.a.number.isRequired}).isRequired,getHandleProps:l.a.func.isRequired},re.defaultProps={};var oe=re,ie=function(e){var t=(0,e.getRailProps)(),a=t.onMouseDown,n=t.onTouchStart;return i.a.createElement("button",{type:"button",className:"color-slider__rail",onMouseDown:a,onTouchStart:n,tabIndex:"-1"},i.a.createElement("div",{className:"color-slider__rail-inner"}))};ie.propTypes={getRailProps:l.a.func.isRequired};var se=ie,le=[0,255],ce=function(e){return i.a.createElement("div",{className:"color-slider","data-color":e.color},i.a.createElement("button",{className:"color-slider__button color-slider__button--reset",type:"button",onClick:function(){e.onChange([0,85,170,255])}},i.a.createElement(d,{name:"reset"})),i.a.createElement(ne.c,{className:"color-slider__root",mode:2,step:4,domain:le,onUpdate:e.onChange,onChange:e.onChange,values:e.values},i.a.createElement(ne.b,null,(function(e){var t=e.getRailProps;return i.a.createElement(se,{getRailProps:t})})),i.a.createElement(ne.a,null,(function(e){var t=e.handles,a=e.getHandleProps;return i.a.createElement("div",{className:"slider-handles"},t.map((function(e){return i.a.createElement(oe,{key:e.id,handle:e,domain:le,getHandleProps:a})})))}))))};ce.propTypes={color:l.a.oneOf(["r","g","b","n"]).isRequired,onChange:l.a.func.isRequired,values:l.a.array.isRequired};var ue=ce,pe=(a(108),ae(ue));function fe(e){return(fe="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function me(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function he(e,t){return(he=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function de(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,n=ye(e);if(t){var r=ye(this).constructor;a=Reflect.construct(n,arguments,r)}else a=n.apply(this,arguments);return be(this,a)}}function be(e,t){return!t||"object"!==fe(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function ye(e){return(ye=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var ge=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&he(e,t)}(o,e);var t,a,n,r=de(o);function o(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,o),(t=r.call(this,e)).state=e.values,t.sendUpdate=Object(te.debounce)(t.sendUpdate,150,!1),t}return t=o,(a=[{key:"change",value:function(e,t){var a,n,r;this.setState((r=t,(n=e)in(a={})?Object.defineProperty(a,n,{value:r,enumerable:!0,configurable:!0,writable:!0}):a[n]=r,a),this.sendUpdate)}},{key:"sendUpdate",value:function(){this.props.onChange(this.state,!0)}},{key:"render",value:function(){var e=this;return i.a.createElement("div",{className:"grey-select"},["r","g","b","n"].map((function(t){return i.a.createElement(pe,{key:"slider-".concat(t),color:t,values:e.state[t],onChange:function(a){e.change(t,a)}})})))}}])&&me(t.prototype,a),n&&me(t,n),o}(i.a.Component);ge.propTypes={values:l.a.object.isRequired,onChange:l.a.func.isRequired},ge.defaultProps={};var ve=ge,_e=(a(109),ee(ve)),Ee=Object(n.b)((function(e){return{palettes:e.palettes}}),(function(){return{}}));function Se(e){return(Se="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function ke(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function Ne(e,t){return(Ne=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Re(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,n=we(e);if(t){var r=we(this).constructor;a=Reflect.construct(n,arguments,r)}else a=n.apply(this,arguments);return Oe(this,a)}}function Oe(e,t){return!t||"object"!==Se(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function we(e){return(we=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var je=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Ne(e,t)}(o,e);var t,a,n,r=Re(o);function o(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,o),(t=r.call(this,e)).state={initiallySelected:e.value},t}return t=o,(a=[{key:"render",value:function(){var e=this;return i.a.createElement(i.a.Fragment,null,i.a.createElement("select",{className:"palette-select",value:this.props.value,onChange:function(t){e.props.onChange(t.target.value,!0),e.setState({initiallySelected:t.target.value})}},this.props.palettes.map((function(e){var t=e.shortName,a=e.name;return i.a.createElement("option",{key:t,value:t},a)}))),i.a.createElement("ul",{className:"fancy-palette-select"},this.props.palettes.map((function(t){var a=t.shortName,n=t.name,r=t.palette;return i.a.createElement("li",{key:a,className:m()("fancy-palette-select__entry",{"fancy-palette-select__entry--active":e.state.initiallySelected===a})},i.a.createElement("button",{type:"button",className:"fancy-palette-select__button",title:n,onClick:function(){e.props.onChange(a,!0),e.setState({initiallySelected:a})},onMouseEnter:function(){e.props.onChange(a,!1)},onMouseLeave:function(){e.props.onChange(e.state.initiallySelected)}},i.a.createElement("span",{className:"fancy-palette-select__color",style:{backgroundColor:r[0]}}),i.a.createElement("span",{className:"fancy-palette-select__color",style:{backgroundColor:r[1]}}),i.a.createElement("span",{className:"fancy-palette-select__color",style:{backgroundColor:r[2]}}),i.a.createElement("span",{className:"fancy-palette-select__color",style:{backgroundColor:r[3]}})))}))))}}])&&ke(t.prototype,a),n&&ke(t,n),o}(i.a.Component);je.propTypes={palettes:l.a.array.isRequired,value:l.a.string.isRequired,onChange:l.a.func.isRequired},je.defaultProps={};var Pe=je,Ce=(a(110),Ee(Pe)),Te=Object(n.b)((function(){return{}}),(function(){return{}}));function xe(e){return(xe="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Ie(e){return function(e){if(Array.isArray(e))return qe(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return qe(e,t);var a=Object.prototype.toString.call(e).slice(8,-1);"Object"===a&&e.constructor&&(a=e.constructor.name);if("Map"===a||"Set"===a)return Array.from(e);if("Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a))return qe(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function qe(e,t){(null==t||t>e.length)&&(t=e.length);for(var a=0,n=new Array(t);a<t;a++)n[a]=e[a];return n}function ze(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function Me(e,t){return(Me=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function De(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,n=Ae(e);if(t){var r=Ae(this).constructor;a=Reflect.construct(n,arguments,r)}else a=n.apply(this,arguments);return Fe(this,a)}}function Fe(e,t){return!t||"object"!==xe(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Ae(e){return(Ae=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var Le=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Me(e,t)}(o,e);var t,a,n,r=De(o);function o(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,o),(t=r.call(this,e)).state={newTag:""},t}return t=o,(a=[{key:"addNewTag",value:function(e){e&&(this.props.updateTags("add",e),this.setState({newTag:""}))}},{key:"render",value:function(){var e=this,t=function(e){return e.filter((function(t,a){return e.findIndex((function(e){return e===t}))===a}))}([].concat(Ie(this.props.tags.initial),Ie(this.props.tags.add)));return i.a.createElement("ul",{className:"tags-select"},t.map((function(t){return i.a.createElement("li",{className:m()("tags-select__tag",{"tags-select__tag--add":e.props.tags.add.includes(t),"tags-select__tag--remove":e.props.tags.remove.includes(t)}),key:t},i.a.createElement("button",{type:"button",className:"tags-select__button tags-select__button--add",onClick:function(){return e.props.updateTags("add",t)}},i.a.createElement(d,{name:"add"})),i.a.createElement("button",{type:"button",className:"tags-select__button tags-select__button--remove",onClick:function(){return e.props.updateTags("remove",t)}},i.a.createElement(d,{name:"remove"})),i.a.createElement("span",{className:"tags-select__tag-name"},t))})),i.a.createElement("li",{className:"tags-select__tag tags-select__tag--input"},i.a.createElement("input",{type:"text",className:"tags-select__tag-name",onChange:function(t){var a=t.target;e.setState({newTag:a.value})},onBlur:function(t){var a=t.target;e.addNewTag(a.value)},onKeyUp:function(t){switch(t.key){case"Enter":e.addNewTag(t.target.value)}},value:this.state.newTag})))}}])&&ze(t.prototype,a),n&&ze(t,n),o}(i.a.Component);Le.propTypes={tags:l.a.shape({initial:l.a.array.isRequired,add:l.a.array.isRequired,remove:l.a.array.isRequired}).isRequired,updateTags:l.a.func.isRequired},Le.defaultProps={};var Be=Le,Ge=(a(111),Te(Be));function Ve(e){return(Ve="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Ue(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function He(e,t){return(He=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Ke(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,n=Xe(e);if(t){var r=Xe(this).constructor;a=Reflect.construct(n,arguments,r)}else a=n.apply(this,arguments);return We(this,a)}}function We(e,t){return!t||"object"!==Ve(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Xe(e){return(Xe=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var Ye=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&He(e,t)}(o,e);var t,a,n,r=Ke(o);function o(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,o),(t=r.call(this,e)).state={tabIndex:0},t}return t=o,(a=[{key:"focusEvent",value:function(e){var t=this;return function(){t.setState({tabIndex:e})}}},{key:"render",value:function(){return i.a.createElement("div",{className:"edit-image-tabs"},i.a.createElement("ul",{className:"edit-image-tabs__list",style:{marginLeft:"-".concat(100*this.state.tabIndex,"%")}},i.a.createElement("li",{className:m()("edit-image-tabs__tab",{"edit-image-tabs__tab--active":0===this.state.tabIndex}),onFocus:this.focusEvent(0),onClick:this.focusEvent(0)},this.props.hashes?i.a.createElement(i.a.Fragment,null,i.a.createElement("button",{type:"button",className:"edit-image-tabs__button"},"Edit Greytones"),i.a.createElement(_e,{values:this.props.palette,onChange:this.props.updatePalette})):i.a.createElement(i.a.Fragment,null,i.a.createElement("button",{type:"button",className:"edit-image-tabs__button"},"Select Palette"),i.a.createElement(Ce,{value:this.props.palette.shortName,onChange:this.props.updatePalette}))),this.props.regularImage?i.a.createElement("li",{className:m()("edit-image-tabs__tab",{"edit-image-tabs__tab--active":1===this.state.tabIndex}),onFocus:this.focusEvent(1),onClick:this.focusEvent(1)},i.a.createElement("button",{type:"button",className:"edit-image-tabs__button"},"Select Frame"),i.a.createElement($,{updateFrame:this.props.updateFrame,updateFrameLock:this.props.updateFrameLock,frame:this.props.frame||"",lockFrame:this.props.lockFrame})):null,i.a.createElement("li",{className:m()("edit-image-tabs__tab",{"edit-image-tabs__tab--active":2===this.state.tabIndex}),onFocus:this.focusEvent(this.props.regularImage?2:1),onClick:this.focusEvent(this.props.regularImage?2:1)},i.a.createElement("button",{type:"button",className:"edit-image-tabs__button"},"Tags"),i.a.createElement(Ge,{updateTags:this.props.updateTags,tags:this.props.tags,batchTags:this.props.batchTags}))))}}])&&Ue(t.prototype,a),n&&Ue(t,n),o}(i.a.Component);Ye.propTypes={hashes:l.a.object,palette:l.a.object,frame:l.a.string,tags:l.a.shape({initial:l.a.array.isRequired,add:l.a.array.isRequired,remove:l.a.array.isRequired}).isRequired,batchTags:l.a.shape({initial:l.a.array.isRequired,add:l.a.array.isRequired,remove:l.a.array.isRequired}),regularImage:l.a.bool.isRequired,lockFrame:l.a.bool.isRequired,updatePalette:l.a.func.isRequired,updateTags:l.a.func.isRequired,updateFrame:l.a.func.isRequired,updateFrameLock:l.a.func.isRequired},Ye.defaultProps={hashes:null,batchTags:null,palette:null,frame:null};var Ze=Ye,Je=(a(112),X(Ze)),Qe=a(1);function $e(e){return($e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function et(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function tt(e,t){return(tt=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function at(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,n=rt(e);if(t){var r=rt(this).constructor;a=Reflect.construct(n,arguments,r)}else a=n.apply(this,arguments);return nt(this,a)}}function nt(e,t){return!t||"object"!==$e(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function rt(e){return(rt=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var ot=document.querySelector("body"),it=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&tt(e,t)}(o,e);var t,a,n,r=at(o);function o(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,o),(t=r.call(this,e)).state={tiles:null,loaded:!1,hash:e.hash},t.restoreScroll=window.scrollY,t}return t=o,n=[{key:"getDerivedStateFromProps",value:function(e,t){return e.hash===t.hash?t:{tiles:null,loaded:!1,hash:e.hash}}}],(a=[{key:"componentDidMount",value:function(){this.props.hash&&this.loadImage()}},{key:"componentDidUpdate",value:function(e){!this.props.hash||e.hash===this.props.hash&&e.frame===this.props.frame||this.loadImage()}},{key:"loadImage",value:function(){var e=this;this.props.hashes?Promise.all([Object(Qe.b)(this.props.hashes.r,this.props.frames.r),Object(Qe.b)(this.props.hashes.g,this.props.frames.g),Object(Qe.b)(this.props.hashes.b,this.props.frames.b),Object(Qe.b)(this.props.hashes.n,this.props.frames.n)]).then((function(t){e.setState({tiles:F.a.rgbnTiles(t),loaded:!0})})):Object(Qe.b)(this.props.hash,this.props.frame).then((function(t){e.setState({tiles:t,loaded:!0})}))}},{key:"applyOverlayScrolling",value:function(){!this.state.loaded&&ot.classList.contains("has-overlay")&&(ot.classList.remove("has-overlay"),window.scrollTo(0,this.restoreScroll)),this.state.loaded&&!ot.classList.contains("has-overlay")&&(this.restoreScroll=window.scrollY,ot.classList.add("has-overlay"))}},{key:"render",value:function(){var e=this;if(this.applyOverlayScrolling(),!this.state.loaded)return null;var t=this.props.palette?this.props.palette.palette:null,a=this.props.batch&&!(!this.props.tags.add.length&&!this.props.tags.remove.length),n=this.props.batch&&(this.props.batch.title||this.props.batch.palette||this.props.batch.frame||a);return i.a.createElement("div",{className:"edit-image"},i.a.createElement("div",{className:"edit-image__backdrop"}),i.a.createElement("div",{className:"edit-image__box",style:{height:"".concat(this.props.height,"px")}},i.a.createElement("div",{className:"edit-image__box-content"},i.a.createElement("label",{className:"edit-image__header"},i.a.createElement("input",{className:"edit-image__header-edit",placeholder:"Add a title",value:this.props.title,onChange:function(t){e.props.updateTitle(t.target.value)}})),i.a.createElement(W,{tiles:this.state.tiles,palette:this.props.palette,lockFrame:this.props.lockFrame}),this.props.batch&&this.props.batch.selection&&this.props.batch.selection.length?i.a.createElement("div",{className:"edit-image__batch-warn",style:t?{borderLeftColor:t[1],borderTopColor:t[1],backgroundColor:t[2],borderRightColor:t[3],borderBottomColor:t[3],color:t[0]}:null},"You are editing ".concat(this.props.batch.selection.length," images"),n?i.a.createElement("p",{className:"edit-image__batch-update-list"},"Will update: ",[this.props.batch.title?"title":null,this.props.batch.palette?"palette":null,this.props.batch.frame?"frame":null,a?"tags":null].filter(Boolean).join(", ")):null):null,i.a.createElement(Je,{regularImage:360===this.state.tiles.length,lockFrame:this.props.lockFrame,hashes:this.props.hashes,palette:this.props.palette,frame:this.props.frame,tags:this.props.tags,updatePalette:this.props.updatePalette,updateFrame:this.props.updateFrame,updateFrameLock:this.props.updateFrameLock,updateTags:this.props.updateTags})),i.a.createElement(C,{confirm:this.props.save,deny:this.props.cancel})))}}])&&et(t.prototype,a),n&&et(t,n),o}(i.a.Component);it.propTypes={batch:l.a.object,cancel:l.a.func.isRequired,hash:l.a.string,hashes:l.a.object,palette:l.a.object,lockFrame:l.a.bool.isRequired,frame:l.a.string,frames:l.a.object,save:l.a.func.isRequired,tags:l.a.shape({initial:l.a.array.isRequired,add:l.a.array.isRequired,remove:l.a.array.isRequired}),title:l.a.string,updatePalette:l.a.func.isRequired,updateTitle:l.a.func.isRequired,updateFrame:l.a.func.isRequired,updateFrameLock:l.a.func.isRequired,updateTags:l.a.func.isRequired,height:l.a.number.isRequired},it.defaultProps={batch:null,title:null,hash:null,hashes:null,palette:null,tags:{initial:[],add:[],remove:[]},frame:null,frames:null};var st=it,lt=(a(113),z(st)),ct=Object(n.b)((function(e){return{tiles:e.lineBuffer,palette:e.palettes.find((function(t){return t.shortName===e.activePalette}))}}),(function(){return{}})),ut=function(e){return i.a.createElement("div",{className:m()("live-image",{"live-image--receiving":e.tiles.length})},i.a.createElement(W,{palette:e.palette,tiles:e.tiles,lockFrame:!1}))};ut.propTypes={tiles:l.a.arrayOf(l.a.string).isRequired,palette:l.a.object.isRequired},ut.defaultProps={};var pt=ut,ft=(a(114),ct(pt)),mt=a(18),ht=Object(n.b)((function(e){var t,a,n=Object(mt.a)(e),r=n.find((function(t,a){return a===e.lightboxImage}));return r?(r.hashes?(t=r.palette,a=Object(q.a)(e,r.hashes,r.frame)):(t=e.palettes.find((function(e){return e.shortName===r.palette})),a=null),{hash:r.hash,title:r.title,created:r.created,hashes:r.hashes,frame:r.frame,isFullscreen:e.isFullscreen,palette:t,frames:a,index:e.lightboxImage||0,size:n.length||0,lockFrame:r.lockFrame||!1}):{isFullscreen:!1,lockFrame:!1,index:0,size:0}}),(function(e){return{close:function(){e({type:"SET_LIGHTBOX_IMAGE_INDEX",payload:null})},prev:function(){e({type:"LIGHTBOX_PREV"})},next:function(){e({type:"LIGHTBOX_NEXT"})},fullscreen:function(){e({type:"LIGHTBOX_FULLSCREEN"})}}})),dt=a(6),bt=a.n(dt),yt=a(3);function gt(e){return(gt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function vt(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function _t(e,t){return(_t=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Et(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,n=kt(e);if(t){var r=kt(this).constructor;a=Reflect.construct(n,arguments,r)}else a=n.apply(this,arguments);return St(this,a)}}function St(e,t){return!t||"object"!==gt(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function kt(e){return(kt=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var Nt=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&_t(e,t)}(o,e);var t,a,n,r=Et(o);function o(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,o),(t=r.call(this,e)).state={tiles:null,loaded:!1,hash:e.hash},t}return t=o,n=[{key:"getDerivedStateFromProps",value:function(e,t){return e.hash===t.hash?t:{tiles:null,loaded:!1,hash:e.hash}}}],(a=[{key:"componentDidUpdate",value:function(e){var t=this;e.hash!==this.props.hash&&this.props.hash&&(this.props.hashes?Promise.all([Object(Qe.b)(this.props.hashes.r,this.props.frames.r),Object(Qe.b)(this.props.hashes.g,this.props.frames.g),Object(Qe.b)(this.props.hashes.b,this.props.frames.b),Object(Qe.b)(this.props.hashes.n,this.props.frames.n)]).then((function(e){t.setState({tiles:F.a.rgbnTiles(e),loaded:!0})})):Object(Qe.b)(this.props.hash,this.props.frame).then((function(e){t.setState({tiles:e,loaded:!0})})))}},{key:"render",value:function(){return this.state.loaded?i.a.createElement("div",{className:"lightbox-image"},i.a.createElement("div",{className:"lightbox-image__backdrop"}),i.a.createElement("div",{className:"lightbox-image__box"},i.a.createElement("label",{className:"lightbox-image__title"},this.props.title),this.props.isFullscreen?null:i.a.createElement("button",{type:"button",className:"lightbox-image__button lightbox-image__button--fullscreen",onClick:this.props.fullscreen},i.a.createElement(d,{name:"fullscreen"})),i.a.createElement("button",{type:"button",className:"lightbox-image__button lightbox-image__button--close",onClick:this.props.close},i.a.createElement(d,{name:"close"})),i.a.createElement(W,{tiles:this.state.tiles,palette:this.props.palette,lockFrame:this.props.lockFrame}),i.a.createElement("div",{className:"lightbox-image__navigation"},this.props.index>0?i.a.createElement("button",{type:"button",className:"lightbox-image__button lightbox-image__button--left",onClick:this.props.prev},i.a.createElement(d,{name:"left"})):null,this.props.index<this.props.size-1?i.a.createElement("button",{type:"button",className:"lightbox-image__button lightbox-image__button--right",onClick:this.props.next},i.a.createElement(d,{name:"right"})):null),i.a.createElement("div",{className:"lightbox-image__created"},bt()(this.props.created,yt.a).format(yt.c)))):null}}])&&vt(t.prototype,a),n&&vt(t,n),o}(i.a.Component);Nt.propTypes={created:l.a.string,hash:l.a.string,hashes:l.a.object,palette:l.a.object,frame:l.a.string,frames:l.a.object,lockFrame:l.a.bool.isRequired,title:l.a.string,close:l.a.func.isRequired,prev:l.a.func.isRequired,next:l.a.func.isRequired,fullscreen:l.a.func.isRequired,isFullscreen:l.a.bool.isRequired,index:l.a.number.isRequired,size:l.a.number.isRequired},Nt.defaultProps={created:null,hash:null,hashes:null,palette:null,title:null,frame:null,frames:null};var Rt=Nt,Ot=(a(115),ht(Rt)),wt=Object(n.b)((function(e){return{hashes:{r:e.rgbnImages.r,g:e.rgbnImages.g,b:e.rgbnImages.b,n:e.rgbnImages.n},frames:Object(q.a)(e,e.rgbnImages,null)}}),(function(){return{}})),jt=Object(n.b)((function(e,t){var a=t.hash;return{isSelected:e.imageSelection.includes(a),canShare:e.canShare}}),(function(e,t){var a=t.hash,n=t.buttons;return{startDownload:n.includes("download")?function(){e({type:"START_DOWNLOAD",payload:a})}:null,deleteImage:n.includes("delete")?function(){e({type:"DELETE_IMAGE",payload:a})}:null,editImage:n.includes("edit")?function(){e({type:"EDIT_IMAGE",payload:a})}:null,shareImage:n.includes("share")?function(){e({type:"SHARE_IMAGE",payload:a})}:null,saveRGBNImage:n.includes("saveRGBNImage")?function(){e({type:"SAVE_RGBN_IMAGE",payload:a})}:null,updateImageToSelection:n.includes("select")?function(t){e("add"===t?{type:"IMAGE_SELECTION_ADD",payload:a}:{type:"IMAGE_SELECTION_REMOVE",payload:a})}:null}})),Pt=a(19),Ct=a.n(Pt);bt.a.extend(Ct.a);var Tt=function(e){return i.a.createElement("div",{className:"gallery-image-buttons",onClick:function(e){e.stopPropagation()},role:"presentation"},e.updateImageToSelection?i.a.createElement("button",{type:"button",className:m()("gallery-image-buttons__button",{"gallery-image-buttons__button--unchecked":!e.isSelected,"gallery-image-buttons__button--checked":e.isSelected}),onClick:function(){return e.updateImageToSelection(e.isSelected?"remove":"add")}},i.a.createElement(d,{name:"checkmark"})):null,e.startDownload?i.a.createElement("button",{type:"button",className:"gallery-image-buttons__button",onClick:e.startDownload},i.a.createElement(d,{name:"download"})):null,e.deleteImage?i.a.createElement("button",{type:"button",className:"gallery-image-buttons__button",onClick:e.deleteImage},i.a.createElement(d,{name:"delete"})):null,e.editImage?i.a.createElement("button",{type:"button",className:"gallery-image-buttons__button",onClick:e.editImage},i.a.createElement(d,{name:"edit"})):null,e.saveRGBNImage?i.a.createElement("button",{type:"button",className:"gallery-image-buttons__button",onClick:e.saveRGBNImage},i.a.createElement(d,{name:"save"})):null,e.shareImage&&e.canShare?i.a.createElement("button",{type:"button",className:"gallery-image-buttons__button",onClick:e.shareImage},i.a.createElement(d,{name:"share"})):null)};Tt.propTypes={canShare:l.a.bool.isRequired,deleteImage:l.a.func,editImage:l.a.func,isSelected:l.a.bool.isRequired,saveRGBNImage:l.a.func,shareImage:l.a.func,startDownload:l.a.func,updateImageToSelection:l.a.func},Tt.defaultProps={deleteImage:null,editImage:null,saveRGBNImage:null,shareImage:null,startDownload:null,updateImageToSelection:null};var xt=Tt,It=(a(116),jt(xt));function qt(e){return(qt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function zt(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function Mt(e,t){return(Mt=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Dt(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,n=At(e);if(t){var r=At(this).constructor;a=Reflect.construct(n,arguments,r)}else a=n.apply(this,arguments);return Ft(this,a)}}function Ft(e,t){return!t||"object"!==qt(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function At(e){return(At=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var Lt=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Mt(e,t)}(o,e);var t,a,n,r=Dt(o);function o(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,o),(t=r.call(this,e)).canvasRef=null,t.rgbnDecoder=new F.a,t}return t=o,(a=[{key:"componentDidUpdate",value:function(){this.updateCanvasContent()}},{key:"updateCanvasContent",value:function(){var e=this;Promise.all([Object(Qe.b)(this.props.hashes.r,this.props.frames.r),Object(Qe.b)(this.props.hashes.g,this.props.frames.g),Object(Qe.b)(this.props.hashes.b,this.props.frames.b),Object(Qe.b)(this.props.hashes.n,this.props.frames.n)]).then((function(t){if(e.canvasRef){var a=F.a.rgbnTiles(t);e.rgbnDecoder.update(e.canvasRef,a,yt.d)}}))}},{key:"render",value:function(){var e=this,t=this.props.hashes.r||this.props.hashes.g||this.props.hashes.b||this.props.hashes.n;return i.a.createElement("div",{className:m()("rgbn-image",{"rgbn-image--has-tiles":t})},t?i.a.createElement("canvas",{width:160,ref:function(t){e.canvasRef=t,t&&e.updateCanvasContent()}}):null,i.a.createElement(It,{hash:"newRGBN",buttons:["saveRGBNImage"]}))}}])&&zt(t.prototype,a),n&&zt(t,n),o}(o.Component);Lt.propTypes={hashes:l.a.object,frames:l.a.object},Lt.defaultProps={hashes:null,frames:null};var Bt=Lt,Gt=(a(117),wt(Bt)),Vt=Object(n.b)((function(e){return{socketUrl:e.socketUrl,exportScaleFactors:e.exportScaleFactors,pageSize:e.pageSize}}),(function(e){return{updateSocketUrl:function(t){e({type:"SET_SOCKET_URL",payload:t})},setPageSize:function(t){e({type:"SET_PAGESIZE",payload:t})},exportSettings:function(t){e({type:"SETTINGS_EXPORT",payload:t})},changeExportScaleFactors:function(t,a){e({type:"UPDATE_EXPORT_SCALE_FACTORS",payload:{factor:t,checked:a}})}}})),Ut=Object(n.b)((function(e){return{socketState:e.socketState}}),(function(){return{}})),Ht=function(e){return i.a.createElement("div",{className:m()("socketstate-indicator",{"socketstate-indicator--closed":e.socketState===WebSocket.CLOSED,"socketstate-indicator--closing":e.socketState===WebSocket.CLOSING,"socketstate-indicator--open":e.socketState===WebSocket.OPEN,"socketstate-indicator--connecting":e.socketState===WebSocket.CONNECTING})})};Ht.propTypes={socketState:l.a.number.isRequired},Ht.defaultProps={};var Kt=Ht,Wt=(a(118),Ut(Kt));function Xt(e){return(Xt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Yt(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function Zt(e,t){return(Zt=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Jt(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,n=$t(e);if(t){var r=$t(this).constructor;a=Reflect.construct(n,arguments,r)}else a=n.apply(this,arguments);return Qt(this,a)}}function Qt(e,t){return!t||"object"!==Xt(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function $t(e){return($t=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var ea=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Zt(e,t)}(o,e);var t,a,n,r=Jt(o);function o(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,o),(t=r.call(this,e)).state={sync:!0,socketUrl:e.socketUrl,pageSize:e.pageSize},t}return t=o,n=[{key:"getDerivedStateFromProps",value:function(e,t){return{url:t.sync?e.socketUrl:t.socketUrl,sync:t.sync,pageSize:t.sync?e.pageSize:t.pageSize}}}],(a=[{key:"render",value:function(){var e=this;return i.a.createElement("div",{className:"settings"},i.a.createElement("div",{className:"settings__inputgroup"},i.a.createElement("label",{htmlFor:"settings-pagesize",className:"settings__label"},"Page size",i.a.createElement("span",{className:m()("settings__note",{"settings__note--warn":!this.props.pageSize})},"(set to 0 to disable pagination - might cause performance issues on large sets of images)")),i.a.createElement("input",{id:"settings-pagesize",className:"settings__input",type:"number",min:"0",value:this.state.pageSize,onChange:function(t){var a=t.target;e.setState({sync:!1,pageSize:a.value})},onBlur:function(){e.props.setPageSize(parseInt(e.state.pageSize,10)||0),e.setState({sync:!0})}})),i.a.createElement("div",{className:"settings__inputgroup"},i.a.createElement("div",{className:"settings__label"},"Image export dimensions"),[1,2,3,4,6,8,10].map((function(t){return i.a.createElement("label",{key:t,className:m()("settings__label-check",{"settings__label-check--selected":e.props.exportScaleFactors.includes(t)}),title:"".concat(160*t,"×").concat(144*t)},"".concat(t,"×"),i.a.createElement("input",{type:"checkbox",checked:e.props.exportScaleFactors.includes(t),onChange:function(a){var n=a.target;e.props.changeExportScaleFactors(t,n.checked)}}))}))),"https:"===window.location.protocol?i.a.createElement("div",{className:"settings__inputgroup"},i.a.createElement("div",{className:"settings__label"},"SSL WebSockets are currently not supported by the"," ",i.a.createElement("a",{href:"https://github.com/gilmaimon/ArduinoWebsockets/issues/59"},"ArduinoWebsockets library"))):i.a.createElement("div",{className:"settings__inputgroup"},i.a.createElement("label",{htmlFor:"settings-url",className:"settings__label"},"Remote Socket URL",i.a.createElement(Wt,null)),i.a.createElement("input",{id:"settings-url",className:"settings__input",value:this.state.socketUrl,onChange:function(t){var a=t.target;e.setState({sync:!1,socketUrl:a.value})},onKeyUp:function(t){switch(t.key){case"Enter":e.props.updateSocketUrl(e.state.socketUrl);break;case"Escape":e.setState({socketUrl:e.props.socketUrl,sync:!0})}}}),i.a.createElement("button",{type:"button",className:"settings__button",onClick:function(){e.setState({sync:!0}),e.props.updateSocketUrl(e.state.socketUrl)}},"Connect")),i.a.createElement("div",{className:"settings__inputgroup settings__buttongroup"},i.a.createElement("button",{type:"button",className:"settings__button",onClick:function(){return e.props.exportSettings("debug")}},"Export debug settings"),i.a.createElement("button",{type:"button",className:"settings__button",onClick:function(){return e.props.exportSettings("settings")}},"Export settings"),i.a.createElement("button",{type:"button",className:"settings__button",onClick:function(){return e.props.exportSettings("full")}},"Export everything (including images)")))}}])&&Yt(t.prototype,a),n&&Yt(t,n),o}(i.a.Component);ea.propTypes={changeExportScaleFactors:l.a.func.isRequired,exportScaleFactors:l.a.array.isRequired,socketUrl:l.a.string.isRequired,updateSocketUrl:l.a.func.isRequired,pageSize:l.a.number.isRequired,setPageSize:l.a.func.isRequired,exportSettings:l.a.func.isRequired},ea.defaultProps={};var ta=ea,aa=(a(119),Vt(ta)),na=Object(n.b)((function(e){return{palettes:e.palettes}}),(function(){return{}})),ra=Object(n.b)((function(e,t){var a=t.shortName;return{isActive:e.activePalette===a}}),(function(e,t){var a=t.shortName;return{setActive:function(){e({type:"PALETTE_SET_ACTIVE",payload:a})}}})),oa=function(e){return i.a.createElement("li",{className:m()("palette",{"palette--active":e.isActive}),style:{backgroundImage:"linear-gradient(to right, ".concat(e.palette[0]).concat("36"," 0%, ").concat(e.palette[1]).concat("36"," 33.3%, ").concat(e.palette[2]).concat("36"," 66.6%, ").concat(e.palette[3]).concat("36"," 100%)")}},i.a.createElement("button",{onClick:function(){e.setActive()},className:"palette__button",type:"button"},i.a.createElement("div",{className:"palette__name"},e.name,i.a.createElement("span",{className:"palette__shortname"},e.shortName)),i.a.createElement("div",{className:"palette__colors"},i.a.createElement("div",{className:"palette__color",style:{backgroundColor:e.palette[0]},title:e.palette[0]}," "),i.a.createElement("div",{className:"palette__color",style:{backgroundColor:e.palette[1]},title:e.palette[1]}," "),i.a.createElement("div",{className:"palette__color",style:{backgroundColor:e.palette[2]},title:e.palette[2]}," "),i.a.createElement("div",{className:"palette__color",style:{backgroundColor:e.palette[3]},title:e.palette[3]}," "))))};oa.propTypes={shortName:l.a.string.isRequired,name:l.a.string.isRequired,isActive:l.a.bool.isRequired,setActive:l.a.func.isRequired,palette:l.a.arrayOf(l.a.string).isRequired},oa.defaultProps={};var ia=oa,sa=(a(120),ra(ia)),la=function(e){return i.a.createElement("ul",{className:"palettes"},e.palettes.map((function(e){return i.a.createElement(sa,{key:e.shortName,name:e.name,shortName:e.shortName,palette:e.palette})})))};la.propTypes={palettes:l.a.array.isRequired},la.defaultProps={};var ca=la,ua=(a(121),na(ca)),pa=Object(n.b)((function(){return{}}),(function(e){return{dumpPlainText:function(t){e({type:"IMPORT_PLAIN_TEXT",payload:t})}}}));function fa(e){return(fa="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function ma(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function ha(e,t){return(ha=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function da(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,n=ya(e);if(t){var r=ya(this).constructor;a=Reflect.construct(n,arguments,r)}else a=n.apply(this,arguments);return ba(this,a)}}function ba(e,t){return!t||"object"!==fa(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function ya(e){return(ya=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var ga=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&ha(e,t)}(s,e);var t,n,r,o=da(s);function s(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,s),(t=o.call(this,e)).state={text:""},t}return t=s,(n=[{key:"componentDidMount",value:function(){var e=this;a.e(1).then(a.bind(null,227)).then((function(t){var a=t.default;e.setState({text:a.join("\n")})}))}},{key:"render",value:function(){var e=this;return i.a.createElement(i.a.Fragment,null,i.a.createElement("div",{className:"dump"},i.a.createElement("textarea",{className:"dump__data",value:this.state.text,onChange:function(t){var a=t.target;e.setState({text:a.value})}})),i.a.createElement("button",{className:"dump__submit",type:"button",onClick:function(){e.props.dumpPlainText(e.state.text)}},"Import"))}}])&&ma(t.prototype,n),r&&ma(t,r),s}(i.a.Component);ga.propTypes={dumpPlainText:l.a.func.isRequired},ga.defaultProps={};var va=ga,_a=(a(122),pa(va)),Ea=Object(n.b)((function(e,t){var a=t.page*e.pageSize;return{images:Object(mt.a)(e).splice(a,e.pageSize||1/0),indexOffset:a,currentView:e.galleryView}}),(function(){return{}})),Sa=Object(n.b)((function(e,t){var a,n,r=t.hash,o=e.images.find((function(e){return e.hash===r}));return o.hashes?(a=o.palette,n=Object(q.a)(e,o.hashes,o.frame)):(a=e.palettes.find((function(e){return e.shortName===o.palette})),n=null),{title:o.title,created:o.created,index:o.index,frame:o.frame,hashes:o.hashes,tags:o.tags,isSelected:e.imageSelection.includes(r),palette:a,frames:n,lockFrame:o.lockFrame||!1}}),(function(e,t){var a=t.index,n=t.hash;return{setLightboxImageIndex:function(){e({type:"SET_LIGHTBOX_IMAGE_INDEX",payload:a})},updateImageSelection:function(t,a){e(a?{type:"IMAGE_SELECTION_SHIFTCLICK",payload:n}:"add"===t?{type:"IMAGE_SELECTION_ADD",payload:n}:{type:"IMAGE_SELECTION_REMOVE",payload:n})}}}));var ka=Object(n.b)((function(e,t){var a=t.hash;return{isR:e.rgbnImages.r===a,isG:e.rgbnImages.g===a,isB:e.rgbnImages.b===a,isN:e.rgbnImages.n===a}}),(function(e,t){return{updateRGBN:function(a,n){var r,o,i;e({type:"UPDATE_RGBN_PART",payload:(r={},o=a,i=n?t.hash:"",o in r?Object.defineProperty(r,o,{value:i,enumerable:!0,configurable:!0,writable:!0}):r[o]=i,r)})}}})),Na=[{propKey:"isR",cssModifier:"red",updateKey:"r"},{propKey:"isG",cssModifier:"green",updateKey:"g"},{propKey:"isB",cssModifier:"blue",updateKey:"b"},{propKey:"isN",cssModifier:"normal",updateKey:"n"}],Ra=function(e){return i.a.createElement("div",{className:"rgbn-select",onClick:function(e){e.stopPropagation()},role:"presentation"},Na.map((function(t){var a=t.propKey,n=t.cssModifier,r=t.updateKey;return i.a.createElement("button",{type:"button",key:a,className:m()("rgbn-select__button rgbn-select__button--".concat(n),{"rgbn-select__button--selected":e[a]}),onClick:function(){e.updateRGBN(r,!e[a])}},i.a.createElement(d,{name:"circle"}))})))};Ra.propTypes={isR:l.a.bool.isRequired,isG:l.a.bool.isRequired,isB:l.a.bool.isRequired,isN:l.a.bool.isRequired,updateRGBN:l.a.func.isRequired},Ra.defaultProps={};var Oa=Ra,wa=(a(123),ka(Oa));function ja(e){return(ja="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Pa(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function Ca(e,t){return(Ca=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Ta(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,n=qa(e);if(t){var r=qa(this).constructor;a=Reflect.construct(n,arguments,r)}else a=n.apply(this,arguments);return xa(this,a)}}function xa(e,t){return!t||"object"!==ja(t)&&"function"!=typeof t?Ia(e):t}function Ia(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function qa(e){return(qa=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}bt.a.extend(Ct.a);var za=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Ca(e,t)}(o,e);var t,a,n,r=Ta(o);function o(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,o),(t=r.call(this,e)).state={tiles:null},t.handleCellClick=t.handleCellClick.bind(Ia(t)),t}return t=o,(a=[{key:"componentDidMount",value:function(){var e=this;this.props.hashes?Promise.all([Object(Qe.b)(this.props.hashes.r,this.props.frames.r),Object(Qe.b)(this.props.hashes.g,this.props.frames.g),Object(Qe.b)(this.props.hashes.b,this.props.frames.b),Object(Qe.b)(this.props.hashes.n,this.props.frames.n)]).then((function(t){e.setState({tiles:F.a.rgbnTiles(t)})})):Object(Qe.b)(this.props.hash,this.props.frame).then((function(t){e.setState({tiles:t})}))}},{key:"componentDidUpdate",value:function(e){var t=this;e.frame===this.props.frame&&JSON.stringify(e.frames)===JSON.stringify(this.props.frames)||(this.props.hashes?Promise.all([Object(Qe.b)(this.props.hashes.r,this.props.frames.r),Object(Qe.b)(this.props.hashes.g,this.props.frames.g),Object(Qe.b)(this.props.hashes.b,this.props.frames.b),Object(Qe.b)(this.props.hashes.n,this.props.frames.n)]).then((function(e){t.setState({tiles:F.a.rgbnTiles(e)})})):Object(Qe.b)(this.props.hash,this.props.frame).then((function(e){t.setState({tiles:e})})))}},{key:"getDateText",value:function(){return this.props.created?bt()(this.props.created,yt.a).format(yt.c):null}},{key:"handleCellClick",value:function(e){e.ctrlKey||e.shiftKey?(e.preventDefault(),this.props.updateImageSelection(this.props.isSelected?"remove":"add",e.shiftKey)):this.props.setLightboxImageIndex()}},{key:"renderDefault",value:function(){return i.a.createElement("li",{className:m()("gallery-image",{"gallery-image--selected":this.props.isSelected}),onClick:this.handleCellClick,role:"presentation"},i.a.createElement("div",{className:"gallery-image__image"},this.state.tiles?i.a.createElement(W,{lockFrame:this.props.lockFrame,tiles:this.state.tiles,palette:this.props.palette}):null),this.props.title?i.a.createElement("span",{className:"gallery-image__title"},this.props.title):null,i.a.createElement("span",{className:"gallery-image__created"},this.getDateText()),i.a.createElement("ul",{className:"gallery-list-image__tags"},this.props.tags.map((function(e){return i.a.createElement("li",{key:e,title:e,className:"gallery-list-image__tag"},e)}))),i.a.createElement(It,{hash:this.props.hash,buttons:["select","download","delete","edit","share"]}))}},{key:"renderList",value:function(){return i.a.createElement("tr",{className:m()("gallery-list-image",{"gallery-list-image--selected":this.props.isSelected}),onClick:this.handleCellClick,role:"presentation"},i.a.createElement("td",{className:"gallery-list-image__cell-image"},i.a.createElement("div",{className:"gallery-list-image__image"},this.state.tiles?i.a.createElement(W,{lockFrame:this.props.lockFrame,tiles:this.state.tiles,palette:this.props.palette}):null)),i.a.createElement("td",{className:"gallery-list-image__cell-index"},i.a.createElement("div",{className:"gallery-list-image__index"},this.props.index)),i.a.createElement("td",{className:"gallery-list-image__cell-description"},i.a.createElement("div",{className:"gallery-list-image__description"},i.a.createElement("span",{className:"gallery-list-image__title"},this.props.title),i.a.createElement("span",{className:"gallery-list-image__created"},this.getDateText()))),i.a.createElement("td",{className:"gallery-list-image__cell-rgbn"},this.props.hashes?null:i.a.createElement(wa,{hash:this.props.hash})),i.a.createElement("td",{className:"gallery-list-image__cell-buttons"},i.a.createElement(It,{hash:this.props.hash,buttons:["select","download","delete","edit"]})))}},{key:"render",value:function(){return"default"===this.props.type?this.renderDefault():this.renderList()}}])&&Pa(t.prototype,a),n&&Pa(t,n),o}(i.a.Component);za.propTypes={created:l.a.string,hash:l.a.string.isRequired,hashes:l.a.object,palette:l.a.object.isRequired,frame:l.a.string,frames:l.a.object,lockFrame:l.a.bool.isRequired,title:l.a.string.isRequired,tags:l.a.arrayOf(l.a.string).isRequired,setLightboxImageIndex:l.a.func.isRequired,type:l.a.oneOf(["list","default"]).isRequired,index:l.a.number.isRequired,isSelected:l.a.bool.isRequired,updateImageSelection:l.a.func.isRequired},za.defaultProps={created:null,hashes:null,frame:null,frames:null};var Ma=za,Da=(a(124),Sa(Ma)),Fa=Object(n.b)((function(){return{}}),(function(){return{}})),Aa=Object(n.b)((function(e){return{currentView:e.galleryView}}),(function(e){return{updateView:function(t){e({type:"SET_CURRENT_GALLERY_VIEW",payload:t})}}})),La=["list","1x","2x","3x","4x"],Ba=function(e){return i.a.createElement("ul",{className:"gallery-view-select"},La.map((function(t){return i.a.createElement("li",{key:t,className:m()("gallery-view-select__view",{"gallery-view-select__view--selected":e.currentView===t})},i.a.createElement("button",{type:"button",onClick:function(){e.updateView(t)}},i.a.createElement(d,{name:t})))})))};Ba.propTypes={currentView:l.a.string.isRequired,updateView:l.a.func.isRequired},Ba.defaultProps={};var Ga=Ba,Va=(a(125),Aa(Ga)),Ua=Object(n.b)((function(e){return{totalPages:e.pageSize?Math.ceil(e.images.length/e.pageSize):0}}),(function(){return{}})),Ha=Object(n.b)((function(){return{}}),(function(){return{}})),Ka=function(e){return i.a.createElement("li",{className:e.className},i.a.createElement(c.b,{className:"pagination__link",to:"/gallery/page/".concat(e.page+1),disabled:e.disabled,title:e.title},e.children))};Ka.propTypes={children:l.a.node.isRequired,className:l.a.string,disabled:l.a.bool,page:l.a.number.isRequired,title:l.a.string.isRequired},Ka.defaultProps={className:null,disabled:!1};var Wa=Ka,Xa=(a(126),Ha(Wa));function Ya(e){return function(e){if(Array.isArray(e))return Za(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return Za(e,t);var a=Object.prototype.toString.call(e).slice(8,-1);"Object"===a&&e.constructor&&(a=e.constructor.name);if("Map"===a||"Set"===a)return Array.from(e);if("Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a))return Za(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Za(e,t){(null==t||t>e.length)&&(t=e.length);for(var a=0,n=new Array(t);a<t;a++)n[a]=e[a];return n}var Ja=function(e){if(e.totalPages<2)return null;var t=Ya(new Array(e.totalPages)).map((function(e,t){return t})),a=e.page,n=t.map((function(e){switch(e){case 0:case a-1:case a:case a+1:case t.length-1:return i.a.createElement(Xa,{key:e,page:e,className:m()("pagination__list-item pagination__list-item--page",{"pagination__list-item--page--active":e===a}),title:"To page ".concat(e+1),disabled:e===a},e+1);case a-2:case a+2:return i.a.createElement("li",{key:e,className:"pagination__list-item pagination__list-item--ellipsis"});default:return null}}));return a>0&&n.unshift(i.a.createElement(Xa,{key:"back",className:"pagination__list-item pagination__list-item--prevnext pagination__list-item--prevnext-prev",title:"To previous page",disabled:a<1,page:a-1},i.a.createElement(d,{name:"left"}))),a<t.length-1&&n.push(i.a.createElement(Xa,{key:"next",className:"pagination__list-item pagination__list-item--prevnext",title:"To next page",disabled:a>=t.length-1,page:a+1},i.a.createElement(d,{name:"right"}))),i.a.createElement("ul",{className:"pagination"},n.filter(Boolean))};Ja.propTypes={totalPages:l.a.number.isRequired,page:l.a.number.isRequired};var Qa=Ja,$a=(a(127),Ua(Qa)),en=Object(n.b)((function(e,t){var a=t.page*e.pageSize,n=!!Object(mt.a)(e).splice(a,e.pageSize||1/0).find((function(t){var a=t.hash;return!e.imageSelection.includes(a)}));return{enabled:e.imageSelection.length>0,hasUnselected:n}}),(function(e){return{batchTask:function(t,a){e({type:"BATCH_TASK",payload:t,page:a})}}})),tn=["download","delete","edit"],an=function(e){return i.a.createElement("ul",{className:"batch-buttons"},i.a.createElement("li",{className:m()("batch-buttons__action batch-buttons__action--enabled",{"batch-buttons__action--has-unselected":e.hasUnselected})},i.a.createElement("button",{type:"button",onClick:function(){return e.batchTask(e.hasUnselected?"checkall":"uncheckall",e.page)}},i.a.createElement(d,{name:"checkmark"}))),tn.map((function(t){return i.a.createElement("li",{key:t,className:m()("batch-buttons__action",{"batch-buttons__action--disabled":!e.enabled,"batch-buttons__action--enabled":e.enabled})},i.a.createElement("button",{disabled:!e.enabled,type:"button",onClick:function(){return e.batchTask(t,e.page)}},i.a.createElement(d,{name:t})))})))};an.propTypes={batchTask:l.a.func.isRequired,enabled:l.a.bool.isRequired,hasUnselected:l.a.bool.isRequired,page:l.a.number.isRequired},an.defaultProps={};var nn=an,rn=(a(128),en(nn)),on=function(e){return i.a.createElement("div",{className:"gallery-header"},i.a.createElement(Va,null),i.a.createElement($a,{page:e.page}),i.a.createElement(rn,{page:e.page}))};on.propTypes={page:l.a.number.isRequired};var sn=on,ln=(a(129),Fa(sn));var cn=function(e){var t,a,n,r=e.images.map((function(t,a){return i.a.createElement(Da,{type:"list"===e.currentView?"list":"default",key:t.hash,hash:t.hash,index:a+e.indexOffset})}));return"list"!==e.currentView&&r.push(i.a.createElement("li",{className:"gallery-image gallery-image--dummy",key:"dummy1"}),i.a.createElement("li",{className:"gallery-image gallery-image--dummy",key:"dummy2"}),i.a.createElement("li",{className:"gallery-image gallery-image--dummy",key:"dummy3"}),i.a.createElement("li",{className:"gallery-image gallery-image--dummy",key:"dummy4"}),i.a.createElement("li",{className:"gallery-image gallery-image--dummy",key:"dummy5"})),i.a.createElement(i.a.Fragment,null,i.a.createElement(ln,{page:e.page}),"list"===e.currentView?i.a.createElement("table",{className:"gallery gallery--list"},i.a.createElement("tbody",null,r)):i.a.createElement("ul",{className:m()("gallery",(t={},a="gallery--".concat(e.currentView),n=!0,a in t?Object.defineProperty(t,a,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[a]=n,t))},r),e.images.length<3?null:i.a.createElement(ln,{page:e.page}))};cn.propTypes={images:l.a.array.isRequired,indexOffset:l.a.number.isRequired,currentView:l.a.string.isRequired,page:l.a.number.isRequired},cn.defaultProps={};var un=cn,pn=(a(130),Ea(un)),fn=Object(n.b)((function(){return{}}),(function(){return{}}));function mn(e){return(mn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function hn(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function dn(e,t){return(dn=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function bn(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,n=gn(e);if(t){var r=gn(this).constructor;a=Reflect.construct(n,arguments,r)}else a=n.apply(this,arguments);return yn(this,a)}}function yn(e,t){return!t||"object"!==mn(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function gn(e){return(gn=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var vn=null,_n=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&dn(e,t)}(s,e);var t,n,r,o=bn(s);function s(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,s),(t=o.call(this,e)).state={mdComponentReady:!1},t}return t=s,(n=[{key:"componentDidMount",value:function(){var e=this;a.e(30).then(a.t.bind(null,228,7)).then((function(t){var a=t.default;vn=a,e.setState({mdComponentReady:!0})}))}},{key:"render",value:function(){return i.a.createElement("div",{className:"home"},this.state.mdComponentReady?i.a.createElement(vn,{className:"markdown-body",source:'# Game Boy Printer Web\r\n\r\n## Basic usage\r\n* choose a [color palette](#/palettes)\r\n* [paste your exports](#/dump) into a textfield (or simply drag and drop your dump(s) into this window)\r\n* check your images [in the gallery](#/gallery)\r\n* You can also try to drag/drop your cartridge dump into this window  \r\n\r\n## Supported formats\r\n* This Project is mainly built around the serial output of the original [GBP Emulator](https://github.com/mofosyne/arduino-gameboy-printer-emulator)\r\n* Cart .SAV files are also supported experimentally  \r\nCurrently I assume the size is exactly `131072 bytes`, as this is the only sample of a cartridge dump I have.  \r\nIf it does not work, [please open an issue](https://github.com/HerrZatacke/gb-printer-web/issues) and attach your file.  \r\n\r\n\r\n## ToDos\r\n* Add filters/tags\r\n* Edit palettes\r\n* Allow rendering animated Gifs\r\n* Select multiple palettes to download the gallery in.\r\n* allow some gesture navigation on touch devices\r\n* Export without frame\r\n* Other blendmodes than multiply for RGB-Images\r\n\r\n## Local Setup\r\nYou can run this app locally to directly use the gbp-emulator on your serial port \r\n* Install [node.js](https://nodejs.org/) if you haven\'t already.\r\n* Check out/clone/download [this repository](https://github.com/HerrZatacke/gb-printer-web)\r\n* Run `npm i` in the root directory via your commandline\r\n* Add a `ports.config.json` in the root dir (see below)\r\n* Run `npm start` via your commandline\r\n* Open [localhost:3000](http://localhost:3000)\r\n* Go to the \'Settings\' page and change the \'Remote Socket URL\' to `localhost:3001`\r\n* Print something\r\n\r\n\r\n## Serial Config with `ports.config.json`\r\nCreate a file `ports.config.json` in the root dir and configure it like the following example (multiple ports are supported):\r\n``` json\r\n[\r\n  {\r\n    "path": "COM19",\r\n    "baudRate": 115200,\r\n    "dataBits": 8,\r\n    "stopBits": 1,\r\n    "parity": "none",\r\n    "retry": false\r\n  },\r\n  ...\r\n]\r\n```\r\nyou can set `retry` to a number of milliseconds after which a retry will be attempted to open the port.\r\n\r\n## Future Plans\r\nThis tool is meant to be integrated into the [Websocket GBP Emulator](https://github.com/HerrZatacke/websocket-gbp-emulator)\r\n\r\n## Links and research\r\n* The source to this project is [available on GitHub](https://github.com/HerrZatacke/gb-printer-web)\r\n* A basic version of this tool is avaliable [on GitHub-pages](https://herrzatacke.github.io/gb-printer-web/#/)  \r\n* This project is meant to replace my [GB printer direct serial to gif converter](https://github.com/HerrZatacke/direct-serial-to-gif-converter)\r\n\r\n### Research\r\n* [Websockets on an ESP8266](https://tttapa.github.io/ESP8266/Chap14%20-%20WebSocket.html)\r\n* [Programming a standalone ESP8266](https://www.instructables.com/id/3-Simple-Ways-of-Programming-an-ESP8266-12X-Module/)\r\n* [Deploying your JS App to Github Pages the easy way (or not)](https://medium.com/linagora-engineering/1ef8c48424b7)\r\n* [SSL WebSockets for the Arduino currently not supported](https://github.com/gilmaimon/ArduinoWebsockets/issues/59) \r\n'}):null)}}])&&hn(t.prototype,n),r&&hn(t,r),s}(i.a.Component);_n.propTypes={},_n.defaultProps={};var En=_n,Sn=(a(131),fn(En)),kn=Object(n.b)((function(e){return{dragover:e.dragover}}),(function(){return{}})),Nn=function(e){return e.dragover?i.a.createElement("div",{className:"drag-over"}):null};Nn.propTypes={dragover:l.a.bool.isRequired},Nn.defaultProps={};var Rn=Nn,On=(a(132),kn(Rn)),wn=function(e){return i.a.createElement(i.a.Fragment,null,i.a.createElement("h1",{className:"app__content-headline"},"Gallery",i.a.createElement("span",{className:"app__counter"},e.selectedCount?"(".concat(e.selectedCount," of ").concat(e.imageCount," images selected)"):"(".concat(e.imageCount," images)"))),i.a.createElement("p",{className:"app__content-hint"},"These images are stored in the localStorage of your browser. That's why you (currently) cannot share a link to one of them.",i.a.createElement("br",null),"Also if you clear your browser's cookies, the images will be gone too."))};wn.propTypes={imageCount:l.a.number.isRequired,selectedCount:l.a.number.isRequired};var jn=wn,Pn=function(e){var t=e.pageSize,a=e.imageCount,n=e.urlParam,r=parseInt(n||"0",10)-1,o=t?Math.ceil(a/t):1,i=Math.max(0,o-1),s=Math.max(0,Math.min(r,i));return{valid:s===r,page:s}},Cn=function(e){return i.a.createElement(c.a,null,i.a.createElement(R,null),i.a.createElement("div",{className:"app__content"},i.a.createElement(u.d,null,i.a.createElement(u.b,{exact:!0,path:"/gallery"},i.a.createElement(u.a,{to:"/gallery/page/1"})),i.a.createElement(u.b,{path:"/gallery/page/:page",render:function(t){var a=t.match,n=Pn({urlParam:a.params.page,pageSize:e.pageSize,imageCount:e.imageCount}),r=n.valid,o=n.page;return r?i.a.createElement(i.a.Fragment,null,i.a.createElement(jn,{imageCount:e.imageCount,selectedCount:e.selectedCount}),i.a.createElement(pn,{page:o})):i.a.createElement(u.a,{to:"/gallery/page/".concat(o+1)})}}),i.a.createElement(u.b,{path:"/palettes"},i.a.createElement("h1",{className:"app__content-headline"},"Palettes"),i.a.createElement(ua,null)),i.a.createElement(u.b,{path:"/settings"},i.a.createElement("h1",{className:"app__content-headline"},"Settings"),i.a.createElement(aa,null)),i.a.createElement(u.b,{path:"/dump"},i.a.createElement("h1",{className:"app__content-headline"},"Paste your plaintext"),i.a.createElement(_a,null)),i.a.createElement(u.b,{path:"/"},i.a.createElement(Sn,null)))),i.a.createElement(I,null),i.a.createElement(lt,null),i.a.createElement(ft,null),i.a.createElement(Ot,null),i.a.createElement(Gt,null),i.a.createElement(On,null))};Cn.propTypes={imageCount:l.a.number.isRequired,selectedCount:l.a.number.isRequired,pageSize:l.a.number.isRequired},Cn.defaultProps={};var Tn=Cn;a(133),t.default=r(Tn)},97:function(e,t,a){}}]);