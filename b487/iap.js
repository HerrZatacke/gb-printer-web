(self.webpackChunkgb_printer_web=self.webpackChunkgb_printer_web||[]).push([[42],{"./src/javascript/app/defaults.js":function(e,t,r){"use strict";r.d(t,{vc:function(){return o},k3:function(){return a},Z6:function(){return s},z3:function(){return i},W4:function(){return l},q1:function(){return p},d$:function(){return y},jU:function(){return u},fb:function(){return d},T6:function(){return f},oU:function(){return m}}),r("./node_modules/core-js/modules/es.array.slice.js");var n=r("./src/javascript/tools/RGBNDecoder/blendModes.js"),o="YYYY-MM-DD HH:mm:ss:SSS",a="YYYY-MM-DD",s="HH:mm",i="YYYYMMDD-HHmmss",l="DD.MM.YYYY HH:mm",c=[0,85,170,255],u='!{"command":"INIT"}',d='!{"command":"DATA", "compressed":0, "more":1}',f='!{"command":"DATA","compressed":0,"more":0}',m='!{"command":"PRNT","sheets":1,"margin_upper":1,"margin_lower":3,"pallet":228,"density":64 }',p={r:c.slice(),g:c.slice(),b:c.slice(),n:c.slice(),blend:n._I.MULTIPLY},y={shortName:"-",name:"Missing Palette",palette:["#aaaaaa","#999999","#888888","#777777"]}},"./src/javascript/app/initApp.jsx":function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return Yt}}),r("./node_modules/core-js/modules/es.object.assign.js"),r("./node_modules/core-js/modules/es.array.iterator.js"),r("./node_modules/core-js/modules/es.object.to-string.js"),r("./node_modules/core-js/modules/es.promise.js"),r("./node_modules/core-js/modules/es.string.iterator.js"),r("./node_modules/core-js/modules/web.dom-collections.iterator.js"),r("./node_modules/core-js/modules/es.array.concat.js");var n=r("./node_modules/react/index.js"),o=r("./node_modules/react-redux/es/index.js"),a=r("./node_modules/react-dom/index.js"),s=r("./node_modules/redux/es/redux.js"),i=function(e,t){return void 0!==e?e:t};function l(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}r("./node_modules/core-js/modules/es.date.to-string.js"),r("./node_modules/core-js/modules/es.array.is-array.js"),r("./node_modules/core-js/modules/es.symbol.js"),r("./node_modules/core-js/modules/es.symbol.description.js"),r("./node_modules/core-js/modules/es.symbol.iterator.js"),r("./node_modules/core-js/modules/es.array.from.js"),r("./node_modules/core-js/modules/es.array.slice.js"),r("./node_modules/core-js/modules/es.function.name.js");var c=null;function u(e){return function(e){if(Array.isArray(e))return d(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return d(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?d(e,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function d(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}r("./node_modules/core-js/modules/es.array.filter.js");function f(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function m(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?f(Object(r),!0).forEach((function(t){p(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):f(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function p(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}r("./node_modules/core-js/modules/es.object.define-property.js"),r("./node_modules/core-js/modules/es.object.keys.js"),r("./node_modules/core-js/modules/es.object.get-own-property-descriptor.js"),r("./node_modules/core-js/modules/es.array.for-each.js"),r("./node_modules/core-js/modules/web.dom-collections.for-each.js"),r("./node_modules/core-js/modules/es.object.get-own-property-descriptors.js"),r("./node_modules/core-js/modules/es.object.define-properties.js");var y=r("./src/javascript/tools/unique/index.js");function j(e){return function(e){if(Array.isArray(e))return h(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return h(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?h(e,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function h(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function g(e){return function(e){if(Array.isArray(e))return b(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return b(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?b(e,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function b(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var v=(r("./node_modules/core-js/modules/es.array.includes.js"),r("./node_modules/core-js/modules/es.string.includes.js"),r("./src/javascript/consts/specialTags.js")),_=[v.Dh,v.TZ,v.z2,v.ee,v.Vn],A=(r("./node_modules/core-js/modules/es.array.sort.js"),r("./src/javascript/tools/unique/by.js"));function E(e){return function(e){if(Array.isArray(e))return O(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return O(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?O(e,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function O(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var S=function(e,t){return e.id<t.id?-1:e.id>t.id?1:0};function F(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function w(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?F(Object(r),!0).forEach((function(t){T(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):F(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function T(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function I(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function D(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?I(Object(r),!0).forEach((function(t){P(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):I(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function P(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function R(e){return function(e){if(Array.isArray(e))return L(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return L(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?L(e,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function L(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}r("./node_modules/core-js/modules/es.array.map.js"),r("./node_modules/core-js/modules/es.array.find.js");function x(e){return function(e){if(Array.isArray(e))return N(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return N(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?N(e,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function N(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function M(e){return function(e){if(Array.isArray(e))return C(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return C(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?C(e,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function C(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var G=r("./src/javascript/tools/cleanUrl/index.js");function k(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function B(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?k(Object(r),!0).forEach((function(t){U(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):k(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function U(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Z(e){return function(e){if(Array.isArray(e))return H(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return H(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?H(e,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function H(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function V(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Y(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?V(Object(r),!0).forEach((function(t){X(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):V(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function X(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var $=r("./node_modules/dayjs/dayjs.min.js"),W=r.n($);function z(e){return function(e){if(Array.isArray(e))return q(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return q(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?q(e,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function q(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function J(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function K(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?J(Object(r),!0).forEach((function(t){Q(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):J(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function Q(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function ee(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function te(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?ee(Object(r),!0).forEach((function(t){re(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ee(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function re(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var ne={imageSelection:[]},oe=(0,s.UY)({activePalette:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"cybl",t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"PALETTE_SET_ACTIVE":return t.payload;case"GLOBAL_UPDATE":return i(t.payload.activePalette,e);case"PALETTE_DELETE":return t.payload.newSelectedPalette||e;default:return e}},canShare:function(){if(null===c)try{c=window.navigator.canShare({files:[new File([new Blob((e="test",function(e){if(Array.isArray(e))return l(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return l(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?l(e,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()))],"test.txt",{type:"text/plain",lastModified:new Date})]})}catch(e){c=!1}var e;return c},confirm:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"CONFIRM_ASK":return[t.payload].concat(u(e));case"ADD_FRAME":case"ADD_IMAGES":case"DELETE_IMAGE":case"DELETE_IMAGES":case"PALETTE_DELETE":case"CONFIRM_ANSWERED":return e.filter((function(e,t){return t}));default:return e}},dragover:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"IMPORT_DRAGOVER_START":return!0;case"IMPORT_DRAGOVER_END":return!1;default:return e}},dropboxStorage:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"DROPBOX_LOGOUT":return{use:e.use};case"SET_DROPBOX_STORAGE":return m(m({},e),t.payload);default:return e}},editImage:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"EDIT_IMAGE":return{hash:t.payload};case"EDIT_IMAGE_SELECTION":return t.payload;case"CANCEL_EDIT_IMAGE":case"UPDATE_IMAGE":case"UPDATE_IMAGES_BATCH":case"CLOSE_OVERLAY":case"GLOBAL_UPDATE":return null;default:return e}},editPalette:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_EDIT_PALETTE":return t.payload;case"PALETTE_CANCEL_EDIT":case"PALETTE_UPDATE":case"CLOSE_OVERLAY":return{};default:return e}},exportFileTypes:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:["png"],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"UPDATE_EXPORT_FILE_TYPES":return t.payload.checked?(0,y.Z)([].concat(j(e),[t.payload.fileType])):e.filter((function(e){return e!==t.payload.fileType}));case"GLOBAL_UPDATE":return i(t.payload.exportFileTypes,e);default:return e}},exportScaleFactors:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[1],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"UPDATE_EXPORT_SCALE_FACTORS":return t.payload.checked?window.navigator.msSaveBlob?[t.payload.factor]:[].concat(g(e),[t.payload.factor]):e.filter((function(e){return e!==t.payload.factor}));case"GLOBAL_UPDATE":return i(t.payload.exportScaleFactors,e);default:return e}},filtersActiveTags:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_ACTIVE_TAGS":return t.payload;case"SET_AVAILABLE_TAGS":return e.filter((function(e){return _.includes(e)||t.payload.includes(e)}));default:return e}},filtersVisible:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SHOW_FILTERS":return!0;case"CLOSE_OVERLAY":case"HIDE_FILTERS":case"SET_ACTIVE_TAGS":return!1;default:return e}},frames:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"ADD_FRAME":return(0,A.Z)("id")([t.payload].concat(E(e))).sort(S);case"DELETE_FRAME":return e.filter((function(e){return e.id!==t.payload}));case"GLOBAL_UPDATE":return(0,A.Z)("id")(t.payload.frames).sort(S);default:return e}},framesMessage:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"FRAMES_MESSAGE_SHOW":return 1;case"FRAMES_MESSAGE_HIDE":return 2;default:return e}},galleryView:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"1x",t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_CURRENT_GALLERY_VIEW":return t.payload;case"GLOBAL_UPDATE":return i(t.payload.galleryView,e);default:return e}},gitStorage:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_GIT_STORAGE":return w(w({},e),t.payload);default:return e}},handleExportFrame:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_HANDLE_EXPORT_FRAME":return t.payload;case"GLOBAL_UPDATE":return i(t.payload.handleExportFrame,e);default:return e}},hideDates:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_HIDE_DATES":return t.payload;case"GLOBAL_UPDATE":return i(t.payload.hideDates,e);default:return e}},images:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"ADD_IMAGES":return(0,A.Z)("hash")([].concat(R(e),R(t.payload)));case"DELETE_IMAGE":return R(e.filter((function(e){return e.hash!==t.payload})));case"DELETE_IMAGES":return R(e.filter((function(e){var r=e.hash;return!t.payload.includes(r)})));case"UPDATE_IMAGE":return e.map((function(e){return e.hash===t.payload.hash?D(D({},e),t.payload):e}));case"UPDATE_IMAGES_BATCH":return e.map((function(e){return t.payload.find((function(t){return t.hash===e.hash}))||e}));case"GLOBAL_UPDATE":return(0,A.Z)("hash")(t.payload.images);default:return e}},imageSelection:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"IMAGE_SELECTION_REMOVE":case"DELETE_IMAGE":return x(e.filter((function(e){return e!==t.payload})));case"IMAGE_SELECTION_ADD":return[].concat(x(e),[t.payload]);case"IMAGE_SELECTION_SET":return t.payload;case"DELETE_IMAGES":return[];case"GLOBAL_UPDATE":return i(t.payload.imageSelection,e);default:return e}},isFullscreen:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_IS_FULLSCREEN":return t.payload;default:return e}},lastSelectedImage:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"IMAGE_SELECTION_ADD":case"IMAGE_SELECTION_REMOVE":return t.payload;case"DELETE_IMAGE":case"DELETE_IMAGES":case"SET_CURRENT_GALLERY_VIEW":return null;default:return e}},progressLog:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{git:[],dropbox:[]},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"GITSTORAGE_LOG_ACTION":return Y(Y({},e),{},{git:[t.payload].concat(Z(e.git))});case"DROPBOX_LOG_ACTION":return Y(Y({},e),{},{dropbox:[t.payload].concat(Z(e.dropbox))});case"STORAGE_SYNC_DONE":return Y(Y({},e),{},X({},t.payload.storageType,[{timestamp:(new Date).getTime()/1e3,message:"."}].concat(Z(e[t.payload.storageType]))));case"LOG_CLEAR":return{git:[],dropbox:[]};default:return e}},lightboxImage:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_LIGHTBOX_IMAGE_INDEX":return t.payload;default:return e}},pageSize:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_PAGESIZE":return t.payload;case"GLOBAL_UPDATE":return i(t.payload.pageSize,e);default:return e}},palettes:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"PALETTE_DELETE":return M(e.filter((function(e){return e.shortName!==t.payload.shortName})));case"PALETTE_UPDATE":return(0,A.Z)("shortName")([].concat(M(e.map((function(e){return e.shortName!==t.payload.shortName?e:t.payload}))),[t.payload]));case"GLOBAL_UPDATE":return(0,A.Z)("shortName").apply(void 0,[t.payload.palettes].concat(M(e)));default:return e}},printerBusy:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"REMOTE_CALL_FUNCTION":case"HEARTBEAT_TIMED_OUT":return!0;case"ADD_IMAGES":case"PRINTER_FUNCTIONS_RECEIVED":case"PRINTER_DATA_RECEIVED":return!1;default:return e}},printerData:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"PRINTER_DATA_RECEIVED":return t.payload;case"HEARTBEAT_TIMED_OUT":return{};default:return e}},printerFunctions:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"PRINTER_FUNCTIONS_RECEIVED":return t.payload;case"HEARTBEAT_TIMED_OUT":return[];default:return e}},printerUrl:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_PRINTER_URL":return(0,G.Z)(t.payload,"http");case"GLOBAL_UPDATE":return i(t.payload.printerUrl,e);default:return e}},printerParams:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_PRINTER_PARAMS":return t.payload;case"GLOBAL_UPDATE":return i(t.payload.printerParams,e);default:return e}},progress:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{gif:0,printer:0},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"ANIMATE_IMAGES":return B(B({},e),{},{gif:.01});case"CREATE_GIF_PROGRESS":return B(B({},e),{},{gif:t.payload});case"PRINTER_PROGRESS":return B(B({},e),{},{printer:t.payload});case"ADD_IMAGES":case"CONFIRM_ANSWERED":return B(B({},e),{},{printer:0});default:return e}},recentImports:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"ADD_IMAGES":var r=t.payload.map((function(e){var t=e.hash;return e.hashes?null:{hash:t,timestamp:W()().unix()}})).filter(Boolean);return[].concat(z(e.filter((function(e){var t=e.hash;return!r.includes(t)}))),z(r));case"GLOBAL_UPDATE":var n,o;return null!==(n=t.payload)&&void 0!==n&&null!==(o=n.imageSelection)&&void 0!==o&&o.length?[].concat(z(e.filter((function(e){var r=e.hash;return!t.payload.imageSelection.includes(r)}))),z(t.payload.imageSelection.map((function(e){return{hash:e,timestamp:W()().unix()}})))):e;default:return e}},rgbnImages:function(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,r=arguments.length>1?arguments[1]:void 0;switch(r.type){case"UPDATE_RGBN_PART":return K(K({},t),r.payload);case"ADD_IMAGES":return null!==(e=r.payload[0])&&void 0!==e&&e.hashes?null:t;case"DELETE_IMAGE":case"DELETE_IMAGES":return null;case"GLOBAL_UPDATE":return i(r.payload.rgbnImages,t);default:return t}},savFrameTypes:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"int",t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_SAV_FRAME_TYPES":return t.payload;case"GLOBAL_UPDATE":return i(t.payload.savFrameTypes,e);default:return e}},sortBy:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_SORT_BY":return t.payload;case"GLOBAL_UPDATE":return i(t.payload.sortBy,e);default:return e}},sortOptionsVisible:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SHOW_SORT_OPTIONS":return!0;case"HIDE_SORT_OPTIONS":case"CLOSE_OVERLAY":case"SET_SORT_BY":return!1;default:return e}},syncBusy:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"STORAGE_SYNC_START":return!0;case"STORAGE_SYNC_DONE":return!1;default:return e}},syncSelect:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"STORAGE_SYNC_SELECT":return!0;case"STORAGE_SYNC_START":case"STORAGE_SYNC_DONE":case"STORAGE_SYNC_CANCEL":return!1;default:return e}},videoParams:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ne,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_VIDEO_PARAMS":return te(te({},e),t.payload);case"ANIMATE_IMAGES":case"CANCEL_ANIMATE_IMAGES":case"CLOSE_OVERLAY":return te(te({},e),{},{imageSelection:[]});case"GLOBAL_UPDATE":return i(t.payload.videoParams,e);default:return e}},windowDimensions:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{height:window.innerHeight,width:window.innerWidth},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"WINDOW_DIMENSIONS":return t.payload;default:return e}}}),ae=r("./node_modules/gb-palettes/src/main.js"),se=r.n(ae),ie=r("./src/javascript/app/defaults.js"),le=r("./src/javascript/tools/RGBNDecoder/blendModes.js");function ce(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function ue(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?ce(Object(r),!0).forEach((function(t){de(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ce(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function de(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function fe(e){return function(e){if(Array.isArray(e))return me(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return me(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?me(e,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function me(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var pe=function(e){var t=(0,A.Z)("shortName")([].concat(fe(se().map((function(e){return ue(ue({},e),{},{isPredefined:!0})}))),fe(e.palettes))),r=t.map((function(e){return e.shortName})),n=e.frames.map((function(e){return e.id})),o=(0,G.Z)(e.printerUrl,"http"),a=e.framesMessage,s=r.includes(e.activePalette)?e.activePalette:"bw",i=e.images.map((function(e){return ue(ue({},e),{},{created:W()(e.created).format(ie.vc)})})).map((function(e){return ue(ue({},e),{},{tags:e.tags||[]})})).map((function(e){return e.hashes?e.palette?e.palette.blend?e:ue(ue({},e),{},{palette:ue(ue({},e.palette),{},{blend:le._I.MULTIPLY})}):ue(ue({},e),{},{palette:ie.q1}):e.palette?r.includes(e.palette)?e:ue(ue({},e),{},{palette:r[0]||"bw"}):null})).filter(Boolean),l=i.map((function(e){return e.hash}));i.forEach((function(e){!e.frame||n.includes(e.frame)||a||(a=1)}));var c=W()().subtract(6,"hour").unix(),u=e.recentImports.filter((function(e){var t=e.hash,r=e.timestamp;return l.includes(t)&&r>c}));return ue(ue({},e),{},{images:i,palettes:t,printerUrl:o,framesMessage:a,activePalette:s,recentImports:u})},ye=r("./src/javascript/app/store/defaults.js"),je=(r("./node_modules/core-js/modules/es.array.find-index.js"),r("./node_modules/core-js/modules/es.array-buffer.slice.js"),r("./node_modules/core-js/modules/es.typed-array.uint8-array.js"),r("./node_modules/core-js/modules/es.typed-array.copy-within.js"),r("./node_modules/core-js/modules/es.typed-array.every.js"),r("./node_modules/core-js/modules/es.typed-array.fill.js"),r("./node_modules/core-js/modules/es.typed-array.filter.js"),r("./node_modules/core-js/modules/es.typed-array.find.js"),r("./node_modules/core-js/modules/es.typed-array.find-index.js"),r("./node_modules/core-js/modules/es.typed-array.for-each.js"),r("./node_modules/core-js/modules/es.typed-array.includes.js"),r("./node_modules/core-js/modules/es.typed-array.index-of.js"),r("./node_modules/core-js/modules/es.typed-array.iterator.js"),r("./node_modules/core-js/modules/es.typed-array.join.js"),r("./node_modules/core-js/modules/es.typed-array.last-index-of.js"),r("./node_modules/core-js/modules/es.typed-array.map.js"),r("./node_modules/core-js/modules/es.typed-array.reduce.js"),r("./node_modules/core-js/modules/es.typed-array.reduce-right.js"),r("./node_modules/core-js/modules/es.typed-array.reverse.js"),r("./node_modules/core-js/modules/es.typed-array.set.js"),r("./node_modules/core-js/modules/es.typed-array.slice.js"),r("./node_modules/core-js/modules/es.typed-array.some.js"),r("./node_modules/core-js/modules/es.typed-array.sort.js"),r("./node_modules/core-js/modules/es.typed-array.subarray.js"),r("./node_modules/core-js/modules/es.typed-array.to-locale-string.js"),r("./node_modules/core-js/modules/es.typed-array.to-string.js"),r("./node_modules/promise-queue/lib/index.js")),he=r.n(je),ge=r("./node_modules/omggif/omggif.js"),be=r("./node_modules/file-saver/dist/FileSaver.min.js"),ve=r("./node_modules/chunk/src/chunk.js"),_e=r.n(ve),Ae=r("./src/javascript/tools/loadImageTiles/index.js"),Ee=r("./src/javascript/tools/getImagePalette/index.js"),Oe=r("./src/javascript/tools/RGBNDecoder/index.js"),Se=r("./src/javascript/tools/Decoder/index.js"),Fe=r("./src/javascript/tools/generateFileName/index.js");function we(e){return function(e){if(Array.isArray(e))return Re(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||Pe(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Te(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Ie(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Te(Object(r),!0).forEach((function(t){De(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Te(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function De(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Pe(e,t){if(e){if("string"==typeof e)return Re(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?Re(e,t):void 0}}function Re(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var Le=(r("./node_modules/core-js/modules/es.array.flat.js"),r("./node_modules/core-js/modules/es.regexp.exec.js"),r("./node_modules/core-js/modules/es.string.replace.js"),r("./src/javascript/tools/getFilteredImages/index.js")),xe=r("./src/javascript/tools/applyTagChanges/index.js"),Ne=r("./src/javascript/tools/sortImages/index.js");function Me(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Ce(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Me(Object(r),!0).forEach((function(t){Ge(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Me(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function Ge(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function ke(e){return(ke="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var Be=["lockFrame","frame","palette","invertPalette","title","tags","created"],Ue=function(e){return(0,y.Z)(e.map((function(e){return e.tags})).flat())},Ze=r("./src/javascript/tools/storage/index.js"),He=r("./src/javascript/tools/localforageInstance/index.js"),Ve=(r("./node_modules/core-js/modules/web.timers.js"),r("./node_modules/core-js/modules/es.string.starts-with.js"),r("./node_modules/core-js/modules/es.array.index-of.js"),r("./node_modules/core-js/modules/es.string.pad-start.js"),r("./node_modules/core-js/modules/es.regexp.to-string.js"),r("./node_modules/core-js/modules/es.string.trim.js"),function(e){return function(t,r){var n=[],o="";try{for(var a=0;a<5760;a+=1)o+=" ".concat(t[a+8].toString(16).padStart(2,"0")),a%16==15&&(n.push(o.trim()),o="")}catch(t){return e({type:"ERROR",payload:"ERROR_IN_LOADED_BIN\n".concat(r)}),Promise.resolve([])}return Promise.resolve(n)}}),Ye=r("./src/javascript/tools/applyFrame/index.js"),Xe=function(e,t,r){var n=function(e){return r.find((function(t){return t.id===e}))},o=(e+1).toString(10).padStart(2,"0"),a="".concat(t).concat(o);if(n(a))return a;if("jp"===t){var s="int".concat(o);if(n(s))return s}var i="".concat(t,"01");if(n(i))return i;if("jp"!==t){var l="int".concat(o);if(n(l))return l}return"int01"},$e=r("./src/javascript/tools/getFrameGroups/index.js");function We(e){return function(e){if(Array.isArray(e))return ze(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return ze(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?ze(e,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ze(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var qe="FF FF FF FF FF FF FF FF FF FF FF FF FF FF FF FF",Je=function(e,t){var r=[],n="",o=!1;r.push.apply(r,We(We(Array(40)).map((function(){return qe}))));for(var a=0;a<3584;a+=1)a%256==0&&r.push.apply(r,We(We(Array(2)).map((function(){return qe})))),n+=" ".concat(e[t+a].toString(16).padStart(2,"0")),a%16==15&&(r.push(n.trim()),o||"00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00"===n.trim()||(o=!0),n=""),a%256==255&&r.push.apply(r,We(We(Array(2)).map((function(){return qe}))));return r.push.apply(r,We(We(Array(40)).map((function(){return qe})))),o?r:null},Ke=(r("./node_modules/core-js/modules/es.string.split.js"),r("./node_modules/core-js/modules/es.parse-int.js"),r("./node_modules/gbp-decode/src/main.js")),Qe=(r("./node_modules/core-js/modules/es.array.join.js"),r("./src/javascript/tools/applyFrame/frameData.js")),et=r("./src/javascript/tools/readFileAs/index.js"),tt=function(e){var t=e.lines,r=e.filename,n=e.palette;return(0,Ze.a1)(t).then((function(e){return{hash:e,created:W()().format(ie.vc),title:r||"",lines:t.length,tags:[],palette:n}}))},rt=(r("./node_modules/core-js/modules/es.string.match.js"),function(e){var t=e.frameSetNew,r=e.frameSet,n=e.frameIndex,o=void 0===n?"":n,a="".concat(t||r).concat(o.padStart(2,"0"));return a.match(/^[a-z]{2,}\d{2}$/g)?a:""}),nt=function(e){var t=e.frameIds,r=e.frameGroups,n=e.fileName;return function(e){var o=e.frameSet,a=void 0===o?"":o,s=e.frameSetNew,i=void 0===s?"":s,l=e.frameIndex,c=void 0===l?"":l,u=e.frameName,d=void 0===u?"":u,f=rt({frameSet:a,frameSetNew:i,frameIndex:c}),m=t.includes(f),p=!(f&&d||!f&&!d);return[{label:"Add as frame to existing frameset",key:"frameSet",type:"select",options:r,disabled:!!i},{label:"Create new frameset with ID (min. 2 chars)",key:"frameSetNew",type:"text",disabled:!!a},{label:m?"Frame index - frame ".concat(f," will be replaced"):"Frame index",key:"frameIndex",type:"number",disabled:!(a||i.length>1)},{label:"Name of frame",key:"frameName",type:"text",disabled:!(a||i.length>1)},{label:f&&d?'"'.concat(n,'" will be imported as frame "').concat(f,'" - "').concat(d,'"'):'"'.concat(n,'" will be imported as an image'),key:"info",type:"info"},{type:"confirmForm",notComplete:p}]}};function ot(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var at=function(e){for(var t,r,n,o,a,s,i,l=e.data,c=[],u=0;u<8;u+=1){for(var d=0,f=0;f<8;f+=1)d+=(t=l.slice(4*(8*u+f)),r=void 0,void 0,void 0,void 0,void 0,void 0,p=4,n=(r=function(e){if(Array.isArray(e))return e}(m=t)||function(e,t){var r=e&&("undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"]);if(null!=r){var n,o,a=[],s=!0,i=!1;try{for(r=r.call(e);!(s=(n=r.next()).done)&&(a.push(n.value),!t||a.length!==t);s=!0);}catch(e){i=!0,o=e}finally{try{s||null==r.return||r.return()}finally{if(i)throw o}}return a}}(m,p)||function(e,t){if(e){if("string"==typeof e)return ot(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?ot(e,t):void 0}}(m,p)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}())[0],o=r[1],a=r[2],s=r[3],((i=Math.floor((n+o+a)/3*(s/255)))<64?257:i<128?1:i<192?256:0)<<7-f);c.push((d>>8).toString(16).padStart(2,"0"),(255&d).toString(16).padStart(2,"0"))}var m,p;return c.join(" ").toUpperCase()},st=function(e){if("#"===e.charAt(0)||"/"===e.charAt(0))return null;if("!"===e.charAt(0)||"{"===e.charAt(0)){try{var t=JSON.parse(e.slice(e.indexOf("{")).trim()),r=t.command,n=t.margin_lower;if("PRNT"===r&&n>0)return{type:"IMAGE_COMPLETE"}}catch(e){return{type:"PARSE_ERROR",payload:"Error while trying to parse JSON data command block"}}return null}var o=e.replace(/[^0-9A-F]/gi,"");return o.length?{type:"NEW_LINES",payload:[o]}:null};function it(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var lt=function(e,t){var r=[],n="".concat(e,"\n").concat(ie.oU).split("\n").map(st).filter(Boolean).map((function(e){var t,n;switch(e.type){case"NEW_LINES":return(t=r).push.apply(t,function(e){if(Array.isArray(e))return it(e)}(n=e.payload)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(n)||function(e,t){if(e){if("string"==typeof e)return it(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?it(e,t):void 0}}(n)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),null;case"IMAGE_COMPLETE":var o=r.filter(Boolean);return r=[],!!o.length&&o;default:return null}})).filter(Boolean);return n.length||console.warn("File ".concat(t," did not contain images")),Promise.resolve(n)},ct=function(e){var t=e.dispatch,r=function(e){return function(t,r){var n=e.getState(),o=n.savFrameTypes,a=n.frames,s=[],i=(0,$e.Z)(a).map((function(e){var t=e.id;return{value:t,name:e.name,selected:o===t}})),l=function(e){for(var r=0;r<131072;r+=4096)if(4096!==r){var n=t[r+4016],o=Je(t,r);o&&s.push((0,Ye.Z)(o,Xe(n,e,a)))}return Promise.all(s)};return i.length<2?l(o):new Promise((function(t){e.dispatch({type:"CONFIRM_ASK",payload:{message:"Importing '".concat(r,"'"),questions:function(){return[{label:"Select frameset to use with this import",key:"selectedFrameset",type:"select",options:i}]},confirm:function(r){var n=r.selectedFrameset;e.dispatch({type:"CONFIRM_ANSWERED"}),t(l(n))},deny:function(){e.dispatch({type:"CONFIRM_ANSWERED"}),t([])}}})}))}}(e),n=Ve(t),o=function(e){return function(t){var r=e.dispatch,n=document.createElement("img"),o=document.createElement("canvas"),a=o.getContext("2d"),s=[];o.width=160,o.height=144,n.onload=function(){a.drawImage(n,0,0,n.naturalWidth,n.naturalHeight,0,0,160,144);for(var i=0;i<o.height;i+=8)for(var l=0;l<o.width;l+=8)s.push(at(a.getImageData(l,i,8,8)));var c=e.getState().frames,u=(0,$e.Z)(c).filter((function(e){var t=e.id;return!["int","jp","hk"].includes(t)})).map((function(e){return{value:e.id,name:e.name}}));u.unshift({value:"",name:"Select",selected:!0});var d=c.map((function(e){return e.id}));e.dispatch({type:"CONFIRM_ASK",payload:{message:'Choose how you want to import "'.concat(t.name,'".'),questions:nt({frameIds:d,frameGroups:u,fileName:t.name}),confirm:function(n){var o=n.frameSet,a=n.frameSetNew,i=n.frameIndex,l=n.frameName,c=rt({frameSet:o,frameSetNew:a,frameIndex:i});c&&l?(0,Qe.e)(c,s).then((function(){r({type:"ADD_FRAME",payload:{id:c,name:l}})})):tt({lines:s,filename:t.name.split(".").shift(),palette:e.getState().activePalette}).then((function(e){r({type:"ADD_IMAGES",payload:[e]})}))},deny:function(){r({type:"CONFIRM_ANSWERED"})}}})},(0,et.Z)(t,"dataURL").then((function(e){n.src=e}))}}(e),a=function(e){console.error(e),t({type:"ERROR",payload:"FILE_NOT_READ"})};return function(s){var i=s.map((function(e){var s=e,i=e.type,l=!0;return e.blob&&(s=e.blob,i=e.contentType,l=void 0!==e.ok?e.ok:l),l&&s.size?i&&i.startsWith("image/")?(o(s),Promise.resolve([])):s.size>268435455?(t({type:"ERROR",payload:"FILE_TOO_LARGE"}),Promise.resolve([])):"application/json"===i?((0,et.Z)(s,"text").catch(a).then((function(e){var r={};try{r=JSON.parse(e)}catch(e){}r&&r.state?t({type:"JSON_IMPORT",payload:r}):t({type:"ERROR",payload:"NOT_A_SETTINGS_FILE"})})),Promise.resolve([])):"text/plain"===i?(0,et.Z)(s,"text").catch(a).then((function(e){if(-1===e.indexOf('{"command"'))try{return r=e,s.name,n=r.split("\n").map((function(e){return e.trim()})).filter((function(e){return e.length&&0!==e.indexOf("//")&&0!==e.indexOf("/*")})).map((function(e){return e.split(" ")})).flat().map((function(e){return parseInt(e,16)})),(0,Ke.parsePackets)(n).then(Ke.getImageDataStream).then(Ke.decompressDataStream).then(Ke.decodePrintCommands).then(Ke.harmonizePalettes).then(Ke.transformToClassic)}catch(e){return t({type:"ERROR",payload:"NOT_A_DUMP"}),[]}var r,n;return lt(e,s.name)})).then((function(e){return e.map((function(e){return{lines:e,filename:s.name}}))})):131072===s.size?(0,et.Z)(s,"arrayBuffer").catch(a).then((function(e){return r(e,s.name)})).then((function(e){return e.map((function(e){return{lines:e,filename:s.name}}))})):!i||i.startsWith("application/")?(0,et.Z)(s,"arrayBuffer").catch(a).then((function(e){return 71===(t=e)[0]&&66===t[1]&&45===t[2]&&66===t[3]&&73===t[4]&&78===t[5]&&48===t[6]&&49===t[7]?n(e,s.name).then((function(e){return{lines:e,filename:s.name}})):[];var t})):(t({type:"ERROR",payload:"NOT_A_DUMP"}),Promise.resolve([])):(console.error("Error in received data",e),Promise.resolve([]))}));Promise.all(i).then((function(r){var n=r.flat().filter(Boolean);n.length?t({type:"ADD_TO_QUEUE",payload:n}):e.dispatch({type:"CONFIRM_ANSWERED"})}))}};function ut(e){return function(e){if(Array.isArray(e))return dt(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return dt(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?dt(e,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function dt(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function ft(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function mt(e){return function(e){if(Array.isArray(e))return pt(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return pt(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?pt(e,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function pt(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}r("./node_modules/core-js/modules/web.url.js");var yt=r("./node_modules/screenfull/dist/screenfull.js"),jt=r.n(yt);function ht(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function gt(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?ht(Object(r),!0).forEach((function(t){bt(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ht(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function bt(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var vt=function(e){return["#",Math.ceil(Math.random()*e).toString(16).padStart(2,"0"),Math.ceil(Math.random()*e).toString(16).padStart(2,"0"),Math.ceil(Math.random()*e).toString(16).padStart(2,"0")].join("")},_t=function(e,t,r,n){var o=r===v.VP?{name:"",shortName:v.VP,palette:[vt(255),vt(170),vt(102),vt(34)],origin:"Selfmade"}:t.find((function(e){return e.shortName===r}));e({type:"SET_EDIT_PALETTE",payload:gt(gt({},o),{},{name:n?"Copy of ".concat(o.name):o.name,shortName:n?v.VP:r})})};function At(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Et(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?At(Object(r),!0).forEach((function(t){Ot(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):At(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function Ot(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var St=r("./src/javascript/tools/download/index.js"),Ft=r("./src/javascript/tools/getGetSettings/index.js");function wt(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Tt(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?wt(Object(r),!0).forEach((function(t){It(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):wt(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function It(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Dt(e){return function(e){if(Array.isArray(e))return Pt(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return Pt(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?Pt(e,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Pt(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var Rt=function(e,t,r){var n,o,a,s=e.frames,i=e.images,l=e.palettes;r?(t.frames&&t.frames.length&&(n=s).unshift.apply(n,Dt(t.frames)),t.images&&t.images.length&&(o=i).unshift.apply(o,Dt(t.images)),t.palettes&&t.palettes.length&&(a=l).unshift.apply(a,Dt(t.palettes))):(s=t.frames||e.frames,i=t.images||e.images,l=t.palettes||e.palettes);return Tt(Tt(Tt({},e),t),{},{images:i,frames:s,palettes:l})},Lt=function(e,t,r){var n=arguments.length>3&&void 0!==arguments[3]&&arguments[3];Object.keys(r).forEach((function(e){"state"!==e&&(e.match(/^[a-f0-9]{40}$/gi)?He.Rt.setItem("".concat(e),r[e]):e.startsWith("frame-")&&He.$0.setItem("".concat(e.split("frame-").pop()),r[e]))})),e({type:"GLOBAL_UPDATE",payload:pe(Rt(t,r.state||{},n))})};function xt(e){return(xt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Nt(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Mt(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Nt(Object(r),!0).forEach((function(t){Ct(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Nt(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function Ct(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Gt(e){return function(e){if(Array.isArray(e))return kt(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return kt(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?kt(e,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function kt(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var Bt=r("./src/javascript/tools/download/download.js"),Ut=(0,s.md)((function(e){return function(t){return function(r){if("ANIMATE_IMAGES"===r.type){var n=e.getState(),o=n.videoParams,a=o.scaleFactor,s=o.frameRate,i=o.imageSelection,l=o.yoyo,c=o.frame,u=o.lockFrame,d=o.invertPalette,f=o.palette,m=o.exportFrameMode;Promise.all(i.map((function(e){return n.images.find((function(t){return t.hash===e}))})).filter(Boolean).map((function(e){return Ie(Ie({},e),{},{frame:c||e.frame,palette:e.hashes?e.palette:f||e.palette})})).map((function(e){return(0,Ae.Z)(n)(e).then((function(t){var r=(0,Ee.Z)(n,e),o=!!e.hashes,s=o?new Oe.Z:new Se.Z,i=u||e.lockFrame||!1,l=d||e.invertPalette||!1;return o?s.update({tiles:t,palette:r,lockFrame:i}):s.update({tiles:t,palette:r.palette,lockFrame:i,invertPalette:l}),s.getScaledCanvas(a,m)}))}))).then((function(t){var r=[],n=new(he())(1,1/0),o=new ge.g(r,t[0].width,t[0].height,{loop:65535}),i=we(t);if(l){var u=we(t).reverse();u.shift(),u.pop(),i.push.apply(i,we(u))}var d=function(e,t,r,n,o){return function(a,s){return r.add((function(){return new Promise((function(r,i){for(var l=a.getContext("2d").getImageData(0,0,a.width,a.height).data,c=[],u=_e()(l,4).map((function(e){var t,r,n=(r=3,function(e){if(Array.isArray(e))return e}(t=e)||function(e,t){var r=e&&("undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"]);if(null!=r){var n,o,a=[],s=!0,i=!1;try{for(r=r.call(e);!(s=(n=r.next()).done)&&(a.push(n.value),!t||a.length!==t);s=!0);}catch(e){i=!0,o=e}finally{try{s||null==r.return||r.return()}finally{if(i)throw o}}return a}}(t,r)||Pe(t,r)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),o=(n[0]<<16)+(n[1]<<8)+n[2],a=c.findIndex((function(e){return e===o}));return-1===a&&(a=c.length,c.push(o)),a}));c.length<256;)c.push(0);try{e({type:"CREATE_GIF_PROGRESS",payload:(s+1)/o}),window.requestAnimationFrame((function(){t.addFrame(0,0,a.width,a.height,u,{delay:Math.round(100/n),palette:c}),r()}))}catch(e){i(e)}}))}))}}(e.dispatch,o,n,s,i.length);Promise.all(i.map(d)).then((function(){var t,n=(0,Fe.Z)({useCurrentDate:!0,exportScaleFactor:a,frameRate:s,altTitle:"animated",frameName:c,paletteShort:f}),i=o.end();try{t=new File([new Uint8Array(r.slice(0,i)).buffer],"".concat(n,".gif"),{type:"image/gif"})}catch(e){t=new Blob([new Uint8Array(r.slice(0,i)).buffer])}(0,be.saveAs)(t,"".concat(n,".gif")),e.dispatch({type:"CREATE_GIF_PROGRESS",payload:0})}))})).catch((function(t){e.dispatch({type:"ERROR",payload:t.message})}))}t(r)}}}),(function(e){return function(t){return function(r){if("IMAGE_SELECTION_SHIFTCLICK"===r.type){var n=e.getState(),o=(0,Le.Z)(n),a=n.lastSelectedImage,s=n.pageSize,i=o.findIndex((function(e){return e.hash===r.payload})),l=o.findIndex((function(e){return e.hash===a}));-1===l&&(l=r.page*s);var c=Math.min(l,i),u=Math.max(l,i);e.dispatch({type:"IMAGE_SELECTION_SET",payload:o.slice(c,u+1).map((function(e){return e.hash}))})}if("UPDATE_IMAGES_BATCH"===r.type){var d=e.getState(),f=(0,Ne.$b)(d),m=d.editImage,p=d.images,y=r.payload,j=y.image,h=y.batch,g=y.tagChanges;if(h&&m.batch&&m.batch.length){var b=m.batch.map((function(e){return p.find((function(t){return t.hash===e}))})).map(Ne.Np).sort(f).map(Ne.fD).map((function(e,t){if(!e)return!1;var r={},n=e.tags;return Be.forEach((function(o){switch(o){case"title":if(!h.title)break;r.title=j.title.replace(/%n/gi,t+1);break;case"created":if(!h.created)break;r.created=j.created;break;case"palette":if(!h.palette)break;ke(e.palette)===ke(j.palette)&&(r.palette=j.palette);break;case"invertPalette":if(!h.invertPalette)break;r.invertPalette=j.invertPalette;break;case"frame":if(!h.frame)break;r.frame=j.frame;break;case"lockFrame":if(!h.lockFrame)break;r.lockFrame=j.lockFrame;break;case"tags":n=(0,xe.Z)(Ce(Ce({},g),{},{initial:e.tags}))}})),Ce(Ce(Ce({},e),r),{},{tags:n})})).filter(Boolean);Object.assign(r,{payload:b})}}if("BATCH_TASK"!==r.type)t(r);else{var v=e.getState(),_=v.images,A=v.imageSelection,E=v.pageSize,O=_.filter((function(e){var t=e.hash;return A.includes(t)}));if(A.length)switch(r.payload){case"delete":e.dispatch({type:"CONFIRM_ASK",payload:{message:"Delete ".concat(A.length," images?"),confirm:function(){e.dispatch({type:"DELETE_IMAGES",payload:A})},deny:function(){e.dispatch({type:"CONFIRM_ANSWERED"})}}});break;case"animate":e.dispatch({type:"SET_VIDEO_PARAMS",payload:{imageSelection:A}});break;case"download":e.dispatch({type:"DOWNLOAD_SELECTION",payload:A});break;case"edit":e.dispatch({type:"EDIT_IMAGE_SELECTION",payload:{hash:O[0].hash,tags:Ue(O),batch:O.map((function(e){return e.hash}))}})}switch(r.payload){case"checkall":e.dispatch({type:"IMAGE_SELECTION_SET",payload:(0,Le.Z)(v).slice(r.page*E,(r.page+1)*E).map((function(e){return e.hash}))});break;case"uncheckall":e.dispatch({type:"IMAGE_SELECTION_SET",payload:[]})}}}}}),(function(e){return function(t){return function(r){switch(t(r),r.type){case"DELETE_IMAGE":case"DELETE_IMAGES":n=e.getState().images,He.Rt.keys().then((function(e){e.forEach((function(e){!function(e,t){(function(e,t){return!!t.find((function(t){var r=t.hashes;return!!r&&[r.r,r.g,r.b,r.n].includes(e)}))})(t,e)||function(e,t){return!!t.find((function(t){return t.hash===e}))}(t,e)||(0,Ze.IV)(t)}(n,e)}))}))}var n}}}),(function(e){var t;return e.getState().dropboxStorage.use&&Promise.all([r.e(510),r.e(991)]).then(r.bind(r,"./src/javascript/app/store/middlewares/dropboxStorage/middleware.js")).then((function(r){var n=r.default;t=n(e)})),function(n){return function(o){n(o),e.getState().dropboxStorage.use&&("DROPBOX_START_AUTH"!==o.type&&"SET_DROPBOX_STORAGE"!==o.type&&("STORAGE_SYNC_START"!==o.type||"dropbox"!==o.payload.storageType&&"dropboximages"!==o.payload.storageType)||(t?t(o):Promise.all([r.e(510),r.e(991)]).then(r.bind(r,"./src/javascript/app/store/middlewares/dropboxStorage/middleware.js")).then((function(r){var n=r.default;(t=n(e))(o)}))))}}}),(function(){return function(e){return function(t){"ERROR"===t.type&&alert(t.payload),e(t)}}}),(function(e){var t,r=document.querySelector("#app"),n=ct(e),o=!1;return r.addEventListener("dragover",(function(r){r.preventDefault(),o||e.dispatch({type:"IMPORT_DRAGOVER_START"}),window.clearTimeout(t),o=!0,t=window.setTimeout((function(){o=!1,e.dispatch({type:"IMPORT_DRAGOVER_END"})}),250)})),r.addEventListener("drop",(function(e){var t;e.preventDefault(),t=e.dataTransfer.items?ut(e.dataTransfer.items).filter((function(e){return"file"===e.kind})).map((function(e){return e.getAsFile()})):ut(e.dataTransfer.files),n(t)})),function(e){return function(t){e(t)}}}),(function(e){var t=null;return function(n){return function(o){n(o);var a=e.getState().gitStorage,s=a.use,i=a.owner,l=a.repo,c=a.branch,u=a.token;s&&i&&l&&c&&u&&("SET_GIT_STORAGE"===o.type||"STORAGE_SYNC_START"===o.type&&"git"===o.payload.storageType)&&(t?t(o):Promise.all([r.e(524),r.e(340)]).then(r.bind(r,"./src/javascript/app/store/middlewares/gitStorage/middleware.js")).then((function(r){var n=r.init,a=r.middleware;n(e),(t=a(e))(o)})))}}}),(function(e){var t=ct(e);return function(e){return function(r){var n;"IMPORT_FILES"!==r.type?e(r):r.payload.files&&r.payload.files.length&&t(function(e){if(Array.isArray(e))return ft(e)}(n=r.payload.files)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(n)||function(e,t){if(e){if("string"==typeof e)return ft(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?ft(e,t):void 0}}(n)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}())}}}),(function(e){var t=null,n=null;return window.addEventListener("message",(function(r){var o,a=e.getState().printerUrl;try{o=new URL(a).origin}catch(e){o=new URL(window.location.href).origin}if(r.origin===o){var s=r.data.fromRemotePrinter,i=(s=void 0===s?{}:s).lines,l=s.progress,c=s.blob,u=s.blobsdone,d=s.commands,f=s.printerData,m=r.source;if(d&&(t&&JSON.stringify(d)===JSON.stringify(e.getState().printerFunctions)||e.dispatch({type:"PRINTER_FUNCTIONS_RECEIVED",payload:d}),n=m,window.clearTimeout(t),t=window.setTimeout((function(){t=null,n=null,e.dispatch({type:"HEARTBEAT_TIMED_OUT"})}),1500)),i){var p;try{p=new File(mt(i.join("\n")),"Text input.txt",{type:"text/plain"})}catch(e){p=new Blob(mt(i.join("\n")),{type:"text/plain"})}e.dispatch({type:"IMPORT_FILES",payload:{files:[p]}})}if(void 0!==l&&e.dispatch({type:"PRINTER_PROGRESS",payload:l}),c&&e.dispatch({type:"IMPORT_FILES",payload:{files:[c]}}),u){if("string"==typeof u[0])return void window.setTimeout((function(){alert("You should update the web-app to a version > 1.16.0 on your printer for an optimized import experience :-)")}),200);window.setTimeout((function(){e.dispatch({type:"IMPORT_FILES",payload:{files:u}})}),250)}f&&e.dispatch({type:"PRINTER_DATA_RECEIVED",payload:f})}})),function(t){return function(o){switch(o.type){case"REMOTE_CALL_FUNCTION":var a,s=e.getState(),i="fetchImages"===o.payload?{dumps:null===(a=s.printerData)||void 0===a?void 0:a.dumps}:void 0;r.e(705).then(r.t.bind(r,"./node_modules/object-hash/dist/object_hash.js",23)).then((function(){r.e(591).then(r.t.bind(r,"./node_modules/pako/index.js",23)).then((function(){n.postMessage({toRemotePrinter:{command:o.payload,params:i}},"*")}))}))}t(o)}}}),(function(e){var t=(0,A.Z)("hash"),r=new(he())(1,1/0);return function(n){return function(o){if("ADD_TO_QUEUE"===o.type)return a=o.payload,void Promise.all(a.map((function(t){return r.add((function(){return tt({lines:t.lines,filename:t.file,palette:e.getState().activePalette,dispatch:e.dispatch})}))}))).then((function(r){var n=t(r),o=n.length===r.length?"":" (".concat(r.length-n.length," duplicates found in import)");e.dispatch({type:"CONFIRM_ASK",payload:{message:"Import ".concat(n.length," images?").concat(o),confirm:function(){e.dispatch({type:"ADD_IMAGES",payload:n})},deny:function(){e.dispatch({type:"CONFIRM_ANSWERED"})}}})}));var a;n(o)}}}),(function(e){return window.addEventListener("resize",(function(){e.dispatch({type:"WINDOW_DIMENSIONS",payload:{height:window.innerHeight,width:window.innerWidth}})})),jt().isEnabled&&jt().on("change",(function(){e.dispatch({type:"SET_IS_FULLSCREEN",payload:!!jt().element})})),document.addEventListener("keydown",(function(t){if(null!==e.getState().lightboxImage)switch(t.key){case"Esc":case"Escape":e.dispatch({type:"SET_LIGHTBOX_IMAGE_INDEX",payload:null}),t.preventDefault();break;case"Right":case"ArrowRight":e.dispatch({type:"LIGHTBOX_NEXT"}),t.preventDefault();break;case"Left":case"ArrowLeft":e.dispatch({type:"LIGHTBOX_PREV"}),t.preventDefault()}})),function(t){return function(r){var n=e.getState();switch(r.type){case"LIGHTBOX_NEXT":if(null===n.lightboxImage)return;return void e.dispatch({type:"SET_LIGHTBOX_IMAGE_INDEX",payload:Math.min(n.lightboxImage+1,n.images.length-1)});case"LIGHTBOX_PREV":if(null===n.lightboxImage)return;return void e.dispatch({type:"SET_LIGHTBOX_IMAGE_INDEX",payload:Math.max(n.lightboxImage-1,0)});case"LIGHTBOX_FULLSCREEN":jt().isEnabled&&(jt().element?jt().exit():jt().request(document.querySelector("body")));break;case"SET_LIGHTBOX_IMAGE_INDEX":jt().isEnabled&&!r.payload&&jt().element&&jt().exit();break;case"SET_LIGHTBOX_IMAGE_HASH":e.dispatch({type:"SET_LIGHTBOX_IMAGE_INDEX",payload:(0,Le.Z)(n).findIndex((function(e){return e.hash===r.payload}))})}t(r)}}}),(function(e){return document.addEventListener("keydown",(function(t){"Escape"!==t.key&&"Esc"!==t.key||e.dispatch({type:"CONFIRM_ANSWERED"})})),function(e){return function(t){e(t)}}}),(function(e){return document.addEventListener("keydown",(function(t){if("Enter"===t.key&&t.ctrlKey&&e.getState().editPalette.hash){var r=e.getState();e.dispatch({type:"SAVE_EDIT_PALETTE"}),r.editPalette&&t.preventDefault()}})),function(t){return function(r){switch(r.type){case"SAVE_EDIT_PALETTE":return void(0,e.dispatch)({type:"PALETTE_UPDATE",payload:gt(gt({},(n=e.getState()).editPalette),{},{tags:(0,xe.Z)(n.editPalette.tags)})});case"PALETTE_EDIT":return void _t(e.dispatch,e.getState().palettes,r.payload,!1);case"PALETTE_CLONE":return void _t(e.dispatch,e.getState().palettes,r.payload,!0)}var n;t(r)}}}),(function(e){return function(t){return function(n){if("SAVE_RGBN_IMAGE"===n.type){var o=e.getState();r.e(705).then(r.t.bind(r,"./node_modules/object-hash/dist/object_hash.js",23)).then((function(t){var r=t.default,n={palette:ie.q1,hashes:Et({},o.rgbnImages),hash:r(o.rgbnImages),created:W()().format(ie.vc),title:"",tags:[]};e.dispatch({type:"ADD_IMAGES",payload:[n]})}))}t(n)}}}),(function(e){var t=(0,Ft.Z)(e);return function(r){return function(n){switch(n.type){case"JSON_EXPORT":o=n.payload,t(o).then((function(e){(0,St.L)(null)([{blob:new Blob(new Array(e)),filename:"".concat(o,".json")}])}));break;case"JSON_IMPORT":Lt(e.dispatch,e.getState(),n.payload,!0);break;case"GIT_SETTINGS_IMPORT":case"DROPBOX_SETTINGS_IMPORT":Lt(e.dispatch,e.getState(),n.payload,!1)}var o;r(n)}}}),(function(e){return function(t){return function(r){if("SHARE_IMAGE"===r.type){var n=e.getState(),o=n.images.find((function(e){return e.hash===r.payload})),a=(0,Ee.Z)(n,o),s=Gt(n.exportScaleFactors).pop()||4,i=Gt(n.exportFileTypes).pop()||"png",l=(0,St.j)(Mt(Mt({},n),{},{exportScaleFactors:[s],exportFileTypes:[i]}));(0,Ae.Z)(n)(o).then(l(a,o)).then((function(e){var t,r=e[0],n=r.blob,o=r.filename,a=r.title;try{t={files:[new File([n],o,{type:"image/png",lastModified:new Date})],title:a}}catch(e){alert(JSON.stringify({s:1,error:e}))}if(t&&window.navigator.share)try{window.navigator.share(t).catch((function(e){return alert(JSON.stringify({s:3,error:e}))}))}catch(e){alert(JSON.stringify({s:4,error:e}))}else alert("sharing not enabled in your browser... because:\nshare is: ".concat(xt(window.navigator.share),"\nshareData is: ").concat(xt(t),"\ncanShare is: ").concat(xt(window.navigator.canShare),"\ncanShare says: ").concat(window.navigator.canShare?window.navigator.canShare(t):""))}))}t(r)}}}),(function(e){return function(t){return function(r){if("START_DOWNLOAD"===r.type||"DOWNLOAD_SELECTION"===r.type){var n=e.getState(),o=(0,St.j)(n);switch(r.type){case"START_DOWNLOAD":!function(e,t){return function(r){var n=t.images.find((function(e){return e.hash===r})),o=(0,Ee.Z)(t,n),a=(0,Fe.Z)({image:n,palette:o});return(0,Ae.Z)(t)(n).then(e(o,n)).then((0,Bt.Z)(a))}}(o,n)(r.payload);break;case"DOWNLOAD_SELECTION":!function(e,t){return function(r){var n=(0,Fe.Z)({altTitle:"gameboy-printer-gallery",useCurrentDate:!0});Promise.all(r.map((function(r){var n=t.images.find((function(e){return e.hash===r})),o=(0,Ee.Z)(t,n);return(0,Ae.Z)(t)(n).then(e(o,n))}))).then((function(e){return e.flat()})).then((0,Bt.Z)(n))}}(o,n)(r.payload)}}return t(r)}}})),Zt=window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__||s.qC,Ht=[Ut,(0,s.md)((function(e){return function(t){return function(r){t(r);var n=e.getState(),o={};ye.C.forEach((function(e){var t=e.key;if(e.saveLocally)switch(t){case"palettes":o[t]=n.palettes.filter((function(e){return!e.isPredefined}));break;default:o[t]=n[t]}})),localStorage.setItem("gbp-web-state",JSON.stringify(o))}}}))],Vt=r("./src/javascript/tools/getEnv/index.js"),Yt=function(){var e=document.getElementById("app");if(e){var t;try{t=JSON.parse(localStorage.getItem("gbp-web-state"))||{}}catch(e){t={}}"esp8266"===(0,Vt.d)().env&&(t.printerUrl="/");var i=Object.assign(ye.c,t);Promise.all([r.e(535),r.e(143)]).then(r.bind(r,"./src/javascript/app/components/App/index.js")).then((function(t){var r=t.default;try{var l=function(e){var t=(0,s.MT)(oe,pe(e),Zt.apply(void 0,Ht));return window.store=t,t}(i);(0,a.render)(n.createElement(o.zt,{store:l},n.createElement(r,null)),e)}catch(e){document.getElementById("app").innerHTML='<p class="init-error">Error while initializing the app:<br>'.concat(e.message,"<br><small>").concat(e.stack,"</small></p>")}}))}}},"./src/javascript/app/store/defaults.js":function(e,t,r){"use strict";r.d(t,{c:function(){return o},C:function(){return n}}),r("./node_modules/core-js/modules/es.array.for-each.js");var n=[{key:"printerUrl",saveLocally:!0,saveExport:["settings"],value:""},{key:"printerParams",saveLocally:!0,saveExport:["settings"],value:""},{key:"activePalette",saveLocally:!0,saveExport:["settings","remote"],value:"bw"},{key:"images",saveLocally:!0,saveExport:["selected_images","images","remote"],value:[]},{key:"galleryView",saveLocally:!0,saveExport:["settings"],value:"1x"},{key:"exportScaleFactors",saveLocally:!0,saveExport:["settings","remote"],value:[4]},{key:"exportFileTypes",saveLocally:!0,saveExport:["settings","remote"],value:["png"]},{key:"pageSize",saveLocally:!0,saveExport:["settings","remote"],value:15},{key:"imageSelection",saveLocally:!0,saveExport:["selected_images"],value:[]},{key:"rgbnImages",saveLocally:!0,saveExport:[],value:{}},{key:"editImage",saveLocally:!0,saveExport:[],value:null},{key:"videoParams",saveLocally:!0,saveExport:["settings","remote"],value:{}},{key:"filtersActiveTags",saveLocally:!0,saveExport:[],value:[]},{key:"filtersVisible",saveLocally:!0,saveExport:[],value:!1},{key:"savFrameTypes",saveLocally:!0,saveExport:["settings","remote"],value:"int"},{key:"sortBy",saveLocally:!0,saveExport:["settings","remote"],value:"created_asc"},{key:"handleExportFrame",saveLocally:!0,saveExport:["settings","remote"],value:"keep"},{key:"hideDates",saveLocally:!0,saveExport:["settings","remote"],value:!1},{key:"palettes",saveLocally:!0,saveExport:["palettes","remote"],value:[]},{key:"framesMessage",saveLocally:!0,saveExport:["settings","remote"],value:0},{key:"frames",saveLocally:!0,saveExport:["frames","remote"],value:[]},{key:"recentImports",saveLocally:!0,saveExport:[],value:[]},{key:"gitStorage",saveLocally:!0,saveExport:[],value:{use:!1,owner:"",repo:"",branch:"",token:"",throttle:"330"}},{key:"dropboxStorage",saveLocally:!0,saveExport:[],value:{path:""}}],o={};n.forEach((function(e){var t=e.key,r=e.value;o[t]=r}))},"./src/javascript/consts/specialTags.js":function(e,t,r){"use strict";r.d(t,{Dh:function(){return n},TZ:function(){return o},z2:function(){return a},ee:function(){return s},Vn:function(){return i},VP:function(){return l}});var n="__filter:untagged__",o="__filter:new__",a="__filter:mono__",s="__filter:rgb__",i="__filter:recent__",l="__new:palette__"},"./src/javascript/tools/Decoder/index.js":function(e,t,r){"use strict";r("./node_modules/core-js/modules/es.array.fill.js"),r("./node_modules/core-js/modules/es.array.iterator.js"),r("./node_modules/core-js/modules/es.array-buffer.slice.js"),r("./node_modules/core-js/modules/es.object.to-string.js"),r("./node_modules/core-js/modules/es.typed-array.uint8-clamped-array.js"),r("./node_modules/core-js/modules/es.typed-array.copy-within.js"),r("./node_modules/core-js/modules/es.typed-array.every.js"),r("./node_modules/core-js/modules/es.typed-array.fill.js"),r("./node_modules/core-js/modules/es.typed-array.filter.js"),r("./node_modules/core-js/modules/es.typed-array.find.js"),r("./node_modules/core-js/modules/es.typed-array.find-index.js"),r("./node_modules/core-js/modules/es.typed-array.for-each.js"),r("./node_modules/core-js/modules/es.typed-array.includes.js"),r("./node_modules/core-js/modules/es.typed-array.index-of.js"),r("./node_modules/core-js/modules/es.typed-array.iterator.js"),r("./node_modules/core-js/modules/es.typed-array.join.js"),r("./node_modules/core-js/modules/es.typed-array.last-index-of.js"),r("./node_modules/core-js/modules/es.typed-array.map.js"),r("./node_modules/core-js/modules/es.typed-array.reduce.js"),r("./node_modules/core-js/modules/es.typed-array.reduce-right.js"),r("./node_modules/core-js/modules/es.typed-array.reverse.js"),r("./node_modules/core-js/modules/es.typed-array.set.js"),r("./node_modules/core-js/modules/es.typed-array.slice.js"),r("./node_modules/core-js/modules/es.typed-array.some.js"),r("./node_modules/core-js/modules/es.typed-array.sort.js"),r("./node_modules/core-js/modules/es.typed-array.subarray.js"),r("./node_modules/core-js/modules/es.typed-array.to-locale-string.js"),r("./node_modules/core-js/modules/es.typed-array.to-string.js"),r("./node_modules/core-js/modules/es.array.for-each.js"),r("./node_modules/core-js/modules/web.dom-collections.for-each.js"),r("./node_modules/core-js/modules/es.array.filter.js"),r("./node_modules/core-js/modules/es.array.map.js"),r("./node_modules/core-js/modules/es.array.concat.js"),r("./node_modules/core-js/modules/es.array.slice.js"),r("./node_modules/core-js/modules/es.array.join.js"),r("./node_modules/core-js/modules/es.parse-int.js"),r("./node_modules/core-js/modules/es.string.pad-end.js"),r("./node_modules/core-js/modules/es.regexp.exec.js"),r("./node_modules/core-js/modules/es.string.replace.js"),r("./node_modules/core-js/modules/es.object.define-property.js"),r("./node_modules/core-js/modules/es.array.is-array.js"),r("./node_modules/core-js/modules/es.symbol.js"),r("./node_modules/core-js/modules/es.symbol.description.js"),r("./node_modules/core-js/modules/es.symbol.iterator.js"),r("./node_modules/core-js/modules/es.string.iterator.js"),r("./node_modules/core-js/modules/web.dom-collections.iterator.js"),r("./node_modules/core-js/modules/es.array.from.js"),r("./node_modules/core-js/modules/es.function.name.js");var n=r("./src/javascript/tools/tileIndexIsPartOfFrame/index.js");function o(e){return function(e){if(Array.isArray(e))return a(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return a(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?a(e,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function a(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function s(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var i="FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFF",l=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.canvas=null,this.tiles=[],this.colors=[],this.rawImageData=[],this.lockFrame=!1,this.invertPalette=!1,this.bwPalette=[16777215,11184810,5592405,0],this.colorData=this.bwPalette,this.blackLine=Array(20).fill(i),this.whiteLine=Array(20).fill("00000000000000000000000000000000"),this.tileIndexIsFramePart=n.Z}var t,r;return t=e,(r=[{key:"update",value:function(e){var t=this,r=e.canvas,n=void 0===r?null:r,o=e.tiles,a=void 0===o?[]:o,s=e.palette,i=void 0===s?[]:s,l=e.lockFrame,c=void 0!==l&&l,u=e.invertPalette,d=void 0!==u&&u,f=this.setCanvas(n),m=this.setPalette(i,d),p=this.setLockFrame(c);(f||m||p||!this.tiles.length)&&(this.tiles=[]);var y=this.setTiles(a),j=this.getHeight();if(0!==j){if(this.canvas){if(this.canvas.height!==j||!this.rawImageData.length){this.canvas.height=j;var h=new Uint8ClampedArray(160*j*4);this.rawImageData.forEach((function(e,t){h[t]=e})),this.rawImageData=h}y.forEach((function(e){var r=e.index,n=e.newTile;t.renderTile(r,n)})),this.updateCanvas(j)}}else this.canvas.height=0}},{key:"updateCanvas",value:function(e){var t,r=this.canvas.getContext("2d");try{t=new ImageData(this.rawImageData,160,e)}catch(n){t=r.getImageData(0,0,160,e),this.rawImageData.forEach((function(e,r){t.data[r]=e}))}r.putImageData(t,0,0)}},{key:"getScaledCanvas",value:function(e){var t=this,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"keep",n=360===this.tiles.length?r:"keep",o=this.getScaleCanvasSize(n),a=o.initialHeight,s=o.initialWidth,i=o.tilesPerLine,l=document.createElement("canvas"),c=l.getContext("2d");return l.width=s*e,l.height=a*e,this.getExportTiles(n).forEach((function(n,o){t.paintTileScaled(t.decodeTile(n),o,c,e,i,r)})),l}},{key:"getScaleCanvasSize",value:function(e){switch(e){case"keep":return{initialHeight:this.getHeight(),initialWidth:160,tilesPerLine:20};case"crop":return{initialHeight:this.getHeight()-32,initialWidth:128,tilesPerLine:16};case"square_black":case"square_white":case"square_smart":return{initialHeight:this.getHeight()+16,initialWidth:160,tilesPerLine:20};default:throw new Error("unknown export mode ".concat(e))}}},{key:"getExportTiles",value:function(e){var t=this;switch(e){case"keep":return this.tiles;case"crop":return this.tiles.map((function(e,r){return t.tileIndexIsFramePart(r,"keep")?null:e})).filter(Boolean);case"square_black":return[].concat(o(this.blackLine),o(this.tiles),o(this.blackLine));case"square_white":return[].concat(o(this.whiteLine),o(this.tiles),o(this.whiteLine));case"square_smart":return[].concat(o(this.smartTile("first")),o(this.tiles),o(this.smartTile("last")));default:throw new Error("unknown export mode ".concat(e))}}},{key:"smartTile",value:function(e){switch(e){case"first":return this.tiles.slice(0,20).map((function(e){return Array(8).fill(e.slice(0,4)).join("")}));case"last":return this.tiles.slice(340,360).map((function(e){return Array(8).fill(e.slice(28,32)).join("")}));default:return this.blackLine}}},{key:"setCanvas",value:function(e){return this.canvas!==e&&(this.canvas=e,!0)}},{key:"setPalette",value:function(e,t){return(JSON.stringify(this.colors)!==JSON.stringify(e)||this.invertPalette!==t)&&(this.colors=e,this.invertPalette=t,this.colorData=this.colors.map((function(e){return 7!==e.length?null:parseInt(e.substring(1),16)})),!0)}},{key:"setLockFrame",value:function(e){return e!==this.lockFrame&&(this.lockFrame=e,!0)}},{key:"setTiles",value:function(e){var t=this,r=e.map((function(e,r){return e!==t.tiles[r]?{index:r,newTile:e}:null})).filter(Boolean);return this.tiles=e,r}},{key:"renderTile",value:function(e,t){var r=this.decodeTile(t);this.paintTile(r,e)}},{key:"decodeTile",value:function(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:i,t=e.replace(/[^0-9A-F]/gi,"").padEnd(32,"f"),r=new Array(16),n=0;n<r.length;n+=1)r[n]=parseInt(t.substr(2*n,2),16);for(var o=new Array(64),a=0;a<8;a+=1)for(var s=0;s<8;s+=1){var l=r[2*a+1]>>7-s&1,c=r[2*a]>>7-s&1;o[8*a+s]=l<<1|c}return o}},{key:"getRGBValue",value:function(e,t,r,n){var o=this.lockFrame&&"crop"!==n&&this.tileIndexIsFramePart(r,n)?this.bwPalette:this.colorData,a=this.invertPalette?o[3-e[t]]:o[e[t]];return{r:(16711680&a)>>16,g:(65280&a)>>8,b:255&a}}},{key:"paintTile",value:function(e,t){for(var r=t%20*8,n=8*Math.floor(t/20),o=0;o<8;o+=1)for(var a=0;a<8;a+=1){var s=4*(r+o+160*(n+a)),i=this.getRGBValue(e,8*a+o,t,"keep");this.rawImageData[s]=i.r,this.rawImageData[s+1]=i.g,this.rawImageData[s+2]=i.b,this.rawImageData[s+3]=255}}},{key:"paintTileScaled",value:function(e,t,r,n,o,a){for(var s=t%o*8*n,i=8*Math.floor(t/o)*n,l=0;l<8;l+=1)for(var c=0;c<8;c+=1){var u=this.getRGBValue(e,8*c+l,t,a);r.fillStyle="rgb(".concat(u.r,", ").concat(u.g,", ").concat(u.b,")"),r.fillRect(s+l*n,i+c*n,n+1,n+1)}}},{key:"getHeight",value:function(){return 8*Math.ceil(this.tiles.length/20)}}])&&s(t.prototype,r),e}();t.Z=l},"./src/javascript/tools/RGBNDecoder/blendModes.js":function(e,t,r){"use strict";var n;function o(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}r.d(t,{_I:function(){return a},qe:function(){return s},Rg:function(){return i}}),r("./node_modules/core-js/modules/es.object.define-property.js");var a={NORMAL:"normal",NORMAL_S:"normal_s",LIGHTEN:"lighten",SCREEN:"screen",DODGE:"dodge",DODGE_S:"dodge_s",ADDITION:"addition",DARKEN:"darken",MULTIPLY:"multiply",BURN:"burn",BURN_S:"burn_s",OVERLAY:"overlay",SOFTLIGHT:"softlight",SOFTLIGHT_S:"softlight_s",HARDLIGHT:"hardlight",DIFFERENCE:"difference",SUBTRACT:"subtract",SUBTRACT_S:"subtract_s",GRAIN_EXTRACT:"grainextract",GRAIN_EXTRACT_S:"grainextract_s",GRAIN_MERGE:"grainmerge",DIVIDE:"divide",DIVIDE_S:"divide_s"},s=(o(n={},a.NORMAL,(function(e,t){return e})),o(n,a.LIGHTEN,(function(e,t){return Math.max(t,e)})),o(n,a.SCREEN,(function(e,t){return 1-(1-t)*(1-e)})),o(n,a.DODGE,(function(e,t){return e/(1-t)})),o(n,a.ADDITION,(function(e,t){return t+e})),o(n,a.DARKEN,(function(e,t){return Math.min(t,e)})),o(n,a.MULTIPLY,(function(e,t){return t*e})),o(n,a.BURN,(function(e,t){return 1-(1-e)/t})),o(n,a.OVERLAY,(function(e,t){return e<.5?2*e*t:1-2*(1-t)*(1-e)})),o(n,a.SOFTLIGHT,(function(e,t){return(1-e)*s[a.MULTIPLY](e,t)+e*s[a.SCREEN](e,t)})),o(n,a.DIFFERENCE,(function(e,t){return Math.abs(e-t)})),o(n,a.SUBTRACT,(function(e,t){return e-t})),o(n,a.GRAIN_EXTRACT,(function(e,t){return e-t+.5})),o(n,a.GRAIN_MERGE,(function(e,t){return e+t-.5})),o(n,a.DIVIDE,(function(e,t){return e/t})),o(n,a.NORMAL_S,(function(e,t){return s[a.NORMAL](t,e)})),o(n,a.DODGE_S,(function(e,t){return s[a.DODGE](t,e)})),o(n,a.BURN_S,(function(e,t){return s[a.BURN](t,e)})),o(n,a.HARDLIGHT,(function(e,t){return s[a.OVERLAY](t,e)})),o(n,a.SOFTLIGHT_S,(function(e,t){return s[a.SOFTLIGHT](t,e)})),o(n,a.SUBTRACT_S,(function(e,t){return s[a.SUBTRACT](t,e)})),o(n,a.GRAIN_EXTRACT_S,(function(e,t){return s[a.GRAIN_EXTRACT](t,e)})),o(n,a.DIVIDE_S,(function(e,t){return s[a.DIVIDE](t,e)})),n),i=[{id:a.NORMAL,label:"Normal (ignore neutral layer)"},{id:a.NORMAL_S,label:"Normal ⇵ (only neutral layer)"},{id:a.LIGHTEN,label:"Lighten only"},{id:a.SCREEN,label:"Screen"},{id:a.DODGE,label:"Dodge"},{id:a.DODGE_S,label:"Dodge ⇵"},{id:a.ADDITION,label:"Addition"},{id:a.DARKEN,label:"Darken only"},{id:a.MULTIPLY,label:"Multiply"},{id:a.BURN,label:"Burn"},{id:a.BURN_S,label:"Burn ⇵"},{id:a.OVERLAY,label:"Overlay"},{id:a.SOFTLIGHT,label:"Soft light"},{id:a.SOFTLIGHT_S,label:"Soft light ⇵"},{id:a.HARDLIGHT,label:"Hard light"},{id:a.DIFFERENCE,label:"Difference"},{id:a.SUBTRACT,label:"Subtract"},{id:a.SUBTRACT_S,label:"Subtract ⇵"},{id:a.GRAIN_EXTRACT,label:"Grain extract"},{id:a.GRAIN_EXTRACT_S,label:"Grain extract ⇵"},{id:a.GRAIN_MERGE,label:"Grain merge"},{id:a.DIVIDE,label:"Divide"},{id:a.DIVIDE_S,label:"Divide ⇵"}]},"./src/javascript/tools/RGBNDecoder/index.js":function(e,t,r){"use strict";r("./node_modules/core-js/modules/es.array.map.js"),r("./node_modules/core-js/modules/es.array.slice.js"),r("./node_modules/core-js/modules/es.array.join.js"),r("./node_modules/core-js/modules/es.array.fill.js"),r("./node_modules/core-js/modules/es.object.set-prototype-of.js"),r("./node_modules/core-js/modules/es.object.get-prototype-of.js"),r("./node_modules/core-js/modules/es.reflect.construct.js"),r("./node_modules/core-js/modules/es.object.create.js"),r("./node_modules/core-js/modules/es.reflect.get.js"),r("./node_modules/core-js/modules/es.object.get-own-property-descriptor.js"),r("./node_modules/core-js/modules/es.object.define-property.js"),r("./node_modules/core-js/modules/es.array.is-array.js"),r("./node_modules/core-js/modules/es.symbol.js"),r("./node_modules/core-js/modules/es.symbol.description.js"),r("./node_modules/core-js/modules/es.object.to-string.js"),r("./node_modules/core-js/modules/es.symbol.iterator.js"),r("./node_modules/core-js/modules/es.array.iterator.js"),r("./node_modules/core-js/modules/es.string.iterator.js"),r("./node_modules/core-js/modules/web.dom-collections.iterator.js"),r("./node_modules/core-js/modules/es.function.name.js"),r("./node_modules/core-js/modules/es.array.from.js");var n=r("./src/javascript/tools/Decoder/index.js"),o=r("./src/javascript/tools/RGBNDecoder/blendModes.js");function a(e){return(a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function s(e,t){if(e){if("string"==typeof e)return i(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?i(e,t):void 0}}function i(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function l(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function c(e,t,r){return(c="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,r){var n=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=f(e)););return e}(e,t);if(n){var o=Object.getOwnPropertyDescriptor(n,t);return o.get?o.get.call(r):o.value}})(e,t,r||e)}function u(e,t){return(u=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function d(e,t){return!t||"object"!==a(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function f(e){return(f=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var m=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&u(e,t)}(y,e);var t,r,n,a,m,p=(a=y,m=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=f(a);if(m){var r=f(this).constructor;e=Reflect.construct(t,arguments,r)}else e=t.apply(this,arguments);return d(this,e)});function y(){var e;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,y),(e=p.call(this)).blackLine=y.rgbnTiles([e.blackLine,e.blackLine,e.blackLine,e.blackLine]),e.whiteLine=y.rgbnTiles([e.whiteLine,e.whiteLine,e.whiteLine,e.whiteLine]),e}return t=y,n=[{key:"rgbnTiles",value:function(e){var t,r,n=(r=4,function(e){if(Array.isArray(e))return e}(t=e)||function(e,t){var r=e&&("undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"]);if(null!=r){var n,o,a=[],s=!0,i=!1;try{for(r=r.call(e);!(s=(n=r.next()).done)&&(a.push(n.value),!t||a.length!==t);s=!0);}catch(e){i=!0,o=e}finally{try{s||null==r.return||r.return()}finally{if(i)throw o}}return a}}(t,r)||s(t,r)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),o=n[0],a=n[1],l=n[2],c=n[3],u=Math.max((null==o?void 0:o.length)||0,(null==a?void 0:a.length)||0,(null==l?void 0:l.length)||0,(null==c?void 0:c.length)||0);return function(e){return function(e){if(Array.isArray(e))return i(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||s(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}(Array(u)).map((function(e,t){return{r:null==o?void 0:o[t],g:null==a?void 0:a[t],b:null==l?void 0:l[t],n:null==c?void 0:c[t]}}))}}],(r=[{key:"setPalette",value:function(e){return!!e&&JSON.stringify(this.palette)!==JSON.stringify(e)&&(this.palette=e,!0)}},{key:"decodeTile",value:function(e){var t=e.r,r=e.g,n=e.b,o=e.n;return{r:c(f(y.prototype),"decodeTile",this).call(this,t),g:c(f(y.prototype),"decodeTile",this).call(this,r),b:c(f(y.prototype),"decodeTile",this).call(this,n),n:o?c(f(y.prototype),"decodeTile",this).call(this,o):null}}},{key:"getRGBValue",value:function(e,t,r,n){var o=e.r,a=e.g,s=e.b,i=e.n;if(this.lockFrame&&"crop"!==n&&this.tileIndexIsFramePart(r,n)&&i)try{return c(f(y.prototype),"getRGBValue",this).call(this,i,t,r,n)}catch(e){return{r:255*Math.random(),g:255*Math.random(),b:255*Math.random()}}return this.blendColors({r:o[t],g:a[t],b:s[t],n:!!i&&i[t]})}},{key:"smartTile",value:function(e){var t=this;switch(e){case"first":return this.tiles.slice(0,20).map((function(e){return{r:e.r?Array(8).fill(e.r.slice(0,4)).join(""):c(f(y.prototype),"smartTile",t).call(t,null),g:e.g?Array(8).fill(e.g.slice(0,4)).join(""):c(f(y.prototype),"smartTile",t).call(t,null),b:e.b?Array(8).fill(e.b.slice(0,4)).join(""):c(f(y.prototype),"smartTile",t).call(t,null),n:e.n?Array(8).fill(e.n.slice(0,4)).join(""):c(f(y.prototype),"smartTile",t).call(t,null)}}));case"last":return this.tiles.slice(340,360).map((function(e){return{r:e.r?Array(8).fill(e.r.slice(28,32)).join(""):c(f(y.prototype),"smartTile",t).call(t,null),g:e.g?Array(8).fill(e.g.slice(28,32)).join(""):c(f(y.prototype),"smartTile",t).call(t,null),b:e.b?Array(8).fill(e.b.slice(28,32)).join(""):c(f(y.prototype),"smartTile",t).call(t,null),n:e.n?Array(8).fill(e.n.slice(28,32)).join(""):c(f(y.prototype),"smartTile",t).call(t,null)}}));default:return c(f(y.prototype),"smartTile",this).call(this,null)}}},{key:"blendColors",value:function(e){var t=e.r,r=e.g,n=e.b,a=e.n,s={r:this.palette.r[3-t],g:this.palette.g[3-r],b:this.palette.b[3-n]};if(!1===a)return s;var i=this.palette.blend||o._I.MULTIPLY;if(!o.qe[i])return s;var l=function(e,t){return 255*Math.max(0,Math.min(1,o.qe[i](e/255,t/255)))};return{r:l(this.palette.r[3-t],this.palette.n[3-a]),g:l(this.palette.g[3-r],this.palette.n[3-a]),b:l(this.palette.b[3-n],this.palette.n[3-a])}}},{key:"getHeight",value:function(){return 144}}])&&l(t.prototype,r),n&&l(t,n),y}(n.Z);t.Z=m},"./src/javascript/tools/applyFrame/frameData.js":function(e,t,r){"use strict";r.d(t,{v:function(){return s},e:function(){return a}}),r("./node_modules/core-js/modules/es.array.iterator.js"),r("./node_modules/core-js/modules/es.object.to-string.js"),r("./node_modules/core-js/modules/es.promise.js"),r("./node_modules/core-js/modules/es.string.iterator.js"),r("./node_modules/core-js/modules/web.dom-collections.iterator.js"),r("./node_modules/core-js/modules/es.array.join.js"),r("./node_modules/core-js/modules/es.array.map.js"),r("./node_modules/core-js/modules/es.array.filter.js"),r("./node_modules/core-js/modules/es.regexp.exec.js"),r("./node_modules/core-js/modules/es.string.replace.js"),r("./node_modules/core-js/modules/es.string.split.js"),r("./node_modules/core-js/modules/es.array.slice.js"),r("./node_modules/core-js/modules/es.array.fill.js");var n=r("./src/javascript/tools/tileIndexIsPartOfFrame/index.js"),o=r("./src/javascript/tools/localforageInstance/index.js"),a=function(e,t){return r.e(591).then(r.t.bind(r,"./node_modules/pako/index.js",23)).then((function(r){var a=r.default,s=t.filter((function(e,t){return(0,n.Z)(t,"keep")})).map((function(e){return e.replace(/ /gi,"")})).join("\n"),i=a.deflate(s,{to:"string",strategy:1,level:8});return o.$0.setItem(e,i)}))},s=function(e){return e?o.$0.getItem(e).then((function(e){return e?r.e(591).then(r.t.bind(r,"./node_modules/pako/index.js",23)).then((function(t){var r=t.default;try{var n=r.inflate(e,{to:"string"}).split("\n");return{upper:n.slice(0,40),left:Array(14).fill(0).map((function(e,t){return n.slice(4*t+40,4*t+42)})),right:Array(14).fill(0).map((function(e,t){return n.slice(4*t+42,4*t+44)})),lower:n.slice(96,136)}}catch(e){return null}})):null})):Promise.resolve(null)}},"./src/javascript/tools/applyFrame/index.js":function(e,t,r){"use strict";r("./node_modules/core-js/modules/es.object.to-string.js"),r("./node_modules/core-js/modules/es.promise.js"),r("./node_modules/core-js/modules/es.array.for-each.js"),r("./node_modules/core-js/modules/web.dom-collections.for-each.js"),r("./node_modules/core-js/modules/es.array.is-array.js"),r("./node_modules/core-js/modules/es.symbol.js"),r("./node_modules/core-js/modules/es.symbol.description.js"),r("./node_modules/core-js/modules/es.symbol.iterator.js"),r("./node_modules/core-js/modules/es.array.iterator.js"),r("./node_modules/core-js/modules/es.string.iterator.js"),r("./node_modules/core-js/modules/web.dom-collections.iterator.js"),r("./node_modules/core-js/modules/es.array.from.js"),r("./node_modules/core-js/modules/es.array.slice.js"),r("./node_modules/core-js/modules/es.function.name.js");var n=r("./src/javascript/tools/applyFrame/frameData.js");function o(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}t.Z=function(e,t){return 360!==e.length?Promise.resolve(e):(0,n.v)(t).then((function(t){var r,n=function(e){if(Array.isArray(e))return o(e)}(r=e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(r)||function(e,t){if(e){if("string"==typeof e)return o(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?o(e,t):void 0}}(r)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}();return t.upper.forEach((function(e,t){n[t]=e})),t.lower.forEach((function(e,t){n[t+320]=e})),t.left.forEach((function(e,t){n[20*t+40]=e[0],n[20*t+41]=e[1]})),t.right.forEach((function(e,t){n[20*t+58]=e[0],n[20*t+59]=e[1]})),n})).catch((function(){return e}))}},"./src/javascript/tools/applyTagChanges/index.js":function(e,t,r){"use strict";function n(e){return function(e){if(Array.isArray(e))return o(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return o(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?o(e,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function o(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}r("./node_modules/core-js/modules/es.array.concat.js"),r("./node_modules/core-js/modules/es.array.filter.js"),r("./node_modules/core-js/modules/es.array.find-index.js"),r("./node_modules/core-js/modules/es.array.includes.js"),r("./node_modules/core-js/modules/es.string.includes.js"),r("./node_modules/core-js/modules/es.array.is-array.js"),r("./node_modules/core-js/modules/es.symbol.js"),r("./node_modules/core-js/modules/es.symbol.description.js"),r("./node_modules/core-js/modules/es.object.to-string.js"),r("./node_modules/core-js/modules/es.symbol.iterator.js"),r("./node_modules/core-js/modules/es.array.iterator.js"),r("./node_modules/core-js/modules/es.string.iterator.js"),r("./node_modules/core-js/modules/web.dom-collections.iterator.js"),r("./node_modules/core-js/modules/es.array.from.js"),r("./node_modules/core-js/modules/es.array.slice.js"),r("./node_modules/core-js/modules/es.function.name.js"),t.Z=function(e){var t=e.initial,r=e.add,o=e.remove,a=[].concat(n(t),n(r));return a.filter((function(e,t){return a.findIndex((function(t){return t===e}))===t})).filter((function(e){return!o.includes(e)}))}},"./src/javascript/tools/cleanUrl/index.js":function(e,t,r){"use strict";r("./node_modules/core-js/modules/es.string.trim.js"),r("./node_modules/core-js/modules/es.regexp.exec.js"),r("./node_modules/core-js/modules/es.string.match.js"),r("./node_modules/core-js/modules/es.regexp.constructor.js"),r("./node_modules/core-js/modules/es.regexp.to-string.js"),r("./node_modules/core-js/modules/es.array.concat.js"),r("./node_modules/core-js/modules/es.string.ends-with.js"),t.Z=function(e,t){if(!e.trim())return"";if("/"===e&&"ws"!==t)return e;var r=!!e.match(new RegExp("^".concat(t,"(s)?:\\/\\/"),"gi"));return"".concat(r?"":"".concat(t,"://")).concat(e).concat(e.endsWith("/")?"":"/")}},"./src/javascript/tools/download/download.js":function(e,t,r){"use strict";r.d(t,{Z:function(){return a}}),r("./node_modules/core-js/modules/es.array.iterator.js"),r("./node_modules/core-js/modules/es.object.to-string.js"),r("./node_modules/core-js/modules/es.promise.js"),r("./node_modules/core-js/modules/es.string.iterator.js"),r("./node_modules/core-js/modules/web.dom-collections.iterator.js"),r("./node_modules/core-js/modules/es.array.map.js"),r("./node_modules/core-js/modules/es.array.for-each.js"),r("./node_modules/core-js/modules/web.dom-collections.for-each.js");var n=r("./node_modules/file-saver/dist/FileSaver.min.js"),o=r("./src/javascript/tools/replaceDuplicateFilenames/index.js"),a=function(e){return function(t){if(1!==t.length)r.e(733).then(r.t.bind(r,"./node_modules/jszip/dist/jszip.min.js",23)).then((function(r){var a=new(0,r.default);Promise.all(t.map((function(e){var t=e.filename;return function(e){return"function"==typeof e.arrayBuffer?e.arrayBuffer():new Promise((function(t){var r=new FileReader;r.onload=function(e){t(e.target.result)},r.readAsArrayBuffer(e)}))}(e.blob).then((function(e){return{filename:t,arrayBuffer:e}}))}))).then(o.Z).then((function(e){e.forEach((function(e){var t=e.uFilename,r=e.arrayBuffer;a.file(t,r)}))})).then((function(){return a.generateAsync({type:"blob",compression:"DEFLATE"}).then((function(t){(0,n.saveAs)(t,"".concat(e,".zip"))}))}))}));else{var a=t[0];(0,n.saveAs)(a.blob,a.filename)}}}},"./src/javascript/tools/download/getPrepareFiles.js":function(e,t,r){"use strict";r("./node_modules/core-js/modules/es.array.filter.js"),r("./node_modules/core-js/modules/es.array.map.js"),r("./node_modules/core-js/modules/es.object.to-string.js"),r("./node_modules/core-js/modules/es.promise.js"),r("./node_modules/core-js/modules/es.array.reduce.js"),r("./node_modules/core-js/modules/es.array.join.js"),r("./node_modules/core-js/modules/es.regexp.exec.js"),r("./node_modules/core-js/modules/es.string.match.js"),r("./node_modules/core-js/modules/es.array.concat.js"),r("./node_modules/core-js/modules/es.array.iterator.js"),r("./node_modules/core-js/modules/es.string.iterator.js"),r("./node_modules/core-js/modules/web.dom-collections.iterator.js"),r("./node_modules/core-js/modules/es.array.flat.js"),r("./node_modules/core-js/modules/es.array.is-array.js"),r("./node_modules/core-js/modules/es.symbol.js"),r("./node_modules/core-js/modules/es.symbol.description.js"),r("./node_modules/core-js/modules/es.symbol.iterator.js"),r("./node_modules/core-js/modules/es.array.from.js"),r("./node_modules/core-js/modules/es.array.slice.js"),r("./node_modules/core-js/modules/es.function.name.js");var n=r("./src/javascript/tools/Decoder/index.js"),o=r("./src/javascript/tools/RGBNDecoder/index.js"),a=r("./src/javascript/tools/generateFileName/index.js"),s=r("./src/javascript/tools/storage/index.js"),i=r("./src/javascript/app/defaults.js");function l(e){return function(e){if(Array.isArray(e))return c(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return c(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?c(e,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function c(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}t.Z=function(e){return function(t,r){return function(c){var u=e.exportScaleFactors,d=e.exportFileTypes,f=e.handleExportFrame,m=!!r.hashes,p=m?new o.Z:new n.Z,y=r.lockFrame||!1,j=r.invertPalette||!1;m?p.update({tiles:c,palette:t,lockFrame:y}):p.update({tiles:c,palette:t.palette,lockFrame:y,invertPalette:j});var h=l(u).filter((function(e){return"number"==typeof e})),g=l(d);h.length||h.push(4),g.length||g.push("png");var b=h.map((function(e){return g.map((function(n){return new Promise((function(o){var c=(0,a.Z)({image:r,palette:t,exportScaleFactor:e});if("txt"===n){if(r.hashes)return void o(null);(0,s.zD)(r.hash,null).then((function(e){var t=e.map((function(e){return e.match(/.{1,2}/g).join(" ")})).reduce((function(e,t,r){return[].concat(l(e),r%40?[t]:[i.fb,t])}),[]),a=[i.jU].concat(l(t),[i.T6,i.oU]).join("\n");o({folder:"images",filename:"".concat(c,".").concat(n),blob:new Blob(new Array(a),{type:"text/plain"}),title:r.title})}))}else p.getScaledCanvas(e,f).toBlob((function(e){o({filename:"".concat(c,".").concat(n),blob:e,title:r.title})}),"image/".concat(n),1)}))}))}));return Promise.all(b.flat()).then((function(e){return e.filter(Boolean)}))}}}},"./src/javascript/tools/download/index.js":function(e,t,r){"use strict";r.d(t,{L:function(){return n.Z},j:function(){return o.Z}});var n=r("./src/javascript/tools/download/download.js"),o=r("./src/javascript/tools/download/getPrepareFiles.js")},"./src/javascript/tools/generateFileName/index.js":function(e,t,r){"use strict";r("./node_modules/core-js/modules/es.string.pad-start.js"),r("./node_modules/core-js/modules/es.date.to-string.js"),r("./node_modules/core-js/modules/es.object.to-string.js"),r("./node_modules/core-js/modules/es.regexp.to-string.js"),r("./node_modules/core-js/modules/es.array.join.js"),r("./node_modules/core-js/modules/es.array.map.js"),r("./node_modules/core-js/modules/es.array.filter.js");var n=r("./node_modules/dayjs/dayjs.min.js"),o=r.n(n),a=r("./node_modules/dayjs/plugin/customParseFormat.js"),s=r.n(a),i=r("./src/javascript/app/defaults.js");o().extend(s()),t.Z=function(e){var t,r,n,a,s,l,c=e.image,u=void 0!==c&&c,d=e.palette,f=void 0!==d&&d,m=e.exportScaleFactor,p=void 0!==m&&m,y=e.frameRate,j=void 0!==y&&y,h=e.altTitle,g=void 0!==h&&h,b=e.useCurrentDate,v=void 0!==b&&b,_=e.frameName,A=void 0!==_&&_,E=e.paletteShort,O=void 0!==E&&E,S=v?o()():o()(u.created,i.vc),F=!!S.isValid()&&S.format(i.z3),w=O||!!f&&(f.shortName||(r=(t=f).r,n=t.g,a=t.b,s=t.n,l=function(e){return e.toString(16).padStart(2,"0")},[r.map(l).join(""),n.map(l).join(""),a.map(l).join(""),s.map(l).join("")].join("")));return[F,u&&u.title?u.title:g,p?"".concat(p,"x"):null,j?"".concat(j,"fps"):null,A,w].filter(Boolean).join("-")}},"./src/javascript/tools/getFilteredImages/filter.js":function(e,t,r){"use strict";r("./node_modules/core-js/modules/es.array.includes.js"),r("./node_modules/core-js/modules/es.string.includes.js"),r("./node_modules/core-js/modules/es.array.map.js"),r("./node_modules/core-js/modules/es.array.find.js");var n=r("./node_modules/dayjs/dayjs.min.js"),o=r.n(n),a=r("./src/javascript/consts/specialTags.js"),s=r("./src/javascript/app/defaults.js");t.Z=function(e,t){return function(r){return!e.length||(!(!e.includes(a.Dh)||0!==r.tags.length)||(!!(e.includes(a.TZ)&&o()(r.created,s.vc).unix()>o()().subtract("1","day").unix())||(e.includes(a.Vn)?t.map((function(e){return e.hash})).includes(r.hash):!(!e.includes(a.ee)||!r.hashes)||!(!e.includes(a.z2)||r.hashes)||!!r.tags.find((function(t){return e.includes(t)})))))}}},"./src/javascript/tools/getFilteredImages/index.js":function(e,t,r){"use strict";r("./node_modules/core-js/modules/es.array.filter.js"),r("./node_modules/core-js/modules/es.array.map.js"),r("./node_modules/core-js/modules/es.array.sort.js"),r("./node_modules/core-js/modules/es.array.is-array.js"),r("./node_modules/core-js/modules/es.symbol.js"),r("./node_modules/core-js/modules/es.symbol.description.js"),r("./node_modules/core-js/modules/es.object.to-string.js"),r("./node_modules/core-js/modules/es.symbol.iterator.js"),r("./node_modules/core-js/modules/es.array.iterator.js"),r("./node_modules/core-js/modules/es.string.iterator.js"),r("./node_modules/core-js/modules/web.dom-collections.iterator.js"),r("./node_modules/core-js/modules/es.array.from.js"),r("./node_modules/core-js/modules/es.array.slice.js"),r("./node_modules/core-js/modules/es.function.name.js");var n=r("./src/javascript/tools/sortImages/index.js"),o=r("./src/javascript/tools/getFilteredImages/filter.js");function a(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}t.Z=function(e){var t,r=e.images,s=e.filtersActiveTags,i=e.sortBy,l=e.recentImports;return(t=r,function(e){if(Array.isArray(e))return a(e)}(t)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(t)||function(e,t){if(e){if("string"==typeof e)return a(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?a(e,t):void 0}}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()).map(n.Np).sort((0,n.$b)({sortBy:i})).map(n.fD).filter((0,o.Z)(s,l))}},"./src/javascript/tools/getFrameGroups/index.js":function(e,t,r){"use strict";r("./node_modules/core-js/modules/es.array.reduce.js"),r("./node_modules/core-js/modules/es.function.name.js"),r("./node_modules/core-js/modules/es.regexp.exec.js"),r("./node_modules/core-js/modules/es.string.match.js"),r("./node_modules/core-js/modules/es.array.find.js");var n=function(e,t){switch(e){case"hk":return"Hallo Katze!";case"int":return"International Frames (GameBoy Camera)";case"jp":return"Japanese Frames (Pocket Camera)";default:return t}};t.Z=function(e){return e.reduce((function(e,t){var r,o=t.id,a=t.name;try{r=o.match(/^[a-z]{2,}/g)[0]}catch(t){return e}return e.find((function(e){return e.id===r}))||e.push({id:r,name:n(r,a)}),e}),[])}},"./src/javascript/tools/getGetSettings/index.js":function(e,t,r){"use strict";r.d(t,{Z:function(){return u}}),r("./node_modules/core-js/modules/es.array.for-each.js"),r("./node_modules/core-js/modules/web.dom-collections.for-each.js"),r("./node_modules/core-js/modules/es.array.includes.js"),r("./node_modules/core-js/modules/es.string.includes.js"),r("./node_modules/core-js/modules/es.array.filter.js"),r("./node_modules/core-js/modules/es.object.to-string.js"),r("./node_modules/core-js/modules/es.promise.js"),r("./node_modules/core-js/modules/es.object.define-property.js"),r("./node_modules/core-js/modules/es.object.keys.js"),r("./node_modules/core-js/modules/es.symbol.js"),r("./node_modules/core-js/modules/es.object.get-own-property-descriptor.js"),r("./node_modules/core-js/modules/es.object.get-own-property-descriptors.js"),r("./node_modules/core-js/modules/es.object.define-properties.js");var n=r("./src/javascript/app/store/defaults.js"),o=(r("./node_modules/core-js/modules/es.array.iterator.js"),r("./node_modules/core-js/modules/es.string.iterator.js"),r("./node_modules/core-js/modules/web.dom-collections.iterator.js"),r("./node_modules/core-js/modules/es.array.map.js"),r("./src/javascript/tools/localforageInstance/index.js")),a=function(e,t){var r=t.images,n=t.imageSelection;switch(e){case"images":return r.map((function(e){return e.hash}));case"selected_images":return n;default:return[]}},s=r("./src/javascript/tools/getEnv/index.js");function i(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function l(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?i(Object(r),!0).forEach((function(t){c(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):i(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function c(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var u=function(e){return function(t){var r=e.getState(),i=JSON.parse(localStorage.getItem("gbp-web-state"));delete i.gitStorage,delete i.dropboxStorage,"esp8266"===(0,s.d)().env&&delete i.printerUrl;var c,u,d,f={};switch(n.C.forEach((function(e){var n=e.saveExport,o=e.key;n.includes(t)&&(f[o]=i[o],"images"===o&&"selected_images"===t&&(f[o]=f[o].filter((function(e){var n=e.hash;return a(t,r).includes(n)}))),"palettes"===o&&(f[o]=i[o].filter((function(e){return!e.isPredefined}))))})),t){case"debug":return Promise.resolve(JSON.stringify({state:i},null,2));case"settings":case"remote":return Promise.resolve(JSON.stringify({state:f},null,2));case"images":case"selected_images":return(d=a(t,r),Promise.all(d.map((function(e){return o.Rt.getItem(e).then((function(t){return{hash:e,data:t}}))}))).then((function(e){var t={};return e.forEach((function(e){var r=e.hash,n=e.data;t[r]=n})),t}))).then((function(e){return JSON.stringify(l({state:f},e),null,2)}));case"frames":return(c=r.frames,u=c.map((function(e){return e.id})),Promise.all(u.map((function(e){return o.$0.getItem(e).then((function(t){return{frameId:e,data:t}}))}))).then((function(e){var t={};return e.forEach((function(e){var r=e.frameId,n=e.data;t["frame-".concat(r)]=n})),t}))).then((function(e){return JSON.stringify(l({state:f},e),null,2)}));case"palettes":return Promise.resolve(f.palettes).then((function(e){return JSON.stringify({state:{palettes:e}},null,2)}));default:return null}}}},"./src/javascript/tools/getImagePalette/index.js":function(e,t,r){"use strict";r("./node_modules/core-js/modules/es.array.find.js"),t.Z=function(e,t){var r=e.palettes,n=t.hashes,o=t.palette;return n?o:r.find((function(e){return e.shortName===o}))}},"./src/javascript/tools/getRGBNFrames/index.js":function(e,t,r){"use strict";r("./node_modules/core-js/modules/es.array.find.js"),t.Z=function(e,t,r){var n=e.images,o=t.r,a=t.g,s=t.b,i=t.n;if(r)return{r:r,g:r,b:r,n:r};var l=n.find((function(e){return e.hash===o})),c=n.find((function(e){return e.hash===a})),u=n.find((function(e){return e.hash===s})),d=n.find((function(e){return e.hash===i}));return{r:l?l.frame:null,g:c?c.frame:null,b:u?u.frame:null,n:d?d.frame:null}}},"./src/javascript/tools/loadImageTiles/index.js":function(e,t,r){"use strict";r("./node_modules/core-js/modules/es.array.iterator.js"),r("./node_modules/core-js/modules/es.object.to-string.js"),r("./node_modules/core-js/modules/es.promise.js"),r("./node_modules/core-js/modules/es.string.iterator.js"),r("./node_modules/core-js/modules/web.dom-collections.iterator.js");var n=r("./src/javascript/tools/storage/index.js"),o=r("./src/javascript/tools/getRGBNFrames/index.js"),a=r("./src/javascript/tools/RGBNDecoder/index.js");t.Z=function(e){return function(t,r){var s=t.hash,i=t.frame,l=t.hashes;if(!l)return(0,n.zD)(s,i,r);var c=(0,o.Z)(e,l,i);return Promise.all([(0,n.zD)(l.r,c.r||i,r),(0,n.zD)(l.g,c.g||i,r),(0,n.zD)(l.b,c.b||i,r),(0,n.zD)(l.n,c.n||i,r)]).then(a.Z.rgbnTiles)}}},"./src/javascript/tools/readFileAs/index.js":function(e,t,r){"use strict";r("./node_modules/core-js/modules/es.object.to-string.js"),r("./node_modules/core-js/modules/es.promise.js"),t.Z=function(e,t){return new Promise((function(r,n){var o=new FileReader;switch(o.onload=function(e){var o=e.target;if(o.result)return"arrayBuffer"===t?void r(Buffer.from(o.result)):void r(o.result);n(new Error("Filereader has no result"))},o.onerror=function(e){n(e)},t){case"arrayBuffer":o.readAsArrayBuffer(e);break;case"text":o.readAsText(e);break;case"binaryString":o.readAsBinaryString(e);break;case"dataURL":o.readAsDataURL(e);break;default:n(new Error('readAs param missing or unknown type "'.concat(t,'"')))}}))}},"./src/javascript/tools/replaceDuplicateFilenames/index.js":function(e,t,r){"use strict";function n(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function o(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?n(Object(r),!0).forEach((function(t){a(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):n(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function a(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}r("./node_modules/core-js/modules/es.array.map.js"),r("./node_modules/core-js/modules/es.regexp.exec.js"),r("./node_modules/core-js/modules/es.string.split.js"),r("./node_modules/core-js/modules/es.array.join.js"),r("./node_modules/core-js/modules/es.array.includes.js"),r("./node_modules/core-js/modules/es.array.concat.js"),r("./node_modules/core-js/modules/es.object.define-property.js"),r("./node_modules/core-js/modules/es.object.keys.js"),r("./node_modules/core-js/modules/es.symbol.js"),r("./node_modules/core-js/modules/es.array.filter.js"),r("./node_modules/core-js/modules/es.object.get-own-property-descriptor.js"),r("./node_modules/core-js/modules/es.array.for-each.js"),r("./node_modules/core-js/modules/web.dom-collections.for-each.js"),r("./node_modules/core-js/modules/es.object.get-own-property-descriptors.js"),r("./node_modules/core-js/modules/es.object.define-properties.js"),t.Z=function(e){var t=[];return e.map((function(e){for(var r=e.filename,n=r.split("."),a=n.pop(),s=n.join("."),i=r,l=0;t.includes(i);)l+=1,i="".concat(s,"_(").concat(l,").").concat(a);return t.includes(i)||t.push(i),o(o({},e),{},{uFilename:i})}))}},"./src/javascript/tools/sortImages/index.js":function(e,t,r){"use strict";function n(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function o(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function a(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?o(Object(r),!0).forEach((function(t){s(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):o(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function s(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}r.d(t,{Np:function(){return i},fD:function(){return l},$b:function(){return c}}),r("./node_modules/core-js/modules/es.regexp.exec.js"),r("./node_modules/core-js/modules/es.string.split.js"),r("./node_modules/core-js/modules/es.object.define-property.js"),r("./node_modules/core-js/modules/es.object.keys.js"),r("./node_modules/core-js/modules/es.symbol.js"),r("./node_modules/core-js/modules/es.array.filter.js"),r("./node_modules/core-js/modules/es.object.get-own-property-descriptor.js"),r("./node_modules/core-js/modules/es.array.for-each.js"),r("./node_modules/core-js/modules/web.dom-collections.for-each.js"),r("./node_modules/core-js/modules/es.object.get-own-property-descriptors.js"),r("./node_modules/core-js/modules/es.object.define-properties.js"),r("./node_modules/core-js/modules/es.array.is-array.js"),r("./node_modules/core-js/modules/es.symbol.description.js"),r("./node_modules/core-js/modules/es.object.to-string.js"),r("./node_modules/core-js/modules/es.symbol.iterator.js"),r("./node_modules/core-js/modules/es.array.iterator.js"),r("./node_modules/core-js/modules/es.string.iterator.js"),r("./node_modules/core-js/modules/web.dom-collections.iterator.js"),r("./node_modules/core-js/modules/es.array.slice.js"),r("./node_modules/core-js/modules/es.function.name.js"),r("./node_modules/core-js/modules/es.array.from.js");var i=function(e,t){return a(a({},e),{},{sortIndex:t})},l=function(e){return a(a({},e),{},{sortIndex:void 0})},c=function(e){var t=e.sortBy;return function(e,r){if(!t)return 0;var o,a,s=(o=t.split("_"),a=2,function(e){if(Array.isArray(e))return e}(o)||function(e,t){var r=e&&("undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"]);if(null!=r){var n,o,a=[],s=!0,i=!1;try{for(r=r.call(e);!(s=(n=r.next()).done)&&(a.push(n.value),!t||a.length!==t);s=!0);}catch(e){i=!0,o=e}finally{try{s||null==r.return||r.return()}finally{if(i)throw o}}return a}}(o,a)||function(e,t){if(e){if("string"==typeof e)return n(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?n(e,t):void 0}}(o,a)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),i=s[0],l=s[1],c=e[i],u=r[i],d="desc"===l?-1:1;return c&&u?c>u?d:c<u?-d:e.sortIndex<r.sortIndex?d:-d:0}}},"./src/javascript/tools/storage/index.js":function(e,t,r){"use strict";function n(e){return function(e){if(Array.isArray(e))return o(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return o(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?o(e,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function o(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}r.d(t,{IV:function(){return p},zD:function(){return m},a1:function(){return f}}),r("./node_modules/core-js/modules/es.array.iterator.js"),r("./node_modules/core-js/modules/es.object.to-string.js"),r("./node_modules/core-js/modules/es.promise.js"),r("./node_modules/core-js/modules/es.string.iterator.js"),r("./node_modules/core-js/modules/web.dom-collections.iterator.js"),r("./node_modules/core-js/modules/es.array.join.js"),r("./node_modules/core-js/modules/es.array.map.js"),r("./node_modules/core-js/modules/es.regexp.exec.js"),r("./node_modules/core-js/modules/es.string.replace.js"),r("./node_modules/core-js/modules/es.string.split.js"),r("./node_modules/core-js/modules/es.array.flat.js"),r("./node_modules/core-js/modules/es.string.match.js"),r("./node_modules/core-js/modules/es.string.pad-end.js"),r("./node_modules/core-js/modules/es.array.concat.js"),r("./node_modules/core-js/modules/es.array.is-array.js"),r("./node_modules/core-js/modules/es.symbol.js"),r("./node_modules/core-js/modules/es.symbol.description.js"),r("./node_modules/core-js/modules/es.symbol.iterator.js"),r("./node_modules/core-js/modules/es.array.from.js"),r("./node_modules/core-js/modules/es.array.slice.js"),r("./node_modules/core-js/modules/es.function.name.js"),r("./node_modules/core-js/modules/es.date.to-string.js"),r("./node_modules/core-js/modules/es.regexp.to-string.js");var a={"":"006666666600FFFF"," ":"FFFFFFFFFFFFFFFF",0:"FFDDAAAAAADDFFFF",1:"FFDD99DDDDDDFFFF",2:"FF99EEDDBB88FFFF",3:"FF99EE99EE99FFFF",4:"FFDDBBBB88EEFFFF",5:"FF88BB99EE99FFFF",6:"FFCCBB99AADDFFFF",7:"FF88EEDDBBBBFFFF",8:"FFDDAADDAADDFFFF",9:"FFDDAACCEE99FFFF",a:"FFDDAAAA88AAFFFF",b:"FF99AA99AA99FFFF",c:"FFCCBBBBBBCCFFFF",d:"FF99AAAAAA99FFFF",e:"FF88BB99BB88FFFF",f:"FF88BB99BBBBFFFF",g:"FFCCBBAAAACCFFFF",h:"FFAAAA88AAAAFFFF",i:"FF88DDDDDD88FFFF",j:"FF99DDDDDDBBFFFF",k:"FFAAAA99AAAAFFFF",l:"FFBBBBBBBB88FFFF",m:"FFAA888AAAAAFFFF",n:"FFAA8A888AAAFFFF",o:"FFDDAAAAAADDFFFF",p:"FF99AA99BBBBFFFF",q:"FFDDAAAAAACCFFFF",r:"FF99AA99AAAAFFFF",s:"FFCCBBDDEE99FFFF",t:"FF88DDDDDDDDFFFF",u:"FFAAAAAAAACCFFFF",v:"FFAAAAAAAADDFFFF",w:"FFAAAA8A88AAFFFF",x:"FFAAAADDAAAAFFFF",y:"FFAAAADDDDDDFFFF",z:"FF88EEDDBB88FFFF","ä":"AADDAAAA88AAFFFF","ö":"AADDAAAAAADDFFFF","ü":"AAAFAAAAAACCFFFF","ß":"FF99AA99AA99BBFF",".":"FFFFFFFFFFDDFFFF","!":"DDDDDDDDFFDDFFFF","?":"DDAAEEDDFFDDFFFF","-":"FFFFFF88FFFFFFFF",_:"FFFFFFFFFF88FFFF",":":"FFFFDDFFDDFFFFFF"},s=function(e){var t=[].concat(n(e.toString(10).toLowerCase()),[" "," "]),r=t.shift(),o=t.shift(),s=a[r]||a[""],i=a[o]||a[""];return n(Array(16)).map((function(e,t){return"".concat(s[t]).concat(i[t])})).join("")};function i(e){return function(e){if(Array.isArray(e))return l(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return l(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?l(e,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function l(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var c="FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFF\n",u=r("./src/javascript/tools/applyFrame/index.js"),d=r("./src/javascript/tools/localforageInstance/index.js"),f=function(e){return r.e(705).then(r.t.bind(r,"./node_modules/object-hash/dist/object_hash.js",23)).then((function(t){var n=t.default;return r.e(591).then(r.t.bind(r,"./node_modules/pako/index.js",23)).then((function(t){var r=t.default,o=e.map((function(e){return e.replace(/ /gi,"")})).join("\n"),a=r.deflate(o,{to:"string",strategy:1,level:8}),s=n(a);return d.Rt.setItem(s,a).then((function(){return s}))}))}))},m=function(e,t,n){return e?r.e(591).then(r.t.bind(r,"./node_modules/pako/index.js",23)).then((function(t){var r=t.default;return d.Rt.getItem(e).then((function(e){return r.inflate(e,{to:"string"}).split("\n")})).catch((function(){return n?[]:function(e){var t=[],r="The following hash is missing in your localStorage:\n".concat(e,"\n\nMaybe you imported a debug dump?").split("\n").map((function(e){return e.match(/.{1,32}/g)})).flat().map((function(e){return e||""})).map((function(){return(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"").padEnd(32," ")})).map((function(e){return e.match(/.{1,2}/g).map((function(e){return s(e)}))})).map((function(e){return[c,c].concat(i(e),[c,c])})).flat();for(t.push.apply(t,i(i(Array(40)).map((function(){return c})))),t.push.apply(t,i(r));t.length<360;)t.push(c);return t}(e)}))})).then((function(e){return t?(0,u.Z)(e,t):e})):Promise.resolve(null)},p=function(e){d.Rt.removeItem(e)}},"./src/javascript/tools/tileIndexIsPartOfFrame/index.js":function(e,t){"use strict";t.Z=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"keep",r=e-("keep"===t?0:20);if(r<40)return!0;if(r>=320)return!0;switch(r%20){case 0:case 1:case 18:case 19:return!0;default:return!1}}},"./src/javascript/tools/unique/by.js":function(e,t,r){"use strict";r("./node_modules/core-js/modules/es.array.filter.js"),r("./node_modules/core-js/modules/es.array.find-index.js"),t.Z=function(e){return function(t){return t.filter((function(r,n){return t.findIndex((function(t){return t[e]===r[e]}))===n}))}}},"./src/javascript/tools/unique/index.js":function(e,t,r){"use strict";r("./node_modules/core-js/modules/es.array.filter.js"),r("./node_modules/core-js/modules/es.array.find-index.js"),t.Z=function(e){return e.filter((function(t,r){return e.findIndex((function(e){return e===t}))===r}))}}}]);
//# sourceMappingURL=iap.js.map