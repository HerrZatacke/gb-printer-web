/*! License information can be found in 3c7d/iap.js.l.txt */
"use strict";(self.webpackChunkgb_printer_web=self.webpackChunkgb_printer_web||[]).push([[42],{15177:function(t,e,r){r.d(e,{T6:function(){return s},Z6:function(){return i},d$:function(){return y},fb:function(){return f},jU:function(){return l},k3:function(){return a},oU:function(){return p},q1:function(){return h},vc:function(){return o},z3:function(){return u}});r(47042);var n=r(24022),o="YYYY-MM-DD HH:mm:ss:SSS",a="YYYY-MM-DD",i="HH:mm",u="YYYYMMDD-HHmmss",c=[0,85,170,255],l='!{"command":"INIT"}',f='!{"command":"DATA", "compressed":0, "more":1}',s='!{"command":"DATA","compressed":0,"more":0}',p='!{"command":"PRNT","sheets":1,"margin_upper":1,"margin_lower":3,"pallet":228,"density":64 }',h={r:c.slice(),g:c.slice(),b:c.slice(),n:c.slice(),blend:n._I.MULTIPLY},y={shortName:"-",name:"Missing Palette",palette:["#aaaaaa","#999999","#888888","#777777"]}},49848:function(t,e,r){r.r(e),r.d(e,{default:function(){return mo}});r(19601),r(66992),r(41539),r(88674),r(78783),r(33948),r(92222);var n=r(67294),o=r(82100),a=r(73935),i=r(97779),u=function(t,e){return void 0!==t?t:e},c=r(13629),l=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"cybl",e=arguments.length>1?arguments[1]:void 0;switch(e.type){case c.K0:return e.payload;case c.D5:return u(e.payload.activePalette,t);case c.Or:return e.payload.newSelectedPalette||t;default:return t}};r(83710),r(79753),r(82526),r(41817),r(32165),r(91038),r(47042),r(68309),r(74916);function f(t){return function(t){if(Array.isArray(t))return s(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||function(t,e){if(!t)return;if("string"==typeof t)return s(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);"Object"===r&&t.constructor&&(r=t.constructor.name);if("Map"===r||"Set"===r)return Array.from(t);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return s(t,e)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function s(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}var p=null,h=function(){if(null===p)try{p=window.navigator.canShare({files:[new File([new Blob(f("test"))],"test.txt",{type:"text/plain",lastModified:new Date})]})}catch(t){p=!1}return p};r(57327);function y(t){return function(t){if(Array.isArray(t))return d(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||function(t,e){if(!t)return;if("string"==typeof t)return d(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);"Object"===r&&t.constructor&&(r=t.constructor.name);if("Map"===r||"Set"===r)return Array.from(t);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return d(t,e)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function d(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}var m=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],e=arguments.length>1?arguments[1]:void 0;switch(e.type){case c.jH:return[e.payload].concat(y(t));case c.GU:case c.Dt:case c.S1:case c.md:case c.BS:case c.Or:case c.Gp:return t.filter((function(t,e){return e}));default:return t}},v=function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0],e=arguments.length>1?arguments[1]:void 0;switch(e.type){case c.xo:return!0;case c.es:return!1;default:return t}};r(69070),r(47941),r(38880),r(89554),r(54747),r(49337),r(33321);function g(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function b(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?g(Object(r),!0).forEach((function(e){w(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):g(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function w(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}var O=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=arguments.length>1?arguments[1]:void 0;switch(e.type){case c.Hn:return{use:t.use};case c.wb:return b(b({},t),e.payload);default:return t}},A=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,e=arguments.length>1?arguments[1]:void 0;switch(e.type){case c.u7:return{hash:e.payload};case c.v6:return e.payload;case c.DS:case c.m9:case c.hT:case c.D5:return null;default:return t}},S=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,e=arguments.length>1?arguments[1]:void 0;switch(e.type){case c.kr:return e.payload;case c.D5:case c.po:case c.wA:return null;default:return t}},E=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=arguments.length>1?arguments[1]:void 0;switch(e.type){case c.iF:return e.payload;case c.iM:case c.$e:return{};default:return t}},F=r(31852);function j(t){return function(t){if(Array.isArray(t))return P(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||function(t,e){if(!t)return;if("string"==typeof t)return P(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);"Object"===r&&t.constructor&&(r=t.constructor.name);if("Map"===r||"Set"===r)return Array.from(t);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return P(t,e)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function P(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}var D=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:["png"],e=arguments.length>1?arguments[1]:void 0;switch(e.type){case c.Fw:return e.payload.checked?(0,F.Z)([].concat(j(t),[e.payload.fileType])):t.filter((function(t){return t!==e.payload.fileType}));case c.D5:return u(e.payload.exportFileTypes,t);default:return t}};function I(t){return function(t){if(Array.isArray(t))return T(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||function(t,e){if(!t)return;if("string"==typeof t)return T(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);"Object"===r&&t.constructor&&(r=t.constructor.name);if("Map"===r||"Set"===r)return Array.from(t);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return T(t,e)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function T(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}var _=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[1],e=arguments.length>1?arguments[1]:void 0;switch(e.type){case c.WB:return e.payload.checked?window.navigator.msSaveBlob?[e.payload.factor]:[].concat(I(t),[e.payload.factor]):t.filter((function(t){return t!==e.payload.factor}));case c.D5:return u(e.payload.exportScaleFactors,t);default:return t}},L=(r(26699),r(32023),r(48766)),x=[L.Dh,L.TZ,L.z2,L.ee,L.Vn],k=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],e=arguments.length>1?arguments[1]:void 0;switch(e.type){case c.OD:return e.payload;case c.ou:return t.filter((function(t){return x.includes(t)||e.payload.includes(t)}));default:return t}},R=function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0],e=arguments.length>1?arguments[1]:void 0;switch(e.type){case c.y9:return!0;case c.j6:case c.OD:return!1;default:return t}},N=(r(2707),r(81451));function C(t){return function(t){if(Array.isArray(t))return G(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||function(t,e){if(!t)return;if("string"==typeof t)return G(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);"Object"===r&&t.constructor&&(r=t.constructor.name);if("Map"===r||"Set"===r)return Array.from(t);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return G(t,e)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function G(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}var B=function(t,e){return t.id<e.id?-1:t.id>e.id?1:0},M=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],e=arguments.length>1?arguments[1]:void 0;switch(e.type){case c.GU:return(0,N.Z)("id")([e.payload].concat(C(t))).sort(B);case c.BS:return t.filter((function(t){return t.id!==e.payload}));case c.wA:return[].concat(C(t.filter((function(t){return t.id!==e.payload.updateId}))),[e.payload.data]).sort(B);case c.D5:return(0,N.Z)("id")(e.payload.frames).sort(B);default:return t}},U=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,e=arguments.length>1?arguments[1]:void 0;switch(e.type){case c.Jf:return 1;case c.jN:return 2;default:return t}},Z=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"1x",e=arguments.length>1?arguments[1]:void 0;switch(e.type){case c.O:return e.payload;case c.D5:return u(e.payload.galleryView,t);default:return t}};function H(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function $(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?H(Object(r),!0).forEach((function(e){V(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):H(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function V(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}var Y=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=arguments.length>1?arguments[1]:void 0;return e.type===c.Ik?$($({},t),e.payload):t},J=function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0],e=arguments.length>1?arguments[1]:void 0;switch(e.type){case c.wK:return e.payload;case c.D5:return u(e.payload.handleExportFrame,t);default:return t}},z=function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0],e=arguments.length>1?arguments[1]:void 0;switch(e.type){case c.Mx:return e.payload;case c.D5:return u(e.payload.hideDates,t);default:return t}};r(21249),r(69826);function W(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function X(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?W(Object(r),!0).forEach((function(e){q(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):W(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function q(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function K(t){return function(t){if(Array.isArray(t))return Q(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||function(t,e){if(!t)return;if("string"==typeof t)return Q(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);"Object"===r&&t.constructor&&(r=t.constructor.name);if("Map"===r||"Set"===r)return Array.from(t);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Q(t,e)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Q(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}var tt=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],e=arguments.length>1?arguments[1]:void 0;switch(e.type){case c.Dt:return(0,N.Z)("hash")([].concat(K(t),K(e.payload)));case c.S1:return K(t.filter((function(t){return t.hash!==e.payload})));case c.md:return K(t.filter((function(t){var r=t.hash;return!e.payload.includes(r)})));case c.m9:return t.map((function(t){return t.hash===e.payload.hash?X(X({},t),e.payload):t}));case c.d4:return t.map((function(t){return t.hash===e.payload.hash?X(X({},t),{},{tags:(0,F.Z)(e.payload.isFavourite?[L.oJ].concat(K(t.tags)):t.tags.filter((function(t){return t!==L.oJ})))}):t}));case c.hT:return t.map((function(t){return e.payload.find((function(e){return e.hash===t.hash}))||t}));case c.D5:return(0,N.Z)("hash")(e.payload.images);default:return t}},et=function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0],e=arguments.length>1?arguments[1]:void 0;switch(e.type){case c.nN:return e.payload;case c.D5:return u(e.payload.importDeleted,t);default:return t}};function rt(t){return function(t){if(Array.isArray(t))return nt(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||function(t,e){if(!t)return;if("string"==typeof t)return nt(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);"Object"===r&&t.constructor&&(r=t.constructor.name);if("Map"===r||"Set"===r)return Array.from(t);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return nt(t,e)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function nt(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}var ot=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],e=arguments.length>1?arguments[1]:void 0;switch(e.type){case c.iq:case c.S1:return rt(t.filter((function(t){return t!==e.payload})));case c.Rv:return[].concat(rt(t),[e.payload]);case c.y0:return e.payload;case c.md:return[];case c.D5:return u(e.payload.imageSelection,t);default:return t}},at=function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0],e=arguments.length>1?arguments[1]:void 0;switch(e.type){case c.Pk:return e.payload;case c.D5:return u(e.payload.importLastSeen,t);default:return t}},it=function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0],e=arguments.length>1?arguments[1]:void 0;switch(e.type){case c.qr:return e.payload;case c.D5:return u(e.payload.importPad,t);default:return t}},ut=function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0],e=arguments.length>1?arguments[1]:void 0;return e.type===c.Yx?e.payload:t},ct=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,e=arguments.length>1?arguments[1]:void 0;switch(e.type){case c.Rv:case c.iq:return e.payload;case c.S1:case c.md:case c.O:return null;default:return t}},lt=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,e=arguments.length>1?arguments[1]:void 0;return e.type===c.vR?e.payload:t},ft=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,e=arguments.length>1?arguments[1]:void 0;switch(e.type){case c.R4:return e.payload;case c.D5:return u(e.payload.pageSize,t);default:return t}};function st(t){return function(t){if(Array.isArray(t))return pt(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||function(t,e){if(!t)return;if("string"==typeof t)return pt(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);"Object"===r&&t.constructor&&(r=t.constructor.name);if("Map"===r||"Set"===r)return Array.from(t);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return pt(t,e)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function pt(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}var ht=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],e=arguments.length>1?arguments[1]:void 0;switch(e.type){case c.Or:return st(t.filter((function(t){return t.shortName!==e.payload.shortName})));case c.$e:return(0,N.Z)("shortName")([].concat(st(t.map((function(t){return t.shortName!==e.payload.shortName?t:e.payload}))),[e.payload]));case c.D5:return(0,N.Z)("shortName").apply(void 0,[e.payload.palettes].concat(st(t)));default:return t}},yt=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"asc";return function(r){var n="desc"===e?-1:1;return r.sort((function(e,r){return e[t]>r[t]?n:e[t]<r[t]?-n:0}))}};function dt(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function mt(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?dt(Object(r),!0).forEach((function(e){vt(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):dt(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function vt(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function gt(t){return function(t){if(Array.isArray(t))return bt(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||function(t,e){if(!t)return;if("string"==typeof t)return bt(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);"Object"===r&&t.constructor&&(r=t.constructor.name);if("Map"===r||"Set"===r)return Array.from(t);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return bt(t,e)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function bt(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}var wt=(0,N.Z)("url"),Ot=yt("url"),At=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],e=arguments.length>1?arguments[1]:void 0;switch(e.type){case c.gH:return Ot(wt(gt(t.filter((function(t){return t.url!==e.payload})))));case c.gk:return Ot(wt([{url:e.payload}].concat(gt(t))));case c.rc:return Ot(wt(t.map((function(t){return t.url!==e.payload.url?t:mt(mt({},t),e.payload)}))));case c.PA:return Ot(wt(t.map((function(t){if(t.url!==e.payload.url)return t;var r=mt(mt({},t.config||{}),e.payload.config||{});return mt(mt({},t),{},{config:r})}))));default:return t}},St=r(27484),Et=r.n(St),Ft=r(31712),jt=r(25108),Pt=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:navigator.language,e=arguments.length>1?arguments[1]:void 0;if(e.type===c.Qs)try{return(0,Ft.Z)(Et()(),e.payload),e.payload}catch(e){return jt.error(e),t}return t},Dt=function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0],e=arguments.length>1?arguments[1]:void 0;switch(e.type){case c.ug:case c.od:return!0;case c.Dt:case c.or:case c.fX:case c.Jx:return!1;default:return t}},It=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=arguments.length>1?arguments[1]:void 0;switch(e.type){case c.fX:return e.payload;case c.Jx:case c.od:return{};default:return t}},Tt=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],e=arguments.length>1?arguments[1]:void 0;switch(e.type){case c.or:return e.payload;case c.od:return[];default:return t}},_t=r(15168),Lt=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",e=arguments.length>1?arguments[1]:void 0;switch(e.type){case c.YE:return(0,_t.Z)(e.payload,"http");case c.D5:return u(e.payload.printerUrl,t);default:return t}},xt=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",e=arguments.length>1?arguments[1]:void 0;switch(e.type){case c.WN:return e.payload;case c.D5:return u(e.payload.printerParams,t);default:return t}};function kt(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function Rt(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?kt(Object(r),!0).forEach((function(e){Nt(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):kt(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function Nt(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}var Ct=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{gif:0,printer:0},e=arguments.length>1?arguments[1]:void 0;switch(e.type){case c.B4:return Rt(Rt({},t),{},{gif:.01});case c.DK:return Rt(Rt({},t),{},{gif:e.payload});case c.fc:return Rt(Rt({},t),{},{plugin:e.payload});case c.pQ:return Rt(Rt({},t),{},{printer:e.payload});case c.Dt:case c.Gp:return Rt(Rt({},t),{},{printer:0});default:return t}};function Gt(t){return function(t){if(Array.isArray(t))return Bt(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||function(t,e){if(!t)return;if("string"==typeof t)return Bt(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);"Object"===r&&t.constructor&&(r=t.constructor.name);if("Map"===r||"Set"===r)return Array.from(t);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Bt(t,e)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Bt(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function Mt(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function Ut(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?Mt(Object(r),!0).forEach((function(e){Zt(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):Mt(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function Zt(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}var Ht=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{git:[],dropbox:[]},e=arguments.length>1?arguments[1]:void 0;switch(e.type){case c.b9:return Ut(Ut({},t),{},{git:[e.payload].concat(Gt(t.git))});case c.ON:return Ut(Ut({},t),{},{dropbox:[e.payload].concat(Gt(t.dropbox))});case c.Ki:return Ut(Ut({},t),{},Zt({},e.payload.storageType,[{timestamp:(new Date).getTime()/1e3,message:"."}].concat(Gt(t[e.payload.storageType]))));case c.bM:case c.d0:return{git:[],dropbox:[]};default:return t}};function $t(t){return function(t){if(Array.isArray(t))return Vt(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||function(t,e){if(!t)return;if("string"==typeof t)return Vt(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);"Object"===r&&t.constructor&&(r=t.constructor.name);if("Map"===r||"Set"===r)return Array.from(t);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Vt(t,e)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Vt(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}var Yt=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],e=arguments.length>1?arguments[1]:void 0;switch(e.type){case c.Dt:var r=e.payload.map((function(t){var e=t.hash;return t.hashes?null:{hash:e,timestamp:Et()().unix()}})).filter(Boolean);return[].concat($t(t.filter((function(t){var e=t.hash;return!r.includes(e)}))),$t(r));case c.D5:var n,o;return null!==(n=e.payload)&&void 0!==n&&null!==(o=n.imageSelection)&&void 0!==o&&o.length?[].concat($t(t.filter((function(t){var r=t.hash;return!e.payload.imageSelection.includes(r)}))),$t(e.payload.imageSelection.map((function(t){return{hash:t,timestamp:Et()().unix()}})))):t;default:return t}};function Jt(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function zt(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?Jt(Object(r),!0).forEach((function(e){Wt(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):Jt(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function Wt(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}var Xt=function(){var t,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,r=arguments.length>1?arguments[1]:void 0;switch(r.type){case c.Sd:var n=zt(zt({},e),r.payload);return n.r||n.g||n.b||n.n?n:null;case c.Dt:return null!==(t=r.payload[0])&&void 0!==t&&t.hashes?null:e;case c.S1:case c.md:return null;case c.D5:return u(r.payload.rgbnImages,e);default:return e}},qt=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"int",e=arguments.length>1?arguments[1]:void 0;switch(e.type){case c.LR:return e.payload;case c.D5:return u(e.payload.savFrameTypes,t);default:return t}},Kt=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",e=arguments.length>1?arguments[1]:void 0;switch(e.type){case c.bD:return e.payload;case c.D5:return u(e.payload.sortBy,t);default:return t}},Qt=function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0],e=arguments.length>1?arguments[1]:void 0;switch(e.type){case c.XB:return!0;case c.qJ:case c.bD:return!1;default:return t}},te=function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0],e=arguments.length>1?arguments[1]:void 0;switch(e.type){case c.eP:return!0;case c.Ki:case c.bM:return!1;default:return t}};function ee(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function re(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?ee(Object(r),!0).forEach((function(e){ne(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):ee(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function ne(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}var oe=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=arguments.length>1?arguments[1]:void 0;switch(e.type){case c.oI:return re(re({},t),{},{dropbox:e.payload});case c.yK:return re(re({},t),{},{dropbox:e.payload.state.lastUpdateUTC,local:e.payload.state.lastUpdateUTC});case c.Ki:return re({},t);case c.m9:case c.hT:case c.S1:case c.$e:case c.Or:case c.Dt:case c.GU:case c.BS:return re(re({},t),{},{local:Math.floor((new Date).getTime()/1e3)});default:return t}},ae=function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0],e=arguments.length>1?arguments[1]:void 0;switch(e.type){case c.sS:return!0;case c.eP:case c.Ki:case c.DU:return!1;default:return t}},ie=function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0],e=arguments.length>1?arguments[1]:void 0;return e.type===c.rR?e.payload:t},ue=function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0],e=arguments.length>1?arguments[1]:void 0;return e.type===c.Dr?e.payload:t};function ce(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function le(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?ce(Object(r),!0).forEach((function(e){fe(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):ce(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function fe(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}var se={imageSelection:[]},pe=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:se,e=arguments.length>1?arguments[1]:void 0;switch(e.type){case c.xG:return le(le({},t),e.payload);case c.B4:case c.Xb:return le(le({},t),{},{imageSelection:[]});case c.D5:return u(e.payload.videoParams,t);default:return t}},he=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{height:window.innerHeight,width:window.innerWidth},e=arguments.length>1?arguments[1]:void 0;return e.type===c.rU?e.payload:t},ye=(0,i.UY)({activePalette:l,canShare:h,confirm:m,dragover:v,dropboxStorage:O,editImage:A,editFrame:S,editPalette:E,exportFileTypes:D,exportScaleFactors:_,filtersActiveTags:k,filtersVisible:R,frames:M,framesMessage:U,galleryView:Z,gitStorage:Y,handleExportFrame:J,hideDates:z,images:tt,imageSelection:ot,importDeleted:et,importLastSeen:at,importPad:it,isFullscreen:ut,lastSelectedImage:ct,progressLog:Ht,lightboxImage:lt,pageSize:ft,palettes:ht,plugins:At,preferredLocale:Pt,printerBusy:Dt,printerData:It,printerFunctions:Tt,printerUrl:Lt,printerParams:xt,progress:Ct,recentImports:Yt,rgbnImages:Xt,savFrameTypes:qt,sortBy:Kt,sortOptionsVisible:Qt,syncBusy:te,syncLastUpdate:oe,syncSelect:ae,useSerials:ie,showSerials:ue,videoParams:pe,windowDimensions:he}),de=r(23860),me=function(t){return function(e){return function(r){e(r);var n=t.getState(),o={};de.C.forEach((function(t){var e=t.key;if(t.saveLocally)if("palettes"===e)o[e]=n.palettes.filter((function(t){return!t.isPredefined}));else o[e]=n[e]})),localStorage.setItem("gbp-web-state",JSON.stringify(o))}}},ve=(r(34553),r(39575),r(82472),r(92990),r(18927),r(33105),r(35035),r(74345),r(7174),r(32846),r(44731),r(77209),r(96319),r(58867),r(37789),r(33739),r(29368),r(14483),r(12056),r(3462),r(30678),r(27462),r(33824),r(55021),r(12974),r(15016),r(25009)),ge=r.n(ve),be=r(11494),we=r(93162),Oe=r(30236),Ae=r.n(Oe),Se=r(28014),Ee=r(39506),Fe=r(17036),je=r(97768),Pe=r(84040);function De(t){return function(t){if(Array.isArray(t))return ke(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||xe(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Ie(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function Te(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?Ie(Object(r),!0).forEach((function(e){_e(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):Ie(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function _e(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function Le(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null==r)return;var n,o,a=[],i=!0,u=!1;try{for(r=r.call(t);!(i=(n=r.next()).done)&&(a.push(n.value),!e||a.length!==e);i=!0);}catch(t){u=!0,o=t}finally{try{i||null==r.return||r.return()}finally{if(u)throw o}}return a}(t,e)||xe(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function xe(t,e){if(t){if("string"==typeof t)return ke(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?ke(t,e):void 0}}function ke(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}var Re=function(t){return function(e){return function(r){if(r.type===c.B4){var n=t.getState(),o=n.videoParams,a=o.scaleFactor,i=o.frameRate,u=o.imageSelection,l=o.yoyo,f=o.reverse,s=o.frame,p=o.lockFrame,h=o.invertPalette,y=o.palette,d=o.exportFrameMode;Promise.all(u.map((function(t){return n.images.find((function(e){return e.hash===t}))})).filter(Boolean).map((function(t){return Te(Te({},t),{},{frame:s||t.frame,palette:t.hashes?t.palette:y||t.palette})})).map((function(t){return(0,Se.Z)(n)(t).then((function(e){var r=(0,Ee.Z)(n,t),o=!!t.hashes,i=o?new Fe.Z:new je.Z,u=p||t.lockFrame||!1,c=h||t.invertPalette||!1;return o?i.update({tiles:e,palette:r,lockFrame:u}):i.update({tiles:e,palette:r.palette,lockFrame:u,invertPalette:c}),i.getScaledCanvas(a,d)}))}))).then((function(e){var r=[],n=new(ge())(1,1/0),o=new be.g(r,e[0].width,e[0].height,{loop:65535}),u=De(e);if(l){var p=De(e).reverse();p.shift(),p.pop(),u.push.apply(u,De(p))}f&&u.reverse();var h=function(t,e,r,n,o){return function(a,i){return r.add((function(){return new Promise((function(r,u){for(var l=a.getContext("2d").getImageData(0,0,a.width,a.height).data,f=[],s=Ae()(l,4).map((function(t){var e=Le(t,3),r=(e[0]<<16)+(e[1]<<8)+e[2],n=f.findIndex((function(t){return t===r}));return-1===n&&(n=f.length,f.push(r)),n}));f.length<256;)f.push(0);try{t({type:c.DK,payload:(i+1)/o}),window.requestAnimationFrame((function(){e.addFrame(0,0,a.width,a.height,s,{delay:Math.round(100/n),palette:f}),r()}))}catch(t){u(t)}}))}))}}(t.dispatch,o,n,i,u.length);Promise.all(u.map(h)).then((function(){var e,n=(0,Pe.Z)({useCurrentDate:!0,exportScaleFactor:a,frameRate:i,altTitle:"animated",frameName:s,paletteShort:y}),u=o.end();try{e=new File([new Uint8Array(r.slice(0,u)).buffer],"".concat(n,".gif"),{type:"image/gif"})}catch(t){e=new Blob([new Uint8Array(r.slice(0,u)).buffer])}(0,we.saveAs)(e,"".concat(n,".gif")),t.dispatch({type:c.DK,payload:0})}))})).catch((function(e){t.dispatch({type:c.pn,payload:e.message})}))}e(r)}}},Ne=(r(84944),r(33792),r(15306),r(83112),r(39714),r(81477)),Ce=r(20170),Ge=r(49965);function Be(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function Me(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?Be(Object(r),!0).forEach((function(e){Ue(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):Be(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function Ue(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function Ze(t){return Ze="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Ze(t)}var He=["lockFrame","frame","palette","invertPalette","title","tags","created"],$e=function(t){return(0,F.Z)(t.map((function(t){return t.tags})).flat())},Ve=function(t){return function(e){return function(r){if(r.type===c.fd){var n=t.getState(),o=(0,Ne.Z)(n),a=n.lastSelectedImage,i=n.pageSize,u=o.findIndex((function(t){return t.hash===r.payload})),l=o.findIndex((function(t){return t.hash===a}));-1===l&&(l=r.page*i);var f=Math.min(l,u),s=Math.max(l,u);t.dispatch({type:c.y0,payload:o.slice(f,s+1).map((function(t){return t.hash}))})}if(r.type===c.hT){var p=t.getState(),h=(0,Ge.$b)(p),y=p.editImage,d=p.images,m=r.payload,v=m.image,g=m.batch,b=m.tagChanges;if(g&&y.batch&&y.batch.length){var w=y.batch.map((function(t){return d.find((function(e){return e.hash===t}))})).map(Ge.Np).sort(h).map(Ge.fD).map((function(t,e){if(!t)return!1;var r={},n=t.tags;return He.forEach((function(o){switch(o){case"title":if(!g.title)break;r.title=v.title.replace(/%(n+)/gi,(function(t,r){return(e+1).toString(10).padStart(r.length,"0")}));break;case"created":if(!g.created)break;r.created=v.created;break;case"palette":if(!g.palette)break;Ze(t.palette)===Ze(v.palette)&&(r.palette=v.palette);break;case"invertPalette":if(!g.invertPalette)break;r.invertPalette=v.invertPalette;break;case"frame":if(!g.frame)break;r.frame=v.frame;break;case"lockFrame":if(!g.lockFrame)break;r.lockFrame=v.lockFrame;break;case"tags":n=(0,Ce.Z)(Me(Me({},b),{},{initial:t.tags}))}})),Me(Me(Me({},t),r),{},{tags:n})})).filter(Boolean);Object.assign(r,{payload:w})}}if(r.type!==c.ax)e(r);else{var O=t.getState(),A=O.images,S=O.imageSelection,E=O.pageSize,F=A.filter((function(t){var e=t.hash;return S.includes(e)}));if(S.length)switch(r.payload){case"delete":t.dispatch({type:c.jH,payload:{message:"Delete ".concat(S.length," images?"),confirm:function(){t.dispatch({type:c.md,payload:S})},deny:function(){t.dispatch({type:c.Gp})}}});break;case"animate":t.dispatch({type:c.xG,payload:{imageSelection:S}});break;case"download":t.dispatch({type:c.Zo,payload:S});break;case"edit":t.dispatch({type:c.v6,payload:{hash:F[0].hash,tags:$e(F),batch:F.map((function(t){return t.hash}))}})}switch(r.payload){case"checkall":t.dispatch({type:c.y0,payload:(0,Ne.Z)(O).slice(r.page*E,(r.page+1)*E||void 0).map((function(t){return t.hash}))});break;case"uncheckall":t.dispatch({type:c.y0,payload:[]})}}}}},Ye=r(30661),Je=r(59833),ze=function(t){Je.$0.keys().then((function(e){e.forEach((function(e){!function(t,e){(function(t,e){return!!e.find((function(e){return e.hash===t}))})(e,t)||(0,Ye.jW)(e)}(t,e)}))}))},We=function(t){return function(e){return function(r){if(e(r),r.type===c.BS)ze(t.getState().frames)}}},Xe=function(t){Je.Rt.keys().then((function(e){e.forEach((function(e){!function(t,e){(function(t,e){return!!e.find((function(e){var r=e.hashes;return!!r&&[r.r,r.g,r.b,r.n].includes(t)}))})(e,t)||function(t,e){return!!e.find((function(e){return e.hash===t}))}(e,t)||(0,Ye.IV)(e)}(t,e)}))}))},qe=function(t){return function(e){return function(r){switch(e(r),r.type){case c.S1:case c.md:Xe(t.getState().images)}}}},Ke=function(t){var e,n=t.getState().dropboxStorage;return n.use&&Promise.all([r.e(986),r.e(991)]).then(r.bind(r,41238)).then((function(r){var n=r.default;e=n(t)})),function(o){return function(a){o(a),t.getState().dropboxStorage.use&&(a.type===c.eh||a.type===c.wb||a.type===c.eP&&("dropbox"===a.payload.storageType||"dropboximages"===a.payload.storageType)||n.use&&a.type===c.UF)&&(e?e(a):Promise.all([r.e(986),r.e(991)]).then(r.bind(r,41238)).then((function(r){var n=r.default;(e=e||n(t))(a)})))}}},Qe=(r(32564),r(23157),r(82772),r(27852),r(69600),function(t){return function(e,r){var n=[],o=[];try{for(var a=8;a<e.length;a+=1){var i=e[a];o.push(i.toString(16).padStart(2,"0")),16===o.length&&(n.push(o.join(" ")),o=[])}if(o.length){for(;o.length<16;)o.push("00");n.push(o.join(" "))}}catch(e){return t({type:c.pn,payload:"ERROR_IN_LOADED_BIN\n".concat(r)}),Promise.resolve([])}return Promise.resolve(n)}}),tr=(r(73210),r(2738)),er=function(t,e,r){var n,o=function(t){return r.find((function(e){return e.id===t}))},a=(t+1).toString(10).padStart(2,"0"),i=o("".concat(e).concat(a));if(null!=i&&i.hash)return i.hash;if("jp"===e){var u=o("int".concat(a));if(null!=u&&u.hash)return u.hash}var c=o("".concat(e,"01"));if(null!=c&&c.hash)return c.hash;if("jp"!==e){var l=o("int".concat(a));if(null!=l&&l.hash)return l.hash}return(null===(n=o("int01"))||void 0===n?void 0:n.hash)||null},rr=r(88791);function nr(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function or(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function ar(t){return function(t){if(Array.isArray(t))return ir(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||function(t,e){if(!t)return;if("string"==typeof t)return ir(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);"Object"===r&&t.constructor&&(r=t.constructor.name);if("Map"===r||"Set"===r)return Array.from(t);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return ir(t,e)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ir(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}var ur="FF FF FF FF FF FF FF FF FF FF FF FF FF FF FF FF",cr=yt("albumIndex"),lr=function(t){return function(e,r){var n=t.getState(),o=n.savFrameTypes,a=n.frames,i=n.importLastSeen,u=n.importDeleted,l=[],f=(0,rr.Z)(a).map((function(t){var e=t.id;return{value:e,name:t.name,selected:o===e}}));f.unshift({value:"",name:"None (Black frame)"});var s=function(t){for(var n=function(r){if(i&&0===r||r>=8192){var n=e[r+4016];if(e.length>r){var o=function(t,e){var r=[],n="",o=!1;r.push.apply(r,ar(ar(Array(40)).map((function(){return ur}))));for(var a=0;a<3584;a+=1)a%256==0&&r.push.apply(r,ar(ar(Array(2)).map((function(){return ur})))),n+=" ".concat(t[e+a].toString(16).padStart(2,"0")),a%16==15&&(r.push(n.trim()),o||"00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00"===n.trim()||(o=!0),n=""),a%256==255&&r.push.apply(r,ar(ar(Array(2)).map((function(){return ur}))));return r.push.apply(r,ar(ar(Array(40)).map((function(){return ur})))),o?r:null}(e,r);o&&l.push((0,tr.Z)(o,er(n,t,a)).then((function(t){return function(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?nr(Object(r),!0).forEach((function(e){or(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):nr(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}({lines:t},function(t){var r=t/4096-2;return{cartIndex:r,albumIndex:r>=0?e[4530+r]:64,baseAddress:t}}(r))})))}}},o=0;o<131072;o+=4096)n(o);return Promise.all(l).then(cr).then((function(t){var e=0;return t.map((function(t){var n,o=t.albumIndex,a=t.lines;switch(o){case 64:n="[last seen]";break;case 255:n="[deleted]";break;default:n=(e+=1).toString(10).padStart(2,"0")}return{lines:a,file:"".concat(r," ").concat(n),deleted:255===o}})).filter((function(t){var e=t.deleted;return u||!e}))}))};return f.length<2?s(o):new Promise((function(e){t.dispatch({type:c.jH,payload:{message:"Importing '".concat(r,"'"),questions:function(){return[{label:"Select frame group to use with this import",key:"selectedFrameset",type:"select",options:f}]},confirm:function(r){var n=r.selectedFrameset;t.dispatch({type:c.Gp}),e(s(n))},deny:function(){t.dispatch({type:c.Gp}),e([])}}})}))}},fr=(r(91058),r(2737)),sr=function(t){var e=t.split("\n").map((function(t){return t.trim()})).filter((function(t){return t.length&&0!==t.indexOf("//")&&0!==t.indexOf("/*")})).map((function(t){return t.split(" ")})).flat().map((function(t){return parseInt(t,16)}));return(0,fr.parsePackets)(e).then(fr.getImageDataStream).then(fr.decompressDataStream).then(fr.decodePrintCommands).then(fr.harmonizePalettes).then(fr.transformToClassic)},pr=function(t){return(0,fr.parseReducedPackets)(t).then(fr.inflateTransferPackages).then(fr.getImageDataStream).then(fr.decompressDataStream).then(fr.decodePrintCommands).then(fr.harmonizePalettes).then(fr.transformToClassic).then(fr.completeFrame)},hr=(r(85827),r(75500)),yr=r(36965),dr=r(15177),mr=function(t){var e=t.lines,r=t.filename,n=t.palette;return(0,Ye.a1)(e).then((function(t){return{hash:t,created:Et()().format(dr.vc),title:r||"",lines:e.length,tags:[],palette:n}}))},vr=(r(4723),function(t){var e=t.frameSetNew,r=t.frameSet,n=t.frameIndex,o=void 0===n?"":n,a="".concat(e||r).concat(o.padStart(2,"0"));return a.match(/^[a-z]+\d{2}$/g)?a:""}),gr=function(t){var e=t.frameIds,r=t.frameGroups,n=t.fileName,o=t.scaleFactor,a=void 0===o?1:o;return function(t){var o,i=t.frameSet,u=void 0===i?"":i,c=t.frameSetNew,l=void 0===c?"":c,f=t.frameIndex,s=void 0===f?"":f,p=t.frameName,h=void 0===p?"":p,y=vr({frameSet:u,frameSetNew:l,frameIndex:s}),d=e.includes(y),m=1!==l.length&&l===l.toLocaleLowerCase(),v=!(y&&h||!y&&!h)||!m;return[(o=a)&&!(o&o-1)&&Math.floor(a)===a?null:{label:"The scale factor of your image is ".concat(a.toPrecision(3),". To get a clean result without artifacts, use images with factors being powers of two. (1, 2, 4, 8 ...)"),key:"badScaleFactor",type:"info",themes:["warning"]},m?null:{label:"The ID of a frameset may only contain lowercase letters and must have at least a length of 2",key:"badNewFrameSet",type:"info",themes:["error"]},{label:"Add as frame to existing frameset",key:"frameSet",type:"select",options:r,disabled:!!l},{label:"Create new frameset with ID (min. 2 chars)",key:"frameSetNew",type:"text",disabled:!!u},{label:d?"Frame index - frame ".concat(y," will be replaced"):"Frame index (must be > 0)",key:"frameIndex",type:"number",min:1,max:99,disabled:!(u||l.length>1)},{label:"Name of frame",key:"frameName",type:"text",disabled:!(u||l.length>1)},{label:y&&h?'"'.concat(n,'" will be imported as frame "').concat(y,'" - "').concat(h,'"'):'"'.concat(n,'" will be imported as an image'),key:"info",type:"info",themes:y&&h?["info"]:["warning"]},{type:"confirmForm",notComplete:v}].filter(Boolean)}},br=function(t){for(;t.length<360;)t.push(t[0]),t.unshift(t[0]);return t};function wr(t){return function(t){if(Array.isArray(t))return Sr(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||Ar(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Or(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null==r)return;var n,o,a=[],i=!0,u=!1;try{for(r=r.call(t);!(i=(n=r.next()).done)&&(a.push(n.value),!e||a.length!==e);i=!0);}catch(t){u=!0,o=t}finally{try{i||null==r.return||r.return()}finally{if(u)throw o}}return a}(t,e)||Ar(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Ar(t,e){if(t){if("string"==typeof t)return Sr(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?Sr(t,e):void 0}}function Sr(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}var Er=yt("count","desc"),Fr=yt("threshold"),jr=function(t){var e=t.data,r=Ae()(e,4).map((function(t){var e=Or(t,4),r=e[0],n=e[3];return Math.floor(r*(n/255))})),n=r.reduce((function(t,e){return t<e?t:e}),255),o=r.reduce((function(t,e){return t>e?t:e}),0),a=wr(new Array(7)).map((function(t,e){return{threshold:Math.ceil((o-n)/(7/(e+1)))+n,count:0}}));return r.forEach((function(t){for(var e=0;e<7;e+=1){var r;t>((null==a||null===(r=a[e-1])||void 0===r?void 0:r.threshold)||-1)&&t<=a[e].threshold&&(a[e].count+=1)}})),Fr(Er(a).slice(0,4)).slice(0,3).map((function(t){return t.threshold}))},Pr=function(t){var e=function(t){return function(e){var r=Or(e,4),n=r[0],o=r[3],a=Math.floor(n*(o/255));return a<t[0]?257:a<t[1]?1:a<t[2]?256:0}}(t);return function(t){for(var r=t.data,n=[],o=0;o<8;o+=1){for(var a=0,i=0;i<8;i+=1){a+=e(r.slice(4*(8*o+i)))<<7-i}n.push((a>>8).toString(16).padStart(2,"0"),(255&a).toString(16).padStart(2,"0"))}return n.join(" ").toUpperCase()}},Dr=function(t){return function(e){var r=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=t.dispatch,o=document.createElement("img"),a=document.createElement("canvas"),i=a.getContext("2d"),u=[];o.onload=function(){i.filter="grayscale(1)",i.imageSmoothingEnabled=!1,a.width=160;var l=o.naturalHeight/o.naturalWidth,f=0;.875===l?(a.height=144,f=o.naturalWidth/128):(a.height=a.width*o.naturalHeight/o.naturalWidth,f=o.naturalWidth/160),.875===l?i.drawImage(o,0,0,o.naturalWidth,o.naturalHeight,16,16,a.width-32,a.height-32):i.drawImage(o,0,0,o.naturalWidth,o.naturalHeight,0,0,a.width,a.height);for(var s=jr(i.getImageData(0,0,a.width,a.height)),p=Pr(s),h=0;h<a.height;h+=8)for(var y=0;y<a.width;y+=8)u.push(p(i.getImageData(y,h,8,8)));var d=function(){var r,o=t.getState().importPad;mr({lines:o?br(u):u,filename:(null===(r=e.name)||void 0===r?void 0:r.split(".").shift())||"",palette:t.getState().activePalette}).then((function(t){n({type:c.Dt,payload:[t]})}))};if(r)d();else{var m=t.getState().frames,v=(0,rr.Z)(m).filter((function(t){var e=t.id;return!["int","jp","hk"].includes(e)})).map((function(t){return{value:t.id,name:t.name}}));v.unshift({value:"",name:"Select",selected:!0});var g=m.map((function(t){return t.id}));t.dispatch({type:c.jH,payload:{message:'Choose how you want to import "'.concat(e.name,'".'),questions:gr({frameIds:g,frameGroups:v,fileName:e.name,scaleFactor:f}),confirm:function(t){var e=t.frameSet,r=t.frameSetNew,o=t.frameIndex,a=t.frameName,i=vr({frameSet:e,frameSetNew:r,frameIndex:o});i&&a?(0,hr.e)(u).then((function(t){n({type:c.GU,payload:{id:i,name:a,hash:t}})})):d()},deny:function(){n({type:c.Gp})}}})}},(0,yr.Z)(e,"dataURL").then((function(t){o.src=t}))}},Ir="NEW_LINES",Tr="IMAGE_COMPLETE",_r=function(t){if("#"===t.charAt(0)||"/"===t.charAt(0))return null;if("!"===t.charAt(0)||"{"===t.charAt(0)){try{var e=JSON.parse(t.slice(t.indexOf("{")).trim()),r=e.command,n=e.margin_lower;if("PRNT"===r&&n>0)return{type:Tr}}catch(t){return{type:"PARSE_ERROR",payload:"Error while trying to parse JSON data command block"}}return null}var o=t.replace(/[^0-9A-F]/gi,"");return o.length?{type:Ir,payload:[o]}:null},Lr=r(25108);function xr(t){return function(t){if(Array.isArray(t))return kr(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||function(t,e){if(!t)return;if("string"==typeof t)return kr(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);"Object"===r&&t.constructor&&(r=t.constructor.name);if("Map"===r||"Set"===r)return Array.from(t);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return kr(t,e)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function kr(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}var Rr=function(t,e){var r=[],n="".concat(t,"\n").concat(dr.oU).split("\n").map(_r).filter(Boolean).map((function(t){var e;switch(t.type){case Ir:return(e=r).push.apply(e,xr(t.payload)),null;case Tr:var n=r.filter(Boolean);return r=[],!!n.length&&n;default:return null}})).filter(Boolean);return n.length||Lr.warn("File ".concat(e," did not contain images")),Promise.resolve(n)},Nr=r(25108),Cr=function(t){return 71===t[0]&&66===t[1]&&45===t[2]&&66===t[3]&&73===t[4]&&78===t[5]&&48===t[6]&&49===t[7]},Gr=function(t){var e=t.dispatch,r=lr(t),n=Qe(e),o=Dr(t),a=function(t){Nr.error(t),e({type:c.pn,payload:"FILE_NOT_READ"})};return function(i){var u=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{fromPrinter:!1},l=u.fromPrinter,f=i.map((function(t){var i,u=t,f=t.type,s=!0;return t.blob&&(u=t.blob,f=t.contentType,t.meta,s=void 0!==t.ok?t.ok:s),s&&u.size?f&&f.startsWith("image/")?(o(u,l),Promise.resolve([])):u.size>268435455?(e({type:c.pn,payload:"FILE_TOO_LARGE"}),Promise.resolve([])):"application/json"===f?((0,yr.Z)(u,"text").catch(a).then((function(t){var r={};try{r=JSON.parse(t)}catch(t){}r&&r.state?e({type:c.uH,payload:r}):e({type:c.pn,payload:"NOT_A_SETTINGS_FILE"})})),Promise.resolve([])):"text/plain"===f?(0,yr.Z)(u,"text").catch(a).then((function(t){if(-1===t.indexOf('{"command"'))try{return sr(t,u.name)}catch(t){return e({type:c.pn,payload:"NOT_A_DUMP"}),[]}return Rr(t,u.name)})).then((function(t){return t.map((function(t){return{lines:t,filename:u.name}}))})):null===(i=u.name)||void 0===i||!i.toLowerCase().endsWith(".sav")||u.size%4096!=0&&3584!==u.size?"application/pico-printer-binary-log"===f?(0,yr.Z)(u,"arrayBuffer").catch(a).then((function(t){return pr(t).then((function(t){return t.map((function(t){return{lines:t,filename:u.name}}))}))})):!f||f.startsWith("application/")?(0,yr.Z)(u,"arrayBuffer").catch(a).then((function(t){return Cr(t)?n(t,u.name).then((function(t){return{lines:t,filename:u.name}})):[]})):(e({type:c.pn,payload:"NOT_A_DUMP"}),Promise.resolve([])):(0,yr.Z)(u,"arrayBuffer").catch(a).then((function(t){return r(t,u.name)})):(Nr.error("Error in received data",t),Promise.resolve([]))}));Promise.all(f).then((function(r){var n=r.flat().filter(Boolean);n.length?e({type:c.PR,payload:n}):t.dispatch({type:c.Gp})}))}};function Br(t){return function(t){if(Array.isArray(t))return Mr(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||function(t,e){if(!t)return;if("string"==typeof t)return Mr(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);"Object"===r&&t.constructor&&(r=t.constructor.name);if("Map"===r||"Set"===r)return Array.from(t);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Mr(t,e)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Mr(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}var Ur=function(t){var e,r=document.querySelector("#app"),n=Gr(t),o=!1;return r.addEventListener("dragover",(function(r){r.preventDefault(),o||t.dispatch({type:c.xo}),window.clearTimeout(e),o=!0,e=window.setTimeout((function(){o=!1,t.dispatch({type:c.es})}),250)})),r.addEventListener("drop",(function(t){var e;t.preventDefault(),e=t.dataTransfer.items?Br(t.dataTransfer.items).filter((function(t){return"file"===t.kind})).map((function(t){return t.getAsFile()})):Br(t.dataTransfer.files),n(e)})),function(t){return function(e){t(e)}}},Zr=function(t){var e=null;return function(n){return function(o){n(o);var a=t.getState().gitStorage,i=a.use,u=a.owner,l=a.repo,f=a.branch,s=a.token;i&&u&&l&&f&&s&&(o.type===c.Ik||o.type===c.eP&&"git"===o.payload.storageType)&&(e?e(o):Promise.all([r.e(555),r.e(340)]).then(r.bind(r,59206)).then((function(r){var n=r.init,a=r.middleware;n(t),(e=a(t))(o)})))}}},Hr=function(){return function(t){return function(e){e.type===c.pn&&alert(e.payload),t(e)}}};function $r(t){return function(t){if(Array.isArray(t))return Vr(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||function(t,e){if(!t)return;if("string"==typeof t)return Vr(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);"Object"===r&&t.constructor&&(r=t.constructor.name);if("Map"===r||"Set"===r)return Array.from(t);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Vr(t,e)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Vr(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}var Yr=function(t){var e=Gr(t);return function(t){return function(r){r.type!==c.uD?t(r):r.payload.files&&r.payload.files.length&&e($r(r.payload.files),{fromPrinter:r.payload.fromPrinter||!1})}}};r(60285),r(41637);function Jr(t){return function(t){if(Array.isArray(t))return zr(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||function(t,e){if(!t)return;if("string"==typeof t)return zr(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);"Object"===r&&t.constructor&&(r=t.constructor.name);if("Map"===r||"Set"===r)return Array.from(t);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return zr(t,e)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function zr(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}var Wr=function(t){var e=null,n=null;return window.addEventListener("message",(function(r){var o,a=t.getState().printerUrl;try{o=new URL(a).origin}catch(t){o=new URL(window.location.href).origin}if(r.origin===o){var i=r.data.fromRemotePrinter,u=(i=void 0===i?{}:i).lines,l=i.progress,f=i.blob,s=i.blobsdone,p=i.commands,h=i.printerData,y=r.source;if(p&&(e&&JSON.stringify(p)===JSON.stringify(t.getState().printerFunctions)||t.dispatch({type:c.or,payload:p}),n=y,window.clearTimeout(e),e=window.setTimeout((function(){e=null,n=null,t.dispatch({type:c.od})}),1500)),u){var d;try{d=new File(Jr(u.join("\n")),"Text input.txt",{type:"text/plain"})}catch(t){d=new Blob(Jr(u.join("\n")),{type:"text/plain"})}t.dispatch({type:c.uD,payload:{files:[d]}})}if(void 0!==l&&t.dispatch({type:c.pQ,payload:l}),f&&t.dispatch({type:c.uD,payload:{files:[f]}}),s){if("string"==typeof s[0])return void window.setTimeout((function(){alert("You should update the web-app to a version > 1.16.0 on your printer for an optimized import experience :-)")}),200);var m=s.filter((function(t){return t.blob&&t.ok}));m.length?t.dispatch({type:c.uD,payload:{files:m,fromPrinter:!0}}):t.dispatch({type:c.jH,payload:{message:"No valid files received from WiFi-Printer",confirm:function(){t.dispatch({type:c.Gp}),t.dispatch({type:c.Jx})}}})}h&&t.dispatch({type:c.fX,payload:h})}})),function(e){return function(o){if(o.type===c.ug){var a,i=t.getState(),u="fetchImages"===o.payload?{dumps:null===(a=i.printerData)||void 0===a?void 0:a.dumps}:void 0;r.e(705).then(r.t.bind(r,40705,23)).then((function(){r.e(591).then(r.t.bind(r,99591,23)).then((function(){n.postMessage({toRemotePrinter:{command:o.payload,params:u}},"*")}))}))}e(o)}}},Xr=function(t){var e=(0,N.Z)("hash"),r=new(ge())(1,1/0);return function(n){return function(o){if(o.type===c.PR)return a=o.payload,i=t.getState().importPad,void Promise.all(a.map((function(e){return r.add((function(){return mr({lines:i?br(e.lines):e.lines,filename:e.file,palette:t.getState().activePalette,dispatch:t.dispatch})}))}))).then((function(r){var n=e(r),o=n.length===r.length?"":" (".concat(r.length-n.length," duplicates found in import)");t.dispatch({type:c.jH,payload:{message:"Import ".concat(n.length," images?").concat(o),confirm:function(){t.dispatch({type:c.Dt,payload:n})},deny:function(){t.dispatch({type:c.Gp})}}})}));var a,i;n(o)}}},qr=r(10577),Kr=r.n(qr),Qr=function(t){return window.addEventListener("resize",(function(){t.dispatch({type:c.rU,payload:{height:window.innerHeight,width:window.innerWidth}})})),Kr().isEnabled&&Kr().on("change",(function(){t.dispatch({type:c.Yx,payload:!!Kr().element})})),document.addEventListener("keydown",(function(e){if(null!==t.getState().lightboxImage)switch(e.key){case"Esc":case"Escape":t.dispatch({type:c.vR,payload:null}),e.preventDefault();break;case"Right":case"ArrowRight":t.dispatch({type:c.BH}),e.preventDefault();break;case"Left":case"ArrowLeft":t.dispatch({type:c.$$}),e.preventDefault()}})),function(e){return function(r){var n=t.getState();switch(r.type){case c.BH:if(null===n.lightboxImage)return;return void t.dispatch({type:c.vR,payload:Math.min(n.lightboxImage+1,n.images.length-1)});case c.$$:if(null===n.lightboxImage)return;return void t.dispatch({type:c.vR,payload:Math.max(n.lightboxImage-1,0)});case c.CQ:Kr().isEnabled&&(Kr().element?Kr().exit():Kr().request(document.querySelector("body")));break;case c.vR:Kr().isEnabled&&!r.payload&&Kr().element&&Kr().exit();break;case c.Tq:t.dispatch({type:c.vR,payload:(0,Ne.Z)(n).findIndex((function(t){return t.hash===r.payload}))})}e(r)}}},tn=r(44936),en=r.n(tn),rn=r(25108),nn=function(t){var e={},r=new(en())(1,1/0),n=function(e){t.dispatch({type:c.fc,payload:e%1})},o=function(e){var r=t.getState(),n=r.handleExportFrame,o=r.images.find((function(t){return t.hash===e})),a=(0,Ee.Z)(r,o),i=function(){return(0,Se.Z)(r)(o)};o.isRGBN=!!o.hashes;return{getMeta:function(){return Promise.resolve(o)},getPalette:function(){return Promise.resolve(a)},getTiles:i,getCanvas:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.scaleFactor,r=void 0===e?1:e,u=t.palette,c=void 0===u?a:u,l=t.lockFrame,f=void 0===l?o.lockFrame||!1:l,s=t.invertPalette,p=void 0===s?o.invertPalette||!1:s,h=t.handleExportFrame,y=void 0===h?n:h;return i().then((function(t){var e=o.isRGBN?new Fe.Z:new je.Z;return o.isRGBN?e.update({tiles:Fe.Z.rgbnTiles(t),palette:c,lockFrame:f}):e.update({tiles:t,palette:c.palette,lockFrame:f,invertPalette:p}),e.getScaledCanvas(r,y)}))}}},a=function(a){var i=t.getState().plugins.find((function(t){var e=t.url;return a.url===e}))||{},u=i.config,l=void 0===u?{}:u,f=a.url;return r.add((function(){return new Promise((function(r){window.gbpwRegisterPlugin=function(a){window.gbpwRegisterPlugin=function(){};try{var i=new a({saveAs:we.saveAs,progress:n,store:t,collectImageData:o},l),u=i.name,s=i.description,p=void 0===s?"":s,h=i.configParams,y=void 0===h?{}:h,d=i.config,m=void 0===d?{}:d;e[f]=i,t.dispatch({type:c.rc,payload:{url:f,name:u,description:p,configParams:y,config:m,loading:!1,error:!1}}),r(!0)}catch(e){t.dispatch({type:c.rc,payload:{url:f,loading:!1,error:e.message}}),r(!1)}};var a=document.createElement("script");document.head.appendChild(a),a.addEventListener("error",(function(){window.gbpwRegisterPlugin=function(){},t.dispatch({type:c.rc,payload:{url:f,loading:!1,error:"Loading error"}}),r(!1)})),a.src=f}))}))};return window.requestAnimationFrame((function(){var e=t.getState().plugins;Promise.all(e.map(a)).then((function(t){rn.log("".concat(t.filter(Boolean).length," plugins initialized"))})).catch((function(t){rn.error(t)}))})),function(r){return function(n){switch(n.type){case c.Ib:var i=n.payload,u=i.url,l=i.hash;e[u].withImage(o(l));break;case c.ui:var f=n.payload.url,s=t.getState().imageSelection;e[f].withSelection(s.map(o));break;case c.PA:var p=n.payload,h=p.url,y=p.config;e[h].setConfig(y);break;case c.gk:a({url:n.payload});break;case c.gH:delete e[n.payload]}r(n)}}};function on(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function an(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?on(Object(r),!0).forEach((function(e){un(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):on(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function un(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}var cn=function(t){return["#",Math.ceil(Math.random()*t).toString(16).padStart(2,"0"),Math.ceil(Math.random()*t).toString(16).padStart(2,"0"),Math.ceil(Math.random()*t).toString(16).padStart(2,"0")].join("")},ln=function(t,e,r,n){var o=r===L.VP?{name:"",shortName:L.VP,palette:[cn(255),cn(170),cn(102),cn(34)],origin:"Selfmade"}:e.find((function(t){return t.shortName===r}));t({type:c.iF,payload:an(an({},o),{},{name:n?"Copy of ".concat(o.name):o.name,shortName:n?L.VP:r})})},fn=function(t){return document.addEventListener("keydown",(function(e){if("Enter"===e.key&&e.ctrlKey&&t.getState().editPalette.hash){var r=t.getState();t.dispatch({type:c.GY}),r.editPalette&&e.preventDefault()}})),function(e){return function(r){switch(r.type){case c.GY:return n=t.dispatch,o=t.getState(),void n({type:c.$e,payload:an(an({},o.editPalette),{},{tags:(0,Ce.Z)(o.editPalette.tags)})});case c.Tc:return void ln(t.dispatch,t.getState().palettes,r.payload,!1);case c.y3:return void ln(t.dispatch,t.getState().palettes,r.payload,!0)}var n,o;e(r)}}};function sn(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function pn(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?sn(Object(r),!0).forEach((function(e){hn(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):sn(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function hn(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}var yn=function(t){return function(e){return function(n){if(n.type===c.Fy){var o=t.getState();r.e(705).then(r.t.bind(r,40705,23)).then((function(e){var r=e.default,n={palette:dr.q1,hashes:pn({},o.rgbnImages),hash:r(o.rgbnImages),created:Et()().format(dr.vc),title:"",tags:[]};t.dispatch({type:c.Dt,payload:[n]})}))}e(n)}}},dn=r(98642),mn=(r(72443),r(39341),r(73706),r(10408),r(78011),r(30489),r(68304),r(28443)),vn=r.n(mn),gn=r(24022);function bn(t){return bn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},bn(t)}function wn(){wn=function(){return t};var t={},e=Object.prototype,r=e.hasOwnProperty,n="function"==typeof Symbol?Symbol:{},o=n.iterator||"@@iterator",a=n.asyncIterator||"@@asyncIterator",i=n.toStringTag||"@@toStringTag";function u(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{u({},"")}catch(t){u=function(t,e,r){return t[e]=r}}function c(t,e,r,n){var o=e&&e.prototype instanceof s?e:s,a=Object.create(o.prototype),i=new S(n||[]);return a._invoke=function(t,e,r){var n="suspendedStart";return function(o,a){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===o)throw a;return F()}for(r.method=o,r.arg=a;;){var i=r.delegate;if(i){var u=w(i,r);if(u){if(u===f)continue;return u}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var c=l(t,e,r);if("normal"===c.type){if(n=r.done?"completed":"suspendedYield",c.arg===f)continue;return{value:c.arg,done:r.done}}"throw"===c.type&&(n="completed",r.method="throw",r.arg=c.arg)}}}(t,r,i),a}function l(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}t.wrap=c;var f={};function s(){}function p(){}function h(){}var y={};u(y,o,(function(){return this}));var d=Object.getPrototypeOf,m=d&&d(d(E([])));m&&m!==e&&r.call(m,o)&&(y=m);var v=h.prototype=s.prototype=Object.create(y);function g(t){["next","throw","return"].forEach((function(e){u(t,e,(function(t){return this._invoke(e,t)}))}))}function b(t,e){function n(o,a,i,u){var c=l(t[o],t,a);if("throw"!==c.type){var f=c.arg,s=f.value;return s&&"object"==bn(s)&&r.call(s,"__await")?e.resolve(s.__await).then((function(t){n("next",t,i,u)}),(function(t){n("throw",t,i,u)})):e.resolve(s).then((function(t){f.value=t,i(f)}),(function(t){return n("throw",t,i,u)}))}u(c.arg)}var o;this._invoke=function(t,r){function a(){return new e((function(e,o){n(t,r,e,o)}))}return o=o?o.then(a,a):a()}}function w(t,e){var r=t.iterator[e.method];if(void 0===r){if(e.delegate=null,"throw"===e.method){if(t.iterator.return&&(e.method="return",e.arg=void 0,w(t,e),"throw"===e.method))return f;e.method="throw",e.arg=new TypeError("The iterator does not provide a 'throw' method")}return f}var n=l(r,t.iterator,e.arg);if("throw"===n.type)return e.method="throw",e.arg=n.arg,e.delegate=null,f;var o=n.arg;return o?o.done?(e[t.resultName]=o.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=void 0),e.delegate=null,f):o:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,f)}function O(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function A(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function S(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(O,this),this.reset(!0)}function E(t){if(t){var e=t[o];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var n=-1,a=function e(){for(;++n<t.length;)if(r.call(t,n))return e.value=t[n],e.done=!1,e;return e.value=void 0,e.done=!0,e};return a.next=a}}return{next:F}}function F(){return{value:void 0,done:!0}}return p.prototype=h,u(v,"constructor",h),u(h,"constructor",p),p.displayName=u(h,i,"GeneratorFunction"),t.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===p||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,h):(t.__proto__=h,u(t,i,"GeneratorFunction")),t.prototype=Object.create(v),t},t.awrap=function(t){return{__await:t}},g(b.prototype),u(b.prototype,a,(function(){return this})),t.AsyncIterator=b,t.async=function(e,r,n,o,a){void 0===a&&(a=Promise);var i=new b(c(e,r,n,o),a);return t.isGeneratorFunction(r)?i:i.next().then((function(t){return t.done?t.value:i.next()}))},g(v),u(v,i,"Generator"),u(v,o,(function(){return this})),u(v,"toString",(function(){return"[object Generator]"})),t.keys=function(t){var e=[];for(var r in t)e.push(r);return e.reverse(),function r(){for(;e.length;){var n=e.pop();if(n in t)return r.value=n,r.done=!1,r}return r.done=!0,r}},t.values=E,S.prototype={constructor:S,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(A),!t)for(var e in this)"t"===e.charAt(0)&&r.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function n(r,n){return i.type="throw",i.arg=t,e.next=r,n&&(e.method="next",e.arg=void 0),!!n}for(var o=this.tryEntries.length-1;o>=0;--o){var a=this.tryEntries[o],i=a.completion;if("root"===a.tryLoc)return n("end");if(a.tryLoc<=this.prev){var u=r.call(a,"catchLoc"),c=r.call(a,"finallyLoc");if(u&&c){if(this.prev<a.catchLoc)return n(a.catchLoc,!0);if(this.prev<a.finallyLoc)return n(a.finallyLoc)}else if(u){if(this.prev<a.catchLoc)return n(a.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return n(a.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var a=o;break}}a&&("break"===t||"continue"===t)&&a.tryLoc<=e&&e<=a.finallyLoc&&(a=null);var i=a?a.completion:{};return i.type=t,i.arg=e,a?(this.method="next",this.next=a.finallyLoc,f):this.complete(i)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),f},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),A(r),f}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;A(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,r){return this.delegate={iterator:E(t),resultName:e,nextLoc:r},"next"===this.method&&(this.arg=void 0),f}},t}function On(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function An(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?On(Object(r),!0).forEach((function(e){Sn(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):On(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function Sn(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function En(t,e,r,n,o,a,i){try{var u=t[a](i),c=u.value}catch(t){return void r(t)}u.done?e(c):Promise.resolve(c).then(n,o)}var Fn=function(){var t,e=(t=wn().mark((function t(e){return wn().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(Boolean(e.find((function(t){return!t.hash})))){t.next=3;break}return t.abrupt("return",e);case 3:return t.abrupt("return",r.e(705).then(r.t.bind(r,40705,23)).then((function(t){var r=t.default;return Promise.all(e.map((function(t){return t.hash?t:Je.$0.getItem(t.id).then((function(e){var n=r(e);return Je.$0.removeItem(t.id).then((function(){return Je.$0.setItem(n,e)})).then((function(){return An(An({},t),{},{hash:n})}))}))})))})));case 4:case"end":return t.stop()}}),t)})),function(){var e=this,r=arguments;return new Promise((function(n,o){var a=t.apply(e,r);function i(t){En(a,n,o,i,u,"next",t)}function u(t){En(a,n,o,i,u,"throw",t)}i(void 0)}))});return function(t){return e.apply(this,arguments)}}(),jn=Fn,Pn=r(25108);function Dn(t){return Dn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Dn(t)}function In(){In=function(){return t};var t={},e=Object.prototype,r=e.hasOwnProperty,n="function"==typeof Symbol?Symbol:{},o=n.iterator||"@@iterator",a=n.asyncIterator||"@@asyncIterator",i=n.toStringTag||"@@toStringTag";function u(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{u({},"")}catch(t){u=function(t,e,r){return t[e]=r}}function c(t,e,r,n){var o=e&&e.prototype instanceof s?e:s,a=Object.create(o.prototype),i=new S(n||[]);return a._invoke=function(t,e,r){var n="suspendedStart";return function(o,a){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===o)throw a;return F()}for(r.method=o,r.arg=a;;){var i=r.delegate;if(i){var u=w(i,r);if(u){if(u===f)continue;return u}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var c=l(t,e,r);if("normal"===c.type){if(n=r.done?"completed":"suspendedYield",c.arg===f)continue;return{value:c.arg,done:r.done}}"throw"===c.type&&(n="completed",r.method="throw",r.arg=c.arg)}}}(t,r,i),a}function l(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}t.wrap=c;var f={};function s(){}function p(){}function h(){}var y={};u(y,o,(function(){return this}));var d=Object.getPrototypeOf,m=d&&d(d(E([])));m&&m!==e&&r.call(m,o)&&(y=m);var v=h.prototype=s.prototype=Object.create(y);function g(t){["next","throw","return"].forEach((function(e){u(t,e,(function(t){return this._invoke(e,t)}))}))}function b(t,e){function n(o,a,i,u){var c=l(t[o],t,a);if("throw"!==c.type){var f=c.arg,s=f.value;return s&&"object"==Dn(s)&&r.call(s,"__await")?e.resolve(s.__await).then((function(t){n("next",t,i,u)}),(function(t){n("throw",t,i,u)})):e.resolve(s).then((function(t){f.value=t,i(f)}),(function(t){return n("throw",t,i,u)}))}u(c.arg)}var o;this._invoke=function(t,r){function a(){return new e((function(e,o){n(t,r,e,o)}))}return o=o?o.then(a,a):a()}}function w(t,e){var r=t.iterator[e.method];if(void 0===r){if(e.delegate=null,"throw"===e.method){if(t.iterator.return&&(e.method="return",e.arg=void 0,w(t,e),"throw"===e.method))return f;e.method="throw",e.arg=new TypeError("The iterator does not provide a 'throw' method")}return f}var n=l(r,t.iterator,e.arg);if("throw"===n.type)return e.method="throw",e.arg=n.arg,e.delegate=null,f;var o=n.arg;return o?o.done?(e[t.resultName]=o.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=void 0),e.delegate=null,f):o:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,f)}function O(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function A(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function S(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(O,this),this.reset(!0)}function E(t){if(t){var e=t[o];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var n=-1,a=function e(){for(;++n<t.length;)if(r.call(t,n))return e.value=t[n],e.done=!1,e;return e.value=void 0,e.done=!0,e};return a.next=a}}return{next:F}}function F(){return{value:void 0,done:!0}}return p.prototype=h,u(v,"constructor",h),u(h,"constructor",p),p.displayName=u(h,i,"GeneratorFunction"),t.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===p||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,h):(t.__proto__=h,u(t,i,"GeneratorFunction")),t.prototype=Object.create(v),t},t.awrap=function(t){return{__await:t}},g(b.prototype),u(b.prototype,a,(function(){return this})),t.AsyncIterator=b,t.async=function(e,r,n,o,a){void 0===a&&(a=Promise);var i=new b(c(e,r,n,o),a);return t.isGeneratorFunction(r)?i:i.next().then((function(t){return t.done?t.value:i.next()}))},g(v),u(v,i,"Generator"),u(v,o,(function(){return this})),u(v,"toString",(function(){return"[object Generator]"})),t.keys=function(t){var e=[];for(var r in t)e.push(r);return e.reverse(),function r(){for(;e.length;){var n=e.pop();if(n in t)return r.value=n,r.done=!1,r}return r.done=!0,r}},t.values=E,S.prototype={constructor:S,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(A),!t)for(var e in this)"t"===e.charAt(0)&&r.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function n(r,n){return i.type="throw",i.arg=t,e.next=r,n&&(e.method="next",e.arg=void 0),!!n}for(var o=this.tryEntries.length-1;o>=0;--o){var a=this.tryEntries[o],i=a.completion;if("root"===a.tryLoc)return n("end");if(a.tryLoc<=this.prev){var u=r.call(a,"catchLoc"),c=r.call(a,"finallyLoc");if(u&&c){if(this.prev<a.catchLoc)return n(a.catchLoc,!0);if(this.prev<a.finallyLoc)return n(a.finallyLoc)}else if(u){if(this.prev<a.catchLoc)return n(a.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return n(a.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var a=o;break}}a&&("break"===t||"continue"===t)&&a.tryLoc<=e&&e<=a.finallyLoc&&(a=null);var i=a?a.completion:{};return i.type=t,i.arg=e,a?(this.method="next",this.next=a.finallyLoc,f):this.complete(i)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),f},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),A(r),f}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;A(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,r){return this.delegate={iterator:E(t),resultName:e,nextLoc:r},"next"===this.method&&(this.arg=void 0),f}},t}function Tn(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function _n(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?Tn(Object(r),!0).forEach((function(e){Ln(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):Tn(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function Ln(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function xn(t,e,r,n,o,a,i){try{var u=t[a](i),c=u.value}catch(t){return void r(t)}u.done?e(c):Promise.resolve(c).then(n,o)}function kn(t){return function(){var e=this,r=arguments;return new Promise((function(n,o){var a=t.apply(e,r);function i(t){xn(a,n,o,i,u,"next",t)}function u(t){xn(a,n,o,i,u,"throw",t)}i(void 0)}))}}var Rn=function(){var t=kn(In().mark((function t(e){var r;return In().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(localStorage.getItem("gbp-backup-frames")){t.next=6;break}return t.next=3,Promise.all(e.map(function(){var t=kn(In().mark((function t(e){return In().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=_n,t.t1=_n({},e),t.t2={},t.next=5,Je.$0.getItem(e.id);case 5:return t.t3=t.sent,t.t4={data:t.t3},t.abrupt("return",(0,t.t0)(t.t1,t.t2,t.t4));case 8:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()));case 3:r=t.sent,localStorage.setItem("gbp-backup-frames",JSON.stringify(r)),Pn.log("Frame backup created",JSON.parse(localStorage.getItem("gbp-backup-frames")));case 6:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),Nn=Rn;function Cn(t){return Cn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Cn(t)}function Gn(){Gn=function(){return t};var t={},e=Object.prototype,r=e.hasOwnProperty,n="function"==typeof Symbol?Symbol:{},o=n.iterator||"@@iterator",a=n.asyncIterator||"@@asyncIterator",i=n.toStringTag||"@@toStringTag";function u(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{u({},"")}catch(t){u=function(t,e,r){return t[e]=r}}function c(t,e,r,n){var o=e&&e.prototype instanceof s?e:s,a=Object.create(o.prototype),i=new S(n||[]);return a._invoke=function(t,e,r){var n="suspendedStart";return function(o,a){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===o)throw a;return F()}for(r.method=o,r.arg=a;;){var i=r.delegate;if(i){var u=w(i,r);if(u){if(u===f)continue;return u}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var c=l(t,e,r);if("normal"===c.type){if(n=r.done?"completed":"suspendedYield",c.arg===f)continue;return{value:c.arg,done:r.done}}"throw"===c.type&&(n="completed",r.method="throw",r.arg=c.arg)}}}(t,r,i),a}function l(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}t.wrap=c;var f={};function s(){}function p(){}function h(){}var y={};u(y,o,(function(){return this}));var d=Object.getPrototypeOf,m=d&&d(d(E([])));m&&m!==e&&r.call(m,o)&&(y=m);var v=h.prototype=s.prototype=Object.create(y);function g(t){["next","throw","return"].forEach((function(e){u(t,e,(function(t){return this._invoke(e,t)}))}))}function b(t,e){function n(o,a,i,u){var c=l(t[o],t,a);if("throw"!==c.type){var f=c.arg,s=f.value;return s&&"object"==Cn(s)&&r.call(s,"__await")?e.resolve(s.__await).then((function(t){n("next",t,i,u)}),(function(t){n("throw",t,i,u)})):e.resolve(s).then((function(t){f.value=t,i(f)}),(function(t){return n("throw",t,i,u)}))}u(c.arg)}var o;this._invoke=function(t,r){function a(){return new e((function(e,o){n(t,r,e,o)}))}return o=o?o.then(a,a):a()}}function w(t,e){var r=t.iterator[e.method];if(void 0===r){if(e.delegate=null,"throw"===e.method){if(t.iterator.return&&(e.method="return",e.arg=void 0,w(t,e),"throw"===e.method))return f;e.method="throw",e.arg=new TypeError("The iterator does not provide a 'throw' method")}return f}var n=l(r,t.iterator,e.arg);if("throw"===n.type)return e.method="throw",e.arg=n.arg,e.delegate=null,f;var o=n.arg;return o?o.done?(e[t.resultName]=o.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=void 0),e.delegate=null,f):o:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,f)}function O(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function A(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function S(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(O,this),this.reset(!0)}function E(t){if(t){var e=t[o];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var n=-1,a=function e(){for(;++n<t.length;)if(r.call(t,n))return e.value=t[n],e.done=!1,e;return e.value=void 0,e.done=!0,e};return a.next=a}}return{next:F}}function F(){return{value:void 0,done:!0}}return p.prototype=h,u(v,"constructor",h),u(h,"constructor",p),p.displayName=u(h,i,"GeneratorFunction"),t.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===p||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,h):(t.__proto__=h,u(t,i,"GeneratorFunction")),t.prototype=Object.create(v),t},t.awrap=function(t){return{__await:t}},g(b.prototype),u(b.prototype,a,(function(){return this})),t.AsyncIterator=b,t.async=function(e,r,n,o,a){void 0===a&&(a=Promise);var i=new b(c(e,r,n,o),a);return t.isGeneratorFunction(r)?i:i.next().then((function(t){return t.done?t.value:i.next()}))},g(v),u(v,i,"Generator"),u(v,o,(function(){return this})),u(v,"toString",(function(){return"[object Generator]"})),t.keys=function(t){var e=[];for(var r in t)e.push(r);return e.reverse(),function r(){for(;e.length;){var n=e.pop();if(n in t)return r.value=n,r.done=!1,r}return r.done=!0,r}},t.values=E,S.prototype={constructor:S,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(A),!t)for(var e in this)"t"===e.charAt(0)&&r.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function n(r,n){return i.type="throw",i.arg=t,e.next=r,n&&(e.method="next",e.arg=void 0),!!n}for(var o=this.tryEntries.length-1;o>=0;--o){var a=this.tryEntries[o],i=a.completion;if("root"===a.tryLoc)return n("end");if(a.tryLoc<=this.prev){var u=r.call(a,"catchLoc"),c=r.call(a,"finallyLoc");if(u&&c){if(this.prev<a.catchLoc)return n(a.catchLoc,!0);if(this.prev<a.finallyLoc)return n(a.finallyLoc)}else if(u){if(this.prev<a.catchLoc)return n(a.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return n(a.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var a=o;break}}a&&("break"===t||"continue"===t)&&a.tryLoc<=e&&e<=a.finallyLoc&&(a=null);var i=a?a.completion:{};return i.type=t,i.arg=e,a?(this.method="next",this.next=a.finallyLoc,f):this.complete(i)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),f},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),A(r),f}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;A(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,r){return this.delegate={iterator:E(t),resultName:e,nextLoc:r},"next"===this.method&&(this.arg=void 0),f}},t}function Bn(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function Mn(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?Bn(Object(r),!0).forEach((function(e){Un(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):Bn(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function Un(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function Zn(t){return function(t){if(Array.isArray(t))return Hn(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||function(t,e){if(!t)return;if("string"==typeof t)return Hn(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);"Object"===r&&t.constructor&&(r=t.constructor.name);if("Map"===r||"Set"===r)return Array.from(t);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Hn(t,e)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Hn(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function $n(t,e,r,n,o,a,i){try{var u=t[a](i),c=u.value}catch(t){return void r(t)}u.done?e(c):Promise.resolve(c).then(n,o)}var Vn=function(){var t,e=(t=Gn().mark((function t(e){var r,n,o,a,i,u,c,l,f,s,p,h,y,d,m;return Gn().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return o=(0,N.Z)("shortName")([].concat(Zn(vn().map((function(t){return Mn(Mn({},t),{},{isPredefined:!0})}))),Zn(e.palettes))),a=o.map((function(t){return t.shortName})),i=e.frames.map((function(t){return t.id})),u=(0,_t.Z)(e.printerUrl,"http"),c=e.framesMessage,l=a.includes(e.activePalette)?e.activePalette:"bw",f=e.images.map((function(t){return Mn(Mn({},t),{},{created:Et()(t.created).format(dr.vc)})})).map((function(t){return Mn(Mn({},t),{},{tags:t.tags||[]})})).map((function(t){return t.hashes?t.palette?t.palette.blend?t:Mn(Mn({},t),{},{palette:Mn(Mn({},t.palette),{},{blend:gn._I.MULTIPLY})}):Mn(Mn({},t),{},{palette:dr.q1}):t.palette?a.includes(t.palette)?t:Mn(Mn({},t),{},{palette:a[0]||"bw"}):null})).filter(Boolean),s=f.map((function(t){return t.hash})),f.forEach((function(t){!t.frame||i.includes(t.frame)||c||(c=1)})),p=Et()().subtract(6,"hour").unix(),h=e.recentImports.filter((function(t){var e=t.hash,r=t.timestamp;return s.includes(e)&&r>p})),y=e.plugins.map((function(t){return Mn(Mn({},t),{},{loading:!0,error:void 0})})),d=Mn(Mn({},e.syncLastUpdate),{},{dropbox:(null===(r=e.syncLastUpdate)||void 0===r?void 0:r.dropbox)||0,local:(null===(n=e.syncLastUpdate)||void 0===n?void 0:n.local)||0}),t.next=15,Nn(e.frames);case 15:return t.next=17,jn(e.frames);case 17:return m=t.sent,t.abrupt("return",Mn(Mn({},e),{},{frames:m||e.frames,syncLastUpdate:d,images:f,palettes:o,plugins:y,printerUrl:u,framesMessage:c,activePalette:l,recentImports:h}));case 19:case"end":return t.stop()}}),t)})),function(){var e=this,r=arguments;return new Promise((function(n,o){var a=t.apply(e,r);function i(t){$n(a,n,o,i,u,"next",t)}function u(t){$n(a,n,o,i,u,"throw",t)}i(void 0)}))});return function(t){return e.apply(this,arguments)}}(),Yn=Vn,Jn=r(39324);function zn(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function Wn(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?zn(Object(r),!0).forEach((function(e){Xn(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):zn(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function Xn(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function qn(t){return function(t){if(Array.isArray(t))return Kn(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||function(t,e){if(!t)return;if("string"==typeof t)return Kn(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);"Object"===r&&t.constructor&&(r=t.constructor.name);if("Map"===r||"Set"===r)return Array.from(t);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Kn(t,e)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Kn(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}var Qn=function(t,e,r){var n=t.frames,o=t.images,a=t.palettes;if(r){var i,u,c;if(e.frames&&e.frames.length)(i=n).unshift.apply(i,qn(e.frames));if(e.images&&e.images.length)(u=o).unshift.apply(u,qn(e.images));if(e.palettes&&e.palettes.length)(c=a).unshift.apply(c,qn(e.palettes))}else n=e.frames||t.frames,o=e.images||t.images,a=e.palettes||t.palettes;return Wn(Wn(Wn({},t),e),{},{images:o,frames:n,palettes:a})},to=function(t,e,r){var n=arguments.length>3&&void 0!==arguments[3]&&arguments[3];Object.keys(r).forEach((function(t){"state"!==t&&(t.match(/^[a-f0-9]{40}$/gi)?Je.Rt.setItem("".concat(t),r[t]):t.startsWith("frame-")&&Je.$0.setItem("".concat(t.split("frame-").pop()),r[t]))})),Yn(Qn(e,r.state||{},n)).then((function(e){t({type:c.D5,payload:e})}))},eo=function(t){var e=(0,Jn.Z)(t);return function(r){return function(n){switch(n.type){case c.sO:!function(t){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";e(t,{selectedFrameGroup:r}).then((function(e){var n=[t,r].filter(Boolean).join("_");(0,dn.L)(null)([{blob:new Blob(new Array(e)),filename:"".concat(n,".json")}])}))}(n.payload,n.selectedFrameGroup);break;case c.uH:to(t.dispatch,t.getState(),n.payload,!0);break;case c.Vo:case c.yK:to(t.dispatch,t.getState(),n.payload,!1)}r(n)}}};function ro(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function no(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?ro(Object(r),!0).forEach((function(e){oo(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):ro(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function oo(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function ao(t){return function(t){if(Array.isArray(t))return io(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||function(t,e){if(!t)return;if("string"==typeof t)return io(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);"Object"===r&&t.constructor&&(r=t.constructor.name);if("Map"===r||"Set"===r)return Array.from(t);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return io(t,e)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function io(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}var uo=function(t){return function(e){return function(r){if(r.type===c.pr){var n=t.getState(),o=n.images.find((function(t){return t.hash===r.payload})),a=(0,Ee.Z)(n,o),i=ao(n.exportScaleFactors).pop()||4,u=ao(n.exportFileTypes).pop()||"png",l=(0,dn.j)(no(no({},n),{},{exportScaleFactors:[i],exportFileTypes:[u]}));(0,Se.Z)(n)(o).then(l(a,o)).then((function(t){var e=t[0],r=e.blob,n=e.filename,o=e.title;window.navigator.share&&window.navigator.share({files:[new File([r],n,{type:"image/png",lastModified:new Date})],title:o}).catch((function(){return"¯\\_(ツ)_/¯"}))}))}e(r)}}},co=r(33761),lo=function(t){return function(e){return function(r){if(r.type===c.hi||r.type===c.Zo){var n=t.getState(),o=(0,dn.j)(n);switch(r.type){case c.hi:!function(t,e){return function(r){var n=e.images.find((function(t){return t.hash===r})),o=(0,Ee.Z)(e,n),a=(0,Pe.Z)({image:n,palette:o});return(0,Se.Z)(e)(n).then(t(o,n)).then((0,co.Z)(a))}}(o,n)(r.payload);break;case c.Zo:!function(t,e){return function(r){var n=(0,Pe.Z)({altTitle:"gameboy-printer-gallery",useCurrentDate:!0});Promise.all(r.map((function(r){var n=e.images.find((function(t){return t.hash===r})),o=(0,Ee.Z)(e,n);return(0,Se.Z)(e)(n).then(t(o,n))}))).then((function(t){return t.flat()})).then((0,co.Z)(n))}}(o,n)(r.payload)}}return e(r)}}},fo=(0,i.md)(Re,Ve,We,qe,Ke,Hr,Ur,Zr,Yr,Wr,Xr,Qr,nn,fn,yn,eo,uo,lo),so=window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__||i.qC,po=[fo,(0,i.md)(me)],ho=function(t){var e=(0,i.MT)(ye,t,so.apply(void 0,po));return window.store=e,e},yo=r(97377),mo=function(){var t=document.getElementById("app");if(t){var e;try{e=JSON.parse(localStorage.getItem("gbp-web-state"))||{}}catch(t){e={}}"esp8266"===(0,yo.d)().env&&(e.printerUrl="/");var i=Object.assign(de.c,e);Promise.all([r.e(178),r.e(143)]).then(r.bind(r,8436)).then((function(e){var r=e.default;Yn(i).then((function(e){localStorage.setItem("gbp-web-state",JSON.stringify(e));try{var i=ho(e);(0,a.render)(n.createElement(o.zt,{store:i},n.createElement(r,null)),t)}catch(t){document.getElementById("app").innerHTML='<p class="init-error">Error while initializing the app:<br>'.concat(t.message,"<br><small>").concat(t.stack,"</small></p>")}}))}))}}},13629:function(t,e,r){r.d(e,{$$:function(){return u},$e:function(){return y},B4:function(){return Mt},BH:function(){return i},BS:function(){return S},CQ:function(){return c},D5:function(){return Wt},DK:function(){return _t},DS:function(){return $},DU:function(){return lt},Dr:function(){return C},Dt:function(){return B},Fw:function(){return I},Fy:function(){return $t},GU:function(){return A},GY:function(){return d},Gp:function(){return b},Hn:function(){return X},Ib:function(){return Pt},Ik:function(){return rt},Jf:function(){return w},Jx:function(){return Bt},K0:function(){return f},Ki:function(){return at},LR:function(){return D},Mx:function(){return _},O:function(){return n},OD:function(){return pt},ON:function(){return K},Or:function(){return s},PA:function(){return jt},PR:function(){return te},Pk:function(){return x},Qs:function(){return L},R4:function(){return N},Rv:function(){return vt},S1:function(){return M},Sd:function(){return Ut},Tc:function(){return m},Tq:function(){return l},UF:function(){return Kt},Vo:function(){return ot},WB:function(){return T},WN:function(){return xt},XB:function(){return Ot},Xb:function(){return Ht},YE:function(){return kt},Yx:function(){return o},Zo:function(){return Jt},ax:function(){return zt},b9:function(){return nt},bD:function(){return wt},bM:function(){return it},d0:function(){return Lt},d4:function(){return J},eP:function(){return ut},eh:function(){return et},es:function(){return W},fX:function(){return Gt},fc:function(){return It},fd:function(){return bt},gH:function(){return St},gk:function(){return Et},hT:function(){return Y},hi:function(){return Yt},iF:function(){return p},iM:function(){return h},iq:function(){return mt},j6:function(){return dt},jH:function(){return g},jN:function(){return O},kr:function(){return E},m9:function(){return V},md:function(){return U},nN:function(){return k},oI:function(){return Q},od:function(){return Nt},or:function(){return Ct},ou:function(){return ht},pQ:function(){return Tt},pn:function(){return qt},po:function(){return F},pr:function(){return Vt},qJ:function(){return At},qr:function(){return R},rR:function(){return G},rU:function(){return Xt},rc:function(){return Ft},sO:function(){return ft},sS:function(){return ct},u7:function(){return Z},uD:function(){return Qt},uH:function(){return st},ug:function(){return Rt},ui:function(){return Dt},v6:function(){return H},vR:function(){return a},wA:function(){return j},wK:function(){return P},wb:function(){return q},xG:function(){return Zt},xo:function(){return z},y0:function(){return gt},y3:function(){return v},y9:function(){return yt},yK:function(){return tt}});var n="SET_CURRENT_GALLERY_VIEW",o="SET_IS_FULLSCREEN",a="SET_LIGHTBOX_IMAGE_INDEX",i="LIGHTBOX_NEXT",u="LIGHTBOX_PREV",c="LIGHTBOX_FULLSCREEN",l="SET_LIGHTBOX_IMAGE_HASH",f="PALETTE_SET_ACTIVE",s="PALETTE_DELETE",p="SET_EDIT_PALETTE",h="PALETTE_CANCEL_EDIT",y="PALETTE_UPDATE",d="SAVE_EDIT_PALETTE",m="PALETTE_EDIT",v="PALETTE_CLONE",g="CONFIRM_ASK",b="CONFIRM_ANSWERED",w="FRAMES_MESSAGE_SHOW",O="FRAMES_MESSAGE_HIDE",A="ADD_FRAME",S="DELETE_FRAME",E="EDIT_FRAME",F="CANCEL_EDIT_FRAME",j="UPDATE_FRAME",P="SET_HANDLE_EXPORT_FRAME",D="SET_SAV_FRAME_TYPES",I="UPDATE_EXPORT_FILE_TYPES",T="UPDATE_EXPORT_SCALE_FACTORS",_="SET_HIDE_DATES",L="SET_PREFERRED_LOCALE",x="SET_IMPORT_LAST_SEEN",k="SET_IMPORT_DELETED",R="SET_IMPORT_PAD",N="SET_PAGESIZE",C="SHOW_SERIALS",G="USE_SERIALS",B="ADD_IMAGES",M="DELETE_IMAGE",U="DELETE_IMAGES",Z="EDIT_IMAGE",H="EDIT_IMAGE_SELECTION",$="CANCEL_EDIT_IMAGE",V="UPDATE_IMAGE",Y="UPDATE_IMAGES_BATCH",J="IMAGE_FAVOURITE_TAG",z="IMPORT_DRAGOVER_START",W="IMPORT_DRAGOVER_END",X="DROPBOX_LOGOUT",q="SET_DROPBOX_STORAGE",K="DROPBOX_LOG_ACTION",Q="LAST_UPDATE_DROPBOX_REMOTE",tt="DROPBOX_SETTINGS_IMPORT",et="DROPBOX_START_AUTH",rt="SET_GIT_STORAGE",nt="GITSTORAGE_LOG_ACTION",ot="GIT_SETTINGS_IMPORT",at="STORAGE_SYNC_DONE",it="STORAGE_DIFF_DONE",ut="STORAGE_SYNC_START",ct="STORAGE_SYNC_SELECT",lt="STORAGE_SYNC_CANCEL",ft="JSON_EXPORT",st="JSON_IMPORT",pt="SET_ACTIVE_TAGS",ht="SET_AVAILABLE_TAGS",yt="SHOW_FILTERS",dt="HIDE_FILTERS",mt="IMAGE_SELECTION_REMOVE",vt="IMAGE_SELECTION_ADD",gt="IMAGE_SELECTION_SET",bt="IMAGE_SELECTION_SHIFTCLICK",wt="SET_SORT_BY",Ot="SHOW_SORT_OPTIONS",At="HIDE_SORT_OPTIONS",St="PLUGIN_REMOVE",Et="PLUGIN_ADD",Ft="PLUGIN_UPDATE_PROPERTIES",jt="PLUGIN_UPDATE_CONFIG",Pt="PLUGIN_IMAGE",Dt="PLUGIN_IMAGES",It="EXECUTE_PLUGIN_PROGRESS",Tt="PRINTER_PROGRESS",_t="CREATE_GIF_PROGRESS",Lt="LOG_CLEAR",xt="SET_PRINTER_PARAMS",kt="SET_PRINTER_URL",Rt="REMOTE_CALL_FUNCTION",Nt="HEARTBEAT_TIMED_OUT",Ct="PRINTER_FUNCTIONS_RECEIVED",Gt="PRINTER_DATA_RECEIVED",Bt="PRINTER_RESET",Mt="ANIMATE_IMAGES",Ut="UPDATE_RGBN_PART",Zt="SET_VIDEO_PARAMS",Ht="CANCEL_ANIMATE_IMAGES",$t="SAVE_RGBN_IMAGE",Vt="SHARE_IMAGE",Yt="START_DOWNLOAD",Jt="DOWNLOAD_SELECTION",zt="BATCH_TASK",Wt="GLOBAL_UPDATE",Xt="WINDOW_DIMENSIONS",qt="ERROR",Kt="TRY_RECOVER_IMAGE_DATA",Qt="IMPORT_FILES",te="ADD_TO_QUEUE"},23860:function(t,e,r){r.d(e,{C:function(){return n},c:function(){return o}});r(89554),r(41539),r(54747);var n=[{key:"printerUrl",saveLocally:!0,saveExport:["settings"],value:""},{key:"printerParams",saveLocally:!0,saveExport:["settings"],value:""},{key:"activePalette",saveLocally:!0,saveExport:["settings","remote"],value:"bw"},{key:"images",saveLocally:!0,saveExport:["selected_images","images","remote"],value:[]},{key:"galleryView",saveLocally:!0,saveExport:["settings"],value:"1x"},{key:"exportScaleFactors",saveLocally:!0,saveExport:["settings","remote"],value:[4]},{key:"exportFileTypes",saveLocally:!0,saveExport:["settings","remote"],value:["png"]},{key:"pageSize",saveLocally:!0,saveExport:["settings"],value:30},{key:"imageSelection",saveLocally:!0,saveExport:["selected_images"],value:[]},{key:"rgbnImages",saveLocally:!0,saveExport:[],value:{}},{key:"editImage",saveLocally:!0,saveExport:[],value:null},{key:"videoParams",saveLocally:!0,saveExport:["settings","remote"],value:{}},{key:"filtersActiveTags",saveLocally:!0,saveExport:[],value:[]},{key:"filtersVisible",saveLocally:!0,saveExport:[],value:!1},{key:"savFrameTypes",saveLocally:!0,saveExport:["settings","remote"],value:"int"},{key:"sortBy",saveLocally:!0,saveExport:["settings","remote"],value:"created_asc"},{key:"handleExportFrame",saveLocally:!0,saveExport:["settings","remote"],value:"keep"},{key:"importLastSeen",saveLocally:!0,saveExport:["settings","remote"],value:!0},{key:"importDeleted",saveLocally:!0,saveExport:["settings","remote"],value:!0},{key:"importPad",saveLocally:!0,saveExport:["settings","remote"],value:!1},{key:"hideDates",saveLocally:!0,saveExport:["settings","remote"],value:!1},{key:"palettes",saveLocally:!0,saveExport:["palettes","remote"],value:[]},{key:"plugins",saveLocally:!0,saveRemote:!1,saveExport:["settings","remote"],value:[]},{key:"framesMessage",saveLocally:!0,saveExport:["settings","remote"],value:0},{key:"frames",saveLocally:!0,saveExport:["frames","remote","framegroup"],value:[]},{key:"recentImports",saveLocally:!0,saveExport:[],value:[]},{key:"gitStorage",saveLocally:!0,saveExport:[],value:{use:!1,owner:"",repo:"",branch:"",token:"",throttle:"330"}},{key:"dropboxStorage",saveLocally:!0,saveExport:[],value:{path:""}},{key:"useSerials",saveLocally:!0,saveExport:[],value:!1},{key:"syncLastUpdate",saveLocally:!0,saveExport:[],value:{dropbox:0,local:0}},{key:"preferredLocale",saveLocally:!0,saveExport:["settings"],value:navigator.language}],o={};n.forEach((function(t){var e=t.key,r=t.value;o[e]=r}))},48766:function(t,e,r){r.d(e,{Dh:function(){return n},TZ:function(){return o},VP:function(){return l},Vn:function(){return u},ee:function(){return i},oJ:function(){return c},z2:function(){return a}});var n="__filter:untagged__",o="__filter:new__",a="__filter:mono__",i="__filter:rgb__",u="__filter:recent__",c="__filter:favourite__",l="__new:palette__"},97768:function(t,e,r){r(43290),r(66992),r(39575),r(41539),r(49743),r(92990),r(18927),r(33105),r(35035),r(74345),r(7174),r(32846),r(44731),r(77209),r(96319),r(58867),r(37789),r(33739),r(29368),r(14483),r(12056),r(3462),r(30678),r(27462),r(33824),r(55021),r(12974),r(15016),r(89554),r(54747),r(57327),r(21249),r(92222),r(47042),r(69600),r(91058),r(66528),r(74916),r(15306),r(69070),r(79753),r(82526),r(41817),r(32165),r(78783),r(33948),r(91038),r(68309);var n=r(18417);function o(t){return function(t){if(Array.isArray(t))return a(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||function(t,e){if(!t)return;if("string"==typeof t)return a(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);"Object"===r&&t.constructor&&(r=t.constructor.name);if("Map"===r||"Set"===r)return Array.from(t);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return a(t,e)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function a(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function i(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}var u="FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFF",c=20,l=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.canvas=null,this.tiles=[],this.colors=[],this.rawImageData=[],this.lockFrame=!1,this.invertPalette=!1,this.bwPalette=[16777215,11184810,5592405,0],this.colorData=this.bwPalette,this.blackLine=Array(20).fill(u),this.whiteLine=Array(20).fill("00000000000000000000000000000000"),this.tileIndexIsFramePart=n.Z}var e,r,a;return e=t,r=[{key:"update",value:function(t){var e=this,r=t.canvas,n=void 0===r?null:r,o=t.tiles,a=void 0===o?[]:o,i=t.palette,u=void 0===i?[]:i,c=t.lockFrame,l=void 0!==c&&c,f=t.invertPalette,s=void 0!==f&&f,p=this.setCanvas(n),h=this.setPalette(u,s),y=this.setLockFrame(l);(p||h||y||!this.tiles.length)&&(this.tiles=[]);var d=this.setTiles(a),m=this.getHeight();if(0!==m){if(this.canvas){if(this.canvas.height!==m||!this.rawImageData.length){this.canvas.height=m;var v=new Uint8ClampedArray(160*m*4);this.rawImageData.forEach((function(t,e){v[e]=t})),this.rawImageData=v}d.forEach((function(t){var r=t.index,n=t.newTile;e.renderTile(r,n)})),this.updateCanvas(m)}}else this.canvas.height=0}},{key:"updateCanvas",value:function(t){var e,r=this.canvas.getContext("2d");try{e=new ImageData(this.rawImageData,160,t)}catch(n){e=r.getImageData(0,0,160,t),this.rawImageData.forEach((function(t,r){e.data[r]=t}))}r.putImageData(e,0,0)}},{key:"getScaledCanvas",value:function(t){var e=this,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"keep",n=360===this.tiles.length?r:"keep",o=this.getScaleCanvasSize(n),a=o.initialHeight,i=o.initialWidth,u=o.tilesPerLine,c=document.createElement("canvas"),l=c.getContext("2d");return c.width=i*t,c.height=a*t,this.getExportTiles(n).forEach((function(n,o){e.paintTileScaled(e.decodeTile(n),o,l,t,u,r)})),c}},{key:"getScaleCanvasSize",value:function(t){switch(t){case"keep":return{initialHeight:this.getHeight(),initialWidth:160,tilesPerLine:c};case"crop":return{initialHeight:this.getHeight()-32,initialWidth:128,tilesPerLine:16};case"square_black":case"square_white":case"square_smart":return{initialHeight:this.getHeight()+16,initialWidth:160,tilesPerLine:c};default:throw new Error("unknown export mode ".concat(t))}}},{key:"getExportTiles",value:function(t){var e=this;switch(t){case"keep":return this.tiles;case"crop":return this.tiles.map((function(t,r){return e.tileIndexIsFramePart(r,"keep")?null:t})).filter(Boolean);case"square_black":return[].concat(o(this.blackLine),o(this.tiles),o(this.blackLine));case"square_white":return[].concat(o(this.whiteLine),o(this.tiles),o(this.whiteLine));case"square_smart":return[].concat(o(this.smartTile("first")),o(this.tiles),o(this.smartTile("last")));default:throw new Error("unknown export mode ".concat(t))}}},{key:"smartTile",value:function(t){switch(t){case"first":return this.tiles.slice(0,20).map((function(t){return Array(8).fill(t.slice(0,4)).join("")}));case"last":return this.tiles.slice(340,360).map((function(t){return Array(8).fill(t.slice(28,32)).join("")}));default:return this.blackLine}}},{key:"setCanvas",value:function(t){return this.canvas!==t&&(this.canvas=t,!0)}},{key:"setPalette",value:function(t,e){return(JSON.stringify(this.colors)!==JSON.stringify(t)||this.invertPalette!==e)&&(this.colors=t,this.invertPalette=e,this.colorData=this.colors.map((function(t){return 7!==t.length?null:parseInt(t.substring(1),16)})),!0)}},{key:"setLockFrame",value:function(t){return t!==this.lockFrame&&(this.lockFrame=t,!0)}},{key:"setTiles",value:function(t){var e=this,r=t.map((function(t,r){return t!==e.tiles[r]?{index:r,newTile:t}:null})).filter(Boolean);return this.tiles=t,r}},{key:"renderTile",value:function(t,e){var r=this.decodeTile(e);this.paintTile(r,t)}},{key:"decodeTile",value:function(){for(var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:u,e=t.replace(/[^0-9A-F]/gi,"").padEnd(32,"f"),r=new Array(16),n=0;n<r.length;n+=1)r[n]=parseInt(e.substr(2*n,2),16);for(var o=new Array(64),a=0;a<8;a+=1)for(var i=0;i<8;i+=1){var c=r[2*a+1]>>7-i&1,l=r[2*a]>>7-i&1;o[8*a+i]=c<<1|l}return o}},{key:"getRGBValue",value:function(t,e,r,n){var o=this.lockFrame&&"crop"!==n&&this.tileIndexIsFramePart(r,n)?this.bwPalette:this.colorData,a=this.invertPalette?o[3-t[e]]:o[t[e]];return{r:(16711680&a)>>16,g:(65280&a)>>8,b:255&a}}},{key:"paintTile",value:function(t,e){for(var r=e%c*8,n=8*Math.floor(e/c),o=0;o<8;o+=1)for(var a=0;a<8;a+=1){var i=4*(r+o+160*(n+a)),u=this.getRGBValue(t,8*a+o,e,"keep");this.rawImageData[i]=u.r,this.rawImageData[i+1]=u.g,this.rawImageData[i+2]=u.b,this.rawImageData[i+3]=255}}},{key:"paintTileScaled",value:function(t,e,r,n,o,a){for(var i=e%o*8*n,u=8*Math.floor(e/o)*n,c=0;c<8;c+=1)for(var l=0;l<8;l+=1){var f=this.getRGBValue(t,8*l+c,e,a);r.fillStyle="rgb(".concat(f.r,", ").concat(f.g,", ").concat(f.b,")"),r.fillRect(i+c*n,u+l*n,n+1,n+1)}}},{key:"getHeight",value:function(){return 8*Math.ceil(this.tiles.length/c)}}],r&&i(e.prototype,r),a&&i(e,a),Object.defineProperty(e,"prototype",{writable:!1}),t}();e.Z=l},24022:function(t,e,r){r.d(e,{Rg:function(){return u},_I:function(){return a},qe:function(){return i}});var n;r(69070);function o(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}var a={NORMAL:"normal",NORMAL_S:"normal_s",LIGHTEN:"lighten",SCREEN:"screen",DODGE:"dodge",DODGE_S:"dodge_s",ADDITION:"addition",DARKEN:"darken",MULTIPLY:"multiply",BURN:"burn",BURN_S:"burn_s",OVERLAY:"overlay",SOFTLIGHT:"softlight",SOFTLIGHT_S:"softlight_s",HARDLIGHT:"hardlight",DIFFERENCE:"difference",SUBTRACT:"subtract",SUBTRACT_S:"subtract_s",GRAIN_EXTRACT:"grainextract",GRAIN_EXTRACT_S:"grainextract_s",GRAIN_MERGE:"grainmerge",DIVIDE:"divide",DIVIDE_S:"divide_s"},i=(o(n={},a.NORMAL,(function(t,e){return t})),o(n,a.LIGHTEN,(function(t,e){return Math.max(e,t)})),o(n,a.SCREEN,(function(t,e){return 1-(1-e)*(1-t)})),o(n,a.DODGE,(function(t,e){return t/(1-e)})),o(n,a.ADDITION,(function(t,e){return e+t})),o(n,a.DARKEN,(function(t,e){return Math.min(e,t)})),o(n,a.MULTIPLY,(function(t,e){return e*t})),o(n,a.BURN,(function(t,e){return 1-(1-t)/e})),o(n,a.OVERLAY,(function(t,e){return t<.5?2*t*e:1-2*(1-e)*(1-t)})),o(n,a.SOFTLIGHT,(function(t,e){return(1-t)*i[a.MULTIPLY](t,e)+t*i[a.SCREEN](t,e)})),o(n,a.DIFFERENCE,(function(t,e){return Math.abs(t-e)})),o(n,a.SUBTRACT,(function(t,e){return t-e})),o(n,a.GRAIN_EXTRACT,(function(t,e){return t-e+.5})),o(n,a.GRAIN_MERGE,(function(t,e){return t+e-.5})),o(n,a.DIVIDE,(function(t,e){return t/e})),o(n,a.NORMAL_S,(function(t,e){return i[a.NORMAL](e,t)})),o(n,a.DODGE_S,(function(t,e){return i[a.DODGE](e,t)})),o(n,a.BURN_S,(function(t,e){return i[a.BURN](e,t)})),o(n,a.HARDLIGHT,(function(t,e){return i[a.OVERLAY](e,t)})),o(n,a.SOFTLIGHT_S,(function(t,e){return i[a.SOFTLIGHT](e,t)})),o(n,a.SUBTRACT_S,(function(t,e){return i[a.SUBTRACT](e,t)})),o(n,a.GRAIN_EXTRACT_S,(function(t,e){return i[a.GRAIN_EXTRACT](e,t)})),o(n,a.DIVIDE_S,(function(t,e){return i[a.DIVIDE](e,t)})),n),u=[{id:a.NORMAL,label:"Normal (ignore neutral layer)"},{id:a.NORMAL_S,label:"Normal ⇵ (only neutral layer)"},{id:a.LIGHTEN,label:"Lighten only"},{id:a.SCREEN,label:"Screen"},{id:a.DODGE,label:"Dodge"},{id:a.DODGE_S,label:"Dodge ⇵"},{id:a.ADDITION,label:"Addition"},{id:a.DARKEN,label:"Darken only"},{id:a.MULTIPLY,label:"Multiply"},{id:a.BURN,label:"Burn"},{id:a.BURN_S,label:"Burn ⇵"},{id:a.OVERLAY,label:"Overlay"},{id:a.SOFTLIGHT,label:"Soft light"},{id:a.SOFTLIGHT_S,label:"Soft light ⇵"},{id:a.HARDLIGHT,label:"Hard light"},{id:a.DIFFERENCE,label:"Difference"},{id:a.SUBTRACT,label:"Subtract"},{id:a.SUBTRACT_S,label:"Subtract ⇵"},{id:a.GRAIN_EXTRACT,label:"Grain extract"},{id:a.GRAIN_EXTRACT_S,label:"Grain extract ⇵"},{id:a.GRAIN_MERGE,label:"Grain merge"},{id:a.DIVIDE,label:"Divide"},{id:a.DIVIDE_S,label:"Divide ⇵"}]},17036:function(t,e,r){r(21249),r(47042),r(69600),r(43290),r(68304),r(24812),r(30489),r(41539),r(12419),r(78011),r(69070),r(74819),r(38880),r(79753),r(82526),r(41817),r(32165),r(66992),r(78783),r(33948),r(68309),r(91038),r(74916);var n=r(97768),o=r(24022);function a(t){return a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},a(t)}function i(t){return function(t){if(Array.isArray(t))return l(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||c(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function u(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null==r)return;var n,o,a=[],i=!0,u=!1;try{for(r=r.call(t);!(i=(n=r.next()).done)&&(a.push(n.value),!e||a.length!==e);i=!0);}catch(t){u=!0,o=t}finally{try{i||null==r.return||r.return()}finally{if(u)throw o}}return a}(t,e)||c(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function c(t,e){if(t){if("string"==typeof t)return l(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?l(t,e):void 0}}function l(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function f(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function s(){return s="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=p(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(arguments.length<3?t:r):o.value}},s.apply(this,arguments)}function p(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=m(t)););return t}function h(t,e){return h=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},h(t,e)}function y(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var r,n=m(t);if(e){var o=m(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return d(this,r)}}function d(t,e){if(e&&("object"===a(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}function m(t){return m=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},m(t)}var v=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&h(t,e)}(c,t);var e,r,n,a=y(c);function c(){var t;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,c),(t=a.call(this)).blackLine=c.rgbnTiles([t.blackLine,t.blackLine,t.blackLine,t.blackLine]),t.whiteLine=c.rgbnTiles([t.whiteLine,t.whiteLine,t.whiteLine,t.whiteLine]),t}return e=c,n=[{key:"rgbnTiles",value:function(t){var e=u(t,4),r=e[0],n=e[1],o=e[2],a=e[3],c=Math.max((null==r?void 0:r.length)||0,(null==n?void 0:n.length)||0,(null==o?void 0:o.length)||0,(null==a?void 0:a.length)||0);return i(Array(c)).map((function(t,e){return{r:null==r?void 0:r[e],g:null==n?void 0:n[e],b:null==o?void 0:o[e],n:null==a?void 0:a[e]}}))}}],(r=[{key:"setPalette",value:function(t){return!!t&&JSON.stringify(this.palette)!==JSON.stringify(t)&&(this.palette=t,!0)}},{key:"decodeTile",value:function(t){var e=t.r,r=t.g,n=t.b,o=t.n;return{r:s(m(c.prototype),"decodeTile",this).call(this,e),g:s(m(c.prototype),"decodeTile",this).call(this,r),b:s(m(c.prototype),"decodeTile",this).call(this,n),n:o?s(m(c.prototype),"decodeTile",this).call(this,o):null}}},{key:"getRGBValue",value:function(t,e,r,n){var o=t.r,a=t.g,i=t.b,u=t.n;if(this.lockFrame&&"crop"!==n&&this.tileIndexIsFramePart(r,n)&&u)try{return s(m(c.prototype),"getRGBValue",this).call(this,u,e,r,n)}catch(t){return{r:255*Math.random(),g:255*Math.random(),b:255*Math.random()}}return this.blendColors({r:o[e],g:a[e],b:i[e],n:!!u&&u[e]})}},{key:"smartTile",value:function(t){var e=this;switch(t){case"first":return this.tiles.slice(0,20).map((function(t){return{r:t.r?Array(8).fill(t.r.slice(0,4)).join(""):s(m(c.prototype),"smartTile",e).call(e,null),g:t.g?Array(8).fill(t.g.slice(0,4)).join(""):s(m(c.prototype),"smartTile",e).call(e,null),b:t.b?Array(8).fill(t.b.slice(0,4)).join(""):s(m(c.prototype),"smartTile",e).call(e,null),n:t.n?Array(8).fill(t.n.slice(0,4)).join(""):s(m(c.prototype),"smartTile",e).call(e,null)}}));case"last":return this.tiles.slice(340,360).map((function(t){return{r:t.r?Array(8).fill(t.r.slice(28,32)).join(""):s(m(c.prototype),"smartTile",e).call(e,null),g:t.g?Array(8).fill(t.g.slice(28,32)).join(""):s(m(c.prototype),"smartTile",e).call(e,null),b:t.b?Array(8).fill(t.b.slice(28,32)).join(""):s(m(c.prototype),"smartTile",e).call(e,null),n:t.n?Array(8).fill(t.n.slice(28,32)).join(""):s(m(c.prototype),"smartTile",e).call(e,null)}}));default:return s(m(c.prototype),"smartTile",this).call(this,null)}}},{key:"blendColors",value:function(t){var e=t.r,r=t.g,n=t.b,a=t.n,i={r:this.palette.r[3-e],g:this.palette.g[3-r],b:this.palette.b[3-n]};if(!1===a)return i;var u=this.palette.blend||o._I.MULTIPLY;if(!o.qe[u])return i;var c=function(t,e){return 255*Math.max(0,Math.min(1,o.qe[u](t/255,e/255)))};return{r:c(this.palette.r[3-e],this.palette.n[3-a]),g:c(this.palette.g[3-r],this.palette.n[3-a]),b:c(this.palette.b[3-n],this.palette.n[3-a])}}},{key:"getHeight",value:function(){return 144}}])&&f(e.prototype,r),n&&f(e,n),Object.defineProperty(e,"prototype",{writable:!1}),c}(n.Z);e.Z=v},75500:function(t,e,r){r.d(e,{e:function(){return u},v:function(){return c}});r(47042),r(92222),r(43290),r(66992),r(41539),r(88674),r(78783),r(33948),r(69600),r(21249),r(57327),r(74916),r(15306),r(79753),r(82526),r(41817),r(32165),r(91038),r(68309);var n=r(18417),o=r(59833);function a(t){return function(t){if(Array.isArray(t))return i(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||function(t,e){if(!t)return;if("string"==typeof t)return i(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);"Object"===r&&t.constructor&&(r=t.constructor.name);if("Map"===r||"Set"===r)return Array.from(t);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return i(t,e)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function i(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}var u=function(t){return r.e(705).then(r.t.bind(r,40705,23)).then((function(e){var i=e.default;return r.e(591).then(r.t.bind(r,99591,23)).then((function(e){var r=e.default,u=function(t){if(t.length>360)return t.slice(0,360);if(t.length<360){var e=t.pop();return[].concat(a(t),a(Array(360-t.length).fill(e)))}return t}(t).filter((function(t,e){return(0,n.Z)(e,"keep")})).map((function(t){return t.replace(/ /gi,"")})).join("\n"),c=r.deflate(u,{to:"string",strategy:1,level:8}),l=i(c);return o.$0.setItem(l,c).then((function(){return l}))}))}))},c=function(t){return t?o.$0.getItem(t).then((function(t){return t?r.e(591).then(r.t.bind(r,99591,23)).then((function(e){var r=e.default;try{var n=r.inflate(t,{to:"string"}).split("\n");return{upper:n.slice(0,40),left:Array(14).fill(0).map((function(t,e){return n.slice(4*e+40,4*e+42)})),right:Array(14).fill(0).map((function(t,e){return n.slice(4*e+42,4*e+44)})),lower:n.slice(96,136)}}catch(t){return null}})):null})):Promise.resolve(null)}},2738:function(t,e,r){r(41539),r(88674),r(89554),r(54747),r(79753),r(82526),r(41817),r(32165),r(66992),r(78783),r(33948),r(91038),r(47042),r(68309),r(74916);var n=r(75500);function o(t){return function(t){if(Array.isArray(t))return a(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||function(t,e){if(!t)return;if("string"==typeof t)return a(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);"Object"===r&&t.constructor&&(r=t.constructor.name);if("Map"===r||"Set"===r)return Array.from(t);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return a(t,e)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function a(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}e.Z=function(t,e){return 360!==t.length?Promise.resolve(t):(0,n.v)(e).then((function(e){var r=o(t);return e.upper.forEach((function(t,e){r[e]=t})),e.lower.forEach((function(t,e){r[e+320]=t})),e.left.forEach((function(t,e){r[20*e+40]=t[0],r[20*e+41]=t[1]})),e.right.forEach((function(t,e){r[20*e+58]=t[0],r[20*e+59]=t[1]})),r})).catch((function(){return t}))}},20170:function(t,e,r){r(92222),r(57327),r(41539),r(34553),r(26699),r(32023),r(79753),r(82526),r(41817),r(32165),r(66992),r(78783),r(33948),r(91038),r(47042),r(68309),r(74916);function n(t){return function(t){if(Array.isArray(t))return o(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||function(t,e){if(!t)return;if("string"==typeof t)return o(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);"Object"===r&&t.constructor&&(r=t.constructor.name);if("Map"===r||"Set"===r)return Array.from(t);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return o(t,e)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function o(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}e.Z=function(t){var e=t.initial,r=t.add,o=t.remove,a=[].concat(n(e),n(r));return a.filter((function(t,e){return a.findIndex((function(e){return e===t}))===e})).filter((function(t){return!o.includes(t)}))}},15168:function(t,e,r){r(73210),r(74916),r(4723),r(24603),r(39714),r(92222),r(27852);e.Z=function(t,e){if(!t.trim())return"";if("/"===t&&"ws"!==e)return t;var r=!!t.match(new RegExp("^".concat(e,"(s)?:\\/\\/"),"gi"));return"".concat(r?"":"".concat(e,"://")).concat(t).concat(t.endsWith("/")?"":"/")}},31712:function(t,e){var r={weekday:void 0,year:"numeric",month:"numeric",day:"numeric",hour:"numeric",minute:"numeric"};e.Z=function(t,e){return t.toDate().toLocaleString(e,r)}},33761:function(t,e,r){r.d(e,{Z:function(){return i}});r(66992),r(41539),r(88674),r(78783),r(33948),r(21249),r(89554),r(54747);var n=r(93162),o=function(t){return"function"==typeof t.arrayBuffer?t.arrayBuffer():new Promise((function(e){var r=new FileReader;r.onload=function(t){e(t.target.result)},r.readAsArrayBuffer(t)}))},a=r(93572),i=function(t){return function(e){if(1!==e.length)r.e(733).then(r.t.bind(r,55733,23)).then((function(r){var i=new(0,r.default);Promise.all(e.map((function(t){var e=t.filename,r=t.blob;return o(r).then((function(t){return{filename:e,arrayBuffer:t}}))}))).then(a.Z).then((function(t){t.forEach((function(t){var e=t.uFilename,r=t.arrayBuffer;i.file(e,r)}))})).then((function(){return i.generateAsync({type:"blob",compression:"DEFLATE"}).then((function(e){(0,n.saveAs)(e,"".concat(t,".zip"))}))}))}));else{var i=e[0];(0,n.saveAs)(i.blob,i.filename)}}}},75226:function(t,e,r){r(57327),r(41539),r(21249),r(88674),r(85827),r(69600),r(74916),r(4723),r(92222),r(83112),r(83710),r(39714),r(82772),r(91058),r(47042),r(66992),r(78783),r(33948),r(84944),r(33792),r(79753),r(82526),r(41817),r(32165),r(91038),r(68309);var n=r(97768),o=r(17036),a=r(84040),i=r(30661),u=r(15177);function c(t){return function(t){if(Array.isArray(t))return l(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||function(t,e){if(!t)return;if("string"==typeof t)return l(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);"Object"===r&&t.constructor&&(r=t.constructor.name);if("Map"===r||"Set"===r)return Array.from(t);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return l(t,e)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function l(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}e.Z=function(t){return function(e,r){return function(l){var f=t.exportScaleFactors,s=t.exportFileTypes,p=t.handleExportFrame,h=!!r.hashes,y=h?new o.Z:new n.Z,d=r.lockFrame||!1,m=r.invertPalette||!1;h?y.update({tiles:l,palette:e,lockFrame:d}):y.update({tiles:l,palette:e.palette,lockFrame:d,invertPalette:m});var v=c(f).filter((function(t){return"number"==typeof t})),g=c(s);v.length||v.push(4),g.length||g.push("png");var b=v.map((function(t){return g.map((function(n){return new Promise((function(o){var l=(0,a.Z)({image:r,palette:e,exportScaleFactor:t});switch(n){case"txt":if(h)return void o(null);(0,i.zD)(r.hash,null).then((function(t){var e=t.map((function(t){return t.match(/.{1,2}/g).join(" ")})).reduce((function(t,e,r){return[].concat(c(t),r%40?[e]:[u.fb,e])}),[]),a=[u.jU].concat(c(e),[u.T6,u.oU]).join("\n");o({folder:"images",filename:"".concat(l,".").concat(n),blob:new Blob(new Array(a),{type:"text/plain"}),title:r.title})}));break;case"pgm":if(h)return void o(null);for(var f=y.getScaledCanvas(1,p),s=["P2","#","# Exported from ".concat(window.location.origin),"#","# hash: ".concat(r.hash),"# created: ".concat(r.created),"# title: ".concat(r.title),"# tags: ".concat(r.tags.join(", ")),"# dimension: ".concat(f.width,"*").concat(f.height," pixels"),"#","".concat(f.width," ").concat(f.height),"3","#"],d=f.getContext("2d"),m=0;m<f.height;m+=1){for(var v=[],g=0;g<f.width;g+=1){var b=d.getImageData(g,m,1,1).data,w=["#",b[0].toString(16).padStart(2,"0"),b[1].toString(16).padStart(2,"0"),b[2].toString(16).padStart(2,"0")].join(""),O=e.palette.indexOf(w);-1===O&&(O=y.bwPalette.indexOf(parseInt(w.slice(1),16))),v.push(3-O)}s.push(v.join(" "))}o({filename:"".concat(l,".").concat(n),blob:new Blob([s.join("\n")],{type:"text/plain"}),title:r.title});break;default:y.getScaledCanvas(t,p).toBlob((function(t){o({filename:"".concat(l,".").concat(n),blob:t,title:r.title})}),"image/".concat(n),1)}}))}))}));return Promise.all(b.flat()).then((function(t){return t.filter(Boolean)}))}}}},98642:function(t,e,r){r.d(e,{L:function(){return n.Z},j:function(){return o.Z}});var n=r(33761),o=r(75226)},84040:function(t,e,r){r(83112),r(83710),r(41539),r(39714),r(69600),r(21249),r(57327);var n=r(27484),o=r.n(n),a=r(10285),i=r.n(a),u=r(15177);o().extend(i());e.Z=function(t){var e,r,n,a,i,c,l=t.image,f=void 0!==l&&l,s=t.palette,p=void 0!==s&&s,h=t.exportScaleFactor,y=void 0!==h&&h,d=t.frameRate,m=void 0!==d&&d,v=t.altTitle,g=void 0!==v&&v,b=t.useCurrentDate,w=void 0!==b&&b,O=t.frameName,A=void 0!==O&&O,S=t.paletteShort,E=void 0!==S&&S,F=w?o()():o()(f.created,u.vc),j=!!F.isValid()&&F.format(u.z3),P=E||!!p&&(p.shortName||(r=(e=p).r,n=e.g,a=e.b,i=e.n,c=function(t){return t.toString(16).padStart(2,"0")},[r.map(c).join(""),n.map(c).join(""),a.map(c).join(""),i.map(c).join("")].join("")));return[j,f&&f.title?f.title:g,y?"".concat(y,"x"):null,m?"".concat(m,"fps"):null,A,P].filter(Boolean).join("-")}},84413:function(t,e,r){r(57327),r(41539),r(26699),r(32023),r(21249);var n=r(27484),o=r.n(n),a=r(48766),i=r(15177);e.Z=function(t,e){return function(r){var n=t.filter((function(t){return[a.z2,a.TZ,a.ee,a.Dh,a.Vn,a.oJ].includes(t)}));if(n.length){if(n.includes(a.Dh)&&0!==r.tags.length)return!1;if(n.includes(a.TZ))if(o()(r.created,i.vc).unix()<=o()().subtract("1","day").unix())return!1;return!(n.includes(a.Vn)&&!e.map((function(t){return t.hash})).includes(r.hash))&&(!(n.includes(a.ee)&&!r.hashes)&&((!n.includes(a.z2)||!r.hashes)&&!(n.includes(a.oJ)&&!r.tags.includes(a.oJ))))}return!0}}},87954:function(t,e,r){r(57327),r(41539),r(26699),r(32023),r(69826);var n=r(48766);e.Z=function(t){return function(e){var r=t.filter((function(t){return![n.z2,n.TZ,n.ee,n.Dh,n.Vn,n.oJ].includes(t)}));return!r.length||e.tags.find((function(t){return r.includes(t)}))}}},81477:function(t,e,r){r(57327),r(41539),r(21249),r(2707),r(79753),r(82526),r(41817),r(32165),r(66992),r(78783),r(33948),r(91038),r(47042),r(68309),r(74916);var n=r(49965),o=r(84413),a=r(87954);function i(t){return function(t){if(Array.isArray(t))return u(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||function(t,e){if(!t)return;if("string"==typeof t)return u(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);"Object"===r&&t.constructor&&(r=t.constructor.name);if("Map"===r||"Set"===r)return Array.from(t);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return u(t,e)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function u(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}e.Z=function(t){var e=t.images,r=t.filtersActiveTags,u=t.sortBy,c=t.recentImports;return i(e).map(n.Np).sort((0,n.$b)({sortBy:u})).map(n.fD).filter((0,o.Z)(r,c)).filter((0,a.Z)(r))}},88791:function(t,e,r){r(2707),r(85827),r(41539),r(68309),r(74916),r(4723),r(69826);var n=function(t,e){switch(t){case"hk":return"Hallo Katze!";case"int":return"International Frames (GameBoy Camera)";case"jp":return"Japanese Frames (Pocket Camera)";default:return e}},o=function(t){switch(t){case"int":return"_1";case"jp":return"_2";case"hk":return"_3";default:return t}};e.Z=function(t){return t.reduce((function(t,e){var r,o=e.id,a=e.name;try{r=o.match(/^[a-z]+/g)[0]}catch(e){return t}return t.find((function(t){return t.id===r}))||t.push({id:r,name:n(r,a)}),t}),[]).sort((function(t,e){var r=t.id,n=e.id,a=o(r),i=o(n);return a>i?1:a<i?-1:0}))}},39324:function(t,e,r){r.d(e,{Z:function(){return h}});r(89554),r(41539),r(54747),r(26699),r(32023),r(57327),r(83710),r(88674),r(69070),r(47941),r(82526),r(38880),r(49337),r(33321);var n=r(23860),o=(r(66992),r(78783),r(33948),r(21249),r(59833)),a=function(t){return Promise.all(t.map((function(t){return o.Rt.getItem(t).then((function(e){return{hash:t,data:e}}))}))).then((function(t){var e={};return t.forEach((function(t){var r=t.hash,n=t.data;e[r]=n})),e}))},i=function(t){return Promise.all(t.map((function(t){return o.$0.getItem(t).then((function(e){return{hash:t,data:e}}))}))).then((function(t){var e={};return t.forEach((function(t){var r=t.hash,n=t.data;e["frame-".concat(r)]=n})),e}))},u=function(t,e){var r=e.images,n=e.imageSelection;switch(t){case"images":return r.map((function(t){return t.hash}));case"selected_images":return n;default:return[]}},c=(r(23157),function(t,e){var r=e.frames,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"";switch(t){case"frames":return r.map((function(t){return t.hash}));case"framegroup":return r.filter((function(t){return t.id.startsWith(n)})).map((function(t){return t.hash}));default:return[]}}),l=r(97377);function f(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function s(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?f(Object(r),!0).forEach((function(e){p(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):f(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function p(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}var h=function(t){return function(e){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},o=r.lastUpdateUTC,f=r.selectedFrameGroup,p=f,h=t.getState(),y=JSON.parse(localStorage.getItem("gbp-web-state"));delete y.gitStorage,delete y.dropboxStorage,"esp8266"===(0,l.d)().env&&delete y.printerUrl;var d={};switch(n.C.forEach((function(t){var r=t.saveExport,n=t.key;r.includes(e)&&(d[n]=y[n],"images"===n&&"selected_images"===e&&(d[n]=d[n].filter((function(t){var r=t.hash;return u(e,h).includes(r)}))),"frames"===n&&"framegroup"===e&&(d[n]=d[n].filter((function(t){var r=t.hash;return c(e,h,p).includes(r)}))),"palettes"===n&&(d[n]=y[n].filter((function(t){return!t.isPredefined}))))})),d.lastUpdateUTC=o||Math.floor((new Date).getTime()/1e3),e){case"debug":return Promise.resolve(JSON.stringify({state:y},null,2));case"settings":case"remote":return Promise.resolve(JSON.stringify({state:d},null,2));case"images":case"selected_images":return a(u(e,h)).then((function(t){return JSON.stringify(s({state:d},t),null,2)}));case"frames":case"framegroup":return i(c(e,h,p)).then((function(t){return JSON.stringify(s({state:d},t),null,2)}));case"palettes":return Promise.resolve(d.palettes).then((function(t){return JSON.stringify({state:{palettes:t}},null,2)}));default:return null}}}},39506:function(t,e,r){r(69826),r(41539);e.Z=function(t,e){var r=t.palettes,n=e.hashes,o=e.palette;return n?o:r.find((function(t){return t.shortName===o}))}},16717:function(t,e,r){r(69826),r(41539);e.Z=function(t,e,r){var n=t.images,o=e.r,a=e.g,i=e.b,u=e.n;if(r)return{r:r,g:r,b:r,n:r};var c=n.find((function(t){return t.hash===o})),l=n.find((function(t){return t.hash===a})),f=n.find((function(t){return t.hash===i})),s=n.find((function(t){return t.hash===u}));return{r:c?c.frame:null,g:l?l.frame:null,b:f?f.frame:null,n:s?s.frame:null}}},28014:function(t,e,r){r(69826),r(41539),r(66992),r(88674),r(78783),r(33948);var n=r(30661),o=r(16717),a=r(17036);e.Z=function(t){return function(e,r,i){var u,c=e.hash,l=e.frame,f=e.hashes,s=(null===(u=t.frames.find((function(t){return t.id===l})))||void 0===u?void 0:u.hash)||null;if(!f)return(0,n.zD)(c,s,r,i);var p=(0,o.Z)(t,f,s);return Promise.all([(0,n.zD)(f.r,p.r||s,r,i),(0,n.zD)(f.g,p.g||s,r,i),(0,n.zD)(f.b,p.b||s,r,i),(0,n.zD)(f.n,p.n||s,r,i)]).then(a.Z.rgbnTiles)}}},36965:function(t,e,r){r(41539),r(88674);var n=r(48764).Buffer;e.Z=function(t,e){return new Promise((function(r,o){var a=new FileReader;switch(a.onload=function(t){var a=t.target;if(a.result)return"arrayBuffer"===e?void r(n.from(a.result)):void r(a.result);o(new Error("Filereader has no result"))},a.onerror=function(t){o(t)},e){case"arrayBuffer":a.readAsArrayBuffer(t);break;case"text":a.readAsText(t);break;case"binaryString":a.readAsBinaryString(t);break;case"dataURL":a.readAsDataURL(t);break;default:o(new Error('readAs param missing or unknown type "'.concat(e,'"')))}}))}},93572:function(t,e,r){r(21249),r(69600),r(26699),r(92222),r(69070),r(47941),r(82526),r(57327),r(41539),r(38880),r(89554),r(54747),r(49337),r(33321);function n(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function o(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?n(Object(r),!0).forEach((function(e){a(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):n(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function a(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}e.Z=function(t){var e=[];return t.map((function(t){for(var r=t.filename,n=r.split("."),a=n.pop(),i=n.join("."),u=r,c=0;e.includes(u);)c+=1,u="".concat(i,"_(").concat(c,").").concat(a);return e.includes(u)||e.push(u),o(o({},t),{},{uFilename:u})}))}},49965:function(t,e,r){r.d(e,{$b:function(){return f},Np:function(){return c},fD:function(){return l}});r(69070),r(47941),r(82526),r(57327),r(41539),r(38880),r(89554),r(54747),r(49337),r(33321),r(79753),r(41817),r(32165),r(66992),r(78783),r(33948),r(47042),r(68309),r(91038),r(74916);function n(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null==r)return;var n,o,a=[],i=!0,u=!1;try{for(r=r.call(t);!(i=(n=r.next()).done)&&(a.push(n.value),!e||a.length!==e);i=!0);}catch(t){u=!0,o=t}finally{try{i||null==r.return||r.return()}finally{if(u)throw o}}return a}(t,e)||function(t,e){if(!t)return;if("string"==typeof t)return o(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);"Object"===r&&t.constructor&&(r=t.constructor.name);if("Map"===r||"Set"===r)return Array.from(t);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return o(t,e)}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function o(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function a(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function i(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?a(Object(r),!0).forEach((function(e){u(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):a(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function u(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}var c=function(t,e){return i(i({},t),{},{sortIndex:e})},l=function(t){return i(i({},t),{},{sortIndex:void 0})},f=function(t){var e=t.sortBy;return function(t,r){if(!e)return 0;var o=n(e.split("_"),2),a=o[0],i=o[1],u=t[a],c=r[a],l="desc"===i?-1:1;return u&&c?u>c?l:u<c?-l:t.sortIndex<r.sortIndex?l:-l:0}}},30661:function(t,e,r){r.d(e,{IV:function(){return l},jW:function(){return f},zD:function(){return c},a1:function(){return u}});r(66992),r(41539),r(88674),r(78783),r(33948),r(69600),r(21249),r(74916),r(15306),r(73210);var n=r(41027),o=function(t){var e="\nThe following hash is missing in\nyour indexedDb:\n".concat(t,"\n\nEither you imported a debug dump\nor your browser decided to do a\ncleanup.\n\nThis image might be able to be\nrecovered if you have set up git\nor dropbox sync.\n").trim();return(0,n.Z)(e)},a=r(2738),i=r(59833),u=function(t){return r.e(705).then(r.t.bind(r,40705,23)).then((function(e){var n=e.default;return r.e(591).then(r.t.bind(r,99591,23)).then((function(e){var r=e.default,o=t.map((function(t){return t.replace(/ /gi,"")})).join("\n"),a=r.deflate(o,{to:"string",strategy:1,level:8}),u=n(a);return i.Rt.setItem(u,a).then((function(){return u}))}))}))},c=function(t,e,n){var u=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return t?r.e(591).then(r.t.bind(r,99591,23)).then((function(e){var r=e.default;return i.Rt.getItem(t).then((function(t){return r.inflate(t,{to:"string"}).split("\n")})).catch((function(){return"function"==typeof u&&u(t),n?[]:o(t)}))})).then((function(t){return e?(0,a.Z)(t,e):t})):Promise.resolve(null)},l=function(t){i.Rt.removeItem(t)},f=function(t){i.$0.removeItem(t)}},41027:function(t,e,r){r.d(e,{Z:function(){return f}});r(84944),r(33792),r(21249),r(74916),r(4723),r(66528),r(92222),r(79753),r(82526),r(41817),r(41539),r(32165),r(66992),r(78783),r(33948),r(91038),r(47042),r(68309),r(83710),r(39714),r(69600);function n(t){return function(t){if(Array.isArray(t))return o(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||function(t,e){if(!t)return;if("string"==typeof t)return o(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);"Object"===r&&t.constructor&&(r=t.constructor.name);if("Map"===r||"Set"===r)return Array.from(t);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return o(t,e)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function o(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}var a={"":"006666666600FFFF"," ":"FFFFFFFFFFFFFFFF",0:"FFDDAAAAAADDFFFF",1:"FFDD99DDDDDDFFFF",2:"FF99EEDDBB88FFFF",3:"FF99EE99EE99FFFF",4:"FFDDBBBB88EEFFFF",5:"FF88BB99EE99FFFF",6:"FFCCBB99AADDFFFF",7:"FF88EEDDBBBBFFFF",8:"FFDDAADDAADDFFFF",9:"FFDDAACCEE99FFFF",a:"FFDDAAAA88AAFFFF",b:"FF99AA99AA99FFFF",c:"FFCCBBBBBBCCFFFF",d:"FF99AAAAAA99FFFF",e:"FF88BB99BB88FFFF",f:"FF88BB99BBBBFFFF",g:"FFCCBBAAAACCFFFF",h:"FFAAAA88AAAAFFFF",i:"FF88DDDDDD88FFFF",j:"FF99DDDDDDBBFFFF",k:"FFAAAA99AAAAFFFF",l:"FFBBBBBBBB88FFFF",m:"FFAA888AAAAAFFFF",n:"FFAA8A888AAAFFFF",o:"FFDDAAAAAADDFFFF",p:"FF99AA99BBBBFFFF",q:"FFDDAAAAAACCFFFF",r:"FF99AA99AAAAFFFF",s:"FFCCBBDDEE99FFFF",t:"FF88DDDDDDDDFFFF",u:"FFAAAAAAAACCFFFF",v:"FFAAAAAAAADDFFFF",w:"FFAAAA8A88AAFFFF",x:"FFAAAADDAAAAFFFF",y:"FFAAAADDDDDDFFFF",z:"FF88EEDDBB88FFFF","ä":"AADDAAAA88AAFFFF","ö":"AADDAAAAAADDFFFF","ü":"AAAFAAAAAACCFFFF","ß":"FF99AA99AA99BBFF",".":"FFFFFFFFFFDDFFFF","!":"DDDDDDDDFFDDFFFF","?":"DDAAEEDDFFDDFFFF","-":"FFFFFF88FFFFFFFF",_:"FFFFFFFFFF88FFFF",":":"FFFFDDFFDDFFFFFF"},i=function(t){var e=[].concat(n(t.toString(10).toLowerCase()),[" "," "]),r=e.shift(),o=e.shift(),i=a[r]||a[""],u=a[o]||a[""];return n(Array(16)).map((function(t,e){return"".concat(i[e]).concat(u[e])})).join("")};function u(t){return function(t){if(Array.isArray(t))return c(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||function(t,e){if(!t)return;if("string"==typeof t)return c(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);"Object"===r&&t.constructor&&(r=t.constructor.name);if("Map"===r||"Set"===r)return Array.from(t);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return c(t,e)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function c(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}var l="FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFF\n",f=function(t){var e=[],r=t.split("\n").map((function(t){return t.match(/.{1,32}/g)})).flat().map((function(t){return t||""})).map((function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return t.padEnd(32," ")})).map((function(t){return t.match(/.{1,2}/g).map((function(t){return i(t)}))})).map((function(t){return[l,l].concat(u(t),[l,l])})).flat();for(e.push.apply(e,u(u(Array(40)).map((function(){return l})))),e.push.apply(e,u(r));e.length<360;)e.push(l);return e}},18417:function(t,e){e.Z=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"keep",r=t-("keep"===e?0:20);if(r<40)return!0;if(r>=320)return!0;switch(r%20){case 0:case 1:case 18:case 19:return!0;default:return!1}}},81451:function(t,e,r){r(57327),r(41539),r(34553);e.Z=function(t){return function(e){return e.filter((function(r,n){return e.findIndex((function(e){return e[t]===r[t]}))===n}))}}},31852:function(t,e,r){r(57327),r(41539),r(34553);e.Z=function(t){return t.filter((function(e,r){return t.findIndex((function(t){return t===e}))===r}))}}}]);