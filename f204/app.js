(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{102:function(e,t,n){},106:function(e,t,n){},107:function(e,t,n){},108:function(e,t,n){},109:function(e,t,n){},110:function(e,t,n){},112:function(e,t,n){},113:function(e,t,n){},114:function(e,t,n){},115:function(e,t,n){},116:function(e,t,n){},117:function(e,t,n){},118:function(e,t,n){},119:function(e,t,n){},120:function(e,t,n){},121:function(e,t,n){},122:function(e,t,n){},123:function(e,t,n){},124:function(e,t,n){},125:function(e,t,n){},127:function(e,t,n){},128:function(e,t,n){},129:function(e,t,n){},130:function(e,t,n){},131:function(e,t,n){},132:function(e,t,n){},133:function(e,t,n){},134:function(e,t,n){},135:function(e,t,n){},136:function(e,t,n){},137:function(e,t,n){},138:function(e,t,n){},139:function(e,t,n){},140:function(e,t,n){},141:function(e,t,n){},237:function(e,t,n){"use strict";n.r(t);var a=n(22),r=n(15),o=Object(a.b)((function(e){return{imageCount:e.images.length,pageSize:e.pageSize,selectedCount:e.imageSelection.length,filteredCount:Object(r.a)(e).length}}),(function(){return{}})),i=n(0),s=n.n(i),l=n(29),c=n.n(l),u=n(79),p=n(70),f=Object(a.b)((function(e){return{importQueueSize:e.importQueueSize}}),(function(){return{}})),m=n(69),h=n.n(m),d=(n(102),function(e){switch(e.name){case"download":return s.a.createElement("svg",{className:"svg",viewBox:"0 0 20 20"},s.a.createElement("path",{d:"M8 3v7H5s5 6 5 6c0 0 5-6 5-6h-3V3z"}),s.a.createElement("path",{d:"M5 15v2l10 0V15z"}));case"delete":return s.a.createElement("svg",{className:"svg",viewBox:"0 0 20 20"},s.a.createElement("path",{d:"M13 5v10h-1V5zM7 5v10H6V5zm4 0v10h-1V5zM9 5v10H8V5zM4 3v2h1v12h9V5h1V3h-4V2H8v1z"}));case"share":return s.a.createElement("svg",{className:"svg",viewBox:"0 0 20 20"},s.a.createElement("path",{d:"M14 3.5A2.5 2.5 0 0011.5 6a2.5 2.5 0 00.025.336l-3.85 1.812A2.5 2.5 0 006 7.5 2.5 2.5 0 003.5 10 2.5 2.5 0 006 12.5a2.5 2.5 0 001.676-.648l3.85 1.812A2.5 2.5 0 0011.5 14a2.5 2.5 0 002.5 2.5 2.5 2.5 0 002.5-2.5 2.5 2.5 0 00-2.5-2.5 2.5 2.5 0 00-1.836.807l-3.728-1.754A2.5 2.5 0 008.5 10a2.5 2.5 0 00-.066-.553l3.73-1.754A2.5 2.5 0 0014 8.5 2.5 2.5 0 0016.5 6 2.5 2.5 0 0014 3.5z"}));case"edit":return s.a.createElement("svg",{className:"svg",viewBox:"0 0 20 20"},s.a.createElement("path",{d:"M4 14.978v1.978L16 17v-2.022zM13.5 3l-8 8-1 3.5 3.5-1 8-8L13.5 3zm0 .8l.85.85-9.1 9.1L6 11.5l7.5-7.7z"}));case"reset":return s.a.createElement("svg",{className:"svg",viewBox:"0 0 20 20"},s.a.createElement("path",{d:"M6 10a4 4 0 104-4v2L4 5l6-3v2a6 6 0 11-6 6"}));case"checkmark":return s.a.createElement("svg",{className:"svg",viewBox:"0 0 20 20"},s.a.createElement("path",{d:"M15 5v10H5V5zM3 3v14h14V3z"}),s.a.createElement("path",{className:"tick",d:"M5.5 11l3 3 6-6.5L13 6l-4.5 5L7 9.5z"}));case"circle":return s.a.createElement("svg",{className:"svg",viewBox:"0 0 20 20"},s.a.createElement("circle",{r:"8",cx:"10",cy:"10"}));case"add":return s.a.createElement("svg",{className:"svg",viewBox:"0 0 20 20"},s.a.createElement("path",{d:"M8 2v6H2v4h6v6h4v-6h6V8h-6V2z"}));case"remove":return s.a.createElement("svg",{className:"svg",viewBox:"0 0 20 20"},s.a.createElement("path",{d:"M2 8v4h16V8z"}));case"save":return s.a.createElement("svg",{className:"svg",viewBox:"0 0 20 20"},s.a.createElement("path",{d:"M12 4v3h-2V4zM5 15v-4h10v4zm8-7H6l.01-4H4v12h12V6l-2-2h-1z"}));case"list":return s.a.createElement("svg",{className:"svg",viewBox:"0 0 40 40"},s.a.createElement("path",{d:"M6 6v4h28V6zm0 8v4h28v-4zm0 8v4h28v-4zm0 8v4h28V30z"}));case"1x":return s.a.createElement("svg",{className:"svg",viewBox:"0 0 40 40"},s.a.createElement("path",{d:"M5 5v6h6V5zm8 0v6h6V5zm8 0v6h6V5zm8 0v6h6V5zM5 13v6h6v-6zm8 0v6h6v-6zm8 0v6h6v-6zm8 0v6h6v-6zM5 21v6h6v-6zm8 0v6h6v-6zm8 0v6h6v-6zm8 0v6h6v-6zM5 29v6h6v-6zm8 0v6h6v-6zm8 0v6h6v-6zm8 0v6h6v-6z"}));case"2x":return s.a.createElement("svg",{className:"svg",viewBox:"0 0 40 40"},s.a.createElement("path",{d:"M22 6v12h12V6zm0 16v12h12V22zM6 6v12h12V6zm0 16v12h12V22z"}));case"3x":return s.a.createElement("svg",{className:"svg",viewBox:"0 0 40 40"},s.a.createElement("path",{d:"M30 30V10H10v20"}));case"4x":return s.a.createElement("svg",{className:"svg",viewBox:"0 0 40 40"},s.a.createElement("path",{d:"M34 34V6H6v28z"}));case"close":return s.a.createElement("svg",{className:"svg",viewBox:"0 0 40 40"},s.a.createElement("path",{d:"M7 3l12 17L7 37h2l11-15.584L31 37h2L21 20 33 3h-2L20 18.584 9 3H7z"}));case"fullscreen":return s.a.createElement("svg",{className:"svg",viewBox:"0 0 40 40"},s.a.createElement("path",{d:"M37 13h-2V9h-5V7h7zM3 13h2V9h5V7H3zm34 14h-2v4h-5v2h7zM3 27h2v4h5v2H3z"}));case"right":return s.a.createElement("svg",{className:"svg",viewBox:"0 0 40 40"},s.a.createElement("path",{d:"M17 3l12 17-12 17h-2l12-17L15 3z"}));case"left":return s.a.createElement("svg",{className:"svg",viewBox:"0 0 40 40"},s.a.createElement("path",{d:"M23 3L11 20l12 17h2L13 20 25 3z"}));case"burger":return s.a.createElement("svg",{className:"svg",viewBox:"0 0 40 40"},s.a.createElement("path",{d:"M2 6v4h36V6zm0 12v4h36v-4zm0 12v4h36v-4z"}));case"close-nav":return s.a.createElement("svg",{className:"svg",viewBox:"0 0 40 40"},s.a.createElement("path",{d:"M5.5 2.5l-3 3L17 20 2.5 34.5l3 3L20 23l14.5 14.5 3-3L23 20 37.5 5.5l-3-3L20 17z"}));case"filter":return s.a.createElement("svg",{className:"svg",viewBox:"0 0 40 40"},s.a.createElement("path",{d:"M34 10V6H6v4l12 12v12h4V22z"}));default:return null}});d.propTypes={name:c.a.string.isRequired},d.defaultProps={};var b=d;function y(e){return(y="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function g(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}function v(e,t){return(v=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function _(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=N(e);if(t){var r=N(this).constructor;n=Reflect.construct(a,arguments,r)}else n=a.apply(this,arguments);return E(this,n)}}function E(e,t){return!t||"object"!==y(t)&&"function"!=typeof t?S(e):t}function S(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function N(e){return(N=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var k=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&v(e,t)}(o,e);var t,n,a,r=_(o);function o(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,o),(t=r.call(this,e)).state={mobileNavOpen:!1},t.closeMobileNav=t.closeMobileNav.bind(S(t)),t}return t=o,(n=[{key:"closeMobileNav",value:function(){this.setState({mobileNavOpen:!1})}},{key:"render",value:function(){var e=this;return s.a.createElement("nav",{className:h()("navigation",{"navigation--mobile-open":this.state.mobileNavOpen})},s.a.createElement("button",{className:"navigation__burger-button",type:"button",onClick:function(){var t=!e.state.mobileNavOpen;e.setState({mobileNavOpen:t})}},s.a.createElement(b,{name:this.state.mobileNavOpen?"close-nav":"burger"})),s.a.createElement("ul",{className:"navigation__list"},s.a.createElement("li",{className:"navigation__entry"},s.a.createElement(u.b,{to:"/",activeClassName:"navigation__link--active",className:"navigation__link",exact:!0,onClick:this.closeMobileNav},"Home")),s.a.createElement("li",{className:"navigation__entry"},s.a.createElement(u.b,{to:"/gallery",activeClassName:"navigation__link--active",className:"navigation__link",exact:!0,onClick:this.closeMobileNav},"Gallery")),s.a.createElement("li",{className:"navigation__entry"},s.a.createElement(u.b,{to:"/import",activeClassName:"navigation__link--active",className:"navigation__link",exact:!0,onClick:this.closeMobileNav},"Import")),s.a.createElement("li",{className:"navigation__entry"},s.a.createElement(u.b,{to:"/palettes",activeClassName:"navigation__link--active",className:"navigation__link",exact:!0,onClick:this.closeMobileNav},"Palettes")),s.a.createElement("li",{className:"navigation__entry"},s.a.createElement(u.b,{to:"/settings",activeClassName:"navigation__link--active",className:"navigation__link",exact:!0,onClick:this.closeMobileNav},"Settings"))),this.props.importQueueSize>0?s.a.createElement("div",{className:"navigation__queuesize"},this.props.importQueueSize):null)}}])&&g(t.prototype,n),a&&g(t,a),o}(s.a.Component);k.propTypes={importQueueSize:c.a.number.isRequired},k.defaultProps={};var w=k,O=(n(106),f(w)),R=Object(a.b)((function(e){return{message:e.confirmation.message||null}}),(function(e){return{confirm:function(){e({type:"CONFIRM_CONFIRMATION"})},deny:function(){e({type:"DENY_CONFIRMATION"})}}})),j=Object(a.b)((function(){return{}}),(function(){return{}})),P=function(e){return s.a.createElement("div",{className:"buttons"},s.a.createElement("button",{className:"buttons__button buttons__button--deny",type:"button",onClick:e.deny},"Cancel"),s.a.createElement("button",{className:"buttons__button buttons__button--confirm",type:"button",onClick:e.confirm,autoFocus:!0},"Ok"))};P.propTypes={confirm:c.a.func.isRequired,deny:c.a.func.isRequired},P.defaultProps={};var C=P,T=(n(107),j(C)),x=function(e){return e.message?s.a.createElement("div",{className:"confirmation"},s.a.createElement("button",{type:"button",className:"confirmation__backdrop",onClick:e.deny}),s.a.createElement("div",{className:"confirmation__box"},s.a.createElement("div",{className:"confirmation__message"},e.message),s.a.createElement(T,{confirm:e.confirm,deny:e.deny}))):null};x.propTypes={message:c.a.string,confirm:c.a.func.isRequired,deny:c.a.func.isRequired},x.defaultProps={message:null};var I=x,q=(n(108),R(I)),D=n(12),F=Object(a.b)((function(e){var t,n;e.editImage.hashes?(t=e.editImage.palette,n=Object(D.a)(e,e.editImage.hashes,e.editImage.frame)):(t=e.palettes.find((function(t){return t.shortName===e.editImage.palette})),n=null);var a=e.windowDimensions.width<=480?e.windowDimensions.height:Math.min(800,e.windowDimensions.height);return{batch:e.editImage.batch,hash:e.editImage.hash,tags:e.editImage.tags,title:e.editImage.title,hashes:e.editImage.hashes,frame:e.editImage.frame,lockFrame:e.editImage.lockFrame||!1,palette:t,frames:n,height:a}}),(function(e){return{updateTitle:function(t){e({type:"UPDATE_EDIT_IMAGE",payload:{title:t,confirmed:!0}})},updatePalette:function(t,n){e({type:"UPDATE_EDIT_IMAGE",payload:{palette:t,confirmed:n}})},updateFrame:function(t){e({type:"UPDATE_EDIT_IMAGE",payload:{frame:t,confirmed:!0}})},updateFrameLock:function(t){e({type:"UPDATE_EDIT_IMAGE",payload:{lockFrame:t,confirmed:!0}})},updateTags:function(t,n){e({type:"UPDATE_EDIT_IMAGE",payload:{tag:n,mode:t,confirmed:!0}})},save:function(){e({type:"SAVE_EDIT_IMAGE"})},cancel:function(){e({type:"CANCEL_EDIT_IMAGE"})}}})),A=Object(a.b)((function(){return{}}),(function(){return{}})),z=n(14),M=n(16);function U(e){return(U="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function L(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}function B(e,t){return(B=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function G(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=H(e);if(t){var r=H(this).constructor;n=Reflect.construct(a,arguments,r)}else n=a.apply(this,arguments);return V(this,n)}}function V(e,t){return!t||"object"!==U(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function H(e){return(H=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var K=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&B(e,t)}(o,e);var t,n,a,r=G(o);function o(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,o),(t=r.call(this,e)).canvasRef=s.a.createRef(),t}return t=o,(n=[{key:"componentDidMount",value:function(){this.updateCanvasContent()}},{key:"componentDidUpdate",value:function(){this.updateCanvasContent()}},{key:"updateCanvasContent",value:function(){try{this.props.palette.palette?(new z.a).update(this.canvasRef.current,this.props.tiles,this.props.palette.palette,this.props.lockFrame):(new M.a).update(this.canvasRef.current,this.props.tiles,this.props.palette,this.props.lockFrame)}catch(e){console.error("error in GameBoyImage: ".concat(e.message))}}},{key:"render",value:function(){return s.a.createElement("canvas",{className:"gameboy-image",width:160,ref:this.canvasRef})}}])&&L(t.prototype,n),a&&L(t,a),o}(i.Component);K.propTypes={tiles:c.a.oneOfType([c.a.arrayOf(c.a.string),c.a.arrayOf(c.a.object)]).isRequired,palette:c.a.object.isRequired,lockFrame:c.a.bool.isRequired},K.defaultProps={};var W=K,J=(n(109),A(W)),X=Object(a.b)((function(){return{}}),(function(){return{}})),Y=Object(a.b)((function(){return{}}),(function(){return{}})),Z=n(25),Q=function(e){return s.a.createElement(s.a.Fragment,null,s.a.createElement("select",{className:"frame-select",value:e.frame,onChange:function(t){e.updateFrame(t.target.value)}},s.a.createElement("option",{value:""},"As imported / No frame"),Z.a.map((function(e){var t=e.id,n=e.name;return s.a.createElement("option",{key:t,value:t},n)}))),s.a.createElement("label",{className:h()("frame-select__check-label",{"frame-select__check-label--checked":e.lockFrame})},s.a.createElement("input",{type:"checkbox",className:"frame-select__checkbox",checked:e.lockFrame,onChange:function(t){var n=t.target;e.updateFrameLock(n.checked)}}),s.a.createElement(b,{name:"checkmark"}),s.a.createElement("span",{className:"frame-select__check-label-text"},"Palette does not affect frame")))};Q.propTypes={frame:c.a.string.isRequired,updateFrame:c.a.func.isRequired,updateFrameLock:c.a.func.isRequired,lockFrame:c.a.bool.isRequired},Q.defaultProps={};var $=Q,ee=(n(110),Y($)),te=Object(a.b)((function(){return{}}),(function(){return{}})),ne=n(111),ae=Object(a.b)((function(){return{}}),(function(){return{}})),re=n(231),oe=function(e){var t=e.domain,n=e.handle,a=(0,e.getHandleProps)(n.id),r=a.onKeyDown,o=a.onMouseDown,i=a.onTouchStart;return s.a.createElement("button",{role:"slider",type:"button","aria-valuemin":t.min,"aria-valuemax":t.max,"aria-valuenow":n.value,className:"color-slider__handle",style:{left:"".concat(n.percent,"%")},onKeyDown:r,onMouseDown:o,onTouchStart:i})};oe.propTypes={domain:c.a.array.isRequired,handle:c.a.shape({id:c.a.string.isRequired,value:c.a.number.isRequired,percent:c.a.number.isRequired}).isRequired,getHandleProps:c.a.func.isRequired},oe.defaultProps={};var ie=oe,se=function(e){var t=(0,e.getRailProps)(),n=t.onMouseDown,a=t.onTouchStart;return s.a.createElement("button",{type:"button",className:"color-slider__rail",onMouseDown:n,onTouchStart:a,tabIndex:"-1"},s.a.createElement("div",{className:"color-slider__rail-inner"}))};se.propTypes={getRailProps:c.a.func.isRequired};var le=se,ce=[0,255],ue=function(e){return s.a.createElement("div",{className:"color-slider","data-color":e.color},s.a.createElement("button",{className:"color-slider__button color-slider__button--reset",type:"button",onClick:function(){e.onChange([0,85,170,255])}},s.a.createElement(b,{name:"reset"})),s.a.createElement(re.c,{className:"color-slider__root",mode:2,step:4,domain:ce,onUpdate:e.onChange,onChange:e.onChange,values:e.values},s.a.createElement(re.b,null,(function(e){var t=e.getRailProps;return s.a.createElement(le,{getRailProps:t})})),s.a.createElement(re.a,null,(function(e){var t=e.handles,n=e.getHandleProps;return s.a.createElement("div",{className:"slider-handles"},t.map((function(e){return s.a.createElement(ie,{key:e.id,handle:e,domain:ce,getHandleProps:n})})))}))))};ue.propTypes={color:c.a.oneOf(["r","g","b","n"]).isRequired,onChange:c.a.func.isRequired,values:c.a.array.isRequired};var pe=ue,fe=(n(112),ae(pe));function me(e){return(me="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function he(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}function de(e,t){return(de=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function be(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=ge(e);if(t){var r=ge(this).constructor;n=Reflect.construct(a,arguments,r)}else n=a.apply(this,arguments);return ye(this,n)}}function ye(e,t){return!t||"object"!==me(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function ge(e){return(ge=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var ve=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&de(e,t)}(o,e);var t,n,a,r=be(o);function o(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,o),(t=r.call(this,e)).state=e.values,t.sendUpdate=Object(ne.debounce)(t.sendUpdate,150,!1),t}return t=o,(n=[{key:"change",value:function(e,t){var n,a,r;this.setState((r=t,(a=e)in(n={})?Object.defineProperty(n,a,{value:r,enumerable:!0,configurable:!0,writable:!0}):n[a]=r,n),this.sendUpdate)}},{key:"sendUpdate",value:function(){this.props.onChange(this.state,!0)}},{key:"render",value:function(){var e=this;return s.a.createElement("div",{className:"grey-select"},["r","g","b","n"].map((function(t){return s.a.createElement(fe,{key:"slider-".concat(t),color:t,values:e.state[t],onChange:function(n){e.change(t,n)}})})))}}])&&he(t.prototype,n),a&&he(t,a),o}(s.a.Component);ve.propTypes={values:c.a.object.isRequired,onChange:c.a.func.isRequired},ve.defaultProps={};var _e=ve,Ee=(n(113),te(_e)),Se=Object(a.b)((function(e){return{palettes:e.palettes}}),(function(){return{}}));function Ne(e){return(Ne="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function ke(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}function we(e,t){return(we=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Oe(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=je(e);if(t){var r=je(this).constructor;n=Reflect.construct(a,arguments,r)}else n=a.apply(this,arguments);return Re(this,n)}}function Re(e,t){return!t||"object"!==Ne(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function je(e){return(je=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var Pe=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&we(e,t)}(o,e);var t,n,a,r=Oe(o);function o(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,o),(t=r.call(this,e)).state={initiallySelected:e.value},t}return t=o,(n=[{key:"render",value:function(){var e=this;return s.a.createElement(s.a.Fragment,null,s.a.createElement("select",{className:"palette-select",value:this.props.value,onChange:function(t){e.props.onChange(t.target.value,!0),e.setState({initiallySelected:t.target.value})}},this.props.palettes.map((function(e){var t=e.shortName,n=e.name;return s.a.createElement("option",{key:t,value:t},n)}))),s.a.createElement("ul",{className:"fancy-palette-select"},this.props.palettes.map((function(t){var n=t.shortName,a=t.name,r=t.palette;return s.a.createElement("li",{key:n,className:h()("fancy-palette-select__entry",{"fancy-palette-select__entry--active":e.state.initiallySelected===n})},s.a.createElement("button",{type:"button",className:"fancy-palette-select__button",title:a,onClick:function(){e.props.onChange(n,!0),e.setState({initiallySelected:n})},onMouseEnter:function(){e.props.onChange(n,!1)},onMouseLeave:function(){e.props.onChange(e.state.initiallySelected)}},s.a.createElement("span",{className:"fancy-palette-select__color",style:{backgroundColor:r[0]}}),s.a.createElement("span",{className:"fancy-palette-select__color",style:{backgroundColor:r[1]}}),s.a.createElement("span",{className:"fancy-palette-select__color",style:{backgroundColor:r[2]}}),s.a.createElement("span",{className:"fancy-palette-select__color",style:{backgroundColor:r[3]}})))}))))}}])&&ke(t.prototype,n),a&&ke(t,a),o}(s.a.Component);Pe.propTypes={palettes:c.a.array.isRequired,value:c.a.string.isRequired,onChange:c.a.func.isRequired},Pe.defaultProps={};var Ce=Pe,Te=(n(114),Se(Ce)),xe=Object(a.b)((function(){return{}}),(function(){return{}})),Ie=n(18);function qe(e){return(qe="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function De(e){return function(e){if(Array.isArray(e))return Fe(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return Fe(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Fe(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Fe(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,a=new Array(t);n<t;n++)a[n]=e[n];return a}function Ae(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}function ze(e,t){return(ze=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Me(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=Le(e);if(t){var r=Le(this).constructor;n=Reflect.construct(a,arguments,r)}else n=a.apply(this,arguments);return Ue(this,n)}}function Ue(e,t){return!t||"object"!==qe(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Le(e){return(Le=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var Be=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&ze(e,t)}(o,e);var t,n,a,r=Me(o);function o(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,o),(t=r.call(this,e)).state={newTag:""},t}return t=o,(n=[{key:"addNewTag",value:function(e){e&&(this.props.updateTags("add",e),this.setState({newTag:""}))}},{key:"render",value:function(){var e=this,t=Object(Ie.a)([].concat(De(this.props.tags.initial),De(this.props.tags.add)));return s.a.createElement("ul",{className:"tags-select"},t.map((function(t){return s.a.createElement("li",{className:h()("tags-select__tag",{"tags-select__tag--add":e.props.tags.add.includes(t),"tags-select__tag--remove":e.props.tags.remove.includes(t)}),key:t},s.a.createElement("button",{type:"button",className:"tags-select__button tags-select__button--add",onClick:function(){return e.props.updateTags("add",t)}},s.a.createElement(b,{name:"add"})),s.a.createElement("button",{type:"button",className:"tags-select__button tags-select__button--remove",onClick:function(){return e.props.updateTags("remove",t)}},s.a.createElement(b,{name:"remove"})),s.a.createElement("span",{className:"tags-select__tag-name"},t))})),s.a.createElement("li",{className:"tags-select__tag tags-select__tag--input"},s.a.createElement("input",{type:"text",className:"tags-select__tag-name",onChange:function(t){var n=t.target;e.setState({newTag:n.value})},onBlur:function(t){var n=t.target;e.addNewTag(n.value)},onKeyUp:function(t){switch(t.key){case"Enter":e.addNewTag(t.target.value)}},value:this.state.newTag})))}}])&&Ae(t.prototype,n),a&&Ae(t,a),o}(s.a.Component);Be.propTypes={tags:c.a.shape({initial:c.a.array.isRequired,add:c.a.array.isRequired,remove:c.a.array.isRequired}).isRequired,updateTags:c.a.func.isRequired},Be.defaultProps={};var Ge=Be,Ve=(n(115),xe(Ge));function He(e){return(He="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Ke(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}function We(e,t){return(We=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Je(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=Ye(e);if(t){var r=Ye(this).constructor;n=Reflect.construct(a,arguments,r)}else n=a.apply(this,arguments);return Xe(this,n)}}function Xe(e,t){return!t||"object"!==He(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Ye(e){return(Ye=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var Ze=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&We(e,t)}(o,e);var t,n,a,r=Je(o);function o(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,o),(t=r.call(this,e)).state={tabIndex:0},t}return t=o,(n=[{key:"focusEvent",value:function(e){var t=this;return function(){t.setState({tabIndex:e})}}},{key:"render",value:function(){return s.a.createElement("div",{className:"edit-image-tabs"},s.a.createElement("ul",{className:"edit-image-tabs__list",style:{marginLeft:"-".concat(100*this.state.tabIndex,"%")}},s.a.createElement("li",{className:h()("edit-image-tabs__tab",{"edit-image-tabs__tab--active":0===this.state.tabIndex}),onFocus:this.focusEvent(0),onClick:this.focusEvent(0)},this.props.hashes?s.a.createElement(s.a.Fragment,null,s.a.createElement("button",{type:"button",className:"edit-image-tabs__button"},"Edit Greytones"),s.a.createElement(Ee,{values:this.props.palette,onChange:this.props.updatePalette})):s.a.createElement(s.a.Fragment,null,s.a.createElement("button",{type:"button",className:"edit-image-tabs__button"},"Select Palette"),s.a.createElement(Te,{value:this.props.palette.shortName,onChange:this.props.updatePalette}))),this.props.regularImage?s.a.createElement("li",{className:h()("edit-image-tabs__tab",{"edit-image-tabs__tab--active":1===this.state.tabIndex}),onFocus:this.focusEvent(1),onClick:this.focusEvent(1)},s.a.createElement("button",{type:"button",className:"edit-image-tabs__button"},"Select Frame"),s.a.createElement(ee,{updateFrame:this.props.updateFrame,updateFrameLock:this.props.updateFrameLock,frame:this.props.frame||"",lockFrame:this.props.lockFrame})):null,s.a.createElement("li",{className:h()("edit-image-tabs__tab",{"edit-image-tabs__tab--active":2===this.state.tabIndex}),onFocus:this.focusEvent(this.props.regularImage?2:1),onClick:this.focusEvent(this.props.regularImage?2:1)},s.a.createElement("button",{type:"button",className:"edit-image-tabs__button"},"Tags"),s.a.createElement(Ve,{updateTags:this.props.updateTags,tags:this.props.tags,batchTags:this.props.batchTags}))))}}])&&Ke(t.prototype,n),a&&Ke(t,a),o}(s.a.Component);Ze.propTypes={hashes:c.a.object,palette:c.a.object,frame:c.a.string,tags:c.a.shape({initial:c.a.array.isRequired,add:c.a.array.isRequired,remove:c.a.array.isRequired}).isRequired,batchTags:c.a.shape({initial:c.a.array.isRequired,add:c.a.array.isRequired,remove:c.a.array.isRequired}),regularImage:c.a.bool.isRequired,lockFrame:c.a.bool.isRequired,updatePalette:c.a.func.isRequired,updateTags:c.a.func.isRequired,updateFrame:c.a.func.isRequired,updateFrameLock:c.a.func.isRequired},Ze.defaultProps={hashes:null,batchTags:null,palette:null,frame:null};var Qe=Ze,$e=(n(116),X(Qe)),et=n(1);function tt(e){return(tt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function nt(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}function at(e,t){return(at=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function rt(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=it(e);if(t){var r=it(this).constructor;n=Reflect.construct(a,arguments,r)}else n=a.apply(this,arguments);return ot(this,n)}}function ot(e,t){return!t||"object"!==tt(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function it(e){return(it=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var st=document.querySelector("body"),lt=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&at(e,t)}(o,e);var t,n,a,r=rt(o);function o(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,o),(t=r.call(this,e)).state={tiles:null,loaded:!1,hash:e.hash},t.restoreScroll=window.scrollY,t}return t=o,a=[{key:"getDerivedStateFromProps",value:function(e,t){return e.hash===t.hash?t:{tiles:null,loaded:!1,hash:e.hash}}}],(n=[{key:"componentDidMount",value:function(){this.props.hash&&this.loadImage()}},{key:"componentDidUpdate",value:function(e){!this.props.hash||e.hash===this.props.hash&&e.frame===this.props.frame||this.loadImage()}},{key:"loadImage",value:function(){var e=this;this.props.hashes?Promise.all([Object(et.b)(this.props.hashes.r,this.props.frames.r),Object(et.b)(this.props.hashes.g,this.props.frames.g),Object(et.b)(this.props.hashes.b,this.props.frames.b),Object(et.b)(this.props.hashes.n,this.props.frames.n)]).then((function(t){e.setState({tiles:M.a.rgbnTiles(t),loaded:!0})})):Object(et.b)(this.props.hash,this.props.frame).then((function(t){e.setState({tiles:t,loaded:!0})}))}},{key:"applyOverlayScrolling",value:function(){!this.state.loaded&&st.classList.contains("has-overlay")&&(st.classList.remove("has-overlay"),window.scrollTo(0,this.restoreScroll)),this.state.loaded&&!st.classList.contains("has-overlay")&&(this.restoreScroll=window.scrollY,st.classList.add("has-overlay"))}},{key:"render",value:function(){var e=this;if(this.applyOverlayScrolling(),!this.state.loaded)return null;var t=this.props.palette?this.props.palette.palette:null,n=this.props.batch&&!(!this.props.tags.add.length&&!this.props.tags.remove.length),a=this.props.batch&&(this.props.batch.title||this.props.batch.palette||this.props.batch.frame||this.props.batch.lockFrame||n);return s.a.createElement("div",{className:"edit-image"},s.a.createElement("div",{className:"edit-image__backdrop"}),s.a.createElement("div",{className:"edit-image__box",style:{height:"".concat(this.props.height,"px")}},s.a.createElement("div",{className:"edit-image__box-content"},s.a.createElement("label",{className:"edit-image__header"},s.a.createElement("input",{className:"edit-image__header-edit",placeholder:"Add a title",value:this.props.title,onChange:function(t){e.props.updateTitle(t.target.value)}})),s.a.createElement(J,{tiles:this.state.tiles,palette:this.props.palette,lockFrame:this.props.lockFrame}),this.props.batch&&this.props.batch.selection&&this.props.batch.selection.length?s.a.createElement("div",{className:"edit-image__batch-warn",style:t?{borderLeftColor:t[1],borderTopColor:t[1],backgroundColor:t[2],borderRightColor:t[3],borderBottomColor:t[3],color:t[0]}:null},"You are editing ".concat(this.props.batch.selection.length," images"),a?s.a.createElement("p",{className:"edit-image__batch-update-list"},"Will update: ",[this.props.batch.title?"title":null,this.props.batch.palette?"palette":null,this.props.batch.frame?"frame":null,this.props.batch.lockFrame?"framePalette":null,n?"tags":null].filter(Boolean).join(", ")):null):null,s.a.createElement($e,{regularImage:360===this.state.tiles.length,lockFrame:this.props.lockFrame,hashes:this.props.hashes,palette:this.props.palette,frame:this.props.frame,tags:this.props.tags,updatePalette:this.props.updatePalette,updateFrame:this.props.updateFrame,updateFrameLock:this.props.updateFrameLock,updateTags:this.props.updateTags})),s.a.createElement(T,{confirm:this.props.save,deny:this.props.cancel})))}}])&&nt(t.prototype,n),a&&nt(t,a),o}(s.a.Component);lt.propTypes={batch:c.a.object,cancel:c.a.func.isRequired,hash:c.a.string,hashes:c.a.object,palette:c.a.object,lockFrame:c.a.bool.isRequired,frame:c.a.string,frames:c.a.object,save:c.a.func.isRequired,tags:c.a.shape({initial:c.a.array.isRequired,add:c.a.array.isRequired,remove:c.a.array.isRequired}),title:c.a.string,updatePalette:c.a.func.isRequired,updateTitle:c.a.func.isRequired,updateFrame:c.a.func.isRequired,updateFrameLock:c.a.func.isRequired,updateTags:c.a.func.isRequired,height:c.a.number.isRequired},lt.defaultProps={batch:null,title:null,hash:null,hashes:null,palette:null,tags:{initial:[],add:[],remove:[]},frame:null,frames:null};var ct=lt,ut=(n(117),F(ct)),pt=Object(a.b)((function(e){return{tiles:e.lineBuffer,palette:e.palettes.find((function(t){return t.shortName===e.activePalette}))}}),(function(){return{}})),ft=function(e){return s.a.createElement("div",{className:h()("live-image",{"live-image--receiving":e.tiles.length})},s.a.createElement(J,{palette:e.palette,tiles:e.tiles,lockFrame:!1}))};ft.propTypes={tiles:c.a.arrayOf(c.a.string).isRequired,palette:c.a.object.isRequired},ft.defaultProps={};var mt=ft,ht=(n(118),pt(mt)),dt=Object(a.b)((function(e){var t,n,a=Object(r.a)(e),o=a.find((function(t,n){return n===e.lightboxImage}));return o?(o.hashes?(t=o.palette,n=Object(D.a)(e,o.hashes,o.frame)):(t=e.palettes.find((function(e){return e.shortName===o.palette})),n=null),{hash:o.hash,title:o.title,created:o.created,hashes:o.hashes,frame:o.frame,isFullscreen:e.isFullscreen,palette:t,frames:n,index:e.lightboxImage||0,size:a.length||0,lockFrame:o.lockFrame||!1}):{isFullscreen:!1,lockFrame:!1,index:0,size:0}}),(function(e){return{close:function(){e({type:"SET_LIGHTBOX_IMAGE_INDEX",payload:null})},prev:function(){e({type:"LIGHTBOX_PREV"})},next:function(){e({type:"LIGHTBOX_NEXT"})},fullscreen:function(){e({type:"LIGHTBOX_FULLSCREEN"})}}})),bt=n(6),yt=n.n(bt),gt=n(4);function vt(e){return(vt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function _t(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}function Et(e,t){return(Et=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function St(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=kt(e);if(t){var r=kt(this).constructor;n=Reflect.construct(a,arguments,r)}else n=a.apply(this,arguments);return Nt(this,n)}}function Nt(e,t){return!t||"object"!==vt(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function kt(e){return(kt=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var wt=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Et(e,t)}(o,e);var t,n,a,r=St(o);function o(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,o),(t=r.call(this,e)).state={tiles:null,loaded:!1,hash:e.hash},t}return t=o,a=[{key:"getDerivedStateFromProps",value:function(e,t){return e.hash===t.hash?t:{tiles:null,loaded:!1,hash:e.hash}}}],(n=[{key:"componentDidUpdate",value:function(e){var t=this;e.hash!==this.props.hash&&this.props.hash&&(this.props.hashes?Promise.all([Object(et.b)(this.props.hashes.r,this.props.frames.r),Object(et.b)(this.props.hashes.g,this.props.frames.g),Object(et.b)(this.props.hashes.b,this.props.frames.b),Object(et.b)(this.props.hashes.n,this.props.frames.n)]).then((function(e){t.setState({tiles:M.a.rgbnTiles(e),loaded:!0})})):Object(et.b)(this.props.hash,this.props.frame).then((function(e){t.setState({tiles:e,loaded:!0})})))}},{key:"render",value:function(){return this.state.loaded?s.a.createElement("div",{className:"lightbox-image"},s.a.createElement("button",{type:"button",className:"lightbox-image__backdrop",onClick:this.props.close}),s.a.createElement("div",{className:"lightbox-image__box"},s.a.createElement("label",{className:"lightbox-image__title"},this.props.title),this.props.isFullscreen?null:s.a.createElement("button",{type:"button",className:"lightbox-image__button lightbox-image__button--fullscreen",onClick:this.props.fullscreen},s.a.createElement(b,{name:"fullscreen"})),s.a.createElement("button",{type:"button",className:"lightbox-image__button lightbox-image__button--close",onClick:this.props.close},s.a.createElement(b,{name:"close"})),s.a.createElement(J,{tiles:this.state.tiles,palette:this.props.palette,lockFrame:this.props.lockFrame}),s.a.createElement("div",{className:"lightbox-image__navigation"},this.props.index>0?s.a.createElement("button",{type:"button",className:"lightbox-image__button lightbox-image__button--left",onClick:this.props.prev},s.a.createElement(b,{name:"left"})):null,this.props.index<this.props.size-1?s.a.createElement("button",{type:"button",className:"lightbox-image__button lightbox-image__button--right",onClick:this.props.next},s.a.createElement(b,{name:"right"})):null),s.a.createElement("div",{className:"lightbox-image__created"},yt()(this.props.created,gt.a).format(gt.c)))):null}}])&&_t(t.prototype,n),a&&_t(t,a),o}(s.a.Component);wt.propTypes={created:c.a.string,hash:c.a.string,hashes:c.a.object,palette:c.a.object,frame:c.a.string,frames:c.a.object,lockFrame:c.a.bool.isRequired,title:c.a.string,close:c.a.func.isRequired,prev:c.a.func.isRequired,next:c.a.func.isRequired,fullscreen:c.a.func.isRequired,isFullscreen:c.a.bool.isRequired,index:c.a.number.isRequired,size:c.a.number.isRequired},wt.defaultProps={created:null,hash:null,hashes:null,palette:null,title:null,frame:null,frames:null};var Ot=wt,Rt=(n(119),dt(Ot)),jt=Object(a.b)((function(e){return{hashes:{r:e.rgbnImages.r,g:e.rgbnImages.g,b:e.rgbnImages.b,n:e.rgbnImages.n},frames:Object(D.a)(e,e.rgbnImages,null)}}),(function(){return{}})),Pt=Object(a.b)((function(e,t){var n=t.hash;return{isSelected:e.imageSelection.includes(n),canShare:e.canShare}}),(function(e,t){var n=t.hash,a=t.buttons;return{startDownload:a.includes("download")?function(){e({type:"START_DOWNLOAD",payload:n})}:null,deleteImage:a.includes("delete")?function(){e({type:"DELETE_IMAGE",payload:n})}:null,editImage:a.includes("edit")?function(){e({type:"EDIT_IMAGE",payload:n})}:null,shareImage:a.includes("share")?function(){e({type:"SHARE_IMAGE",payload:n})}:null,saveRGBNImage:a.includes("saveRGBNImage")?function(){e({type:"SAVE_RGBN_IMAGE",payload:n})}:null,updateImageToSelection:a.includes("select")?function(t){e("add"===t?{type:"IMAGE_SELECTION_ADD",payload:n}:{type:"IMAGE_SELECTION_REMOVE",payload:n})}:null}})),Ct=n(23),Tt=n.n(Ct);yt.a.extend(Tt.a);var xt=function(e){return s.a.createElement("div",{className:"gallery-image-buttons",onClick:function(e){e.stopPropagation()},role:"presentation"},e.updateImageToSelection?s.a.createElement("button",{type:"button",className:h()("gallery-image-buttons__button",{"gallery-image-buttons__button--unchecked":!e.isSelected,"gallery-image-buttons__button--checked":e.isSelected}),onClick:function(){return e.updateImageToSelection(e.isSelected?"remove":"add")}},s.a.createElement(b,{name:"checkmark"})):null,e.startDownload?s.a.createElement("button",{type:"button",className:"gallery-image-buttons__button",onClick:e.startDownload},s.a.createElement(b,{name:"download"})):null,e.deleteImage?s.a.createElement("button",{type:"button",className:"gallery-image-buttons__button",onClick:e.deleteImage},s.a.createElement(b,{name:"delete"})):null,e.editImage?s.a.createElement("button",{type:"button",className:"gallery-image-buttons__button",onClick:e.editImage},s.a.createElement(b,{name:"edit"})):null,e.saveRGBNImage?s.a.createElement("button",{type:"button",className:"gallery-image-buttons__button",onClick:e.saveRGBNImage},s.a.createElement(b,{name:"save"})):null,e.shareImage&&e.canShare?s.a.createElement("button",{type:"button",className:"gallery-image-buttons__button",onClick:e.shareImage},s.a.createElement(b,{name:"share"})):null)};xt.propTypes={canShare:c.a.bool.isRequired,deleteImage:c.a.func,editImage:c.a.func,isSelected:c.a.bool.isRequired,saveRGBNImage:c.a.func,shareImage:c.a.func,startDownload:c.a.func,updateImageToSelection:c.a.func},xt.defaultProps={deleteImage:null,editImage:null,saveRGBNImage:null,shareImage:null,startDownload:null,updateImageToSelection:null};var It=xt,qt=(n(120),Pt(It));function Dt(e){return(Dt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Ft(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}function At(e,t){return(At=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function zt(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=Ut(e);if(t){var r=Ut(this).constructor;n=Reflect.construct(a,arguments,r)}else n=a.apply(this,arguments);return Mt(this,n)}}function Mt(e,t){return!t||"object"!==Dt(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Ut(e){return(Ut=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var Lt=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&At(e,t)}(o,e);var t,n,a,r=zt(o);function o(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,o),(t=r.call(this,e)).canvasRef=s.a.createRef(),t.rgbnDecoder=new M.a,t}return t=o,(n=[{key:"componentDidMount",value:function(){this.updateCanvasContent()}},{key:"componentDidUpdate",value:function(e){JSON.stringify(e.hashes)===JSON.stringify(this.props.hashes)&&JSON.stringify(e.frames)===JSON.stringify(this.props.frames)||this.updateCanvasContent()}},{key:"updateCanvasContent",value:function(){var e=this;Promise.all([Object(et.b)(this.props.hashes.r,this.props.frames.r),Object(et.b)(this.props.hashes.g,this.props.frames.g),Object(et.b)(this.props.hashes.b,this.props.frames.b),Object(et.b)(this.props.hashes.n,this.props.frames.n)]).then((function(t){if(e.canvasRef.current){var n=M.a.rgbnTiles(t);e.rgbnDecoder.update(e.canvasRef.current,n,gt.d,!1)}}))}},{key:"render",value:function(){var e=this.props.hashes.r||this.props.hashes.g||this.props.hashes.b||this.props.hashes.n;return s.a.createElement("div",{className:h()("rgbn-image",{"rgbn-image--has-tiles":e})},e?s.a.createElement("canvas",{width:160,ref:this.canvasRef}):null,s.a.createElement(qt,{hash:"newRGBN",buttons:["saveRGBNImage"]}))}}])&&Ft(t.prototype,n),a&&Ft(t,a),o}(i.Component);Lt.propTypes={hashes:c.a.object,frames:c.a.object},Lt.defaultProps={hashes:null,frames:null};var Bt=Lt,Gt=(n(121),jt(Bt)),Vt=Object(a.b)((function(e){return{socketUrl:e.socketUrl,printerUrl:e.printerUrl,exportScaleFactors:e.exportScaleFactors,pageSize:e.pageSize}}),(function(e){return{updateSocketUrl:function(t){e({type:"SET_SOCKET_URL",payload:t})},updatePrinterUrl:function(t){e({type:"SET_PRINTER_URL",payload:t})},setPageSize:function(t){e({type:"SET_PAGESIZE",payload:t})},exportSettings:function(t){e({type:"SETTINGS_EXPORT",payload:t})},changeExportScaleFactors:function(t,n){e({type:"UPDATE_EXPORT_SCALE_FACTORS",payload:{factor:t,checked:n}})}}})),Ht=Object(a.b)((function(e){return{socketState:e.socketState}}),(function(){return{}})),Kt=function(e){return s.a.createElement("div",{className:h()("socketstate-indicator",{"socketstate-indicator--closed":e.socketState===WebSocket.CLOSED,"socketstate-indicator--closing":e.socketState===WebSocket.CLOSING,"socketstate-indicator--open":e.socketState===WebSocket.OPEN,"socketstate-indicator--connecting":e.socketState===WebSocket.CONNECTING})})};Kt.propTypes={socketState:c.a.number.isRequired},Kt.defaultProps={};var Wt=Kt,Jt=(n(122),Ht(Wt)),Xt=n(8),Yt=n(11);function Zt(e){return(Zt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Qt(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}function $t(e,t){return($t=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function en(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=nn(e);if(t){var r=nn(this).constructor;n=Reflect.construct(a,arguments,r)}else n=a.apply(this,arguments);return tn(this,n)}}function tn(e,t){return!t||"object"!==Zt(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function nn(e){return(nn=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var an=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&$t(e,t)}(o,e);var t,n,a,r=en(o);function o(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,o),(t=r.call(this,e)).state={sync:!0,socketUrl:e.socketUrl,printerUrl:e.printerUrl,pageSize:e.pageSize},t.env=Object(Yt.a)(),t}return t=o,a=[{key:"getDerivedStateFromProps",value:function(e,t){return{printerUrl:t.sync?Object(Xt.a)(e.printerUrl,"http"):t.printerUrl,socketUrl:t.sync?Object(Xt.a)(e.socketUrl,"ws"):t.socketUrl,sync:t.sync,pageSize:t.sync?e.pageSize:t.pageSize}}}],(n=[{key:"render",value:function(){var e=this;return s.a.createElement("div",{className:"settings"},s.a.createElement("div",{className:"settings__inputgroup"},s.a.createElement("label",{htmlFor:"settings-pagesize",className:"settings__label"},"Page size",s.a.createElement("span",{className:h()("settings__note",{"settings__note--warn":!this.props.pageSize})},"(set to 0 to disable pagination - might cause performance issues on large sets of images)")),s.a.createElement("input",{id:"settings-pagesize",className:"settings__input",type:"number",min:"0",value:this.state.pageSize,onChange:function(t){var n=t.target;e.setState({sync:!1,pageSize:n.value})},onBlur:function(){e.props.setPageSize(parseInt(e.state.pageSize,10)||0),e.setState({sync:!0})}})),s.a.createElement("div",{className:"settings__inputgroup"},s.a.createElement("div",{className:"settings__label"},"Image export dimensions"),[1,2,3,4,6,8,10].map((function(t){return s.a.createElement("label",{key:t,className:h()("settings__label-check",{"settings__label-check--selected":e.props.exportScaleFactors.includes(t)}),title:"".concat(160*t,"×").concat(144*t)},"".concat(t,"×"),s.a.createElement("input",{type:"checkbox",checked:e.props.exportScaleFactors.includes(t),onChange:function(n){var a=n.target;e.props.changeExportScaleFactors(t,a.checked)}}))}))),"webpack-dev"!==this.env.env?null:s.a.createElement(s.a.Fragment,null,s.a.createElement("div",{className:"settings__inputgroup"},s.a.createElement("label",{htmlFor:"settings-socket-url",className:"settings__label"},"Remote Socket URL",s.a.createElement(Jt,null)),s.a.createElement("input",{id:"settings-socket-url",className:"settings__input",value:this.state.socketUrl,onChange:function(t){var n=t.target;e.setState({sync:!1,socketUrl:n.value})},onKeyUp:function(t){switch(t.key){case"Enter":e.props.updateSocketUrl(e.state.socketUrl),e.setState({sync:!0});break;case"Escape":e.setState({socketUrl:e.props.socketUrl,sync:!0})}}}),s.a.createElement("button",{type:"button",className:"settings__button",onClick:function(){e.setState({sync:!0}),e.props.updateSocketUrl(e.state.socketUrl),e.setState({sync:!0})}},"Connect")),s.a.createElement("div",{className:"settings__inputgroup"},s.a.createElement("label",{htmlFor:"settings-printer-url",className:"settings__label"},"Printer URL"),s.a.createElement("input",{id:"settings-printer-url",className:"settings__input",value:this.state.printerUrl,onChange:function(t){var n=t.target;e.setState({sync:!1,printerUrl:n.value})},onBlur:function(){e.props.updatePrinterUrl(e.state.printerUrl),e.setState({sync:!0})},onKeyUp:function(t){switch(t.key){case"Enter":e.props.updatePrinterUrl(e.state.printerUrl),e.setState({sync:!0});break;case"Escape":e.setState({printerUrl:e.props.printerUrl,sync:!0})}}}))),s.a.createElement("div",{className:"settings__inputgroup settings__buttongroup"},s.a.createElement("button",{type:"button",className:"settings__button",onClick:function(){return e.props.exportSettings("debug")}},"Export debug settings"),s.a.createElement("button",{type:"button",className:"settings__button",onClick:function(){return e.props.exportSettings("settings")}},"Export settings"),s.a.createElement("button",{type:"button",className:"settings__button",onClick:function(){return e.props.exportSettings("full")}},"Export everything (including images)")))}}])&&Qt(t.prototype,n),a&&Qt(t,a),o}(s.a.Component);an.propTypes={changeExportScaleFactors:c.a.func.isRequired,exportScaleFactors:c.a.array.isRequired,printerUrl:c.a.string.isRequired,socketUrl:c.a.string.isRequired,updateSocketUrl:c.a.func.isRequired,updatePrinterUrl:c.a.func.isRequired,pageSize:c.a.number.isRequired,setPageSize:c.a.func.isRequired,exportSettings:c.a.func.isRequired},an.defaultProps={};var rn=an,on=(n(123),Vt(rn)),sn=Object(a.b)((function(e){return{palettes:e.palettes}}),(function(){return{}})),ln=Object(a.b)((function(e,t){var n=t.shortName;return{isActive:e.activePalette===n}}),(function(e,t){var n=t.shortName;return{setActive:function(){e({type:"PALETTE_SET_ACTIVE",payload:n})}}})),cn=function(e){return s.a.createElement("li",{className:h()("palette",{"palette--active":e.isActive}),style:{backgroundImage:"linear-gradient(to right, ".concat(e.palette[0]).concat("36"," 0%, ").concat(e.palette[1]).concat("36"," 33.3%, ").concat(e.palette[2]).concat("36"," 66.6%, ").concat(e.palette[3]).concat("36"," 100%)")}},s.a.createElement("button",{onClick:function(){e.setActive()},className:"palette__button",type:"button"},s.a.createElement("div",{className:"palette__name"},e.name,s.a.createElement("span",{className:"palette__shortname"},e.shortName)),s.a.createElement("div",{className:"palette__colors"},s.a.createElement("div",{className:"palette__color",style:{backgroundColor:e.palette[0]},title:e.palette[0]}," "),s.a.createElement("div",{className:"palette__color",style:{backgroundColor:e.palette[1]},title:e.palette[1]}," "),s.a.createElement("div",{className:"palette__color",style:{backgroundColor:e.palette[2]},title:e.palette[2]}," "),s.a.createElement("div",{className:"palette__color",style:{backgroundColor:e.palette[3]},title:e.palette[3]}," "))))};cn.propTypes={shortName:c.a.string.isRequired,name:c.a.string.isRequired,isActive:c.a.bool.isRequired,setActive:c.a.func.isRequired,palette:c.a.arrayOf(c.a.string).isRequired},cn.defaultProps={};var un=cn,pn=(n(124),ln(un)),fn=function(e){return s.a.createElement("ul",{className:"palettes"},e.palettes.map((function(e){return s.a.createElement(pn,{key:e.shortName,name:e.name,shortName:e.shortName,palette:e.palette})})))};fn.propTypes={palettes:c.a.array.isRequired},fn.defaultProps={};var mn=fn,hn=(n(125),sn(mn)),dn=Object(a.b)((function(e){return{dumpCount:e.printerData.dumps?e.printerData.dumps.length:0}}),(function(e){return{importPlainText:function(t){e({type:"IMPORT_PLAIN_TEXT",payload:t})},importFile:function(t){e({type:"IMPORT_FILE",payload:t})},checkPrinter:function(){e({type:"PRINTER_QUERY"})},downloadPrinter:function(){e({type:"PRINTER_DOWNLOAD"})},clearPrinter:function(){e({type:"PRINTER_CLEAR"})}}})),bn=Object(a.b)((function(e){return{printerData:e.printerData,printerUrl:e.printerUrl}}),(function(){return{}})),yn=n(126),gn=n.n(yn),vn=function(e){return e.printerData.fs&&e.printerData.dumps?s.a.createElement("div",{className:"printer-report"},s.a.createElement("table",{className:"printer-report__table"},s.a.createElement("thead",null,s.a.createElement("tr",null,s.a.createElement("th",{className:"printer-report__label printer-report__head"},"Printer Filesystem"),s.a.createElement("th",{className:"printer-report__value printer-report__head printer-report__value--url"},e.printerUrl))),s.a.createElement("tbody",null,s.a.createElement("tr",null,s.a.createElement("td",{className:"printer-report__label"},"Total"),s.a.createElement("td",{className:"printer-report__value"},gn()(e.printerData.fs.total))),s.a.createElement("tr",null,s.a.createElement("td",{className:"printer-report__label"},"Used"),s.a.createElement("td",{className:"printer-report__value"},gn()(e.printerData.fs.used))),s.a.createElement("tr",null,s.a.createElement("td",{className:"printer-report__label"},"Free"),s.a.createElement("td",{className:"printer-report__value"},"".concat(Math.max(0,e.printerData.fs.maximages-e.printerData.dumps.length)," images"))),s.a.createElement("tr",null,s.a.createElement("td",{className:"printer-report__label"},"Images"),s.a.createElement("td",{className:"printer-report__value"},e.printerData.dumps.length))))):null};vn.propTypes={printerData:c.a.shape({fs:c.a.shape({dumpcount:c.a.number,maximages:c.a.number,total:c.a.number,used:c.a.number}),dumps:c.a.arrayOf(c.a.string)}).isRequired,printerUrl:c.a.string.isRequired},vn.defaultProps={};var _n=vn,En=(n(127),bn(_n));function Sn(e){return(Sn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Nn(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}function kn(e,t){return(kn=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function wn(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=Rn(e);if(t){var r=Rn(this).constructor;n=Reflect.construct(a,arguments,r)}else n=a.apply(this,arguments);return On(this,n)}}function On(e,t){return!t||"object"!==Sn(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Rn(e){return(Rn=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var jn=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&kn(e,t)}(i,e);var t,a,r,o=wn(i);function i(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),(t=o.call(this,e)).fileInputRef=s.a.createRef(),t.state={text:""},t.env=Object(Yt.a)(),t}return t=i,(a=[{key:"componentDidMount",value:function(){var e=this;n.e(1).then(n.bind(null,235)).then((function(t){var n=t.default;e.setState({text:n.join("\n")})}))}},{key:"render",value:function(){var e=this;return s.a.createElement("div",{className:"import"},"esp8266"!==this.env.env?null:s.a.createElement("div",{className:"import__inputgroup import__buttongroup"},s.a.createElement("button",{type:"button",className:"import__button import__button",onClick:this.props.checkPrinter},"Check Printer"),s.a.createElement("button",{type:"button",className:"import__button import__button",disabled:0===this.props.dumpCount,onClick:this.props.downloadPrinter},"Download ".concat(this.props.dumpCount?this.props.dumpCount:""," Dumps")),s.a.createElement("button",{type:"button",className:"import__button import__button",disabled:0===this.props.dumpCount,onClick:this.props.clearPrinter},"Clear Printer")),s.a.createElement(En,null),s.a.createElement("div",{className:"import__inputgroup"},s.a.createElement("label",{htmlFor:"import-file",className:"import__label"},"Select file for import"),s.a.createElement("input",{id:"import-file",className:"import__input",type:"file",onChange:function(t){var n=t.target;n.files&&1===n.files.length&&e.props.importFile(n)},ref:this.fileInputRef}),s.a.createElement("label",{htmlFor:"import-file",className:"import__button import__button--label"},"Select")),s.a.createElement("div",{className:"import__inputgroup import__inputgroup--column"},s.a.createElement("label",{htmlFor:"import-plaintext",className:"import__label"},"Paste your plaintext"),s.a.createElement("textarea",{id:"import-plaintext",className:"import__data",value:this.state.text,onChange:function(t){var n=t.target;e.setState({text:n.value})}}),s.a.createElement("button",{className:"import__button",type:"button",onClick:function(){e.props.importPlainText(e.state.text)}},"Import")))}}])&&Nn(t.prototype,a),r&&Nn(t,r),i}(s.a.Component);jn.propTypes={dumpCount:c.a.number.isRequired,importPlainText:c.a.func.isRequired,importFile:c.a.func.isRequired,checkPrinter:c.a.func.isRequired,downloadPrinter:c.a.func.isRequired,clearPrinter:c.a.func.isRequired},jn.defaultProps={};var Pn=jn,Cn=(n(128),dn(Pn)),Tn=Object(a.b)((function(e,t){var n=t.page*e.pageSize;return{images:Object(r.a)(e).splice(n,e.pageSize||1/0),indexOffset:n,currentView:e.galleryView}}),(function(){return{}})),xn=Object(a.b)((function(e,t){var n,a,r=t.hash,o=e.images.find((function(e){return e.hash===r}));return o.hashes?(n=o.palette,a=Object(D.a)(e,o.hashes,o.frame)):(n=e.palettes.find((function(e){return e.shortName===o.palette})),a=null),{title:o.title,created:o.created,index:o.index,frame:o.frame,hashes:o.hashes,tags:o.tags,isSelected:e.imageSelection.includes(r),palette:n,frames:a,lockFrame:o.lockFrame||!1}}),(function(e,t){var n=t.index,a=t.hash;return{setLightboxImageIndex:function(){e({type:"SET_LIGHTBOX_IMAGE_INDEX",payload:n})},updateImageSelection:function(t,n,r){e(n?{type:"IMAGE_SELECTION_SHIFTCLICK",payload:a,page:r}:"add"===t?{type:"IMAGE_SELECTION_ADD",payload:a}:{type:"IMAGE_SELECTION_REMOVE",payload:a})}}}));var In=Object(a.b)((function(e,t){var n=t.hash;return{isR:e.rgbnImages.r===n,isG:e.rgbnImages.g===n,isB:e.rgbnImages.b===n,isN:e.rgbnImages.n===n}}),(function(e,t){return{updateRGBN:function(n,a){var r,o,i;e({type:"UPDATE_RGBN_PART",payload:(r={},o=n,i=a?t.hash:"",o in r?Object.defineProperty(r,o,{value:i,enumerable:!0,configurable:!0,writable:!0}):r[o]=i,r)})}}})),qn=[{propKey:"isR",cssModifier:"red",updateKey:"r"},{propKey:"isG",cssModifier:"green",updateKey:"g"},{propKey:"isB",cssModifier:"blue",updateKey:"b"},{propKey:"isN",cssModifier:"normal",updateKey:"n"}],Dn=function(e){return s.a.createElement("div",{className:"rgbn-select",onClick:function(e){e.stopPropagation()},role:"presentation"},qn.map((function(t){var n=t.propKey,a=t.cssModifier,r=t.updateKey;return s.a.createElement("button",{type:"button",key:n,className:h()("rgbn-select__button rgbn-select__button--".concat(a),{"rgbn-select__button--selected":e[n]}),onClick:function(){e.updateRGBN(r,!e[n])}},s.a.createElement(b,{name:"circle"}))})))};Dn.propTypes={isR:c.a.bool.isRequired,isG:c.a.bool.isRequired,isB:c.a.bool.isRequired,isN:c.a.bool.isRequired,updateRGBN:c.a.func.isRequired},Dn.defaultProps={};var Fn=Dn,An=(n(129),In(Fn));function zn(e){return(zn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Mn(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}function Un(e,t){return(Un=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Ln(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=Vn(e);if(t){var r=Vn(this).constructor;n=Reflect.construct(a,arguments,r)}else n=a.apply(this,arguments);return Bn(this,n)}}function Bn(e,t){return!t||"object"!==zn(t)&&"function"!=typeof t?Gn(e):t}function Gn(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Vn(e){return(Vn=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}yt.a.extend(Tt.a);var Hn=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Un(e,t)}(o,e);var t,n,a,r=Ln(o);function o(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,o),(t=r.call(this,e)).state={tiles:null},t.handleCellClick=t.handleCellClick.bind(Gn(t)),t}return t=o,(n=[{key:"componentDidMount",value:function(){var e=this;this.props.hashes?Promise.all([Object(et.b)(this.props.hashes.r,this.props.frames.r),Object(et.b)(this.props.hashes.g,this.props.frames.g),Object(et.b)(this.props.hashes.b,this.props.frames.b),Object(et.b)(this.props.hashes.n,this.props.frames.n)]).then((function(t){e.setState({tiles:M.a.rgbnTiles(t)})})):Object(et.b)(this.props.hash,this.props.frame).then((function(t){e.setState({tiles:t})}))}},{key:"componentDidUpdate",value:function(e){var t=this;e.frame===this.props.frame&&JSON.stringify(e.frames)===JSON.stringify(this.props.frames)||(this.props.hashes?Promise.all([Object(et.b)(this.props.hashes.r,this.props.frames.r),Object(et.b)(this.props.hashes.g,this.props.frames.g),Object(et.b)(this.props.hashes.b,this.props.frames.b),Object(et.b)(this.props.hashes.n,this.props.frames.n)]).then((function(e){t.setState({tiles:M.a.rgbnTiles(e)})})):Object(et.b)(this.props.hash,this.props.frame).then((function(e){t.setState({tiles:e})})))}},{key:"getDateText",value:function(){return this.props.created?yt()(this.props.created,gt.a).format(gt.c):null}},{key:"handleCellClick",value:function(e){e.ctrlKey||e.shiftKey?(e.preventDefault(),this.props.updateImageSelection(this.props.isSelected?"remove":"add",e.shiftKey,this.props.page)):this.props.setLightboxImageIndex()}},{key:"renderDefault",value:function(){return s.a.createElement("li",{className:h()("gallery-image",{"gallery-image--selected":this.props.isSelected}),onClick:this.handleCellClick,role:"presentation"},s.a.createElement("div",{className:"gallery-image__image"},this.state.tiles?s.a.createElement(J,{lockFrame:this.props.lockFrame,tiles:this.state.tiles,palette:this.props.palette}):null),this.props.title?s.a.createElement("span",{className:"gallery-image__title"},this.props.title):null,s.a.createElement("span",{className:"gallery-image__created"},this.getDateText()),s.a.createElement("ul",{className:"gallery-list-image__tags"},this.props.tags.map((function(e){return s.a.createElement("li",{key:e,title:e,className:"gallery-list-image__tag"},e)}))),s.a.createElement(qt,{hash:this.props.hash,buttons:["select","download","delete","edit","share"]}))}},{key:"renderList",value:function(){return s.a.createElement("tr",{className:h()("gallery-list-image",{"gallery-list-image--selected":this.props.isSelected}),onClick:this.handleCellClick,role:"presentation"},s.a.createElement("td",{className:"gallery-list-image__cell-image"},s.a.createElement("div",{className:"gallery-list-image__image"},this.state.tiles?s.a.createElement(J,{lockFrame:this.props.lockFrame,tiles:this.state.tiles,palette:this.props.palette}):null)),s.a.createElement("td",{className:"gallery-list-image__cell-index"},s.a.createElement("div",{className:"gallery-list-image__index"},this.props.index)),s.a.createElement("td",{className:"gallery-list-image__cell-description"},s.a.createElement("div",{className:"gallery-list-image__description"},s.a.createElement("span",{className:"gallery-list-image__title"},this.props.title),s.a.createElement("span",{className:"gallery-list-image__created"},this.getDateText()))),s.a.createElement("td",{className:"gallery-list-image__cell-rgbn"},this.props.hashes?null:s.a.createElement(An,{hash:this.props.hash})),s.a.createElement("td",{className:"gallery-list-image__cell-buttons"},s.a.createElement(qt,{hash:this.props.hash,buttons:["select","download","delete","edit"]})))}},{key:"render",value:function(){return"default"===this.props.type?this.renderDefault():this.renderList()}}])&&Mn(t.prototype,n),a&&Mn(t,a),o}(s.a.Component);Hn.propTypes={created:c.a.string,hash:c.a.string.isRequired,hashes:c.a.object,palette:c.a.object.isRequired,frame:c.a.string,frames:c.a.object,lockFrame:c.a.bool.isRequired,title:c.a.string.isRequired,tags:c.a.arrayOf(c.a.string).isRequired,setLightboxImageIndex:c.a.func.isRequired,type:c.a.oneOf(["list","default"]).isRequired,index:c.a.number.isRequired,isSelected:c.a.bool.isRequired,updateImageSelection:c.a.func.isRequired,page:c.a.number.isRequired},Hn.defaultProps={created:null,hashes:null,frame:null,frames:null};var Kn=Hn,Wn=(n(130),xn(Kn)),Jn=Object(a.b)((function(){return{}}),(function(){return{}})),Xn=Object(a.b)((function(e){return{currentView:e.galleryView}}),(function(e){return{updateView:function(t){e({type:"SET_CURRENT_GALLERY_VIEW",payload:t})}}})),Yn=["list","1x","2x","3x","4x"],Zn=function(e){return s.a.createElement("ul",{className:"gallery-view-select"},Yn.map((function(t){return s.a.createElement("li",{key:t,className:h()("gallery-view-select__view",{"gallery-view-select__view--selected":e.currentView===t})},s.a.createElement("button",{type:"button",onClick:function(){e.updateView(t)}},s.a.createElement(b,{name:t})))})))};Zn.propTypes={currentView:c.a.string.isRequired,updateView:c.a.func.isRequired},Zn.defaultProps={};var Qn=Zn,$n=(n(131),Xn(Qn)),ea=Object(a.b)((function(e){return{totalPages:e.pageSize?Math.ceil(Object(r.a)(e).length/e.pageSize):0}}),(function(){return{}})),ta=Object(a.b)((function(){return{}}),(function(){return{}})),na=function(e){return s.a.createElement("li",{className:e.className},s.a.createElement(u.b,{className:"pagination__link",to:"/gallery/page/".concat(e.page+1),disabled:e.disabled,title:e.title},e.children))};na.propTypes={children:c.a.node.isRequired,className:c.a.string,disabled:c.a.bool,page:c.a.number.isRequired,title:c.a.string.isRequired},na.defaultProps={className:null,disabled:!1};var aa=na,ra=(n(132),ta(aa));function oa(e){return function(e){if(Array.isArray(e))return ia(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return ia(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return ia(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ia(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,a=new Array(t);n<t;n++)a[n]=e[n];return a}var sa=function(e){if(e.totalPages<2)return null;var t=oa(new Array(e.totalPages)).map((function(e,t){return t})),n=e.page,a=t.map((function(e){switch(e){case 0:case n-1:case n:case n+1:case t.length-1:return s.a.createElement(ra,{key:e,page:e,className:h()("pagination__list-item pagination__list-item--page",{"pagination__list-item--page--active":e===n}),title:"To page ".concat(e+1),disabled:e===n},e+1);case n-2:case n+2:return s.a.createElement("li",{key:e,className:"pagination__list-item pagination__list-item--ellipsis"});default:return null}}));return n>0&&a.unshift(s.a.createElement(ra,{key:"back",className:"pagination__list-item pagination__list-item--prevnext pagination__list-item--prevnext-prev",title:"To previous page",disabled:n<1,page:n-1},s.a.createElement(b,{name:"left"}))),n<t.length-1&&a.push(s.a.createElement(ra,{key:"next",className:"pagination__list-item pagination__list-item--prevnext",title:"To next page",disabled:n>=t.length-1,page:n+1},s.a.createElement(b,{name:"right"}))),s.a.createElement("ul",{className:"pagination"},a.filter(Boolean))};sa.propTypes={totalPages:c.a.number.isRequired,page:c.a.number.isRequired};var la=sa,ca=(n(133),ea(la)),ua=Object(a.b)((function(e,t){var n=t.page*e.pageSize,a=!!Object(r.a)(e).splice(n,e.pageSize||1/0).find((function(t){var n=t.hash;return!e.imageSelection.includes(n)}));return{enabled:e.imageSelection.length>0,hasUnselected:a}}),(function(e){return{batchTask:function(t,n){e({type:"BATCH_TASK",payload:t,page:n})},filter:function(){e({type:"SHOW_FILTERS"})}}})),pa=["download","delete","edit"],fa=function(e){return s.a.createElement("ul",{className:"batch-buttons"},s.a.createElement("li",{className:"batch-buttons__action batch-buttons__action--enabled"},s.a.createElement("button",{type:"button",onClick:e.filter},s.a.createElement(b,{name:"filter"}))),s.a.createElement("li",{className:h()("batch-buttons__action batch-buttons__action--enabled",{"batch-buttons__action--has-unselected":e.hasUnselected})},s.a.createElement("button",{type:"button",onClick:function(){return e.batchTask(e.hasUnselected?"checkall":"uncheckall",e.page)}},s.a.createElement(b,{name:"checkmark"}))),pa.map((function(t){return s.a.createElement("li",{key:t,className:h()("batch-buttons__action",{"batch-buttons__action--disabled":!e.enabled,"batch-buttons__action--enabled":e.enabled})},s.a.createElement("button",{disabled:!e.enabled,type:"button",onClick:function(){return e.batchTask(t,e.page)}},s.a.createElement(b,{name:t})))})))};fa.propTypes={batchTask:c.a.func.isRequired,enabled:c.a.bool.isRequired,filter:c.a.func.isRequired,hasUnselected:c.a.bool.isRequired,page:c.a.number.isRequired},fa.defaultProps={};var ma=fa,ha=(n(134),ua(ma)),da=function(e){return s.a.createElement("div",{className:"gallery-header"},s.a.createElement($n,null),s.a.createElement(ca,{page:e.page}),s.a.createElement(ha,{page:e.page}))};da.propTypes={page:c.a.number.isRequired};var ba=da,ya=(n(135),Jn(ba));var ga=function(e){var t,n,a,r=e.images.map((function(t,n){return s.a.createElement(Wn,{type:"list"===e.currentView?"list":"default",key:t.hash,hash:t.hash,index:n+e.indexOffset,page:e.page})}));return"list"!==e.currentView&&r.push(s.a.createElement("li",{className:"gallery-image gallery-image--dummy",key:"dummy1"}),s.a.createElement("li",{className:"gallery-image gallery-image--dummy",key:"dummy2"}),s.a.createElement("li",{className:"gallery-image gallery-image--dummy",key:"dummy3"}),s.a.createElement("li",{className:"gallery-image gallery-image--dummy",key:"dummy4"}),s.a.createElement("li",{className:"gallery-image gallery-image--dummy",key:"dummy5"})),s.a.createElement(s.a.Fragment,null,s.a.createElement(ya,{page:e.page}),"list"===e.currentView?s.a.createElement("table",{className:"gallery gallery--list"},s.a.createElement("tbody",null,r)):s.a.createElement("ul",{className:h()("gallery",(t={},n="gallery--".concat(e.currentView),a=!0,n in t?Object.defineProperty(t,n,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[n]=a,t))},r),e.images.length<3?null:s.a.createElement(ya,{page:e.page}))};ga.propTypes={images:c.a.array.isRequired,indexOffset:c.a.number.isRequired,currentView:c.a.string.isRequired,page:c.a.number.isRequired},ga.defaultProps={};var va=ga,_a=(n(136),Tn(va)),Ea=Object(a.b)((function(){return{}}),(function(){return{}}));function Sa(e){return(Sa="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Na(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}function ka(e,t){return(ka=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function wa(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=Ra(e);if(t){var r=Ra(this).constructor;n=Reflect.construct(a,arguments,r)}else n=a.apply(this,arguments);return Oa(this,n)}}function Oa(e,t){return!t||"object"!==Sa(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Ra(e){return(Ra=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var ja=null,Pa=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&ka(e,t)}(i,e);var t,a,r,o=wa(i);function i(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),(t=o.call(this,e)).state={mdComponentReady:!1},t}return t=i,(a=[{key:"componentDidMount",value:function(){var e=this;n.e(30).then(n.t.bind(null,236,7)).then((function(t){var n=t.default;ja=n,e.setState({mdComponentReady:!0})}))}},{key:"render",value:function(){return s.a.createElement("div",{className:"home"},this.state.mdComponentReady?s.a.createElement(ja,{className:"markdown-body",source:'# Game Boy Printer Web\r\n\r\n## Basic usage\r\n* choose a [color palette](#/palettes)\r\n* [paste your exports](#/import) into a textfield (or simply drag and drop your dump(s) into this window)\r\n* check your images [in the gallery](#/gallery)\r\n* You can also try to drag/drop your cartridge dump into this window  \r\n\r\n## Supported formats\r\n* This Project is mainly built around the serial output of the original [GBP Emulator](https://github.com/mofosyne/arduino-gameboy-printer-emulator)\r\n* Cart .SAV files are also supported experimentally  \r\nCurrently I assume the size is exactly `131072 bytes`, as this is the only sample of a cartridge dump I have.  \r\nIf it does not work, [please open an issue](https://github.com/HerrZatacke/gb-printer-web/issues) and attach your file.  \r\n\r\n\r\n## ToDos\r\n* User manual\r\n* Global Storage for images \r\n* Allow rendering animated Gifs\r\n* Edit palettes\r\n* Export without frame\r\n* Other blendmodes than multiply for RGB-Images\r\n* allow some gesture navigation on touch devices\r\n* trash bin for raw-data of deleted images\r\n\r\n## Local Setup\r\nYou can run this app locally to directly use the gbp-emulator on your serial port \r\n* Install [node.js](https://nodejs.org/) if you haven\'t already.\r\n* Check out/clone/download [this repository](https://github.com/HerrZatacke/gb-printer-web)\r\n* Run `npm i` in the root directory via your commandline\r\n* Add a `config.json` in the root dir (see below)\r\n* Run `npm start` via your commandline\r\n* Open [localhost:3000](http://localhost:3000)\r\n* Go to the \'Settings\' page and change the \'Remote Socket URL\' to `localhost:3001`\r\n* Print something\r\n\r\n\r\n## Serial config with `config.json`\r\nCreate a file `config.json` in the root dir and configure it like the following example (multiple ports are supported):\r\n``` json\r\n{\r\n  "ports": [\r\n    {\r\n      "path": "COM19",\r\n      "baudRate": 115200,\r\n      "dataBits": 8,\r\n      "stopBits": 1,\r\n      "parity": "none",\r\n      "retry": false\r\n    },\r\n    ...\r\n  ] \r\n}\r\n```\r\nyou can set `retry` to a number of milliseconds after which a retry will be attempted to open the port.\r\n\r\n## Optional deployment config with `config.json`\r\nAdd a `deploy` section in `config.json` to automatically copy the created files to another location.  \r\nIf you set the option `gzip` to `true`, each file will be separately compressed. Useful for servers capable serving pre-zipped files. This saves ~1kB storage space which is very useful on [small systems](https://github.com/HerrZatacke/wifi-gbp-emulator).\r\n``` json\r\n{\r\n  "ports": [...], \r\n  "deploy": {\r\n    "dir": "/copy/all/files/to/that/folder",\r\n    "gzip": true\r\n  }\r\n}\r\n```\r\n\r\n## Future Plans\r\nThis tool is partially integrated into the [WiFi GBP Emulator](https://herrzatacke.github.io/wifi-gbp-emulator/), for which, you\'ll best [use the latest release](https://github.com/HerrZatacke/gb-printer-web/releases)\r\n\r\n## Links and research\r\n* The source to this project is [available on GitHub](https://github.com/HerrZatacke/gb-printer-web)\r\n* A basic version of this tool is avaliable [on GitHub-pages](https://herrzatacke.github.io/gb-printer-web/#/)  \r\n* This project is meant to replace my [GB printer direct serial to gif converter](https://github.com/HerrZatacke/direct-serial-to-gif-converter)\r\n\r\n### Research\r\n* Tutorial on how to work with an ESP8266 by [ttapa: ESP8266 Beginner\'s Guide](https://tttapa.github.io/ESP8266/Chap01%20-%20ESP8266.html)  \r\n* [Programming a standalone ESP8266](https://www.instructables.com/id/3-Simple-Ways-of-Programming-an-ESP8266-12X-Module/)\r\n* [Deploying your JS App to Github Pages the easy way (or not)](https://medium.com/linagora-engineering/1ef8c48424b7)\r\n'}):null)}}])&&Na(t.prototype,a),r&&Na(t,r),i}(s.a.Component);Pa.propTypes={},Pa.defaultProps={};var Ca=Pa,Ta=(n(137),Ea(Ca)),xa=Object(a.b)((function(e){return{dragover:e.dragover}}),(function(){return{}})),Ia=function(e){return e.dragover?s.a.createElement("div",{className:"drag-over"}):null};Ia.propTypes={dragover:c.a.bool.isRequired},Ia.defaultProps={};var qa=Ia,Da=(n(138),xa(qa)),Fa=function(e){return s.a.createElement(s.a.Fragment,null,s.a.createElement("h1",{className:"app__content-headline"},"Gallery",s.a.createElement("span",{className:"app__counter"},"".concat(e.imageCount," images"),e.filteredCount?" / ".concat(e.filteredCount," filtered"):null,e.selectedCount?" / ".concat(e.selectedCount," selected"):null)),s.a.createElement("p",{className:"app__content-hint"},"These images are stored in the localStorage of your browser. That's why you (currently) cannot share a link to one of them.",s.a.createElement("br",null),"Also if you clear your browser's cookies, the images will be gone too."))};Fa.propTypes={imageCount:c.a.number.isRequired,selectedCount:c.a.number.isRequired,filteredCount:c.a.number.isRequired};var Aa=Fa,za=function(e){var t=e.pageSize,n=e.imageCount,a=e.urlParam,r=parseInt(a||"0",10)-1,o=t?Math.ceil(n/t):1,i=Math.max(0,o-1),s=Math.max(0,Math.min(r,i));return{valid:s===r,page:s}},Ma=Object(a.b)((function(e){return{availableTags:e.filter.availableTags,activeTags:e.filter.activeTags}}),(function(e){return{setActiveTags:function(t){e({type:"SET_ACTIVE_TAGS",payload:t})},hideFilters:function(t){e({type:"HIDE_FILTERS",payload:t})}}}));function Ua(e){return(Ua="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function La(e){return function(e){if(Array.isArray(e))return Ba(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return Ba(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Ba(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Ba(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,a=new Array(t);n<t;n++)a[n]=e[n];return a}function Ga(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}function Va(e,t){return(Va=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Ha(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=Wa(e);if(t){var r=Wa(this).constructor;n=Reflect.construct(a,arguments,r)}else n=a.apply(this,arguments);return Ka(this,n)}}function Ka(e,t){return!t||"object"!==Ua(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Wa(e){return(Wa=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var Ja=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Va(e,t)}(o,e);var t,n,a,r=Ha(o);function o(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,o),(t=r.call(this,e)).state={activeTags:e.activeTags,availableTags:e.availableTags},t}return t=o,a=[{key:"getDerivedStateFromProps",value:function(e,t){return JSON.stringify(t.availableTags)===JSON.stringify(e.availableTags)?t:{activeTags:e.activeTags,availableTags:e.availableTags}}}],(n=[{key:"updateActiveTags",value:function(e,t){this.setState((function(n){return{activeTags:"add"===t?Object(Ie.a)([].concat(La(n.activeTags),[e])):n.activeTags.filter((function(t){return t!==e}))}}))}},{key:"render",value:function(){var e=this;return this.props.availableTags.length?s.a.createElement("div",{className:"filter-form"},s.a.createElement("div",{className:"filter-form__backdrop"}),s.a.createElement("div",{className:"filter-form__box"},s.a.createElement("div",{className:"filter-form__box-content"},s.a.createElement("span",{className:"filter-form__header"},"Select Filters"),s.a.createElement("ul",{className:"filter-form__tag-list"},this.props.availableTags.map((function(t){var n=e.state.activeTags.includes(t);return s.a.createElement("li",{key:t,title:t,className:h()("filter-form__tag",{"filter-form__tag--active":n})},s.a.createElement("button",{className:"filter-form__tag-button",type:"button",onClick:function(){return e.updateActiveTags(t,n?"remove":"add")}},s.a.createElement(b,{name:"checkmark"}),s.a.createElement("span",{className:"filter-form__tag-text"},t)))})))),s.a.createElement(T,{confirm:function(){return e.props.setActiveTags(e.state.activeTags)},deny:function(){return e.props.hideFilters()}}))):null}}])&&Ga(t.prototype,n),a&&Ga(t,a),o}(s.a.Component);Ja.propTypes={availableTags:c.a.array.isRequired,activeTags:c.a.array.isRequired,setActiveTags:c.a.func.isRequired,hideFilters:c.a.func.isRequired},Ja.defaultProps={};var Xa=Ja,Ya=(n(139),Ma(Xa)),Za=Object(a.b)((function(){return{}}),(function(){return{}})),Qa=function(e){return s.a.createElement("div",{className:h()("wifi-settings__ap-group",{"wifi-settings__ap-group--delete":e.delete})},s.a.createElement("div",{className:"settings__inputgroup"},s.a.createElement("label",{htmlFor:"".concat(e.id,"-settings-ap-ssid"),className:"settings__label"},"Network SSID"),s.a.createElement("input",{id:"".concat(e.id,"-settings-ap-ssid"),className:"settings__input",type:"text",value:e.ssid,readOnly:!e.isNew,disabled:!e.isNew,onChange:function(t){var n=t.target;e.update({ssid:n.value})}}),s.a.createElement("button",{type:"button",className:"settings__button wifi-settings__button wifi-settings__button--delete",onClick:function(){e.update({delete:!e.delete})}},s.a.createElement(b,{name:"delete"}))),s.a.createElement("div",{className:"settings__inputgroup"},s.a.createElement("label",{htmlFor:"".concat(e.id,"-settings-ap-psk"),className:"settings__label"},"Network Password"),s.a.createElement("input",{id:"".concat(e.id,"-settings-ap-psk"),className:"settings__input",type:"password",placeholder:"••••••••",value:e.psk||"",onChange:function(t){var n=t.target;e.update({psk:n.value})}})))};Qa.propTypes={id:c.a.string.isRequired,ssid:c.a.string.isRequired,isNew:c.a.bool.isRequired,delete:c.a.bool.isRequired,psk:c.a.string.isRequired,update:c.a.func.isRequired};var $a=Qa;function er(e){return(er="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function tr(e){return function(e){if(Array.isArray(e))return nr(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return nr(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return nr(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function nr(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,a=new Array(t);n<t;n++)a[n]=e[n];return a}function ar(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function rr(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ar(Object(n),!0).forEach((function(t){or(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ar(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function or(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function ir(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}function sr(e,t){return(sr=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function lr(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=pr(e);if(t){var r=pr(this).constructor;n=Reflect.construct(a,arguments,r)}else n=a.apply(this,arguments);return cr(this,n)}}function cr(e,t){return!t||"object"!==er(t)&&"function"!=typeof t?ur(e):t}function ur(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function pr(e){return(pr=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var fr=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&sr(e,t)}(o,e);var t,n,a,r=lr(o);function o(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,o),(t=r.call(this,e)).env=Object(Yt.a)(),t.ref=s.a.createRef(),t.saveSettings=t.saveSettings.bind(ur(t)),t.getSettings=t.getSettings.bind(ur(t)),t.state={sync:!1,wifiConfig:null},t}return t=o,(n=[{key:"componentDidMount",value:function(){this.getSettings()}},{key:"componentWillUnmount",value:function(){this.emptyPassWordFields()}},{key:"getSettings",value:function(){var e=this;fetch("/wificonfig/get").then((function(e){return e.json()})).then((function(t){e.setState({sync:!0,wifiConfig:t})})).catch((function(){e.setState({sync:!1,wifiConfig:null})}))}},{key:"saveSettings",value:function(){var e=this,t=rr(rr({},this.state.wifiConfig),{},{networks:this.state.wifiConfig.networks.filter((function(e){return!0===e.delete||e.psk})).filter((function(e){return e.ssid})).filter((function(e){return!(e.delete&&e.isNew)})).map((function(e){var t=e.ssid,n=e.psk;return{delete:e.delete,ssid:t,psk:n}}))});fetch("/wificonfig/set",{method:"post",body:JSON.stringify(t)}).then((function(e){return e.json()})).then((function(e){if(e.error)throw new Error(e.error)})).catch((function(t){alert(t),e.setState({sync:!1,wifiConfig:null})})).then((function(){e.getSettings()}))}},{key:"emptyPassWordFields",value:function(){tr(this.ref.current.querySelectorAll("[type=password")).forEach((function(e){e.value=""}))}},{key:"render",value:function(){var e=this,t=this.state,n=t.wifiConfig,a=t.sync;return n?s.a.createElement("div",{className:"wifi-settings",ref:this.ref},s.a.createElement("h3",{className:"wifi-settings__subheadline"},"Host Settings"),s.a.createElement("div",{className:"settings__inputgroup"},s.a.createElement("label",{htmlFor:"settings-mdns",className:"settings__label"},"mDNS Name (Bonjour/Avahi)"),s.a.createElement("input",{id:"settings-mdns",className:"settings__input",type:"text",value:n.mdns,onChange:function(t){var a=t.target;e.setState({sync:!1,wifiConfig:rr(rr({},n),{},{mdns:a.value.trim()})})}})),s.a.createElement("div",{className:"settings__inputgroup"},s.a.createElement("label",{htmlFor:"settings-ap-ssid",className:"settings__label"},"Accesspoint SSID"),s.a.createElement("input",{id:"settings-ap-ssid",className:"settings__input",type:"text",value:n.ap.ssid,onChange:function(t){var a=t.target;e.setState({sync:!1,wifiConfig:rr(rr({},n),{},{ap:rr(rr({},n.ap),{},{ssid:a.value.trim()})})})}})),s.a.createElement("div",{className:"settings__inputgroup"},s.a.createElement("label",{htmlFor:"settings-ap-psk",className:"settings__label"},"Accesspoint Password"),s.a.createElement("input",{id:"settings-ap-psk",className:"settings__input",type:"password",placeholder:"••••••••",value:n.ap.psk||"",onChange:function(t){var a=t.target;e.setState({sync:!1,wifiConfig:rr(rr({},n),{},{ap:rr(rr({},n.ap),{},{psk:a.value.trim()})})})}})),s.a.createElement("h3",{className:"wifi-settings__subheadline"},"Networks",s.a.createElement("button",{type:"button",className:"settings__button wifi-settings__button wifi-settings__button--add",onClick:function(){var t=n.networks;t.push({ssid:"",psk:"",delete:!1,isNew:!0}),e.setState({sync:!1,wifiConfig:rr(rr({},n),{},{networks:t})})}},s.a.createElement(b,{name:"add"}))),s.a.createElement("ul",{className:"wifi-settings__ap-groups"},n.networks.map((function(t,a){var r=t.ssid,o=t.psk,i=void 0===o?"":o,l=t.delete,c=void 0!==l&&l,u=t.isNew,p=void 0!==u&&u;return s.a.createElement($a,{key:"apconf-".concat(a),id:"apconf-".concat(a),ssid:r,psk:i,isNew:p,delete:c,update:function(r){var o=n.networks;o[a]=rr(rr({},t),r),e.setState({sync:!1,wifiConfig:rr(rr({},n),{},{networks:o})})}})}))),s.a.createElement("div",{className:"settings__inputgroup wifi-settings__buttongroup"},s.a.createElement("button",{type:"button",disabled:a,className:"settings__button wifi-settings__button",onClick:this.saveSettings},"Save WiFi-Settings"))):null}}])&&ir(t.prototype,n),a&&ir(t,a),o}(s.a.Component),mr=(n(140),Za(fr)),hr=Object(Yt.a)(),dr=function(e){return s.a.createElement(u.a,null,s.a.createElement(O,null),s.a.createElement("div",{className:"app__content"},s.a.createElement(p.d,null,s.a.createElement(p.b,{exact:!0,path:"/gallery"},s.a.createElement(p.a,{to:"/gallery/page/1"})),s.a.createElement(p.b,{path:"/gallery/page/:page",render:function(t){var n=t.match,a=za({urlParam:n.params.page,pageSize:e.pageSize,imageCount:e.filteredCount}),r=a.valid,o=a.page;return r?s.a.createElement(s.a.Fragment,null,s.a.createElement(Aa,{imageCount:e.imageCount,selectedCount:e.selectedCount,filteredCount:e.filteredCount}),s.a.createElement(_a,{page:o})):s.a.createElement(p.a,{to:"/gallery/page/".concat(o+1)})}}),s.a.createElement(p.b,{path:"/palettes"},s.a.createElement("h1",{className:"app__content-headline"},"Palettes"),s.a.createElement(hn,null)),s.a.createElement(p.b,{path:"/settings"},s.a.createElement("h1",{className:"app__content-headline"},"Settings"),s.a.createElement(on,null),"esp8266"!==hr.env?null:s.a.createElement(s.a.Fragment,null,s.a.createElement("h1",{className:"app__content-headline"},"WiFi-Settings"),s.a.createElement(mr,null)),s.a.createElement("ul",{className:"settings__version"},s.a.createElement("li",null,"Web-App version: ".concat("1.1.0")),s.a.createElement("li",null,"Printer version: ".concat(hr.version)),s.a.createElement("li",null,"Max Images: ".concat(hr.maximages)),s.a.createElement("li",null,"Environment type: ".concat(hr.env)),s.a.createElement("li",null,"Compiled Filesystem: ".concat(hr.fstype)),s.a.createElement("li",null,"Compiled Bootmode: ".concat(hr.bootmode)),s.a.createElement("li",null,"Compiled for OLED: ".concat(hr.oled?"yes":"no")))),s.a.createElement(p.b,{path:"/import"},s.a.createElement("h1",{className:"app__content-headline"},"Import"),s.a.createElement(Cn,null)),s.a.createElement(p.b,{path:"/"},s.a.createElement(Ta,null)))),s.a.createElement(q,null),s.a.createElement(ut,null),s.a.createElement(ht,null),s.a.createElement(Rt,null),s.a.createElement(Gt,null),s.a.createElement(Da,null),s.a.createElement(Ya,null))};dr.propTypes={imageCount:c.a.number.isRequired,selectedCount:c.a.number.isRequired,filteredCount:c.a.number.isRequired,pageSize:c.a.number.isRequired},dr.defaultProps={};var br=dr;n(141),t.default=o(br)}}]);