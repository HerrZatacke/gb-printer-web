"use strict";(self.webpackChunkgb_printer_web=self.webpackChunkgb_printer_web||[]).push([[42],{15177:function(t,e,r){r.d(e,{vc:function(){return a},k3:function(){return o},Z6:function(){return i},z3:function(){return u},W4:function(){return c},q1:function(){return d},d$:function(){return h},jU:function(){return f},fb:function(){return s},T6:function(){return p},oU:function(){return y}});r(47042);var n=r(24022),a="YYYY-MM-DD HH:mm:ss:SSS",o="YYYY-MM-DD",i="HH:mm",u="YYYYMMDD-HHmmss",c="DD.MM.YYYY HH:mm",l=[0,85,170,255],f='!{"command":"INIT"}',s='!{"command":"DATA", "compressed":0, "more":1}',p='!{"command":"DATA","compressed":0,"more":0}',y='!{"command":"PRNT","sheets":1,"margin_upper":1,"margin_lower":3,"pallet":228,"density":64 }',d={r:l.slice(),g:l.slice(),b:l.slice(),n:l.slice(),blend:n._I.MULTIPLY},h={shortName:"-",name:"Missing Palette",palette:["#aaaaaa","#999999","#888888","#777777"]}},91224:function(t,e,r){r.r(e),r.d(e,{default:function(){return Cn}});r(19601),r(66992),r(41539),r(88674),r(78783),r(33948),r(92222);var n=r(67294),a=r(22115),o=r(73935),i=r(97779),u=function(t,e){return void 0!==t?t:e},c=r(13629),l=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"cybl",e=arguments.length>1?arguments[1]:void 0;switch(e.type){case c.K0:return e.payload;case c.D5:return u(e.payload.activePalette,t);case c.Or:return e.payload.newSelectedPalette||t;default:return t}};r(83710),r(79753),r(82526),r(41817),r(32165),r(91038),r(47042),r(68309);function f(t){return function(t){if(Array.isArray(t))return s(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||function(t,e){if(!t)return;if("string"==typeof t)return s(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);"Object"===r&&t.constructor&&(r=t.constructor.name);if("Map"===r||"Set"===r)return Array.from(t);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return s(t,e)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function s(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}var p=null,y=function(){if(null===p)try{p=window.navigator.canShare({files:[new File([new Blob(f("test"))],"test.txt",{type:"text/plain",lastModified:new Date})]})}catch(t){p=!1}return p};r(57327);function d(t){return function(t){if(Array.isArray(t))return h(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||function(t,e){if(!t)return;if("string"==typeof t)return h(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);"Object"===r&&t.constructor&&(r=t.constructor.name);if("Map"===r||"Set"===r)return Array.from(t);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return h(t,e)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function h(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}var m=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],e=arguments.length>1?arguments[1]:void 0;switch(e.type){case c.jH:return[e.payload].concat(d(t));case c.GU:case c.Dt:case c.S1:case c.md:case c.Or:case c.Gp:return t.filter((function(t,e){return e}));default:return t}},v=function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0],e=arguments.length>1?arguments[1]:void 0;switch(e.type){case c.xo:return!0;case c.es:return!1;default:return t}};r(69070),r(47941),r(38880),r(89554),r(54747),r(49337),r(33321);function g(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function b(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?g(Object(r),!0).forEach((function(e){O(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):g(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function O(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}var A=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=arguments.length>1?arguments[1]:void 0;switch(e.type){case c.Hn:return{use:t.use};case c.wb:return b(b({},t),e.payload);default:return t}},S=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,e=arguments.length>1?arguments[1]:void 0;switch(e.type){case c.u7:return{hash:e.payload};case c.v6:return e.payload;case c.DS:case c.m9:case c.hT:case c.D5:return null;default:return t}},F=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=arguments.length>1?arguments[1]:void 0;switch(e.type){case c.iF:return e.payload;case c.iM:case c.$e:return{};default:return t}},w=r(31852);function E(t){return function(t){if(Array.isArray(t))return D(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||function(t,e){if(!t)return;if("string"==typeof t)return D(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);"Object"===r&&t.constructor&&(r=t.constructor.name);if("Map"===r||"Set"===r)return Array.from(t);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return D(t,e)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function D(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}var j=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:["png"],e=arguments.length>1?arguments[1]:void 0;switch(e.type){case c.Fw:return e.payload.checked?(0,w.Z)([].concat(E(t),[e.payload.fileType])):t.filter((function(t){return t!==e.payload.fileType}));case c.D5:return u(e.payload.exportFileTypes,t);default:return t}};function P(t){return function(t){if(Array.isArray(t))return I(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||function(t,e){if(!t)return;if("string"==typeof t)return I(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);"Object"===r&&t.constructor&&(r=t.constructor.name);if("Map"===r||"Set"===r)return Array.from(t);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return I(t,e)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function I(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}var T=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[1],e=arguments.length>1?arguments[1]:void 0;switch(e.type){case c.WB:return e.payload.checked?window.navigator.msSaveBlob?[e.payload.factor]:[].concat(P(t),[e.payload.factor]):t.filter((function(t){return t!==e.payload.factor}));case c.D5:return u(e.payload.exportScaleFactors,t);default:return t}},_=(r(26699),r(32023),r(48766)),R=[_.Dh,_.TZ,_.z2,_.ee,_.Vn],k=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],e=arguments.length>1?arguments[1]:void 0;switch(e.type){case c.OD:return e.payload;case c.ou:return t.filter((function(t){return R.includes(t)||e.payload.includes(t)}));default:return t}},L=function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0],e=arguments.length>1?arguments[1]:void 0;switch(e.type){case c.y9:return!0;case c.j6:case c.OD:return!1;default:return t}},x=(r(2707),r(81451));function N(t){return function(t){if(Array.isArray(t))return C(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||function(t,e){if(!t)return;if("string"==typeof t)return C(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);"Object"===r&&t.constructor&&(r=t.constructor.name);if("Map"===r||"Set"===r)return Array.from(t);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return C(t,e)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function C(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}var M=function(t,e){return t.id<e.id?-1:t.id>e.id?1:0},B=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],e=arguments.length>1?arguments[1]:void 0;switch(e.type){case c.GU:return(0,x.Z)("id")([e.payload].concat(N(t))).sort(M);case c.BS:return t.filter((function(t){return t.id!==e.payload}));case c.D5:return(0,x.Z)("id")(e.payload.frames).sort(M);default:return t}},G=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,e=arguments.length>1?arguments[1]:void 0;switch(e.type){case c.Jf:return 1;case c.jN:return 2;default:return t}},U=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"1x",e=arguments.length>1?arguments[1]:void 0;switch(e.type){case c.O:return e.payload;case c.D5:return u(e.payload.galleryView,t);default:return t}};function Z(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function H(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?Z(Object(r),!0).forEach((function(e){V(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):Z(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function V(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}var $=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=arguments.length>1?arguments[1]:void 0;return e.type===c.Ik?H(H({},t),e.payload):t},Y=function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0],e=arguments.length>1?arguments[1]:void 0;switch(e.type){case c.wK:return e.payload;case c.D5:return u(e.payload.handleExportFrame,t);default:return t}},X=function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0],e=arguments.length>1?arguments[1]:void 0;switch(e.type){case c.Mx:return e.payload;case c.D5:return u(e.payload.hideDates,t);default:return t}};r(21249),r(69826);function z(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function J(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?z(Object(r),!0).forEach((function(e){W(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):z(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function W(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function q(t){return function(t){if(Array.isArray(t))return K(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||function(t,e){if(!t)return;if("string"==typeof t)return K(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);"Object"===r&&t.constructor&&(r=t.constructor.name);if("Map"===r||"Set"===r)return Array.from(t);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return K(t,e)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function K(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}var Q=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],e=arguments.length>1?arguments[1]:void 0;switch(e.type){case c.Dt:return(0,x.Z)("hash")([].concat(q(t),q(e.payload)));case c.S1:return q(t.filter((function(t){return t.hash!==e.payload})));case c.md:return q(t.filter((function(t){var r=t.hash;return!e.payload.includes(r)})));case c.m9:return t.map((function(t){return t.hash===e.payload.hash?J(J({},t),e.payload):t}));case c.d4:return t.map((function(t){return t.hash===e.payload.hash?J(J({},t),{},{tags:(0,w.Z)(e.payload.isFavourite?[_.oJ].concat(q(t.tags)):t.tags.filter((function(t){return t!==_.oJ})))}):t}));case c.hT:return t.map((function(t){return e.payload.find((function(e){return e.hash===t.hash}))||t}));case c.D5:return(0,x.Z)("hash")(e.payload.images);default:return t}};function tt(t){return function(t){if(Array.isArray(t))return et(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||function(t,e){if(!t)return;if("string"==typeof t)return et(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);"Object"===r&&t.constructor&&(r=t.constructor.name);if("Map"===r||"Set"===r)return Array.from(t);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return et(t,e)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function et(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}var rt=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],e=arguments.length>1?arguments[1]:void 0;switch(e.type){case c.iq:case c.S1:return tt(t.filter((function(t){return t!==e.payload})));case c.Rv:return[].concat(tt(t),[e.payload]);case c.y0:return e.payload;case c.md:return[];case c.D5:return u(e.payload.imageSelection,t);default:return t}},nt=function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0],e=arguments.length>1?arguments[1]:void 0;switch(e.type){case c.Pk:return e.payload;case c.D5:return u(e.payload.importLastSeen,t);default:return t}},at=function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0],e=arguments.length>1?arguments[1]:void 0;return e.type===c.Yx?e.payload:t},ot=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,e=arguments.length>1?arguments[1]:void 0;switch(e.type){case c.Rv:case c.iq:return e.payload;case c.S1:case c.md:case c.O:return null;default:return t}},it=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,e=arguments.length>1?arguments[1]:void 0;return e.type===c.vR?e.payload:t},ut=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,e=arguments.length>1?arguments[1]:void 0;switch(e.type){case c.R4:return e.payload;case c.D5:return u(e.payload.pageSize,t);default:return t}};function ct(t){return function(t){if(Array.isArray(t))return lt(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||function(t,e){if(!t)return;if("string"==typeof t)return lt(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);"Object"===r&&t.constructor&&(r=t.constructor.name);if("Map"===r||"Set"===r)return Array.from(t);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return lt(t,e)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function lt(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}var ft=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],e=arguments.length>1?arguments[1]:void 0;switch(e.type){case c.Or:return ct(t.filter((function(t){return t.shortName!==e.payload.shortName})));case c.$e:return(0,x.Z)("shortName")([].concat(ct(t.map((function(t){return t.shortName!==e.payload.shortName?t:e.payload}))),[e.payload]));case c.D5:return(0,x.Z)("shortName").apply(void 0,[e.payload.palettes].concat(ct(t)));default:return t}},st=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"asc";return function(r){var n="desc"===e?-1:1;return r.sort((function(e,r){return e[t]>r[t]?n:e[t]<r[t]?-n:0}))}};function pt(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function yt(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?pt(Object(r),!0).forEach((function(e){dt(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):pt(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function dt(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function ht(t){return function(t){if(Array.isArray(t))return mt(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||function(t,e){if(!t)return;if("string"==typeof t)return mt(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);"Object"===r&&t.constructor&&(r=t.constructor.name);if("Map"===r||"Set"===r)return Array.from(t);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return mt(t,e)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function mt(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}var vt=(0,x.Z)("url"),gt=st("url"),bt=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],e=arguments.length>1?arguments[1]:void 0;switch(e.type){case c.gH:return gt(vt(ht(t.filter((function(t){return t.url!==e.payload})))));case c.gk:return gt(vt([{url:e.payload}].concat(ht(t))));case c.rc:return gt(vt(t.map((function(t){return t.url!==e.payload.url?t:yt(yt({},t),e.payload)}))));case c.PA:return gt(vt(t.map((function(t){if(t.url!==e.payload.url)return t;var r=yt(yt({},t.config||{}),e.payload.config||{});return yt(yt({},t),{},{config:r})}))));default:return t}},Ot=function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0],e=arguments.length>1?arguments[1]:void 0;switch(e.type){case c.ug:case c.od:return!0;case c.Dt:case c.or:case c.fX:case c.Jx:return!1;default:return t}},At=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=arguments.length>1?arguments[1]:void 0;switch(e.type){case c.fX:return e.payload;case c.Jx:case c.od:return{};default:return t}},St=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],e=arguments.length>1?arguments[1]:void 0;switch(e.type){case c.or:return e.payload;case c.od:return[];default:return t}},Ft=r(15168),wt=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",e=arguments.length>1?arguments[1]:void 0;switch(e.type){case c.YE:return(0,Ft.Z)(e.payload,"http");case c.D5:return u(e.payload.printerUrl,t);default:return t}},Et=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",e=arguments.length>1?arguments[1]:void 0;switch(e.type){case c.WN:return e.payload;case c.D5:return u(e.payload.printerParams,t);default:return t}};function Dt(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function jt(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?Dt(Object(r),!0).forEach((function(e){Pt(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):Dt(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function Pt(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}var It=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{gif:0,printer:0},e=arguments.length>1?arguments[1]:void 0;switch(e.type){case c.B4:return jt(jt({},t),{},{gif:.01});case c.DK:return jt(jt({},t),{},{gif:e.payload});case c.fc:return jt(jt({},t),{},{plugin:e.payload});case c.pQ:return jt(jt({},t),{},{printer:e.payload});case c.Dt:case c.Gp:return jt(jt({},t),{},{printer:0});default:return t}};function Tt(t){return function(t){if(Array.isArray(t))return _t(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||function(t,e){if(!t)return;if("string"==typeof t)return _t(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);"Object"===r&&t.constructor&&(r=t.constructor.name);if("Map"===r||"Set"===r)return Array.from(t);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return _t(t,e)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function _t(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function Rt(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function kt(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?Rt(Object(r),!0).forEach((function(e){Lt(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):Rt(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function Lt(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}var xt=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{git:[],dropbox:[]},e=arguments.length>1?arguments[1]:void 0;switch(e.type){case c.b9:return kt(kt({},t),{},{git:[e.payload].concat(Tt(t.git))});case c.ON:return kt(kt({},t),{},{dropbox:[e.payload].concat(Tt(t.dropbox))});case c.Ki:return kt(kt({},t),{},Lt({},e.payload.storageType,[{timestamp:(new Date).getTime()/1e3,message:"."}].concat(Tt(t[e.payload.storageType]))));case c.bM:case c.d0:return{git:[],dropbox:[]};default:return t}},Nt=r(27484),Ct=r.n(Nt);function Mt(t){return function(t){if(Array.isArray(t))return Bt(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||function(t,e){if(!t)return;if("string"==typeof t)return Bt(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);"Object"===r&&t.constructor&&(r=t.constructor.name);if("Map"===r||"Set"===r)return Array.from(t);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Bt(t,e)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Bt(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}var Gt=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],e=arguments.length>1?arguments[1]:void 0;switch(e.type){case c.Dt:var r=e.payload.map((function(t){var e=t.hash;return t.hashes?null:{hash:e,timestamp:Ct()().unix()}})).filter(Boolean);return[].concat(Mt(t.filter((function(t){var e=t.hash;return!r.includes(e)}))),Mt(r));case c.D5:var n,a;return null!==(n=e.payload)&&void 0!==n&&null!==(a=n.imageSelection)&&void 0!==a&&a.length?[].concat(Mt(t.filter((function(t){var r=t.hash;return!e.payload.imageSelection.includes(r)}))),Mt(e.payload.imageSelection.map((function(t){return{hash:t,timestamp:Ct()().unix()}})))):t;default:return t}};function Ut(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function Zt(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?Ut(Object(r),!0).forEach((function(e){Ht(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):Ut(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function Ht(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}var Vt=function(){var t,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,r=arguments.length>1?arguments[1]:void 0;switch(r.type){case c.Sd:var n=Zt(Zt({},e),r.payload);return n.r||n.g||n.b||n.n?n:null;case c.Dt:return null!==(t=r.payload[0])&&void 0!==t&&t.hashes?null:e;case c.S1:case c.md:return null;case c.D5:return u(r.payload.rgbnImages,e);default:return e}},$t=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"int",e=arguments.length>1?arguments[1]:void 0;switch(e.type){case c.LR:return e.payload;case c.D5:return u(e.payload.savFrameTypes,t);default:return t}},Yt=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",e=arguments.length>1?arguments[1]:void 0;switch(e.type){case c.bD:return e.payload;case c.D5:return u(e.payload.sortBy,t);default:return t}},Xt=function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0],e=arguments.length>1?arguments[1]:void 0;switch(e.type){case c.XB:return!0;case c.qJ:case c.bD:return!1;default:return t}},zt=function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0],e=arguments.length>1?arguments[1]:void 0;switch(e.type){case c.eP:return!0;case c.Ki:case c.bM:return!1;default:return t}};function Jt(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function Wt(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?Jt(Object(r),!0).forEach((function(e){qt(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):Jt(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function qt(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}var Kt=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=arguments.length>1?arguments[1]:void 0;switch(e.type){case c.oI:return Wt(Wt({},t),{},{dropbox:e.payload});case c.yK:return Wt(Wt({},t),{},{dropbox:e.payload.state.lastUpdateUTC,local:e.payload.state.lastUpdateUTC});case c.Ki:return Wt({},t);case c.m9:case c.hT:case c.S1:case c.$e:case c.Or:case c.Dt:case c.GU:return Wt(Wt({},t),{},{local:Math.floor((new Date).getTime()/1e3)});default:return t}},Qt=function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0],e=arguments.length>1?arguments[1]:void 0;switch(e.type){case c.sS:return!0;case c.eP:case c.Ki:case c.DU:return!1;default:return t}},te=function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0],e=arguments.length>1?arguments[1]:void 0;return e.type===c.rR?e.payload:t},ee=function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0],e=arguments.length>1?arguments[1]:void 0;return e.type===c.Dr?e.payload:t};function re(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function ne(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?re(Object(r),!0).forEach((function(e){ae(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):re(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function ae(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}var oe={imageSelection:[]},ie=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:oe,e=arguments.length>1?arguments[1]:void 0;switch(e.type){case c.xG:return ne(ne({},t),e.payload);case c.B4:case c.Xb:return ne(ne({},t),{},{imageSelection:[]});case c.D5:return u(e.payload.videoParams,t);default:return t}},ue=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{height:window.innerHeight,width:window.innerWidth},e=arguments.length>1?arguments[1]:void 0;return e.type===c.rU?e.payload:t},ce=(0,i.UY)({activePalette:l,canShare:y,confirm:m,dragover:v,dropboxStorage:A,editImage:S,editPalette:F,exportFileTypes:j,exportScaleFactors:T,filtersActiveTags:k,filtersVisible:L,frames:B,framesMessage:G,galleryView:U,gitStorage:$,handleExportFrame:Y,hideDates:X,images:Q,imageSelection:rt,importLastSeen:nt,isFullscreen:at,lastSelectedImage:ot,progressLog:xt,lightboxImage:it,pageSize:ut,palettes:ft,plugins:bt,printerBusy:Ot,printerData:At,printerFunctions:St,printerUrl:wt,printerParams:Et,progress:It,recentImports:Gt,rgbnImages:Vt,savFrameTypes:$t,sortBy:Yt,sortOptionsVisible:Xt,syncBusy:zt,syncLastUpdate:Kt,syncSelect:Qt,useSerials:te,showSerials:ee,videoParams:ie,windowDimensions:ue}),le=r(28443),fe=r.n(le),se=r(15177),pe=r(24022);function ye(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function de(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?ye(Object(r),!0).forEach((function(e){he(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):ye(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function he(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function me(t){return function(t){if(Array.isArray(t))return ve(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||function(t,e){if(!t)return;if("string"==typeof t)return ve(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);"Object"===r&&t.constructor&&(r=t.constructor.name);if("Map"===r||"Set"===r)return Array.from(t);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return ve(t,e)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ve(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}var ge=function(t){var e,r,n=(0,x.Z)("shortName")([].concat(me(fe().map((function(t){return de(de({},t),{},{isPredefined:!0})}))),me(t.palettes))),a=n.map((function(t){return t.shortName})),o=t.frames.map((function(t){return t.id})),i=(0,Ft.Z)(t.printerUrl,"http"),u=t.framesMessage,c=a.includes(t.activePalette)?t.activePalette:"bw",l=t.images.map((function(t){return de(de({},t),{},{created:Ct()(t.created).format(se.vc)})})).map((function(t){return de(de({},t),{},{tags:t.tags||[]})})).map((function(t){return t.hashes?t.palette?t.palette.blend?t:de(de({},t),{},{palette:de(de({},t.palette),{},{blend:pe._I.MULTIPLY})}):de(de({},t),{},{palette:se.q1}):t.palette?a.includes(t.palette)?t:de(de({},t),{},{palette:a[0]||"bw"}):null})).filter(Boolean),f=l.map((function(t){return t.hash}));l.forEach((function(t){!t.frame||o.includes(t.frame)||u||(u=1)}));var s=Ct()().subtract(6,"hour").unix(),p=t.recentImports.filter((function(t){var e=t.hash,r=t.timestamp;return f.includes(e)&&r>s})),y=t.plugins.map((function(t){return de(de({},t),{},{loading:!0,error:void 0})})),d=de(de({},t.syncLastUpdate),{},{dropbox:(null===(e=t.syncLastUpdate)||void 0===e?void 0:e.dropbox)||0,local:(null===(r=t.syncLastUpdate)||void 0===r?void 0:r.local)||0});return de(de({},t),{},{syncLastUpdate:d,images:l,palettes:n,plugins:y,printerUrl:i,framesMessage:u,activePalette:c,recentImports:p})},be=r(23860),Oe=function(t){return function(e){return function(r){e(r);var n=t.getState(),a={};be.C.forEach((function(t){var e=t.key;if(t.saveLocally)if("palettes"===e)a[e]=n.palettes.filter((function(t){return!t.isPredefined}));else a[e]=n[e]})),localStorage.setItem("gbp-web-state",JSON.stringify(a))}}},Ae=(r(34553),r(39575),r(82472),r(92990),r(18927),r(33105),r(35035),r(74345),r(7174),r(32846),r(44731),r(77209),r(96319),r(58867),r(37789),r(33739),r(29368),r(14483),r(12056),r(3462),r(30678),r(27462),r(33824),r(55021),r(12974),r(15016),r(25009)),Se=r.n(Ae),Fe=r(11494),we=r(93162),Ee=r(30236),De=r.n(Ee),je=r(28014),Pe=r(39506),Ie=r(17036),Te=r(97768),_e=r(84040);function Re(t){return function(t){if(Array.isArray(t))return Me(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||Ce(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ke(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function Le(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?ke(Object(r),!0).forEach((function(e){xe(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):ke(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function xe(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function Ne(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var r=t&&("undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"]);if(null==r)return;var n,a,o=[],i=!0,u=!1;try{for(r=r.call(t);!(i=(n=r.next()).done)&&(o.push(n.value),!e||o.length!==e);i=!0);}catch(t){u=!0,a=t}finally{try{i||null==r.return||r.return()}finally{if(u)throw a}}return o}(t,e)||Ce(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Ce(t,e){if(t){if("string"==typeof t)return Me(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?Me(t,e):void 0}}function Me(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}var Be=function(t){return function(e){return function(r){if(r.type===c.B4){var n=t.getState(),a=n.videoParams,o=a.scaleFactor,i=a.frameRate,u=a.imageSelection,l=a.yoyo,f=a.frame,s=a.lockFrame,p=a.invertPalette,y=a.palette,d=a.exportFrameMode;Promise.all(u.map((function(t){return n.images.find((function(e){return e.hash===t}))})).filter(Boolean).map((function(t){return Le(Le({},t),{},{frame:f||t.frame,palette:t.hashes?t.palette:y||t.palette})})).map((function(t){return(0,je.Z)(n)(t).then((function(e){var r=(0,Pe.Z)(n,t),a=!!t.hashes,i=a?new Ie.Z:new Te.Z,u=s||t.lockFrame||!1,c=p||t.invertPalette||!1;return a?i.update({tiles:e,palette:r,lockFrame:u}):i.update({tiles:e,palette:r.palette,lockFrame:u,invertPalette:c}),i.getScaledCanvas(o,d)}))}))).then((function(e){var r=[],n=new(Se())(1,1/0),a=new Fe.g(r,e[0].width,e[0].height,{loop:65535}),u=Re(e);if(l){var s=Re(e).reverse();s.shift(),s.pop(),u.push.apply(u,Re(s))}var p=function(t,e,r,n,a){return function(o,i){return r.add((function(){return new Promise((function(r,u){for(var l=o.getContext("2d").getImageData(0,0,o.width,o.height).data,f=[],s=De()(l,4).map((function(t){var e=Ne(t,3),r=(e[0]<<16)+(e[1]<<8)+e[2],n=f.findIndex((function(t){return t===r}));return-1===n&&(n=f.length,f.push(r)),n}));f.length<256;)f.push(0);try{t({type:c.DK,payload:(i+1)/a}),window.requestAnimationFrame((function(){e.addFrame(0,0,o.width,o.height,s,{delay:Math.round(100/n),palette:f}),r()}))}catch(t){u(t)}}))}))}}(t.dispatch,a,n,i,u.length);Promise.all(u.map(p)).then((function(){var e,n=(0,_e.Z)({useCurrentDate:!0,exportScaleFactor:o,frameRate:i,altTitle:"animated",frameName:f,paletteShort:y}),u=a.end();try{e=new File([new Uint8Array(r.slice(0,u)).buffer],"".concat(n,".gif"),{type:"image/gif"})}catch(t){e=new Blob([new Uint8Array(r.slice(0,u)).buffer])}(0,we.saveAs)(e,"".concat(n,".gif")),t.dispatch({type:c.DK,payload:0})}))})).catch((function(e){t.dispatch({type:c.pn,payload:e.message})}))}e(r)}}},Ge=(r(84944),r(74916),r(15306),r(83112),r(39714),r(81477)),Ue=r(20170),Ze=r(49965);function He(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function Ve(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?He(Object(r),!0).forEach((function(e){$e(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):He(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function $e(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function Ye(t){return Ye="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Ye(t)}var Xe=["lockFrame","frame","palette","invertPalette","title","tags","created"],ze=function(t){return(0,w.Z)(t.map((function(t){return t.tags})).flat())},Je=function(t){return function(e){return function(r){if(r.type===c.fd){var n=t.getState(),a=(0,Ge.Z)(n),o=n.lastSelectedImage,i=n.pageSize,u=a.findIndex((function(t){return t.hash===r.payload})),l=a.findIndex((function(t){return t.hash===o}));-1===l&&(l=r.page*i);var f=Math.min(l,u),s=Math.max(l,u);t.dispatch({type:c.y0,payload:a.slice(f,s+1).map((function(t){return t.hash}))})}if(r.type===c.hT){var p=t.getState(),y=(0,Ze.$b)(p),d=p.editImage,h=p.images,m=r.payload,v=m.image,g=m.batch,b=m.tagChanges;if(g&&d.batch&&d.batch.length){var O=d.batch.map((function(t){return h.find((function(e){return e.hash===t}))})).map(Ze.Np).sort(y).map(Ze.fD).map((function(t,e){if(!t)return!1;var r={},n=t.tags;return Xe.forEach((function(a){switch(a){case"title":if(!g.title)break;r.title=v.title.replace(/%(n+)/gi,(function(t,r){return(e+1).toString(10).padStart(r.length,"0")}));break;case"created":if(!g.created)break;r.created=v.created;break;case"palette":if(!g.palette)break;Ye(t.palette)===Ye(v.palette)&&(r.palette=v.palette);break;case"invertPalette":if(!g.invertPalette)break;r.invertPalette=v.invertPalette;break;case"frame":if(!g.frame)break;r.frame=v.frame;break;case"lockFrame":if(!g.lockFrame)break;r.lockFrame=v.lockFrame;break;case"tags":n=(0,Ue.Z)(Ve(Ve({},b),{},{initial:t.tags}))}})),Ve(Ve(Ve({},t),r),{},{tags:n})})).filter(Boolean);Object.assign(r,{payload:O})}}if(r.type!==c.ax)e(r);else{var A=t.getState(),S=A.images,F=A.imageSelection,w=A.pageSize,E=S.filter((function(t){var e=t.hash;return F.includes(e)}));if(F.length)switch(r.payload){case"delete":t.dispatch({type:c.jH,payload:{message:"Delete ".concat(F.length," images?"),confirm:function(){t.dispatch({type:c.md,payload:F})},deny:function(){t.dispatch({type:c.Gp})}}});break;case"animate":t.dispatch({type:c.xG,payload:{imageSelection:F}});break;case"download":t.dispatch({type:c.Zo,payload:F});break;case"edit":t.dispatch({type:c.v6,payload:{hash:E[0].hash,tags:ze(E),batch:E.map((function(t){return t.hash}))}})}switch(r.payload){case"checkall":t.dispatch({type:c.y0,payload:(0,Ge.Z)(A).slice(r.page*w,(r.page+1)*w).map((function(t){return t.hash}))});break;case"uncheckall":t.dispatch({type:c.y0,payload:[]})}}}}},We=r(7704),qe=r(59833),Ke=function(t){qe.Rt.keys().then((function(e){e.forEach((function(e){!function(t,e){(function(t,e){return!!e.find((function(e){var r=e.hashes;return!!r&&[r.r,r.g,r.b,r.n].includes(t)}))})(e,t)||function(t,e){return!!e.find((function(e){return e.hash===t}))}(e,t)||(0,We.IV)(e)}(t,e)}))}))},Qe=function(t){return function(e){return function(r){switch(e(r),r.type){case c.S1:case c.md:Ke(t.getState().images)}}}},tr=function(t){var e,n=t.getState().dropboxStorage;return n.use&&Promise.all([r.e(183),r.e(991)]).then(r.bind(r,41238)).then((function(r){var n=r.default;e=n(t)})),function(a){return function(o){a(o),t.getState().dropboxStorage.use&&(o.type===c.eh||o.type===c.wb||o.type===c.eP&&("dropbox"===o.payload.storageType||"dropboximages"===o.payload.storageType)||n.use&&o.type===c.UF)&&(e?e(o):Promise.all([r.e(183),r.e(991)]).then(r.bind(r,41238)).then((function(r){var n=r.default;(e=e||n(t))(o)})))}}},er=(r(32564),r(23157),r(82772),r(27852),r(73210),function(t){return function(e,r){var n=[],a="";try{for(var o=0;o<5760;o+=1)a+=" ".concat(e[o+8].toString(16).padStart(2,"0")),o%16==15&&(n.push(a.trim()),a="")}catch(e){return t({type:c.pn,payload:"ERROR_IN_LOADED_BIN\n".concat(r)}),Promise.resolve([])}return Promise.resolve(n)}}),rr=r(2738),nr=function(t,e,r){var n=function(t){return r.find((function(e){return e.id===t}))},a=(t+1).toString(10).padStart(2,"0"),o="".concat(e).concat(a);if(n(o))return o;if("jp"===e){var i="int".concat(a);if(n(i))return i}var u="".concat(e,"01");if(n(u))return u;if("jp"!==e){var c="int".concat(a);if(n(c))return c}return"int01"},ar=r(88791);function or(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function ir(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function ur(t){return function(t){if(Array.isArray(t))return cr(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||function(t,e){if(!t)return;if("string"==typeof t)return cr(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);"Object"===r&&t.constructor&&(r=t.constructor.name);if("Map"===r||"Set"===r)return Array.from(t);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return cr(t,e)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function cr(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}var lr="FF FF FF FF FF FF FF FF FF FF FF FF FF FF FF FF",fr=st("albumIndex"),sr=function(t){return function(e,r){var n=t.getState(),a=n.savFrameTypes,o=n.frames,i=n.importLastSeen,u=[],l=(0,ar.Z)(o).map((function(t){var e=t.id;return{value:e,name:t.name,selected:a===e}})),f=function(t){for(var n=function(r){if(i&&0===r||r>=8192){var n=e[r+4016];if(e.length>r){var a=function(t,e){var r=[],n="",a=!1;r.push.apply(r,ur(ur(Array(40)).map((function(){return lr}))));for(var o=0;o<3584;o+=1)o%256==0&&r.push.apply(r,ur(ur(Array(2)).map((function(){return lr})))),n+=" ".concat(t[e+o].toString(16).padStart(2,"0")),o%16==15&&(r.push(n.trim()),a||"00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00"===n.trim()||(a=!0),n=""),o%256==255&&r.push.apply(r,ur(ur(Array(2)).map((function(){return lr}))));return r.push.apply(r,ur(ur(Array(40)).map((function(){return lr})))),a?r:null}(e,r);a&&u.push((0,rr.Z)(a,nr(n,t,o)).then((function(t){return function(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?or(Object(r),!0).forEach((function(e){ir(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):or(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}({lines:t},function(t){var r=t/4096-2;return{cartIndex:r,albumIndex:r>=0?e[4530+r]:64,baseAddress:t}}(r))})))}}},a=0;a<131072;a+=4096)n(a);return Promise.all(u).then(fr).then((function(t){var e=0;return t.map((function(t){var n,a=t.albumIndex,o=t.lines;switch(a){case 64:n="[last seen]";break;case 255:n="[deleted]";break;default:n=(e+=1).toString(10).padStart(2,"0")}return{lines:o,file:"".concat(r," ").concat(n)}}))}))};return l.length<2?f(a):new Promise((function(e){t.dispatch({type:c.jH,payload:{message:"Importing '".concat(r,"'"),questions:function(){return[{label:"Select frameset to use with this import",key:"selectedFrameset",type:"select",options:l}]},confirm:function(r){var n=r.selectedFrameset;t.dispatch({type:c.Gp}),e(f(n))},deny:function(){t.dispatch({type:c.Gp}),e([])}}})}))}},pr=(r(23123),r(91058),r(2737)),yr=function(t){var e=t.split("\n").map((function(t){return t.trim()})).filter((function(t){return t.length&&0!==t.indexOf("//")&&0!==t.indexOf("/*")})).map((function(t){return t.split(" ")})).flat().map((function(t){return parseInt(t,16)}));return(0,pr.parsePackets)(e).then(pr.getImageDataStream).then(pr.decompressDataStream).then(pr.decodePrintCommands).then(pr.harmonizePalettes).then(pr.transformToClassic)},dr=(r(69600),r(75500)),hr=r(36965),mr=function(t){var e=t.lines,r=t.filename,n=t.palette;return(0,We.a1)(e).then((function(t){return{hash:t,created:Ct()().format(se.vc),title:r||"",lines:e.length,tags:[],palette:n}}))},vr=(r(4723),function(t){var e=t.frameSetNew,r=t.frameSet,n=t.frameIndex,a=void 0===n?"":n,o="".concat(e||r).concat(a.padStart(2,"0"));return o.match(/^[a-z]{2,}\d{2}$/g)?o:""}),gr=function(t){var e=t.frameIds,r=t.frameGroups,n=t.fileName;return function(t){var a=t.frameSet,o=void 0===a?"":a,i=t.frameSetNew,u=void 0===i?"":i,c=t.frameIndex,l=void 0===c?"":c,f=t.frameName,s=void 0===f?"":f,p=vr({frameSet:o,frameSetNew:u,frameIndex:l}),y=e.includes(p),d=!(p&&s||!p&&!s);return[{label:"Add as frame to existing frameset",key:"frameSet",type:"select",options:r,disabled:!!u},{label:"Create new frameset with ID (min. 2 chars)",key:"frameSetNew",type:"text",disabled:!!o},{label:y?"Frame index - frame ".concat(p," will be replaced"):"Frame index",key:"frameIndex",type:"number",disabled:!(o||u.length>1)},{label:"Name of frame",key:"frameName",type:"text",disabled:!(o||u.length>1)},{label:p&&s?'"'.concat(n,'" will be imported as frame "').concat(p,'" - "').concat(s,'"'):'"'.concat(n,'" will be imported as an image'),key:"info",type:"info"},{type:"confirmForm",notComplete:d}]}};function br(t){return function(t){if(Array.isArray(t))return Sr(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||Ar(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Or(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var r=t&&("undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"]);if(null==r)return;var n,a,o=[],i=!0,u=!1;try{for(r=r.call(t);!(i=(n=r.next()).done)&&(o.push(n.value),!e||o.length!==e);i=!0);}catch(t){u=!0,a=t}finally{try{i||null==r.return||r.return()}finally{if(u)throw a}}return o}(t,e)||Ar(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Ar(t,e){if(t){if("string"==typeof t)return Sr(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?Sr(t,e):void 0}}function Sr(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}var Fr=st("count","desc"),wr=st("threshold"),Er=function(t){var e=t.data,r=De()(e,4).map((function(t){var e=Or(t,4),r=e[0],n=e[3];return Math.floor(r*(n/255))})),n=Math.min.apply(Math,br(r)),a=Math.max.apply(Math,br(r)),o=br(new Array(7)).map((function(t,e){return{threshold:Math.ceil((a-n)/(7/(e+1)))+n,count:0}}));return r.forEach((function(t){for(var e=0;e<7;e+=1){var r;t>((null==o||null===(r=o[e-1])||void 0===r?void 0:r.threshold)||-1)&&t<=o[e].threshold&&(o[e].count+=1)}})),wr(Fr(o).slice(0,4)).slice(0,3).map((function(t){return t.threshold}))},Dr=function(t){var e=function(t){return function(e){var r=Or(e,4),n=r[0],a=r[3],o=Math.floor(n*(a/255));return o<t[0]?257:o<t[1]?1:o<t[2]?256:0}}(t);return function(t){for(var r=t.data,n=[],a=0;a<8;a+=1){for(var o=0,i=0;i<8;i+=1){o+=e(r.slice(4*(8*a+i)))<<7-i}n.push((o>>8).toString(16).padStart(2,"0"),(255&o).toString(16).padStart(2,"0"))}return n.join(" ").toUpperCase()}},jr=function(t){return function(e){var r=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=t.dispatch,a=document.createElement("img"),o=document.createElement("canvas"),i=o.getContext("2d"),u=[];o.width=160,o.height=144,a.onload=function(){i.filter="grayscale(1)",128===a.naturalWidth&&112===a.naturalHeight?i.drawImage(a,16,16):i.drawImage(a,0,0,a.naturalWidth,a.naturalHeight,0,0,160,144);for(var l=Er(i.getImageData(0,0,160,144)),f=Dr(l),s=0;s<o.height;s+=8)for(var p=0;p<o.width;p+=8)u.push(f(i.getImageData(p,s,8,8)));var y=function(){var r;mr({lines:u,filename:(null===(r=e.name)||void 0===r?void 0:r.split(".").shift())||"",palette:t.getState().activePalette}).then((function(t){n({type:c.Dt,payload:[t]})}))};if(r)y();else{var d=t.getState().frames,h=(0,ar.Z)(d).filter((function(t){var e=t.id;return!["int","jp","hk"].includes(e)})).map((function(t){return{value:t.id,name:t.name}}));h.unshift({value:"",name:"Select",selected:!0});var m=d.map((function(t){return t.id}));t.dispatch({type:c.jH,payload:{message:'Choose how you want to import "'.concat(e.name,'".'),questions:gr({frameIds:m,frameGroups:h,fileName:e.name}),confirm:function(t){var e=t.frameSet,r=t.frameSetNew,a=t.frameIndex,o=t.frameName,i=vr({frameSet:e,frameSetNew:r,frameIndex:a});i&&o?(0,dr.e)(i,u).then((function(){n({type:c.GU,payload:{id:i,name:o}})})):y()},deny:function(){n({type:c.Gp})}}})}},(0,hr.Z)(e,"dataURL").then((function(t){a.src=t}))}},Pr="NEW_LINES",Ir="IMAGE_COMPLETE",Tr=function(t){if("#"===t.charAt(0)||"/"===t.charAt(0))return null;if("!"===t.charAt(0)||"{"===t.charAt(0)){try{var e=JSON.parse(t.slice(t.indexOf("{")).trim()),r=e.command,n=e.margin_lower;if("PRNT"===r&&n>0)return{type:Ir}}catch(t){return{type:"PARSE_ERROR",payload:"Error while trying to parse JSON data command block"}}return null}var a=t.replace(/[^0-9A-F]/gi,"");return a.length?{type:Pr,payload:[a]}:null},_r=r(25108);function Rr(t){return function(t){if(Array.isArray(t))return kr(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||function(t,e){if(!t)return;if("string"==typeof t)return kr(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);"Object"===r&&t.constructor&&(r=t.constructor.name);if("Map"===r||"Set"===r)return Array.from(t);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return kr(t,e)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function kr(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}var Lr=function(t,e){var r=[],n="".concat(t,"\n").concat(se.oU).split("\n").map(Tr).filter(Boolean).map((function(t){var e;switch(t.type){case Pr:return(e=r).push.apply(e,Rr(t.payload)),null;case Ir:var n=r.filter(Boolean);return r=[],!!n.length&&n;default:return null}})).filter(Boolean);return n.length||_r.warn("File ".concat(e," did not contain images")),Promise.resolve(n)},xr=r(25108),Nr=function(t){return 71===t[0]&&66===t[1]&&45===t[2]&&66===t[3]&&73===t[4]&&78===t[5]&&48===t[6]&&49===t[7]},Cr=function(t){var e=t.dispatch,r=sr(t),n=er(e),a=jr(t),o=function(t){xr.error(t),e({type:c.pn,payload:"FILE_NOT_READ"})};return function(i){var u=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{fromPrinter:!1},l=u.fromPrinter,f=i.map((function(t){var i,u=t,f=t.type,s=!0;return t.blob&&(u=t.blob,f=t.contentType,s=void 0!==t.ok?t.ok:s),s&&u.size?f&&f.startsWith("image/")?(a(u,l),Promise.resolve([])):u.size>268435455?(e({type:c.pn,payload:"FILE_TOO_LARGE"}),Promise.resolve([])):"application/json"===f?((0,hr.Z)(u,"text").catch(o).then((function(t){var r={};try{r=JSON.parse(t)}catch(t){}r&&r.state?e({type:c.uH,payload:r}):e({type:c.pn,payload:"NOT_A_SETTINGS_FILE"})})),Promise.resolve([])):"text/plain"===f?(0,hr.Z)(u,"text").catch(o).then((function(t){if(-1===t.indexOf('{"command"'))try{return yr(t,u.name)}catch(t){return e({type:c.pn,payload:"NOT_A_DUMP"}),[]}return Lr(t,u.name)})).then((function(t){return t.map((function(t){return{lines:t,filename:u.name}}))})):null!==(i=u.name)&&void 0!==i&&i.toLowerCase().endsWith(".sav")&&u.size%4096==0?(0,hr.Z)(u,"arrayBuffer").catch(o).then((function(t){return r(t,u.name)})):!f||f.startsWith("application/")?(0,hr.Z)(u,"arrayBuffer").catch(o).then((function(t){return Nr(t)?n(t,u.name).then((function(t){return{lines:t,filename:u.name}})):[]})):(e({type:c.pn,payload:"NOT_A_DUMP"}),Promise.resolve([])):(xr.error("Error in received data",t),Promise.resolve([]))}));Promise.all(f).then((function(r){var n=r.flat().filter(Boolean);n.length?e({type:c.PR,payload:n}):t.dispatch({type:c.Gp})}))}};function Mr(t){return function(t){if(Array.isArray(t))return Br(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||function(t,e){if(!t)return;if("string"==typeof t)return Br(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);"Object"===r&&t.constructor&&(r=t.constructor.name);if("Map"===r||"Set"===r)return Array.from(t);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Br(t,e)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Br(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}var Gr=function(t){var e,r=document.querySelector("#app"),n=Cr(t),a=!1;return r.addEventListener("dragover",(function(r){r.preventDefault(),a||t.dispatch({type:c.xo}),window.clearTimeout(e),a=!0,e=window.setTimeout((function(){a=!1,t.dispatch({type:c.es})}),250)})),r.addEventListener("drop",(function(t){var e;t.preventDefault(),e=t.dataTransfer.items?Mr(t.dataTransfer.items).filter((function(t){return"file"===t.kind})).map((function(t){return t.getAsFile()})):Mr(t.dataTransfer.files),n(e)})),function(t){return function(e){t(e)}}},Ur=function(t){var e=null;return function(n){return function(a){n(a);var o=t.getState().gitStorage,i=o.use,u=o.owner,l=o.repo,f=o.branch,s=o.token;i&&u&&l&&f&&s&&(a.type===c.Ik||a.type===c.eP&&"git"===a.payload.storageType)&&(e?e(a):Promise.all([r.e(192),r.e(340)]).then(r.bind(r,59206)).then((function(r){var n=r.init,o=r.middleware;n(t),(e=o(t))(a)})))}}},Zr=function(){return function(t){return function(e){e.type===c.pn&&alert(e.payload),t(e)}}};function Hr(t){return function(t){if(Array.isArray(t))return Vr(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||function(t,e){if(!t)return;if("string"==typeof t)return Vr(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);"Object"===r&&t.constructor&&(r=t.constructor.name);if("Map"===r||"Set"===r)return Array.from(t);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Vr(t,e)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Vr(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}var $r=function(t){var e=Cr(t);return function(t){return function(r){r.type!==c.uD?t(r):r.payload.files&&r.payload.files.length&&e(Hr(r.payload.files),{fromPrinter:r.payload.fromPrinter||!1})}}};r(60285);function Yr(t){return function(t){if(Array.isArray(t))return Xr(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||function(t,e){if(!t)return;if("string"==typeof t)return Xr(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);"Object"===r&&t.constructor&&(r=t.constructor.name);if("Map"===r||"Set"===r)return Array.from(t);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Xr(t,e)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Xr(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}var zr=function(t){var e=null,n=null;return window.addEventListener("message",(function(r){var a,o=t.getState().printerUrl;try{a=new URL(o).origin}catch(t){a=new URL(window.location.href).origin}if(r.origin===a){var i=r.data.fromRemotePrinter,u=(i=void 0===i?{}:i).lines,l=i.progress,f=i.blob,s=i.blobsdone,p=i.commands,y=i.printerData,d=r.source;if(p&&(e&&JSON.stringify(p)===JSON.stringify(t.getState().printerFunctions)||t.dispatch({type:c.or,payload:p}),n=d,window.clearTimeout(e),e=window.setTimeout((function(){e=null,n=null,t.dispatch({type:c.od})}),1500)),u){var h;try{h=new File(Yr(u.join("\n")),"Text input.txt",{type:"text/plain"})}catch(t){h=new Blob(Yr(u.join("\n")),{type:"text/plain"})}t.dispatch({type:c.uD,payload:{files:[h]}})}if(void 0!==l&&t.dispatch({type:c.pQ,payload:l}),f&&t.dispatch({type:c.uD,payload:{files:[f]}}),s){if("string"==typeof s[0])return void window.setTimeout((function(){alert("You should update the web-app to a version > 1.16.0 on your printer for an optimized import experience :-)")}),200);var m=s.filter((function(t){return t.blob&&t.ok}));m.length?t.dispatch({type:c.uD,payload:{files:m,fromPrinter:!0}}):t.dispatch({type:c.jH,payload:{message:"No valid files received from WiFi-Printer",confirm:function(){t.dispatch({type:c.Gp}),t.dispatch({type:c.Jx})}}})}y&&t.dispatch({type:c.fX,payload:y})}})),function(e){return function(a){if(a.type===c.ug){var o,i=t.getState(),u="fetchImages"===a.payload?{dumps:null===(o=i.printerData)||void 0===o?void 0:o.dumps}:void 0;r.e(705).then(r.t.bind(r,40705,23)).then((function(){r.e(591).then(r.t.bind(r,99591,23)).then((function(){n.postMessage({toRemotePrinter:{command:a.payload,params:u}},"*")}))}))}e(a)}}},Jr=function(t){var e=(0,x.Z)("hash"),r=new(Se())(1,1/0);return function(n){return function(a){if(a.type===c.PR)return o=a.payload,void Promise.all(o.map((function(e){return r.add((function(){return mr({lines:e.lines,filename:e.file,palette:t.getState().activePalette,dispatch:t.dispatch})}))}))).then((function(r){var n=e(r),a=n.length===r.length?"":" (".concat(r.length-n.length," duplicates found in import)");t.dispatch({type:c.jH,payload:{message:"Import ".concat(n.length," images?").concat(a),confirm:function(){t.dispatch({type:c.Dt,payload:n})},deny:function(){t.dispatch({type:c.Gp})}}})}));var o;n(a)}}},Wr=r(10577),qr=r.n(Wr),Kr=function(t){return window.addEventListener("resize",(function(){t.dispatch({type:c.rU,payload:{height:window.innerHeight,width:window.innerWidth}})})),qr().isEnabled&&qr().on("change",(function(){t.dispatch({type:c.Yx,payload:!!qr().element})})),document.addEventListener("keydown",(function(e){if(null!==t.getState().lightboxImage)switch(e.key){case"Esc":case"Escape":t.dispatch({type:c.vR,payload:null}),e.preventDefault();break;case"Right":case"ArrowRight":t.dispatch({type:c.BH}),e.preventDefault();break;case"Left":case"ArrowLeft":t.dispatch({type:c.$$}),e.preventDefault()}})),function(e){return function(r){var n=t.getState();switch(r.type){case c.BH:if(null===n.lightboxImage)return;return void t.dispatch({type:c.vR,payload:Math.min(n.lightboxImage+1,n.images.length-1)});case c.$$:if(null===n.lightboxImage)return;return void t.dispatch({type:c.vR,payload:Math.max(n.lightboxImage-1,0)});case c.CQ:qr().isEnabled&&(qr().element?qr().exit():qr().request(document.querySelector("body")));break;case c.vR:qr().isEnabled&&!r.payload&&qr().element&&qr().exit();break;case c.Tq:t.dispatch({type:c.vR,payload:(0,Ge.Z)(n).findIndex((function(t){return t.hash===r.payload}))})}e(r)}}},Qr=r(44936),tn=r.n(Qr),en=r(25108),rn=function(t){var e={},r=new(tn())(1,1/0),n=function(e){t.dispatch({type:c.fc,payload:e%1})},a=function(e){var r=t.getState(),n=r.handleExportFrame,a=r.images.find((function(t){return t.hash===e})),o=(0,Pe.Z)(r,a),i=function(){return(0,je.Z)(r)(a)};a.isRGBN=!!a.hashes;return{getMeta:function(){return Promise.resolve(a)},getPalette:function(){return Promise.resolve(o)},getTiles:i,getCanvas:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.scaleFactor,r=void 0===e?1:e,u=t.palette,c=void 0===u?o:u,l=t.lockFrame,f=void 0===l?a.lockFrame||!1:l,s=t.invertPalette,p=void 0===s?a.invertPalette||!1:s,y=t.handleExportFrame,d=void 0===y?n:y;return i().then((function(t){var e=a.isRGBN?new Ie.Z:new Te.Z;return a.isRGBN?e.update({tiles:Ie.Z.rgbnTiles(t),palette:c,lockFrame:f}):e.update({tiles:t,palette:c.palette,lockFrame:f,invertPalette:p}),e.getScaledCanvas(r,d)}))}}},o=function(o){var i=t.getState().plugins.find((function(t){var e=t.url;return o.url===e}))||{},u=i.config,l=void 0===u?{}:u,f=o.url;return r.add((function(){return new Promise((function(r){window.gbpwRegisterPlugin=function(o){window.gbpwRegisterPlugin=function(){};try{var i=new o({saveAs:we.saveAs,progress:n,store:t,collectImageData:a},l),u=i.name,s=i.description,p=void 0===s?"":s,y=i.configParams,d=void 0===y?{}:y,h=i.config,m=void 0===h?{}:h;e[f]=i,t.dispatch({type:c.rc,payload:{url:f,name:u,description:p,configParams:d,config:m,loading:!1,error:!1}}),r(!0)}catch(e){t.dispatch({type:c.rc,payload:{url:f,loading:!1,error:e.message}}),r(!1)}};var o=document.createElement("script");document.head.appendChild(o),o.addEventListener("error",(function(){window.gbpwRegisterPlugin=function(){},t.dispatch({type:c.rc,payload:{url:f,loading:!1,error:"Loading error"}}),r(!1)})),o.src=f}))}))};return window.requestAnimationFrame((function(){var e=t.getState().plugins;Promise.all(e.map(o)).then((function(t){en.log("".concat(t.filter(Boolean).length," plugins initialized"))})).catch((function(t){en.error(t)}))})),function(r){return function(n){switch(n.type){case c.Ib:var i=n.payload,u=i.url,l=i.hash;e[u].withImage(a(l));break;case c.ui:var f=n.payload.url,s=t.getState().imageSelection;e[f].withSelection(s.map(a));break;case c.PA:var p=n.payload,y=p.url,d=p.config;e[y].setConfig(d);break;case c.gk:o({url:n.payload});break;case c.gH:delete e[n.payload]}r(n)}}};function nn(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function an(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?nn(Object(r),!0).forEach((function(e){on(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):nn(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function on(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}var un=function(t){return["#",Math.ceil(Math.random()*t).toString(16).padStart(2,"0"),Math.ceil(Math.random()*t).toString(16).padStart(2,"0"),Math.ceil(Math.random()*t).toString(16).padStart(2,"0")].join("")},cn=function(t,e,r,n){var a=r===_.VP?{name:"",shortName:_.VP,palette:[un(255),un(170),un(102),un(34)],origin:"Selfmade"}:e.find((function(t){return t.shortName===r}));t({type:c.iF,payload:an(an({},a),{},{name:n?"Copy of ".concat(a.name):a.name,shortName:n?_.VP:r})})},ln=function(t){return document.addEventListener("keydown",(function(e){if("Enter"===e.key&&e.ctrlKey&&t.getState().editPalette.hash){var r=t.getState();t.dispatch({type:c.GY}),r.editPalette&&e.preventDefault()}})),function(e){return function(r){switch(r.type){case c.GY:return n=t.dispatch,a=t.getState(),void n({type:c.$e,payload:an(an({},a.editPalette),{},{tags:(0,Ue.Z)(a.editPalette.tags)})});case c.Tc:return void cn(t.dispatch,t.getState().palettes,r.payload,!1);case c.y3:return void cn(t.dispatch,t.getState().palettes,r.payload,!0)}var n,a;e(r)}}};function fn(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function sn(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?fn(Object(r),!0).forEach((function(e){pn(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):fn(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function pn(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}var yn=function(t){return function(e){return function(n){if(n.type===c.Fy){var a=t.getState();r.e(705).then(r.t.bind(r,40705,23)).then((function(e){var r=e.default,n={palette:se.q1,hashes:sn({},a.rgbnImages),hash:r(a.rgbnImages),created:Ct()().format(se.vc),title:"",tags:[]};t.dispatch({type:c.Dt,payload:[n]})}))}e(n)}}},dn=r(98642),hn=r(14929);function mn(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function vn(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?mn(Object(r),!0).forEach((function(e){gn(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):mn(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function gn(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function bn(t){return function(t){if(Array.isArray(t))return On(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||function(t,e){if(!t)return;if("string"==typeof t)return On(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);"Object"===r&&t.constructor&&(r=t.constructor.name);if("Map"===r||"Set"===r)return Array.from(t);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return On(t,e)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function On(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}var An=function(t,e,r){var n=t.frames,a=t.images,o=t.palettes;if(r){var i,u,c;if(e.frames&&e.frames.length)(i=n).unshift.apply(i,bn(e.frames));if(e.images&&e.images.length)(u=a).unshift.apply(u,bn(e.images));if(e.palettes&&e.palettes.length)(c=o).unshift.apply(c,bn(e.palettes))}else n=e.frames||t.frames,a=e.images||t.images,o=e.palettes||t.palettes;return vn(vn(vn({},t),e),{},{images:a,frames:n,palettes:o})},Sn=function(t,e,r){var n=arguments.length>3&&void 0!==arguments[3]&&arguments[3];Object.keys(r).forEach((function(t){"state"!==t&&(t.match(/^[a-f0-9]{40}$/gi)?qe.Rt.setItem("".concat(t),r[t]):t.startsWith("frame-")&&qe.$0.setItem("".concat(t.split("frame-").pop()),r[t]))})),t({type:c.D5,payload:ge(An(e,r.state||{},n))})},Fn=function(t){var e=(0,hn.Z)(t);return function(r){return function(n){switch(n.type){case c.sO:a=n.payload,e(a).then((function(t){(0,dn.L)(null)([{blob:new Blob(new Array(t)),filename:"".concat(a,".json")}])}));break;case c.uH:Sn(t.dispatch,t.getState(),n.payload,!0);break;case c.Vo:case c.yK:Sn(t.dispatch,t.getState(),n.payload,!1)}var a;r(n)}}};function wn(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function En(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?wn(Object(r),!0).forEach((function(e){Dn(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):wn(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function Dn(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function jn(t){return function(t){if(Array.isArray(t))return Pn(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||function(t,e){if(!t)return;if("string"==typeof t)return Pn(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);"Object"===r&&t.constructor&&(r=t.constructor.name);if("Map"===r||"Set"===r)return Array.from(t);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Pn(t,e)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Pn(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}var In=function(t){return function(e){return function(r){if(r.type===c.pr){var n=t.getState(),a=n.images.find((function(t){return t.hash===r.payload})),o=(0,Pe.Z)(n,a),i=jn(n.exportScaleFactors).pop()||4,u=jn(n.exportFileTypes).pop()||"png",l=(0,dn.j)(En(En({},n),{},{exportScaleFactors:[i],exportFileTypes:[u]}));(0,je.Z)(n)(a).then(l(o,a)).then((function(t){var e=t[0],r=e.blob,n=e.filename,a=e.title;window.navigator.share&&window.navigator.share({files:[new File([r],n,{type:"image/png",lastModified:new Date})],title:a}).catch((function(){return"¯\\_(ツ)_/¯"}))}))}e(r)}}},Tn=r(33761),_n=function(t){return function(e){return function(r){if(r.type===c.hi||r.type===c.Zo){var n=t.getState(),a=(0,dn.j)(n);switch(r.type){case c.hi:!function(t,e){return function(r){var n=e.images.find((function(t){return t.hash===r})),a=(0,Pe.Z)(e,n),o=(0,_e.Z)({image:n,palette:a});return(0,je.Z)(e)(n).then(t(a,n)).then((0,Tn.Z)(o))}}(a,n)(r.payload);break;case c.Zo:!function(t,e){return function(r){var n=(0,_e.Z)({altTitle:"gameboy-printer-gallery",useCurrentDate:!0});Promise.all(r.map((function(r){var n=e.images.find((function(t){return t.hash===r})),a=(0,Pe.Z)(e,n);return(0,je.Z)(e)(n).then(t(a,n))}))).then((function(t){return t.flat()})).then((0,Tn.Z)(n))}}(a,n)(r.payload)}}return e(r)}}},Rn=(0,i.md)(Be,Je,Qe,tr,Zr,Gr,Ur,$r,zr,Jr,Kr,rn,ln,yn,Fn,In,_n),kn=window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__||i.qC,Ln=[Rn,(0,i.md)(Oe)],xn=function(t){var e=(0,i.MT)(ce,ge(t),kn.apply(void 0,Ln));return window.store=e,e},Nn=r(97377),Cn=function(){var t=document.getElementById("app");if(t){var e;try{e=JSON.parse(localStorage.getItem("gbp-web-state"))||{}}catch(t){e={}}"esp8266"===(0,Nn.d)().env&&(e.printerUrl="/");var i=Object.assign(be.c,e);Promise.all([r.e(405),r.e(143)]).then(r.bind(r,30728)).then((function(e){var r=e.default;try{var u=xn(i);(0,o.render)(n.createElement(a.zt,{store:u},n.createElement(r,null)),t)}catch(t){document.getElementById("app").innerHTML='<p class="init-error">Error while initializing the app:<br>'.concat(t.message,"<br><small>").concat(t.stack,"</small></p>")}}))}}},13629:function(t,e,r){r.d(e,{O:function(){return n},Yx:function(){return a},vR:function(){return o},BH:function(){return i},$$:function(){return u},CQ:function(){return c},Tq:function(){return l},K0:function(){return f},Or:function(){return s},iF:function(){return p},iM:function(){return y},$e:function(){return d},GY:function(){return h},Tc:function(){return m},y3:function(){return v},jH:function(){return g},Gp:function(){return b},Jf:function(){return O},jN:function(){return A},GU:function(){return S},BS:function(){return F},wK:function(){return w},LR:function(){return E},Fw:function(){return D},WB:function(){return j},Mx:function(){return P},Pk:function(){return I},R4:function(){return T},Dr:function(){return _},rR:function(){return R},Dt:function(){return k},S1:function(){return L},md:function(){return x},u7:function(){return N},v6:function(){return C},DS:function(){return M},m9:function(){return B},hT:function(){return G},d4:function(){return U},xo:function(){return Z},es:function(){return H},Hn:function(){return V},wb:function(){return $},ON:function(){return Y},oI:function(){return X},yK:function(){return z},eh:function(){return J},Ik:function(){return W},b9:function(){return q},Vo:function(){return K},Ki:function(){return Q},bM:function(){return tt},eP:function(){return et},sS:function(){return rt},DU:function(){return nt},sO:function(){return at},uH:function(){return ot},OD:function(){return it},ou:function(){return ut},y9:function(){return ct},j6:function(){return lt},iq:function(){return ft},Rv:function(){return st},y0:function(){return pt},fd:function(){return yt},bD:function(){return dt},XB:function(){return ht},qJ:function(){return mt},gH:function(){return vt},gk:function(){return gt},rc:function(){return bt},PA:function(){return Ot},Ib:function(){return At},ui:function(){return St},fc:function(){return Ft},pQ:function(){return wt},DK:function(){return Et},d0:function(){return Dt},WN:function(){return jt},YE:function(){return Pt},ug:function(){return It},od:function(){return Tt},or:function(){return _t},fX:function(){return Rt},Jx:function(){return kt},B4:function(){return Lt},Sd:function(){return xt},xG:function(){return Nt},Xb:function(){return Ct},Fy:function(){return Mt},pr:function(){return Bt},hi:function(){return Gt},Zo:function(){return Ut},ax:function(){return Zt},D5:function(){return Ht},rU:function(){return Vt},pn:function(){return $t},UF:function(){return Yt},uD:function(){return Xt},PR:function(){return zt}});var n="SET_CURRENT_GALLERY_VIEW",a="SET_IS_FULLSCREEN",o="SET_LIGHTBOX_IMAGE_INDEX",i="LIGHTBOX_NEXT",u="LIGHTBOX_PREV",c="LIGHTBOX_FULLSCREEN",l="SET_LIGHTBOX_IMAGE_HASH",f="PALETTE_SET_ACTIVE",s="PALETTE_DELETE",p="SET_EDIT_PALETTE",y="PALETTE_CANCEL_EDIT",d="PALETTE_UPDATE",h="SAVE_EDIT_PALETTE",m="PALETTE_EDIT",v="PALETTE_CLONE",g="CONFIRM_ASK",b="CONFIRM_ANSWERED",O="FRAMES_MESSAGE_SHOW",A="FRAMES_MESSAGE_HIDE",S="ADD_FRAME",F="DELETE_FRAME",w="SET_HANDLE_EXPORT_FRAME",E="SET_SAV_FRAME_TYPES",D="UPDATE_EXPORT_FILE_TYPES",j="UPDATE_EXPORT_SCALE_FACTORS",P="SET_HIDE_DATES",I="SET_IMPORT_LAST_SEEN",T="SET_PAGESIZE",_="SHOW_SERIALS",R="USE_SERIALS",k="ADD_IMAGES",L="DELETE_IMAGE",x="DELETE_IMAGES",N="EDIT_IMAGE",C="EDIT_IMAGE_SELECTION",M="CANCEL_EDIT_IMAGE",B="UPDATE_IMAGE",G="UPDATE_IMAGES_BATCH",U="IMAGE_FAVOURITE_TAG",Z="IMPORT_DRAGOVER_START",H="IMPORT_DRAGOVER_END",V="DROPBOX_LOGOUT",$="SET_DROPBOX_STORAGE",Y="DROPBOX_LOG_ACTION",X="LAST_UPDATE_DROPBOX_REMOTE",z="DROPBOX_SETTINGS_IMPORT",J="DROPBOX_START_AUTH",W="SET_GIT_STORAGE",q="GITSTORAGE_LOG_ACTION",K="GIT_SETTINGS_IMPORT",Q="STORAGE_SYNC_DONE",tt="STORAGE_DIFF_DONE",et="STORAGE_SYNC_START",rt="STORAGE_SYNC_SELECT",nt="STORAGE_SYNC_CANCEL",at="JSON_EXPORT",ot="JSON_IMPORT",it="SET_ACTIVE_TAGS",ut="SET_AVAILABLE_TAGS",ct="SHOW_FILTERS",lt="HIDE_FILTERS",ft="IMAGE_SELECTION_REMOVE",st="IMAGE_SELECTION_ADD",pt="IMAGE_SELECTION_SET",yt="IMAGE_SELECTION_SHIFTCLICK",dt="SET_SORT_BY",ht="SHOW_SORT_OPTIONS",mt="HIDE_SORT_OPTIONS",vt="PLUGIN_REMOVE",gt="PLUGIN_ADD",bt="PLUGIN_UPDATE_PROPERTIES",Ot="PLUGIN_UPDATE_CONFIG",At="PLUGIN_IMAGE",St="PLUGIN_IMAGES",Ft="EXECUTE_PLUGIN_PROGRESS",wt="PRINTER_PROGRESS",Et="CREATE_GIF_PROGRESS",Dt="LOG_CLEAR",jt="SET_PRINTER_PARAMS",Pt="SET_PRINTER_URL",It="REMOTE_CALL_FUNCTION",Tt="HEARTBEAT_TIMED_OUT",_t="PRINTER_FUNCTIONS_RECEIVED",Rt="PRINTER_DATA_RECEIVED",kt="PRINTER_RESET",Lt="ANIMATE_IMAGES",xt="UPDATE_RGBN_PART",Nt="SET_VIDEO_PARAMS",Ct="CANCEL_ANIMATE_IMAGES",Mt="SAVE_RGBN_IMAGE",Bt="SHARE_IMAGE",Gt="START_DOWNLOAD",Ut="DOWNLOAD_SELECTION",Zt="BATCH_TASK",Ht="GLOBAL_UPDATE",Vt="WINDOW_DIMENSIONS",$t="ERROR",Yt="TRY_RECOVER_IMAGE_DATA",Xt="IMPORT_FILES",zt="ADD_TO_QUEUE"},23860:function(t,e,r){r.d(e,{c:function(){return a},C:function(){return n}});r(89554);var n=[{key:"printerUrl",saveLocally:!0,saveExport:["settings"],value:""},{key:"printerParams",saveLocally:!0,saveExport:["settings"],value:""},{key:"activePalette",saveLocally:!0,saveExport:["settings","remote"],value:"bw"},{key:"images",saveLocally:!0,saveExport:["selected_images","images","remote"],value:[]},{key:"galleryView",saveLocally:!0,saveExport:["settings"],value:"1x"},{key:"exportScaleFactors",saveLocally:!0,saveExport:["settings","remote"],value:[4]},{key:"exportFileTypes",saveLocally:!0,saveExport:["settings","remote"],value:["png"]},{key:"pageSize",saveLocally:!0,saveExport:["settings","remote"],value:15},{key:"imageSelection",saveLocally:!0,saveExport:["selected_images"],value:[]},{key:"rgbnImages",saveLocally:!0,saveExport:[],value:{}},{key:"editImage",saveLocally:!0,saveExport:[],value:null},{key:"videoParams",saveLocally:!0,saveExport:["settings","remote"],value:{}},{key:"filtersActiveTags",saveLocally:!0,saveExport:[],value:[]},{key:"filtersVisible",saveLocally:!0,saveExport:[],value:!1},{key:"savFrameTypes",saveLocally:!0,saveExport:["settings","remote"],value:"int"},{key:"sortBy",saveLocally:!0,saveExport:["settings","remote"],value:"created_asc"},{key:"handleExportFrame",saveLocally:!0,saveExport:["settings","remote"],value:"keep"},{key:"importLastSeen",saveLocally:!0,saveExport:["settings","remote"],value:!0},{key:"hideDates",saveLocally:!0,saveExport:["settings","remote"],value:!1},{key:"palettes",saveLocally:!0,saveExport:["palettes","remote"],value:[]},{key:"plugins",saveLocally:!0,saveRemote:!1,saveExport:["settings","remote"],value:[]},{key:"framesMessage",saveLocally:!0,saveExport:["settings","remote"],value:0},{key:"frames",saveLocally:!0,saveExport:["frames","remote"],value:[]},{key:"recentImports",saveLocally:!0,saveExport:[],value:[]},{key:"gitStorage",saveLocally:!0,saveExport:[],value:{use:!1,owner:"",repo:"",branch:"",token:"",throttle:"330"}},{key:"dropboxStorage",saveLocally:!0,saveExport:[],value:{path:""}},{key:"useSerials",saveLocally:!0,saveExport:[],value:!1},{key:"syncLastUpdate",saveLocally:!0,saveExport:[],value:{dropbox:0,local:0}}],a={};n.forEach((function(t){var e=t.key,r=t.value;a[e]=r}))},48766:function(t,e,r){r.d(e,{Dh:function(){return n},TZ:function(){return a},z2:function(){return o},ee:function(){return i},Vn:function(){return u},oJ:function(){return c},VP:function(){return l}});var n="__filter:untagged__",a="__filter:new__",o="__filter:mono__",i="__filter:rgb__",u="__filter:recent__",c="__filter:favourite__",l="__new:palette__"},97768:function(t,e,r){r(43290),r(66992),r(39575),r(41539),r(49743),r(92990),r(18927),r(33105),r(35035),r(74345),r(7174),r(32846),r(44731),r(77209),r(96319),r(58867),r(37789),r(33739),r(29368),r(14483),r(12056),r(3462),r(30678),r(27462),r(33824),r(55021),r(12974),r(15016),r(89554),r(54747),r(57327),r(21249),r(92222),r(47042),r(69600),r(91058),r(66528),r(74916),r(15306),r(69070),r(79753),r(82526),r(41817),r(32165),r(78783),r(33948),r(91038),r(68309);var n=r(18417);function a(t){return function(t){if(Array.isArray(t))return o(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||function(t,e){if(!t)return;if("string"==typeof t)return o(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);"Object"===r&&t.constructor&&(r=t.constructor.name);if("Map"===r||"Set"===r)return Array.from(t);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return o(t,e)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function o(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function i(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}var u="FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFF",c=20,l=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.canvas=null,this.tiles=[],this.colors=[],this.rawImageData=[],this.lockFrame=!1,this.invertPalette=!1,this.bwPalette=[16777215,11184810,5592405,0],this.colorData=this.bwPalette,this.blackLine=Array(20).fill(u),this.whiteLine=Array(20).fill("00000000000000000000000000000000"),this.tileIndexIsFramePart=n.Z}var e,r,o;return e=t,r=[{key:"update",value:function(t){var e=this,r=t.canvas,n=void 0===r?null:r,a=t.tiles,o=void 0===a?[]:a,i=t.palette,u=void 0===i?[]:i,c=t.lockFrame,l=void 0!==c&&c,f=t.invertPalette,s=void 0!==f&&f,p=this.setCanvas(n),y=this.setPalette(u,s),d=this.setLockFrame(l);(p||y||d||!this.tiles.length)&&(this.tiles=[]);var h=this.setTiles(o),m=this.getHeight();if(0!==m){if(this.canvas){if(this.canvas.height!==m||!this.rawImageData.length){this.canvas.height=m;var v=new Uint8ClampedArray(160*m*4);this.rawImageData.forEach((function(t,e){v[e]=t})),this.rawImageData=v}h.forEach((function(t){var r=t.index,n=t.newTile;e.renderTile(r,n)})),this.updateCanvas(m)}}else this.canvas.height=0}},{key:"updateCanvas",value:function(t){var e,r=this.canvas.getContext("2d");try{e=new ImageData(this.rawImageData,160,t)}catch(n){e=r.getImageData(0,0,160,t),this.rawImageData.forEach((function(t,r){e.data[r]=t}))}r.putImageData(e,0,0)}},{key:"getScaledCanvas",value:function(t){var e=this,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"keep",n=360===this.tiles.length?r:"keep",a=this.getScaleCanvasSize(n),o=a.initialHeight,i=a.initialWidth,u=a.tilesPerLine,c=document.createElement("canvas"),l=c.getContext("2d");return c.width=i*t,c.height=o*t,this.getExportTiles(n).forEach((function(n,a){e.paintTileScaled(e.decodeTile(n),a,l,t,u,r)})),c}},{key:"getScaleCanvasSize",value:function(t){switch(t){case"keep":return{initialHeight:this.getHeight(),initialWidth:160,tilesPerLine:c};case"crop":return{initialHeight:this.getHeight()-32,initialWidth:128,tilesPerLine:16};case"square_black":case"square_white":case"square_smart":return{initialHeight:this.getHeight()+16,initialWidth:160,tilesPerLine:c};default:throw new Error("unknown export mode ".concat(t))}}},{key:"getExportTiles",value:function(t){var e=this;switch(t){case"keep":return this.tiles;case"crop":return this.tiles.map((function(t,r){return e.tileIndexIsFramePart(r,"keep")?null:t})).filter(Boolean);case"square_black":return[].concat(a(this.blackLine),a(this.tiles),a(this.blackLine));case"square_white":return[].concat(a(this.whiteLine),a(this.tiles),a(this.whiteLine));case"square_smart":return[].concat(a(this.smartTile("first")),a(this.tiles),a(this.smartTile("last")));default:throw new Error("unknown export mode ".concat(t))}}},{key:"smartTile",value:function(t){switch(t){case"first":return this.tiles.slice(0,20).map((function(t){return Array(8).fill(t.slice(0,4)).join("")}));case"last":return this.tiles.slice(340,360).map((function(t){return Array(8).fill(t.slice(28,32)).join("")}));default:return this.blackLine}}},{key:"setCanvas",value:function(t){return this.canvas!==t&&(this.canvas=t,!0)}},{key:"setPalette",value:function(t,e){return(JSON.stringify(this.colors)!==JSON.stringify(t)||this.invertPalette!==e)&&(this.colors=t,this.invertPalette=e,this.colorData=this.colors.map((function(t){return 7!==t.length?null:parseInt(t.substring(1),16)})),!0)}},{key:"setLockFrame",value:function(t){return t!==this.lockFrame&&(this.lockFrame=t,!0)}},{key:"setTiles",value:function(t){var e=this,r=t.map((function(t,r){return t!==e.tiles[r]?{index:r,newTile:t}:null})).filter(Boolean);return this.tiles=t,r}},{key:"renderTile",value:function(t,e){var r=this.decodeTile(e);this.paintTile(r,t)}},{key:"decodeTile",value:function(){for(var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:u,e=t.replace(/[^0-9A-F]/gi,"").padEnd(32,"f"),r=new Array(16),n=0;n<r.length;n+=1)r[n]=parseInt(e.substr(2*n,2),16);for(var a=new Array(64),o=0;o<8;o+=1)for(var i=0;i<8;i+=1){var c=r[2*o+1]>>7-i&1,l=r[2*o]>>7-i&1;a[8*o+i]=c<<1|l}return a}},{key:"getRGBValue",value:function(t,e,r,n){var a=this.lockFrame&&"crop"!==n&&this.tileIndexIsFramePart(r,n)?this.bwPalette:this.colorData,o=this.invertPalette?a[3-t[e]]:a[t[e]];return{r:(16711680&o)>>16,g:(65280&o)>>8,b:255&o}}},{key:"paintTile",value:function(t,e){for(var r=e%c*8,n=8*Math.floor(e/c),a=0;a<8;a+=1)for(var o=0;o<8;o+=1){var i=4*(r+a+160*(n+o)),u=this.getRGBValue(t,8*o+a,e,"keep");this.rawImageData[i]=u.r,this.rawImageData[i+1]=u.g,this.rawImageData[i+2]=u.b,this.rawImageData[i+3]=255}}},{key:"paintTileScaled",value:function(t,e,r,n,a,o){for(var i=e%a*8*n,u=8*Math.floor(e/a)*n,c=0;c<8;c+=1)for(var l=0;l<8;l+=1){var f=this.getRGBValue(t,8*l+c,e,o);r.fillStyle="rgb(".concat(f.r,", ").concat(f.g,", ").concat(f.b,")"),r.fillRect(i+c*n,u+l*n,n+1,n+1)}}},{key:"getHeight",value:function(){return 8*Math.ceil(this.tiles.length/c)}}],r&&i(e.prototype,r),o&&i(e,o),t}();e.Z=l},24022:function(t,e,r){r.d(e,{_I:function(){return o},qe:function(){return i},Rg:function(){return u}});var n;r(69070);function a(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}var o={NORMAL:"normal",NORMAL_S:"normal_s",LIGHTEN:"lighten",SCREEN:"screen",DODGE:"dodge",DODGE_S:"dodge_s",ADDITION:"addition",DARKEN:"darken",MULTIPLY:"multiply",BURN:"burn",BURN_S:"burn_s",OVERLAY:"overlay",SOFTLIGHT:"softlight",SOFTLIGHT_S:"softlight_s",HARDLIGHT:"hardlight",DIFFERENCE:"difference",SUBTRACT:"subtract",SUBTRACT_S:"subtract_s",GRAIN_EXTRACT:"grainextract",GRAIN_EXTRACT_S:"grainextract_s",GRAIN_MERGE:"grainmerge",DIVIDE:"divide",DIVIDE_S:"divide_s"},i=(a(n={},o.NORMAL,(function(t,e){return t})),a(n,o.LIGHTEN,(function(t,e){return Math.max(e,t)})),a(n,o.SCREEN,(function(t,e){return 1-(1-e)*(1-t)})),a(n,o.DODGE,(function(t,e){return t/(1-e)})),a(n,o.ADDITION,(function(t,e){return e+t})),a(n,o.DARKEN,(function(t,e){return Math.min(e,t)})),a(n,o.MULTIPLY,(function(t,e){return e*t})),a(n,o.BURN,(function(t,e){return 1-(1-t)/e})),a(n,o.OVERLAY,(function(t,e){return t<.5?2*t*e:1-2*(1-e)*(1-t)})),a(n,o.SOFTLIGHT,(function(t,e){return(1-t)*i[o.MULTIPLY](t,e)+t*i[o.SCREEN](t,e)})),a(n,o.DIFFERENCE,(function(t,e){return Math.abs(t-e)})),a(n,o.SUBTRACT,(function(t,e){return t-e})),a(n,o.GRAIN_EXTRACT,(function(t,e){return t-e+.5})),a(n,o.GRAIN_MERGE,(function(t,e){return t+e-.5})),a(n,o.DIVIDE,(function(t,e){return t/e})),a(n,o.NORMAL_S,(function(t,e){return i[o.NORMAL](e,t)})),a(n,o.DODGE_S,(function(t,e){return i[o.DODGE](e,t)})),a(n,o.BURN_S,(function(t,e){return i[o.BURN](e,t)})),a(n,o.HARDLIGHT,(function(t,e){return i[o.OVERLAY](e,t)})),a(n,o.SOFTLIGHT_S,(function(t,e){return i[o.SOFTLIGHT](e,t)})),a(n,o.SUBTRACT_S,(function(t,e){return i[o.SUBTRACT](e,t)})),a(n,o.GRAIN_EXTRACT_S,(function(t,e){return i[o.GRAIN_EXTRACT](e,t)})),a(n,o.DIVIDE_S,(function(t,e){return i[o.DIVIDE](e,t)})),n),u=[{id:o.NORMAL,label:"Normal (ignore neutral layer)"},{id:o.NORMAL_S,label:"Normal ⇵ (only neutral layer)"},{id:o.LIGHTEN,label:"Lighten only"},{id:o.SCREEN,label:"Screen"},{id:o.DODGE,label:"Dodge"},{id:o.DODGE_S,label:"Dodge ⇵"},{id:o.ADDITION,label:"Addition"},{id:o.DARKEN,label:"Darken only"},{id:o.MULTIPLY,label:"Multiply"},{id:o.BURN,label:"Burn"},{id:o.BURN_S,label:"Burn ⇵"},{id:o.OVERLAY,label:"Overlay"},{id:o.SOFTLIGHT,label:"Soft light"},{id:o.SOFTLIGHT_S,label:"Soft light ⇵"},{id:o.HARDLIGHT,label:"Hard light"},{id:o.DIFFERENCE,label:"Difference"},{id:o.SUBTRACT,label:"Subtract"},{id:o.SUBTRACT_S,label:"Subtract ⇵"},{id:o.GRAIN_EXTRACT,label:"Grain extract"},{id:o.GRAIN_EXTRACT_S,label:"Grain extract ⇵"},{id:o.GRAIN_MERGE,label:"Grain merge"},{id:o.DIVIDE,label:"Divide"},{id:o.DIVIDE_S,label:"Divide ⇵"}]},17036:function(t,e,r){r(21249),r(47042),r(69600),r(43290),r(68304),r(30489),r(12419),r(78011),r(74819),r(38880),r(69070),r(79753),r(82526),r(41817),r(41539),r(32165),r(66992),r(78783),r(33948),r(68309),r(91038);var n=r(97768),a=r(24022);function o(t){return o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},o(t)}function i(t){return function(t){if(Array.isArray(t))return l(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||c(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function u(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var r=t&&("undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"]);if(null==r)return;var n,a,o=[],i=!0,u=!1;try{for(r=r.call(t);!(i=(n=r.next()).done)&&(o.push(n.value),!e||o.length!==e);i=!0);}catch(t){u=!0,a=t}finally{try{i||null==r.return||r.return()}finally{if(u)throw a}}return o}(t,e)||c(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function c(t,e){if(t){if("string"==typeof t)return l(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?l(t,e):void 0}}function l(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function f(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function s(t,e,r){return s="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=h(t)););return t}(t,e);if(n){var a=Object.getOwnPropertyDescriptor(n,e);return a.get?a.get.call(r):a.value}},s(t,e,r||t)}function p(t,e){return p=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t},p(t,e)}function y(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var r,n=h(t);if(e){var a=h(this).constructor;r=Reflect.construct(n,arguments,a)}else r=n.apply(this,arguments);return d(this,r)}}function d(t,e){return!e||"object"!==o(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function h(t){return h=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)},h(t)}var m=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&p(t,e)}(c,t);var e,r,n,o=y(c);function c(){var t;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,c),(t=o.call(this)).blackLine=c.rgbnTiles([t.blackLine,t.blackLine,t.blackLine,t.blackLine]),t.whiteLine=c.rgbnTiles([t.whiteLine,t.whiteLine,t.whiteLine,t.whiteLine]),t}return e=c,n=[{key:"rgbnTiles",value:function(t){var e=u(t,4),r=e[0],n=e[1],a=e[2],o=e[3],c=Math.max((null==r?void 0:r.length)||0,(null==n?void 0:n.length)||0,(null==a?void 0:a.length)||0,(null==o?void 0:o.length)||0);return i(Array(c)).map((function(t,e){return{r:null==r?void 0:r[e],g:null==n?void 0:n[e],b:null==a?void 0:a[e],n:null==o?void 0:o[e]}}))}}],(r=[{key:"setPalette",value:function(t){return!!t&&JSON.stringify(this.palette)!==JSON.stringify(t)&&(this.palette=t,!0)}},{key:"decodeTile",value:function(t){var e=t.r,r=t.g,n=t.b,a=t.n;return{r:s(h(c.prototype),"decodeTile",this).call(this,e),g:s(h(c.prototype),"decodeTile",this).call(this,r),b:s(h(c.prototype),"decodeTile",this).call(this,n),n:a?s(h(c.prototype),"decodeTile",this).call(this,a):null}}},{key:"getRGBValue",value:function(t,e,r,n){var a=t.r,o=t.g,i=t.b,u=t.n;if(this.lockFrame&&"crop"!==n&&this.tileIndexIsFramePart(r,n)&&u)try{return s(h(c.prototype),"getRGBValue",this).call(this,u,e,r,n)}catch(t){return{r:255*Math.random(),g:255*Math.random(),b:255*Math.random()}}return this.blendColors({r:a[e],g:o[e],b:i[e],n:!!u&&u[e]})}},{key:"smartTile",value:function(t){var e=this;switch(t){case"first":return this.tiles.slice(0,20).map((function(t){return{r:t.r?Array(8).fill(t.r.slice(0,4)).join(""):s(h(c.prototype),"smartTile",e).call(e,null),g:t.g?Array(8).fill(t.g.slice(0,4)).join(""):s(h(c.prototype),"smartTile",e).call(e,null),b:t.b?Array(8).fill(t.b.slice(0,4)).join(""):s(h(c.prototype),"smartTile",e).call(e,null),n:t.n?Array(8).fill(t.n.slice(0,4)).join(""):s(h(c.prototype),"smartTile",e).call(e,null)}}));case"last":return this.tiles.slice(340,360).map((function(t){return{r:t.r?Array(8).fill(t.r.slice(28,32)).join(""):s(h(c.prototype),"smartTile",e).call(e,null),g:t.g?Array(8).fill(t.g.slice(28,32)).join(""):s(h(c.prototype),"smartTile",e).call(e,null),b:t.b?Array(8).fill(t.b.slice(28,32)).join(""):s(h(c.prototype),"smartTile",e).call(e,null),n:t.n?Array(8).fill(t.n.slice(28,32)).join(""):s(h(c.prototype),"smartTile",e).call(e,null)}}));default:return s(h(c.prototype),"smartTile",this).call(this,null)}}},{key:"blendColors",value:function(t){var e=t.r,r=t.g,n=t.b,o=t.n,i={r:this.palette.r[3-e],g:this.palette.g[3-r],b:this.palette.b[3-n]};if(!1===o)return i;var u=this.palette.blend||a._I.MULTIPLY;if(!a.qe[u])return i;var c=function(t,e){return 255*Math.max(0,Math.min(1,a.qe[u](t/255,e/255)))};return{r:c(this.palette.r[3-e],this.palette.n[3-o]),g:c(this.palette.g[3-r],this.palette.n[3-o]),b:c(this.palette.b[3-n],this.palette.n[3-o])}}},{key:"getHeight",value:function(){return 144}}])&&f(e.prototype,r),n&&f(e,n),c}(n.Z);e.Z=m},75500:function(t,e,r){r.d(e,{v:function(){return i},e:function(){return o}});r(66992),r(41539),r(88674),r(78783),r(33948),r(69600),r(21249),r(57327),r(74916),r(15306),r(23123),r(47042),r(43290);var n=r(18417),a=r(59833),o=function(t,e){return r.e(591).then(r.t.bind(r,99591,23)).then((function(r){var o=r.default,i=e.filter((function(t,e){return(0,n.Z)(e,"keep")})).map((function(t){return t.replace(/ /gi,"")})).join("\n"),u=o.deflate(i,{to:"string",strategy:1,level:8});return a.$0.setItem(t,u)}))},i=function(t){return t?a.$0.getItem(t).then((function(t){return t?r.e(591).then(r.t.bind(r,99591,23)).then((function(e){var r=e.default;try{var n=r.inflate(t,{to:"string"}).split("\n");return{upper:n.slice(0,40),left:Array(14).fill(0).map((function(t,e){return n.slice(4*e+40,4*e+42)})),right:Array(14).fill(0).map((function(t,e){return n.slice(4*e+42,4*e+44)})),lower:n.slice(96,136)}}catch(t){return null}})):null})):Promise.resolve(null)}},2738:function(t,e,r){r(41539),r(88674),r(89554),r(54747),r(79753),r(82526),r(41817),r(32165),r(66992),r(78783),r(33948),r(91038),r(47042),r(68309);var n=r(75500);function a(t){return function(t){if(Array.isArray(t))return o(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||function(t,e){if(!t)return;if("string"==typeof t)return o(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);"Object"===r&&t.constructor&&(r=t.constructor.name);if("Map"===r||"Set"===r)return Array.from(t);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return o(t,e)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function o(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}e.Z=function(t,e){return 360!==t.length?Promise.resolve(t):(0,n.v)(e).then((function(e){var r=a(t);return e.upper.forEach((function(t,e){r[e]=t})),e.lower.forEach((function(t,e){r[e+320]=t})),e.left.forEach((function(t,e){r[20*e+40]=t[0],r[20*e+41]=t[1]})),e.right.forEach((function(t,e){r[20*e+58]=t[0],r[20*e+59]=t[1]})),r})).catch((function(){return t}))}},20170:function(t,e,r){r(92222),r(57327),r(34553),r(26699),r(32023),r(79753),r(82526),r(41817),r(41539),r(32165),r(66992),r(78783),r(33948),r(91038),r(47042),r(68309);function n(t){return function(t){if(Array.isArray(t))return a(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||function(t,e){if(!t)return;if("string"==typeof t)return a(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);"Object"===r&&t.constructor&&(r=t.constructor.name);if("Map"===r||"Set"===r)return Array.from(t);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return a(t,e)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function a(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}e.Z=function(t){var e=t.initial,r=t.add,a=t.remove,o=[].concat(n(e),n(r));return o.filter((function(t,e){return o.findIndex((function(e){return e===t}))===e})).filter((function(t){return!a.includes(t)}))}},15168:function(t,e,r){r(73210),r(74916),r(4723),r(24603),r(39714),r(92222),r(27852);e.Z=function(t,e){if(!t.trim())return"";if("/"===t&&"ws"!==e)return t;var r=!!t.match(new RegExp("^".concat(e,"(s)?:\\/\\/"),"gi"));return"".concat(r?"":"".concat(e,"://")).concat(t).concat(t.endsWith("/")?"":"/")}},33761:function(t,e,r){r.d(e,{Z:function(){return i}});r(66992),r(41539),r(88674),r(78783),r(33948),r(21249),r(89554),r(54747);var n=r(93162),a=function(t){return"function"==typeof t.arrayBuffer?t.arrayBuffer():new Promise((function(e){var r=new FileReader;r.onload=function(t){e(t.target.result)},r.readAsArrayBuffer(t)}))},o=r(93572),i=function(t){return function(e){if(1!==e.length)r.e(733).then(r.t.bind(r,55733,23)).then((function(r){var i=new(0,r.default);Promise.all(e.map((function(t){var e=t.filename,r=t.blob;return a(r).then((function(t){return{filename:e,arrayBuffer:t}}))}))).then(o.Z).then((function(t){t.forEach((function(t){var e=t.uFilename,r=t.arrayBuffer;i.file(e,r)}))})).then((function(){return i.generateAsync({type:"blob",compression:"DEFLATE"}).then((function(e){(0,n.saveAs)(e,"".concat(t,".zip"))}))}))}));else{var i=e[0];(0,n.saveAs)(i.blob,i.filename)}}}},75226:function(t,e,r){r(57327),r(21249),r(41539),r(88674),r(85827),r(69600),r(74916),r(4723),r(92222),r(66992),r(78783),r(33948),r(84944),r(79753),r(82526),r(41817),r(32165),r(91038),r(47042),r(68309);var n=r(97768),a=r(17036),o=r(84040),i=r(7704),u=r(15177);function c(t){return function(t){if(Array.isArray(t))return l(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||function(t,e){if(!t)return;if("string"==typeof t)return l(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);"Object"===r&&t.constructor&&(r=t.constructor.name);if("Map"===r||"Set"===r)return Array.from(t);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return l(t,e)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function l(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}e.Z=function(t){return function(e,r){return function(l){var f=t.exportScaleFactors,s=t.exportFileTypes,p=t.handleExportFrame,y=!!r.hashes,d=y?new a.Z:new n.Z,h=r.lockFrame||!1,m=r.invertPalette||!1;y?d.update({tiles:l,palette:e,lockFrame:h}):d.update({tiles:l,palette:e.palette,lockFrame:h,invertPalette:m});var v=c(f).filter((function(t){return"number"==typeof t})),g=c(s);v.length||v.push(4),g.length||g.push("png");var b=v.map((function(t){return g.map((function(n){return new Promise((function(a){var l=(0,o.Z)({image:r,palette:e,exportScaleFactor:t});if("txt"===n){if(r.hashes)return void a(null);(0,i.zD)(r.hash,null).then((function(t){var e=t.map((function(t){return t.match(/.{1,2}/g).join(" ")})).reduce((function(t,e,r){return[].concat(c(t),r%40?[e]:[u.fb,e])}),[]),o=[u.jU].concat(c(e),[u.T6,u.oU]).join("\n");a({folder:"images",filename:"".concat(l,".").concat(n),blob:new Blob(new Array(o),{type:"text/plain"}),title:r.title})}))}else{d.getScaledCanvas(t,p).toBlob((function(t){a({filename:"".concat(l,".").concat(n),blob:t,title:r.title})}),"image/".concat(n),1)}}))}))}));return Promise.all(b.flat()).then((function(t){return t.filter(Boolean)}))}}}},98642:function(t,e,r){r.d(e,{L:function(){return n.Z},j:function(){return a.Z}});var n=r(33761),a=r(75226)},84040:function(t,e,r){r(83112),r(83710),r(41539),r(39714),r(69600),r(21249),r(57327);var n=r(27484),a=r.n(n),o=r(10285),i=r.n(o),u=r(15177);a().extend(i());e.Z=function(t){var e,r,n,o,i,c,l=t.image,f=void 0!==l&&l,s=t.palette,p=void 0!==s&&s,y=t.exportScaleFactor,d=void 0!==y&&y,h=t.frameRate,m=void 0!==h&&h,v=t.altTitle,g=void 0!==v&&v,b=t.useCurrentDate,O=void 0!==b&&b,A=t.frameName,S=void 0!==A&&A,F=t.paletteShort,w=void 0!==F&&F,E=O?a()():a()(f.created,u.vc),D=!!E.isValid()&&E.format(u.z3),j=w||!!p&&(p.shortName||(r=(e=p).r,n=e.g,o=e.b,i=e.n,c=function(t){return t.toString(16).padStart(2,"0")},[r.map(c).join(""),n.map(c).join(""),o.map(c).join(""),i.map(c).join("")].join("")));return[D,f&&f.title?f.title:g,d?"".concat(d,"x"):null,m?"".concat(m,"fps"):null,S,j].filter(Boolean).join("-")}},77306:function(t,e,r){r(26699),r(32023),r(21249),r(69826);var n=r(27484),a=r.n(n),o=r(48766),i=r(15177);e.Z=function(t,e){return function(r){if(t.length){if(t.includes(o.Dh)&&0===r.tags.length)return!0;if(t.includes(o.TZ))if(a()(r.created,i.vc).unix()>a()().subtract("1","day").unix())return!0;return t.includes(o.Vn)?e.map((function(t){return t.hash})).includes(r.hash):!(!t.includes(o.ee)||!r.hashes)||(!(!t.includes(o.z2)||r.hashes)||!!r.tags.find((function(e){return t.includes(e)})))}return!0}}},81477:function(t,e,r){r(57327),r(21249),r(2707),r(79753),r(82526),r(41817),r(41539),r(32165),r(66992),r(78783),r(33948),r(91038),r(47042),r(68309);var n=r(49965),a=r(77306);function o(t){return function(t){if(Array.isArray(t))return i(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||function(t,e){if(!t)return;if("string"==typeof t)return i(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);"Object"===r&&t.constructor&&(r=t.constructor.name);if("Map"===r||"Set"===r)return Array.from(t);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return i(t,e)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function i(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}e.Z=function(t){var e=t.images,r=t.filtersActiveTags,i=t.sortBy,u=t.recentImports;return o(e).map(n.Np).sort((0,n.$b)({sortBy:i})).map(n.fD).filter((0,a.Z)(r,u))}},88791:function(t,e,r){r(85827),r(68309),r(74916),r(4723),r(69826);var n=function(t,e){switch(t){case"hk":return"Hallo Katze!";case"int":return"International Frames (GameBoy Camera)";case"jp":return"Japanese Frames (Pocket Camera)";default:return e}};e.Z=function(t){return t.reduce((function(t,e){var r,a=e.id,o=e.name;try{r=a.match(/^[a-z]{2,}/g)[0]}catch(e){return t}return t.find((function(t){return t.id===r}))||t.push({id:r,name:n(r,o)}),t}),[])}},14929:function(t,e,r){r.d(e,{Z:function(){return p}});r(89554),r(54747),r(26699),r(32023),r(57327),r(83710),r(41539),r(88674),r(69070),r(47941),r(82526),r(38880),r(49337),r(33321);var n=r(23860),a=(r(66992),r(78783),r(33948),r(21249),r(59833)),o=function(t,e){return Promise.all(e.map((function(t){return a.Rt.getItem(t).then((function(e){return{hash:t,data:e}}))}))).then((function(t){var e={};return t.forEach((function(t){var r=t.hash,n=t.data;e[r]=n})),e}))},i=function(t){var e=t.map((function(t){return t.id}));return Promise.all(e.map((function(t){return a.$0.getItem(t).then((function(e){return{frameId:t,data:e}}))}))).then((function(t){var e={};return t.forEach((function(t){var r=t.frameId,n=t.data;e["frame-".concat(r)]=n})),e}))},u=function(t,e){var r=e.images,n=e.imageSelection;switch(t){case"images":return r.map((function(t){return t.hash}));case"selected_images":return n;default:return[]}},c=r(97377);function l(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function f(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?l(Object(r),!0).forEach((function(e){s(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):l(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function s(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}var p=function(t){return function(e,r){var a=t.getState(),l=JSON.parse(localStorage.getItem("gbp-web-state"));delete l.gitStorage,delete l.dropboxStorage,"esp8266"===(0,c.d)().env&&delete l.printerUrl;var s={};switch(n.C.forEach((function(t){var r=t.saveExport,n=t.key;r.includes(e)&&(s[n]=l[n],"images"===n&&"selected_images"===e&&(s[n]=s[n].filter((function(t){var r=t.hash;return u(e,a).includes(r)}))),"palettes"===n&&(s[n]=l[n].filter((function(t){return!t.isPredefined}))))})),s.lastUpdateUTC=r||Math.floor((new Date).getTime()/1e3),e){case"debug":return Promise.resolve(JSON.stringify({state:l},null,2));case"settings":case"remote":return Promise.resolve(JSON.stringify({state:s},null,2));case"images":case"selected_images":return o(e,u(e,a)).then((function(t){return JSON.stringify(f({state:s},t),null,2)}));case"frames":return i(a.frames).then((function(t){return JSON.stringify(f({state:s},t),null,2)}));case"palettes":return Promise.resolve(s.palettes).then((function(t){return JSON.stringify({state:{palettes:t}},null,2)}));default:return null}}}},39506:function(t,e,r){r(69826);e.Z=function(t,e){var r=t.palettes,n=e.hashes,a=e.palette;return n?a:r.find((function(t){return t.shortName===a}))}},16717:function(t,e,r){r(69826);e.Z=function(t,e,r){var n=t.images,a=e.r,o=e.g,i=e.b,u=e.n;if(r)return{r:r,g:r,b:r,n:r};var c=n.find((function(t){return t.hash===a})),l=n.find((function(t){return t.hash===o})),f=n.find((function(t){return t.hash===i})),s=n.find((function(t){return t.hash===u}));return{r:c?c.frame:null,g:l?l.frame:null,b:f?f.frame:null,n:s?s.frame:null}}},28014:function(t,e,r){r(66992),r(41539),r(88674),r(78783),r(33948);var n=r(7704),a=r(16717),o=r(17036);e.Z=function(t){return function(e,r,i){var u=e.hash,c=e.frame,l=e.hashes;if(!l)return(0,n.zD)(u,c,r,i);var f=(0,a.Z)(t,l,c);return Promise.all([(0,n.zD)(l.r,f.r||c,r,i),(0,n.zD)(l.g,f.g||c,r,i),(0,n.zD)(l.b,f.b||c,r,i),(0,n.zD)(l.n,f.n||c,r,i)]).then(o.Z.rgbnTiles)}}},36965:function(t,e,r){r(41539),r(88674);var n=r(48764).Buffer;e.Z=function(t,e){return new Promise((function(r,a){var o=new FileReader;switch(o.onload=function(t){var o=t.target;if(o.result)return"arrayBuffer"===e?void r(n.from(o.result)):void r(o.result);a(new Error("Filereader has no result"))},o.onerror=function(t){a(t)},e){case"arrayBuffer":o.readAsArrayBuffer(t);break;case"text":o.readAsText(t);break;case"binaryString":o.readAsBinaryString(t);break;case"dataURL":o.readAsDataURL(t);break;default:a(new Error('readAs param missing or unknown type "'.concat(e,'"')))}}))}},93572:function(t,e,r){r(21249),r(74916),r(23123),r(69600),r(26699),r(92222),r(69070),r(47941),r(82526),r(57327),r(38880),r(89554),r(54747),r(49337),r(33321);function n(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function a(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?n(Object(r),!0).forEach((function(e){o(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):n(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function o(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}e.Z=function(t){var e=[];return t.map((function(t){for(var r=t.filename,n=r.split("."),o=n.pop(),i=n.join("."),u=r,c=0;e.includes(u);)c+=1,u="".concat(i,"_(").concat(c,").").concat(o);return e.includes(u)||e.push(u),a(a({},t),{},{uFilename:u})}))}},49965:function(t,e,r){r.d(e,{Np:function(){return c},fD:function(){return l},$b:function(){return f}});r(74916),r(23123),r(69070),r(47941),r(82526),r(57327),r(38880),r(89554),r(54747),r(49337),r(33321),r(79753),r(41817),r(41539),r(32165),r(66992),r(78783),r(33948),r(47042),r(68309),r(91038);function n(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var r=t&&("undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"]);if(null==r)return;var n,a,o=[],i=!0,u=!1;try{for(r=r.call(t);!(i=(n=r.next()).done)&&(o.push(n.value),!e||o.length!==e);i=!0);}catch(t){u=!0,a=t}finally{try{i||null==r.return||r.return()}finally{if(u)throw a}}return o}(t,e)||function(t,e){if(!t)return;if("string"==typeof t)return a(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);"Object"===r&&t.constructor&&(r=t.constructor.name);if("Map"===r||"Set"===r)return Array.from(t);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return a(t,e)}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function a(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function o(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function i(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?o(Object(r),!0).forEach((function(e){u(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):o(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function u(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}var c=function(t,e){return i(i({},t),{},{sortIndex:e})},l=function(t){return i(i({},t),{},{sortIndex:void 0})},f=function(t){var e=t.sortBy;return function(t,r){if(!e)return 0;var a=n(e.split("_"),2),o=a[0],i=a[1],u=t[o],c=r[o],l="desc"===i?-1:1;return u&&c?u>c?l:u<c?-l:t.sortIndex<r.sortIndex?l:-l:0}}},7704:function(t,e,r){r.d(e,{IV:function(){return h},zD:function(){return d},a1:function(){return y}});r(66992),r(41539),r(88674),r(78783),r(33948),r(69600),r(21249),r(74916),r(15306),r(23123),r(73210),r(84944),r(4723),r(66528),r(92222),r(79753),r(82526),r(41817),r(32165),r(91038),r(47042),r(68309),r(83710),r(39714);function n(t){return function(t){if(Array.isArray(t))return a(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||function(t,e){if(!t)return;if("string"==typeof t)return a(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);"Object"===r&&t.constructor&&(r=t.constructor.name);if("Map"===r||"Set"===r)return Array.from(t);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return a(t,e)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function a(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}var o={"":"006666666600FFFF"," ":"FFFFFFFFFFFFFFFF",0:"FFDDAAAAAADDFFFF",1:"FFDD99DDDDDDFFFF",2:"FF99EEDDBB88FFFF",3:"FF99EE99EE99FFFF",4:"FFDDBBBB88EEFFFF",5:"FF88BB99EE99FFFF",6:"FFCCBB99AADDFFFF",7:"FF88EEDDBBBBFFFF",8:"FFDDAADDAADDFFFF",9:"FFDDAACCEE99FFFF",a:"FFDDAAAA88AAFFFF",b:"FF99AA99AA99FFFF",c:"FFCCBBBBBBCCFFFF",d:"FF99AAAAAA99FFFF",e:"FF88BB99BB88FFFF",f:"FF88BB99BBBBFFFF",g:"FFCCBBAAAACCFFFF",h:"FFAAAA88AAAAFFFF",i:"FF88DDDDDD88FFFF",j:"FF99DDDDDDBBFFFF",k:"FFAAAA99AAAAFFFF",l:"FFBBBBBBBB88FFFF",m:"FFAA888AAAAAFFFF",n:"FFAA8A888AAAFFFF",o:"FFDDAAAAAADDFFFF",p:"FF99AA99BBBBFFFF",q:"FFDDAAAAAACCFFFF",r:"FF99AA99AAAAFFFF",s:"FFCCBBDDEE99FFFF",t:"FF88DDDDDDDDFFFF",u:"FFAAAAAAAACCFFFF",v:"FFAAAAAAAADDFFFF",w:"FFAAAA8A88AAFFFF",x:"FFAAAADDAAAAFFFF",y:"FFAAAADDDDDDFFFF",z:"FF88EEDDBB88FFFF","ä":"AADDAAAA88AAFFFF","ö":"AADDAAAAAADDFFFF","ü":"AAAFAAAAAACCFFFF","ß":"FF99AA99AA99BBFF",".":"FFFFFFFFFFDDFFFF","!":"DDDDDDDDFFDDFFFF","?":"DDAAEEDDFFDDFFFF","-":"FFFFFF88FFFFFFFF",_:"FFFFFFFFFF88FFFF",":":"FFFFDDFFDDFFFFFF"},i=function(t){var e=[].concat(n(t.toString(10).toLowerCase()),[" "," "]),r=e.shift(),a=e.shift(),i=o[r]||o[""],u=o[a]||o[""];return n(Array(16)).map((function(t,e){return"".concat(i[e]).concat(u[e])})).join("")};function u(t){return function(t){if(Array.isArray(t))return c(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||function(t,e){if(!t)return;if("string"==typeof t)return c(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);"Object"===r&&t.constructor&&(r=t.constructor.name);if("Map"===r||"Set"===r)return Array.from(t);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return c(t,e)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function c(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}var l="FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFF\n",f=function(t){var e=[],r="\nThe following hash is missing in\nyour indexedDb:\n".concat(t,"\n\nEither you imported a debug dump\nor your browser decided to do a\ncleanup.\n\nThis image might be able to be\nrecovered if you have set up git\nor dropbox sync.\n").trim().split("\n").map((function(t){return t.match(/.{1,32}/g)})).flat().map((function(t){return t||""})).map((function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return t.padEnd(32," ")})).map((function(t){return t.match(/.{1,2}/g).map((function(t){return i(t)}))})).map((function(t){return[l,l].concat(u(t),[l,l])})).flat();for(e.push.apply(e,u(u(Array(40)).map((function(){return l})))),e.push.apply(e,u(r));e.length<360;)e.push(l);return e},s=r(2738),p=r(59833),y=function(t){return r.e(705).then(r.t.bind(r,40705,23)).then((function(e){var n=e.default;return r.e(591).then(r.t.bind(r,99591,23)).then((function(e){var r=e.default,a=t.map((function(t){return t.replace(/ /gi,"")})).join("\n"),o=r.deflate(a,{to:"string",strategy:1,level:8}),i=n(o);return p.Rt.setItem(i,o).then((function(){return i}))}))}))},d=function(t,e,n){var a=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return t?r.e(591).then(r.t.bind(r,99591,23)).then((function(e){var r=e.default;return p.Rt.getItem(t).then((function(t){return r.inflate(t,{to:"string"}).split("\n")})).catch((function(){return"function"==typeof a&&a(t),n?[]:f(t)}))})).then((function(t){return e?(0,s.Z)(t,e):t})):Promise.resolve(null)},h=function(t){p.Rt.removeItem(t)}},18417:function(t,e){e.Z=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"keep",r=t-("keep"===e?0:20);if(r<40)return!0;if(r>=320)return!0;switch(r%20){case 0:case 1:case 18:case 19:return!0;default:return!1}}},81451:function(t,e,r){r(57327),r(34553);e.Z=function(t){return function(e){return e.filter((function(r,n){return e.findIndex((function(e){return e[t]===r[t]}))===n}))}}},31852:function(t,e,r){r(57327),r(34553);e.Z=function(t){return t.filter((function(e,r){return t.findIndex((function(t){return t===e}))===r}))}}}]);